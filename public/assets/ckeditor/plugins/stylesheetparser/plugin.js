/*
Copyright (c) 2003-2012, CKSource - Frederico Knabben. All rights reserved.
For licensing, see LICENSE.html or http://ckeditor.com/license
*/
!function(){function e(e,t,i){var a=e.join(" ");a=a.replace(/(,|>|\+|~)/g," "),a=a.replace(/\[[^\]]*/g,""),a=a.replace(/#[^\s]*/g,""),a=a.replace(/\:{1,2}[^\s]*/g,""),a=a.replace(/\s+/g," ");for(var n=a.split(" "),o=[],r=0;r<n.length;r++){var s=n[r];i.test(s)&&!t.test(s)&&-1==CKEDITOR.tools.indexOf(o,s)&&o.push(s)}return o}function t(t,i,a){var n,o=[],r=[];for(n=0;n<t.styleSheets.length;n++){var s=t.styleSheets[n],l=s.ownerNode||s.owningElement;if(!(l.getAttribute("data-cke-temp")||s.href&&"chrome://"==s.href.substr(0,9)))for(var d=s.cssRules||s.rules,c=0;c<d.length;c++)r.push(d[c].selectorText)}var u=e(r,i,a);for(n=0;n<u.length;n++){var h=u[n].split("."),p=h[0].toLowerCase(),m=h[1];o.push({name:p+"."+m,element:p,attributes:{"class":m}})}return o}CKEDITOR.plugins.add("stylesheetparser",{requires:["styles"],onLoad:function(){var e=CKEDITOR.editor.prototype;e.getStylesSet=CKEDITOR.tools.override(e.getStylesSet,function(e){return function(i){var a=this;e.call(this,function(e){var n=a.config.stylesheetParser_skipSelectors||/(^body\.|^\.)/i,o=a.config.stylesheetParser_validSelectors||/\w+\.\w+/;i(a._.stylesDefinitions=e.concat(t(a.document.$,n,o)))})}})}})}();