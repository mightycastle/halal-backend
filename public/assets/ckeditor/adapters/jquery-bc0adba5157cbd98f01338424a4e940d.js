/*
Copyright (c) 2003-2012, CKSource - Frederico Knabben. All rights reserved.
For licensing, see LICENSE.html or http://ckeditor.com/license
*/
!function(){CKEDITOR.config.jqueryOverrideVal="undefined"==typeof CKEDITOR.config.jqueryOverrideVal?!0:CKEDITOR.config.jqueryOverrideVal;var t=window.jQuery;"undefined"!=typeof t&&(t.extend(t.fn,{ckeditorGet:function(){var t=this.eq(0).data("ckeditorInstance");if(!t)throw"CKEditor not yet initialized, use ckeditor() with callback.";return t},ckeditor:function(e,i){if(!CKEDITOR.env.isCompatible)return this;if(!t.isFunction(e)){var n=i;i=e,e=n}return i=i||{},this.filter("textarea, div, p").each(function(){var n=t(this),s=n.data("ckeditorInstance"),a=n.data("_ckeditorInstanceLock"),o=this;s&&!a?e&&e.apply(s,[this]):a?CKEDITOR.on("instanceReady",function(t){var i=t.editor;setTimeout(function(){return i.element?(i.element.$==o&&e&&e.apply(i,[o]),void 0):(setTimeout(arguments.callee,100),void 0)},0)},null,null,9999):((i.autoUpdateElement||"undefined"==typeof i.autoUpdateElement&&CKEDITOR.config.autoUpdateElement)&&(i.autoUpdateElementJquery=!0),i.autoUpdateElement=!1,n.data("_ckeditorInstanceLock",!0),s=CKEDITOR.replace(o,i),n.data("ckeditorInstance",s),s.on("instanceReady",function(t){var i=t.editor;setTimeout(function(){if(!i.element)return setTimeout(arguments.callee,100),void 0;if(t.removeListener("instanceReady",this.callee),i.on("dataReady",function(){n.trigger("setData.ckeditor",[i])}),i.on("getData",function(t){n.trigger("getData.ckeditor",[i,t.data])},999),i.on("destroy",function(){n.trigger("destroy.ckeditor",[i])}),i.config.autoUpdateElementJquery&&n.is("textarea")&&n.parents("form").length){var s=function(){n.ckeditor(function(){i.updateElement()})};n.parents("form").submit(s),n.parents("form").bind("form-pre-serialize",s),n.bind("destroy.ckeditor",function(){n.parents("form").unbind("submit",s),n.parents("form").unbind("form-pre-serialize",s)})}i.on("destroy",function(){n.data("ckeditorInstance",null)}),n.data("_ckeditorInstanceLock",null),n.trigger("instanceReady.ckeditor",[i]),e&&e.apply(i,[o])},0)},null,null,9999))}),this}}),CKEDITOR.config.jqueryOverrideVal&&(t.fn.val=CKEDITOR.tools.override(t.fn.val,function(e){return function(i,n){var s,a="undefined"!=typeof i;return this.each(function(){var o=t(this),r=o.data("ckeditorInstance");if(!n&&o.is("textarea")&&r){if(!a)return s=r.getData(),null;r.setData(i)}else{if(!a)return s=e.call(o),null;e.call(o,i)}return!0}),a?this:s}})))}();