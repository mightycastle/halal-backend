Connecting to database specified by database.yml
DEPRECATION WARNING: Passing :tag, :class and others to use is deprecated. Please invoke b.use :label, :wrap_with => {:class=>"simple_label"} instead. (called from block (2 levels) in <top (required)> at /Users/kevinmuller/halalgems_backend/config/initializers/simple_form.rb:67)


Started GET "/admin/collections/admin_new_collection" for 127.0.0.1 at 2016-01-16 11:56:23 +0100
Processing by CollectionsController#admin_new_collection as HTML
  [1m[36mUser Load (0.3ms)[0m  [1mSELECT `users`.* FROM `users` WHERE `users`.`id` = 1 LIMIT 1[0m
  [1m[35m (0.2ms)[0m  BEGIN
  [1m[36m (0.1ms)[0m  [1mCOMMIT[0m
Completed 401 Unauthorized in 38ms


Started GET "/admin/collections/admin_new_collection" for 127.0.0.1 at 2016-01-16 11:56:23 +0100
Processing by CollectionsController#admin_new_collection as HTML
Completed 401 Unauthorized in 16ms


Started GET "/users/sign_in" for 127.0.0.1 at 2016-01-16 11:56:23 +0100
Processing by SessionsController#new as HTML
  Rendered sessions/new.html.slim within layouts/application (31.2ms)
Compiled application.css  (30ms)  (pid 27556)
Compiled application.js  (0ms)  (pid 27556)
  Rendered layouts/_header.html.erb (2.7ms)
  Rendered layouts/_main_menu.html.slim (8.5ms)
  Rendered layouts/_sub_main_menu.html.slim (3.6ms)
  Rendered layouts/_flash_messages.html.erb (0.5ms)
  [1m[35mBasicsPage Load (0.2ms)[0m  SELECT `basics_pages`.* FROM `basics_pages` WHERE `basics_pages`.`page_name` = 'Footer' LIMIT 1
  Rendered layouts/_footer.html.slim (21.2ms)
Completed 200 OK in 168ms (Views: 165.1ms | ActiveRecord: 1.3ms)


Started POST "/users/sign_in" for 127.0.0.1 at 2016-01-16 11:56:34 +0100
Processing by SessionsController#create as HTML
  Parameters: {"utf8"=>"âœ“", "authenticity_token"=>"ZhR8a2fYr/EQcBrBVm2c17tt7AHk64f/gvsZ5fOllxc=", "user"=>{"email"=>"kevin.muller1220@gmail.com", "password"=>"[FILTERED]"}, "button"=>""}
  [1m[36mUser Load (0.4ms)[0m  [1mSELECT `users`.* FROM `users` WHERE `users`.`email` = 'kevin.muller1220@gmail.com' LIMIT 1[0m
  [1m[35m (0.1ms)[0m  BEGIN
  [1m[36m (0.1ms)[0m  [1mCOMMIT[0m
  [1m[35m (0.1ms)[0m  BEGIN
  [1m[36m (0.3ms)[0m  [1mUPDATE `users` SET `last_sign_in_at` = '2016-01-16 09:41:48', `current_sign_in_at` = '2016-01-16 10:56:34', `sign_in_count` = 5, `updated_at` = '2016-01-16 10:56:34' WHERE `users`.`id` = 1[0m
  [1m[35m (0.5ms)[0m  COMMIT
Redirected to http://0.0.0.0:3000/admin
Completed 302 Found in 76ms (ActiveRecord: 1.5ms)


Started GET "/admin" for 127.0.0.1 at 2016-01-16 11:56:34 +0100
  [1m[36m (0.3ms)[0m  [1mSELECT COUNT(*) FROM `filter_types` WHERE (code = 'features')[0m
  [1m[35m (0.2ms)[0m  SELECT COUNT(*) FROM `filters` WHERE (code = 'offer')
  [1m[36mFilter Load (0.2ms)[0m  [1mSELECT `filters`.* FROM `filters` WHERE (code = 'offer') LIMIT 1[0m
  [1m[35mFilterType Load (0.7ms)[0m  SELECT `filter_types`.* FROM `filter_types` WHERE (code = 'features') LIMIT 1
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT `filters`.* FROM `filters` WHERE (code = 'offer') LIMIT 1[0m
  [1m[35mCACHE (0.0ms)[0m  SELECT `filter_types`.* FROM `filter_types` WHERE (code = 'features') LIMIT 1
Processing by RestaurantsController#index as HTML
  [1m[36mUser Load (0.3ms)[0m  [1mSELECT `users`.* FROM `users` WHERE `users`.`id` = 1 LIMIT 1[0m
  Rendered shared/_restaurant_manage_tabs.html.erb (1.9ms)
  Rendered restaurants/_condition_fields.html.erb (13.1ms)
  [1m[35mRestaurant Load (1.3ms)[0m  SELECT `restaurants`.* FROM `restaurants` ORDER BY disabled ASC,created_at DESC LIMIT 12 OFFSET 0
  [1m[36mPhoto Load (0.4ms)[0m  [1mSELECT `photos`.* FROM `photos` WHERE (restaurant_id = 1057 and cover = true and status = 1) LIMIT 1[0m
  [1m[35mPhoto Load (0.5ms)[0m  SELECT `photos`.* FROM `photos` WHERE `photos`.`restaurant_id` = 1057 AND `photos`.`status` = 1 ORDER BY restaurant_id ASC, created_at DESC LIMIT 1
  [1m[36mPhoto Load (0.5ms)[0m  [1mSELECT `photos`.* FROM `photos` WHERE (restaurant_id = 903 and cover = true and status = 1) LIMIT 1[0m
  [1m[35mPhoto Load (0.3ms)[0m  SELECT `photos`.* FROM `photos` WHERE `photos`.`restaurant_id` = 903 AND `photos`.`status` = 1 ORDER BY restaurant_id ASC, created_at DESC LIMIT 1
  [1m[36mPhoto Load (0.4ms)[0m  [1mSELECT `photos`.* FROM `photos` WHERE (restaurant_id = 876 and cover = true and status = 1) LIMIT 1[0m
  [1m[35mPhoto Load (0.3ms)[0m  SELECT `photos`.* FROM `photos` WHERE `photos`.`restaurant_id` = 876 AND `photos`.`status` = 1 ORDER BY restaurant_id ASC, created_at DESC LIMIT 1
  [1m[36mPhoto Load (0.4ms)[0m  [1mSELECT `photos`.* FROM `photos` WHERE (restaurant_id = 851 and cover = true and status = 1) LIMIT 1[0m
  [1m[35mPhoto Load (0.3ms)[0m  SELECT `photos`.* FROM `photos` WHERE `photos`.`restaurant_id` = 851 AND `photos`.`status` = 1 ORDER BY restaurant_id ASC, created_at DESC LIMIT 1
  [1m[36mPhoto Load (0.3ms)[0m  [1mSELECT `photos`.* FROM `photos` WHERE (restaurant_id = 693 and cover = true and status = 1) LIMIT 1[0m
  [1m[35mPhoto Load (0.3ms)[0m  SELECT `photos`.* FROM `photos` WHERE `photos`.`restaurant_id` = 693 AND `photos`.`status` = 1 ORDER BY restaurant_id ASC, created_at DESC LIMIT 1
  [1m[36mPhoto Load (0.4ms)[0m  [1mSELECT `photos`.* FROM `photos` WHERE (restaurant_id = 686 and cover = true and status = 1) LIMIT 1[0m
  [1m[35mPhoto Load (0.3ms)[0m  SELECT `photos`.* FROM `photos` WHERE `photos`.`restaurant_id` = 686 AND `photos`.`status` = 1 ORDER BY restaurant_id ASC, created_at DESC LIMIT 1
  [1m[36mPhoto Load (0.3ms)[0m  [1mSELECT `photos`.* FROM `photos` WHERE (restaurant_id = 669 and cover = true and status = 1) LIMIT 1[0m
  [1m[35mPhoto Load (0.3ms)[0m  SELECT `photos`.* FROM `photos` WHERE `photos`.`restaurant_id` = 669 AND `photos`.`status` = 1 ORDER BY restaurant_id ASC, created_at DESC LIMIT 1
  [1m[36mPhoto Load (0.4ms)[0m  [1mSELECT `photos`.* FROM `photos` WHERE (restaurant_id = 251 and cover = true and status = 1) LIMIT 1[0m
  [1m[35mPhoto Load (0.3ms)[0m  SELECT `photos`.* FROM `photos` WHERE `photos`.`restaurant_id` = 251 AND `photos`.`status` = 1 ORDER BY restaurant_id ASC, created_at DESC LIMIT 1
  [1m[36mPhoto Load (0.4ms)[0m  [1mSELECT `photos`.* FROM `photos` WHERE (restaurant_id = 250 and cover = true and status = 1) LIMIT 1[0m
  [1m[35mPhoto Load (0.8ms)[0m  SELECT `photos`.* FROM `photos` WHERE `photos`.`restaurant_id` = 250 AND `photos`.`status` = 1 ORDER BY restaurant_id ASC, created_at DESC LIMIT 1
  [1m[36mPhoto Load (1.0ms)[0m  [1mSELECT `photos`.* FROM `photos` WHERE (restaurant_id = 237 and cover = true and status = 1) LIMIT 1[0m
  [1m[35mPhoto Load (0.3ms)[0m  SELECT `photos`.* FROM `photos` WHERE `photos`.`restaurant_id` = 237 AND `photos`.`status` = 1 ORDER BY restaurant_id ASC, created_at DESC LIMIT 1
  [1m[36mPhoto Load (0.4ms)[0m  [1mSELECT `photos`.* FROM `photos` WHERE (restaurant_id = 231 and cover = true and status = 1) LIMIT 1[0m
  [1m[35mPhoto Load (0.3ms)[0m  SELECT `photos`.* FROM `photos` WHERE `photos`.`restaurant_id` = 231 AND `photos`.`status` = 1 ORDER BY restaurant_id ASC, created_at DESC LIMIT 1
  [1m[36mPhoto Load (0.4ms)[0m  [1mSELECT `photos`.* FROM `photos` WHERE (restaurant_id = 222 and cover = true and status = 1) LIMIT 1[0m
  [1m[35mPhoto Load (0.3ms)[0m  SELECT `photos`.* FROM `photos` WHERE `photos`.`restaurant_id` = 222 AND `photos`.`status` = 1 ORDER BY restaurant_id ASC, created_at DESC LIMIT 1
  [1m[36m (0.4ms)[0m  [1mSELECT COUNT(*) FROM `restaurants` [0m
  Rendered restaurants/index.html.erb within layouts/admin (157.7ms)
Compiled admin.css  (2ms)  (pid 27556)
Compiled admin.js  (5ms)  (pid 27556)
Completed 200 OK in 211ms (Views: 183.2ms | ActiveRecord: 13.5ms)


Started GET "/admin/collections" for 127.0.0.1 at 2016-01-16 11:56:42 +0100
Processing by CollectionsController#index as HTML
  Rendered shared/_restaurant_manage_tabs.html.erb (0.5ms)
  [1m[35mCollection Load (0.2ms)[0m  SELECT `collections`.* FROM `collections` ORDER BY name ASC, created_at DESC LIMIT 12 OFFSET 0
  [1m[36m (0.1ms)[0m  [1mSELECT COUNT(*) FROM `collections` [0m
  Rendered collections/index.erb within layouts/admin (10.7ms)
  [1m[35mUser Load (0.3ms)[0m  SELECT `users`.* FROM `users` WHERE `users`.`id` = 1 LIMIT 1
Completed 200 OK in 22ms (Views: 19.3ms | ActiveRecord: 1.5ms)


Started GET "/admin/restaurants/admin_new" for 127.0.0.1 at 2016-01-16 11:56:49 +0100
Processing by RestaurantsController#admin_new as HTML
  [1m[36mUser Load (0.3ms)[0m  [1mSELECT `users`.* FROM `users` WHERE `users`.`id` = 1 LIMIT 1[0m
  [1m[35m (2.1ms)[0m  SELECT `filters`.id FROM `filters` INNER JOIN `filters_restaurants` ON `filters`.`id` = `filters_restaurants`.`filter_id` WHERE `filters_restaurants`.`restaurant_id` IS NULL
  [1m[36mFilterType Load (0.2ms)[0m  [1mSELECT `filter_types`.* FROM `filter_types` WHERE `filter_types`.`code` = 'hal_status' LIMIT 1[0m
  [1m[35mFilterType Load (0.2ms)[0m  SELECT `filter_types`.* FROM `filter_types` WHERE `filter_types`.`code` = 'price' LIMIT 1
  [1m[36mFilterType Load (0.1ms)[0m  [1mSELECT `filter_types`.* FROM `filter_types` WHERE `filter_types`.`code` = 'cuisine' LIMIT 1[0m
  [1m[35mFilterType Load (0.2ms)[0m  SELECT `filter_types`.* FROM `filter_types` WHERE `filter_types`.`code` = 'alcohol' LIMIT 1
  [1m[36mFilterType Load (0.1ms)[0m  [1mSELECT `filter_types`.* FROM `filter_types` WHERE `filter_types`.`code` = 'features' LIMIT 1[0m
  Rendered restaurants/_googlemap.html.erb (0.5ms)
  [1m[35mFilter Load (0.4ms)[0m  SELECT `filters`.* FROM `filters` WHERE `filters`.`filter_type_id` = 8
  [1m[36mFilter Load (0.8ms)[0m  [1mSELECT `filters`.* FROM `filters` WHERE `filters`.`filter_type_id` = 1 ORDER BY name ASC[0m
  [1m[35mFilter Load (0.2ms)[0m  SELECT `filters`.* FROM `filters` WHERE `filters`.`filter_type_id` = 4
  [1m[36mFilter Load (0.2ms)[0m  [1mSELECT `filters`.* FROM `filters` WHERE `filters`.`filter_type_id` = 6[0m
  [1m[35mFilter Load (0.2ms)[0m  SELECT `filters`.* FROM `filters` WHERE `filters`.`filter_type_id` = 11 AND (code != 'offer')
  Rendered restaurants/_admin_form.html.erb (97.7ms)
  Rendered restaurants/_upload_menu.html.erb (3.2ms)
  Rendered restaurants/_upload_photos.html.erb (1.9ms)
  Rendered restaurants/admin_new.html.erb within layouts/admin (107.0ms)
Completed 200 OK in 168ms (Views: 111.1ms | ActiveRecord: 7.9ms)


Started GET "/photos?r_id=" for 127.0.0.1 at 2016-01-16 11:56:51 +0100
Processing by PhotosController#index as JSON
  Parameters: {"r_id"=>""}
  [1m[36mRestaurant Load (5.0ms)[0m  [1mSELECT `restaurants`.* FROM `restaurants` WHERE `restaurants`.`slug` = '' LIMIT 1[0m
  [1m[35mRestaurant Load (0.4ms)[0m  SELECT `restaurants`.* FROM `restaurants` WHERE `restaurants`.`id` = 0 LIMIT 1
Completed 500 Internal Server Error in 8ms

ActiveRecord::RecordNotFound (Couldn't find Restaurant with id=):
  app/controllers/photos_controller.rb:11:in `index'


  Rendered /Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_dispatch/middleware/templates/rescues/_trace.erb (1.2ms)
  Rendered /Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_dispatch/middleware/templates/rescues/_request_and_response.erb (0.9ms)
  Rendered /Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_dispatch/middleware/templates/rescues/diagnostics.erb within rescues/layout (150.3ms)


Started GET "/admin/collections" for 127.0.0.1 at 2016-01-16 11:56:56 +0100
Processing by CollectionsController#index as HTML
  Rendered shared/_restaurant_manage_tabs.html.erb (0.6ms)
  [1m[36mCollection Load (0.3ms)[0m  [1mSELECT `collections`.* FROM `collections` ORDER BY name ASC, created_at DESC LIMIT 12 OFFSET 0[0m
  [1m[35m (0.1ms)[0m  SELECT COUNT(*) FROM `collections` 
  Rendered collections/index.erb within layouts/admin (9.6ms)
  [1m[36mUser Load (0.3ms)[0m  [1mSELECT `users`.* FROM `users` WHERE `users`.`id` = 1 LIMIT 1[0m
Completed 200 OK in 21ms (Views: 18.9ms | ActiveRecord: 0.8ms)


Started GET "/admin/restaurants/admin_new" for 127.0.0.1 at 2016-01-16 11:56:58 +0100
Processing by RestaurantsController#admin_new as HTML
  [1m[35mUser Load (0.2ms)[0m  SELECT `users`.* FROM `users` WHERE `users`.`id` = 1 LIMIT 1
  [1m[36m (1.4ms)[0m  [1mSELECT `filters`.id FROM `filters` INNER JOIN `filters_restaurants` ON `filters`.`id` = `filters_restaurants`.`filter_id` WHERE `filters_restaurants`.`restaurant_id` IS NULL[0m
  [1m[35mFilterType Load (0.2ms)[0m  SELECT `filter_types`.* FROM `filter_types` WHERE `filter_types`.`code` = 'hal_status' LIMIT 1
  [1m[36mFilterType Load (0.1ms)[0m  [1mSELECT `filter_types`.* FROM `filter_types` WHERE `filter_types`.`code` = 'price' LIMIT 1[0m
  [1m[35mFilterType Load (0.6ms)[0m  SELECT `filter_types`.* FROM `filter_types` WHERE `filter_types`.`code` = 'cuisine' LIMIT 1
  [1m[36mFilterType Load (0.2ms)[0m  [1mSELECT `filter_types`.* FROM `filter_types` WHERE `filter_types`.`code` = 'alcohol' LIMIT 1[0m
  [1m[35mFilterType Load (0.1ms)[0m  SELECT `filter_types`.* FROM `filter_types` WHERE `filter_types`.`code` = 'features' LIMIT 1
  Rendered restaurants/_googlemap.html.erb (0.0ms)
  [1m[36mFilter Load (0.3ms)[0m  [1mSELECT `filters`.* FROM `filters` WHERE `filters`.`filter_type_id` = 8[0m
  [1m[35mFilter Load (0.3ms)[0m  SELECT `filters`.* FROM `filters` WHERE `filters`.`filter_type_id` = 1 ORDER BY name ASC
  [1m[36mFilter Load (0.2ms)[0m  [1mSELECT `filters`.* FROM `filters` WHERE `filters`.`filter_type_id` = 4[0m
  [1m[35mFilter Load (0.2ms)[0m  SELECT `filters`.* FROM `filters` WHERE `filters`.`filter_type_id` = 6
  [1m[36mFilter Load (0.5ms)[0m  [1mSELECT `filters`.* FROM `filters` WHERE `filters`.`filter_type_id` = 11 AND (code != 'offer')[0m
  Rendered restaurants/_admin_form.html.erb (66.6ms)
  Rendered restaurants/_upload_menu.html.erb (1.7ms)
  Rendered restaurants/_upload_photos.html.erb (0.9ms)
  Rendered restaurants/admin_new.html.erb within layouts/admin (72.2ms)
Completed 200 OK in 90ms (Views: 77.5ms | ActiveRecord: 4.3ms)


Started GET "/photos?r_id=" for 127.0.0.1 at 2016-01-16 11:56:59 +0100
Processing by PhotosController#index as JSON
  Parameters: {"r_id"=>""}
  [1m[35mRestaurant Load (1.5ms)[0m  SELECT `restaurants`.* FROM `restaurants` WHERE `restaurants`.`slug` = '' LIMIT 1
  [1m[36mRestaurant Load (0.2ms)[0m  [1mSELECT `restaurants`.* FROM `restaurants` WHERE `restaurants`.`id` = 0 LIMIT 1[0m
Completed 500 Internal Server Error in 4ms

ActiveRecord::RecordNotFound (Couldn't find Restaurant with id=):
  app/controllers/photos_controller.rb:11:in `index'


  Rendered /Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_dispatch/middleware/templates/rescues/_trace.erb (1.0ms)
  Rendered /Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_dispatch/middleware/templates/rescues/_request_and_response.erb (0.9ms)
  Rendered /Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_dispatch/middleware/templates/rescues/diagnostics.erb within rescues/layout (48.2ms)


Started GET "/admin/collections" for 127.0.0.1 at 2016-01-16 11:58:28 +0100
Processing by CollectionsController#index as HTML
  Rendered shared/_restaurant_manage_tabs.html.erb (0.8ms)
  [1m[35mCollection Load (0.3ms)[0m  SELECT `collections`.* FROM `collections` ORDER BY name ASC, created_at DESC LIMIT 12 OFFSET 0
  [1m[36m (0.2ms)[0m  [1mSELECT COUNT(*) FROM `collections` [0m
  Rendered collections/index.erb within layouts/admin (12.8ms)
  [1m[35mUser Load (0.4ms)[0m  SELECT `users`.* FROM `users` WHERE `users`.`id` = 1 LIMIT 1
Completed 200 OK in 22ms (Views: 20.1ms | ActiveRecord: 0.9ms)


Started GET "/admin/collections/admin_new_collection" for 127.0.0.1 at 2016-01-16 11:58:31 +0100
Processing by CollectionsController#admin_new_collection as HTML
  [1m[36mUser Load (0.3ms)[0m  [1mSELECT `users`.* FROM `users` WHERE `users`.`id` = 1 LIMIT 1[0m
  Rendered collections/_collection_form.html.erb (11.1ms)
  Rendered collections/_collection_restaurants_form.html.erb (0.8ms)
  Rendered collections/_upload_collection_image.html.erb (17.9ms)
  Rendered collections/admin_new_collection.html.erb within layouts/admin (34.3ms)
Completed 200 OK in 45ms (Views: 39.0ms | ActiveRecord: 1.4ms)


Started GET "/collection_images?r_id=" for 127.0.0.1 at 2016-01-16 11:58:31 +0100
Processing by RestaurantsController#show as JSON
  Parameters: {"r_id"=>"", "id"=>"collection_images"}
  [1m[35mRestaurant Load (1.8ms)[0m  SELECT `restaurants`.* FROM `restaurants` WHERE `restaurants`.`slug` = 'collection_images' LIMIT 1
  [1m[36mRestaurant Load (0.3ms)[0m  [1mSELECT `restaurants`.* FROM `restaurants` WHERE `restaurants`.`id` = 0 LIMIT 1[0m
Completed 500 Internal Server Error in 5ms

ActiveRecord::RecordNotFound (Couldn't find Restaurant with id=collection_images):
  app/controllers/restaurants_controller.rb:193:in `show'


  Rendered /Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_dispatch/middleware/templates/rescues/_trace.erb (1.5ms)
  Rendered /Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_dispatch/middleware/templates/rescues/_request_and_response.erb (1.1ms)
  Rendered /Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_dispatch/middleware/templates/rescues/diagnostics.erb within rescues/layout (41.7ms)


Started POST "/admin/collections" for 127.0.0.1 at 2016-01-16 11:59:22 +0100
Processing by CollectionsController#create as HTML
  Parameters: {"utf8"=>"âœ“", "authenticity_token"=>"ZhR8a2fYr/EQcBrBVm2c17tt7AHk64f/gvsZ5fOllxc=", "admin"=>"true", "collection"=>{"name"=>"test", "description"=>"test descr"}}
  [1m[35mCollection Load (0.3ms)[0m  SELECT `collections`.* FROM `collections` WHERE `collections`.`name` = 'test' LIMIT 1
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35m (0.1ms)[0m  ROLLBACK
Completed 500 Internal Server Error in 16ms

ActionView::MissingTemplate (Missing template collections/new, application/new with {:locale=>[:en], :formats=>[:html], :handlers=>[:erb, :builder, :coffee, :slim]}. Searched in:
  * "/Users/kevinmuller/halalgems_backend/app/views"
  * "/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/ckeditor-3.7.3/app/views"
  * "/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/devise_mailchimp-0.0.4/app/views"
  * "/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/kaminari-bootstrap-3.0.1/app/views"
  * "/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/bootstrap-kaminari-views-0.0.3/app/views"
  * "/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/kaminari-0.14.1/app/views"
  * "/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/devise-2.0.4/app/views"
):
  app/controllers/collections_controller.rb:83:in `block (2 levels) in create'
  app/controllers/collections_controller.rb:77:in `create'


  Rendered /Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_dispatch/middleware/templates/rescues/missing_template.erb within rescues/layout (0.4ms)


Started GET "/admin/restaurants" for 127.0.0.1 at 2016-01-16 17:33:44 +0100
Processing by RestaurantsController#index as HTML
  [1m[36mUser Load (0.9ms)[0m  [1mSELECT `users`.* FROM `users` WHERE `users`.`id` = 1 LIMIT 1[0m
  [1m[35m (0.1ms)[0m  BEGIN
  [1m[36m (0.1ms)[0m  [1mCOMMIT[0m
Completed 401 Unauthorized in 10ms


Started GET "/admin/restaurants" for 127.0.0.1 at 2016-01-16 17:33:44 +0100
Processing by RestaurantsController#index as HTML
Redirected to http://0.0.0.0:3000/users/sign_in
Filter chain halted as :required_user_login rendered or redirected
Completed 302 Found in 2ms (ActiveRecord: 0.0ms)


Started GET "/users/sign_in" for 127.0.0.1 at 2016-01-16 17:33:44 +0100
Processing by SessionsController#new as HTML
  Rendered sessions/new.html.slim within layouts/application (3.8ms)
  Rendered layouts/_header.html.erb (3.4ms)
  Rendered layouts/_main_menu.html.slim (1.1ms)
  Rendered layouts/_sub_main_menu.html.slim (0.0ms)
  Rendered layouts/_flash_messages.html.erb (0.4ms)
  [1m[35mBasicsPage Load (0.7ms)[0m  SELECT `basics_pages`.* FROM `basics_pages` WHERE `basics_pages`.`page_name` = 'Footer' LIMIT 1
  Rendered layouts/_footer.html.slim (5.2ms)
Completed 200 OK in 49ms (Views: 46.7ms | ActiveRecord: 0.7ms)


Started POST "/users/sign_in" for 127.0.0.1 at 2016-01-16 17:33:59 +0100
Processing by SessionsController#create as HTML
  Parameters: {"utf8"=>"âœ“", "authenticity_token"=>"ZhR8a2fYr/EQcBrBVm2c17tt7AHk64f/gvsZ5fOllxc=", "user"=>{"email"=>"kevin.muller1220@gmail.com", "password"=>"[FILTERED]"}, "button"=>""}
  [1m[36mUser Load (0.5ms)[0m  [1mSELECT `users`.* FROM `users` WHERE `users`.`email` = 'kevin.muller1220@gmail.com' LIMIT 1[0m
  [1m[35m (0.1ms)[0m  BEGIN
  [1m[36m (0.1ms)[0m  [1mCOMMIT[0m
  [1m[35m (0.1ms)[0m  BEGIN
  [1m[36m (0.4ms)[0m  [1mUPDATE `users` SET `last_sign_in_at` = '2016-01-16 10:56:34', `current_sign_in_at` = '2016-01-16 16:34:00', `sign_in_count` = 6, `updated_at` = '2016-01-16 16:34:00' WHERE `users`.`id` = 1[0m
  [1m[35m (0.6ms)[0m  COMMIT
Redirected to http://0.0.0.0:3000/admin
Completed 302 Found in 68ms (ActiveRecord: 1.8ms)


Started GET "/admin" for 127.0.0.1 at 2016-01-16 17:34:00 +0100
Processing by RestaurantsController#index as HTML
  [1m[36mUser Load (0.3ms)[0m  [1mSELECT `users`.* FROM `users` WHERE `users`.`id` = 1 LIMIT 1[0m
  Rendered shared/_restaurant_manage_tabs.html.erb (0.7ms)
  Rendered restaurants/_condition_fields.html.erb (12.9ms)
  [1m[35mRestaurant Load (1.8ms)[0m  SELECT `restaurants`.* FROM `restaurants` ORDER BY disabled ASC,created_at DESC LIMIT 12 OFFSET 0
  [1m[36mPhoto Load (0.7ms)[0m  [1mSELECT `photos`.* FROM `photos` WHERE (restaurant_id = 1057 and cover = true and status = 1) LIMIT 1[0m
  [1m[35mPhoto Load (0.4ms)[0m  SELECT `photos`.* FROM `photos` WHERE `photos`.`restaurant_id` = 1057 AND `photos`.`status` = 1 ORDER BY restaurant_id ASC, created_at DESC LIMIT 1
  [1m[36mPhoto Load (0.5ms)[0m  [1mSELECT `photos`.* FROM `photos` WHERE (restaurant_id = 903 and cover = true and status = 1) LIMIT 1[0m
  [1m[35mPhoto Load (0.5ms)[0m  SELECT `photos`.* FROM `photos` WHERE `photos`.`restaurant_id` = 903 AND `photos`.`status` = 1 ORDER BY restaurant_id ASC, created_at DESC LIMIT 1
  [1m[36mPhoto Load (0.5ms)[0m  [1mSELECT `photos`.* FROM `photos` WHERE (restaurant_id = 876 and cover = true and status = 1) LIMIT 1[0m
  [1m[35mPhoto Load (0.3ms)[0m  SELECT `photos`.* FROM `photos` WHERE `photos`.`restaurant_id` = 876 AND `photos`.`status` = 1 ORDER BY restaurant_id ASC, created_at DESC LIMIT 1
  [1m[36mPhoto Load (0.3ms)[0m  [1mSELECT `photos`.* FROM `photos` WHERE (restaurant_id = 851 and cover = true and status = 1) LIMIT 1[0m
  [1m[35mPhoto Load (0.3ms)[0m  SELECT `photos`.* FROM `photos` WHERE `photos`.`restaurant_id` = 851 AND `photos`.`status` = 1 ORDER BY restaurant_id ASC, created_at DESC LIMIT 1
  [1m[36mPhoto Load (0.3ms)[0m  [1mSELECT `photos`.* FROM `photos` WHERE (restaurant_id = 693 and cover = true and status = 1) LIMIT 1[0m
  [1m[35mPhoto Load (0.3ms)[0m  SELECT `photos`.* FROM `photos` WHERE `photos`.`restaurant_id` = 693 AND `photos`.`status` = 1 ORDER BY restaurant_id ASC, created_at DESC LIMIT 1
  [1m[36mPhoto Load (0.5ms)[0m  [1mSELECT `photos`.* FROM `photos` WHERE (restaurant_id = 686 and cover = true and status = 1) LIMIT 1[0m
  [1m[35mPhoto Load (0.3ms)[0m  SELECT `photos`.* FROM `photos` WHERE `photos`.`restaurant_id` = 686 AND `photos`.`status` = 1 ORDER BY restaurant_id ASC, created_at DESC LIMIT 1
  [1m[36mPhoto Load (0.4ms)[0m  [1mSELECT `photos`.* FROM `photos` WHERE (restaurant_id = 669 and cover = true and status = 1) LIMIT 1[0m
  [1m[35mPhoto Load (0.3ms)[0m  SELECT `photos`.* FROM `photos` WHERE `photos`.`restaurant_id` = 669 AND `photos`.`status` = 1 ORDER BY restaurant_id ASC, created_at DESC LIMIT 1
  [1m[36mPhoto Load (0.4ms)[0m  [1mSELECT `photos`.* FROM `photos` WHERE (restaurant_id = 251 and cover = true and status = 1) LIMIT 1[0m
  [1m[35mPhoto Load (0.3ms)[0m  SELECT `photos`.* FROM `photos` WHERE `photos`.`restaurant_id` = 251 AND `photos`.`status` = 1 ORDER BY restaurant_id ASC, created_at DESC LIMIT 1
  [1m[36mPhoto Load (0.4ms)[0m  [1mSELECT `photos`.* FROM `photos` WHERE (restaurant_id = 250 and cover = true and status = 1) LIMIT 1[0m
  [1m[35mPhoto Load (0.3ms)[0m  SELECT `photos`.* FROM `photos` WHERE `photos`.`restaurant_id` = 250 AND `photos`.`status` = 1 ORDER BY restaurant_id ASC, created_at DESC LIMIT 1
  [1m[36mPhoto Load (0.4ms)[0m  [1mSELECT `photos`.* FROM `photos` WHERE (restaurant_id = 237 and cover = true and status = 1) LIMIT 1[0m
  [1m[35mPhoto Load (0.3ms)[0m  SELECT `photos`.* FROM `photos` WHERE `photos`.`restaurant_id` = 237 AND `photos`.`status` = 1 ORDER BY restaurant_id ASC, created_at DESC LIMIT 1
  [1m[36mPhoto Load (0.4ms)[0m  [1mSELECT `photos`.* FROM `photos` WHERE (restaurant_id = 231 and cover = true and status = 1) LIMIT 1[0m
  [1m[35mPhoto Load (0.3ms)[0m  SELECT `photos`.* FROM `photos` WHERE `photos`.`restaurant_id` = 231 AND `photos`.`status` = 1 ORDER BY restaurant_id ASC, created_at DESC LIMIT 1
  [1m[36mPhoto Load (0.3ms)[0m  [1mSELECT `photos`.* FROM `photos` WHERE (restaurant_id = 222 and cover = true and status = 1) LIMIT 1[0m
  [1m[35mPhoto Load (0.3ms)[0m  SELECT `photos`.* FROM `photos` WHERE `photos`.`restaurant_id` = 222 AND `photos`.`status` = 1 ORDER BY restaurant_id ASC, created_at DESC LIMIT 1
  [1m[36m (0.5ms)[0m  [1mSELECT COUNT(*) FROM `restaurants` [0m
  Rendered restaurants/index.html.erb within layouts/admin (151.4ms)
Completed 200 OK in 187ms (Views: 172.7ms | ActiveRecord: 11.6ms)


Started GET "/admin/restaurants/admin_new" for 127.0.0.1 at 2016-01-16 17:34:21 +0100
Processing by RestaurantsController#admin_new as HTML
  [1m[35mUser Load (0.3ms)[0m  SELECT `users`.* FROM `users` WHERE `users`.`id` = 1 LIMIT 1
  [1m[36m (1.8ms)[0m  [1mSELECT `filters`.id FROM `filters` INNER JOIN `filters_restaurants` ON `filters`.`id` = `filters_restaurants`.`filter_id` WHERE `filters_restaurants`.`restaurant_id` IS NULL[0m
  [1m[35mFilterType Load (0.4ms)[0m  SELECT `filter_types`.* FROM `filter_types` WHERE `filter_types`.`code` = 'hal_status' LIMIT 1
  [1m[36mFilterType Load (0.1ms)[0m  [1mSELECT `filter_types`.* FROM `filter_types` WHERE `filter_types`.`code` = 'price' LIMIT 1[0m
  [1m[35mFilterType Load (0.2ms)[0m  SELECT `filter_types`.* FROM `filter_types` WHERE `filter_types`.`code` = 'cuisine' LIMIT 1
  [1m[36mFilterType Load (0.1ms)[0m  [1mSELECT `filter_types`.* FROM `filter_types` WHERE `filter_types`.`code` = 'alcohol' LIMIT 1[0m
  [1m[35mFilterType Load (0.2ms)[0m  SELECT `filter_types`.* FROM `filter_types` WHERE `filter_types`.`code` = 'features' LIMIT 1
  Rendered restaurants/_googlemap.html.erb (0.1ms)
  [1m[36mFilter Load (0.4ms)[0m  [1mSELECT `filters`.* FROM `filters` WHERE `filters`.`filter_type_id` = 8[0m
  [1m[35mFilter Load (0.8ms)[0m  SELECT `filters`.* FROM `filters` WHERE `filters`.`filter_type_id` = 1 ORDER BY name ASC
  [1m[36mFilter Load (0.2ms)[0m  [1mSELECT `filters`.* FROM `filters` WHERE `filters`.`filter_type_id` = 4[0m
  [1m[35mFilter Load (0.2ms)[0m  SELECT `filters`.* FROM `filters` WHERE `filters`.`filter_type_id` = 6
  [1m[36mFilter Load (0.2ms)[0m  [1mSELECT `filters`.* FROM `filters` WHERE `filters`.`filter_type_id` = 11 AND (code != 'offer')[0m
  Rendered restaurants/_admin_form.html.erb (74.2ms)
  Rendered restaurants/_upload_menu.html.erb (1.8ms)
  Rendered restaurants/_upload_photos.html.erb (1.0ms)
  Rendered restaurants/admin_new.html.erb within layouts/admin (84.6ms)
Completed 200 OK in 118ms (Views: 104.7ms | ActiveRecord: 4.9ms)


Started GET "/photos?r_id=" for 127.0.0.1 at 2016-01-16 17:34:23 +0100
Processing by PhotosController#index as JSON
  Parameters: {"r_id"=>""}
  [1m[35mRestaurant Load (1.6ms)[0m  SELECT `restaurants`.* FROM `restaurants` WHERE `restaurants`.`slug` = '' LIMIT 1
  [1m[36mRestaurant Load (0.3ms)[0m  [1mSELECT `restaurants`.* FROM `restaurants` WHERE `restaurants`.`id` = 0 LIMIT 1[0m
Completed 500 Internal Server Error in 4ms

ActiveRecord::RecordNotFound (Couldn't find Restaurant with id=):
  app/controllers/photos_controller.rb:11:in `index'


  Rendered /Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_dispatch/middleware/templates/rescues/_trace.erb (1.2ms)
  Rendered /Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_dispatch/middleware/templates/rescues/_request_and_response.erb (1.0ms)
  Rendered /Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_dispatch/middleware/templates/rescues/diagnostics.erb within rescues/layout (47.2ms)


Started GET "/admin/restaurants" for 127.0.0.1 at 2016-01-16 17:45:46 +0100
Processing by RestaurantsController#index as HTML
  [1m[35mUser Load (0.3ms)[0m  SELECT `users`.* FROM `users` WHERE `users`.`id` = 1 LIMIT 1
  Rendered shared/_restaurant_manage_tabs.html.erb (0.8ms)
  Rendered restaurants/_condition_fields.html.erb (9.9ms)
  [1m[36mRestaurant Load (0.8ms)[0m  [1mSELECT `restaurants`.* FROM `restaurants` ORDER BY disabled ASC,created_at DESC LIMIT 12 OFFSET 0[0m
  [1m[35mPhoto Load (0.4ms)[0m  SELECT `photos`.* FROM `photos` WHERE (restaurant_id = 1057 and cover = true and status = 1) LIMIT 1
  [1m[36mPhoto Load (0.3ms)[0m  [1mSELECT `photos`.* FROM `photos` WHERE `photos`.`restaurant_id` = 1057 AND `photos`.`status` = 1 ORDER BY restaurant_id ASC, created_at DESC LIMIT 1[0m
  [1m[35mPhoto Load (0.4ms)[0m  SELECT `photos`.* FROM `photos` WHERE (restaurant_id = 903 and cover = true and status = 1) LIMIT 1
  [1m[36mPhoto Load (0.3ms)[0m  [1mSELECT `photos`.* FROM `photos` WHERE `photos`.`restaurant_id` = 903 AND `photos`.`status` = 1 ORDER BY restaurant_id ASC, created_at DESC LIMIT 1[0m
  [1m[35mPhoto Load (0.4ms)[0m  SELECT `photos`.* FROM `photos` WHERE (restaurant_id = 876 and cover = true and status = 1) LIMIT 1
  [1m[36mPhoto Load (0.3ms)[0m  [1mSELECT `photos`.* FROM `photos` WHERE `photos`.`restaurant_id` = 876 AND `photos`.`status` = 1 ORDER BY restaurant_id ASC, created_at DESC LIMIT 1[0m
  [1m[35mPhoto Load (0.4ms)[0m  SELECT `photos`.* FROM `photos` WHERE (restaurant_id = 851 and cover = true and status = 1) LIMIT 1
  [1m[36mPhoto Load (0.3ms)[0m  [1mSELECT `photos`.* FROM `photos` WHERE `photos`.`restaurant_id` = 851 AND `photos`.`status` = 1 ORDER BY restaurant_id ASC, created_at DESC LIMIT 1[0m
  [1m[35mPhoto Load (0.4ms)[0m  SELECT `photos`.* FROM `photos` WHERE (restaurant_id = 693 and cover = true and status = 1) LIMIT 1
  [1m[36mPhoto Load (0.2ms)[0m  [1mSELECT `photos`.* FROM `photos` WHERE `photos`.`restaurant_id` = 693 AND `photos`.`status` = 1 ORDER BY restaurant_id ASC, created_at DESC LIMIT 1[0m
  [1m[35mPhoto Load (0.3ms)[0m  SELECT `photos`.* FROM `photos` WHERE (restaurant_id = 686 and cover = true and status = 1) LIMIT 1
  [1m[36mPhoto Load (0.3ms)[0m  [1mSELECT `photos`.* FROM `photos` WHERE `photos`.`restaurant_id` = 686 AND `photos`.`status` = 1 ORDER BY restaurant_id ASC, created_at DESC LIMIT 1[0m
  [1m[35mPhoto Load (0.4ms)[0m  SELECT `photos`.* FROM `photos` WHERE (restaurant_id = 669 and cover = true and status = 1) LIMIT 1
  [1m[36mPhoto Load (0.3ms)[0m  [1mSELECT `photos`.* FROM `photos` WHERE `photos`.`restaurant_id` = 669 AND `photos`.`status` = 1 ORDER BY restaurant_id ASC, created_at DESC LIMIT 1[0m
  [1m[35mPhoto Load (0.4ms)[0m  SELECT `photos`.* FROM `photos` WHERE (restaurant_id = 251 and cover = true and status = 1) LIMIT 1
  [1m[36mPhoto Load (0.3ms)[0m  [1mSELECT `photos`.* FROM `photos` WHERE `photos`.`restaurant_id` = 251 AND `photos`.`status` = 1 ORDER BY restaurant_id ASC, created_at DESC LIMIT 1[0m
  [1m[35mPhoto Load (0.4ms)[0m  SELECT `photos`.* FROM `photos` WHERE (restaurant_id = 250 and cover = true and status = 1) LIMIT 1
  [1m[36mPhoto Load (0.3ms)[0m  [1mSELECT `photos`.* FROM `photos` WHERE `photos`.`restaurant_id` = 250 AND `photos`.`status` = 1 ORDER BY restaurant_id ASC, created_at DESC LIMIT 1[0m
  [1m[35mPhoto Load (0.5ms)[0m  SELECT `photos`.* FROM `photos` WHERE (restaurant_id = 237 and cover = true and status = 1) LIMIT 1
  [1m[36mPhoto Load (0.5ms)[0m  [1mSELECT `photos`.* FROM `photos` WHERE `photos`.`restaurant_id` = 237 AND `photos`.`status` = 1 ORDER BY restaurant_id ASC, created_at DESC LIMIT 1[0m
  [1m[35mPhoto Load (0.5ms)[0m  SELECT `photos`.* FROM `photos` WHERE (restaurant_id = 231 and cover = true and status = 1) LIMIT 1
  [1m[36mPhoto Load (0.3ms)[0m  [1mSELECT `photos`.* FROM `photos` WHERE `photos`.`restaurant_id` = 231 AND `photos`.`status` = 1 ORDER BY restaurant_id ASC, created_at DESC LIMIT 1[0m
  [1m[35mPhoto Load (0.4ms)[0m  SELECT `photos`.* FROM `photos` WHERE (restaurant_id = 222 and cover = true and status = 1) LIMIT 1
  [1m[36mPhoto Load (0.3ms)[0m  [1mSELECT `photos`.* FROM `photos` WHERE `photos`.`restaurant_id` = 222 AND `photos`.`status` = 1 ORDER BY restaurant_id ASC, created_at DESC LIMIT 1[0m
  [1m[35m (0.4ms)[0m  SELECT COUNT(*) FROM `restaurants` 
  Rendered restaurants/index.html.erb within layouts/admin (115.4ms)
Completed 200 OK in 146ms (Views: 133.1ms | ActiveRecord: 10.1ms)


Started GET "/admin/collections" for 127.0.0.1 at 2016-01-16 17:45:48 +0100
Processing by CollectionsController#index as HTML
  Rendered shared/_restaurant_manage_tabs.html.erb (0.6ms)
  [1m[36mCollection Load (0.4ms)[0m  [1mSELECT `collections`.* FROM `collections` ORDER BY name ASC, created_at DESC LIMIT 12 OFFSET 0[0m
  [1m[35m (0.1ms)[0m  SELECT COUNT(*) FROM `collections` 
  Rendered collections/index.erb within layouts/admin (7.7ms)
  [1m[36mUser Load (0.3ms)[0m  [1mSELECT `users`.* FROM `users` WHERE `users`.`id` = 1 LIMIT 1[0m
Completed 200 OK in 34ms (Views: 32.0ms | ActiveRecord: 0.8ms)


Started GET "/admin/collections/admin_new_collection" for 127.0.0.1 at 2016-01-16 17:45:52 +0100
Processing by CollectionsController#admin_new_collection as HTML
  [1m[35mUser Load (0.4ms)[0m  SELECT `users`.* FROM `users` WHERE `users`.`id` = 1 LIMIT 1
  Rendered collections/_collection_form.html.erb (5.1ms)
  Rendered collections/_collection_restaurants_form.html.erb (0.3ms)
  Rendered collections/_upload_collection_image.html.erb (1.1ms)
  Rendered collections/admin_new_collection.html.erb within layouts/admin (18.2ms)
Completed 200 OK in 32ms (Views: 29.5ms | ActiveRecord: 0.4ms)


Started GET "/collection_images?r_id=" for 127.0.0.1 at 2016-01-16 17:45:52 +0100
Processing by RestaurantsController#show as JSON
  Parameters: {"r_id"=>"", "id"=>"collection_images"}
  [1m[36mRestaurant Load (1.4ms)[0m  [1mSELECT `restaurants`.* FROM `restaurants` WHERE `restaurants`.`slug` = 'collection_images' LIMIT 1[0m
  [1m[35mRestaurant Load (0.2ms)[0m  SELECT `restaurants`.* FROM `restaurants` WHERE `restaurants`.`id` = 0 LIMIT 1
Completed 500 Internal Server Error in 3ms

ActiveRecord::RecordNotFound (Couldn't find Restaurant with id=collection_images):
  app/controllers/restaurants_controller.rb:193:in `show'


  Rendered /Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_dispatch/middleware/templates/rescues/_trace.erb (1.2ms)
  Rendered /Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_dispatch/middleware/templates/rescues/_request_and_response.erb (0.9ms)
  Rendered /Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_dispatch/middleware/templates/rescues/diagnostics.erb within rescues/layout (40.7ms)


Started POST "/collection_images" for 127.0.0.1 at 2016-01-16 17:49:39 +0100
Processing by CollectionImagesController#create as JSON
  Parameters: {"utf8"=>"âœ“", "authenticity_token"=>"ZhR8a2fYr/EQcBrBVm2c17tt7AHk64f/gvsZ5fOllxc=", "collection_image"=>{"collection_id"=>"", "user_id"=>"1", "image"=>[#<ActionDispatch::Http::UploadedFile:0x007f83bf9698e0 @original_filename="breakfast.png", @content_type="image/png", @headers="Content-Disposition: form-data; name=\"collection_image[image][]\"; filename=\"breakfast.png\"\r\nContent-Type: image/png\r\n", @tempfile=#<Tempfile:/var/folders/rf/q4l8n5k56pnbjgkdtzrhq_w00000gn/T/RackMultipart20160116-27556-1vcmo4z>>]}}
  [1m[36mCollection Load (0.4ms)[0m  [1mSELECT `collections`.* FROM `collections` WHERE `collections`.`id` = 0 LIMIT 1[0m
Completed 500 Internal Server Error in 2ms

ActiveRecord::RecordNotFound (Couldn't find Collection with id=):
  app/controllers/collection_images_controller.rb:26:in `create'


  Rendered /Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_dispatch/middleware/templates/rescues/_trace.erb (1.3ms)
  Rendered /Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_dispatch/middleware/templates/rescues/_request_and_response.erb (1.1ms)
  Rendered /Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_dispatch/middleware/templates/rescues/diagnostics.erb within rescues/layout (58.9ms)


Started GET "/admin/restaurants" for 127.0.0.1 at 2016-01-16 17:49:52 +0100
Processing by RestaurantsController#index as HTML
  [1m[35mUser Load (0.3ms)[0m  SELECT `users`.* FROM `users` WHERE `users`.`id` = 1 LIMIT 1
  Rendered shared/_restaurant_manage_tabs.html.erb (0.6ms)
  Rendered restaurants/_condition_fields.html.erb (9.0ms)
  [1m[36mRestaurant Load (0.8ms)[0m  [1mSELECT `restaurants`.* FROM `restaurants` ORDER BY disabled ASC,created_at DESC LIMIT 12 OFFSET 0[0m
  [1m[35mPhoto Load (0.4ms)[0m  SELECT `photos`.* FROM `photos` WHERE (restaurant_id = 1057 and cover = true and status = 1) LIMIT 1
  [1m[36mPhoto Load (0.3ms)[0m  [1mSELECT `photos`.* FROM `photos` WHERE `photos`.`restaurant_id` = 1057 AND `photos`.`status` = 1 ORDER BY restaurant_id ASC, created_at DESC LIMIT 1[0m
  [1m[35mPhoto Load (0.4ms)[0m  SELECT `photos`.* FROM `photos` WHERE (restaurant_id = 903 and cover = true and status = 1) LIMIT 1
  [1m[36mPhoto Load (0.3ms)[0m  [1mSELECT `photos`.* FROM `photos` WHERE `photos`.`restaurant_id` = 903 AND `photos`.`status` = 1 ORDER BY restaurant_id ASC, created_at DESC LIMIT 1[0m
  [1m[35mPhoto Load (0.3ms)[0m  SELECT `photos`.* FROM `photos` WHERE (restaurant_id = 876 and cover = true and status = 1) LIMIT 1
  [1m[36mPhoto Load (0.3ms)[0m  [1mSELECT `photos`.* FROM `photos` WHERE `photos`.`restaurant_id` = 876 AND `photos`.`status` = 1 ORDER BY restaurant_id ASC, created_at DESC LIMIT 1[0m
  [1m[35mPhoto Load (0.3ms)[0m  SELECT `photos`.* FROM `photos` WHERE (restaurant_id = 851 and cover = true and status = 1) LIMIT 1
  [1m[36mPhoto Load (0.3ms)[0m  [1mSELECT `photos`.* FROM `photos` WHERE `photos`.`restaurant_id` = 851 AND `photos`.`status` = 1 ORDER BY restaurant_id ASC, created_at DESC LIMIT 1[0m
  [1m[35mPhoto Load (0.4ms)[0m  SELECT `photos`.* FROM `photos` WHERE (restaurant_id = 693 and cover = true and status = 1) LIMIT 1
  [1m[36mPhoto Load (0.3ms)[0m  [1mSELECT `photos`.* FROM `photos` WHERE `photos`.`restaurant_id` = 693 AND `photos`.`status` = 1 ORDER BY restaurant_id ASC, created_at DESC LIMIT 1[0m
  [1m[35mPhoto Load (0.3ms)[0m  SELECT `photos`.* FROM `photos` WHERE (restaurant_id = 686 and cover = true and status = 1) LIMIT 1
  [1m[36mPhoto Load (0.3ms)[0m  [1mSELECT `photos`.* FROM `photos` WHERE `photos`.`restaurant_id` = 686 AND `photos`.`status` = 1 ORDER BY restaurant_id ASC, created_at DESC LIMIT 1[0m
  [1m[35mPhoto Load (0.4ms)[0m  SELECT `photos`.* FROM `photos` WHERE (restaurant_id = 669 and cover = true and status = 1) LIMIT 1
  [1m[36mPhoto Load (0.3ms)[0m  [1mSELECT `photos`.* FROM `photos` WHERE `photos`.`restaurant_id` = 669 AND `photos`.`status` = 1 ORDER BY restaurant_id ASC, created_at DESC LIMIT 1[0m
  [1m[35mPhoto Load (0.4ms)[0m  SELECT `photos`.* FROM `photos` WHERE (restaurant_id = 251 and cover = true and status = 1) LIMIT 1
  [1m[36mPhoto Load (0.3ms)[0m  [1mSELECT `photos`.* FROM `photos` WHERE `photos`.`restaurant_id` = 251 AND `photos`.`status` = 1 ORDER BY restaurant_id ASC, created_at DESC LIMIT 1[0m
  [1m[35mPhoto Load (0.4ms)[0m  SELECT `photos`.* FROM `photos` WHERE (restaurant_id = 250 and cover = true and status = 1) LIMIT 1
  [1m[36mPhoto Load (0.3ms)[0m  [1mSELECT `photos`.* FROM `photos` WHERE `photos`.`restaurant_id` = 250 AND `photos`.`status` = 1 ORDER BY restaurant_id ASC, created_at DESC LIMIT 1[0m
  [1m[35mPhoto Load (0.3ms)[0m  SELECT `photos`.* FROM `photos` WHERE (restaurant_id = 237 and cover = true and status = 1) LIMIT 1
  [1m[36mPhoto Load (0.3ms)[0m  [1mSELECT `photos`.* FROM `photos` WHERE `photos`.`restaurant_id` = 237 AND `photos`.`status` = 1 ORDER BY restaurant_id ASC, created_at DESC LIMIT 1[0m
  [1m[35mPhoto Load (0.3ms)[0m  SELECT `photos`.* FROM `photos` WHERE (restaurant_id = 231 and cover = true and status = 1) LIMIT 1
  [1m[36mPhoto Load (0.3ms)[0m  [1mSELECT `photos`.* FROM `photos` WHERE `photos`.`restaurant_id` = 231 AND `photos`.`status` = 1 ORDER BY restaurant_id ASC, created_at DESC LIMIT 1[0m
  [1m[35mPhoto Load (0.3ms)[0m  SELECT `photos`.* FROM `photos` WHERE (restaurant_id = 222 and cover = true and status = 1) LIMIT 1
  [1m[36mPhoto Load (0.3ms)[0m  [1mSELECT `photos`.* FROM `photos` WHERE `photos`.`restaurant_id` = 222 AND `photos`.`status` = 1 ORDER BY restaurant_id ASC, created_at DESC LIMIT 1[0m
  [1m[35m (0.4ms)[0m  SELECT COUNT(*) FROM `restaurants` 
  Rendered restaurants/index.html.erb within layouts/admin (82.4ms)
Completed 200 OK in 90ms (Views: 79.0ms | ActiveRecord: 9.1ms)


Started GET "/admin/restaurants/admin_new" for 127.0.0.1 at 2016-01-16 17:49:55 +0100
Processing by RestaurantsController#admin_new as HTML
  [1m[36mUser Load (0.2ms)[0m  [1mSELECT `users`.* FROM `users` WHERE `users`.`id` = 1 LIMIT 1[0m
  [1m[35m (1.4ms)[0m  SELECT `filters`.id FROM `filters` INNER JOIN `filters_restaurants` ON `filters`.`id` = `filters_restaurants`.`filter_id` WHERE `filters_restaurants`.`restaurant_id` IS NULL
  [1m[36mFilterType Load (0.2ms)[0m  [1mSELECT `filter_types`.* FROM `filter_types` WHERE `filter_types`.`code` = 'hal_status' LIMIT 1[0m
  [1m[35mFilterType Load (0.1ms)[0m  SELECT `filter_types`.* FROM `filter_types` WHERE `filter_types`.`code` = 'price' LIMIT 1
  [1m[36mFilterType Load (0.1ms)[0m  [1mSELECT `filter_types`.* FROM `filter_types` WHERE `filter_types`.`code` = 'cuisine' LIMIT 1[0m
  [1m[35mFilterType Load (0.1ms)[0m  SELECT `filter_types`.* FROM `filter_types` WHERE `filter_types`.`code` = 'alcohol' LIMIT 1
  [1m[36mFilterType Load (0.2ms)[0m  [1mSELECT `filter_types`.* FROM `filter_types` WHERE `filter_types`.`code` = 'features' LIMIT 1[0m
  Rendered restaurants/_googlemap.html.erb (0.0ms)
  [1m[35mFilter Load (0.4ms)[0m  SELECT `filters`.* FROM `filters` WHERE `filters`.`filter_type_id` = 8
  [1m[36mFilter Load (0.3ms)[0m  [1mSELECT `filters`.* FROM `filters` WHERE `filters`.`filter_type_id` = 1 ORDER BY name ASC[0m
  [1m[35mFilter Load (0.3ms)[0m  SELECT `filters`.* FROM `filters` WHERE `filters`.`filter_type_id` = 4
  [1m[36mFilter Load (0.2ms)[0m  [1mSELECT `filters`.* FROM `filters` WHERE `filters`.`filter_type_id` = 6[0m
  [1m[35mFilter Load (0.2ms)[0m  SELECT `filters`.* FROM `filters` WHERE `filters`.`filter_type_id` = 11 AND (code != 'offer')
  Rendered restaurants/_admin_form.html.erb (79.5ms)
  Rendered restaurants/_upload_menu.html.erb (1.6ms)
  Rendered restaurants/_upload_photos.html.erb (0.9ms)
  Rendered restaurants/admin_new.html.erb within layouts/admin (85.1ms)
Completed 200 OK in 102ms (Views: 89.4ms | ActiveRecord: 3.7ms)


Started GET "/photos?r_id=" for 127.0.0.1 at 2016-01-16 17:49:56 +0100
Processing by PhotosController#index as JSON
  Parameters: {"r_id"=>""}
  [1m[36mRestaurant Load (1.7ms)[0m  [1mSELECT `restaurants`.* FROM `restaurants` WHERE `restaurants`.`slug` = '' LIMIT 1[0m
  [1m[35mRestaurant Load (0.2ms)[0m  SELECT `restaurants`.* FROM `restaurants` WHERE `restaurants`.`id` = 0 LIMIT 1
Completed 500 Internal Server Error in 4ms

ActiveRecord::RecordNotFound (Couldn't find Restaurant with id=):
  app/controllers/photos_controller.rb:11:in `index'


  Rendered /Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_dispatch/middleware/templates/rescues/_trace.erb (1.1ms)
  Rendered /Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_dispatch/middleware/templates/rescues/_request_and_response.erb (1.0ms)
  Rendered /Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_dispatch/middleware/templates/rescues/diagnostics.erb within rescues/layout (43.8ms)


Started POST "/photos" for 127.0.0.1 at 2016-01-16 17:50:03 +0100
Processing by PhotosController#create as JSON
  Parameters: {"utf8"=>"âœ“", "authenticity_token"=>"ZhR8a2fYr/EQcBrBVm2c17tt7AHk64f/gvsZ5fOllxc=", "photo"=>{"restaurant_id"=>"", "user_id"=>"1", "image"=>[#<ActionDispatch::Http::UploadedFile:0x007f83bf8b2730 @original_filename="steak.png", @content_type="image/png", @headers="Content-Disposition: form-data; name=\"photo[image][]\"; filename=\"steak.png\"\r\nContent-Type: image/png\r\n", @tempfile=#<Tempfile:/var/folders/rf/q4l8n5k56pnbjgkdtzrhq_w00000gn/T/RackMultipart20160116-27556-1jklz1x>>]}}
  [1m[36mRestaurant Load (1.7ms)[0m  [1mSELECT `restaurants`.* FROM `restaurants` WHERE `restaurants`.`slug` = '' LIMIT 1[0m
  [1m[35mRestaurant Load (0.2ms)[0m  SELECT `restaurants`.* FROM `restaurants` WHERE `restaurants`.`id` = 0 LIMIT 1
Completed 500 Internal Server Error in 4ms

ActiveRecord::RecordNotFound (Couldn't find Restaurant with id=):
  app/controllers/photos_controller.rb:26:in `create'


  Rendered /Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_dispatch/middleware/templates/rescues/_trace.erb (1.4ms)
  Rendered /Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_dispatch/middleware/templates/rescues/_request_and_response.erb (1.0ms)
  Rendered /Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_dispatch/middleware/templates/rescues/diagnostics.erb within rescues/layout (46.0ms)


Started POST "/to_cover" for 127.0.0.1 at 2016-01-16 17:50:06 +0100

ActionController::RoutingError (No route matches [POST] "/to_cover"):
  actionpack (3.2.8) lib/action_dispatch/middleware/debug_exceptions.rb:21:in `call'
  actionpack (3.2.8) lib/action_dispatch/middleware/show_exceptions.rb:56:in `call'
  railties (3.2.8) lib/rails/rack/logger.rb:26:in `call_app'
  railties (3.2.8) lib/rails/rack/logger.rb:16:in `call'
  quiet_assets (1.0.3) lib/quiet_assets.rb:23:in `call_with_quiet_assets'
  actionpack (3.2.8) lib/action_dispatch/middleware/request_id.rb:22:in `call'
  rack (1.4.5) lib/rack/methodoverride.rb:21:in `call'
  rack (1.4.5) lib/rack/runtime.rb:17:in `call'
  activesupport (3.2.8) lib/active_support/cache/strategy/local_cache.rb:72:in `call'
  rack (1.4.5) lib/rack/lock.rb:15:in `call'
  actionpack (3.2.8) lib/action_dispatch/middleware/static.rb:62:in `call'
  dragonfly (0.9.15) lib/dragonfly/middleware.rb:13:in `call'
  rack-cache (1.2) lib/rack/cache/context.rb:136:in `forward'
  rack-cache (1.2) lib/rack/cache/context.rb:143:in `pass'
  rack-cache (1.2) lib/rack/cache/context.rb:155:in `invalidate'
  rack-cache (1.2) lib/rack/cache/context.rb:71:in `call!'
  rack-cache (1.2) lib/rack/cache/context.rb:51:in `call'
  railties (3.2.8) lib/rails/engine.rb:479:in `call'
  railties (3.2.8) lib/rails/application.rb:223:in `call'
  rack (1.4.5) lib/rack/content_length.rb:14:in `call'
  railties (3.2.8) lib/rails/rack/log_tailer.rb:17:in `call'
  rack (1.4.5) lib/rack/handler/webrick.rb:59:in `service'
  /Users/kevinmuller/.rvm/rubies/ruby-2.2.4/lib/ruby/2.2.0/webrick/httpserver.rb:138:in `service'
  /Users/kevinmuller/.rvm/rubies/ruby-2.2.4/lib/ruby/2.2.0/webrick/httpserver.rb:94:in `run'
  /Users/kevinmuller/.rvm/rubies/ruby-2.2.4/lib/ruby/2.2.0/webrick/server.rb:294:in `block in start_thread'


  Rendered /Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_dispatch/middleware/templates/rescues/routing_error.erb within rescues/layout (0.6ms)


Started POST "/to_cover" for 127.0.0.1 at 2016-01-16 17:50:10 +0100

ActionController::RoutingError (No route matches [POST] "/to_cover"):
  actionpack (3.2.8) lib/action_dispatch/middleware/debug_exceptions.rb:21:in `call'
  actionpack (3.2.8) lib/action_dispatch/middleware/show_exceptions.rb:56:in `call'
  railties (3.2.8) lib/rails/rack/logger.rb:26:in `call_app'
  railties (3.2.8) lib/rails/rack/logger.rb:16:in `call'
  quiet_assets (1.0.3) lib/quiet_assets.rb:23:in `call_with_quiet_assets'
  actionpack (3.2.8) lib/action_dispatch/middleware/request_id.rb:22:in `call'
  rack (1.4.5) lib/rack/methodoverride.rb:21:in `call'
  rack (1.4.5) lib/rack/runtime.rb:17:in `call'
  activesupport (3.2.8) lib/active_support/cache/strategy/local_cache.rb:72:in `call'
  rack (1.4.5) lib/rack/lock.rb:15:in `call'
  actionpack (3.2.8) lib/action_dispatch/middleware/static.rb:62:in `call'
  dragonfly (0.9.15) lib/dragonfly/middleware.rb:13:in `call'
  rack-cache (1.2) lib/rack/cache/context.rb:136:in `forward'
  rack-cache (1.2) lib/rack/cache/context.rb:143:in `pass'
  rack-cache (1.2) lib/rack/cache/context.rb:155:in `invalidate'
  rack-cache (1.2) lib/rack/cache/context.rb:71:in `call!'
  rack-cache (1.2) lib/rack/cache/context.rb:51:in `call'
  railties (3.2.8) lib/rails/engine.rb:479:in `call'
  railties (3.2.8) lib/rails/application.rb:223:in `call'
  rack (1.4.5) lib/rack/content_length.rb:14:in `call'
  railties (3.2.8) lib/rails/rack/log_tailer.rb:17:in `call'
  rack (1.4.5) lib/rack/handler/webrick.rb:59:in `service'
  /Users/kevinmuller/.rvm/rubies/ruby-2.2.4/lib/ruby/2.2.0/webrick/httpserver.rb:138:in `service'
  /Users/kevinmuller/.rvm/rubies/ruby-2.2.4/lib/ruby/2.2.0/webrick/httpserver.rb:94:in `run'
  /Users/kevinmuller/.rvm/rubies/ruby-2.2.4/lib/ruby/2.2.0/webrick/server.rb:294:in `block in start_thread'


  Rendered /Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_dispatch/middleware/templates/rescues/routing_error.erb within rescues/layout (0.5ms)


Started POST "/photos" for 127.0.0.1 at 2016-01-16 17:50:17 +0100
Processing by PhotosController#create as JSON
  Parameters: {"utf8"=>"âœ“", "authenticity_token"=>"ZhR8a2fYr/EQcBrBVm2c17tt7AHk64f/gvsZ5fOllxc=", "photo"=>{"restaurant_id"=>"", "user_id"=>"1", "image"=>[#<ActionDispatch::Http::UploadedFile:0x007f83bde4aeb0 @original_filename="sunday_roast.png", @content_type="image/png", @headers="Content-Disposition: form-data; name=\"photo[image][]\"; filename=\"sunday_roast.png\"\r\nContent-Type: image/png\r\n", @tempfile=#<Tempfile:/var/folders/rf/q4l8n5k56pnbjgkdtzrhq_w00000gn/T/RackMultipart20160116-27556-1b6aro4>>]}}
  [1m[36mRestaurant Load (1.5ms)[0m  [1mSELECT `restaurants`.* FROM `restaurants` WHERE `restaurants`.`slug` = '' LIMIT 1[0m
  [1m[35mRestaurant Load (0.2ms)[0m  SELECT `restaurants`.* FROM `restaurants` WHERE `restaurants`.`id` = 0 LIMIT 1
Completed 500 Internal Server Error in 4ms

ActiveRecord::RecordNotFound (Couldn't find Restaurant with id=):
  app/controllers/photos_controller.rb:26:in `create'


  Rendered /Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_dispatch/middleware/templates/rescues/_trace.erb (1.3ms)
  Rendered /Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_dispatch/middleware/templates/rescues/_request_and_response.erb (1.0ms)
  Rendered /Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_dispatch/middleware/templates/rescues/diagnostics.erb within rescues/layout (48.2ms)


Started POST "/admin/menus" for 127.0.0.1 at 2016-01-16 17:51:34 +0100
Processing by MenusController#create as JS
  Parameters: {"utf8"=>"âœ“", "authenticity_token"=>"ZhR8a2fYr/EQcBrBVm2c17tt7AHk64f/gvsZ5fOllxc=", "menus"=>{"name"=>"", "restaurant_id"=>"", "menu"=>#<ActionDispatch::Http::UploadedFile:0x007f83bdbeaeb8 @original_filename="chinese.png", @content_type="image/png", @headers="Content-Disposition: form-data; name=\"menus[menu]\"; filename=\"chinese.png\"\r\nContent-Type: image/png\r\n", @tempfile=#<Tempfile:/var/folders/rf/q4l8n5k56pnbjgkdtzrhq_w00000gn/T/RackMultipart20160116-27556-11kd6sx>>}, "commit"=>"Submit", "remotipart_submitted"=>"true", "X-Requested-With"=>"IFrame", "X-Http-Accept"=>"text/javascript, application/javascript, application/ecmascript, application/x-ecmascript, */*; q=0.01"}
  [1m[36mUser Load (0.6ms)[0m  [1mSELECT `users`.* FROM `users` WHERE `users`.`id` = 1 LIMIT 1[0m
  [1m[35m (0.1ms)[0m  BEGIN
  [1m[36mSQL (0.7ms)[0m  [1mINSERT INTO `menus` (`created_at`, `menu_name`, `menu_uid`, `name`, `restaurant_id`, `updated_at`, `user_id`) VALUES ('2016-01-16 16:51:35', 'chinese.png', '2016/01/16/17_51_35_128_chinese.png', '', NULL, '2016-01-16 16:51:35', 1)[0m
  [1m[35m (0.6ms)[0m  COMMIT
Completed 200 OK in 399ms (Views: 0.1ms | ActiveRecord: 2.1ms)


Started POST "/admin/menus" for 127.0.0.1 at 2016-01-16 17:51:38 +0100
Processing by MenusController#create as JS
  Parameters: {"utf8"=>"âœ“", "authenticity_token"=>"ZhR8a2fYr/EQcBrBVm2c17tt7AHk64f/gvsZ5fOllxc=", "menus"=>{"name"=>"", "restaurant_id"=>"", "menu"=>#<ActionDispatch::Http::UploadedFile:0x007f83badd9628 @original_filename="chinese.png", @content_type="image/png", @headers="Content-Disposition: form-data; name=\"menus[menu]\"; filename=\"chinese.png\"\r\nContent-Type: image/png\r\n", @tempfile=#<Tempfile:/var/folders/rf/q4l8n5k56pnbjgkdtzrhq_w00000gn/T/RackMultipart20160116-27556-10ukktv>>}, "commit"=>"Submit", "remotipart_submitted"=>"true", "X-Requested-With"=>"IFrame", "X-Http-Accept"=>"text/javascript, application/javascript, application/ecmascript, application/x-ecmascript, */*; q=0.01"}
  [1m[36mUser Load (0.3ms)[0m  [1mSELECT `users`.* FROM `users` WHERE `users`.`id` = 1 LIMIT 1[0m
  [1m[35m (0.1ms)[0m  BEGIN
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO `menus` (`created_at`, `menu_name`, `menu_uid`, `name`, `restaurant_id`, `updated_at`, `user_id`) VALUES ('2016-01-16 16:51:38', 'chinese.png', '2016/01/16/17_51_38_791_chinese.png', '', NULL, '2016-01-16 16:51:38', 1)[0m
  [1m[35m (0.5ms)[0m  COMMIT
Completed 200 OK in 13ms (Views: 0.1ms | ActiveRecord: 1.3ms)


Started GET "/admin/reviews" for 127.0.0.1 at 2016-01-16 17:51:45 +0100
Processing by ReviewsController#index as HTML
  [1m[36mUser Load (0.5ms)[0m  [1mSELECT `users`.* FROM `users` WHERE `users`.`id` = 1 LIMIT 1[0m
  Rendered shared/_review_manage_tabs.html.erb (0.9ms)
  Rendered reviews/_condition_fields.html.erb (23.8ms)
  [1m[35mReview Load (1.2ms)[0m  SELECT `reviews`.* FROM `reviews` ORDER BY created_at DESC LIMIT 30 OFFSET 0
  [1m[36mRestaurant Load (0.4ms)[0m  [1mSELECT `restaurants`.* FROM `restaurants` WHERE `restaurants`.`id` = 390 LIMIT 1[0m
  [1m[35mPhoto Load (0.5ms)[0m  SELECT `photos`.* FROM `photos` WHERE (restaurant_id = 390 and cover = true and status = 1) LIMIT 1
  [1m[36mPhoto Load (0.3ms)[0m  [1mSELECT `photos`.* FROM `photos` WHERE `photos`.`restaurant_id` = 390 AND `photos`.`status` = 1 ORDER BY restaurant_id ASC, created_at DESC LIMIT 1[0m
  [1m[35mUser Load (0.2ms)[0m  SELECT `users`.* FROM `users` WHERE `users`.`id` = 174 LIMIT 1
  Rendered reviews/_rating.html.erb (0.4ms)
  Rendered reviews/_rating.html.erb (0.0ms)
  Rendered reviews/_rating.html.erb (0.0ms)
  Rendered reviews/_rating.html.erb (0.0ms)
  Rendered reviews/_status_label.html.erb (0.4ms)
  Rendered reviews/_review_status.html.erb (1.7ms)
  [1m[36mRestaurant Load (0.3ms)[0m  [1mSELECT `restaurants`.* FROM `restaurants` WHERE `restaurants`.`id` = 575 LIMIT 1[0m
  [1m[35mPhoto Load (0.3ms)[0m  SELECT `photos`.* FROM `photos` WHERE (restaurant_id = 575 and cover = true and status = 1) LIMIT 1
  [1m[36mPhoto Load (0.3ms)[0m  [1mSELECT `photos`.* FROM `photos` WHERE `photos`.`restaurant_id` = 575 AND `photos`.`status` = 1 ORDER BY restaurant_id ASC, created_at DESC LIMIT 1[0m
  [1m[35mUser Load (0.3ms)[0m  SELECT `users`.* FROM `users` WHERE `users`.`id` = 172 LIMIT 1
  Rendered reviews/_rating.html.erb (0.0ms)
  Rendered reviews/_rating.html.erb (0.0ms)
  Rendered reviews/_rating.html.erb (0.0ms)
  Rendered reviews/_rating.html.erb (0.0ms)
  Rendered reviews/_status_label.html.erb (0.1ms)
  Rendered reviews/_review_status.html.erb (0.5ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT `restaurants`.* FROM `restaurants` WHERE `restaurants`.`id` = 575 LIMIT 1[0m
  [1m[35mCACHE (0.0ms)[0m  SELECT `photos`.* FROM `photos` WHERE (restaurant_id = 575 and cover = true and status = 1) LIMIT 1
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT `photos`.* FROM `photos` WHERE `photos`.`restaurant_id` = 575 AND `photos`.`status` = 1 ORDER BY restaurant_id ASC, created_at DESC LIMIT 1[0m
  [1m[35mCACHE (0.0ms)[0m  SELECT `users`.* FROM `users` WHERE `users`.`id` = 172 LIMIT 1
  Rendered reviews/_rating.html.erb (0.0ms)
  Rendered reviews/_rating.html.erb (0.0ms)
  Rendered reviews/_rating.html.erb (0.0ms)
  Rendered reviews/_rating.html.erb (0.0ms)
  Rendered reviews/_status_label.html.erb (0.1ms)
  Rendered reviews/_review_status.html.erb (0.7ms)
  [1m[36mRestaurant Load (0.3ms)[0m  [1mSELECT `restaurants`.* FROM `restaurants` WHERE `restaurants`.`id` = 994 LIMIT 1[0m
  [1m[35mPhoto Load (1.1ms)[0m  SELECT `photos`.* FROM `photos` WHERE (restaurant_id = 994 and cover = true and status = 1) LIMIT 1
  [1m[36mPhoto Load (0.3ms)[0m  [1mSELECT `photos`.* FROM `photos` WHERE `photos`.`restaurant_id` = 994 AND `photos`.`status` = 1 ORDER BY restaurant_id ASC, created_at DESC LIMIT 1[0m
  [1m[35mUser Load (0.2ms)[0m  SELECT `users`.* FROM `users` WHERE `users`.`id` = 169 LIMIT 1
  Rendered reviews/_rating.html.erb (0.0ms)
  Rendered reviews/_rating.html.erb (0.0ms)
  Rendered reviews/_rating.html.erb (0.0ms)
  Rendered reviews/_rating.html.erb (0.0ms)
  Rendered reviews/_status_label.html.erb (0.1ms)
  Rendered reviews/_review_status.html.erb (0.8ms)
  [1m[36mRestaurant Load (0.3ms)[0m  [1mSELECT `restaurants`.* FROM `restaurants` WHERE `restaurants`.`id` = 996 LIMIT 1[0m
  [1m[35mPhoto Load (0.4ms)[0m  SELECT `photos`.* FROM `photos` WHERE (restaurant_id = 996 and cover = true and status = 1) LIMIT 1
  [1m[36mPhoto Load (0.3ms)[0m  [1mSELECT `photos`.* FROM `photos` WHERE `photos`.`restaurant_id` = 996 AND `photos`.`status` = 1 ORDER BY restaurant_id ASC, created_at DESC LIMIT 1[0m
  [1m[35mUser Load (0.3ms)[0m  SELECT `users`.* FROM `users` WHERE `users`.`id` = 166 LIMIT 1
  Rendered reviews/_rating.html.erb (0.0ms)
  Rendered reviews/_rating.html.erb (0.0ms)
  Rendered reviews/_rating.html.erb (0.0ms)
  Rendered reviews/_rating.html.erb (0.0ms)
  Rendered reviews/_status_label.html.erb (0.1ms)
  Rendered reviews/_review_status.html.erb (1.7ms)
  [1m[36mRestaurant Load (0.3ms)[0m  [1mSELECT `restaurants`.* FROM `restaurants` WHERE `restaurants`.`id` = 992 LIMIT 1[0m
  [1m[35mPhoto Load (0.4ms)[0m  SELECT `photos`.* FROM `photos` WHERE (restaurant_id = 992 and cover = true and status = 1) LIMIT 1
  [1m[36mPhoto Load (0.3ms)[0m  [1mSELECT `photos`.* FROM `photos` WHERE `photos`.`restaurant_id` = 992 AND `photos`.`status` = 1 ORDER BY restaurant_id ASC, created_at DESC LIMIT 1[0m
  [1m[35mUser Load (0.2ms)[0m  SELECT `users`.* FROM `users` WHERE `users`.`id` = 12 LIMIT 1
  Rendered reviews/_rating.html.erb (0.1ms)
  Rendered reviews/_rating.html.erb (0.0ms)
  Rendered reviews/_rating.html.erb (0.0ms)
  Rendered reviews/_rating.html.erb (0.0ms)
  Rendered reviews/_status_label.html.erb (0.1ms)
  Rendered reviews/_review_status.html.erb (0.9ms)
  [1m[36mRestaurant Load (0.5ms)[0m  [1mSELECT `restaurants`.* FROM `restaurants` WHERE `restaurants`.`id` = 115 LIMIT 1[0m
  [1m[35mPhoto Load (0.4ms)[0m  SELECT `photos`.* FROM `photos` WHERE (restaurant_id = 115 and cover = true and status = 1) LIMIT 1
  [1m[36mPhoto Load (0.3ms)[0m  [1mSELECT `photos`.* FROM `photos` WHERE `photos`.`restaurant_id` = 115 AND `photos`.`status` = 1 ORDER BY restaurant_id ASC, created_at DESC LIMIT 1[0m
  [1m[35mUser Load (0.2ms)[0m  SELECT `users`.* FROM `users` WHERE `users`.`id` = 164 LIMIT 1
  Rendered reviews/_rating.html.erb (0.0ms)
  Rendered reviews/_rating.html.erb (0.0ms)
  Rendered reviews/_rating.html.erb (0.0ms)
  Rendered reviews/_rating.html.erb (0.1ms)
  Rendered reviews/_status_label.html.erb (0.1ms)
  Rendered reviews/_review_status.html.erb (0.7ms)
  [1m[36mRestaurant Load (0.4ms)[0m  [1mSELECT `restaurants`.* FROM `restaurants` WHERE `restaurants`.`id` = 32 LIMIT 1[0m
  [1m[35mPhoto Load (0.4ms)[0m  SELECT `photos`.* FROM `photos` WHERE (restaurant_id = 32 and cover = true and status = 1) LIMIT 1
  [1m[36mPhoto Load (0.3ms)[0m  [1mSELECT `photos`.* FROM `photos` WHERE `photos`.`restaurant_id` = 32 AND `photos`.`status` = 1 ORDER BY restaurant_id ASC, created_at DESC LIMIT 1[0m
  [1m[35mUser Load (0.3ms)[0m  SELECT `users`.* FROM `users` WHERE `users`.`id` = 23 LIMIT 1
  Rendered reviews/_rating.html.erb (0.0ms)
  Rendered reviews/_rating.html.erb (0.0ms)
  Rendered reviews/_rating.html.erb (0.0ms)
  Rendered reviews/_rating.html.erb (0.0ms)
  Rendered reviews/_status_label.html.erb (0.2ms)
  Rendered reviews/_review_status.html.erb (1.7ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT `restaurants`.* FROM `restaurants` WHERE `restaurants`.`id` = 32 LIMIT 1[0m
  [1m[35mCACHE (0.0ms)[0m  SELECT `photos`.* FROM `photos` WHERE (restaurant_id = 32 and cover = true and status = 1) LIMIT 1
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT `photos`.* FROM `photos` WHERE `photos`.`restaurant_id` = 32 AND `photos`.`status` = 1 ORDER BY restaurant_id ASC, created_at DESC LIMIT 1[0m
  [1m[35mCACHE (0.0ms)[0m  SELECT `users`.* FROM `users` WHERE `users`.`id` = 23 LIMIT 1
  Rendered reviews/_rating.html.erb (0.0ms)
  Rendered reviews/_rating.html.erb (0.0ms)
  Rendered reviews/_rating.html.erb (0.0ms)
  Rendered reviews/_rating.html.erb (0.0ms)
  Rendered reviews/_status_label.html.erb (0.2ms)
  Rendered reviews/_review_status.html.erb (0.7ms)
  [1m[36mRestaurant Load (0.3ms)[0m  [1mSELECT `restaurants`.* FROM `restaurants` WHERE `restaurants`.`id` = 958 LIMIT 1[0m
  [1m[35mPhoto Load (0.3ms)[0m  SELECT `photos`.* FROM `photos` WHERE (restaurant_id = 958 and cover = true and status = 1) LIMIT 1
  [1m[36mPhoto Load (0.5ms)[0m  [1mSELECT `photos`.* FROM `photos` WHERE `photos`.`restaurant_id` = 958 AND `photos`.`status` = 1 ORDER BY restaurant_id ASC, created_at DESC LIMIT 1[0m
  [1m[35mCACHE (0.0ms)[0m  SELECT `photos`.* FROM `photos` WHERE (restaurant_id = 958 and cover = true and status = 1) LIMIT 1
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT `photos`.* FROM `photos` WHERE `photos`.`restaurant_id` = 958 AND `photos`.`status` = 1 ORDER BY restaurant_id ASC, created_at DESC LIMIT 1[0m
  [1m[35mUser Load (0.3ms)[0m  SELECT `users`.* FROM `users` WHERE `users`.`id` = 160 LIMIT 1
  Rendered reviews/_rating.html.erb (0.0ms)
  Rendered reviews/_rating.html.erb (0.0ms)
  Rendered reviews/_rating.html.erb (0.0ms)
  Rendered reviews/_rating.html.erb (0.0ms)
  Rendered reviews/_status_label.html.erb (0.2ms)
  Rendered reviews/_review_status.html.erb (0.8ms)
  [1m[36mRestaurant Load (0.4ms)[0m  [1mSELECT `restaurants`.* FROM `restaurants` WHERE `restaurants`.`id` = 79 LIMIT 1[0m
  [1m[35mPhoto Load (0.4ms)[0m  SELECT `photos`.* FROM `photos` WHERE (restaurant_id = 79 and cover = true and status = 1) LIMIT 1
  [1m[36mPhoto Load (0.4ms)[0m  [1mSELECT `photos`.* FROM `photos` WHERE `photos`.`restaurant_id` = 79 AND `photos`.`status` = 1 ORDER BY restaurant_id ASC, created_at DESC LIMIT 1[0m
  [1m[35mCACHE (0.0ms)[0m  SELECT `photos`.* FROM `photos` WHERE (restaurant_id = 79 and cover = true and status = 1) LIMIT 1
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT `photos`.* FROM `photos` WHERE `photos`.`restaurant_id` = 79 AND `photos`.`status` = 1 ORDER BY restaurant_id ASC, created_at DESC LIMIT 1[0m
  [1m[35mUser Load (0.4ms)[0m  SELECT `users`.* FROM `users` WHERE `users`.`id` = 159 LIMIT 1
  Rendered reviews/_rating.html.erb (0.0ms)
  Rendered reviews/_rating.html.erb (0.0ms)
  Rendered reviews/_rating.html.erb (0.0ms)
  Rendered reviews/_rating.html.erb (0.0ms)
  Rendered reviews/_status_label.html.erb (0.2ms)
  Rendered reviews/_review_status.html.erb (0.9ms)
  [1m[36mRestaurant Load (0.3ms)[0m  [1mSELECT `restaurants`.* FROM `restaurants` WHERE `restaurants`.`id` = 3 LIMIT 1[0m
  [1m[35mPhoto Load (0.4ms)[0m  SELECT `photos`.* FROM `photos` WHERE (restaurant_id = 3 and cover = true and status = 1) LIMIT 1
  [1m[36mPhoto Load (0.4ms)[0m  [1mSELECT `photos`.* FROM `photos` WHERE `photos`.`restaurant_id` = 3 AND `photos`.`status` = 1 ORDER BY restaurant_id ASC, created_at DESC LIMIT 1[0m
  [1m[35mCACHE (0.0ms)[0m  SELECT `users`.* FROM `users` WHERE `users`.`id` = 159 LIMIT 1
  Rendered reviews/_rating.html.erb (0.0ms)
  Rendered reviews/_rating.html.erb (0.0ms)
  Rendered reviews/_rating.html.erb (0.0ms)
  Rendered reviews/_rating.html.erb (0.0ms)
  Rendered reviews/_status_label.html.erb (0.1ms)
  Rendered reviews/_review_status.html.erb (0.8ms)
  [1m[36mRestaurant Load (0.4ms)[0m  [1mSELECT `restaurants`.* FROM `restaurants` WHERE `restaurants`.`id` = 668 LIMIT 1[0m
  [1m[35mPhoto Load (0.4ms)[0m  SELECT `photos`.* FROM `photos` WHERE (restaurant_id = 668 and cover = true and status = 1) LIMIT 1
  [1m[36mPhoto Load (0.6ms)[0m  [1mSELECT `photos`.* FROM `photos` WHERE `photos`.`restaurant_id` = 668 AND `photos`.`status` = 1 ORDER BY restaurant_id ASC, created_at DESC LIMIT 1[0m
  [1m[35mCACHE (0.0ms)[0m  SELECT `users`.* FROM `users` WHERE `users`.`id` = 159 LIMIT 1
  Rendered reviews/_rating.html.erb (0.0ms)
  Rendered reviews/_rating.html.erb (0.1ms)
  Rendered reviews/_rating.html.erb (0.0ms)
  Rendered reviews/_rating.html.erb (0.0ms)
  Rendered reviews/_status_label.html.erb (0.1ms)
  Rendered reviews/_review_status.html.erb (1.0ms)
  [1m[36mRestaurant Load (0.4ms)[0m  [1mSELECT `restaurants`.* FROM `restaurants` WHERE `restaurants`.`id` = 156 LIMIT 1[0m
  [1m[35mPhoto Load (1.7ms)[0m  SELECT `photos`.* FROM `photos` WHERE (restaurant_id = 156 and cover = true and status = 1) LIMIT 1
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT `photos`.* FROM `photos` WHERE (restaurant_id = 156 and cover = true and status = 1) LIMIT 1[0m
  [1m[35mCACHE (0.0ms)[0m  SELECT `users`.* FROM `users` WHERE `users`.`id` = 159 LIMIT 1
  Rendered reviews/_rating.html.erb (0.0ms)
  Rendered reviews/_rating.html.erb (0.0ms)
  Rendered reviews/_rating.html.erb (0.0ms)
  Rendered reviews/_rating.html.erb (0.0ms)
  Rendered reviews/_status_label.html.erb (0.1ms)
  Rendered reviews/_review_status.html.erb (0.7ms)
  [1m[36mRestaurant Load (0.3ms)[0m  [1mSELECT `restaurants`.* FROM `restaurants` WHERE `restaurants`.`id` = 875 LIMIT 1[0m
  [1m[35mPhoto Load (0.4ms)[0m  SELECT `photos`.* FROM `photos` WHERE (restaurant_id = 875 and cover = true and status = 1) LIMIT 1
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT `photos`.* FROM `photos` WHERE (restaurant_id = 875 and cover = true and status = 1) LIMIT 1[0m
  [1m[35mCACHE (0.0ms)[0m  SELECT `users`.* FROM `users` WHERE `users`.`id` = 12 LIMIT 1
  Rendered reviews/_rating.html.erb (0.1ms)
  Rendered reviews/_rating.html.erb (0.0ms)
  Rendered reviews/_rating.html.erb (0.0ms)
  Rendered reviews/_rating.html.erb (0.0ms)
  Rendered reviews/_status_label.html.erb (0.1ms)
  Rendered reviews/_review_status.html.erb (0.8ms)
  [1m[36mRestaurant Load (0.3ms)[0m  [1mSELECT `restaurants`.* FROM `restaurants` WHERE `restaurants`.`id` = 547 LIMIT 1[0m
  [1m[35mPhoto Load (0.4ms)[0m  SELECT `photos`.* FROM `photos` WHERE (restaurant_id = 547 and cover = true and status = 1) LIMIT 1
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT `photos`.* FROM `photos` WHERE (restaurant_id = 547 and cover = true and status = 1) LIMIT 1[0m
  [1m[35mUser Load (0.2ms)[0m  SELECT `users`.* FROM `users` WHERE `users`.`id` = 157 LIMIT 1
  Rendered reviews/_rating.html.erb (0.1ms)
  Rendered reviews/_rating.html.erb (0.0ms)
  Rendered reviews/_rating.html.erb (0.0ms)
  Rendered reviews/_rating.html.erb (0.0ms)
  Rendered reviews/_status_label.html.erb (0.2ms)
  Rendered reviews/_review_status.html.erb (0.9ms)
  [1m[36mRestaurant Load (0.3ms)[0m  [1mSELECT `restaurants`.* FROM `restaurants` WHERE `restaurants`.`id` = 631 LIMIT 1[0m
  [1m[35mPhoto Load (0.4ms)[0m  SELECT `photos`.* FROM `photos` WHERE (restaurant_id = 631 and cover = true and status = 1) LIMIT 1
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT `photos`.* FROM `photos` WHERE (restaurant_id = 631 and cover = true and status = 1) LIMIT 1[0m
  [1m[35mCACHE (0.0ms)[0m  SELECT `users`.* FROM `users` WHERE `users`.`id` = 157 LIMIT 1
  Rendered reviews/_rating.html.erb (0.0ms)
  Rendered reviews/_rating.html.erb (0.0ms)
  Rendered reviews/_rating.html.erb (0.0ms)
  Rendered reviews/_rating.html.erb (0.1ms)
  Rendered reviews/_status_label.html.erb (0.1ms)
  Rendered reviews/_review_status.html.erb (0.8ms)
  [1m[36mRestaurant Load (0.9ms)[0m  [1mSELECT `restaurants`.* FROM `restaurants` WHERE `restaurants`.`id` = 634 LIMIT 1[0m
  [1m[35mPhoto Load (0.4ms)[0m  SELECT `photos`.* FROM `photos` WHERE (restaurant_id = 634 and cover = true and status = 1) LIMIT 1
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT `photos`.* FROM `photos` WHERE (restaurant_id = 634 and cover = true and status = 1) LIMIT 1[0m
  [1m[35mCACHE (0.0ms)[0m  SELECT `users`.* FROM `users` WHERE `users`.`id` = 157 LIMIT 1
  Rendered reviews/_rating.html.erb (0.0ms)
  Rendered reviews/_rating.html.erb (0.0ms)
  Rendered reviews/_rating.html.erb (0.0ms)
  Rendered reviews/_rating.html.erb (0.0ms)
  Rendered reviews/_status_label.html.erb (0.2ms)
  Rendered reviews/_review_status.html.erb (0.8ms)
  [1m[36mRestaurant Load (0.3ms)[0m  [1mSELECT `restaurants`.* FROM `restaurants` WHERE `restaurants`.`id` = 381 LIMIT 1[0m
  [1m[35mPhoto Load (0.3ms)[0m  SELECT `photos`.* FROM `photos` WHERE (restaurant_id = 381 and cover = true and status = 1) LIMIT 1
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT `photos`.* FROM `photos` WHERE (restaurant_id = 381 and cover = true and status = 1) LIMIT 1[0m
  [1m[35mCACHE (0.0ms)[0m  SELECT `users`.* FROM `users` WHERE `users`.`id` = 157 LIMIT 1
  Rendered reviews/_rating.html.erb (0.1ms)
  Rendered reviews/_rating.html.erb (0.0ms)
  Rendered reviews/_rating.html.erb (0.0ms)
  Rendered reviews/_rating.html.erb (0.0ms)
  Rendered reviews/_status_label.html.erb (0.1ms)
  Rendered reviews/_review_status.html.erb (1.1ms)
  [1m[36mRestaurant Load (0.4ms)[0m  [1mSELECT `restaurants`.* FROM `restaurants` WHERE `restaurants`.`id` = 630 LIMIT 1[0m
  [1m[35mPhoto Load (0.3ms)[0m  SELECT `photos`.* FROM `photos` WHERE (restaurant_id = 630 and cover = true and status = 1) LIMIT 1
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT `photos`.* FROM `photos` WHERE (restaurant_id = 630 and cover = true and status = 1) LIMIT 1[0m
  [1m[35mCACHE (0.0ms)[0m  SELECT `users`.* FROM `users` WHERE `users`.`id` = 157 LIMIT 1
  Rendered reviews/_rating.html.erb (0.0ms)
  Rendered reviews/_rating.html.erb (0.0ms)
  Rendered reviews/_rating.html.erb (0.0ms)
  Rendered reviews/_rating.html.erb (0.0ms)
  Rendered reviews/_status_label.html.erb (0.1ms)
  Rendered reviews/_review_status.html.erb (1.0ms)
  [1m[36mRestaurant Load (0.4ms)[0m  [1mSELECT `restaurants`.* FROM `restaurants` WHERE `restaurants`.`id` = 353 LIMIT 1[0m
  [1m[35mPhoto Load (0.4ms)[0m  SELECT `photos`.* FROM `photos` WHERE (restaurant_id = 353 and cover = true and status = 1) LIMIT 1
  [1m[36mPhoto Load (0.4ms)[0m  [1mSELECT `photos`.* FROM `photos` WHERE `photos`.`restaurant_id` = 353 AND `photos`.`status` = 1 ORDER BY restaurant_id ASC, created_at DESC LIMIT 1[0m
  [1m[35mCACHE (0.0ms)[0m  SELECT `users`.* FROM `users` WHERE `users`.`id` = 157 LIMIT 1
  Rendered reviews/_rating.html.erb (0.0ms)
  Rendered reviews/_rating.html.erb (0.0ms)
  Rendered reviews/_rating.html.erb (0.0ms)
  Rendered reviews/_rating.html.erb (0.0ms)
  Rendered reviews/_status_label.html.erb (0.1ms)
  Rendered reviews/_review_status.html.erb (1.5ms)
  [1m[36mRestaurant Load (0.3ms)[0m  [1mSELECT `restaurants`.* FROM `restaurants` WHERE `restaurants`.`id` = 506 LIMIT 1[0m
  [1m[35mPhoto Load (0.4ms)[0m  SELECT `photos`.* FROM `photos` WHERE (restaurant_id = 506 and cover = true and status = 1) LIMIT 1
  [1m[36mPhoto Load (0.4ms)[0m  [1mSELECT `photos`.* FROM `photos` WHERE `photos`.`restaurant_id` = 506 AND `photos`.`status` = 1 ORDER BY restaurant_id ASC, created_at DESC LIMIT 1[0m
  [1m[35mCACHE (0.0ms)[0m  SELECT `users`.* FROM `users` WHERE `users`.`id` = 157 LIMIT 1
  Rendered reviews/_rating.html.erb (0.0ms)
  Rendered reviews/_rating.html.erb (0.0ms)
  Rendered reviews/_rating.html.erb (0.0ms)
  Rendered reviews/_rating.html.erb (0.0ms)
  Rendered reviews/_status_label.html.erb (0.1ms)
  Rendered reviews/_review_status.html.erb (0.8ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT `restaurants`.* FROM `restaurants` WHERE `restaurants`.`id` = 575 LIMIT 1[0m
  [1m[35mCACHE (0.0ms)[0m  SELECT `photos`.* FROM `photos` WHERE (restaurant_id = 575 and cover = true and status = 1) LIMIT 1
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT `photos`.* FROM `photos` WHERE `photos`.`restaurant_id` = 575 AND `photos`.`status` = 1 ORDER BY restaurant_id ASC, created_at DESC LIMIT 1[0m
  [1m[35mCACHE (0.0ms)[0m  SELECT `users`.* FROM `users` WHERE `users`.`id` = 157 LIMIT 1
  Rendered reviews/_rating.html.erb (0.0ms)
  Rendered reviews/_rating.html.erb (0.0ms)
  Rendered reviews/_rating.html.erb (0.0ms)
  Rendered reviews/_rating.html.erb (0.0ms)
  Rendered reviews/_status_label.html.erb (0.1ms)
  Rendered reviews/_review_status.html.erb (1.0ms)
  [1m[36mRestaurant Load (0.3ms)[0m  [1mSELECT `restaurants`.* FROM `restaurants` WHERE `restaurants`.`id` = 582 LIMIT 1[0m
  [1m[35mPhoto Load (0.4ms)[0m  SELECT `photos`.* FROM `photos` WHERE (restaurant_id = 582 and cover = true and status = 1) LIMIT 1
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT `photos`.* FROM `photos` WHERE (restaurant_id = 582 and cover = true and status = 1) LIMIT 1[0m
  [1m[35mUser Load (0.2ms)[0m  SELECT `users`.* FROM `users` WHERE `users`.`id` = 122 LIMIT 1
  Rendered reviews/_rating.html.erb (0.0ms)
  Rendered reviews/_rating.html.erb (0.1ms)
  Rendered reviews/_rating.html.erb (0.0ms)
  Rendered reviews/_rating.html.erb (0.0ms)
  Rendered reviews/_status_label.html.erb (0.1ms)
  Rendered reviews/_review_status.html.erb (10.7ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT `restaurants`.* FROM `restaurants` WHERE `restaurants`.`id` = 582 LIMIT 1[0m
  [1m[35mCACHE (0.0ms)[0m  SELECT `photos`.* FROM `photos` WHERE (restaurant_id = 582 and cover = true and status = 1) LIMIT 1
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT `photos`.* FROM `photos` WHERE (restaurant_id = 582 and cover = true and status = 1) LIMIT 1[0m
  [1m[35mUser Load (0.3ms)[0m  SELECT `users`.* FROM `users` WHERE `users`.`id` = 5 LIMIT 1
  Rendered reviews/_rating.html.erb (0.0ms)
  Rendered reviews/_rating.html.erb (0.0ms)
  Rendered reviews/_rating.html.erb (0.1ms)
  Rendered reviews/_rating.html.erb (0.0ms)
  Rendered reviews/_status_label.html.erb (0.2ms)
  Rendered reviews/_review_status.html.erb (0.7ms)
  [1m[36mRestaurant Load (0.3ms)[0m  [1mSELECT `restaurants`.* FROM `restaurants` WHERE `restaurants`.`id` = 535 LIMIT 1[0m
  [1m[35mPhoto Load (0.3ms)[0m  SELECT `photos`.* FROM `photos` WHERE (restaurant_id = 535 and cover = true and status = 1) LIMIT 1
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT `photos`.* FROM `photos` WHERE (restaurant_id = 535 and cover = true and status = 1) LIMIT 1[0m
  [1m[35mCACHE (0.0ms)[0m  SELECT `users`.* FROM `users` WHERE `users`.`id` = 122 LIMIT 1
  Rendered reviews/_rating.html.erb (0.1ms)
  Rendered reviews/_rating.html.erb (0.0ms)
  Rendered reviews/_rating.html.erb (0.0ms)
  Rendered reviews/_rating.html.erb (0.0ms)
  Rendered reviews/_status_label.html.erb (0.1ms)
  Rendered reviews/_review_status.html.erb (0.9ms)
  [1m[36mRestaurant Load (0.3ms)[0m  [1mSELECT `restaurants`.* FROM `restaurants` WHERE `restaurants`.`id` = 39 LIMIT 1[0m
  [1m[35mPhoto Load (0.3ms)[0m  SELECT `photos`.* FROM `photos` WHERE (restaurant_id = 39 and cover = true and status = 1) LIMIT 1
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT `photos`.* FROM `photos` WHERE (restaurant_id = 39 and cover = true and status = 1) LIMIT 1[0m
  [1m[35mUser Load (0.2ms)[0m  SELECT `users`.* FROM `users` WHERE `users`.`id` = 150 LIMIT 1
  Rendered reviews/_rating.html.erb (0.0ms)
  Rendered reviews/_rating.html.erb (0.0ms)
  Rendered reviews/_rating.html.erb (0.0ms)
  Rendered reviews/_rating.html.erb (0.0ms)
  Rendered reviews/_status_label.html.erb (0.1ms)
  Rendered reviews/_review_status.html.erb (1.0ms)
  [1m[36mRestaurant Load (0.3ms)[0m  [1mSELECT `restaurants`.* FROM `restaurants` WHERE `restaurants`.`id` = 907 LIMIT 1[0m
  [1m[35mPhoto Load (0.4ms)[0m  SELECT `photos`.* FROM `photos` WHERE (restaurant_id = 907 and cover = true and status = 1) LIMIT 1
  [1m[36mPhoto Load (0.3ms)[0m  [1mSELECT `photos`.* FROM `photos` WHERE `photos`.`restaurant_id` = 907 AND `photos`.`status` = 1 ORDER BY restaurant_id ASC, created_at DESC LIMIT 1[0m
  [1m[35mUser Load (0.2ms)[0m  SELECT `users`.* FROM `users` WHERE `users`.`id` = 146 LIMIT 1
  Rendered reviews/_rating.html.erb (0.0ms)
  Rendered reviews/_rating.html.erb (0.0ms)
  Rendered reviews/_rating.html.erb (0.0ms)
  Rendered reviews/_rating.html.erb (0.0ms)
  Rendered reviews/_status_label.html.erb (0.1ms)
  Rendered reviews/_review_status.html.erb (1.1ms)
  [1m[36mRestaurant Load (0.3ms)[0m  [1mSELECT `restaurants`.* FROM `restaurants` WHERE `restaurants`.`id` = 201 LIMIT 1[0m
  [1m[35mPhoto Load (0.3ms)[0m  SELECT `photos`.* FROM `photos` WHERE (restaurant_id = 201 and cover = true and status = 1) LIMIT 1
  [1m[36mPhoto Load (0.6ms)[0m  [1mSELECT `photos`.* FROM `photos` WHERE `photos`.`restaurant_id` = 201 AND `photos`.`status` = 1 ORDER BY restaurant_id ASC, created_at DESC LIMIT 1[0m
  [1m[35mCACHE (0.0ms)[0m  SELECT `photos`.* FROM `photos` WHERE (restaurant_id = 201 and cover = true and status = 1) LIMIT 1
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT `photos`.* FROM `photos` WHERE `photos`.`restaurant_id` = 201 AND `photos`.`status` = 1 ORDER BY restaurant_id ASC, created_at DESC LIMIT 1[0m
  [1m[35mCACHE (0.0ms)[0m  SELECT `users`.* FROM `users` WHERE `users`.`id` = 146 LIMIT 1
  Rendered reviews/_rating.html.erb (0.1ms)
  Rendered reviews/_rating.html.erb (0.0ms)
  Rendered reviews/_rating.html.erb (0.0ms)
  Rendered reviews/_rating.html.erb (0.0ms)
  Rendered reviews/_status_label.html.erb (0.2ms)
  Rendered reviews/_review_status.html.erb (0.9ms)
  [1m[36mRestaurant Load (0.3ms)[0m  [1mSELECT `restaurants`.* FROM `restaurants` WHERE `restaurants`.`id` = 642 LIMIT 1[0m
  [1m[35mPhoto Load (0.3ms)[0m  SELECT `photos`.* FROM `photos` WHERE (restaurant_id = 642 and cover = true and status = 1) LIMIT 1
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT `photos`.* FROM `photos` WHERE (restaurant_id = 642 and cover = true and status = 1) LIMIT 1[0m
  [1m[35mUser Load (0.2ms)[0m  SELECT `users`.* FROM `users` WHERE `users`.`id` = 147 LIMIT 1
  Rendered reviews/_rating.html.erb (0.0ms)
  Rendered reviews/_rating.html.erb (0.0ms)
  Rendered reviews/_rating.html.erb (0.0ms)
  Rendered reviews/_rating.html.erb (0.0ms)
  Rendered reviews/_status_label.html.erb (0.1ms)
  Rendered reviews/_review_status.html.erb (0.8ms)
  [1m[36m (0.3ms)[0m  [1mSELECT COUNT(*) FROM `reviews` [0m
  Rendered reviews/index.html.erb within layouts/admin (479.8ms)
Completed 200 OK in 505ms (Views: 469.3ms | ActiveRecord: 32.1ms)
couldn't find file /Users/kevinmuller/halalgems_backend/public/system/dragonfly/development/2014/06/18/14_04_36_546_grillzbase.jpg
couldn't find file /Users/kevinmuller/halalgems_backend/public/system/dragonfly/development/2015/02/18/10_53_53_919_Boof.png
couldn't find file /Users/kevinmuller/halalgems_backend/public/system/dragonfly/development/2014/06/18/15_13_09_454_efes.jpg
couldn't find file /Users/kevinmuller/halalgems_backend/public/system/dragonfly/development/2014/12/15/17_01_49_216_14855778379_b0a5a4cc89_k.jpg
couldn't find file /Users/kevinmuller/halalgems_backend/public/system/dragonfly/development/2014/06/06/17_15_25_274_steak.jpg
couldn't find file /Users/kevinmuller/halalgems_backend/public/system/dragonfly/development/2013/07/14/18_25_14_272_photo_4_1.JPG
couldn't find file /Users/kevinmuller/halalgems_backend/public/system/dragonfly/development/2014/06/18/14_15_10_390_red_dragon.jpg
couldn't find file /Users/kevinmuller/halalgems_backend/public/system/dragonfly/development/2014/06/18/13_39_04_192_mexican_grille.jpg
couldn't find file /Users/kevinmuller/halalgems_backend/public/system/dragonfly/development/2014/06/18/13_48_27_616_hayfield_masala.jpg
couldn't find file /Users/kevinmuller/halalgems_backend/public/system/dragonfly/development/2014/06/18/14_57_19_420_needo.jpg
couldn't find file /Users/kevinmuller/halalgems_backend/public/system/dragonfly/development/2014/06/18/13_20_57_443_ariana.jpg
couldn't find file /Users/kevinmuller/halalgems_backend/public/system/dragonfly/development/2012/11/05/20_23_55_401_Mosque_Kitchen.jpg
couldn't find file /Users/kevinmuller/halalgems_backend/public/system/dragonfly/development/2013/07/27/16_24_11_339_Hot_Grill.jpg
couldn't find file /Users/kevinmuller/halalgems_backend/public/system/dragonfly/development/2014/12/15/16_34_59_694_14877383357_64bc45da28_k.jpg


Started GET "/admin/restaurants" for 127.0.0.1 at 2016-01-16 17:51:47 +0100
Processing by RestaurantsController#index as HTML
  [1m[35mUser Load (0.3ms)[0m  SELECT `users`.* FROM `users` WHERE `users`.`id` = 1 LIMIT 1
  Rendered shared/_restaurant_manage_tabs.html.erb (1.2ms)
  Rendered restaurants/_condition_fields.html.erb (15.1ms)
  [1m[36mRestaurant Load (0.7ms)[0m  [1mSELECT `restaurants`.* FROM `restaurants` ORDER BY disabled ASC,created_at DESC LIMIT 12 OFFSET 0[0m
  [1m[35mPhoto Load (0.4ms)[0m  SELECT `photos`.* FROM `photos` WHERE (restaurant_id = 1057 and cover = true and status = 1) LIMIT 1
  [1m[36mPhoto Load (0.3ms)[0m  [1mSELECT `photos`.* FROM `photos` WHERE `photos`.`restaurant_id` = 1057 AND `photos`.`status` = 1 ORDER BY restaurant_id ASC, created_at DESC LIMIT 1[0m
  [1m[35mPhoto Load (0.4ms)[0m  SELECT `photos`.* FROM `photos` WHERE (restaurant_id = 903 and cover = true and status = 1) LIMIT 1
  [1m[36mPhoto Load (0.4ms)[0m  [1mSELECT `photos`.* FROM `photos` WHERE `photos`.`restaurant_id` = 903 AND `photos`.`status` = 1 ORDER BY restaurant_id ASC, created_at DESC LIMIT 1[0m
  [1m[35mPhoto Load (0.4ms)[0m  SELECT `photos`.* FROM `photos` WHERE (restaurant_id = 876 and cover = true and status = 1) LIMIT 1
  [1m[36mPhoto Load (0.3ms)[0m  [1mSELECT `photos`.* FROM `photos` WHERE `photos`.`restaurant_id` = 876 AND `photos`.`status` = 1 ORDER BY restaurant_id ASC, created_at DESC LIMIT 1[0m
  [1m[35mPhoto Load (0.3ms)[0m  SELECT `photos`.* FROM `photos` WHERE (restaurant_id = 851 and cover = true and status = 1) LIMIT 1
  [1m[36mPhoto Load (0.3ms)[0m  [1mSELECT `photos`.* FROM `photos` WHERE `photos`.`restaurant_id` = 851 AND `photos`.`status` = 1 ORDER BY restaurant_id ASC, created_at DESC LIMIT 1[0m
  [1m[35mPhoto Load (0.4ms)[0m  SELECT `photos`.* FROM `photos` WHERE (restaurant_id = 693 and cover = true and status = 1) LIMIT 1
  [1m[36mPhoto Load (0.3ms)[0m  [1mSELECT `photos`.* FROM `photos` WHERE `photos`.`restaurant_id` = 693 AND `photos`.`status` = 1 ORDER BY restaurant_id ASC, created_at DESC LIMIT 1[0m
  [1m[35mPhoto Load (0.5ms)[0m  SELECT `photos`.* FROM `photos` WHERE (restaurant_id = 686 and cover = true and status = 1) LIMIT 1
  [1m[36mPhoto Load (0.3ms)[0m  [1mSELECT `photos`.* FROM `photos` WHERE `photos`.`restaurant_id` = 686 AND `photos`.`status` = 1 ORDER BY restaurant_id ASC, created_at DESC LIMIT 1[0m
  [1m[35mPhoto Load (0.3ms)[0m  SELECT `photos`.* FROM `photos` WHERE (restaurant_id = 669 and cover = true and status = 1) LIMIT 1
  [1m[36mPhoto Load (0.3ms)[0m  [1mSELECT `photos`.* FROM `photos` WHERE `photos`.`restaurant_id` = 669 AND `photos`.`status` = 1 ORDER BY restaurant_id ASC, created_at DESC LIMIT 1[0m
  [1m[35mPhoto Load (0.5ms)[0m  SELECT `photos`.* FROM `photos` WHERE (restaurant_id = 251 and cover = true and status = 1) LIMIT 1
  [1m[36mPhoto Load (0.3ms)[0m  [1mSELECT `photos`.* FROM `photos` WHERE `photos`.`restaurant_id` = 251 AND `photos`.`status` = 1 ORDER BY restaurant_id ASC, created_at DESC LIMIT 1[0m
  [1m[35mPhoto Load (0.4ms)[0m  SELECT `photos`.* FROM `photos` WHERE (restaurant_id = 250 and cover = true and status = 1) LIMIT 1
  [1m[36mPhoto Load (0.3ms)[0m  [1mSELECT `photos`.* FROM `photos` WHERE `photos`.`restaurant_id` = 250 AND `photos`.`status` = 1 ORDER BY restaurant_id ASC, created_at DESC LIMIT 1[0m
  [1m[35mPhoto Load (0.4ms)[0m  SELECT `photos`.* FROM `photos` WHERE (restaurant_id = 237 and cover = true and status = 1) LIMIT 1
  [1m[36mPhoto Load (0.3ms)[0m  [1mSELECT `photos`.* FROM `photos` WHERE `photos`.`restaurant_id` = 237 AND `photos`.`status` = 1 ORDER BY restaurant_id ASC, created_at DESC LIMIT 1[0m
  [1m[35mPhoto Load (0.4ms)[0m  SELECT `photos`.* FROM `photos` WHERE (restaurant_id = 231 and cover = true and status = 1) LIMIT 1
  [1m[36mPhoto Load (0.3ms)[0m  [1mSELECT `photos`.* FROM `photos` WHERE `photos`.`restaurant_id` = 231 AND `photos`.`status` = 1 ORDER BY restaurant_id ASC, created_at DESC LIMIT 1[0m
  [1m[35mPhoto Load (0.4ms)[0m  SELECT `photos`.* FROM `photos` WHERE (restaurant_id = 222 and cover = true and status = 1) LIMIT 1
  [1m[36mPhoto Load (0.3ms)[0m  [1mSELECT `photos`.* FROM `photos` WHERE `photos`.`restaurant_id` = 222 AND `photos`.`status` = 1 ORDER BY restaurant_id ASC, created_at DESC LIMIT 1[0m
  [1m[35m (0.4ms)[0m  SELECT COUNT(*) FROM `restaurants` 
  Rendered restaurants/index.html.erb within layouts/admin (115.6ms)
Completed 200 OK in 128ms (Views: 114.7ms | ActiveRecord: 9.7ms)


Started GET "/test/edit" for 127.0.0.1 at 2016-01-16 17:51:51 +0100
Processing by RestaurantsController#edit as HTML
  Parameters: {"id"=>"test"}
  [1m[36mUser Load (0.2ms)[0m  [1mSELECT `users`.* FROM `users` WHERE `users`.`id` = 1 LIMIT 1[0m
  [1m[35mRestaurant Load (1.4ms)[0m  SELECT `restaurants`.* FROM `restaurants` WHERE `restaurants`.`slug` = 'test' LIMIT 1
  [1m[36mSchedule Load (6.9ms)[0m  [1mSELECT `schedules`.* FROM `schedules` WHERE `schedules`.`restaurant_id` = 1057 ORDER BY day_of_week ASC[0m
  [1m[35mPhoto Load (0.5ms)[0m  SELECT `photos`.* FROM `photos` WHERE `photos`.`restaurant_id` = 1057
  [1m[36mFilter Load (1.5ms)[0m  [1mSELECT `filters`.* FROM `filters` INNER JOIN `filters_restaurants` ON `filters`.`id` = `filters_restaurants`.`filter_id` WHERE `filters_restaurants`.`restaurant_id` = 1057 AND `filters`.`code` = 'cuisine'[0m
  [1m[35m (1.4ms)[0m  SELECT `filters`.id FROM `filters` INNER JOIN `filters_restaurants` ON `filters`.`id` = `filters_restaurants`.`filter_id` WHERE `filters_restaurants`.`restaurant_id` = 1057
  [1m[36mFilterType Load (0.4ms)[0m  [1mSELECT `filter_types`.* FROM `filter_types` WHERE `filter_types`.`code` = 'hal_status' LIMIT 1[0m
  [1m[35mFilterType Load (0.2ms)[0m  SELECT `filter_types`.* FROM `filter_types` WHERE `filter_types`.`code` = 'price' LIMIT 1
  [1m[36mFilterType Load (0.1ms)[0m  [1mSELECT `filter_types`.* FROM `filter_types` WHERE `filter_types`.`code` = 'cuisine' LIMIT 1[0m
  [1m[35mFilterType Load (0.3ms)[0m  SELECT `filter_types`.* FROM `filter_types` WHERE `filter_types`.`code` = 'alcohol' LIMIT 1
  [1m[36mFilterType Load (0.1ms)[0m  [1mSELECT `filter_types`.* FROM `filter_types` WHERE `filter_types`.`code` = 'features' LIMIT 1[0m
  Rendered restaurants/_googlemap.html.erb (0.1ms)
  [1m[35mFilter Load (0.3ms)[0m  SELECT `filters`.* FROM `filters` WHERE `filters`.`filter_type_id` = 8
  [1m[36mFilter Load (0.3ms)[0m  [1mSELECT `filters`.* FROM `filters` WHERE `filters`.`filter_type_id` = 1 ORDER BY name ASC[0m
  [1m[35mFilter Load (0.2ms)[0m  SELECT `filters`.* FROM `filters` WHERE `filters`.`filter_type_id` = 4
  [1m[36mFilter Load (0.2ms)[0m  [1mSELECT `filters`.* FROM `filters` WHERE `filters`.`filter_type_id` = 6[0m
  [1m[35mFilter Load (0.2ms)[0m  SELECT `filters`.* FROM `filters` WHERE `filters`.`filter_type_id` = 11 AND (code != 'offer')
  Rendered restaurants/_admin_form.html.erb (67.5ms)
  [1m[36mMenu Load (0.4ms)[0m  [1mSELECT `menus`.* FROM `menus` WHERE `menus`.`restaurant_id` = 1057[0m
  Rendered restaurants/_upload_menu.html.erb (3.2ms)
  Rendered restaurants/_upload_photos.html.erb (0.9ms)
  Rendered restaurants/edit.html.erb within layouts/admin (74.7ms)
Completed 200 OK in 108ms (Views: 79.4ms | ActiveRecord: 14.6ms)


Started GET "/photos?r_id=1057" for 127.0.0.1 at 2016-01-16 17:51:52 +0100
Processing by PhotosController#index as JSON
  Parameters: {"r_id"=>"1057"}
  [1m[35mRestaurant Load (2.7ms)[0m  SELECT `restaurants`.* FROM `restaurants` WHERE `restaurants`.`slug` = '1057' LIMIT 1
  [1m[36mRestaurant Load (0.3ms)[0m  [1mSELECT `restaurants`.* FROM `restaurants` WHERE `restaurants`.`id` = 1057 LIMIT 1[0m
  [1m[35mPhoto Load (0.3ms)[0m  SELECT `photos`.* FROM `photos` WHERE `photos`.`restaurant_id` = 1057
Completed 200 OK in 7ms (Views: 0.1ms | ActiveRecord: 3.3ms)


Started POST "/admin/menus" for 127.0.0.1 at 2016-01-16 17:51:59 +0100
Processing by MenusController#create as JS
  Parameters: {"utf8"=>"âœ“", "authenticity_token"=>"ZhR8a2fYr/EQcBrBVm2c17tt7AHk64f/gvsZ5fOllxc=", "menus"=>{"name"=>"", "restaurant_id"=>"1057", "menu"=>#<ActionDispatch::Http::UploadedFile:0x007f83c0744e10 @original_filename="sunday_roast.png", @content_type="image/png", @headers="Content-Disposition: form-data; name=\"menus[menu]\"; filename=\"sunday_roast.png\"\r\nContent-Type: image/png\r\n", @tempfile=#<Tempfile:/var/folders/rf/q4l8n5k56pnbjgkdtzrhq_w00000gn/T/RackMultipart20160116-27556-tc5ekx>>}, "commit"=>"Submit", "remotipart_submitted"=>"true", "X-Requested-With"=>"IFrame", "X-Http-Accept"=>"text/javascript, application/javascript, application/ecmascript, application/x-ecmascript, */*; q=0.01"}
  [1m[36mUser Load (0.5ms)[0m  [1mSELECT `users`.* FROM `users` WHERE `users`.`id` = 1 LIMIT 1[0m
  [1m[35m (0.1ms)[0m  BEGIN
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO `menus` (`created_at`, `menu_name`, `menu_uid`, `name`, `restaurant_id`, `updated_at`, `user_id`) VALUES ('2016-01-16 16:51:59', 'sunday_roast.png', '2016/01/16/17_51_59_914_sunday_roast.png', '', 1057, '2016-01-16 16:51:59', 1)[0m
  [1m[35m (0.5ms)[0m  COMMIT
Completed 200 OK in 10ms (Views: 0.2ms | ActiveRecord: 1.4ms)


Started GET "/admin/restaurants" for 127.0.0.1 at 2016-01-16 17:52:09 +0100
Processing by RestaurantsController#index as HTML
  [1m[36mUser Load (0.3ms)[0m  [1mSELECT `users`.* FROM `users` WHERE `users`.`id` = 1 LIMIT 1[0m
  Rendered shared/_restaurant_manage_tabs.html.erb (0.7ms)
  Rendered restaurants/_condition_fields.html.erb (10.1ms)
  [1m[35mRestaurant Load (0.7ms)[0m  SELECT `restaurants`.* FROM `restaurants` ORDER BY disabled ASC,created_at DESC LIMIT 12 OFFSET 0
  [1m[36mPhoto Load (0.4ms)[0m  [1mSELECT `photos`.* FROM `photos` WHERE (restaurant_id = 1057 and cover = true and status = 1) LIMIT 1[0m
  [1m[35mPhoto Load (0.4ms)[0m  SELECT `photos`.* FROM `photos` WHERE `photos`.`restaurant_id` = 1057 AND `photos`.`status` = 1 ORDER BY restaurant_id ASC, created_at DESC LIMIT 1
  [1m[36mPhoto Load (0.3ms)[0m  [1mSELECT `photos`.* FROM `photos` WHERE (restaurant_id = 903 and cover = true and status = 1) LIMIT 1[0m
  [1m[35mPhoto Load (0.3ms)[0m  SELECT `photos`.* FROM `photos` WHERE `photos`.`restaurant_id` = 903 AND `photos`.`status` = 1 ORDER BY restaurant_id ASC, created_at DESC LIMIT 1
  [1m[36mPhoto Load (0.4ms)[0m  [1mSELECT `photos`.* FROM `photos` WHERE (restaurant_id = 876 and cover = true and status = 1) LIMIT 1[0m
  [1m[35mPhoto Load (0.2ms)[0m  SELECT `photos`.* FROM `photos` WHERE `photos`.`restaurant_id` = 876 AND `photos`.`status` = 1 ORDER BY restaurant_id ASC, created_at DESC LIMIT 1
  [1m[36mPhoto Load (0.4ms)[0m  [1mSELECT `photos`.* FROM `photos` WHERE (restaurant_id = 851 and cover = true and status = 1) LIMIT 1[0m
  [1m[35mPhoto Load (0.3ms)[0m  SELECT `photos`.* FROM `photos` WHERE `photos`.`restaurant_id` = 851 AND `photos`.`status` = 1 ORDER BY restaurant_id ASC, created_at DESC LIMIT 1
  [1m[36mPhoto Load (0.3ms)[0m  [1mSELECT `photos`.* FROM `photos` WHERE (restaurant_id = 693 and cover = true and status = 1) LIMIT 1[0m
  [1m[35mPhoto Load (0.3ms)[0m  SELECT `photos`.* FROM `photos` WHERE `photos`.`restaurant_id` = 693 AND `photos`.`status` = 1 ORDER BY restaurant_id ASC, created_at DESC LIMIT 1
  [1m[36mPhoto Load (0.3ms)[0m  [1mSELECT `photos`.* FROM `photos` WHERE (restaurant_id = 686 and cover = true and status = 1) LIMIT 1[0m
  [1m[35mPhoto Load (0.3ms)[0m  SELECT `photos`.* FROM `photos` WHERE `photos`.`restaurant_id` = 686 AND `photos`.`status` = 1 ORDER BY restaurant_id ASC, created_at DESC LIMIT 1
  [1m[36mPhoto Load (0.3ms)[0m  [1mSELECT `photos`.* FROM `photos` WHERE (restaurant_id = 669 and cover = true and status = 1) LIMIT 1[0m
  [1m[35mPhoto Load (0.3ms)[0m  SELECT `photos`.* FROM `photos` WHERE `photos`.`restaurant_id` = 669 AND `photos`.`status` = 1 ORDER BY restaurant_id ASC, created_at DESC LIMIT 1
  [1m[36mPhoto Load (0.5ms)[0m  [1mSELECT `photos`.* FROM `photos` WHERE (restaurant_id = 251 and cover = true and status = 1) LIMIT 1[0m
  [1m[35mPhoto Load (0.3ms)[0m  SELECT `photos`.* FROM `photos` WHERE `photos`.`restaurant_id` = 251 AND `photos`.`status` = 1 ORDER BY restaurant_id ASC, created_at DESC LIMIT 1
  [1m[36mPhoto Load (0.3ms)[0m  [1mSELECT `photos`.* FROM `photos` WHERE (restaurant_id = 250 and cover = true and status = 1) LIMIT 1[0m
  [1m[35mPhoto Load (0.4ms)[0m  SELECT `photos`.* FROM `photos` WHERE `photos`.`restaurant_id` = 250 AND `photos`.`status` = 1 ORDER BY restaurant_id ASC, created_at DESC LIMIT 1
  [1m[36mPhoto Load (0.3ms)[0m  [1mSELECT `photos`.* FROM `photos` WHERE (restaurant_id = 237 and cover = true and status = 1) LIMIT 1[0m
  [1m[35mPhoto Load (0.3ms)[0m  SELECT `photos`.* FROM `photos` WHERE `photos`.`restaurant_id` = 237 AND `photos`.`status` = 1 ORDER BY restaurant_id ASC, created_at DESC LIMIT 1
  [1m[36mPhoto Load (0.3ms)[0m  [1mSELECT `photos`.* FROM `photos` WHERE (restaurant_id = 231 and cover = true and status = 1) LIMIT 1[0m
  [1m[35mPhoto Load (0.3ms)[0m  SELECT `photos`.* FROM `photos` WHERE `photos`.`restaurant_id` = 231 AND `photos`.`status` = 1 ORDER BY restaurant_id ASC, created_at DESC LIMIT 1
  [1m[36mPhoto Load (0.5ms)[0m  [1mSELECT `photos`.* FROM `photos` WHERE (restaurant_id = 222 and cover = true and status = 1) LIMIT 1[0m
  [1m[35mPhoto Load (0.5ms)[0m  SELECT `photos`.* FROM `photos` WHERE `photos`.`restaurant_id` = 222 AND `photos`.`status` = 1 ORDER BY restaurant_id ASC, created_at DESC LIMIT 1
  [1m[36m (0.5ms)[0m  [1mSELECT COUNT(*) FROM `restaurants` [0m
  Rendered restaurants/index.html.erb within layouts/admin (110.4ms)
Completed 200 OK in 118ms (Views: 106.3ms | ActiveRecord: 9.9ms)


Started GET "/test/edit" for 127.0.0.1 at 2016-01-16 17:52:18 +0100
Processing by RestaurantsController#edit as HTML
  Parameters: {"id"=>"test"}
  [1m[35mUser Load (0.2ms)[0m  SELECT `users`.* FROM `users` WHERE `users`.`id` = 1 LIMIT 1
  [1m[36mRestaurant Load (1.4ms)[0m  [1mSELECT `restaurants`.* FROM `restaurants` WHERE `restaurants`.`slug` = 'test' LIMIT 1[0m
  [1m[35mSchedule Load (4.0ms)[0m  SELECT `schedules`.* FROM `schedules` WHERE `schedules`.`restaurant_id` = 1057 ORDER BY day_of_week ASC
  [1m[36mPhoto Load (0.5ms)[0m  [1mSELECT `photos`.* FROM `photos` WHERE `photos`.`restaurant_id` = 1057[0m
  [1m[35mFilter Load (1.2ms)[0m  SELECT `filters`.* FROM `filters` INNER JOIN `filters_restaurants` ON `filters`.`id` = `filters_restaurants`.`filter_id` WHERE `filters_restaurants`.`restaurant_id` = 1057 AND `filters`.`code` = 'cuisine'
  [1m[36m (1.4ms)[0m  [1mSELECT `filters`.id FROM `filters` INNER JOIN `filters_restaurants` ON `filters`.`id` = `filters_restaurants`.`filter_id` WHERE `filters_restaurants`.`restaurant_id` = 1057[0m
  [1m[35mFilterType Load (0.2ms)[0m  SELECT `filter_types`.* FROM `filter_types` WHERE `filter_types`.`code` = 'hal_status' LIMIT 1
  [1m[36mFilterType Load (0.2ms)[0m  [1mSELECT `filter_types`.* FROM `filter_types` WHERE `filter_types`.`code` = 'price' LIMIT 1[0m
  [1m[35mFilterType Load (0.1ms)[0m  SELECT `filter_types`.* FROM `filter_types` WHERE `filter_types`.`code` = 'cuisine' LIMIT 1
  [1m[36mFilterType Load (0.1ms)[0m  [1mSELECT `filter_types`.* FROM `filter_types` WHERE `filter_types`.`code` = 'alcohol' LIMIT 1[0m
  [1m[35mFilterType Load (0.1ms)[0m  SELECT `filter_types`.* FROM `filter_types` WHERE `filter_types`.`code` = 'features' LIMIT 1
  Rendered restaurants/_googlemap.html.erb (0.0ms)
  [1m[36mFilter Load (0.3ms)[0m  [1mSELECT `filters`.* FROM `filters` WHERE `filters`.`filter_type_id` = 8[0m
  [1m[35mFilter Load (0.3ms)[0m  SELECT `filters`.* FROM `filters` WHERE `filters`.`filter_type_id` = 1 ORDER BY name ASC
  [1m[36mFilter Load (0.2ms)[0m  [1mSELECT `filters`.* FROM `filters` WHERE `filters`.`filter_type_id` = 4[0m
  [1m[35mFilter Load (0.2ms)[0m  SELECT `filters`.* FROM `filters` WHERE `filters`.`filter_type_id` = 6
  [1m[36mFilter Load (0.2ms)[0m  [1mSELECT `filters`.* FROM `filters` WHERE `filters`.`filter_type_id` = 11 AND (code != 'offer')[0m
  Rendered restaurants/_admin_form.html.erb (80.3ms)
  [1m[35mMenu Load (0.3ms)[0m  SELECT `menus`.* FROM `menus` WHERE `menus`.`restaurant_id` = 1057
  Rendered restaurants/_upload_menu.html.erb (3.4ms)
  Rendered restaurants/_upload_photos.html.erb (1.0ms)
  Rendered restaurants/edit.html.erb within layouts/admin (87.3ms)
Completed 200 OK in 114ms (Views: 90.4ms | ActiveRecord: 11.1ms)


Started GET "/photos?r_id=1057" for 127.0.0.1 at 2016-01-16 17:52:19 +0100
Processing by PhotosController#index as JSON
  Parameters: {"r_id"=>"1057"}
  [1m[36mRestaurant Load (1.5ms)[0m  [1mSELECT `restaurants`.* FROM `restaurants` WHERE `restaurants`.`slug` = '1057' LIMIT 1[0m
  [1m[35mRestaurant Load (0.2ms)[0m  SELECT `restaurants`.* FROM `restaurants` WHERE `restaurants`.`id` = 1057 LIMIT 1
  [1m[36mPhoto Load (0.4ms)[0m  [1mSELECT `photos`.* FROM `photos` WHERE `photos`.`restaurant_id` = 1057[0m
Completed 200 OK in 5ms (Views: 0.1ms | ActiveRecord: 2.1ms)


Started DELETE "/admin/menus/80" for 127.0.0.1 at 2016-01-16 17:52:54 +0100
Processing by MenusController#destroy as JS
  Parameters: {"id"=>"80"}
  [1m[35mMenu Load (0.5ms)[0m  SELECT `menus`.* FROM `menus` WHERE `menus`.`id` = 80 LIMIT 1
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35mSQL (0.4ms)[0m  DELETE FROM `menus` WHERE `menus`.`id` = 80
  [1m[36m (1.0ms)[0m  [1mCOMMIT[0m
  Rendered menus/destroy.js.erb (0.4ms)
Completed 200 OK in 60ms (Views: 51.8ms | ActiveRecord: 1.9ms)


Started POST "/admin/menus" for 127.0.0.1 at 2016-01-16 17:53:01 +0100
Processing by MenusController#create as JS
  Parameters: {"utf8"=>"âœ“", "authenticity_token"=>"ZhR8a2fYr/EQcBrBVm2c17tt7AHk64f/gvsZ5fOllxc=", "menus"=>{"name"=>"Test", "restaurant_id"=>"1057", "menu"=>#<ActionDispatch::Http::UploadedFile:0x007f83c10a2c50 @original_filename="steak.png", @content_type="image/png", @headers="Content-Disposition: form-data; name=\"menus[menu]\"; filename=\"steak.png\"\r\nContent-Type: image/png\r\n", @tempfile=#<Tempfile:/var/folders/rf/q4l8n5k56pnbjgkdtzrhq_w00000gn/T/RackMultipart20160116-27556-ad1m8m>>}, "commit"=>"Submit", "remotipart_submitted"=>"true", "X-Requested-With"=>"IFrame", "X-Http-Accept"=>"text/javascript, application/javascript, application/ecmascript, application/x-ecmascript, */*; q=0.01"}
  [1m[35mUser Load (0.4ms)[0m  SELECT `users`.* FROM `users` WHERE `users`.`id` = 1 LIMIT 1
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35mSQL (1.1ms)[0m  INSERT INTO `menus` (`created_at`, `menu_name`, `menu_uid`, `name`, `restaurant_id`, `updated_at`, `user_id`) VALUES ('2016-01-16 16:53:01', 'steak.png', '2016/01/16/17_53_01_163_steak.png', 'Test', 1057, '2016-01-16 16:53:01', 1)
  [1m[36m (0.5ms)[0m  [1mCOMMIT[0m
Completed 200 OK in 10ms (Views: 0.1ms | ActiveRecord: 2.2ms)


Started GET "/test/edit" for 127.0.0.1 at 2016-01-16 17:53:15 +0100
Processing by RestaurantsController#edit as HTML
  Parameters: {"id"=>"test"}
  [1m[35mUser Load (0.9ms)[0m  SELECT `users`.* FROM `users` WHERE `users`.`id` = 1 LIMIT 1
  [1m[36mRestaurant Load (2.7ms)[0m  [1mSELECT `restaurants`.* FROM `restaurants` WHERE `restaurants`.`slug` = 'test' LIMIT 1[0m
  [1m[35mSchedule Load (8.1ms)[0m  SELECT `schedules`.* FROM `schedules` WHERE `schedules`.`restaurant_id` = 1057 ORDER BY day_of_week ASC
  [1m[36mPhoto Load (0.7ms)[0m  [1mSELECT `photos`.* FROM `photos` WHERE `photos`.`restaurant_id` = 1057[0m
  [1m[35mFilter Load (1.2ms)[0m  SELECT `filters`.* FROM `filters` INNER JOIN `filters_restaurants` ON `filters`.`id` = `filters_restaurants`.`filter_id` WHERE `filters_restaurants`.`restaurant_id` = 1057 AND `filters`.`code` = 'cuisine'
  [1m[36m (1.2ms)[0m  [1mSELECT `filters`.id FROM `filters` INNER JOIN `filters_restaurants` ON `filters`.`id` = `filters_restaurants`.`filter_id` WHERE `filters_restaurants`.`restaurant_id` = 1057[0m
  [1m[35mFilterType Load (0.2ms)[0m  SELECT `filter_types`.* FROM `filter_types` WHERE `filter_types`.`code` = 'hal_status' LIMIT 1
  [1m[36mFilterType Load (0.1ms)[0m  [1mSELECT `filter_types`.* FROM `filter_types` WHERE `filter_types`.`code` = 'price' LIMIT 1[0m
  [1m[35mFilterType Load (0.1ms)[0m  SELECT `filter_types`.* FROM `filter_types` WHERE `filter_types`.`code` = 'cuisine' LIMIT 1
  [1m[36mFilterType Load (0.1ms)[0m  [1mSELECT `filter_types`.* FROM `filter_types` WHERE `filter_types`.`code` = 'alcohol' LIMIT 1[0m
  [1m[35mFilterType Load (0.1ms)[0m  SELECT `filter_types`.* FROM `filter_types` WHERE `filter_types`.`code` = 'features' LIMIT 1
  Rendered restaurants/_googlemap.html.erb (0.0ms)
  [1m[36mFilter Load (0.3ms)[0m  [1mSELECT `filters`.* FROM `filters` WHERE `filters`.`filter_type_id` = 8[0m
  [1m[35mFilter Load (0.3ms)[0m  SELECT `filters`.* FROM `filters` WHERE `filters`.`filter_type_id` = 1 ORDER BY name ASC
  [1m[36mFilter Load (0.2ms)[0m  [1mSELECT `filters`.* FROM `filters` WHERE `filters`.`filter_type_id` = 4[0m
  [1m[35mFilter Load (0.2ms)[0m  SELECT `filters`.* FROM `filters` WHERE `filters`.`filter_type_id` = 6
  [1m[36mFilter Load (0.2ms)[0m  [1mSELECT `filters`.* FROM `filters` WHERE `filters`.`filter_type_id` = 11 AND (code != 'offer')[0m
  Rendered restaurants/_admin_form.html.erb (62.8ms)
  [1m[35mMenu Load (0.3ms)[0m  SELECT `menus`.* FROM `menus` WHERE `menus`.`restaurant_id` = 1057
  Rendered restaurants/_upload_menu.html.erb (3.5ms)
  Rendered restaurants/_upload_photos.html.erb (0.9ms)
  Rendered restaurants/edit.html.erb within layouts/admin (69.8ms)
Completed 200 OK in 106ms (Views: 73.3ms | ActiveRecord: 17.0ms)


Started GET "/photos?r_id=1057" for 127.0.0.1 at 2016-01-16 17:53:17 +0100
Processing by PhotosController#index as JSON
  Parameters: {"r_id"=>"1057"}
  [1m[36mRestaurant Load (1.5ms)[0m  [1mSELECT `restaurants`.* FROM `restaurants` WHERE `restaurants`.`slug` = '1057' LIMIT 1[0m
  [1m[35mRestaurant Load (0.2ms)[0m  SELECT `restaurants`.* FROM `restaurants` WHERE `restaurants`.`id` = 1057 LIMIT 1
  [1m[36mPhoto Load (0.4ms)[0m  [1mSELECT `photos`.* FROM `photos` WHERE `photos`.`restaurant_id` = 1057[0m
Completed 200 OK in 6ms (Views: 0.1ms | ActiveRecord: 2.1ms)


Started DELETE "/admin/menus/81" for 127.0.0.1 at 2016-01-16 17:53:25 +0100
Processing by MenusController#destroy as JS
  Parameters: {"id"=>"81"}
  [1m[35mMenu Load (0.2ms)[0m  SELECT `menus`.* FROM `menus` WHERE `menus`.`id` = 81 LIMIT 1
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35mSQL (0.2ms)[0m  DELETE FROM `menus` WHERE `menus`.`id` = 81
  [1m[36m (0.6ms)[0m  [1mCOMMIT[0m
  Rendered menus/destroy.js.erb (0.1ms)
Completed 200 OK in 18ms (Views: 13.3ms | ActiveRecord: 1.1ms)


Started GET "/admin/restaurants" for 127.0.0.1 at 2016-01-16 17:54:07 +0100
Processing by RestaurantsController#index as HTML
  [1m[35mUser Load (0.2ms)[0m  SELECT `users`.* FROM `users` WHERE `users`.`id` = 1 LIMIT 1
  Rendered shared/_restaurant_manage_tabs.html.erb (0.6ms)
  Rendered restaurants/_condition_fields.html.erb (8.2ms)
  [1m[36mRestaurant Load (0.8ms)[0m  [1mSELECT `restaurants`.* FROM `restaurants` ORDER BY disabled ASC,created_at DESC LIMIT 12 OFFSET 0[0m
  [1m[35mPhoto Load (0.5ms)[0m  SELECT `photos`.* FROM `photos` WHERE (restaurant_id = 1057 and cover = true and status = 1) LIMIT 1
  [1m[36mPhoto Load (0.3ms)[0m  [1mSELECT `photos`.* FROM `photos` WHERE `photos`.`restaurant_id` = 1057 AND `photos`.`status` = 1 ORDER BY restaurant_id ASC, created_at DESC LIMIT 1[0m
  [1m[35mPhoto Load (0.3ms)[0m  SELECT `photos`.* FROM `photos` WHERE (restaurant_id = 903 and cover = true and status = 1) LIMIT 1
  [1m[36mPhoto Load (0.3ms)[0m  [1mSELECT `photos`.* FROM `photos` WHERE `photos`.`restaurant_id` = 903 AND `photos`.`status` = 1 ORDER BY restaurant_id ASC, created_at DESC LIMIT 1[0m
  [1m[35mPhoto Load (0.3ms)[0m  SELECT `photos`.* FROM `photos` WHERE (restaurant_id = 876 and cover = true and status = 1) LIMIT 1
  [1m[36mPhoto Load (0.3ms)[0m  [1mSELECT `photos`.* FROM `photos` WHERE `photos`.`restaurant_id` = 876 AND `photos`.`status` = 1 ORDER BY restaurant_id ASC, created_at DESC LIMIT 1[0m
  [1m[35mPhoto Load (0.4ms)[0m  SELECT `photos`.* FROM `photos` WHERE (restaurant_id = 851 and cover = true and status = 1) LIMIT 1
  [1m[36mPhoto Load (0.3ms)[0m  [1mSELECT `photos`.* FROM `photos` WHERE `photos`.`restaurant_id` = 851 AND `photos`.`status` = 1 ORDER BY restaurant_id ASC, created_at DESC LIMIT 1[0m
  [1m[35mPhoto Load (0.3ms)[0m  SELECT `photos`.* FROM `photos` WHERE (restaurant_id = 693 and cover = true and status = 1) LIMIT 1
  [1m[36mPhoto Load (0.3ms)[0m  [1mSELECT `photos`.* FROM `photos` WHERE `photos`.`restaurant_id` = 693 AND `photos`.`status` = 1 ORDER BY restaurant_id ASC, created_at DESC LIMIT 1[0m
  [1m[35mPhoto Load (0.3ms)[0m  SELECT `photos`.* FROM `photos` WHERE (restaurant_id = 686 and cover = true and status = 1) LIMIT 1
  [1m[36mPhoto Load (0.3ms)[0m  [1mSELECT `photos`.* FROM `photos` WHERE `photos`.`restaurant_id` = 686 AND `photos`.`status` = 1 ORDER BY restaurant_id ASC, created_at DESC LIMIT 1[0m
  [1m[35mPhoto Load (0.3ms)[0m  SELECT `photos`.* FROM `photos` WHERE (restaurant_id = 669 and cover = true and status = 1) LIMIT 1
  [1m[36mPhoto Load (0.3ms)[0m  [1mSELECT `photos`.* FROM `photos` WHERE `photos`.`restaurant_id` = 669 AND `photos`.`status` = 1 ORDER BY restaurant_id ASC, created_at DESC LIMIT 1[0m
  [1m[35mPhoto Load (0.4ms)[0m  SELECT `photos`.* FROM `photos` WHERE (restaurant_id = 251 and cover = true and status = 1) LIMIT 1
  [1m[36mPhoto Load (0.3ms)[0m  [1mSELECT `photos`.* FROM `photos` WHERE `photos`.`restaurant_id` = 251 AND `photos`.`status` = 1 ORDER BY restaurant_id ASC, created_at DESC LIMIT 1[0m
  [1m[35mPhoto Load (0.4ms)[0m  SELECT `photos`.* FROM `photos` WHERE (restaurant_id = 250 and cover = true and status = 1) LIMIT 1
  [1m[36mPhoto Load (0.3ms)[0m  [1mSELECT `photos`.* FROM `photos` WHERE `photos`.`restaurant_id` = 250 AND `photos`.`status` = 1 ORDER BY restaurant_id ASC, created_at DESC LIMIT 1[0m
  [1m[35mPhoto Load (0.3ms)[0m  SELECT `photos`.* FROM `photos` WHERE (restaurant_id = 237 and cover = true and status = 1) LIMIT 1
  [1m[36mPhoto Load (0.3ms)[0m  [1mSELECT `photos`.* FROM `photos` WHERE `photos`.`restaurant_id` = 237 AND `photos`.`status` = 1 ORDER BY restaurant_id ASC, created_at DESC LIMIT 1[0m
  [1m[35mPhoto Load (0.4ms)[0m  SELECT `photos`.* FROM `photos` WHERE (restaurant_id = 231 and cover = true and status = 1) LIMIT 1
  [1m[36mPhoto Load (0.3ms)[0m  [1mSELECT `photos`.* FROM `photos` WHERE `photos`.`restaurant_id` = 231 AND `photos`.`status` = 1 ORDER BY restaurant_id ASC, created_at DESC LIMIT 1[0m
  [1m[35mPhoto Load (0.5ms)[0m  SELECT `photos`.* FROM `photos` WHERE (restaurant_id = 222 and cover = true and status = 1) LIMIT 1
  [1m[36mPhoto Load (0.3ms)[0m  [1mSELECT `photos`.* FROM `photos` WHERE `photos`.`restaurant_id` = 222 AND `photos`.`status` = 1 ORDER BY restaurant_id ASC, created_at DESC LIMIT 1[0m
  [1m[35m (0.4ms)[0m  SELECT COUNT(*) FROM `restaurants` 
  Rendered restaurants/index.html.erb within layouts/admin (80.1ms)
Completed 200 OK in 87ms (Views: 76.4ms | ActiveRecord: 9.2ms)


Started GET "/admin/collections" for 127.0.0.1 at 2016-01-16 17:54:08 +0100
Processing by CollectionsController#index as HTML
  Rendered shared/_restaurant_manage_tabs.html.erb (0.6ms)
  [1m[36mCollection Load (0.3ms)[0m  [1mSELECT `collections`.* FROM `collections` ORDER BY name ASC, created_at DESC LIMIT 12 OFFSET 0[0m
  [1m[35m (0.2ms)[0m  SELECT COUNT(*) FROM `collections` 
  Rendered collections/index.erb within layouts/admin (7.9ms)
  [1m[36mUser Load (0.3ms)[0m  [1mSELECT `users`.* FROM `users` WHERE `users`.`id` = 1 LIMIT 1[0m
Completed 200 OK in 15ms (Views: 14.1ms | ActiveRecord: 0.7ms)


Started GET "/admin/collections/admin_new_collection" for 127.0.0.1 at 2016-01-16 17:54:10 +0100
Processing by CollectionsController#admin_new_collection as HTML
  [1m[35mUser Load (0.2ms)[0m  SELECT `users`.* FROM `users` WHERE `users`.`id` = 1 LIMIT 1
  Rendered collections/_collection_form.html.erb (4.7ms)
  Rendered collections/_collection_restaurants_form.html.erb (0.3ms)
  Rendered collections/_upload_collection_image.html.erb (1.0ms)
  Rendered collections/admin_new_collection.html.erb within layouts/admin (8.5ms)
Completed 200 OK in 15ms (Views: 13.6ms | ActiveRecord: 0.2ms)


Started GET "/collection_images?r_id=" for 127.0.0.1 at 2016-01-16 17:54:10 +0100
Processing by RestaurantsController#show as JSON
  Parameters: {"r_id"=>"", "id"=>"collection_images"}
  [1m[36mRestaurant Load (1.4ms)[0m  [1mSELECT `restaurants`.* FROM `restaurants` WHERE `restaurants`.`slug` = 'collection_images' LIMIT 1[0m
  [1m[35mRestaurant Load (0.3ms)[0m  SELECT `restaurants`.* FROM `restaurants` WHERE `restaurants`.`id` = 0 LIMIT 1
Completed 500 Internal Server Error in 4ms

ActiveRecord::RecordNotFound (Couldn't find Restaurant with id=collection_images):
  app/controllers/restaurants_controller.rb:193:in `show'


  Rendered /Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_dispatch/middleware/templates/rescues/_trace.erb (1.0ms)
  Rendered /Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_dispatch/middleware/templates/rescues/_request_and_response.erb (0.8ms)
  Rendered /Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_dispatch/middleware/templates/rescues/diagnostics.erb within rescues/layout (40.8ms)


Started POST "/collection_images" for 127.0.0.1 at 2016-01-16 17:57:08 +0100
Processing by CollectionImagesController#create as JSON
  Parameters: {"utf8"=>"âœ“", "authenticity_token"=>"ZhR8a2fYr/EQcBrBVm2c17tt7AHk64f/gvsZ5fOllxc=", "collection_image"=>{"collection_id"=>"", "user_id"=>"1", "image"=>[#<ActionDispatch::Http::UploadedFile:0x007f83c4eae530 @original_filename="sunday_roast.png", @content_type="image/png", @headers="Content-Disposition: form-data; name=\"collection_image[image][]\"; filename=\"sunday_roast.png\"\r\nContent-Type: image/png\r\n", @tempfile=#<Tempfile:/var/folders/rf/q4l8n5k56pnbjgkdtzrhq_w00000gn/T/RackMultipart20160116-27556-1lncmjb>>]}}
  [1m[36mCollection Load (0.3ms)[0m  [1mSELECT `collections`.* FROM `collections` WHERE `collections`.`id` = 0 LIMIT 1[0m
Completed 500 Internal Server Error in 3ms

ActiveRecord::RecordNotFound (Couldn't find Collection with id=):
  app/controllers/collection_images_controller.rb:26:in `create'


  Rendered /Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_dispatch/middleware/templates/rescues/_trace.erb (2.2ms)
  Rendered /Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_dispatch/middleware/templates/rescues/_request_and_response.erb (1.1ms)
  Rendered /Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_dispatch/middleware/templates/rescues/diagnostics.erb within rescues/layout (48.3ms)


Started POST "/admin/collections" for 127.0.0.1 at 2016-01-16 17:59:47 +0100
Processing by CollectionsController#create as HTML
  Parameters: {"utf8"=>"âœ“", "authenticity_token"=>"ZhR8a2fYr/EQcBrBVm2c17tt7AHk64f/gvsZ5fOllxc=", "admin"=>"true", "collection"=>{"name"=>"Test", "description"=>"Test"}}
  [1m[35mCollection Load (0.3ms)[0m  SELECT `collections`.* FROM `collections` WHERE `collections`.`name` = 'Test' LIMIT 1
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35m (0.1ms)[0m  ROLLBACK
Completed 500 Internal Server Error in 14ms

ActionView::MissingTemplate (Missing template collections/new, application/new with {:locale=>[:en], :formats=>[:html], :handlers=>[:erb, :builder, :coffee, :slim]}. Searched in:
  * "/Users/kevinmuller/halalgems_backend/app/views"
  * "/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/ckeditor-3.7.3/app/views"
  * "/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/devise_mailchimp-0.0.4/app/views"
  * "/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/kaminari-bootstrap-3.0.1/app/views"
  * "/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/bootstrap-kaminari-views-0.0.3/app/views"
  * "/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/kaminari-0.14.1/app/views"
  * "/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/devise-2.0.4/app/views"
):
  app/controllers/collections_controller.rb:83:in `block (2 levels) in create'
  app/controllers/collections_controller.rb:77:in `create'


  Rendered /Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_dispatch/middleware/templates/rescues/missing_template.erb within rescues/layout (0.4ms)


Started GET "/admin/restaurants" for 127.0.0.1 at 2016-01-16 18:08:08 +0100
Processing by RestaurantsController#index as HTML
  [1m[36mUser Load (0.3ms)[0m  [1mSELECT `users`.* FROM `users` WHERE `users`.`id` = 1 LIMIT 1[0m
  Rendered shared/_restaurant_manage_tabs.html.erb (1.0ms)
  Rendered restaurants/_condition_fields.html.erb (12.1ms)
  [1m[35mRestaurant Load (0.9ms)[0m  SELECT `restaurants`.* FROM `restaurants` ORDER BY disabled ASC,created_at DESC LIMIT 12 OFFSET 0
  [1m[36mPhoto Load (0.4ms)[0m  [1mSELECT `photos`.* FROM `photos` WHERE (restaurant_id = 1057 and cover = true and status = 1) LIMIT 1[0m
  [1m[35mPhoto Load (0.3ms)[0m  SELECT `photos`.* FROM `photos` WHERE `photos`.`restaurant_id` = 1057 AND `photos`.`status` = 1 ORDER BY restaurant_id ASC, created_at DESC LIMIT 1
  [1m[36mPhoto Load (0.3ms)[0m  [1mSELECT `photos`.* FROM `photos` WHERE (restaurant_id = 903 and cover = true and status = 1) LIMIT 1[0m
  [1m[35mPhoto Load (0.3ms)[0m  SELECT `photos`.* FROM `photos` WHERE `photos`.`restaurant_id` = 903 AND `photos`.`status` = 1 ORDER BY restaurant_id ASC, created_at DESC LIMIT 1
  [1m[36mPhoto Load (0.3ms)[0m  [1mSELECT `photos`.* FROM `photos` WHERE (restaurant_id = 876 and cover = true and status = 1) LIMIT 1[0m
  [1m[35mPhoto Load (0.3ms)[0m  SELECT `photos`.* FROM `photos` WHERE `photos`.`restaurant_id` = 876 AND `photos`.`status` = 1 ORDER BY restaurant_id ASC, created_at DESC LIMIT 1
  [1m[36mPhoto Load (0.8ms)[0m  [1mSELECT `photos`.* FROM `photos` WHERE (restaurant_id = 851 and cover = true and status = 1) LIMIT 1[0m
  [1m[35mPhoto Load (0.3ms)[0m  SELECT `photos`.* FROM `photos` WHERE `photos`.`restaurant_id` = 851 AND `photos`.`status` = 1 ORDER BY restaurant_id ASC, created_at DESC LIMIT 1
  [1m[36mPhoto Load (0.3ms)[0m  [1mSELECT `photos`.* FROM `photos` WHERE (restaurant_id = 693 and cover = true and status = 1) LIMIT 1[0m
  [1m[35mPhoto Load (0.3ms)[0m  SELECT `photos`.* FROM `photos` WHERE `photos`.`restaurant_id` = 693 AND `photos`.`status` = 1 ORDER BY restaurant_id ASC, created_at DESC LIMIT 1
  [1m[36mPhoto Load (0.3ms)[0m  [1mSELECT `photos`.* FROM `photos` WHERE (restaurant_id = 686 and cover = true and status = 1) LIMIT 1[0m
  [1m[35mPhoto Load (0.3ms)[0m  SELECT `photos`.* FROM `photos` WHERE `photos`.`restaurant_id` = 686 AND `photos`.`status` = 1 ORDER BY restaurant_id ASC, created_at DESC LIMIT 1
  [1m[36mPhoto Load (0.5ms)[0m  [1mSELECT `photos`.* FROM `photos` WHERE (restaurant_id = 669 and cover = true and status = 1) LIMIT 1[0m
  [1m[35mPhoto Load (0.3ms)[0m  SELECT `photos`.* FROM `photos` WHERE `photos`.`restaurant_id` = 669 AND `photos`.`status` = 1 ORDER BY restaurant_id ASC, created_at DESC LIMIT 1
  [1m[36mPhoto Load (0.8ms)[0m  [1mSELECT `photos`.* FROM `photos` WHERE (restaurant_id = 251 and cover = true and status = 1) LIMIT 1[0m
  [1m[35mPhoto Load (0.4ms)[0m  SELECT `photos`.* FROM `photos` WHERE `photos`.`restaurant_id` = 251 AND `photos`.`status` = 1 ORDER BY restaurant_id ASC, created_at DESC LIMIT 1
  [1m[36mPhoto Load (0.3ms)[0m  [1mSELECT `photos`.* FROM `photos` WHERE (restaurant_id = 250 and cover = true and status = 1) LIMIT 1[0m
  [1m[35mPhoto Load (0.3ms)[0m  SELECT `photos`.* FROM `photos` WHERE `photos`.`restaurant_id` = 250 AND `photos`.`status` = 1 ORDER BY restaurant_id ASC, created_at DESC LIMIT 1
  [1m[36mPhoto Load (0.3ms)[0m  [1mSELECT `photos`.* FROM `photos` WHERE (restaurant_id = 237 and cover = true and status = 1) LIMIT 1[0m
  [1m[35mPhoto Load (0.3ms)[0m  SELECT `photos`.* FROM `photos` WHERE `photos`.`restaurant_id` = 237 AND `photos`.`status` = 1 ORDER BY restaurant_id ASC, created_at DESC LIMIT 1
  [1m[36mPhoto Load (0.3ms)[0m  [1mSELECT `photos`.* FROM `photos` WHERE (restaurant_id = 231 and cover = true and status = 1) LIMIT 1[0m
  [1m[35mPhoto Load (0.3ms)[0m  SELECT `photos`.* FROM `photos` WHERE `photos`.`restaurant_id` = 231 AND `photos`.`status` = 1 ORDER BY restaurant_id ASC, created_at DESC LIMIT 1
  [1m[36mPhoto Load (0.4ms)[0m  [1mSELECT `photos`.* FROM `photos` WHERE (restaurant_id = 222 and cover = true and status = 1) LIMIT 1[0m
  [1m[35mPhoto Load (0.3ms)[0m  SELECT `photos`.* FROM `photos` WHERE `photos`.`restaurant_id` = 222 AND `photos`.`status` = 1 ORDER BY restaurant_id ASC, created_at DESC LIMIT 1
  [1m[36m (0.4ms)[0m  [1mSELECT COUNT(*) FROM `restaurants` [0m
  Rendered restaurants/index.html.erb within layouts/admin (103.2ms)
Completed 200 OK in 113ms (Views: 99.7ms | ActiveRecord: 10.4ms)


Started GET "/admin/restaurants/admin_new" for 127.0.0.1 at 2016-01-16 18:08:13 +0100
Processing by RestaurantsController#admin_new as HTML
  [1m[35mUser Load (0.4ms)[0m  SELECT `users`.* FROM `users` WHERE `users`.`id` = 1 LIMIT 1
  [1m[36m (1.2ms)[0m  [1mSELECT `filters`.id FROM `filters` INNER JOIN `filters_restaurants` ON `filters`.`id` = `filters_restaurants`.`filter_id` WHERE `filters_restaurants`.`restaurant_id` IS NULL[0m
  [1m[35mFilterType Load (0.2ms)[0m  SELECT `filter_types`.* FROM `filter_types` WHERE `filter_types`.`code` = 'hal_status' LIMIT 1
  [1m[36mFilterType Load (0.2ms)[0m  [1mSELECT `filter_types`.* FROM `filter_types` WHERE `filter_types`.`code` = 'price' LIMIT 1[0m
  [1m[35mFilterType Load (0.1ms)[0m  SELECT `filter_types`.* FROM `filter_types` WHERE `filter_types`.`code` = 'cuisine' LIMIT 1
  [1m[36mFilterType Load (0.3ms)[0m  [1mSELECT `filter_types`.* FROM `filter_types` WHERE `filter_types`.`code` = 'alcohol' LIMIT 1[0m
  [1m[35mFilterType Load (0.2ms)[0m  SELECT `filter_types`.* FROM `filter_types` WHERE `filter_types`.`code` = 'features' LIMIT 1
  Rendered restaurants/_googlemap.html.erb (0.1ms)
  [1m[36mFilter Load (0.4ms)[0m  [1mSELECT `filters`.* FROM `filters` WHERE `filters`.`filter_type_id` = 8[0m
  [1m[35mFilter Load (0.3ms)[0m  SELECT `filters`.* FROM `filters` WHERE `filters`.`filter_type_id` = 1 ORDER BY name ASC
  [1m[36mFilter Load (0.2ms)[0m  [1mSELECT `filters`.* FROM `filters` WHERE `filters`.`filter_type_id` = 4[0m
  [1m[35mFilter Load (0.2ms)[0m  SELECT `filters`.* FROM `filters` WHERE `filters`.`filter_type_id` = 6
  [1m[36mFilter Load (0.3ms)[0m  [1mSELECT `filters`.* FROM `filters` WHERE `filters`.`filter_type_id` = 11 AND (code != 'offer')[0m
  Rendered restaurants/_admin_form.html.erb (83.6ms)
  Rendered restaurants/_upload_menu.html.erb (1.4ms)
  Rendered restaurants/_upload_photos.html.erb (0.9ms)
  Rendered restaurants/admin_new.html.erb within layouts/admin (88.5ms)
Completed 200 OK in 105ms (Views: 92.3ms | ActiveRecord: 3.9ms)


Started GET "/photos?r_id=" for 127.0.0.1 at 2016-01-16 18:08:15 +0100
Processing by PhotosController#index as JSON
  Parameters: {"r_id"=>""}
  [1m[35mRestaurant Load (1.5ms)[0m  SELECT `restaurants`.* FROM `restaurants` WHERE `restaurants`.`slug` = '' LIMIT 1
  [1m[36mRestaurant Load (0.2ms)[0m  [1mSELECT `restaurants`.* FROM `restaurants` WHERE `restaurants`.`id` = 0 LIMIT 1[0m
Completed 500 Internal Server Error in 4ms

ActiveRecord::RecordNotFound (Couldn't find Restaurant with id=):
  app/controllers/photos_controller.rb:11:in `index'


  Rendered /Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_dispatch/middleware/templates/rescues/_trace.erb (1.1ms)
  Rendered /Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_dispatch/middleware/templates/rescues/_request_and_response.erb (1.0ms)
  Rendered /Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_dispatch/middleware/templates/rescues/diagnostics.erb within rescues/layout (44.5ms)


Started GET "/admin/restaurants" for 127.0.0.1 at 2016-01-16 18:12:03 +0100
Processing by RestaurantsController#index as HTML
  [1m[35mUser Load (0.3ms)[0m  SELECT `users`.* FROM `users` WHERE `users`.`id` = 1 LIMIT 1
  Rendered shared/_restaurant_manage_tabs.html.erb (0.7ms)
  Rendered restaurants/_condition_fields.html.erb (9.3ms)
  [1m[36mRestaurant Load (0.8ms)[0m  [1mSELECT `restaurants`.* FROM `restaurants` ORDER BY disabled ASC,created_at DESC LIMIT 12 OFFSET 0[0m
  [1m[35mPhoto Load (0.8ms)[0m  SELECT `photos`.* FROM `photos` WHERE (restaurant_id = 1057 and cover = true and status = 1) LIMIT 1
  [1m[36mPhoto Load (0.3ms)[0m  [1mSELECT `photos`.* FROM `photos` WHERE `photos`.`restaurant_id` = 1057 AND `photos`.`status` = 1 ORDER BY restaurant_id ASC, created_at DESC LIMIT 1[0m
  [1m[35mPhoto Load (0.3ms)[0m  SELECT `photos`.* FROM `photos` WHERE (restaurant_id = 903 and cover = true and status = 1) LIMIT 1
  [1m[36mPhoto Load (0.3ms)[0m  [1mSELECT `photos`.* FROM `photos` WHERE `photos`.`restaurant_id` = 903 AND `photos`.`status` = 1 ORDER BY restaurant_id ASC, created_at DESC LIMIT 1[0m
  [1m[35mPhoto Load (0.3ms)[0m  SELECT `photos`.* FROM `photos` WHERE (restaurant_id = 876 and cover = true and status = 1) LIMIT 1
  [1m[36mPhoto Load (0.3ms)[0m  [1mSELECT `photos`.* FROM `photos` WHERE `photos`.`restaurant_id` = 876 AND `photos`.`status` = 1 ORDER BY restaurant_id ASC, created_at DESC LIMIT 1[0m
  [1m[35mPhoto Load (0.5ms)[0m  SELECT `photos`.* FROM `photos` WHERE (restaurant_id = 851 and cover = true and status = 1) LIMIT 1
  [1m[36mPhoto Load (0.3ms)[0m  [1mSELECT `photos`.* FROM `photos` WHERE `photos`.`restaurant_id` = 851 AND `photos`.`status` = 1 ORDER BY restaurant_id ASC, created_at DESC LIMIT 1[0m
  [1m[35mPhoto Load (0.3ms)[0m  SELECT `photos`.* FROM `photos` WHERE (restaurant_id = 693 and cover = true and status = 1) LIMIT 1
  [1m[36mPhoto Load (0.3ms)[0m  [1mSELECT `photos`.* FROM `photos` WHERE `photos`.`restaurant_id` = 693 AND `photos`.`status` = 1 ORDER BY restaurant_id ASC, created_at DESC LIMIT 1[0m
  [1m[35mPhoto Load (0.4ms)[0m  SELECT `photos`.* FROM `photos` WHERE (restaurant_id = 686 and cover = true and status = 1) LIMIT 1
  [1m[36mPhoto Load (0.3ms)[0m  [1mSELECT `photos`.* FROM `photos` WHERE `photos`.`restaurant_id` = 686 AND `photos`.`status` = 1 ORDER BY restaurant_id ASC, created_at DESC LIMIT 1[0m
  [1m[35mPhoto Load (0.4ms)[0m  SELECT `photos`.* FROM `photos` WHERE (restaurant_id = 669 and cover = true and status = 1) LIMIT 1
  [1m[36mPhoto Load (0.3ms)[0m  [1mSELECT `photos`.* FROM `photos` WHERE `photos`.`restaurant_id` = 669 AND `photos`.`status` = 1 ORDER BY restaurant_id ASC, created_at DESC LIMIT 1[0m
  [1m[35mPhoto Load (0.4ms)[0m  SELECT `photos`.* FROM `photos` WHERE (restaurant_id = 251 and cover = true and status = 1) LIMIT 1
  [1m[36mPhoto Load (0.3ms)[0m  [1mSELECT `photos`.* FROM `photos` WHERE `photos`.`restaurant_id` = 251 AND `photos`.`status` = 1 ORDER BY restaurant_id ASC, created_at DESC LIMIT 1[0m
  [1m[35mPhoto Load (0.3ms)[0m  SELECT `photos`.* FROM `photos` WHERE (restaurant_id = 250 and cover = true and status = 1) LIMIT 1
  [1m[36mPhoto Load (0.3ms)[0m  [1mSELECT `photos`.* FROM `photos` WHERE `photos`.`restaurant_id` = 250 AND `photos`.`status` = 1 ORDER BY restaurant_id ASC, created_at DESC LIMIT 1[0m
  [1m[35mPhoto Load (0.4ms)[0m  SELECT `photos`.* FROM `photos` WHERE (restaurant_id = 237 and cover = true and status = 1) LIMIT 1
  [1m[36mPhoto Load (0.3ms)[0m  [1mSELECT `photos`.* FROM `photos` WHERE `photos`.`restaurant_id` = 237 AND `photos`.`status` = 1 ORDER BY restaurant_id ASC, created_at DESC LIMIT 1[0m
  [1m[35mPhoto Load (0.3ms)[0m  SELECT `photos`.* FROM `photos` WHERE (restaurant_id = 231 and cover = true and status = 1) LIMIT 1
  [1m[36mPhoto Load (0.3ms)[0m  [1mSELECT `photos`.* FROM `photos` WHERE `photos`.`restaurant_id` = 231 AND `photos`.`status` = 1 ORDER BY restaurant_id ASC, created_at DESC LIMIT 1[0m
  [1m[35mPhoto Load (0.4ms)[0m  SELECT `photos`.* FROM `photos` WHERE (restaurant_id = 222 and cover = true and status = 1) LIMIT 1
  [1m[36mPhoto Load (0.3ms)[0m  [1mSELECT `photos`.* FROM `photos` WHERE `photos`.`restaurant_id` = 222 AND `photos`.`status` = 1 ORDER BY restaurant_id ASC, created_at DESC LIMIT 1[0m
  [1m[35m (0.4ms)[0m  SELECT COUNT(*) FROM `restaurants` 
  Rendered restaurants/index.html.erb within layouts/admin (85.8ms)
Completed 200 OK in 94ms (Views: 81.8ms | ActiveRecord: 9.9ms)


Started GET "/admin/restaurants/admin_new" for 127.0.0.1 at 2016-01-16 18:15:15 +0100
Processing by RestaurantsController#admin_new as HTML
  [1m[36mUser Load (0.3ms)[0m  [1mSELECT `users`.* FROM `users` WHERE `users`.`id` = 1 LIMIT 1[0m
  [1m[35m (1.8ms)[0m  SELECT `filters`.id FROM `filters` INNER JOIN `filters_restaurants` ON `filters`.`id` = `filters_restaurants`.`filter_id` WHERE `filters_restaurants`.`restaurant_id` IS NULL
  [1m[36mFilterType Load (0.3ms)[0m  [1mSELECT `filter_types`.* FROM `filter_types` WHERE `filter_types`.`code` = 'hal_status' LIMIT 1[0m
  [1m[35mFilterType Load (0.2ms)[0m  SELECT `filter_types`.* FROM `filter_types` WHERE `filter_types`.`code` = 'price' LIMIT 1
  [1m[36mFilterType Load (0.2ms)[0m  [1mSELECT `filter_types`.* FROM `filter_types` WHERE `filter_types`.`code` = 'cuisine' LIMIT 1[0m
  [1m[35mFilterType Load (0.2ms)[0m  SELECT `filter_types`.* FROM `filter_types` WHERE `filter_types`.`code` = 'alcohol' LIMIT 1
  [1m[36mFilterType Load (0.2ms)[0m  [1mSELECT `filter_types`.* FROM `filter_types` WHERE `filter_types`.`code` = 'features' LIMIT 1[0m
  Rendered restaurants/_googlemap.html.erb (0.1ms)
  [1m[35mFilter Load (0.3ms)[0m  SELECT `filters`.* FROM `filters` WHERE `filters`.`filter_type_id` = 8
  [1m[36mFilter Load (0.3ms)[0m  [1mSELECT `filters`.* FROM `filters` WHERE `filters`.`filter_type_id` = 1 ORDER BY name ASC[0m
  [1m[35mFilter Load (0.2ms)[0m  SELECT `filters`.* FROM `filters` WHERE `filters`.`filter_type_id` = 4
  [1m[36mFilter Load (0.2ms)[0m  [1mSELECT `filters`.* FROM `filters` WHERE `filters`.`filter_type_id` = 6[0m
  [1m[35mFilter Load (0.3ms)[0m  SELECT `filters`.* FROM `filters` WHERE `filters`.`filter_type_id` = 11 AND (code != 'offer')
  Rendered restaurants/_admin_form.html.erb (71.7ms)
  Rendered restaurants/_upload_menu.html.erb (1.6ms)
  Rendered restaurants/_upload_photos.html.erb (0.7ms)
  Rendered restaurants/admin_new.html.erb within layouts/admin (77.7ms)
Completed 200 OK in 96ms (Views: 81.3ms | ActiveRecord: 4.4ms)


Started GET "/photos?r_id=" for 127.0.0.1 at 2016-01-16 18:15:16 +0100
Processing by PhotosController#index as JSON
  Parameters: {"r_id"=>""}
  [1m[36mRestaurant Load (1.8ms)[0m  [1mSELECT `restaurants`.* FROM `restaurants` WHERE `restaurants`.`slug` = '' LIMIT 1[0m
  [1m[35mRestaurant Load (0.2ms)[0m  SELECT `restaurants`.* FROM `restaurants` WHERE `restaurants`.`id` = 0 LIMIT 1
Completed 500 Internal Server Error in 4ms

ActiveRecord::RecordNotFound (Couldn't find Restaurant with id=):
  app/controllers/photos_controller.rb:11:in `index'


  Rendered /Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_dispatch/middleware/templates/rescues/_trace.erb (1.0ms)
  Rendered /Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_dispatch/middleware/templates/rescues/_request_and_response.erb (0.9ms)
  Rendered /Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_dispatch/middleware/templates/rescues/diagnostics.erb within rescues/layout (46.6ms)


Started POST "/admin/menus" for 127.0.0.1 at 2016-01-16 18:21:36 +0100
Processing by MenusController#create as JS
  Parameters: {"utf8"=>"âœ“", "authenticity_token"=>"ZhR8a2fYr/EQcBrBVm2c17tt7AHk64f/gvsZ5fOllxc=", "menus"=>{"name"=>"Test", "restaurant_id"=>"", "menu"=>#<ActionDispatch::Http::UploadedFile:0x007f83c497aac8 @original_filename="chinese.png", @content_type="image/png", @headers="Content-Disposition: form-data; name=\"menus[menu]\"; filename=\"chinese.png\"\r\nContent-Type: image/png\r\n", @tempfile=#<Tempfile:/var/folders/rf/q4l8n5k56pnbjgkdtzrhq_w00000gn/T/RackMultipart20160116-27556-j1qfxv>>}, "commit"=>"Submit", "remotipart_submitted"=>"true", "X-Requested-With"=>"IFrame", "X-Http-Accept"=>"text/javascript, application/javascript, application/ecmascript, application/x-ecmascript, */*; q=0.01"}
  [1m[36mUser Load (0.3ms)[0m  [1mSELECT `users`.* FROM `users` WHERE `users`.`id` = 1 LIMIT 1[0m
  [1m[35m (0.1ms)[0m  BEGIN
  [1m[36mSQL (0.6ms)[0m  [1mINSERT INTO `menus` (`created_at`, `menu_name`, `menu_uid`, `name`, `restaurant_id`, `updated_at`, `user_id`) VALUES ('2016-01-16 17:21:36', 'chinese.png', '2016/01/16/18_21_36_334_chinese.png', 'Test', NULL, '2016-01-16 17:21:36', 1)[0m
  [1m[35m (52.0ms)[0m  COMMIT
Completed 200 OK in 62ms (Views: 0.1ms | ActiveRecord: 53.0ms)


Started POST "/admin/menus" for 127.0.0.1 at 2016-01-16 18:21:41 +0100
Processing by MenusController#create as JS
  Parameters: {"utf8"=>"âœ“", "authenticity_token"=>"ZhR8a2fYr/EQcBrBVm2c17tt7AHk64f/gvsZ5fOllxc=", "menus"=>{"name"=>"Test", "restaurant_id"=>"", "menu"=>#<ActionDispatch::Http::UploadedFile:0x007f83c3d381c0 @original_filename="chinese.png", @content_type="image/png", @headers="Content-Disposition: form-data; name=\"menus[menu]\"; filename=\"chinese.png\"\r\nContent-Type: image/png\r\n", @tempfile=#<Tempfile:/var/folders/rf/q4l8n5k56pnbjgkdtzrhq_w00000gn/T/RackMultipart20160116-27556-1508wy5>>}, "commit"=>"Submit", "remotipart_submitted"=>"true", "X-Requested-With"=>"IFrame", "X-Http-Accept"=>"text/javascript, application/javascript, application/ecmascript, application/x-ecmascript, */*; q=0.01"}
  [1m[36mUser Load (0.3ms)[0m  [1mSELECT `users`.* FROM `users` WHERE `users`.`id` = 1 LIMIT 1[0m
  [1m[35m (0.1ms)[0m  BEGIN
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO `menus` (`created_at`, `menu_name`, `menu_uid`, `name`, `restaurant_id`, `updated_at`, `user_id`) VALUES ('2016-01-16 17:21:41', 'chinese.png', '2016/01/16/18_21_41_727_chinese.png', 'Test', NULL, '2016-01-16 17:21:41', 1)[0m
  [1m[35m (0.5ms)[0m  COMMIT
Completed 200 OK in 8ms (Views: 0.1ms | ActiveRecord: 1.2ms)


Started GET "/admin/collections/admin_new_collection" for 127.0.0.1 at 2016-01-16 18:33:10 +0100
Processing by CollectionsController#admin_new_collection as HTML
  [1m[36mUser Load (0.7ms)[0m  [1mSELECT `users`.* FROM `users` WHERE `users`.`id` = 1 LIMIT 1[0m
  Rendered collections/_collection_form.html.erb (7.9ms)
  Rendered collections/_collection_restaurants_form.html.erb (0.4ms)
  Rendered collections/_upload_collection_image.html.erb (18.0ms)
  Rendered collections/admin_new_collection.html.erb within layouts/admin (29.0ms)
Completed 200 OK in 296ms (Views: 36.2ms | ActiveRecord: 6.4ms)


Started GET "/collection_images?r_id=" for 127.0.0.1 at 2016-01-16 18:33:11 +0100
  [1m[35m (0.2ms)[0m  SELECT COUNT(*) FROM `filter_types` WHERE (code = 'features')
  [1m[36m (0.2ms)[0m  [1mSELECT COUNT(*) FROM `filters` WHERE (code = 'offer')[0m
  [1m[35mFilter Load (0.1ms)[0m  SELECT `filters`.* FROM `filters` WHERE (code = 'offer') LIMIT 1
  [1m[36mFilterType Load (0.6ms)[0m  [1mSELECT `filter_types`.* FROM `filter_types` WHERE (code = 'features') LIMIT 1[0m
  [1m[35mCACHE (0.0ms)[0m  SELECT `filters`.* FROM `filters` WHERE (code = 'offer') LIMIT 1
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT `filter_types`.* FROM `filter_types` WHERE (code = 'features') LIMIT 1[0m
Processing by RestaurantsController#show as JSON
  Parameters: {"r_id"=>"", "id"=>"collection_images"}
  [1m[35mRestaurant Load (1.7ms)[0m  SELECT `restaurants`.* FROM `restaurants` WHERE `restaurants`.`slug` = 'collection_images' LIMIT 1
  [1m[36mRestaurant Load (0.2ms)[0m  [1mSELECT `restaurants`.* FROM `restaurants` WHERE `restaurants`.`id` = 0 LIMIT 1[0m
Completed 500 Internal Server Error in 9ms

ActiveRecord::RecordNotFound (Couldn't find Restaurant with id=collection_images):
  app/controllers/restaurants_controller.rb:193:in `show'


  Rendered /Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_dispatch/middleware/templates/rescues/_trace.erb (1.4ms)
  Rendered /Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_dispatch/middleware/templates/rescues/_request_and_response.erb (1.1ms)
  Rendered /Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_dispatch/middleware/templates/rescues/diagnostics.erb within rescues/layout (48.9ms)


Started GET "/admin/collections/admin_new_collection" for 127.0.0.1 at 2016-01-16 18:41:00 +0100
Processing by CollectionsController#admin_new_collection as HTML
  [1m[35mUser Load (0.4ms)[0m  SELECT `users`.* FROM `users` WHERE `users`.`id` = 1 LIMIT 1
  Rendered collections/_collection_form.html.erb (10.6ms)
  Rendered collections/_collection_restaurants_form.html.erb (0.3ms)
  Rendered collections/_upload_collection_image.html.erb (1.1ms)
  Rendered collections/admin_new_collection.html.erb within layouts/admin (15.7ms)
Completed 200 OK in 26ms (Views: 22.9ms | ActiveRecord: 0.4ms)


Started GET "/collection_images?r_id=" for 127.0.0.1 at 2016-01-16 18:41:00 +0100
Processing by RestaurantsController#show as JSON
  Parameters: {"r_id"=>"", "id"=>"collection_images"}
  [1m[36mRestaurant Load (2.1ms)[0m  [1mSELECT `restaurants`.* FROM `restaurants` WHERE `restaurants`.`slug` = 'collection_images' LIMIT 1[0m
  [1m[35mRestaurant Load (1.0ms)[0m  SELECT `restaurants`.* FROM `restaurants` WHERE `restaurants`.`id` = 0 LIMIT 1
Completed 500 Internal Server Error in 6ms

ActiveRecord::RecordNotFound (Couldn't find Restaurant with id=collection_images):
  app/controllers/restaurants_controller.rb:193:in `show'


  Rendered /Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_dispatch/middleware/templates/rescues/_trace.erb (1.2ms)
  Rendered /Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_dispatch/middleware/templates/rescues/_request_and_response.erb (1.3ms)
  Rendered /Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_dispatch/middleware/templates/rescues/diagnostics.erb within rescues/layout (46.9ms)


Started GET "/admin/collections/admin_new_collection" for 127.0.0.1 at 2016-01-16 18:41:49 +0100
Processing by CollectionsController#admin_new_collection as HTML
  [1m[36mUser Load (0.4ms)[0m  [1mSELECT `users`.* FROM `users` WHERE `users`.`id` = 1 LIMIT 1[0m
  Rendered collections/_collection_form.html.erb (6.4ms)
  Rendered collections/_collection_restaurants_form.html.erb (0.5ms)
  Rendered collections/_upload_collection_image.html.erb (1.1ms)
  Rendered collections/admin_new_collection.html.erb within layouts/admin (11.1ms)
Completed 200 OK in 19ms (Views: 16.9ms | ActiveRecord: 0.4ms)


Started GET "/collection_images?r_id=" for 127.0.0.1 at 2016-01-16 18:41:49 +0100
Processing by RestaurantsController#show as JSON
  Parameters: {"r_id"=>"", "id"=>"collection_images"}
  [1m[35mRestaurant Load (1.7ms)[0m  SELECT `restaurants`.* FROM `restaurants` WHERE `restaurants`.`slug` = 'collection_images' LIMIT 1
  [1m[36mRestaurant Load (0.2ms)[0m  [1mSELECT `restaurants`.* FROM `restaurants` WHERE `restaurants`.`id` = 0 LIMIT 1[0m
Completed 500 Internal Server Error in 5ms

ActiveRecord::RecordNotFound (Couldn't find Restaurant with id=collection_images):
  app/controllers/restaurants_controller.rb:193:in `show'


  Rendered /Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_dispatch/middleware/templates/rescues/_trace.erb (1.4ms)
  Rendered /Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_dispatch/middleware/templates/rescues/_request_and_response.erb (1.1ms)
  Rendered /Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_dispatch/middleware/templates/rescues/diagnostics.erb within rescues/layout (54.3ms)


Started GET "/admin/restaurants/admin_new" for 127.0.0.1 at 2016-01-16 18:43:05 +0100
Processing by RestaurantsController#admin_new as HTML
  [1m[35mUser Load (0.3ms)[0m  SELECT `users`.* FROM `users` WHERE `users`.`id` = 1 LIMIT 1
  [1m[36m (1.9ms)[0m  [1mSELECT `filters`.id FROM `filters` INNER JOIN `filters_restaurants` ON `filters`.`id` = `filters_restaurants`.`filter_id` WHERE `filters_restaurants`.`restaurant_id` IS NULL[0m
  [1m[35mFilterType Load (0.2ms)[0m  SELECT `filter_types`.* FROM `filter_types` WHERE `filter_types`.`code` = 'hal_status' LIMIT 1
  [1m[36mFilterType Load (0.2ms)[0m  [1mSELECT `filter_types`.* FROM `filter_types` WHERE `filter_types`.`code` = 'price' LIMIT 1[0m
  [1m[35mFilterType Load (0.1ms)[0m  SELECT `filter_types`.* FROM `filter_types` WHERE `filter_types`.`code` = 'cuisine' LIMIT 1
  [1m[36mFilterType Load (0.2ms)[0m  [1mSELECT `filter_types`.* FROM `filter_types` WHERE `filter_types`.`code` = 'alcohol' LIMIT 1[0m
  [1m[35mFilterType Load (0.2ms)[0m  SELECT `filter_types`.* FROM `filter_types` WHERE `filter_types`.`code` = 'features' LIMIT 1
  Rendered restaurants/_googlemap.html.erb (0.1ms)
  [1m[36mFilter Load (0.4ms)[0m  [1mSELECT `filters`.* FROM `filters` WHERE `filters`.`filter_type_id` = 8[0m
  [1m[35mFilter Load (0.4ms)[0m  SELECT `filters`.* FROM `filters` WHERE `filters`.`filter_type_id` = 1 ORDER BY name ASC
  [1m[36mFilter Load (0.3ms)[0m  [1mSELECT `filters`.* FROM `filters` WHERE `filters`.`filter_type_id` = 4[0m
  [1m[35mFilter Load (0.3ms)[0m  SELECT `filters`.* FROM `filters` WHERE `filters`.`filter_type_id` = 6
  [1m[36mFilter Load (0.2ms)[0m  [1mSELECT `filters`.* FROM `filters` WHERE `filters`.`filter_type_id` = 11 AND (code != 'offer')[0m
  Rendered restaurants/_admin_form.html.erb (78.2ms)
  Rendered restaurants/_upload_menu.html.erb (2.9ms)
  Rendered restaurants/_upload_photos.html.erb (1.7ms)
  Rendered restaurants/admin_new.html.erb within layouts/admin (86.1ms)
Completed 200 OK in 187ms (Views: 94.0ms | ActiveRecord: 8.9ms)


Started GET "/photos?r_id=" for 127.0.0.1 at 2016-01-16 18:43:07 +0100
Processing by PhotosController#index as JSON
  Parameters: {"r_id"=>""}
  [1m[35mRestaurant Load (2.5ms)[0m  SELECT `restaurants`.* FROM `restaurants` WHERE `restaurants`.`slug` = '' LIMIT 1
  [1m[36mRestaurant Load (0.3ms)[0m  [1mSELECT `restaurants`.* FROM `restaurants` WHERE `restaurants`.`id` = 0 LIMIT 1[0m
Completed 500 Internal Server Error in 7ms

ActiveRecord::RecordNotFound (Couldn't find Restaurant with id=):
  app/controllers/photos_controller.rb:11:in `index'


  Rendered /Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_dispatch/middleware/templates/rescues/_trace.erb (1.9ms)
  Rendered /Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_dispatch/middleware/templates/rescues/_request_and_response.erb (0.9ms)
  Rendered /Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_dispatch/middleware/templates/rescues/diagnostics.erb within rescues/layout (47.8ms)


Started GET "/admin/collections/admin_new_collection" for 127.0.0.1 at 2016-01-16 18:43:11 +0100
Processing by CollectionsController#admin_new_collection as HTML
  [1m[35mUser Load (0.3ms)[0m  SELECT `users`.* FROM `users` WHERE `users`.`id` = 1 LIMIT 1
  Rendered collections/_collection_form.html.erb (7.2ms)
  Rendered collections/_collection_restaurants_form.html.erb (0.3ms)
  Rendered collections/_upload_collection_image.html.erb (1.0ms)
  Rendered collections/admin_new_collection.html.erb within layouts/admin (12.1ms)
Completed 200 OK in 20ms (Views: 17.4ms | ActiveRecord: 0.3ms)


Started GET "/collection_images?r_id=" for 127.0.0.1 at 2016-01-16 18:43:11 +0100
Processing by RestaurantsController#show as JSON
  Parameters: {"r_id"=>"", "id"=>"collection_images"}
  [1m[36mRestaurant Load (1.5ms)[0m  [1mSELECT `restaurants`.* FROM `restaurants` WHERE `restaurants`.`slug` = 'collection_images' LIMIT 1[0m
  [1m[35mRestaurant Load (0.4ms)[0m  SELECT `restaurants`.* FROM `restaurants` WHERE `restaurants`.`id` = 0 LIMIT 1
Completed 500 Internal Server Error in 4ms

ActiveRecord::RecordNotFound (Couldn't find Restaurant with id=collection_images):
  app/controllers/restaurants_controller.rb:193:in `show'


  Rendered /Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_dispatch/middleware/templates/rescues/_trace.erb (1.1ms)
  Rendered /Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_dispatch/middleware/templates/rescues/_request_and_response.erb (1.1ms)
  Rendered /Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_dispatch/middleware/templates/rescues/diagnostics.erb within rescues/layout (47.1ms)


Started GET "/admin/collections/admin_new_collection" for 127.0.0.1 at 2016-01-16 18:43:30 +0100
Processing by CollectionsController#admin_new_collection as HTML
  [1m[36mUser Load (0.2ms)[0m  [1mSELECT `users`.* FROM `users` WHERE `users`.`id` = 1 LIMIT 1[0m
  Rendered collections/_collection_form.html.erb (4.5ms)
  Rendered collections/_collection_restaurants_form.html.erb (0.3ms)
  Rendered collections/_upload_collection_image.html.erb (0.9ms)
  Rendered collections/admin_new_collection.html.erb within layouts/admin (8.2ms)
Completed 200 OK in 15ms (Views: 13.5ms | ActiveRecord: 0.2ms)


Started GET "/collection_images?r_id=" for 127.0.0.1 at 2016-01-16 18:43:30 +0100
Processing by RestaurantsController#show as JSON
  Parameters: {"r_id"=>"", "id"=>"collection_images"}
  [1m[35mRestaurant Load (1.8ms)[0m  SELECT `restaurants`.* FROM `restaurants` WHERE `restaurants`.`slug` = 'collection_images' LIMIT 1
  [1m[36mRestaurant Load (0.2ms)[0m  [1mSELECT `restaurants`.* FROM `restaurants` WHERE `restaurants`.`id` = 0 LIMIT 1[0m
Completed 500 Internal Server Error in 4ms

ActiveRecord::RecordNotFound (Couldn't find Restaurant with id=collection_images):
  app/controllers/restaurants_controller.rb:193:in `show'


  Rendered /Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_dispatch/middleware/templates/rescues/_trace.erb (1.1ms)
  Rendered /Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_dispatch/middleware/templates/rescues/_request_and_response.erb (1.0ms)
  Rendered /Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_dispatch/middleware/templates/rescues/diagnostics.erb within rescues/layout (47.0ms)


Started GET "/admin/collections/admin_new_collection" for 127.0.0.1 at 2016-01-16 18:46:01 +0100
Processing by CollectionsController#admin_new_collection as HTML
  [1m[35mUser Load (0.3ms)[0m  SELECT `users`.* FROM `users` WHERE `users`.`id` = 1 LIMIT 1
  Rendered collections/_collection_form.html.erb (7.6ms)
  Rendered collections/_collection_restaurants_form.html.erb (0.4ms)
  Rendered collections/_upload_collection_image.html.erb (1.4ms)
  Rendered collections/admin_new_collection.html.erb within layouts/admin (12.8ms)
Completed 200 OK in 21ms (Views: 19.2ms | ActiveRecord: 0.3ms)


Started GET "/collection_images?r_id=" for 127.0.0.1 at 2016-01-16 18:46:01 +0100
Processing by RestaurantsController#show as JSON
  Parameters: {"r_id"=>"", "id"=>"collection_images"}
  [1m[36mRestaurant Load (1.8ms)[0m  [1mSELECT `restaurants`.* FROM `restaurants` WHERE `restaurants`.`slug` = 'collection_images' LIMIT 1[0m
  [1m[35mRestaurant Load (3.5ms)[0m  SELECT `restaurants`.* FROM `restaurants` WHERE `restaurants`.`id` = 0 LIMIT 1
Completed 500 Internal Server Error in 8ms

ActiveRecord::RecordNotFound (Couldn't find Restaurant with id=collection_images):
  app/controllers/restaurants_controller.rb:193:in `show'


  Rendered /Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_dispatch/middleware/templates/rescues/_trace.erb (1.1ms)
  Rendered /Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_dispatch/middleware/templates/rescues/_request_and_response.erb (1.1ms)
  Rendered /Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_dispatch/middleware/templates/rescues/diagnostics.erb within rescues/layout (49.5ms)


Started POST "/admin/collections" for 127.0.0.1 at 2016-01-16 18:46:02 +0100
Processing by CollectionsController#create as HTML
  Parameters: {"utf8"=>"âœ“", "authenticity_token"=>"ZhR8a2fYr/EQcBrBVm2c17tt7AHk64f/gvsZ5fOllxc=", "admin"=>"true", "collection"=>{"name"=>"Test", "description"=>"test"}, "image_url"=>#<ActionDispatch::Http::UploadedFile:0x007f83c3ceb500 @original_filename="sunday_roast.png", @content_type="image/png", @headers="Content-Disposition: form-data; name=\"image_url\"; filename=\"sunday_roast.png\"\r\nContent-Type: image/png\r\n", @tempfile=#<Tempfile:/var/folders/rf/q4l8n5k56pnbjgkdtzrhq_w00000gn/T/RackMultipart20160116-27556-5rzidy>>}
  [1m[36mCollection Load (0.2ms)[0m  [1mSELECT `collections`.* FROM `collections` WHERE `collections`.`name` = 'Test' LIMIT 1[0m
  [1m[35m (0.1ms)[0m  BEGIN
  [1m[36m (0.1ms)[0m  [1mROLLBACK[0m
Completed 500 Internal Server Error in 11ms

ActionView::MissingTemplate (Missing template collections/new, application/new with {:locale=>[:en], :formats=>[:html], :handlers=>[:erb, :builder, :coffee, :slim]}. Searched in:
  * "/Users/kevinmuller/halalgems_backend/app/views"
  * "/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/ckeditor-3.7.3/app/views"
  * "/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/devise_mailchimp-0.0.4/app/views"
  * "/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/kaminari-bootstrap-3.0.1/app/views"
  * "/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/bootstrap-kaminari-views-0.0.3/app/views"
  * "/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/kaminari-0.14.1/app/views"
  * "/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/devise-2.0.4/app/views"
):
  app/controllers/collections_controller.rb:83:in `block (2 levels) in create'
  app/controllers/collections_controller.rb:77:in `create'


  Rendered /Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_dispatch/middleware/templates/rescues/missing_template.erb within rescues/layout (0.4ms)


Started GET "/admin/collections/admin_new_collection" for 127.0.0.1 at 2016-01-16 18:46:22 +0100
Processing by CollectionsController#admin_new_collection as HTML
  [1m[35mUser Load (0.5ms)[0m  SELECT `users`.* FROM `users` WHERE `users`.`id` = 1 LIMIT 1
  Rendered collections/_collection_form.html.erb (7.4ms)
  Rendered collections/_collection_restaurants_form.html.erb (0.3ms)
  Rendered collections/_upload_collection_image.html.erb (1.1ms)
  Rendered collections/admin_new_collection.html.erb within layouts/admin (11.3ms)
Completed 200 OK in 22ms (Views: 18.4ms | ActiveRecord: 0.5ms)


Started GET "/collection_images?r_id=" for 127.0.0.1 at 2016-01-16 18:46:22 +0100
Processing by RestaurantsController#show as JSON
  Parameters: {"r_id"=>"", "id"=>"collection_images"}
  [1m[36mRestaurant Load (1.5ms)[0m  [1mSELECT `restaurants`.* FROM `restaurants` WHERE `restaurants`.`slug` = 'collection_images' LIMIT 1[0m
  [1m[35mRestaurant Load (0.2ms)[0m  SELECT `restaurants`.* FROM `restaurants` WHERE `restaurants`.`id` = 0 LIMIT 1
Completed 500 Internal Server Error in 3ms

ActiveRecord::RecordNotFound (Couldn't find Restaurant with id=collection_images):
  app/controllers/restaurants_controller.rb:193:in `show'


  Rendered /Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_dispatch/middleware/templates/rescues/_trace.erb (1.2ms)
  Rendered /Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_dispatch/middleware/templates/rescues/_request_and_response.erb (1.3ms)
  Rendered /Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_dispatch/middleware/templates/rescues/diagnostics.erb within rescues/layout (46.9ms)


Started GET "/admin/collections/admin_new_collection" for 127.0.0.1 at 2016-01-16 18:46:42 +0100
Processing by CollectionsController#admin_new_collection as HTML
  [1m[36mUser Load (0.6ms)[0m  [1mSELECT `users`.* FROM `users` WHERE `users`.`id` = 1 LIMIT 1[0m
  Rendered collections/_collection_form.html.erb (6.9ms)
  Rendered collections/_collection_restaurants_form.html.erb (0.2ms)
  Rendered collections/_upload_collection_image.html.erb (0.9ms)
  Rendered collections/admin_new_collection.html.erb within layouts/admin (11.5ms)
Completed 200 OK in 23ms (Views: 19.3ms | ActiveRecord: 0.6ms)


Started GET "/collection_images?r_id=" for 127.0.0.1 at 2016-01-16 18:46:43 +0100
Processing by RestaurantsController#show as JSON
  Parameters: {"r_id"=>"", "id"=>"collection_images"}
  [1m[35mRestaurant Load (1.7ms)[0m  SELECT `restaurants`.* FROM `restaurants` WHERE `restaurants`.`slug` = 'collection_images' LIMIT 1
  [1m[36mRestaurant Load (0.2ms)[0m  [1mSELECT `restaurants`.* FROM `restaurants` WHERE `restaurants`.`id` = 0 LIMIT 1[0m
Completed 500 Internal Server Error in 4ms

ActiveRecord::RecordNotFound (Couldn't find Restaurant with id=collection_images):
  app/controllers/restaurants_controller.rb:193:in `show'


  Rendered /Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_dispatch/middleware/templates/rescues/_trace.erb (1.1ms)
  Rendered /Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_dispatch/middleware/templates/rescues/_request_and_response.erb (1.9ms)
  Rendered /Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_dispatch/middleware/templates/rescues/diagnostics.erb within rescues/layout (47.2ms)


Started GET "/admin/collections/admin_new_collection" for 127.0.0.1 at 2016-01-16 18:51:59 +0100
Processing by CollectionsController#admin_new_collection as HTML
  [1m[35mUser Load (0.3ms)[0m  SELECT `users`.* FROM `users` WHERE `users`.`id` = 1 LIMIT 1
  Rendered collections/_collection_form.html.erb (8.5ms)
  Rendered collections/_collection_restaurants_form.html.erb (0.4ms)
  Rendered collections/_upload_collection_image.html.erb (0.9ms)
  Rendered collections/admin_new_collection.html.erb within layouts/admin (12.5ms)
Completed 200 OK in 21ms (Views: 19.3ms | ActiveRecord: 0.3ms)


Started GET "/collection_images?r_id=" for 127.0.0.1 at 2016-01-16 18:51:59 +0100
Processing by RestaurantsController#show as JSON
  Parameters: {"r_id"=>"", "id"=>"collection_images"}
  [1m[36mRestaurant Load (1.5ms)[0m  [1mSELECT `restaurants`.* FROM `restaurants` WHERE `restaurants`.`slug` = 'collection_images' LIMIT 1[0m
  [1m[35mRestaurant Load (0.2ms)[0m  SELECT `restaurants`.* FROM `restaurants` WHERE `restaurants`.`id` = 0 LIMIT 1
Completed 500 Internal Server Error in 4ms

ActiveRecord::RecordNotFound (Couldn't find Restaurant with id=collection_images):
  app/controllers/restaurants_controller.rb:193:in `show'


  Rendered /Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_dispatch/middleware/templates/rescues/_trace.erb (1.0ms)
  Rendered /Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_dispatch/middleware/templates/rescues/_request_and_response.erb (1.2ms)
  Rendered /Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_dispatch/middleware/templates/rescues/diagnostics.erb within rescues/layout (46.1ms)


Started POST "/admin/collections" for 127.0.0.1 at 2016-01-16 18:52:13 +0100
Processing by CollectionsController#create as HTML
  Parameters: {"utf8"=>"âœ“", "authenticity_token"=>"ZhR8a2fYr/EQcBrBVm2c17tt7AHk64f/gvsZ5fOllxc=", "admin"=>"true", "collection"=>{"name"=>"Test", "description"=>"test"}, "image_url"=>#<ActionDispatch::Http::UploadedFile:0x007f83bc3aa920 @original_filename="robots.txt", @content_type="text/plain", @headers="Content-Disposition: form-data; name=\"image_url\"; filename=\"robots.txt\"\r\nContent-Type: text/plain\r\n", @tempfile=#<Tempfile:/var/folders/rf/q4l8n5k56pnbjgkdtzrhq_w00000gn/T/RackMultipart20160116-27556-6w8osy>>}
  [1m[36mCollection Load (0.4ms)[0m  [1mSELECT `collections`.* FROM `collections` WHERE `collections`.`name` = 'Test' LIMIT 1[0m
  [1m[35m (0.1ms)[0m  BEGIN
  [1m[36m (0.1ms)[0m  [1mROLLBACK[0m
Completed 500 Internal Server Error in 11ms

ActionView::MissingTemplate (Missing template collections/new, application/new with {:locale=>[:en], :formats=>[:html], :handlers=>[:erb, :builder, :coffee, :slim]}. Searched in:
  * "/Users/kevinmuller/halalgems_backend/app/views"
  * "/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/ckeditor-3.7.3/app/views"
  * "/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/devise_mailchimp-0.0.4/app/views"
  * "/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/kaminari-bootstrap-3.0.1/app/views"
  * "/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/bootstrap-kaminari-views-0.0.3/app/views"
  * "/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/kaminari-0.14.1/app/views"
  * "/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/devise-2.0.4/app/views"
):
  app/controllers/collections_controller.rb:83:in `block (2 levels) in create'
  app/controllers/collections_controller.rb:77:in `create'


  Rendered /Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_dispatch/middleware/templates/rescues/missing_template.erb within rescues/layout (0.6ms)


Started POST "/admin/collections" for 127.0.0.1 at 2016-01-16 18:52:33 +0100
Processing by CollectionsController#create as HTML
  Parameters: {"utf8"=>"âœ“", "authenticity_token"=>"ZhR8a2fYr/EQcBrBVm2c17tt7AHk64f/gvsZ5fOllxc=", "admin"=>"true", "collection"=>{"name"=>"Test", "description"=>"test"}, "image_url"=>#<ActionDispatch::Http::UploadedFile:0x007f83c0796620 @original_filename="afternoon_tea.png", @content_type="image/png", @headers="Content-Disposition: form-data; name=\"image_url\"; filename=\"afternoon_tea.png\"\r\nContent-Type: image/png\r\n", @tempfile=#<Tempfile:/var/folders/rf/q4l8n5k56pnbjgkdtzrhq_w00000gn/T/RackMultipart20160116-27556-fnbbeh>>}
  [1m[35mCollection Load (0.2ms)[0m  SELECT `collections`.* FROM `collections` WHERE `collections`.`name` = 'Test' LIMIT 1
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35m (0.1ms)[0m  ROLLBACK
Completed 500 Internal Server Error in 10ms

ActionView::MissingTemplate (Missing template collections/new, application/new with {:locale=>[:en], :formats=>[:html], :handlers=>[:erb, :builder, :coffee, :slim]}. Searched in:
  * "/Users/kevinmuller/halalgems_backend/app/views"
  * "/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/ckeditor-3.7.3/app/views"
  * "/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/devise_mailchimp-0.0.4/app/views"
  * "/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/kaminari-bootstrap-3.0.1/app/views"
  * "/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/bootstrap-kaminari-views-0.0.3/app/views"
  * "/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/kaminari-0.14.1/app/views"
  * "/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/devise-2.0.4/app/views"
):
  app/controllers/collections_controller.rb:83:in `block (2 levels) in create'
  app/controllers/collections_controller.rb:77:in `create'


  Rendered /Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_dispatch/middleware/templates/rescues/missing_template.erb within rescues/layout (0.4ms)


Started GET "/admin/collections/admin_new_collection" for 127.0.0.1 at 2016-01-16 18:52:52 +0100
Processing by CollectionsController#admin_new_collection as HTML
  [1m[36mUser Load (0.3ms)[0m  [1mSELECT `users`.* FROM `users` WHERE `users`.`id` = 1 LIMIT 1[0m
  Rendered collections/_collection_form.html.erb (4.9ms)
  Rendered collections/_collection_restaurants_form.html.erb (0.3ms)
  Rendered collections/_upload_collection_image.html.erb (1.6ms)
  Rendered collections/admin_new_collection.html.erb within layouts/admin (10.1ms)
Completed 200 OK in 17ms (Views: 15.0ms | ActiveRecord: 0.3ms)


Started GET "/collection_images?r_id=" for 127.0.0.1 at 2016-01-16 18:52:53 +0100
Processing by RestaurantsController#show as JSON
  Parameters: {"r_id"=>"", "id"=>"collection_images"}
  [1m[35mRestaurant Load (1.6ms)[0m  SELECT `restaurants`.* FROM `restaurants` WHERE `restaurants`.`slug` = 'collection_images' LIMIT 1
  [1m[36mRestaurant Load (0.2ms)[0m  [1mSELECT `restaurants`.* FROM `restaurants` WHERE `restaurants`.`id` = 0 LIMIT 1[0m
Completed 500 Internal Server Error in 4ms

ActiveRecord::RecordNotFound (Couldn't find Restaurant with id=collection_images):
  app/controllers/restaurants_controller.rb:193:in `show'


  Rendered /Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_dispatch/middleware/templates/rescues/_trace.erb (2.2ms)
  Rendered /Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_dispatch/middleware/templates/rescues/_request_and_response.erb (1.6ms)
  Rendered /Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_dispatch/middleware/templates/rescues/diagnostics.erb within rescues/layout (48.1ms)


Started POST "/admin/collections" for 127.0.0.1 at 2016-01-16 18:52:57 +0100
Processing by CollectionsController#create as HTML
  Parameters: {"utf8"=>"âœ“", "authenticity_token"=>"ZhR8a2fYr/EQcBrBVm2c17tt7AHk64f/gvsZ5fOllxc=", "admin"=>"true", "collection"=>{"name"=>"Test", "description"=>"test"}, "image_url"=>#<ActionDispatch::Http::UploadedFile:0x007f83c4cb09e0 @original_filename="afternoon_tea.png", @content_type="image/png", @headers="Content-Disposition: form-data; name=\"image_url\"; filename=\"afternoon_tea.png\"\r\nContent-Type: image/png\r\n", @tempfile=#<Tempfile:/var/folders/rf/q4l8n5k56pnbjgkdtzrhq_w00000gn/T/RackMultipart20160116-27556-7iyf6c>>}
  [1m[35mCollection Load (0.3ms)[0m  SELECT `collections`.* FROM `collections` WHERE `collections`.`name` = 'Test' LIMIT 1
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35m (0.2ms)[0m  ROLLBACK
Completed 500 Internal Server Error in 11ms

ActionView::MissingTemplate (Missing template collections/new, application/new with {:locale=>[:en], :formats=>[:html], :handlers=>[:erb, :builder, :coffee, :slim]}. Searched in:
  * "/Users/kevinmuller/halalgems_backend/app/views"
  * "/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/ckeditor-3.7.3/app/views"
  * "/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/devise_mailchimp-0.0.4/app/views"
  * "/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/kaminari-bootstrap-3.0.1/app/views"
  * "/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/bootstrap-kaminari-views-0.0.3/app/views"
  * "/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/kaminari-0.14.1/app/views"
  * "/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/devise-2.0.4/app/views"
):
  app/controllers/collections_controller.rb:83:in `block (2 levels) in create'
  app/controllers/collections_controller.rb:77:in `create'


  Rendered /Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_dispatch/middleware/templates/rescues/missing_template.erb within rescues/layout (0.4ms)


Started POST "/admin/collections" for 127.0.0.1 at 2016-01-16 18:57:27 +0100
Processing by CollectionsController#create as HTML
  Parameters: {"utf8"=>"âœ“", "authenticity_token"=>"ZhR8a2fYr/EQcBrBVm2c17tt7AHk64f/gvsZ5fOllxc=", "admin"=>"true", "collection"=>{"name"=>"Test", "description"=>"test"}, "image_url"=>#<ActionDispatch::Http::UploadedFile:0x007f83c48516b0 @original_filename="afternoon_tea.png", @content_type="image/png", @headers="Content-Disposition: form-data; name=\"image_url\"; filename=\"afternoon_tea.png\"\r\nContent-Type: image/png\r\n", @tempfile=#<Tempfile:/var/folders/rf/q4l8n5k56pnbjgkdtzrhq_w00000gn/T/RackMultipart20160116-27556-676uhw>>}
  [1m[36mCollection Load (0.2ms)[0m  [1mSELECT `collections`.* FROM `collections` WHERE `collections`.`name` = 'Test' LIMIT 1[0m
  [1m[35m (0.1ms)[0m  BEGIN
  [1m[36m (0.1ms)[0m  [1mROLLBACK[0m
Completed 500 Internal Server Error in 9ms

ActionView::MissingTemplate (Missing template collections/new, application/new with {:locale=>[:en], :formats=>[:html], :handlers=>[:erb, :builder, :coffee, :slim]}. Searched in:
  * "/Users/kevinmuller/halalgems_backend/app/views"
  * "/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/ckeditor-3.7.3/app/views"
  * "/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/devise_mailchimp-0.0.4/app/views"
  * "/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/kaminari-bootstrap-3.0.1/app/views"
  * "/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/bootstrap-kaminari-views-0.0.3/app/views"
  * "/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/kaminari-0.14.1/app/views"
  * "/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/devise-2.0.4/app/views"
):
  app/controllers/collections_controller.rb:83:in `block (2 levels) in create'
  app/controllers/collections_controller.rb:77:in `create'


  Rendered /Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_dispatch/middleware/templates/rescues/missing_template.erb within rescues/layout (0.6ms)


Started GET "/admin/collections/admin_new_collection" for 127.0.0.1 at 2016-01-16 18:57:29 +0100
Processing by CollectionsController#admin_new_collection as HTML
  [1m[35mUser Load (0.4ms)[0m  SELECT `users`.* FROM `users` WHERE `users`.`id` = 1 LIMIT 1
  Rendered collections/_collection_form.html.erb (5.6ms)
  Rendered collections/_collection_restaurants_form.html.erb (0.8ms)
  Rendered collections/_upload_collection_image.html.erb (1.2ms)
  Rendered collections/admin_new_collection.html.erb within layouts/admin (26.4ms)
Completed 200 OK in 70ms (Views: 67.8ms | ActiveRecord: 0.4ms)


Started GET "/collection_images?r_id=" for 127.0.0.1 at 2016-01-16 18:57:29 +0100
Processing by RestaurantsController#show as JSON
  Parameters: {"r_id"=>"", "id"=>"collection_images"}
  [1m[36mRestaurant Load (2.6ms)[0m  [1mSELECT `restaurants`.* FROM `restaurants` WHERE `restaurants`.`slug` = 'collection_images' LIMIT 1[0m
  [1m[35mRestaurant Load (0.2ms)[0m  SELECT `restaurants`.* FROM `restaurants` WHERE `restaurants`.`id` = 0 LIMIT 1
Completed 500 Internal Server Error in 5ms

ActiveRecord::RecordNotFound (Couldn't find Restaurant with id=collection_images):
  app/controllers/restaurants_controller.rb:193:in `show'


  Rendered /Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_dispatch/middleware/templates/rescues/_trace.erb (1.3ms)
  Rendered /Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_dispatch/middleware/templates/rescues/_request_and_response.erb (1.3ms)
  Rendered /Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_dispatch/middleware/templates/rescues/diagnostics.erb within rescues/layout (59.9ms)


Started POST "/admin/collections" for 127.0.0.1 at 2016-01-16 18:57:34 +0100
Processing by CollectionsController#create as HTML
  Parameters: {"utf8"=>"âœ“", "authenticity_token"=>"ZhR8a2fYr/EQcBrBVm2c17tt7AHk64f/gvsZ5fOllxc=", "admin"=>"true", "collection"=>{"name"=>"Test", "description"=>"test"}, "image_url"=>#<ActionDispatch::Http::UploadedFile:0x007f83c3f3a9c8 @original_filename="afternoon_tea.png", @content_type="image/png", @headers="Content-Disposition: form-data; name=\"image_url\"; filename=\"afternoon_tea.png\"\r\nContent-Type: image/png\r\n", @tempfile=#<Tempfile:/var/folders/rf/q4l8n5k56pnbjgkdtzrhq_w00000gn/T/RackMultipart20160116-27556-5f3b5l>>}
  [1m[36mCollection Load (0.2ms)[0m  [1mSELECT `collections`.* FROM `collections` WHERE `collections`.`name` = 'Test' LIMIT 1[0m
  [1m[35m (0.1ms)[0m  BEGIN
  [1m[36m (0.1ms)[0m  [1mROLLBACK[0m
Completed 500 Internal Server Error in 11ms

ActionView::MissingTemplate (Missing template collections/new, application/new with {:locale=>[:en], :formats=>[:html], :handlers=>[:erb, :builder, :coffee, :slim]}. Searched in:
  * "/Users/kevinmuller/halalgems_backend/app/views"
  * "/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/ckeditor-3.7.3/app/views"
  * "/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/devise_mailchimp-0.0.4/app/views"
  * "/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/kaminari-bootstrap-3.0.1/app/views"
  * "/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/bootstrap-kaminari-views-0.0.3/app/views"
  * "/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/kaminari-0.14.1/app/views"
  * "/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/devise-2.0.4/app/views"
):
  app/controllers/collections_controller.rb:83:in `block (2 levels) in create'
  app/controllers/collections_controller.rb:77:in `create'


  Rendered /Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_dispatch/middleware/templates/rescues/missing_template.erb within rescues/layout (0.5ms)
Connecting to database specified by database.yml
DEPRECATION WARNING: Passing :tag, :class and others to use is deprecated. Please invoke b.use :label, :wrap_with => {:class=>"simple_label"} instead. (called from block (2 levels) in <top (required)> at /Users/kevinmuller/halalgems_backend/config/initializers/simple_form.rb:67)


Started GET "/admin/collections/admin_new_collection" for 127.0.0.1 at 2016-01-16 18:59:31 +0100
Processing by CollectionsController#admin_new_collection as HTML
  [1m[36mUser Load (0.3ms)[0m  [1mSELECT `users`.* FROM `users` WHERE `users`.`id` = 1 LIMIT 1[0m
  Rendered collections/_collection_form.html.erb (10.7ms)
  Rendered collections/_collection_restaurants_form.html.erb (0.6ms)
  Rendered collections/_upload_collection_image.html.erb (16.1ms)
  Rendered collections/admin_new_collection.html.erb within layouts/admin (31.9ms)
Completed 200 OK in 121ms (Views: 81.9ms | ActiveRecord: 3.8ms)


Started GET "/collection_images?r_id=" for 127.0.0.1 at 2016-01-16 18:59:32 +0100
  [1m[35m (0.2ms)[0m  SELECT COUNT(*) FROM `filter_types` WHERE (code = 'features')
  [1m[36m (0.2ms)[0m  [1mSELECT COUNT(*) FROM `filters` WHERE (code = 'offer')[0m
  [1m[35mFilter Load (0.1ms)[0m  SELECT `filters`.* FROM `filters` WHERE (code = 'offer') LIMIT 1
  [1m[36mFilterType Load (0.2ms)[0m  [1mSELECT `filter_types`.* FROM `filter_types` WHERE (code = 'features') LIMIT 1[0m
  [1m[35mCACHE (0.0ms)[0m  SELECT `filters`.* FROM `filters` WHERE (code = 'offer') LIMIT 1
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT `filter_types`.* FROM `filter_types` WHERE (code = 'features') LIMIT 1[0m
Processing by RestaurantsController#show as JSON
  Parameters: {"r_id"=>"", "id"=>"collection_images"}
  [1m[35mRestaurant Load (1.4ms)[0m  SELECT `restaurants`.* FROM `restaurants` WHERE `restaurants`.`slug` = 'collection_images' LIMIT 1
  [1m[36mRestaurant Load (0.2ms)[0m  [1mSELECT `restaurants`.* FROM `restaurants` WHERE `restaurants`.`id` = 0 LIMIT 1[0m
Completed 500 Internal Server Error in 8ms

ActiveRecord::RecordNotFound (Couldn't find Restaurant with id=collection_images):
  app/controllers/restaurants_controller.rb:193:in `show'


  Rendered /Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_dispatch/middleware/templates/rescues/_trace.erb (1.1ms)
  Rendered /Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_dispatch/middleware/templates/rescues/_request_and_response.erb (1.9ms)
  Rendered /Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_dispatch/middleware/templates/rescues/diagnostics.erb within rescues/layout (61.9ms)


Started POST "/admin/collections" for 127.0.0.1 at 2016-01-16 18:59:35 +0100
Processing by CollectionsController#create as HTML
  Parameters: {"utf8"=>"âœ“", "authenticity_token"=>"ZhR8a2fYr/EQcBrBVm2c17tt7AHk64f/gvsZ5fOllxc=", "admin"=>"true", "collection"=>{"name"=>"Test", "description"=>"test"}, "image_url"=>#<ActionDispatch::Http::UploadedFile:0x007face66dc550 @original_filename="afternoon_tea.png", @content_type="image/png", @headers="Content-Disposition: form-data; name=\"image_url\"; filename=\"afternoon_tea.png\"\r\nContent-Type: image/png\r\n", @tempfile=#<Tempfile:/var/folders/rf/q4l8n5k56pnbjgkdtzrhq_w00000gn/T/RackMultipart20160116-27833-gopwss>>}
  [1m[35mCollection Load (0.3ms)[0m  SELECT `collections`.* FROM `collections` WHERE `collections`.`name` = 'Test' LIMIT 1
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35m (0.1ms)[0m  ROLLBACK
Completed 500 Internal Server Error in 16ms

ActionView::MissingTemplate (Missing template collections/new, application/new with {:locale=>[:en], :formats=>[:html], :handlers=>[:erb, :builder, :coffee, :slim]}. Searched in:
  * "/Users/kevinmuller/halalgems_backend/app/views"
  * "/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/ckeditor-3.7.3/app/views"
  * "/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/devise_mailchimp-0.0.4/app/views"
  * "/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/kaminari-bootstrap-3.0.1/app/views"
  * "/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/bootstrap-kaminari-views-0.0.3/app/views"
  * "/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/kaminari-0.14.1/app/views"
  * "/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/devise-2.0.4/app/views"
):
  app/controllers/collections_controller.rb:83:in `block (2 levels) in create'
  app/controllers/collections_controller.rb:77:in `create'


  Rendered /Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_dispatch/middleware/templates/rescues/missing_template.erb within rescues/layout (0.4ms)


Started GET "/admin/collections/admin_new_collection" for 127.0.0.1 at 2016-01-16 19:04:45 +0100
Processing by CollectionsController#admin_new_collection as HTML
  [1m[36mUser Load (0.4ms)[0m  [1mSELECT `users`.* FROM `users` WHERE `users`.`id` = 1 LIMIT 1[0m
  Rendered collections/_collection_form.html.erb (5.8ms)
  Rendered collections/_collection_restaurants_form.html.erb (0.3ms)
  Rendered collections/_upload_collection_image.html.erb (1.2ms)
  Rendered collections/admin_new_collection.html.erb within layouts/admin (10.2ms)
Completed 200 OK in 20ms (Views: 17.2ms | ActiveRecord: 0.4ms)


Started GET "/collection_images?r_id=" for 127.0.0.1 at 2016-01-16 19:04:45 +0100
Processing by RestaurantsController#show as JSON
  Parameters: {"r_id"=>"", "id"=>"collection_images"}
  [1m[35mRestaurant Load (1.8ms)[0m  SELECT `restaurants`.* FROM `restaurants` WHERE `restaurants`.`slug` = 'collection_images' LIMIT 1
  [1m[36mRestaurant Load (0.3ms)[0m  [1mSELECT `restaurants`.* FROM `restaurants` WHERE `restaurants`.`id` = 0 LIMIT 1[0m
Completed 500 Internal Server Error in 6ms

ActiveRecord::RecordNotFound (Couldn't find Restaurant with id=collection_images):
  app/controllers/restaurants_controller.rb:193:in `show'


  Rendered /Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_dispatch/middleware/templates/rescues/_trace.erb (1.3ms)
  Rendered /Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_dispatch/middleware/templates/rescues/_request_and_response.erb (1.9ms)
  Rendered /Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_dispatch/middleware/templates/rescues/diagnostics.erb within rescues/layout (51.9ms)


Started POST "/admin/collections" for 127.0.0.1 at 2016-01-16 19:04:47 +0100
Processing by CollectionsController#create as HTML
  Parameters: {"utf8"=>"âœ“", "authenticity_token"=>"ZhR8a2fYr/EQcBrBVm2c17tt7AHk64f/gvsZ5fOllxc=", "admin"=>"true", "collection"=>{"name"=>"Test", "description"=>"test"}, "image_url"=>#<ActionDispatch::Http::UploadedFile:0x007face7c22450 @original_filename="afternoon_tea.png", @content_type="image/png", @headers="Content-Disposition: form-data; name=\"image_url\"; filename=\"afternoon_tea.png\"\r\nContent-Type: image/png\r\n", @tempfile=#<Tempfile:/var/folders/rf/q4l8n5k56pnbjgkdtzrhq_w00000gn/T/RackMultipart20160116-27833-jbk7vu>>}
  [1m[35mCollection Load (0.3ms)[0m  SELECT `collections`.* FROM `collections` WHERE `collections`.`name` = 'Test' LIMIT 1
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35m (0.1ms)[0m  ROLLBACK
Completed 500 Internal Server Error in 10ms

ActionView::MissingTemplate (Missing template collections/new, application/new with {:locale=>[:en], :formats=>[:html], :handlers=>[:erb, :builder, :coffee, :slim]}. Searched in:
  * "/Users/kevinmuller/halalgems_backend/app/views"
  * "/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/ckeditor-3.7.3/app/views"
  * "/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/devise_mailchimp-0.0.4/app/views"
  * "/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/kaminari-bootstrap-3.0.1/app/views"
  * "/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/bootstrap-kaminari-views-0.0.3/app/views"
  * "/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/kaminari-0.14.1/app/views"
  * "/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/devise-2.0.4/app/views"
):
  app/controllers/collections_controller.rb:83:in `block (2 levels) in create'
  app/controllers/collections_controller.rb:77:in `create'


  Rendered /Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_dispatch/middleware/templates/rescues/missing_template.erb within rescues/layout (0.4ms)


Started GET "/admin/restaurants" for 127.0.0.1 at 2016-01-16 19:10:51 +0100
  [1m[36m (0.3ms)[0m  [1mSELECT COUNT(*) FROM `filter_types` WHERE (code = 'features')[0m
  [1m[35m (0.3ms)[0m  SELECT COUNT(*) FROM `filters` WHERE (code = 'offer')
  [1m[36mFilter Load (0.2ms)[0m  [1mSELECT `filters`.* FROM `filters` WHERE (code = 'offer') LIMIT 1[0m
  [1m[35mFilterType Load (0.2ms)[0m  SELECT `filter_types`.* FROM `filter_types` WHERE (code = 'features') LIMIT 1
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT `filters`.* FROM `filters` WHERE (code = 'offer') LIMIT 1[0m
  [1m[35mCACHE (0.0ms)[0m  SELECT `filter_types`.* FROM `filter_types` WHERE (code = 'features') LIMIT 1
Processing by RestaurantsController#index as HTML
  [1m[36mUser Load (0.3ms)[0m  [1mSELECT `users`.* FROM `users` WHERE `users`.`id` = 1 LIMIT 1[0m
  Rendered shared/_restaurant_manage_tabs.html.erb (1.3ms)
  Rendered restaurants/_condition_fields.html.erb (12.9ms)
  [1m[35mRestaurant Load (1.3ms)[0m  SELECT `restaurants`.* FROM `restaurants` ORDER BY disabled ASC,created_at DESC LIMIT 12 OFFSET 0
  [1m[36mPhoto Load (0.4ms)[0m  [1mSELECT `photos`.* FROM `photos` WHERE (restaurant_id = 1057 and cover = true and status = 1) LIMIT 1[0m
  [1m[35mPhoto Load (0.5ms)[0m  SELECT `photos`.* FROM `photos` WHERE `photos`.`restaurant_id` = 1057 AND `photos`.`status` = 1 ORDER BY restaurant_id ASC, created_at DESC LIMIT 1
  [1m[36mPhoto Load (0.4ms)[0m  [1mSELECT `photos`.* FROM `photos` WHERE (restaurant_id = 903 and cover = true and status = 1) LIMIT 1[0m
  [1m[35mPhoto Load (0.3ms)[0m  SELECT `photos`.* FROM `photos` WHERE `photos`.`restaurant_id` = 903 AND `photos`.`status` = 1 ORDER BY restaurant_id ASC, created_at DESC LIMIT 1
  [1m[36mPhoto Load (0.3ms)[0m  [1mSELECT `photos`.* FROM `photos` WHERE (restaurant_id = 876 and cover = true and status = 1) LIMIT 1[0m
  [1m[35mPhoto Load (0.3ms)[0m  SELECT `photos`.* FROM `photos` WHERE `photos`.`restaurant_id` = 876 AND `photos`.`status` = 1 ORDER BY restaurant_id ASC, created_at DESC LIMIT 1
  [1m[36mPhoto Load (0.3ms)[0m  [1mSELECT `photos`.* FROM `photos` WHERE (restaurant_id = 851 and cover = true and status = 1) LIMIT 1[0m
  [1m[35mPhoto Load (0.4ms)[0m  SELECT `photos`.* FROM `photos` WHERE `photos`.`restaurant_id` = 851 AND `photos`.`status` = 1 ORDER BY restaurant_id ASC, created_at DESC LIMIT 1
  [1m[36mPhoto Load (0.4ms)[0m  [1mSELECT `photos`.* FROM `photos` WHERE (restaurant_id = 693 and cover = true and status = 1) LIMIT 1[0m
  [1m[35mPhoto Load (0.3ms)[0m  SELECT `photos`.* FROM `photos` WHERE `photos`.`restaurant_id` = 693 AND `photos`.`status` = 1 ORDER BY restaurant_id ASC, created_at DESC LIMIT 1
  [1m[36mPhoto Load (0.5ms)[0m  [1mSELECT `photos`.* FROM `photos` WHERE (restaurant_id = 686 and cover = true and status = 1) LIMIT 1[0m
  [1m[35mPhoto Load (0.3ms)[0m  SELECT `photos`.* FROM `photos` WHERE `photos`.`restaurant_id` = 686 AND `photos`.`status` = 1 ORDER BY restaurant_id ASC, created_at DESC LIMIT 1
  [1m[36mPhoto Load (0.4ms)[0m  [1mSELECT `photos`.* FROM `photos` WHERE (restaurant_id = 669 and cover = true and status = 1) LIMIT 1[0m
  [1m[35mPhoto Load (0.3ms)[0m  SELECT `photos`.* FROM `photos` WHERE `photos`.`restaurant_id` = 669 AND `photos`.`status` = 1 ORDER BY restaurant_id ASC, created_at DESC LIMIT 1
  [1m[36mPhoto Load (0.4ms)[0m  [1mSELECT `photos`.* FROM `photos` WHERE (restaurant_id = 251 and cover = true and status = 1) LIMIT 1[0m
  [1m[35mPhoto Load (0.3ms)[0m  SELECT `photos`.* FROM `photos` WHERE `photos`.`restaurant_id` = 251 AND `photos`.`status` = 1 ORDER BY restaurant_id ASC, created_at DESC LIMIT 1
  [1m[36mPhoto Load (0.4ms)[0m  [1mSELECT `photos`.* FROM `photos` WHERE (restaurant_id = 250 and cover = true and status = 1) LIMIT 1[0m
  [1m[35mPhoto Load (0.7ms)[0m  SELECT `photos`.* FROM `photos` WHERE `photos`.`restaurant_id` = 250 AND `photos`.`status` = 1 ORDER BY restaurant_id ASC, created_at DESC LIMIT 1
  [1m[36mPhoto Load (0.4ms)[0m  [1mSELECT `photos`.* FROM `photos` WHERE (restaurant_id = 237 and cover = true and status = 1) LIMIT 1[0m
  [1m[35mPhoto Load (0.3ms)[0m  SELECT `photos`.* FROM `photos` WHERE `photos`.`restaurant_id` = 237 AND `photos`.`status` = 1 ORDER BY restaurant_id ASC, created_at DESC LIMIT 1
  [1m[36mPhoto Load (0.4ms)[0m  [1mSELECT `photos`.* FROM `photos` WHERE (restaurant_id = 231 and cover = true and status = 1) LIMIT 1[0m
  [1m[35mPhoto Load (0.3ms)[0m  SELECT `photos`.* FROM `photos` WHERE `photos`.`restaurant_id` = 231 AND `photos`.`status` = 1 ORDER BY restaurant_id ASC, created_at DESC LIMIT 1
  [1m[36mPhoto Load (0.6ms)[0m  [1mSELECT `photos`.* FROM `photos` WHERE (restaurant_id = 222 and cover = true and status = 1) LIMIT 1[0m
  [1m[35mPhoto Load (0.3ms)[0m  SELECT `photos`.* FROM `photos` WHERE `photos`.`restaurant_id` = 222 AND `photos`.`status` = 1 ORDER BY restaurant_id ASC, created_at DESC LIMIT 1
  [1m[36m (0.3ms)[0m  [1mSELECT COUNT(*) FROM `restaurants` [0m
  Rendered restaurants/index.html.erb within layouts/admin (155.6ms)
Completed 200 OK in 209ms (Views: 158.0ms | ActiveRecord: 14.5ms)


Started GET "/admin/collections" for 127.0.0.1 at 2016-01-16 19:10:53 +0100
Processing by CollectionsController#index as HTML
  Rendered shared/_restaurant_manage_tabs.html.erb (0.7ms)
  [1m[35mCollection Load (0.2ms)[0m  SELECT `collections`.* FROM `collections` ORDER BY name ASC, created_at DESC LIMIT 12 OFFSET 0
  Rendered collections/index.erb within layouts/admin (19.8ms)
Completed 500 Internal Server Error in 26ms

ActionView::Template::Error (undefined local variable or method `new_path' for #<#<Class:0x007face9b70b40>:0x007face7ca3348>):
    5:     <h3 id="restaurant_collections" class="title"><%=t 'collections.title' %></h3>
    6: 
    7:     <span class='new-restaurant-button'>
    8:       <%= link_to new_path, class: "btn btn-success fa fa-plus-circle" do %>
    9:         <span class="open-san"><%= t('collections.new') %></span>
    10:       <% end %>
    11:     </span>
  app/views/collections/index.erb:8:in `_app_views_collections_index_erb___1176938067202427434_70190299942400'
  app/controllers/collections_controller.rb:20:in `index'


  Rendered /Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_dispatch/middleware/templates/rescues/_trace.erb (0.9ms)
  Rendered /Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_dispatch/middleware/templates/rescues/_request_and_response.erb (0.6ms)
  Rendered /Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_dispatch/middleware/templates/rescues/template_error.erb within rescues/layout (39.1ms)


Started GET "/admin/collections" for 127.0.0.1 at 2016-01-16 19:12:39 +0100
Processing by CollectionsController#index as HTML
ERROR: compiling _app_views_collections_index_erb___1176938067202427434_70190316995360 RAISED /Users/kevinmuller/halalgems_backend/app/views/collections/index.erb:8: syntax error, unexpected =>, expecting '}'
...er.append=  link_to {:action => 'new'}, class: "btn btn-succ...
...                               ^
/Users/kevinmuller/halalgems_backend/app/views/collections/index.erb:8: syntax error, unexpected tLABEL
...k_to {:action => 'new'}, class: "btn btn-success fa fa-plus-...
...                               ^
/Users/kevinmuller/halalgems_backend/app/views/collections/index.erb:8: syntax error, unexpected keyword_do, expecting keyword_end
...n-success fa fa-plus-circle" do @output_buffer.safe_concat('
...                               ^
/Users/kevinmuller/halalgems_backend/app/views/collections/index.erb:53: syntax error, unexpected keyword_ensure, expecting end-of-input
Function body:           def _app_views_collections_index_erb___1176938067202427434_70190316995360(local_assigns, output_buffer)
            _old_virtual_path, @virtual_path = @virtual_path, "collections/index";_old_output_buffer = @output_buffer;;@output_buffer = output_buffer || ActionView::OutputBuffer.new;@output_buffer.append= ( render 'shared/restaurant_manage_tabs' );@output_buffer.safe_concat('
');@output_buffer.safe_concat('
<div class="row">
  <div class="col-lg-12">
    <h3 id="restaurant_collections" class="title">');@output_buffer.append= (t 'collections.title' );@output_buffer.safe_concat('</h3>

    <span class=\'new-restaurant-button\'>
      ');@output_buffer.append=  link_to {:action => 'new'}, class: "btn btn-success fa fa-plus-circle" do @output_buffer.safe_concat('
');@output_buffer.safe_concat('        <span class="open-san">');@output_buffer.append= ( t('collections.new') );@output_buffer.safe_concat('</span>
');       end 
@output_buffer.safe_concat('    </span>

  </div>
</div>

<table class="table table-condensed table-striped">
  <thead>
  <tr>
    <th style="width: 20%">');@output_buffer.append= ( sort_link @search, :name, "Collection name" );@output_buffer.safe_concat('</th>
    <th style="width: 170px">Image</th>
    <th>');@output_buffer.append= ( sort_link @search, :description, "Description" );@output_buffer.safe_concat('</th>
    <th style="width: 25%">Actions</th>
  </tr>
  </thead>
  <tbody>
');   @collections.each_with_index do |collection, index| 
@output_buffer.safe_concat('      <tr>
        <td>');@output_buffer.append= ( collection.name );@output_buffer.safe_concat('</td>
        <td class="collection_image_column" >
          <img src="');@output_buffer.append= ( collection.image_url );@output_buffer.safe_concat('" alt="');@output_buffer.append= ( collection.name );@output_buffer.safe_concat('" class="jtooltip" title="');@output_buffer.append= ( collection.name );@output_buffer.safe_concat('" />
        </td>
        <td>');@output_buffer.append= ( collection.description );@output_buffer.safe_concat('</td>
        <td>
          <div class="btn-group btn-group-xs">
            ');@output_buffer.append=  link_to edit_collection_path(collection.id), class: "btn btn-default fa fa-edit", title: 'Edit' do @output_buffer.safe_concat('
');@output_buffer.safe_concat('                <span class="open-san">');@output_buffer.append= ( ' Edit' );@output_buffer.safe_concat('</span>
');             end 
@output_buffer.safe_concat('          </div>
        </td>
      </tr>
');   end 
@output_buffer.safe_concat('  </tbody>
</table>
<p>
  ');@output_buffer.append= ( paginate @collections, :theme => "twitter-bootstrap-3");@output_buffer.safe_concat('
');@output_buffer.safe_concat('</p>

<script>
  $(\'.carousel\').carousel({
    interval: false
  })
</script>');@output_buffer.to_s
          ensure
            @virtual_path, @output_buffer = _old_virtual_path, _old_output_buffer
          end

Backtrace: /Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_view/template.rb:297:in `module_eval'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_view/template.rb:297:in `compile'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_view/template.rb:244:in `block in compile!'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_view/template.rb:232:in `synchronize'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_view/template.rb:232:in `compile!'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_view/template.rb:144:in `block in render'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/activesupport-3.2.8/lib/active_support/notifications.rb:125:in `instrument'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_view/template.rb:143:in `render'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_view/renderer/template_renderer.rb:47:in `block (2 levels) in render_template'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_view/renderer/abstract_renderer.rb:38:in `block in instrument'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/activesupport-3.2.8/lib/active_support/notifications.rb:123:in `block in instrument'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/activesupport-3.2.8/lib/active_support/notifications/instrumenter.rb:20:in `instrument'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/activesupport-3.2.8/lib/active_support/notifications.rb:123:in `instrument'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_view/renderer/abstract_renderer.rb:38:in `instrument'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_view/renderer/template_renderer.rb:46:in `block in render_template'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_view/renderer/template_renderer.rb:54:in `render_with_layout'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_view/renderer/template_renderer.rb:45:in `render_template'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_view/renderer/template_renderer.rb:18:in `render'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/newrelic_rpm-3.7.3.204/lib/new_relic/agent/instrumentation/rails3/action_controller.rb:160:in `block in render_with_newrelic'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/newrelic_rpm-3.7.3.204/lib/new_relic/agent/method_tracer.rb:281:in `trace_execution_scoped'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/newrelic_rpm-3.7.3.204/lib/new_relic/agent/instrumentation/rails3/action_controller.rb:159:in `render_with_newrelic'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_view/renderer/renderer.rb:36:in `render_template'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_view/renderer/renderer.rb:17:in `render'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/abstract_controller/rendering.rb:110:in `_render_template'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_controller/metal/streaming.rb:225:in `_render_template'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/abstract_controller/rendering.rb:103:in `render_to_body'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_controller/metal/renderers.rb:28:in `render_to_body'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_controller/metal/compatibility.rb:50:in `render_to_body'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/abstract_controller/rendering.rb:88:in `render'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_controller/metal/rendering.rb:16:in `render'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_controller/metal/instrumentation.rb:40:in `block (2 levels) in render'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/activesupport-3.2.8/lib/active_support/core_ext/benchmark.rb:5:in `block in ms'
/Users/kevinmuller/.rvm/rubies/ruby-2.2.4/lib/ruby/2.2.0/benchmark.rb:303:in `realtime'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/activesupport-3.2.8/lib/active_support/core_ext/benchmark.rb:5:in `ms'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_controller/metal/instrumentation.rb:40:in `block in render'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_controller/metal/instrumentation.rb:83:in `cleanup_view_runtime'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/activerecord-3.2.8/lib/active_record/railties/controller_runtime.rb:24:in `cleanup_view_runtime'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_controller/metal/instrumentation.rb:39:in `render'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/bundler/gems/remotipart-aadc29e996c3/lib/remotipart/render_overrides.rb:14:in `render_with_remotipart'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_controller/metal/implicit_render.rb:10:in `default_render'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_controller/metal/mime_responds.rb:196:in `respond_to'
/Users/kevinmuller/halalgems_backend/app/controllers/collections_controller.rb:20:in `index'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_controller/metal/implicit_render.rb:4:in `send_action'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/abstract_controller/base.rb:167:in `process_action'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_controller/metal/rendering.rb:10:in `process_action'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/abstract_controller/callbacks.rb:18:in `block in process_action'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/activesupport-3.2.8/lib/active_support/callbacks.rb:436:in `_run__1266705099739305916__process_action__2602905206554513600__callbacks'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/activesupport-3.2.8/lib/active_support/callbacks.rb:405:in `__run_callback'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/activesupport-3.2.8/lib/active_support/callbacks.rb:385:in `_run_process_action_callbacks'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/activesupport-3.2.8/lib/active_support/callbacks.rb:81:in `run_callbacks'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/abstract_controller/callbacks.rb:17:in `process_action'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_controller/metal/rescue.rb:29:in `process_action'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_controller/metal/instrumentation.rb:30:in `block in process_action'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/activesupport-3.2.8/lib/active_support/notifications.rb:123:in `block in instrument'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/activesupport-3.2.8/lib/active_support/notifications/instrumenter.rb:20:in `instrument'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/activesupport-3.2.8/lib/active_support/notifications.rb:123:in `instrument'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_controller/metal/instrumentation.rb:29:in `process_action'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_controller/metal/params_wrapper.rb:207:in `process_action'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/activerecord-3.2.8/lib/active_record/railties/controller_runtime.rb:18:in `process_action'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/newrelic_rpm-3.7.3.204/lib/new_relic/agent/instrumentation/rails3/action_controller.rb:38:in `block in process_action'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/newrelic_rpm-3.7.3.204/lib/new_relic/agent/instrumentation/controller_instrumentation.rb:335:in `perform_action_with_newrelic_trace'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/newrelic_rpm-3.7.3.204/lib/new_relic/agent/instrumentation/rails3/action_controller.rb:37:in `process_action'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/abstract_controller/base.rb:121:in `process'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/abstract_controller/rendering.rb:45:in `process'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_controller/metal.rb:203:in `dispatch'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_controller/metal/rack_delegation.rb:14:in `dispatch'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_controller/metal.rb:246:in `block in action'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_dispatch/routing/route_set.rb:73:in `call'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_dispatch/routing/route_set.rb:73:in `dispatch'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_dispatch/routing/route_set.rb:36:in `call'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/journey-1.0.4/lib/journey/router.rb:68:in `block in call'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/journey-1.0.4/lib/journey/router.rb:56:in `each'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/journey-1.0.4/lib/journey/router.rb:56:in `call'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_dispatch/routing/route_set.rb:600:in `call'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/omniauth-1.1.4/lib/omniauth/strategy.rb:184:in `call!'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/omniauth-1.1.4/lib/omniauth/strategy.rb:164:in `call'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/newrelic_rpm-3.7.3.204/lib/new_relic/rack/error_collector.rb:55:in `call'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/newrelic_rpm-3.7.3.204/lib/new_relic/rack/agent_hooks.rb:32:in `call'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/newrelic_rpm-3.7.3.204/lib/new_relic/rack/browser_monitoring.rb:27:in `call'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/newrelic_rpm-3.7.3.204/lib/new_relic/rack/developer_mode.rb:45:in `call'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/galetahub-simple_captcha-0.1.5/lib/simple_captcha/middleware.rb:20:in `call'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/bundler/gems/client_side_validations-a6a515504520/lib/client_side_validations/middleware.rb:21:in `call'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/warden-1.1.1/lib/warden/manager.rb:35:in `block in call'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/warden-1.1.1/lib/warden/manager.rb:34:in `catch'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/warden-1.1.1/lib/warden/manager.rb:34:in `call'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_dispatch/middleware/best_standards_support.rb:17:in `call'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/rack-1.4.5/lib/rack/etag.rb:23:in `call'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/rack-1.4.5/lib/rack/conditionalget.rb:25:in `call'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_dispatch/middleware/head.rb:14:in `call'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/bundler/gems/remotipart-aadc29e996c3/lib/remotipart/middleware.rb:27:in `call'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_dispatch/middleware/params_parser.rb:21:in `call'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_dispatch/middleware/flash.rb:242:in `call'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/rack-1.4.5/lib/rack/session/abstract/id.rb:210:in `context'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/rack-1.4.5/lib/rack/session/abstract/id.rb:205:in `call'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_dispatch/middleware/cookies.rb:339:in `call'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/dragonfly-0.9.15/lib/dragonfly/cookie_monster.rb:9:in `call'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/activerecord-3.2.8/lib/active_record/query_cache.rb:64:in `call'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/activerecord-3.2.8/lib/active_record/connection_adapters/abstract/connection_pool.rb:473:in `call'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_dispatch/middleware/callbacks.rb:28:in `block in call'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/activesupport-3.2.8/lib/active_support/callbacks.rb:405:in `_run__1964689105930070249__call__2247822051254444417__callbacks'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/activesupport-3.2.8/lib/active_support/callbacks.rb:405:in `__run_callback'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/activesupport-3.2.8/lib/active_support/callbacks.rb:385:in `_run_call_callbacks'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/activesupport-3.2.8/lib/active_support/callbacks.rb:81:in `run_callbacks'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_dispatch/middleware/callbacks.rb:27:in `call'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_dispatch/middleware/reloader.rb:65:in `call'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_dispatch/middleware/remote_ip.rb:31:in `call'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_dispatch/middleware/debug_exceptions.rb:16:in `call'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_dispatch/middleware/show_exceptions.rb:56:in `call'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/railties-3.2.8/lib/rails/rack/logger.rb:26:in `call_app'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/railties-3.2.8/lib/rails/rack/logger.rb:16:in `call'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/quiet_assets-1.0.3/lib/quiet_assets.rb:23:in `call_with_quiet_assets'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_dispatch/middleware/request_id.rb:22:in `call'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/rack-1.4.5/lib/rack/methodoverride.rb:21:in `call'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/rack-1.4.5/lib/rack/runtime.rb:17:in `call'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/activesupport-3.2.8/lib/active_support/cache/strategy/local_cache.rb:72:in `call'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/rack-1.4.5/lib/rack/lock.rb:15:in `call'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_dispatch/middleware/static.rb:62:in `call'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/dragonfly-0.9.15/lib/dragonfly/middleware.rb:13:in `call'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/rack-cache-1.2/lib/rack/cache/context.rb:136:in `forward'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/rack-cache-1.2/lib/rack/cache/context.rb:245:in `fetch'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/rack-cache-1.2/lib/rack/cache/context.rb:185:in `lookup'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/rack-cache-1.2/lib/rack/cache/context.rb:66:in `call!'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/rack-cache-1.2/lib/rack/cache/context.rb:51:in `call'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/railties-3.2.8/lib/rails/engine.rb:479:in `call'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/railties-3.2.8/lib/rails/application.rb:223:in `call'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/rack-1.4.5/lib/rack/content_length.rb:14:in `call'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/railties-3.2.8/lib/rails/rack/log_tailer.rb:17:in `call'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/rack-1.4.5/lib/rack/handler/webrick.rb:59:in `service'
/Users/kevinmuller/.rvm/rubies/ruby-2.2.4/lib/ruby/2.2.0/webrick/httpserver.rb:138:in `service'
/Users/kevinmuller/.rvm/rubies/ruby-2.2.4/lib/ruby/2.2.0/webrick/httpserver.rb:94:in `run'
/Users/kevinmuller/.rvm/rubies/ruby-2.2.4/lib/ruby/2.2.0/webrick/server.rb:294:in `block in start_thread'
  Rendered collections/index.erb within layouts/admin (0.8ms)
Completed 500 Internal Server Error in 4ms

ActionView::Template::Error (/Users/kevinmuller/halalgems_backend/app/views/collections/index.erb:8: syntax error, unexpected =>, expecting '}'
...er.append=  link_to {:action => 'new'}, class: "btn btn-succ...
...                               ^
/Users/kevinmuller/halalgems_backend/app/views/collections/index.erb:8: syntax error, unexpected tLABEL
...k_to {:action => 'new'}, class: "btn btn-success fa fa-plus-...
...                               ^
/Users/kevinmuller/halalgems_backend/app/views/collections/index.erb:8: syntax error, unexpected keyword_do, expecting keyword_end
...n-success fa fa-plus-circle" do @output_buffer.safe_concat('
...                               ^
/Users/kevinmuller/halalgems_backend/app/views/collections/index.erb:53: syntax error, unexpected keyword_ensure, expecting end-of-input):
    5:     <h3 id="restaurant_collections" class="title"><%=t 'collections.title' %></h3>
    6: 
    7:     <span class='new-restaurant-button'>
    8:       <%= link_to {:action => 'new'}, class: "btn btn-success fa fa-plus-circle" do %>
    9:         <span class="open-san"><%= t('collections.new') %></span>
    10:       <% end %>
    11:     </span>
  app/controllers/collections_controller.rb:20:in `index'


  Rendered /Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_dispatch/middleware/templates/rescues/_trace.erb (1.3ms)
  Rendered /Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_dispatch/middleware/templates/rescues/_request_and_response.erb (0.9ms)
  Rendered /Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_dispatch/middleware/templates/rescues/template_error.erb within rescues/layout (41.1ms)


Started GET "/admin/restaurants" for 127.0.0.1 at 2016-01-16 19:12:41 +0100
Processing by RestaurantsController#index as HTML
  [1m[36mUser Load (0.3ms)[0m  [1mSELECT `users`.* FROM `users` WHERE `users`.`id` = 1 LIMIT 1[0m
  Rendered shared/_restaurant_manage_tabs.html.erb (1.0ms)
  Rendered restaurants/_condition_fields.html.erb (9.4ms)
  [1m[35mRestaurant Load (0.8ms)[0m  SELECT `restaurants`.* FROM `restaurants` ORDER BY disabled ASC,created_at DESC LIMIT 12 OFFSET 0
  [1m[36mPhoto Load (0.5ms)[0m  [1mSELECT `photos`.* FROM `photos` WHERE (restaurant_id = 1057 and cover = true and status = 1) LIMIT 1[0m
  [1m[35mPhoto Load (0.3ms)[0m  SELECT `photos`.* FROM `photos` WHERE `photos`.`restaurant_id` = 1057 AND `photos`.`status` = 1 ORDER BY restaurant_id ASC, created_at DESC LIMIT 1
  [1m[36mPhoto Load (0.3ms)[0m  [1mSELECT `photos`.* FROM `photos` WHERE (restaurant_id = 903 and cover = true and status = 1) LIMIT 1[0m
  [1m[35mPhoto Load (0.3ms)[0m  SELECT `photos`.* FROM `photos` WHERE `photos`.`restaurant_id` = 903 AND `photos`.`status` = 1 ORDER BY restaurant_id ASC, created_at DESC LIMIT 1
  [1m[36mPhoto Load (0.5ms)[0m  [1mSELECT `photos`.* FROM `photos` WHERE (restaurant_id = 876 and cover = true and status = 1) LIMIT 1[0m
  [1m[35mPhoto Load (0.3ms)[0m  SELECT `photos`.* FROM `photos` WHERE `photos`.`restaurant_id` = 876 AND `photos`.`status` = 1 ORDER BY restaurant_id ASC, created_at DESC LIMIT 1
  [1m[36mPhoto Load (0.5ms)[0m  [1mSELECT `photos`.* FROM `photos` WHERE (restaurant_id = 851 and cover = true and status = 1) LIMIT 1[0m
  [1m[35mPhoto Load (0.3ms)[0m  SELECT `photos`.* FROM `photos` WHERE `photos`.`restaurant_id` = 851 AND `photos`.`status` = 1 ORDER BY restaurant_id ASC, created_at DESC LIMIT 1
  [1m[36mPhoto Load (0.4ms)[0m  [1mSELECT `photos`.* FROM `photos` WHERE (restaurant_id = 693 and cover = true and status = 1) LIMIT 1[0m
  [1m[35mPhoto Load (0.3ms)[0m  SELECT `photos`.* FROM `photos` WHERE `photos`.`restaurant_id` = 693 AND `photos`.`status` = 1 ORDER BY restaurant_id ASC, created_at DESC LIMIT 1
  [1m[36mPhoto Load (0.3ms)[0m  [1mSELECT `photos`.* FROM `photos` WHERE (restaurant_id = 686 and cover = true and status = 1) LIMIT 1[0m
  [1m[35mPhoto Load (0.3ms)[0m  SELECT `photos`.* FROM `photos` WHERE `photos`.`restaurant_id` = 686 AND `photos`.`status` = 1 ORDER BY restaurant_id ASC, created_at DESC LIMIT 1
  [1m[36mPhoto Load (0.5ms)[0m  [1mSELECT `photos`.* FROM `photos` WHERE (restaurant_id = 669 and cover = true and status = 1) LIMIT 1[0m
  [1m[35mPhoto Load (0.5ms)[0m  SELECT `photos`.* FROM `photos` WHERE `photos`.`restaurant_id` = 669 AND `photos`.`status` = 1 ORDER BY restaurant_id ASC, created_at DESC LIMIT 1
  [1m[36mPhoto Load (0.4ms)[0m  [1mSELECT `photos`.* FROM `photos` WHERE (restaurant_id = 251 and cover = true and status = 1) LIMIT 1[0m
  [1m[35mPhoto Load (0.3ms)[0m  SELECT `photos`.* FROM `photos` WHERE `photos`.`restaurant_id` = 251 AND `photos`.`status` = 1 ORDER BY restaurant_id ASC, created_at DESC LIMIT 1
  [1m[36mPhoto Load (0.3ms)[0m  [1mSELECT `photos`.* FROM `photos` WHERE (restaurant_id = 250 and cover = true and status = 1) LIMIT 1[0m
  [1m[35mPhoto Load (0.3ms)[0m  SELECT `photos`.* FROM `photos` WHERE `photos`.`restaurant_id` = 250 AND `photos`.`status` = 1 ORDER BY restaurant_id ASC, created_at DESC LIMIT 1
  [1m[36mPhoto Load (0.3ms)[0m  [1mSELECT `photos`.* FROM `photos` WHERE (restaurant_id = 237 and cover = true and status = 1) LIMIT 1[0m
  [1m[35mPhoto Load (0.3ms)[0m  SELECT `photos`.* FROM `photos` WHERE `photos`.`restaurant_id` = 237 AND `photos`.`status` = 1 ORDER BY restaurant_id ASC, created_at DESC LIMIT 1
  [1m[36mPhoto Load (0.3ms)[0m  [1mSELECT `photos`.* FROM `photos` WHERE (restaurant_id = 231 and cover = true and status = 1) LIMIT 1[0m
  [1m[35mPhoto Load (0.3ms)[0m  SELECT `photos`.* FROM `photos` WHERE `photos`.`restaurant_id` = 231 AND `photos`.`status` = 1 ORDER BY restaurant_id ASC, created_at DESC LIMIT 1
  [1m[36mPhoto Load (0.4ms)[0m  [1mSELECT `photos`.* FROM `photos` WHERE (restaurant_id = 222 and cover = true and status = 1) LIMIT 1[0m
  [1m[35mPhoto Load (0.3ms)[0m  SELECT `photos`.* FROM `photos` WHERE `photos`.`restaurant_id` = 222 AND `photos`.`status` = 1 ORDER BY restaurant_id ASC, created_at DESC LIMIT 1
  [1m[36m (0.4ms)[0m  [1mSELECT COUNT(*) FROM `restaurants` [0m
  Rendered restaurants/index.html.erb within layouts/admin (90.0ms)
Completed 200 OK in 99ms (Views: 86.5ms | ActiveRecord: 10.1ms)


Started GET "/admin/restaurants/admin_new" for 127.0.0.1 at 2016-01-16 19:12:47 +0100
Processing by RestaurantsController#admin_new as HTML
  [1m[35mUser Load (0.5ms)[0m  SELECT `users`.* FROM `users` WHERE `users`.`id` = 1 LIMIT 1
  [1m[36m (1.4ms)[0m  [1mSELECT `filters`.id FROM `filters` INNER JOIN `filters_restaurants` ON `filters`.`id` = `filters_restaurants`.`filter_id` WHERE `filters_restaurants`.`restaurant_id` IS NULL[0m
  [1m[35mFilterType Load (0.2ms)[0m  SELECT `filter_types`.* FROM `filter_types` WHERE `filter_types`.`code` = 'hal_status' LIMIT 1
  [1m[36mFilterType Load (0.2ms)[0m  [1mSELECT `filter_types`.* FROM `filter_types` WHERE `filter_types`.`code` = 'price' LIMIT 1[0m
  [1m[35mFilterType Load (0.2ms)[0m  SELECT `filter_types`.* FROM `filter_types` WHERE `filter_types`.`code` = 'cuisine' LIMIT 1
  [1m[36mFilterType Load (0.2ms)[0m  [1mSELECT `filter_types`.* FROM `filter_types` WHERE `filter_types`.`code` = 'alcohol' LIMIT 1[0m
  [1m[35mFilterType Load (0.2ms)[0m  SELECT `filter_types`.* FROM `filter_types` WHERE `filter_types`.`code` = 'features' LIMIT 1
  Rendered restaurants/_googlemap.html.erb (0.6ms)
  [1m[36mFilter Load (0.4ms)[0m  [1mSELECT `filters`.* FROM `filters` WHERE `filters`.`filter_type_id` = 8[0m
  [1m[35mFilter Load (0.4ms)[0m  SELECT `filters`.* FROM `filters` WHERE `filters`.`filter_type_id` = 1 ORDER BY name ASC
  [1m[36mFilter Load (0.2ms)[0m  [1mSELECT `filters`.* FROM `filters` WHERE `filters`.`filter_type_id` = 4[0m
  [1m[35mFilter Load (0.2ms)[0m  SELECT `filters`.* FROM `filters` WHERE `filters`.`filter_type_id` = 6
  [1m[36mFilter Load (0.2ms)[0m  [1mSELECT `filters`.* FROM `filters` WHERE `filters`.`filter_type_id` = 11 AND (code != 'offer')[0m
  Rendered restaurants/_admin_form.html.erb (105.0ms)
  Rendered restaurants/_upload_menu.html.erb (3.5ms)
  Rendered restaurants/_upload_photos.html.erb (2.2ms)
  Rendered restaurants/admin_new.html.erb within layouts/admin (115.3ms)
Completed 200 OK in 202ms (Views: 120.0ms | ActiveRecord: 7.4ms)


Started GET "/photos?r_id=" for 127.0.0.1 at 2016-01-16 19:12:49 +0100
Processing by PhotosController#index as JSON
  Parameters: {"r_id"=>""}
  [1m[35mRestaurant Load (1.7ms)[0m  SELECT `restaurants`.* FROM `restaurants` WHERE `restaurants`.`slug` = '' LIMIT 1
  [1m[36mRestaurant Load (0.2ms)[0m  [1mSELECT `restaurants`.* FROM `restaurants` WHERE `restaurants`.`id` = 0 LIMIT 1[0m
Completed 500 Internal Server Error in 5ms

ActiveRecord::RecordNotFound (Couldn't find Restaurant with id=):
  app/controllers/photos_controller.rb:11:in `index'


  Rendered /Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_dispatch/middleware/templates/rescues/_trace.erb (1.4ms)
  Rendered /Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_dispatch/middleware/templates/rescues/_request_and_response.erb (1.2ms)
  Rendered /Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_dispatch/middleware/templates/rescues/diagnostics.erb within rescues/layout (45.8ms)


Started GET "/admin/collections" for 127.0.0.1 at 2016-01-16 19:12:55 +0100
Processing by CollectionsController#index as HTML
ERROR: compiling _app_views_collections_index_erb___1176938067202427434_70190316995360 RAISED /Users/kevinmuller/halalgems_backend/app/views/collections/index.erb:8: syntax error, unexpected =>, expecting '}'
...er.append=  link_to {:action => 'new'}, class: "btn btn-succ...
...                               ^
/Users/kevinmuller/halalgems_backend/app/views/collections/index.erb:8: syntax error, unexpected tLABEL
...k_to {:action => 'new'}, class: "btn btn-success fa fa-plus-...
...                               ^
/Users/kevinmuller/halalgems_backend/app/views/collections/index.erb:8: syntax error, unexpected keyword_do, expecting keyword_end
...n-success fa fa-plus-circle" do @output_buffer.safe_concat('
...                               ^
/Users/kevinmuller/halalgems_backend/app/views/collections/index.erb:53: syntax error, unexpected keyword_ensure, expecting end-of-input
Function body:           def _app_views_collections_index_erb___1176938067202427434_70190316995360(local_assigns, output_buffer)
            _old_virtual_path, @virtual_path = @virtual_path, "collections/index";_old_output_buffer = @output_buffer;;@output_buffer = output_buffer || ActionView::OutputBuffer.new;@output_buffer.append= ( render 'shared/restaurant_manage_tabs' );@output_buffer.safe_concat('
');@output_buffer.safe_concat('
<div class="row">
  <div class="col-lg-12">
    <h3 id="restaurant_collections" class="title">');@output_buffer.append= (t 'collections.title' );@output_buffer.safe_concat('</h3>

    <span class=\'new-restaurant-button\'>
      ');@output_buffer.append=  link_to {:action => 'new'}, class: "btn btn-success fa fa-plus-circle" do @output_buffer.safe_concat('
');@output_buffer.safe_concat('        <span class="open-san">');@output_buffer.append= ( t('collections.new') );@output_buffer.safe_concat('</span>
');       end 
@output_buffer.safe_concat('    </span>

  </div>
</div>

<table class="table table-condensed table-striped">
  <thead>
  <tr>
    <th style="width: 20%">');@output_buffer.append= ( sort_link @search, :name, "Collection name" );@output_buffer.safe_concat('</th>
    <th style="width: 170px">Image</th>
    <th>');@output_buffer.append= ( sort_link @search, :description, "Description" );@output_buffer.safe_concat('</th>
    <th style="width: 25%">Actions</th>
  </tr>
  </thead>
  <tbody>
');   @collections.each_with_index do |collection, index| 
@output_buffer.safe_concat('      <tr>
        <td>');@output_buffer.append= ( collection.name );@output_buffer.safe_concat('</td>
        <td class="collection_image_column" >
          <img src="');@output_buffer.append= ( collection.image_url );@output_buffer.safe_concat('" alt="');@output_buffer.append= ( collection.name );@output_buffer.safe_concat('" class="jtooltip" title="');@output_buffer.append= ( collection.name );@output_buffer.safe_concat('" />
        </td>
        <td>');@output_buffer.append= ( collection.description );@output_buffer.safe_concat('</td>
        <td>
          <div class="btn-group btn-group-xs">
            ');@output_buffer.append=  link_to edit_collection_path(collection.id), class: "btn btn-default fa fa-edit", title: 'Edit' do @output_buffer.safe_concat('
');@output_buffer.safe_concat('                <span class="open-san">');@output_buffer.append= ( ' Edit' );@output_buffer.safe_concat('</span>
');             end 
@output_buffer.safe_concat('          </div>
        </td>
      </tr>
');   end 
@output_buffer.safe_concat('  </tbody>
</table>
<p>
  ');@output_buffer.append= ( paginate @collections, :theme => "twitter-bootstrap-3");@output_buffer.safe_concat('
');@output_buffer.safe_concat('</p>

<script>
  $(\'.carousel\').carousel({
    interval: false
  })
</script>');@output_buffer.to_s
          ensure
            @virtual_path, @output_buffer = _old_virtual_path, _old_output_buffer
          end

Backtrace: /Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_view/template.rb:297:in `module_eval'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_view/template.rb:297:in `compile'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_view/template.rb:244:in `block in compile!'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_view/template.rb:232:in `synchronize'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_view/template.rb:232:in `compile!'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_view/template.rb:144:in `block in render'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/activesupport-3.2.8/lib/active_support/notifications.rb:125:in `instrument'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_view/template.rb:143:in `render'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_view/renderer/template_renderer.rb:47:in `block (2 levels) in render_template'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_view/renderer/abstract_renderer.rb:38:in `block in instrument'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/activesupport-3.2.8/lib/active_support/notifications.rb:123:in `block in instrument'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/activesupport-3.2.8/lib/active_support/notifications/instrumenter.rb:20:in `instrument'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/activesupport-3.2.8/lib/active_support/notifications.rb:123:in `instrument'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_view/renderer/abstract_renderer.rb:38:in `instrument'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_view/renderer/template_renderer.rb:46:in `block in render_template'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_view/renderer/template_renderer.rb:54:in `render_with_layout'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_view/renderer/template_renderer.rb:45:in `render_template'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_view/renderer/template_renderer.rb:18:in `render'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/newrelic_rpm-3.7.3.204/lib/new_relic/agent/instrumentation/rails3/action_controller.rb:160:in `block in render_with_newrelic'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/newrelic_rpm-3.7.3.204/lib/new_relic/agent/method_tracer.rb:281:in `trace_execution_scoped'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/newrelic_rpm-3.7.3.204/lib/new_relic/agent/instrumentation/rails3/action_controller.rb:159:in `render_with_newrelic'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_view/renderer/renderer.rb:36:in `render_template'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_view/renderer/renderer.rb:17:in `render'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/abstract_controller/rendering.rb:110:in `_render_template'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_controller/metal/streaming.rb:225:in `_render_template'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/abstract_controller/rendering.rb:103:in `render_to_body'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_controller/metal/renderers.rb:28:in `render_to_body'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_controller/metal/compatibility.rb:50:in `render_to_body'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/abstract_controller/rendering.rb:88:in `render'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_controller/metal/rendering.rb:16:in `render'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_controller/metal/instrumentation.rb:40:in `block (2 levels) in render'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/activesupport-3.2.8/lib/active_support/core_ext/benchmark.rb:5:in `block in ms'
/Users/kevinmuller/.rvm/rubies/ruby-2.2.4/lib/ruby/2.2.0/benchmark.rb:303:in `realtime'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/activesupport-3.2.8/lib/active_support/core_ext/benchmark.rb:5:in `ms'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_controller/metal/instrumentation.rb:40:in `block in render'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_controller/metal/instrumentation.rb:83:in `cleanup_view_runtime'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/activerecord-3.2.8/lib/active_record/railties/controller_runtime.rb:24:in `cleanup_view_runtime'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_controller/metal/instrumentation.rb:39:in `render'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/bundler/gems/remotipart-aadc29e996c3/lib/remotipart/render_overrides.rb:14:in `render_with_remotipart'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_controller/metal/implicit_render.rb:10:in `default_render'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_controller/metal/mime_responds.rb:196:in `respond_to'
/Users/kevinmuller/halalgems_backend/app/controllers/collections_controller.rb:20:in `index'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_controller/metal/implicit_render.rb:4:in `send_action'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/abstract_controller/base.rb:167:in `process_action'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_controller/metal/rendering.rb:10:in `process_action'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/abstract_controller/callbacks.rb:18:in `block in process_action'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/activesupport-3.2.8/lib/active_support/callbacks.rb:436:in `_run__1266705099739305916__process_action__2602905206554513600__callbacks'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/activesupport-3.2.8/lib/active_support/callbacks.rb:405:in `__run_callback'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/activesupport-3.2.8/lib/active_support/callbacks.rb:385:in `_run_process_action_callbacks'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/activesupport-3.2.8/lib/active_support/callbacks.rb:81:in `run_callbacks'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/abstract_controller/callbacks.rb:17:in `process_action'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_controller/metal/rescue.rb:29:in `process_action'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_controller/metal/instrumentation.rb:30:in `block in process_action'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/activesupport-3.2.8/lib/active_support/notifications.rb:123:in `block in instrument'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/activesupport-3.2.8/lib/active_support/notifications/instrumenter.rb:20:in `instrument'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/activesupport-3.2.8/lib/active_support/notifications.rb:123:in `instrument'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_controller/metal/instrumentation.rb:29:in `process_action'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_controller/metal/params_wrapper.rb:207:in `process_action'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/activerecord-3.2.8/lib/active_record/railties/controller_runtime.rb:18:in `process_action'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/newrelic_rpm-3.7.3.204/lib/new_relic/agent/instrumentation/rails3/action_controller.rb:38:in `block in process_action'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/newrelic_rpm-3.7.3.204/lib/new_relic/agent/instrumentation/controller_instrumentation.rb:335:in `perform_action_with_newrelic_trace'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/newrelic_rpm-3.7.3.204/lib/new_relic/agent/instrumentation/rails3/action_controller.rb:37:in `process_action'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/abstract_controller/base.rb:121:in `process'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/abstract_controller/rendering.rb:45:in `process'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_controller/metal.rb:203:in `dispatch'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_controller/metal/rack_delegation.rb:14:in `dispatch'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_controller/metal.rb:246:in `block in action'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_dispatch/routing/route_set.rb:73:in `call'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_dispatch/routing/route_set.rb:73:in `dispatch'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_dispatch/routing/route_set.rb:36:in `call'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/journey-1.0.4/lib/journey/router.rb:68:in `block in call'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/journey-1.0.4/lib/journey/router.rb:56:in `each'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/journey-1.0.4/lib/journey/router.rb:56:in `call'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_dispatch/routing/route_set.rb:600:in `call'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/omniauth-1.1.4/lib/omniauth/strategy.rb:184:in `call!'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/omniauth-1.1.4/lib/omniauth/strategy.rb:164:in `call'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/newrelic_rpm-3.7.3.204/lib/new_relic/rack/error_collector.rb:55:in `call'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/newrelic_rpm-3.7.3.204/lib/new_relic/rack/agent_hooks.rb:32:in `call'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/newrelic_rpm-3.7.3.204/lib/new_relic/rack/browser_monitoring.rb:27:in `call'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/newrelic_rpm-3.7.3.204/lib/new_relic/rack/developer_mode.rb:45:in `call'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/galetahub-simple_captcha-0.1.5/lib/simple_captcha/middleware.rb:20:in `call'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/bundler/gems/client_side_validations-a6a515504520/lib/client_side_validations/middleware.rb:21:in `call'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/warden-1.1.1/lib/warden/manager.rb:35:in `block in call'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/warden-1.1.1/lib/warden/manager.rb:34:in `catch'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/warden-1.1.1/lib/warden/manager.rb:34:in `call'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_dispatch/middleware/best_standards_support.rb:17:in `call'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/rack-1.4.5/lib/rack/etag.rb:23:in `call'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/rack-1.4.5/lib/rack/conditionalget.rb:25:in `call'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_dispatch/middleware/head.rb:14:in `call'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/bundler/gems/remotipart-aadc29e996c3/lib/remotipart/middleware.rb:27:in `call'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_dispatch/middleware/params_parser.rb:21:in `call'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_dispatch/middleware/flash.rb:242:in `call'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/rack-1.4.5/lib/rack/session/abstract/id.rb:210:in `context'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/rack-1.4.5/lib/rack/session/abstract/id.rb:205:in `call'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_dispatch/middleware/cookies.rb:339:in `call'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/dragonfly-0.9.15/lib/dragonfly/cookie_monster.rb:9:in `call'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/activerecord-3.2.8/lib/active_record/query_cache.rb:64:in `call'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/activerecord-3.2.8/lib/active_record/connection_adapters/abstract/connection_pool.rb:473:in `call'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_dispatch/middleware/callbacks.rb:28:in `block in call'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/activesupport-3.2.8/lib/active_support/callbacks.rb:405:in `_run__1964689105930070249__call__2247822051254444417__callbacks'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/activesupport-3.2.8/lib/active_support/callbacks.rb:405:in `__run_callback'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/activesupport-3.2.8/lib/active_support/callbacks.rb:385:in `_run_call_callbacks'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/activesupport-3.2.8/lib/active_support/callbacks.rb:81:in `run_callbacks'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_dispatch/middleware/callbacks.rb:27:in `call'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_dispatch/middleware/reloader.rb:65:in `call'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_dispatch/middleware/remote_ip.rb:31:in `call'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_dispatch/middleware/debug_exceptions.rb:16:in `call'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_dispatch/middleware/show_exceptions.rb:56:in `call'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/railties-3.2.8/lib/rails/rack/logger.rb:26:in `call_app'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/railties-3.2.8/lib/rails/rack/logger.rb:16:in `call'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/quiet_assets-1.0.3/lib/quiet_assets.rb:23:in `call_with_quiet_assets'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_dispatch/middleware/request_id.rb:22:in `call'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/rack-1.4.5/lib/rack/methodoverride.rb:21:in `call'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/rack-1.4.5/lib/rack/runtime.rb:17:in `call'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/activesupport-3.2.8/lib/active_support/cache/strategy/local_cache.rb:72:in `call'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/rack-1.4.5/lib/rack/lock.rb:15:in `call'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_dispatch/middleware/static.rb:62:in `call'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/dragonfly-0.9.15/lib/dragonfly/middleware.rb:13:in `call'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/rack-cache-1.2/lib/rack/cache/context.rb:136:in `forward'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/rack-cache-1.2/lib/rack/cache/context.rb:245:in `fetch'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/rack-cache-1.2/lib/rack/cache/context.rb:185:in `lookup'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/rack-cache-1.2/lib/rack/cache/context.rb:66:in `call!'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/rack-cache-1.2/lib/rack/cache/context.rb:51:in `call'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/railties-3.2.8/lib/rails/engine.rb:479:in `call'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/railties-3.2.8/lib/rails/application.rb:223:in `call'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/rack-1.4.5/lib/rack/content_length.rb:14:in `call'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/railties-3.2.8/lib/rails/rack/log_tailer.rb:17:in `call'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/rack-1.4.5/lib/rack/handler/webrick.rb:59:in `service'
/Users/kevinmuller/.rvm/rubies/ruby-2.2.4/lib/ruby/2.2.0/webrick/httpserver.rb:138:in `service'
/Users/kevinmuller/.rvm/rubies/ruby-2.2.4/lib/ruby/2.2.0/webrick/httpserver.rb:94:in `run'
/Users/kevinmuller/.rvm/rubies/ruby-2.2.4/lib/ruby/2.2.0/webrick/server.rb:294:in `block in start_thread'
  Rendered collections/index.erb within layouts/admin (4.1ms)
Completed 500 Internal Server Error in 9ms

ActionView::Template::Error (/Users/kevinmuller/halalgems_backend/app/views/collections/index.erb:8: syntax error, unexpected =>, expecting '}'
...er.append=  link_to {:action => 'new'}, class: "btn btn-succ...
...                               ^
/Users/kevinmuller/halalgems_backend/app/views/collections/index.erb:8: syntax error, unexpected tLABEL
...k_to {:action => 'new'}, class: "btn btn-success fa fa-plus-...
...                               ^
/Users/kevinmuller/halalgems_backend/app/views/collections/index.erb:8: syntax error, unexpected keyword_do, expecting keyword_end
...n-success fa fa-plus-circle" do @output_buffer.safe_concat('
...                               ^
/Users/kevinmuller/halalgems_backend/app/views/collections/index.erb:53: syntax error, unexpected keyword_ensure, expecting end-of-input):
    5:     <h3 id="restaurant_collections" class="title"><%=t 'collections.title' %></h3>
    6: 
    7:     <span class='new-restaurant-button'>
    8:       <%= link_to {:action => 'new'}, class: "btn btn-success fa fa-plus-circle" do %>
    9:         <span class="open-san"><%= t('collections.new') %></span>
    10:       <% end %>
    11:     </span>
  app/controllers/collections_controller.rb:20:in `index'


  Rendered /Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_dispatch/middleware/templates/rescues/_trace.erb (2.0ms)
  Rendered /Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_dispatch/middleware/templates/rescues/_request_and_response.erb (1.1ms)
  Rendered /Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_dispatch/middleware/templates/rescues/template_error.erb within rescues/layout (44.8ms)


Started GET "/admin/collections" for 127.0.0.1 at 2016-01-16 19:13:39 +0100
Processing by CollectionsController#index as HTML
ERROR: compiling _app_views_collections_index_erb___1176938067202427434_70190288089960 RAISED /Users/kevinmuller/halalgems_backend/app/views/collections/index.erb:8: syntax error, unexpected ',', expecting ')'
...=  link_to ({:action => 'new'}, class: "btn btn-success fa f...
...                               ^
/Users/kevinmuller/halalgems_backend/app/views/collections/index.erb:8: syntax error, unexpected ')', expecting keyword_end
...btn-success fa fa-plus-circle") do @output_buffer.safe_conca...
...                               ^
/Users/kevinmuller/halalgems_backend/app/views/collections/index.erb:53: syntax error, unexpected keyword_ensure, expecting end-of-input
Function body:           def _app_views_collections_index_erb___1176938067202427434_70190288089960(local_assigns, output_buffer)
            _old_virtual_path, @virtual_path = @virtual_path, "collections/index";_old_output_buffer = @output_buffer;;@output_buffer = output_buffer || ActionView::OutputBuffer.new;@output_buffer.append= ( render 'shared/restaurant_manage_tabs' );@output_buffer.safe_concat('
');@output_buffer.safe_concat('
<div class="row">
  <div class="col-lg-12">
    <h3 id="restaurant_collections" class="title">');@output_buffer.append= (t 'collections.title' );@output_buffer.safe_concat('</h3>

    <span class=\'new-restaurant-button\'>
      ');@output_buffer.append=  link_to ({:action => 'new'}, class: "btn btn-success fa fa-plus-circle") do @output_buffer.safe_concat('
');@output_buffer.safe_concat('        <span class="open-san">');@output_buffer.append= ( t('collections.new') );@output_buffer.safe_concat('</span>
');       end 
@output_buffer.safe_concat('    </span>

  </div>
</div>

<table class="table table-condensed table-striped">
  <thead>
  <tr>
    <th style="width: 20%">');@output_buffer.append= ( sort_link @search, :name, "Collection name" );@output_buffer.safe_concat('</th>
    <th style="width: 170px">Image</th>
    <th>');@output_buffer.append= ( sort_link @search, :description, "Description" );@output_buffer.safe_concat('</th>
    <th style="width: 25%">Actions</th>
  </tr>
  </thead>
  <tbody>
');   @collections.each_with_index do |collection, index| 
@output_buffer.safe_concat('      <tr>
        <td>');@output_buffer.append= ( collection.name );@output_buffer.safe_concat('</td>
        <td class="collection_image_column" >
          <img src="');@output_buffer.append= ( collection.image_url );@output_buffer.safe_concat('" alt="');@output_buffer.append= ( collection.name );@output_buffer.safe_concat('" class="jtooltip" title="');@output_buffer.append= ( collection.name );@output_buffer.safe_concat('" />
        </td>
        <td>');@output_buffer.append= ( collection.description );@output_buffer.safe_concat('</td>
        <td>
          <div class="btn-group btn-group-xs">
            ');@output_buffer.append=  link_to edit_collection_path(collection.id), class: "btn btn-default fa fa-edit", title: 'Edit' do @output_buffer.safe_concat('
');@output_buffer.safe_concat('                <span class="open-san">');@output_buffer.append= ( ' Edit' );@output_buffer.safe_concat('</span>
');             end 
@output_buffer.safe_concat('          </div>
        </td>
      </tr>
');   end 
@output_buffer.safe_concat('  </tbody>
</table>
<p>
  ');@output_buffer.append= ( paginate @collections, :theme => "twitter-bootstrap-3");@output_buffer.safe_concat('
');@output_buffer.safe_concat('</p>

<script>
  $(\'.carousel\').carousel({
    interval: false
  })
</script>');@output_buffer.to_s
          ensure
            @virtual_path, @output_buffer = _old_virtual_path, _old_output_buffer
          end

Backtrace: /Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_view/template.rb:297:in `module_eval'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_view/template.rb:297:in `compile'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_view/template.rb:244:in `block in compile!'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_view/template.rb:232:in `synchronize'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_view/template.rb:232:in `compile!'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_view/template.rb:144:in `block in render'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/activesupport-3.2.8/lib/active_support/notifications.rb:125:in `instrument'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_view/template.rb:143:in `render'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_view/renderer/template_renderer.rb:47:in `block (2 levels) in render_template'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_view/renderer/abstract_renderer.rb:38:in `block in instrument'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/activesupport-3.2.8/lib/active_support/notifications.rb:123:in `block in instrument'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/activesupport-3.2.8/lib/active_support/notifications/instrumenter.rb:20:in `instrument'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/activesupport-3.2.8/lib/active_support/notifications.rb:123:in `instrument'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_view/renderer/abstract_renderer.rb:38:in `instrument'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_view/renderer/template_renderer.rb:46:in `block in render_template'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_view/renderer/template_renderer.rb:54:in `render_with_layout'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_view/renderer/template_renderer.rb:45:in `render_template'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_view/renderer/template_renderer.rb:18:in `render'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/newrelic_rpm-3.7.3.204/lib/new_relic/agent/instrumentation/rails3/action_controller.rb:160:in `block in render_with_newrelic'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/newrelic_rpm-3.7.3.204/lib/new_relic/agent/method_tracer.rb:281:in `trace_execution_scoped'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/newrelic_rpm-3.7.3.204/lib/new_relic/agent/instrumentation/rails3/action_controller.rb:159:in `render_with_newrelic'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_view/renderer/renderer.rb:36:in `render_template'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_view/renderer/renderer.rb:17:in `render'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/abstract_controller/rendering.rb:110:in `_render_template'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_controller/metal/streaming.rb:225:in `_render_template'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/abstract_controller/rendering.rb:103:in `render_to_body'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_controller/metal/renderers.rb:28:in `render_to_body'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_controller/metal/compatibility.rb:50:in `render_to_body'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/abstract_controller/rendering.rb:88:in `render'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_controller/metal/rendering.rb:16:in `render'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_controller/metal/instrumentation.rb:40:in `block (2 levels) in render'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/activesupport-3.2.8/lib/active_support/core_ext/benchmark.rb:5:in `block in ms'
/Users/kevinmuller/.rvm/rubies/ruby-2.2.4/lib/ruby/2.2.0/benchmark.rb:303:in `realtime'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/activesupport-3.2.8/lib/active_support/core_ext/benchmark.rb:5:in `ms'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_controller/metal/instrumentation.rb:40:in `block in render'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_controller/metal/instrumentation.rb:83:in `cleanup_view_runtime'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/activerecord-3.2.8/lib/active_record/railties/controller_runtime.rb:24:in `cleanup_view_runtime'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_controller/metal/instrumentation.rb:39:in `render'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/bundler/gems/remotipart-aadc29e996c3/lib/remotipart/render_overrides.rb:14:in `render_with_remotipart'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_controller/metal/implicit_render.rb:10:in `default_render'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_controller/metal/mime_responds.rb:196:in `respond_to'
/Users/kevinmuller/halalgems_backend/app/controllers/collections_controller.rb:20:in `index'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_controller/metal/implicit_render.rb:4:in `send_action'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/abstract_controller/base.rb:167:in `process_action'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_controller/metal/rendering.rb:10:in `process_action'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/abstract_controller/callbacks.rb:18:in `block in process_action'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/activesupport-3.2.8/lib/active_support/callbacks.rb:436:in `_run__1266705099739305916__process_action__2602905206554513600__callbacks'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/activesupport-3.2.8/lib/active_support/callbacks.rb:405:in `__run_callback'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/activesupport-3.2.8/lib/active_support/callbacks.rb:385:in `_run_process_action_callbacks'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/activesupport-3.2.8/lib/active_support/callbacks.rb:81:in `run_callbacks'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/abstract_controller/callbacks.rb:17:in `process_action'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_controller/metal/rescue.rb:29:in `process_action'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_controller/metal/instrumentation.rb:30:in `block in process_action'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/activesupport-3.2.8/lib/active_support/notifications.rb:123:in `block in instrument'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/activesupport-3.2.8/lib/active_support/notifications/instrumenter.rb:20:in `instrument'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/activesupport-3.2.8/lib/active_support/notifications.rb:123:in `instrument'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_controller/metal/instrumentation.rb:29:in `process_action'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_controller/metal/params_wrapper.rb:207:in `process_action'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/activerecord-3.2.8/lib/active_record/railties/controller_runtime.rb:18:in `process_action'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/newrelic_rpm-3.7.3.204/lib/new_relic/agent/instrumentation/rails3/action_controller.rb:38:in `block in process_action'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/newrelic_rpm-3.7.3.204/lib/new_relic/agent/instrumentation/controller_instrumentation.rb:335:in `perform_action_with_newrelic_trace'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/newrelic_rpm-3.7.3.204/lib/new_relic/agent/instrumentation/rails3/action_controller.rb:37:in `process_action'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/abstract_controller/base.rb:121:in `process'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/abstract_controller/rendering.rb:45:in `process'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_controller/metal.rb:203:in `dispatch'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_controller/metal/rack_delegation.rb:14:in `dispatch'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_controller/metal.rb:246:in `block in action'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_dispatch/routing/route_set.rb:73:in `call'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_dispatch/routing/route_set.rb:73:in `dispatch'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_dispatch/routing/route_set.rb:36:in `call'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/journey-1.0.4/lib/journey/router.rb:68:in `block in call'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/journey-1.0.4/lib/journey/router.rb:56:in `each'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/journey-1.0.4/lib/journey/router.rb:56:in `call'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_dispatch/routing/route_set.rb:600:in `call'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/omniauth-1.1.4/lib/omniauth/strategy.rb:184:in `call!'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/omniauth-1.1.4/lib/omniauth/strategy.rb:164:in `call'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/newrelic_rpm-3.7.3.204/lib/new_relic/rack/error_collector.rb:55:in `call'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/newrelic_rpm-3.7.3.204/lib/new_relic/rack/agent_hooks.rb:32:in `call'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/newrelic_rpm-3.7.3.204/lib/new_relic/rack/browser_monitoring.rb:27:in `call'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/newrelic_rpm-3.7.3.204/lib/new_relic/rack/developer_mode.rb:45:in `call'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/galetahub-simple_captcha-0.1.5/lib/simple_captcha/middleware.rb:20:in `call'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/bundler/gems/client_side_validations-a6a515504520/lib/client_side_validations/middleware.rb:21:in `call'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/warden-1.1.1/lib/warden/manager.rb:35:in `block in call'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/warden-1.1.1/lib/warden/manager.rb:34:in `catch'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/warden-1.1.1/lib/warden/manager.rb:34:in `call'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_dispatch/middleware/best_standards_support.rb:17:in `call'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/rack-1.4.5/lib/rack/etag.rb:23:in `call'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/rack-1.4.5/lib/rack/conditionalget.rb:25:in `call'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_dispatch/middleware/head.rb:14:in `call'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/bundler/gems/remotipart-aadc29e996c3/lib/remotipart/middleware.rb:27:in `call'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_dispatch/middleware/params_parser.rb:21:in `call'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_dispatch/middleware/flash.rb:242:in `call'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/rack-1.4.5/lib/rack/session/abstract/id.rb:210:in `context'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/rack-1.4.5/lib/rack/session/abstract/id.rb:205:in `call'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_dispatch/middleware/cookies.rb:339:in `call'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/dragonfly-0.9.15/lib/dragonfly/cookie_monster.rb:9:in `call'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/activerecord-3.2.8/lib/active_record/query_cache.rb:64:in `call'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/activerecord-3.2.8/lib/active_record/connection_adapters/abstract/connection_pool.rb:473:in `call'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_dispatch/middleware/callbacks.rb:28:in `block in call'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/activesupport-3.2.8/lib/active_support/callbacks.rb:405:in `_run__1964689105930070249__call__2247822051254444417__callbacks'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/activesupport-3.2.8/lib/active_support/callbacks.rb:405:in `__run_callback'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/activesupport-3.2.8/lib/active_support/callbacks.rb:385:in `_run_call_callbacks'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/activesupport-3.2.8/lib/active_support/callbacks.rb:81:in `run_callbacks'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_dispatch/middleware/callbacks.rb:27:in `call'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_dispatch/middleware/reloader.rb:65:in `call'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_dispatch/middleware/remote_ip.rb:31:in `call'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_dispatch/middleware/debug_exceptions.rb:16:in `call'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_dispatch/middleware/show_exceptions.rb:56:in `call'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/railties-3.2.8/lib/rails/rack/logger.rb:26:in `call_app'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/railties-3.2.8/lib/rails/rack/logger.rb:16:in `call'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/quiet_assets-1.0.3/lib/quiet_assets.rb:23:in `call_with_quiet_assets'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_dispatch/middleware/request_id.rb:22:in `call'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/rack-1.4.5/lib/rack/methodoverride.rb:21:in `call'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/rack-1.4.5/lib/rack/runtime.rb:17:in `call'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/activesupport-3.2.8/lib/active_support/cache/strategy/local_cache.rb:72:in `call'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/rack-1.4.5/lib/rack/lock.rb:15:in `call'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_dispatch/middleware/static.rb:62:in `call'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/dragonfly-0.9.15/lib/dragonfly/middleware.rb:13:in `call'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/rack-cache-1.2/lib/rack/cache/context.rb:136:in `forward'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/rack-cache-1.2/lib/rack/cache/context.rb:245:in `fetch'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/rack-cache-1.2/lib/rack/cache/context.rb:185:in `lookup'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/rack-cache-1.2/lib/rack/cache/context.rb:66:in `call!'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/rack-cache-1.2/lib/rack/cache/context.rb:51:in `call'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/railties-3.2.8/lib/rails/engine.rb:479:in `call'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/railties-3.2.8/lib/rails/application.rb:223:in `call'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/rack-1.4.5/lib/rack/content_length.rb:14:in `call'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/railties-3.2.8/lib/rails/rack/log_tailer.rb:17:in `call'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/rack-1.4.5/lib/rack/handler/webrick.rb:59:in `service'
/Users/kevinmuller/.rvm/rubies/ruby-2.2.4/lib/ruby/2.2.0/webrick/httpserver.rb:138:in `service'
/Users/kevinmuller/.rvm/rubies/ruby-2.2.4/lib/ruby/2.2.0/webrick/httpserver.rb:94:in `run'
/Users/kevinmuller/.rvm/rubies/ruby-2.2.4/lib/ruby/2.2.0/webrick/server.rb:294:in `block in start_thread'
  Rendered collections/index.erb within layouts/admin (1.3ms)
Completed 500 Internal Server Error in 6ms

ActionView::Template::Error (/Users/kevinmuller/halalgems_backend/app/views/collections/index.erb:8: syntax error, unexpected ',', expecting ')'
...=  link_to ({:action => 'new'}, class: "btn btn-success fa f...
...                               ^
/Users/kevinmuller/halalgems_backend/app/views/collections/index.erb:8: syntax error, unexpected ')', expecting keyword_end
...btn-success fa fa-plus-circle") do @output_buffer.safe_conca...
...                               ^
/Users/kevinmuller/halalgems_backend/app/views/collections/index.erb:53: syntax error, unexpected keyword_ensure, expecting end-of-input):
    5:     <h3 id="restaurant_collections" class="title"><%=t 'collections.title' %></h3>
    6: 
    7:     <span class='new-restaurant-button'>
    8:       <%= link_to ({:action => 'new'}, class: "btn btn-success fa fa-plus-circle") do %>
    9:         <span class="open-san"><%= t('collections.new') %></span>
    10:       <% end %>
    11:     </span>
  app/controllers/collections_controller.rb:20:in `index'


  Rendered /Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_dispatch/middleware/templates/rescues/_trace.erb (1.3ms)
  Rendered /Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_dispatch/middleware/templates/rescues/_request_and_response.erb (0.9ms)
  Rendered /Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_dispatch/middleware/templates/rescues/template_error.erb within rescues/layout (41.9ms)


Started GET "/admin/collections" for 127.0.0.1 at 2016-01-16 19:22:26 +0100
Processing by CollectionsController#index as HTML
ERROR: compiling _app_views_collections_index_erb___1176938067202427434_70190270955860 RAISED /Users/kevinmuller/halalgems_backend/app/views/collections/index.erb:8: syntax error, unexpected ',', expecting ')'
...=  link_to ({:action => 'new'}, {:class=> "btn btn-success f...
...                               ^
/Users/kevinmuller/halalgems_backend/app/views/collections/index.erb:8: syntax error, unexpected '}', expecting keyword_end
...btn-success fa fa-plus-circle"}) do @output_buffer.safe_conc...
...                               ^
/Users/kevinmuller/halalgems_backend/app/views/collections/index.erb:53: syntax error, unexpected keyword_ensure, expecting end-of-input
Function body:           def _app_views_collections_index_erb___1176938067202427434_70190270955860(local_assigns, output_buffer)
            _old_virtual_path, @virtual_path = @virtual_path, "collections/index";_old_output_buffer = @output_buffer;;@output_buffer = output_buffer || ActionView::OutputBuffer.new;@output_buffer.append= ( render 'shared/restaurant_manage_tabs' );@output_buffer.safe_concat('
');@output_buffer.safe_concat('
<div class="row">
  <div class="col-lg-12">
    <h3 id="restaurant_collections" class="title">');@output_buffer.append= (t 'collections.title' );@output_buffer.safe_concat('</h3>

    <span class=\'new-restaurant-button\'>
      ');@output_buffer.append=  link_to ({:action => 'new'}, {:class=> "btn btn-success fa fa-plus-circle"}) do @output_buffer.safe_concat('
');@output_buffer.safe_concat('        <span class="open-san">');@output_buffer.append= ( t('collections.new') );@output_buffer.safe_concat('</span>
');       end 
@output_buffer.safe_concat('    </span>

  </div>
</div>

<table class="table table-condensed table-striped">
  <thead>
  <tr>
    <th style="width: 20%">');@output_buffer.append= ( sort_link @search, :name, "Collection name" );@output_buffer.safe_concat('</th>
    <th style="width: 170px">Image</th>
    <th>');@output_buffer.append= ( sort_link @search, :description, "Description" );@output_buffer.safe_concat('</th>
    <th style="width: 25%">Actions</th>
  </tr>
  </thead>
  <tbody>
');   @collections.each_with_index do |collection, index| 
@output_buffer.safe_concat('      <tr>
        <td>');@output_buffer.append= ( collection.name );@output_buffer.safe_concat('</td>
        <td class="collection_image_column" >
          <img src="');@output_buffer.append= ( collection.image_url );@output_buffer.safe_concat('" alt="');@output_buffer.append= ( collection.name );@output_buffer.safe_concat('" class="jtooltip" title="');@output_buffer.append= ( collection.name );@output_buffer.safe_concat('" />
        </td>
        <td>');@output_buffer.append= ( collection.description );@output_buffer.safe_concat('</td>
        <td>
          <div class="btn-group btn-group-xs">
            ');@output_buffer.append=  link_to edit_collection_path(collection.id), class: "btn btn-default fa fa-edit", title: 'Edit' do @output_buffer.safe_concat('
');@output_buffer.safe_concat('                <span class="open-san">');@output_buffer.append= ( ' Edit' );@output_buffer.safe_concat('</span>
');             end 
@output_buffer.safe_concat('          </div>
        </td>
      </tr>
');   end 
@output_buffer.safe_concat('  </tbody>
</table>
<p>
  ');@output_buffer.append= ( paginate @collections, :theme => "twitter-bootstrap-3");@output_buffer.safe_concat('
');@output_buffer.safe_concat('</p>

<script>
  $(\'.carousel\').carousel({
    interval: false
  })
</script>');@output_buffer.to_s
          ensure
            @virtual_path, @output_buffer = _old_virtual_path, _old_output_buffer
          end

Backtrace: /Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_view/template.rb:297:in `module_eval'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_view/template.rb:297:in `compile'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_view/template.rb:244:in `block in compile!'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_view/template.rb:232:in `synchronize'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_view/template.rb:232:in `compile!'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_view/template.rb:144:in `block in render'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/activesupport-3.2.8/lib/active_support/notifications.rb:125:in `instrument'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_view/template.rb:143:in `render'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_view/renderer/template_renderer.rb:47:in `block (2 levels) in render_template'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_view/renderer/abstract_renderer.rb:38:in `block in instrument'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/activesupport-3.2.8/lib/active_support/notifications.rb:123:in `block in instrument'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/activesupport-3.2.8/lib/active_support/notifications/instrumenter.rb:20:in `instrument'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/activesupport-3.2.8/lib/active_support/notifications.rb:123:in `instrument'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_view/renderer/abstract_renderer.rb:38:in `instrument'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_view/renderer/template_renderer.rb:46:in `block in render_template'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_view/renderer/template_renderer.rb:54:in `render_with_layout'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_view/renderer/template_renderer.rb:45:in `render_template'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_view/renderer/template_renderer.rb:18:in `render'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/newrelic_rpm-3.7.3.204/lib/new_relic/agent/instrumentation/rails3/action_controller.rb:160:in `block in render_with_newrelic'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/newrelic_rpm-3.7.3.204/lib/new_relic/agent/method_tracer.rb:281:in `trace_execution_scoped'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/newrelic_rpm-3.7.3.204/lib/new_relic/agent/instrumentation/rails3/action_controller.rb:159:in `render_with_newrelic'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_view/renderer/renderer.rb:36:in `render_template'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_view/renderer/renderer.rb:17:in `render'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/abstract_controller/rendering.rb:110:in `_render_template'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_controller/metal/streaming.rb:225:in `_render_template'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/abstract_controller/rendering.rb:103:in `render_to_body'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_controller/metal/renderers.rb:28:in `render_to_body'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_controller/metal/compatibility.rb:50:in `render_to_body'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/abstract_controller/rendering.rb:88:in `render'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_controller/metal/rendering.rb:16:in `render'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_controller/metal/instrumentation.rb:40:in `block (2 levels) in render'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/activesupport-3.2.8/lib/active_support/core_ext/benchmark.rb:5:in `block in ms'
/Users/kevinmuller/.rvm/rubies/ruby-2.2.4/lib/ruby/2.2.0/benchmark.rb:303:in `realtime'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/activesupport-3.2.8/lib/active_support/core_ext/benchmark.rb:5:in `ms'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_controller/metal/instrumentation.rb:40:in `block in render'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_controller/metal/instrumentation.rb:83:in `cleanup_view_runtime'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/activerecord-3.2.8/lib/active_record/railties/controller_runtime.rb:24:in `cleanup_view_runtime'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_controller/metal/instrumentation.rb:39:in `render'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/bundler/gems/remotipart-aadc29e996c3/lib/remotipart/render_overrides.rb:14:in `render_with_remotipart'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_controller/metal/implicit_render.rb:10:in `default_render'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_controller/metal/mime_responds.rb:196:in `respond_to'
/Users/kevinmuller/halalgems_backend/app/controllers/collections_controller.rb:20:in `index'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_controller/metal/implicit_render.rb:4:in `send_action'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/abstract_controller/base.rb:167:in `process_action'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_controller/metal/rendering.rb:10:in `process_action'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/abstract_controller/callbacks.rb:18:in `block in process_action'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/activesupport-3.2.8/lib/active_support/callbacks.rb:436:in `_run__1266705099739305916__process_action__2602905206554513600__callbacks'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/activesupport-3.2.8/lib/active_support/callbacks.rb:405:in `__run_callback'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/activesupport-3.2.8/lib/active_support/callbacks.rb:385:in `_run_process_action_callbacks'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/activesupport-3.2.8/lib/active_support/callbacks.rb:81:in `run_callbacks'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/abstract_controller/callbacks.rb:17:in `process_action'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_controller/metal/rescue.rb:29:in `process_action'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_controller/metal/instrumentation.rb:30:in `block in process_action'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/activesupport-3.2.8/lib/active_support/notifications.rb:123:in `block in instrument'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/activesupport-3.2.8/lib/active_support/notifications/instrumenter.rb:20:in `instrument'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/activesupport-3.2.8/lib/active_support/notifications.rb:123:in `instrument'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_controller/metal/instrumentation.rb:29:in `process_action'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_controller/metal/params_wrapper.rb:207:in `process_action'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/activerecord-3.2.8/lib/active_record/railties/controller_runtime.rb:18:in `process_action'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/newrelic_rpm-3.7.3.204/lib/new_relic/agent/instrumentation/rails3/action_controller.rb:38:in `block in process_action'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/newrelic_rpm-3.7.3.204/lib/new_relic/agent/instrumentation/controller_instrumentation.rb:335:in `perform_action_with_newrelic_trace'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/newrelic_rpm-3.7.3.204/lib/new_relic/agent/instrumentation/rails3/action_controller.rb:37:in `process_action'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/abstract_controller/base.rb:121:in `process'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/abstract_controller/rendering.rb:45:in `process'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_controller/metal.rb:203:in `dispatch'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_controller/metal/rack_delegation.rb:14:in `dispatch'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_controller/metal.rb:246:in `block in action'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_dispatch/routing/route_set.rb:73:in `call'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_dispatch/routing/route_set.rb:73:in `dispatch'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_dispatch/routing/route_set.rb:36:in `call'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/journey-1.0.4/lib/journey/router.rb:68:in `block in call'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/journey-1.0.4/lib/journey/router.rb:56:in `each'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/journey-1.0.4/lib/journey/router.rb:56:in `call'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_dispatch/routing/route_set.rb:600:in `call'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/omniauth-1.1.4/lib/omniauth/strategy.rb:184:in `call!'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/omniauth-1.1.4/lib/omniauth/strategy.rb:164:in `call'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/newrelic_rpm-3.7.3.204/lib/new_relic/rack/error_collector.rb:55:in `call'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/newrelic_rpm-3.7.3.204/lib/new_relic/rack/agent_hooks.rb:32:in `call'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/newrelic_rpm-3.7.3.204/lib/new_relic/rack/browser_monitoring.rb:27:in `call'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/newrelic_rpm-3.7.3.204/lib/new_relic/rack/developer_mode.rb:45:in `call'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/galetahub-simple_captcha-0.1.5/lib/simple_captcha/middleware.rb:20:in `call'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/bundler/gems/client_side_validations-a6a515504520/lib/client_side_validations/middleware.rb:21:in `call'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/warden-1.1.1/lib/warden/manager.rb:35:in `block in call'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/warden-1.1.1/lib/warden/manager.rb:34:in `catch'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/warden-1.1.1/lib/warden/manager.rb:34:in `call'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_dispatch/middleware/best_standards_support.rb:17:in `call'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/rack-1.4.5/lib/rack/etag.rb:23:in `call'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/rack-1.4.5/lib/rack/conditionalget.rb:25:in `call'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_dispatch/middleware/head.rb:14:in `call'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/bundler/gems/remotipart-aadc29e996c3/lib/remotipart/middleware.rb:27:in `call'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_dispatch/middleware/params_parser.rb:21:in `call'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_dispatch/middleware/flash.rb:242:in `call'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/rack-1.4.5/lib/rack/session/abstract/id.rb:210:in `context'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/rack-1.4.5/lib/rack/session/abstract/id.rb:205:in `call'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_dispatch/middleware/cookies.rb:339:in `call'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/dragonfly-0.9.15/lib/dragonfly/cookie_monster.rb:9:in `call'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/activerecord-3.2.8/lib/active_record/query_cache.rb:64:in `call'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/activerecord-3.2.8/lib/active_record/connection_adapters/abstract/connection_pool.rb:473:in `call'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_dispatch/middleware/callbacks.rb:28:in `block in call'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/activesupport-3.2.8/lib/active_support/callbacks.rb:405:in `_run__1964689105930070249__call__2247822051254444417__callbacks'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/activesupport-3.2.8/lib/active_support/callbacks.rb:405:in `__run_callback'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/activesupport-3.2.8/lib/active_support/callbacks.rb:385:in `_run_call_callbacks'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/activesupport-3.2.8/lib/active_support/callbacks.rb:81:in `run_callbacks'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_dispatch/middleware/callbacks.rb:27:in `call'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_dispatch/middleware/reloader.rb:65:in `call'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_dispatch/middleware/remote_ip.rb:31:in `call'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_dispatch/middleware/debug_exceptions.rb:16:in `call'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_dispatch/middleware/show_exceptions.rb:56:in `call'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/railties-3.2.8/lib/rails/rack/logger.rb:26:in `call_app'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/railties-3.2.8/lib/rails/rack/logger.rb:16:in `call'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/quiet_assets-1.0.3/lib/quiet_assets.rb:23:in `call_with_quiet_assets'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_dispatch/middleware/request_id.rb:22:in `call'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/rack-1.4.5/lib/rack/methodoverride.rb:21:in `call'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/rack-1.4.5/lib/rack/runtime.rb:17:in `call'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/activesupport-3.2.8/lib/active_support/cache/strategy/local_cache.rb:72:in `call'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/rack-1.4.5/lib/rack/lock.rb:15:in `call'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_dispatch/middleware/static.rb:62:in `call'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/dragonfly-0.9.15/lib/dragonfly/middleware.rb:13:in `call'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/rack-cache-1.2/lib/rack/cache/context.rb:136:in `forward'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/rack-cache-1.2/lib/rack/cache/context.rb:245:in `fetch'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/rack-cache-1.2/lib/rack/cache/context.rb:185:in `lookup'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/rack-cache-1.2/lib/rack/cache/context.rb:66:in `call!'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/rack-cache-1.2/lib/rack/cache/context.rb:51:in `call'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/railties-3.2.8/lib/rails/engine.rb:479:in `call'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/railties-3.2.8/lib/rails/application.rb:223:in `call'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/rack-1.4.5/lib/rack/content_length.rb:14:in `call'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/railties-3.2.8/lib/rails/rack/log_tailer.rb:17:in `call'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/rack-1.4.5/lib/rack/handler/webrick.rb:59:in `service'
/Users/kevinmuller/.rvm/rubies/ruby-2.2.4/lib/ruby/2.2.0/webrick/httpserver.rb:138:in `service'
/Users/kevinmuller/.rvm/rubies/ruby-2.2.4/lib/ruby/2.2.0/webrick/httpserver.rb:94:in `run'
/Users/kevinmuller/.rvm/rubies/ruby-2.2.4/lib/ruby/2.2.0/webrick/server.rb:294:in `block in start_thread'
  Rendered collections/index.erb within layouts/admin (1.3ms)
Completed 500 Internal Server Error in 14ms

ActionView::Template::Error (/Users/kevinmuller/halalgems_backend/app/views/collections/index.erb:8: syntax error, unexpected ',', expecting ')'
...=  link_to ({:action => 'new'}, {:class=> "btn btn-success f...
...                               ^
/Users/kevinmuller/halalgems_backend/app/views/collections/index.erb:8: syntax error, unexpected '}', expecting keyword_end
...btn-success fa fa-plus-circle"}) do @output_buffer.safe_conc...
...                               ^
/Users/kevinmuller/halalgems_backend/app/views/collections/index.erb:53: syntax error, unexpected keyword_ensure, expecting end-of-input):
    5:     <h3 id="restaurant_collections" class="title"><%=t 'collections.title' %></h3>
    6: 
    7:     <span class='new-restaurant-button'>
    8:       <%= link_to ({:action => 'new'}, {:class=> "btn btn-success fa fa-plus-circle"}) do %>
    9:         <span class="open-san"><%= t('collections.new') %></span>
    10:       <% end %>
    11:     </span>
  app/controllers/collections_controller.rb:20:in `index'


  Rendered /Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_dispatch/middleware/templates/rescues/_trace.erb (5.6ms)
  Rendered /Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_dispatch/middleware/templates/rescues/_request_and_response.erb (2.4ms)
  Rendered /Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_dispatch/middleware/templates/rescues/template_error.erb within rescues/layout (49.4ms)


Started GET "/admin/restaurants" for 127.0.0.1 at 2016-01-16 19:22:30 +0100
Processing by RestaurantsController#index as HTML
  [1m[35mUser Load (0.4ms)[0m  SELECT `users`.* FROM `users` WHERE `users`.`id` = 1 LIMIT 1
  Rendered shared/_restaurant_manage_tabs.html.erb (0.8ms)
  Rendered restaurants/_condition_fields.html.erb (13.5ms)
  [1m[36mRestaurant Load (0.8ms)[0m  [1mSELECT `restaurants`.* FROM `restaurants` ORDER BY disabled ASC,created_at DESC LIMIT 12 OFFSET 0[0m
  [1m[35mPhoto Load (0.4ms)[0m  SELECT `photos`.* FROM `photos` WHERE (restaurant_id = 1057 and cover = true and status = 1) LIMIT 1
  [1m[36mPhoto Load (0.3ms)[0m  [1mSELECT `photos`.* FROM `photos` WHERE `photos`.`restaurant_id` = 1057 AND `photos`.`status` = 1 ORDER BY restaurant_id ASC, created_at DESC LIMIT 1[0m
  [1m[35mPhoto Load (0.4ms)[0m  SELECT `photos`.* FROM `photos` WHERE (restaurant_id = 903 and cover = true and status = 1) LIMIT 1
  [1m[36mPhoto Load (0.3ms)[0m  [1mSELECT `photos`.* FROM `photos` WHERE `photos`.`restaurant_id` = 903 AND `photos`.`status` = 1 ORDER BY restaurant_id ASC, created_at DESC LIMIT 1[0m
  [1m[35mPhoto Load (0.3ms)[0m  SELECT `photos`.* FROM `photos` WHERE (restaurant_id = 876 and cover = true and status = 1) LIMIT 1
  [1m[36mPhoto Load (0.3ms)[0m  [1mSELECT `photos`.* FROM `photos` WHERE `photos`.`restaurant_id` = 876 AND `photos`.`status` = 1 ORDER BY restaurant_id ASC, created_at DESC LIMIT 1[0m
  [1m[35mPhoto Load (0.5ms)[0m  SELECT `photos`.* FROM `photos` WHERE (restaurant_id = 851 and cover = true and status = 1) LIMIT 1
  [1m[36mPhoto Load (0.4ms)[0m  [1mSELECT `photos`.* FROM `photos` WHERE `photos`.`restaurant_id` = 851 AND `photos`.`status` = 1 ORDER BY restaurant_id ASC, created_at DESC LIMIT 1[0m
  [1m[35mPhoto Load (0.4ms)[0m  SELECT `photos`.* FROM `photos` WHERE (restaurant_id = 693 and cover = true and status = 1) LIMIT 1
  [1m[36mPhoto Load (0.3ms)[0m  [1mSELECT `photos`.* FROM `photos` WHERE `photos`.`restaurant_id` = 693 AND `photos`.`status` = 1 ORDER BY restaurant_id ASC, created_at DESC LIMIT 1[0m
  [1m[35mPhoto Load (0.4ms)[0m  SELECT `photos`.* FROM `photos` WHERE (restaurant_id = 686 and cover = true and status = 1) LIMIT 1
  [1m[36mPhoto Load (0.3ms)[0m  [1mSELECT `photos`.* FROM `photos` WHERE `photos`.`restaurant_id` = 686 AND `photos`.`status` = 1 ORDER BY restaurant_id ASC, created_at DESC LIMIT 1[0m
  [1m[35mPhoto Load (0.3ms)[0m  SELECT `photos`.* FROM `photos` WHERE (restaurant_id = 669 and cover = true and status = 1) LIMIT 1
  [1m[36mPhoto Load (0.3ms)[0m  [1mSELECT `photos`.* FROM `photos` WHERE `photos`.`restaurant_id` = 669 AND `photos`.`status` = 1 ORDER BY restaurant_id ASC, created_at DESC LIMIT 1[0m
  [1m[35mPhoto Load (0.3ms)[0m  SELECT `photos`.* FROM `photos` WHERE (restaurant_id = 251 and cover = true and status = 1) LIMIT 1
  [1m[36mPhoto Load (0.3ms)[0m  [1mSELECT `photos`.* FROM `photos` WHERE `photos`.`restaurant_id` = 251 AND `photos`.`status` = 1 ORDER BY restaurant_id ASC, created_at DESC LIMIT 1[0m
  [1m[35mPhoto Load (0.3ms)[0m  SELECT `photos`.* FROM `photos` WHERE (restaurant_id = 250 and cover = true and status = 1) LIMIT 1
  [1m[36mPhoto Load (0.3ms)[0m  [1mSELECT `photos`.* FROM `photos` WHERE `photos`.`restaurant_id` = 250 AND `photos`.`status` = 1 ORDER BY restaurant_id ASC, created_at DESC LIMIT 1[0m
  [1m[35mPhoto Load (0.3ms)[0m  SELECT `photos`.* FROM `photos` WHERE (restaurant_id = 237 and cover = true and status = 1) LIMIT 1
  [1m[36mPhoto Load (0.3ms)[0m  [1mSELECT `photos`.* FROM `photos` WHERE `photos`.`restaurant_id` = 237 AND `photos`.`status` = 1 ORDER BY restaurant_id ASC, created_at DESC LIMIT 1[0m
  [1m[35mPhoto Load (0.3ms)[0m  SELECT `photos`.* FROM `photos` WHERE (restaurant_id = 231 and cover = true and status = 1) LIMIT 1
  [1m[36mPhoto Load (0.3ms)[0m  [1mSELECT `photos`.* FROM `photos` WHERE `photos`.`restaurant_id` = 231 AND `photos`.`status` = 1 ORDER BY restaurant_id ASC, created_at DESC LIMIT 1[0m
  [1m[35mPhoto Load (0.4ms)[0m  SELECT `photos`.* FROM `photos` WHERE (restaurant_id = 222 and cover = true and status = 1) LIMIT 1
  [1m[36mPhoto Load (0.5ms)[0m  [1mSELECT `photos`.* FROM `photos` WHERE `photos`.`restaurant_id` = 222 AND `photos`.`status` = 1 ORDER BY restaurant_id ASC, created_at DESC LIMIT 1[0m
  [1m[35m (0.3ms)[0m  SELECT COUNT(*) FROM `restaurants` 
  Rendered restaurants/index.html.erb within layouts/admin (121.4ms)
Completed 200 OK in 133ms (Views: 118.4ms | ActiveRecord: 9.8ms)


Started GET "/admin/collections" for 127.0.0.1 at 2016-01-16 19:22:31 +0100
Processing by CollectionsController#index as HTML
ERROR: compiling _app_views_collections_index_erb___1176938067202427434_70190270955860 RAISED /Users/kevinmuller/halalgems_backend/app/views/collections/index.erb:8: syntax error, unexpected ',', expecting ')'
...=  link_to ({:action => 'new'}, {:class=> "btn btn-success f...
...                               ^
/Users/kevinmuller/halalgems_backend/app/views/collections/index.erb:8: syntax error, unexpected '}', expecting keyword_end
...btn-success fa fa-plus-circle"}) do @output_buffer.safe_conc...
...                               ^
/Users/kevinmuller/halalgems_backend/app/views/collections/index.erb:53: syntax error, unexpected keyword_ensure, expecting end-of-input
Function body:           def _app_views_collections_index_erb___1176938067202427434_70190270955860(local_assigns, output_buffer)
            _old_virtual_path, @virtual_path = @virtual_path, "collections/index";_old_output_buffer = @output_buffer;;@output_buffer = output_buffer || ActionView::OutputBuffer.new;@output_buffer.append= ( render 'shared/restaurant_manage_tabs' );@output_buffer.safe_concat('
');@output_buffer.safe_concat('
<div class="row">
  <div class="col-lg-12">
    <h3 id="restaurant_collections" class="title">');@output_buffer.append= (t 'collections.title' );@output_buffer.safe_concat('</h3>

    <span class=\'new-restaurant-button\'>
      ');@output_buffer.append=  link_to ({:action => 'new'}, {:class=> "btn btn-success fa fa-plus-circle"}) do @output_buffer.safe_concat('
');@output_buffer.safe_concat('        <span class="open-san">');@output_buffer.append= ( t('collections.new') );@output_buffer.safe_concat('</span>
');       end 
@output_buffer.safe_concat('    </span>

  </div>
</div>

<table class="table table-condensed table-striped">
  <thead>
  <tr>
    <th style="width: 20%">');@output_buffer.append= ( sort_link @search, :name, "Collection name" );@output_buffer.safe_concat('</th>
    <th style="width: 170px">Image</th>
    <th>');@output_buffer.append= ( sort_link @search, :description, "Description" );@output_buffer.safe_concat('</th>
    <th style="width: 25%">Actions</th>
  </tr>
  </thead>
  <tbody>
');   @collections.each_with_index do |collection, index| 
@output_buffer.safe_concat('      <tr>
        <td>');@output_buffer.append= ( collection.name );@output_buffer.safe_concat('</td>
        <td class="collection_image_column" >
          <img src="');@output_buffer.append= ( collection.image_url );@output_buffer.safe_concat('" alt="');@output_buffer.append= ( collection.name );@output_buffer.safe_concat('" class="jtooltip" title="');@output_buffer.append= ( collection.name );@output_buffer.safe_concat('" />
        </td>
        <td>');@output_buffer.append= ( collection.description );@output_buffer.safe_concat('</td>
        <td>
          <div class="btn-group btn-group-xs">
            ');@output_buffer.append=  link_to edit_collection_path(collection.id), class: "btn btn-default fa fa-edit", title: 'Edit' do @output_buffer.safe_concat('
');@output_buffer.safe_concat('                <span class="open-san">');@output_buffer.append= ( ' Edit' );@output_buffer.safe_concat('</span>
');             end 
@output_buffer.safe_concat('          </div>
        </td>
      </tr>
');   end 
@output_buffer.safe_concat('  </tbody>
</table>
<p>
  ');@output_buffer.append= ( paginate @collections, :theme => "twitter-bootstrap-3");@output_buffer.safe_concat('
');@output_buffer.safe_concat('</p>

<script>
  $(\'.carousel\').carousel({
    interval: false
  })
</script>');@output_buffer.to_s
          ensure
            @virtual_path, @output_buffer = _old_virtual_path, _old_output_buffer
          end

Backtrace: /Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_view/template.rb:297:in `module_eval'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_view/template.rb:297:in `compile'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_view/template.rb:244:in `block in compile!'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_view/template.rb:232:in `synchronize'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_view/template.rb:232:in `compile!'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_view/template.rb:144:in `block in render'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/activesupport-3.2.8/lib/active_support/notifications.rb:125:in `instrument'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_view/template.rb:143:in `render'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_view/renderer/template_renderer.rb:47:in `block (2 levels) in render_template'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_view/renderer/abstract_renderer.rb:38:in `block in instrument'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/activesupport-3.2.8/lib/active_support/notifications.rb:123:in `block in instrument'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/activesupport-3.2.8/lib/active_support/notifications/instrumenter.rb:20:in `instrument'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/activesupport-3.2.8/lib/active_support/notifications.rb:123:in `instrument'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_view/renderer/abstract_renderer.rb:38:in `instrument'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_view/renderer/template_renderer.rb:46:in `block in render_template'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_view/renderer/template_renderer.rb:54:in `render_with_layout'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_view/renderer/template_renderer.rb:45:in `render_template'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_view/renderer/template_renderer.rb:18:in `render'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/newrelic_rpm-3.7.3.204/lib/new_relic/agent/instrumentation/rails3/action_controller.rb:160:in `block in render_with_newrelic'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/newrelic_rpm-3.7.3.204/lib/new_relic/agent/method_tracer.rb:281:in `trace_execution_scoped'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/newrelic_rpm-3.7.3.204/lib/new_relic/agent/instrumentation/rails3/action_controller.rb:159:in `render_with_newrelic'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_view/renderer/renderer.rb:36:in `render_template'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_view/renderer/renderer.rb:17:in `render'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/abstract_controller/rendering.rb:110:in `_render_template'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_controller/metal/streaming.rb:225:in `_render_template'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/abstract_controller/rendering.rb:103:in `render_to_body'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_controller/metal/renderers.rb:28:in `render_to_body'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_controller/metal/compatibility.rb:50:in `render_to_body'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/abstract_controller/rendering.rb:88:in `render'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_controller/metal/rendering.rb:16:in `render'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_controller/metal/instrumentation.rb:40:in `block (2 levels) in render'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/activesupport-3.2.8/lib/active_support/core_ext/benchmark.rb:5:in `block in ms'
/Users/kevinmuller/.rvm/rubies/ruby-2.2.4/lib/ruby/2.2.0/benchmark.rb:303:in `realtime'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/activesupport-3.2.8/lib/active_support/core_ext/benchmark.rb:5:in `ms'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_controller/metal/instrumentation.rb:40:in `block in render'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_controller/metal/instrumentation.rb:83:in `cleanup_view_runtime'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/activerecord-3.2.8/lib/active_record/railties/controller_runtime.rb:24:in `cleanup_view_runtime'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_controller/metal/instrumentation.rb:39:in `render'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/bundler/gems/remotipart-aadc29e996c3/lib/remotipart/render_overrides.rb:14:in `render_with_remotipart'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_controller/metal/implicit_render.rb:10:in `default_render'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_controller/metal/mime_responds.rb:196:in `respond_to'
/Users/kevinmuller/halalgems_backend/app/controllers/collections_controller.rb:20:in `index'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_controller/metal/implicit_render.rb:4:in `send_action'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/abstract_controller/base.rb:167:in `process_action'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_controller/metal/rendering.rb:10:in `process_action'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/abstract_controller/callbacks.rb:18:in `block in process_action'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/activesupport-3.2.8/lib/active_support/callbacks.rb:436:in `_run__1266705099739305916__process_action__2602905206554513600__callbacks'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/activesupport-3.2.8/lib/active_support/callbacks.rb:405:in `__run_callback'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/activesupport-3.2.8/lib/active_support/callbacks.rb:385:in `_run_process_action_callbacks'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/activesupport-3.2.8/lib/active_support/callbacks.rb:81:in `run_callbacks'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/abstract_controller/callbacks.rb:17:in `process_action'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_controller/metal/rescue.rb:29:in `process_action'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_controller/metal/instrumentation.rb:30:in `block in process_action'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/activesupport-3.2.8/lib/active_support/notifications.rb:123:in `block in instrument'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/activesupport-3.2.8/lib/active_support/notifications/instrumenter.rb:20:in `instrument'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/activesupport-3.2.8/lib/active_support/notifications.rb:123:in `instrument'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_controller/metal/instrumentation.rb:29:in `process_action'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_controller/metal/params_wrapper.rb:207:in `process_action'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/activerecord-3.2.8/lib/active_record/railties/controller_runtime.rb:18:in `process_action'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/newrelic_rpm-3.7.3.204/lib/new_relic/agent/instrumentation/rails3/action_controller.rb:38:in `block in process_action'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/newrelic_rpm-3.7.3.204/lib/new_relic/agent/instrumentation/controller_instrumentation.rb:335:in `perform_action_with_newrelic_trace'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/newrelic_rpm-3.7.3.204/lib/new_relic/agent/instrumentation/rails3/action_controller.rb:37:in `process_action'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/abstract_controller/base.rb:121:in `process'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/abstract_controller/rendering.rb:45:in `process'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_controller/metal.rb:203:in `dispatch'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_controller/metal/rack_delegation.rb:14:in `dispatch'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_controller/metal.rb:246:in `block in action'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_dispatch/routing/route_set.rb:73:in `call'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_dispatch/routing/route_set.rb:73:in `dispatch'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_dispatch/routing/route_set.rb:36:in `call'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/journey-1.0.4/lib/journey/router.rb:68:in `block in call'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/journey-1.0.4/lib/journey/router.rb:56:in `each'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/journey-1.0.4/lib/journey/router.rb:56:in `call'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_dispatch/routing/route_set.rb:600:in `call'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/omniauth-1.1.4/lib/omniauth/strategy.rb:184:in `call!'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/omniauth-1.1.4/lib/omniauth/strategy.rb:164:in `call'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/newrelic_rpm-3.7.3.204/lib/new_relic/rack/error_collector.rb:55:in `call'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/newrelic_rpm-3.7.3.204/lib/new_relic/rack/agent_hooks.rb:32:in `call'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/newrelic_rpm-3.7.3.204/lib/new_relic/rack/browser_monitoring.rb:27:in `call'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/newrelic_rpm-3.7.3.204/lib/new_relic/rack/developer_mode.rb:45:in `call'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/galetahub-simple_captcha-0.1.5/lib/simple_captcha/middleware.rb:20:in `call'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/bundler/gems/client_side_validations-a6a515504520/lib/client_side_validations/middleware.rb:21:in `call'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/warden-1.1.1/lib/warden/manager.rb:35:in `block in call'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/warden-1.1.1/lib/warden/manager.rb:34:in `catch'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/warden-1.1.1/lib/warden/manager.rb:34:in `call'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_dispatch/middleware/best_standards_support.rb:17:in `call'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/rack-1.4.5/lib/rack/etag.rb:23:in `call'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/rack-1.4.5/lib/rack/conditionalget.rb:25:in `call'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_dispatch/middleware/head.rb:14:in `call'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/bundler/gems/remotipart-aadc29e996c3/lib/remotipart/middleware.rb:27:in `call'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_dispatch/middleware/params_parser.rb:21:in `call'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_dispatch/middleware/flash.rb:242:in `call'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/rack-1.4.5/lib/rack/session/abstract/id.rb:210:in `context'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/rack-1.4.5/lib/rack/session/abstract/id.rb:205:in `call'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_dispatch/middleware/cookies.rb:339:in `call'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/dragonfly-0.9.15/lib/dragonfly/cookie_monster.rb:9:in `call'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/activerecord-3.2.8/lib/active_record/query_cache.rb:64:in `call'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/activerecord-3.2.8/lib/active_record/connection_adapters/abstract/connection_pool.rb:473:in `call'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_dispatch/middleware/callbacks.rb:28:in `block in call'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/activesupport-3.2.8/lib/active_support/callbacks.rb:405:in `_run__1964689105930070249__call__2247822051254444417__callbacks'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/activesupport-3.2.8/lib/active_support/callbacks.rb:405:in `__run_callback'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/activesupport-3.2.8/lib/active_support/callbacks.rb:385:in `_run_call_callbacks'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/activesupport-3.2.8/lib/active_support/callbacks.rb:81:in `run_callbacks'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_dispatch/middleware/callbacks.rb:27:in `call'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_dispatch/middleware/reloader.rb:65:in `call'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_dispatch/middleware/remote_ip.rb:31:in `call'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_dispatch/middleware/debug_exceptions.rb:16:in `call'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_dispatch/middleware/show_exceptions.rb:56:in `call'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/railties-3.2.8/lib/rails/rack/logger.rb:26:in `call_app'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/railties-3.2.8/lib/rails/rack/logger.rb:16:in `call'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/quiet_assets-1.0.3/lib/quiet_assets.rb:23:in `call_with_quiet_assets'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_dispatch/middleware/request_id.rb:22:in `call'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/rack-1.4.5/lib/rack/methodoverride.rb:21:in `call'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/rack-1.4.5/lib/rack/runtime.rb:17:in `call'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/activesupport-3.2.8/lib/active_support/cache/strategy/local_cache.rb:72:in `call'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/rack-1.4.5/lib/rack/lock.rb:15:in `call'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_dispatch/middleware/static.rb:62:in `call'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/dragonfly-0.9.15/lib/dragonfly/middleware.rb:13:in `call'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/rack-cache-1.2/lib/rack/cache/context.rb:136:in `forward'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/rack-cache-1.2/lib/rack/cache/context.rb:245:in `fetch'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/rack-cache-1.2/lib/rack/cache/context.rb:185:in `lookup'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/rack-cache-1.2/lib/rack/cache/context.rb:66:in `call!'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/rack-cache-1.2/lib/rack/cache/context.rb:51:in `call'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/railties-3.2.8/lib/rails/engine.rb:479:in `call'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/railties-3.2.8/lib/rails/application.rb:223:in `call'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/rack-1.4.5/lib/rack/content_length.rb:14:in `call'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/railties-3.2.8/lib/rails/rack/log_tailer.rb:17:in `call'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/rack-1.4.5/lib/rack/handler/webrick.rb:59:in `service'
/Users/kevinmuller/.rvm/rubies/ruby-2.2.4/lib/ruby/2.2.0/webrick/httpserver.rb:138:in `service'
/Users/kevinmuller/.rvm/rubies/ruby-2.2.4/lib/ruby/2.2.0/webrick/httpserver.rb:94:in `run'
/Users/kevinmuller/.rvm/rubies/ruby-2.2.4/lib/ruby/2.2.0/webrick/server.rb:294:in `block in start_thread'
  Rendered collections/index.erb within layouts/admin (0.8ms)
Completed 500 Internal Server Error in 4ms

ActionView::Template::Error (/Users/kevinmuller/halalgems_backend/app/views/collections/index.erb:8: syntax error, unexpected ',', expecting ')'
...=  link_to ({:action => 'new'}, {:class=> "btn btn-success f...
...                               ^
/Users/kevinmuller/halalgems_backend/app/views/collections/index.erb:8: syntax error, unexpected '}', expecting keyword_end
...btn-success fa fa-plus-circle"}) do @output_buffer.safe_conc...
...                               ^
/Users/kevinmuller/halalgems_backend/app/views/collections/index.erb:53: syntax error, unexpected keyword_ensure, expecting end-of-input):
    5:     <h3 id="restaurant_collections" class="title"><%=t 'collections.title' %></h3>
    6: 
    7:     <span class='new-restaurant-button'>
    8:       <%= link_to ({:action => 'new'}, {:class=> "btn btn-success fa fa-plus-circle"}) do %>
    9:         <span class="open-san"><%= t('collections.new') %></span>
    10:       <% end %>
    11:     </span>
  app/controllers/collections_controller.rb:20:in `index'


  Rendered /Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_dispatch/middleware/templates/rescues/_trace.erb (1.2ms)
  Rendered /Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_dispatch/middleware/templates/rescues/_request_and_response.erb (1.0ms)
  Rendered /Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_dispatch/middleware/templates/rescues/template_error.erb within rescues/layout (41.3ms)


Started GET "/admin/collections" for 127.0.0.1 at 2016-01-16 19:24:20 +0100
Processing by CollectionsController#index as HTML
ERROR: compiling _app_views_collections_index_erb___1176938067202427434_70190317142820 RAISED /Users/kevinmuller/halalgems_backend/app/views/collections/index.erb:8: syntax error, unexpected ',', expecting ')'
...d=  link_to ({action => 'new'}, {class=> "btn btn-success fa...
...                               ^
/Users/kevinmuller/halalgems_backend/app/views/collections/index.erb:8: syntax error, unexpected '}', expecting keyword_end
...btn-success fa fa-plus-circle"}) do @output_buffer.safe_conc...
...                               ^
/Users/kevinmuller/halalgems_backend/app/views/collections/index.erb:53: syntax error, unexpected keyword_ensure, expecting end-of-input
Function body:           def _app_views_collections_index_erb___1176938067202427434_70190317142820(local_assigns, output_buffer)
            _old_virtual_path, @virtual_path = @virtual_path, "collections/index";_old_output_buffer = @output_buffer;;@output_buffer = output_buffer || ActionView::OutputBuffer.new;@output_buffer.append= ( render 'shared/restaurant_manage_tabs' );@output_buffer.safe_concat('
');@output_buffer.safe_concat('
<div class="row">
  <div class="col-lg-12">
    <h3 id="restaurant_collections" class="title">');@output_buffer.append= (t 'collections.title' );@output_buffer.safe_concat('</h3>

    <span class=\'new-restaurant-button\'>
      ');@output_buffer.append=  link_to ({action => 'new'}, {class=> "btn btn-success fa fa-plus-circle"}) do @output_buffer.safe_concat('
');@output_buffer.safe_concat('        <span class="open-san">');@output_buffer.append= ( t('collections.new') );@output_buffer.safe_concat('</span>
');       end 
@output_buffer.safe_concat('    </span>

  </div>
</div>

<table class="table table-condensed table-striped">
  <thead>
  <tr>
    <th style="width: 20%">');@output_buffer.append= ( sort_link @search, :name, "Collection name" );@output_buffer.safe_concat('</th>
    <th style="width: 170px">Image</th>
    <th>');@output_buffer.append= ( sort_link @search, :description, "Description" );@output_buffer.safe_concat('</th>
    <th style="width: 25%">Actions</th>
  </tr>
  </thead>
  <tbody>
');   @collections.each_with_index do |collection, index| 
@output_buffer.safe_concat('      <tr>
        <td>');@output_buffer.append= ( collection.name );@output_buffer.safe_concat('</td>
        <td class="collection_image_column" >
          <img src="');@output_buffer.append= ( collection.image_url );@output_buffer.safe_concat('" alt="');@output_buffer.append= ( collection.name );@output_buffer.safe_concat('" class="jtooltip" title="');@output_buffer.append= ( collection.name );@output_buffer.safe_concat('" />
        </td>
        <td>');@output_buffer.append= ( collection.description );@output_buffer.safe_concat('</td>
        <td>
          <div class="btn-group btn-group-xs">
            ');@output_buffer.append=  link_to edit_collection_path(collection.id), class: "btn btn-default fa fa-edit", title: 'Edit' do @output_buffer.safe_concat('
');@output_buffer.safe_concat('                <span class="open-san">');@output_buffer.append= ( ' Edit' );@output_buffer.safe_concat('</span>
');             end 
@output_buffer.safe_concat('          </div>
        </td>
      </tr>
');   end 
@output_buffer.safe_concat('  </tbody>
</table>
<p>
  ');@output_buffer.append= ( paginate @collections, :theme => "twitter-bootstrap-3");@output_buffer.safe_concat('
');@output_buffer.safe_concat('</p>

<script>
  $(\'.carousel\').carousel({
    interval: false
  })
</script>');@output_buffer.to_s
          ensure
            @virtual_path, @output_buffer = _old_virtual_path, _old_output_buffer
          end

Backtrace: /Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_view/template.rb:297:in `module_eval'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_view/template.rb:297:in `compile'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_view/template.rb:244:in `block in compile!'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_view/template.rb:232:in `synchronize'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_view/template.rb:232:in `compile!'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_view/template.rb:144:in `block in render'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/activesupport-3.2.8/lib/active_support/notifications.rb:125:in `instrument'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_view/template.rb:143:in `render'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_view/renderer/template_renderer.rb:47:in `block (2 levels) in render_template'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_view/renderer/abstract_renderer.rb:38:in `block in instrument'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/activesupport-3.2.8/lib/active_support/notifications.rb:123:in `block in instrument'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/activesupport-3.2.8/lib/active_support/notifications/instrumenter.rb:20:in `instrument'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/activesupport-3.2.8/lib/active_support/notifications.rb:123:in `instrument'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_view/renderer/abstract_renderer.rb:38:in `instrument'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_view/renderer/template_renderer.rb:46:in `block in render_template'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_view/renderer/template_renderer.rb:54:in `render_with_layout'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_view/renderer/template_renderer.rb:45:in `render_template'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_view/renderer/template_renderer.rb:18:in `render'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/newrelic_rpm-3.7.3.204/lib/new_relic/agent/instrumentation/rails3/action_controller.rb:160:in `block in render_with_newrelic'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/newrelic_rpm-3.7.3.204/lib/new_relic/agent/method_tracer.rb:281:in `trace_execution_scoped'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/newrelic_rpm-3.7.3.204/lib/new_relic/agent/instrumentation/rails3/action_controller.rb:159:in `render_with_newrelic'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_view/renderer/renderer.rb:36:in `render_template'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_view/renderer/renderer.rb:17:in `render'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/abstract_controller/rendering.rb:110:in `_render_template'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_controller/metal/streaming.rb:225:in `_render_template'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/abstract_controller/rendering.rb:103:in `render_to_body'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_controller/metal/renderers.rb:28:in `render_to_body'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_controller/metal/compatibility.rb:50:in `render_to_body'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/abstract_controller/rendering.rb:88:in `render'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_controller/metal/rendering.rb:16:in `render'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_controller/metal/instrumentation.rb:40:in `block (2 levels) in render'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/activesupport-3.2.8/lib/active_support/core_ext/benchmark.rb:5:in `block in ms'
/Users/kevinmuller/.rvm/rubies/ruby-2.2.4/lib/ruby/2.2.0/benchmark.rb:303:in `realtime'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/activesupport-3.2.8/lib/active_support/core_ext/benchmark.rb:5:in `ms'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_controller/metal/instrumentation.rb:40:in `block in render'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_controller/metal/instrumentation.rb:83:in `cleanup_view_runtime'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/activerecord-3.2.8/lib/active_record/railties/controller_runtime.rb:24:in `cleanup_view_runtime'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_controller/metal/instrumentation.rb:39:in `render'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/bundler/gems/remotipart-aadc29e996c3/lib/remotipart/render_overrides.rb:14:in `render_with_remotipart'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_controller/metal/implicit_render.rb:10:in `default_render'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_controller/metal/mime_responds.rb:196:in `respond_to'
/Users/kevinmuller/halalgems_backend/app/controllers/collections_controller.rb:20:in `index'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_controller/metal/implicit_render.rb:4:in `send_action'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/abstract_controller/base.rb:167:in `process_action'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_controller/metal/rendering.rb:10:in `process_action'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/abstract_controller/callbacks.rb:18:in `block in process_action'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/activesupport-3.2.8/lib/active_support/callbacks.rb:436:in `_run__1266705099739305916__process_action__2602905206554513600__callbacks'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/activesupport-3.2.8/lib/active_support/callbacks.rb:405:in `__run_callback'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/activesupport-3.2.8/lib/active_support/callbacks.rb:385:in `_run_process_action_callbacks'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/activesupport-3.2.8/lib/active_support/callbacks.rb:81:in `run_callbacks'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/abstract_controller/callbacks.rb:17:in `process_action'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_controller/metal/rescue.rb:29:in `process_action'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_controller/metal/instrumentation.rb:30:in `block in process_action'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/activesupport-3.2.8/lib/active_support/notifications.rb:123:in `block in instrument'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/activesupport-3.2.8/lib/active_support/notifications/instrumenter.rb:20:in `instrument'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/activesupport-3.2.8/lib/active_support/notifications.rb:123:in `instrument'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_controller/metal/instrumentation.rb:29:in `process_action'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_controller/metal/params_wrapper.rb:207:in `process_action'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/activerecord-3.2.8/lib/active_record/railties/controller_runtime.rb:18:in `process_action'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/newrelic_rpm-3.7.3.204/lib/new_relic/agent/instrumentation/rails3/action_controller.rb:38:in `block in process_action'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/newrelic_rpm-3.7.3.204/lib/new_relic/agent/instrumentation/controller_instrumentation.rb:335:in `perform_action_with_newrelic_trace'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/newrelic_rpm-3.7.3.204/lib/new_relic/agent/instrumentation/rails3/action_controller.rb:37:in `process_action'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/abstract_controller/base.rb:121:in `process'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/abstract_controller/rendering.rb:45:in `process'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_controller/metal.rb:203:in `dispatch'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_controller/metal/rack_delegation.rb:14:in `dispatch'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_controller/metal.rb:246:in `block in action'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_dispatch/routing/route_set.rb:73:in `call'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_dispatch/routing/route_set.rb:73:in `dispatch'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_dispatch/routing/route_set.rb:36:in `call'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/journey-1.0.4/lib/journey/router.rb:68:in `block in call'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/journey-1.0.4/lib/journey/router.rb:56:in `each'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/journey-1.0.4/lib/journey/router.rb:56:in `call'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_dispatch/routing/route_set.rb:600:in `call'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/omniauth-1.1.4/lib/omniauth/strategy.rb:184:in `call!'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/omniauth-1.1.4/lib/omniauth/strategy.rb:164:in `call'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/newrelic_rpm-3.7.3.204/lib/new_relic/rack/error_collector.rb:55:in `call'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/newrelic_rpm-3.7.3.204/lib/new_relic/rack/agent_hooks.rb:32:in `call'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/newrelic_rpm-3.7.3.204/lib/new_relic/rack/browser_monitoring.rb:27:in `call'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/newrelic_rpm-3.7.3.204/lib/new_relic/rack/developer_mode.rb:45:in `call'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/galetahub-simple_captcha-0.1.5/lib/simple_captcha/middleware.rb:20:in `call'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/bundler/gems/client_side_validations-a6a515504520/lib/client_side_validations/middleware.rb:21:in `call'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/warden-1.1.1/lib/warden/manager.rb:35:in `block in call'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/warden-1.1.1/lib/warden/manager.rb:34:in `catch'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/warden-1.1.1/lib/warden/manager.rb:34:in `call'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_dispatch/middleware/best_standards_support.rb:17:in `call'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/rack-1.4.5/lib/rack/etag.rb:23:in `call'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/rack-1.4.5/lib/rack/conditionalget.rb:25:in `call'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_dispatch/middleware/head.rb:14:in `call'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/bundler/gems/remotipart-aadc29e996c3/lib/remotipart/middleware.rb:27:in `call'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_dispatch/middleware/params_parser.rb:21:in `call'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_dispatch/middleware/flash.rb:242:in `call'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/rack-1.4.5/lib/rack/session/abstract/id.rb:210:in `context'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/rack-1.4.5/lib/rack/session/abstract/id.rb:205:in `call'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_dispatch/middleware/cookies.rb:339:in `call'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/dragonfly-0.9.15/lib/dragonfly/cookie_monster.rb:9:in `call'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/activerecord-3.2.8/lib/active_record/query_cache.rb:64:in `call'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/activerecord-3.2.8/lib/active_record/connection_adapters/abstract/connection_pool.rb:473:in `call'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_dispatch/middleware/callbacks.rb:28:in `block in call'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/activesupport-3.2.8/lib/active_support/callbacks.rb:405:in `_run__1964689105930070249__call__2247822051254444417__callbacks'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/activesupport-3.2.8/lib/active_support/callbacks.rb:405:in `__run_callback'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/activesupport-3.2.8/lib/active_support/callbacks.rb:385:in `_run_call_callbacks'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/activesupport-3.2.8/lib/active_support/callbacks.rb:81:in `run_callbacks'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_dispatch/middleware/callbacks.rb:27:in `call'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_dispatch/middleware/reloader.rb:65:in `call'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_dispatch/middleware/remote_ip.rb:31:in `call'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_dispatch/middleware/debug_exceptions.rb:16:in `call'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_dispatch/middleware/show_exceptions.rb:56:in `call'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/railties-3.2.8/lib/rails/rack/logger.rb:26:in `call_app'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/railties-3.2.8/lib/rails/rack/logger.rb:16:in `call'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/quiet_assets-1.0.3/lib/quiet_assets.rb:23:in `call_with_quiet_assets'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_dispatch/middleware/request_id.rb:22:in `call'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/rack-1.4.5/lib/rack/methodoverride.rb:21:in `call'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/rack-1.4.5/lib/rack/runtime.rb:17:in `call'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/activesupport-3.2.8/lib/active_support/cache/strategy/local_cache.rb:72:in `call'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/rack-1.4.5/lib/rack/lock.rb:15:in `call'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_dispatch/middleware/static.rb:62:in `call'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/dragonfly-0.9.15/lib/dragonfly/middleware.rb:13:in `call'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/rack-cache-1.2/lib/rack/cache/context.rb:136:in `forward'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/rack-cache-1.2/lib/rack/cache/context.rb:245:in `fetch'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/rack-cache-1.2/lib/rack/cache/context.rb:185:in `lookup'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/rack-cache-1.2/lib/rack/cache/context.rb:66:in `call!'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/rack-cache-1.2/lib/rack/cache/context.rb:51:in `call'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/railties-3.2.8/lib/rails/engine.rb:479:in `call'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/railties-3.2.8/lib/rails/application.rb:223:in `call'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/rack-1.4.5/lib/rack/content_length.rb:14:in `call'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/railties-3.2.8/lib/rails/rack/log_tailer.rb:17:in `call'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/rack-1.4.5/lib/rack/handler/webrick.rb:59:in `service'
/Users/kevinmuller/.rvm/rubies/ruby-2.2.4/lib/ruby/2.2.0/webrick/httpserver.rb:138:in `service'
/Users/kevinmuller/.rvm/rubies/ruby-2.2.4/lib/ruby/2.2.0/webrick/httpserver.rb:94:in `run'
/Users/kevinmuller/.rvm/rubies/ruby-2.2.4/lib/ruby/2.2.0/webrick/server.rb:294:in `block in start_thread'
  Rendered collections/index.erb within layouts/admin (1.4ms)
Completed 500 Internal Server Error in 5ms

ActionView::Template::Error (/Users/kevinmuller/halalgems_backend/app/views/collections/index.erb:8: syntax error, unexpected ',', expecting ')'
...d=  link_to ({action => 'new'}, {class=> "btn btn-success fa...
...                               ^
/Users/kevinmuller/halalgems_backend/app/views/collections/index.erb:8: syntax error, unexpected '}', expecting keyword_end
...btn-success fa fa-plus-circle"}) do @output_buffer.safe_conc...
...                               ^
/Users/kevinmuller/halalgems_backend/app/views/collections/index.erb:53: syntax error, unexpected keyword_ensure, expecting end-of-input):
    5:     <h3 id="restaurant_collections" class="title"><%=t 'collections.title' %></h3>
    6: 
    7:     <span class='new-restaurant-button'>
    8:       <%= link_to ({action => 'new'}, {class=> "btn btn-success fa fa-plus-circle"}) do %>
    9:         <span class="open-san"><%= t('collections.new') %></span>
    10:       <% end %>
    11:     </span>
  app/controllers/collections_controller.rb:20:in `index'


  Rendered /Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_dispatch/middleware/templates/rescues/_trace.erb (1.3ms)
  Rendered /Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_dispatch/middleware/templates/rescues/_request_and_response.erb (0.9ms)
  Rendered /Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_dispatch/middleware/templates/rescues/template_error.erb within rescues/layout (42.7ms)


Started GET "/admin/collections" for 127.0.0.1 at 2016-01-16 19:25:31 +0100
Processing by CollectionsController#index as HTML
  Rendered shared/_restaurant_manage_tabs.html.erb (0.6ms)
  [1m[36mCollection Load (0.3ms)[0m  [1mSELECT `collections`.* FROM `collections` ORDER BY name ASC, created_at DESC LIMIT 12 OFFSET 0[0m
  [1m[35m (0.1ms)[0m  SELECT COUNT(*) FROM `collections` 
  Rendered collections/index.erb within layouts/admin (8.8ms)
  [1m[36mUser Load (0.3ms)[0m  [1mSELECT `users`.* FROM `users` WHERE `users`.`id` = 1 LIMIT 1[0m
Completed 200 OK in 17ms (Views: 15.5ms | ActiveRecord: 0.7ms)


Started GET "/admin/collections/new" for 127.0.0.1 at 2016-01-16 19:25:34 +0100

AbstractController::ActionNotFound (The action 'new' could not be found for CollectionsController):
  actionpack (3.2.8) lib/abstract_controller/base.rb:116:in `process'
  actionpack (3.2.8) lib/abstract_controller/rendering.rb:45:in `process'
  actionpack (3.2.8) lib/action_controller/metal.rb:203:in `dispatch'
  actionpack (3.2.8) lib/action_controller/metal/rack_delegation.rb:14:in `dispatch'
  actionpack (3.2.8) lib/action_controller/metal.rb:246:in `block in action'
  actionpack (3.2.8) lib/action_dispatch/routing/route_set.rb:73:in `call'
  actionpack (3.2.8) lib/action_dispatch/routing/route_set.rb:73:in `dispatch'
  actionpack (3.2.8) lib/action_dispatch/routing/route_set.rb:36:in `call'
  journey (1.0.4) lib/journey/router.rb:68:in `block in call'
  journey (1.0.4) lib/journey/router.rb:56:in `each'
  journey (1.0.4) lib/journey/router.rb:56:in `call'
  actionpack (3.2.8) lib/action_dispatch/routing/route_set.rb:600:in `call'
  omniauth (1.1.4) lib/omniauth/strategy.rb:184:in `call!'
  omniauth (1.1.4) lib/omniauth/strategy.rb:164:in `call'
  newrelic_rpm (3.7.3.204) lib/new_relic/rack/error_collector.rb:55:in `call'
  newrelic_rpm (3.7.3.204) lib/new_relic/rack/agent_hooks.rb:32:in `call'
  newrelic_rpm (3.7.3.204) lib/new_relic/rack/browser_monitoring.rb:27:in `call'
  newrelic_rpm (3.7.3.204) lib/new_relic/rack/developer_mode.rb:45:in `call'
  galetahub-simple_captcha (0.1.5) lib/simple_captcha/middleware.rb:20:in `call'
  /Users/kevinmuller/.rvm/gems/ruby-2.2.4/bundler/gems/client_side_validations-a6a515504520/lib/client_side_validations/middleware.rb:21:in `call'
  warden (1.1.1) lib/warden/manager.rb:35:in `block in call'
  warden (1.1.1) lib/warden/manager.rb:34:in `catch'
  warden (1.1.1) lib/warden/manager.rb:34:in `call'
  actionpack (3.2.8) lib/action_dispatch/middleware/best_standards_support.rb:17:in `call'
  rack (1.4.5) lib/rack/etag.rb:23:in `call'
  rack (1.4.5) lib/rack/conditionalget.rb:25:in `call'
  actionpack (3.2.8) lib/action_dispatch/middleware/head.rb:14:in `call'
  /Users/kevinmuller/.rvm/gems/ruby-2.2.4/bundler/gems/remotipart-aadc29e996c3/lib/remotipart/middleware.rb:27:in `call'
  actionpack (3.2.8) lib/action_dispatch/middleware/params_parser.rb:21:in `call'
  actionpack (3.2.8) lib/action_dispatch/middleware/flash.rb:242:in `call'
  rack (1.4.5) lib/rack/session/abstract/id.rb:210:in `context'
  rack (1.4.5) lib/rack/session/abstract/id.rb:205:in `call'
  actionpack (3.2.8) lib/action_dispatch/middleware/cookies.rb:339:in `call'
  dragonfly (0.9.15) lib/dragonfly/cookie_monster.rb:9:in `call'
  activerecord (3.2.8) lib/active_record/query_cache.rb:64:in `call'
  activerecord (3.2.8) lib/active_record/connection_adapters/abstract/connection_pool.rb:473:in `call'
  actionpack (3.2.8) lib/action_dispatch/middleware/callbacks.rb:28:in `block in call'
  activesupport (3.2.8) lib/active_support/callbacks.rb:405:in `_run__1964689105930070249__call__2247822051254444417__callbacks'
  activesupport (3.2.8) lib/active_support/callbacks.rb:405:in `__run_callback'
  activesupport (3.2.8) lib/active_support/callbacks.rb:385:in `_run_call_callbacks'
  activesupport (3.2.8) lib/active_support/callbacks.rb:81:in `run_callbacks'
  actionpack (3.2.8) lib/action_dispatch/middleware/callbacks.rb:27:in `call'
  actionpack (3.2.8) lib/action_dispatch/middleware/reloader.rb:65:in `call'
  actionpack (3.2.8) lib/action_dispatch/middleware/remote_ip.rb:31:in `call'
  actionpack (3.2.8) lib/action_dispatch/middleware/debug_exceptions.rb:16:in `call'
  actionpack (3.2.8) lib/action_dispatch/middleware/show_exceptions.rb:56:in `call'
  railties (3.2.8) lib/rails/rack/logger.rb:26:in `call_app'
  railties (3.2.8) lib/rails/rack/logger.rb:16:in `call'
  quiet_assets (1.0.3) lib/quiet_assets.rb:23:in `call_with_quiet_assets'
  actionpack (3.2.8) lib/action_dispatch/middleware/request_id.rb:22:in `call'
  rack (1.4.5) lib/rack/methodoverride.rb:21:in `call'
  rack (1.4.5) lib/rack/runtime.rb:17:in `call'
  activesupport (3.2.8) lib/active_support/cache/strategy/local_cache.rb:72:in `call'
  rack (1.4.5) lib/rack/lock.rb:15:in `call'
  actionpack (3.2.8) lib/action_dispatch/middleware/static.rb:62:in `call'
  dragonfly (0.9.15) lib/dragonfly/middleware.rb:13:in `call'
  rack-cache (1.2) lib/rack/cache/context.rb:136:in `forward'
  rack-cache (1.2) lib/rack/cache/context.rb:245:in `fetch'
  rack-cache (1.2) lib/rack/cache/context.rb:185:in `lookup'
  rack-cache (1.2) lib/rack/cache/context.rb:66:in `call!'
  rack-cache (1.2) lib/rack/cache/context.rb:51:in `call'
  railties (3.2.8) lib/rails/engine.rb:479:in `call'
  railties (3.2.8) lib/rails/application.rb:223:in `call'
  rack (1.4.5) lib/rack/content_length.rb:14:in `call'
  railties (3.2.8) lib/rails/rack/log_tailer.rb:17:in `call'
  rack (1.4.5) lib/rack/handler/webrick.rb:59:in `service'
  /Users/kevinmuller/.rvm/rubies/ruby-2.2.4/lib/ruby/2.2.0/webrick/httpserver.rb:138:in `service'
  /Users/kevinmuller/.rvm/rubies/ruby-2.2.4/lib/ruby/2.2.0/webrick/httpserver.rb:94:in `run'
  /Users/kevinmuller/.rvm/rubies/ruby-2.2.4/lib/ruby/2.2.0/webrick/server.rb:294:in `block in start_thread'


  Rendered /Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_dispatch/middleware/templates/rescues/unknown_action.erb within rescues/layout (0.4ms)


Started GET "/admin/collections/new" for 127.0.0.1 at 2016-01-16 19:26:04 +0100

AbstractController::ActionNotFound (The action 'new' could not be found for CollectionsController):
  actionpack (3.2.8) lib/abstract_controller/base.rb:116:in `process'
  actionpack (3.2.8) lib/abstract_controller/rendering.rb:45:in `process'
  actionpack (3.2.8) lib/action_controller/metal.rb:203:in `dispatch'
  actionpack (3.2.8) lib/action_controller/metal/rack_delegation.rb:14:in `dispatch'
  actionpack (3.2.8) lib/action_controller/metal.rb:246:in `block in action'
  actionpack (3.2.8) lib/action_dispatch/routing/route_set.rb:73:in `call'
  actionpack (3.2.8) lib/action_dispatch/routing/route_set.rb:73:in `dispatch'
  actionpack (3.2.8) lib/action_dispatch/routing/route_set.rb:36:in `call'
  journey (1.0.4) lib/journey/router.rb:68:in `block in call'
  journey (1.0.4) lib/journey/router.rb:56:in `each'
  journey (1.0.4) lib/journey/router.rb:56:in `call'
  actionpack (3.2.8) lib/action_dispatch/routing/route_set.rb:600:in `call'
  omniauth (1.1.4) lib/omniauth/strategy.rb:184:in `call!'
  omniauth (1.1.4) lib/omniauth/strategy.rb:164:in `call'
  newrelic_rpm (3.7.3.204) lib/new_relic/rack/error_collector.rb:55:in `call'
  newrelic_rpm (3.7.3.204) lib/new_relic/rack/agent_hooks.rb:32:in `call'
  newrelic_rpm (3.7.3.204) lib/new_relic/rack/browser_monitoring.rb:27:in `call'
  newrelic_rpm (3.7.3.204) lib/new_relic/rack/developer_mode.rb:45:in `call'
  galetahub-simple_captcha (0.1.5) lib/simple_captcha/middleware.rb:20:in `call'
  /Users/kevinmuller/.rvm/gems/ruby-2.2.4/bundler/gems/client_side_validations-a6a515504520/lib/client_side_validations/middleware.rb:21:in `call'
  warden (1.1.1) lib/warden/manager.rb:35:in `block in call'
  warden (1.1.1) lib/warden/manager.rb:34:in `catch'
  warden (1.1.1) lib/warden/manager.rb:34:in `call'
  actionpack (3.2.8) lib/action_dispatch/middleware/best_standards_support.rb:17:in `call'
  rack (1.4.5) lib/rack/etag.rb:23:in `call'
  rack (1.4.5) lib/rack/conditionalget.rb:25:in `call'
  actionpack (3.2.8) lib/action_dispatch/middleware/head.rb:14:in `call'
  /Users/kevinmuller/.rvm/gems/ruby-2.2.4/bundler/gems/remotipart-aadc29e996c3/lib/remotipart/middleware.rb:27:in `call'
  actionpack (3.2.8) lib/action_dispatch/middleware/params_parser.rb:21:in `call'
  actionpack (3.2.8) lib/action_dispatch/middleware/flash.rb:242:in `call'
  rack (1.4.5) lib/rack/session/abstract/id.rb:210:in `context'
  rack (1.4.5) lib/rack/session/abstract/id.rb:205:in `call'
  actionpack (3.2.8) lib/action_dispatch/middleware/cookies.rb:339:in `call'
  dragonfly (0.9.15) lib/dragonfly/cookie_monster.rb:9:in `call'
  activerecord (3.2.8) lib/active_record/query_cache.rb:64:in `call'
  activerecord (3.2.8) lib/active_record/connection_adapters/abstract/connection_pool.rb:473:in `call'
  actionpack (3.2.8) lib/action_dispatch/middleware/callbacks.rb:28:in `block in call'
  activesupport (3.2.8) lib/active_support/callbacks.rb:405:in `_run__1964689105930070249__call__2247822051254444417__callbacks'
  activesupport (3.2.8) lib/active_support/callbacks.rb:405:in `__run_callback'
  activesupport (3.2.8) lib/active_support/callbacks.rb:385:in `_run_call_callbacks'
  activesupport (3.2.8) lib/active_support/callbacks.rb:81:in `run_callbacks'
  actionpack (3.2.8) lib/action_dispatch/middleware/callbacks.rb:27:in `call'
  actionpack (3.2.8) lib/action_dispatch/middleware/reloader.rb:65:in `call'
  actionpack (3.2.8) lib/action_dispatch/middleware/remote_ip.rb:31:in `call'
  actionpack (3.2.8) lib/action_dispatch/middleware/debug_exceptions.rb:16:in `call'
  actionpack (3.2.8) lib/action_dispatch/middleware/show_exceptions.rb:56:in `call'
  railties (3.2.8) lib/rails/rack/logger.rb:26:in `call_app'
  railties (3.2.8) lib/rails/rack/logger.rb:16:in `call'
  quiet_assets (1.0.3) lib/quiet_assets.rb:23:in `call_with_quiet_assets'
  actionpack (3.2.8) lib/action_dispatch/middleware/request_id.rb:22:in `call'
  rack (1.4.5) lib/rack/methodoverride.rb:21:in `call'
  rack (1.4.5) lib/rack/runtime.rb:17:in `call'
  activesupport (3.2.8) lib/active_support/cache/strategy/local_cache.rb:72:in `call'
  rack (1.4.5) lib/rack/lock.rb:15:in `call'
  actionpack (3.2.8) lib/action_dispatch/middleware/static.rb:62:in `call'
  dragonfly (0.9.15) lib/dragonfly/middleware.rb:13:in `call'
  rack-cache (1.2) lib/rack/cache/context.rb:136:in `forward'
  rack-cache (1.2) lib/rack/cache/context.rb:245:in `fetch'
  rack-cache (1.2) lib/rack/cache/context.rb:185:in `lookup'
  rack-cache (1.2) lib/rack/cache/context.rb:66:in `call!'
  rack-cache (1.2) lib/rack/cache/context.rb:51:in `call'
  railties (3.2.8) lib/rails/engine.rb:479:in `call'
  railties (3.2.8) lib/rails/application.rb:223:in `call'
  rack (1.4.5) lib/rack/content_length.rb:14:in `call'
  railties (3.2.8) lib/rails/rack/log_tailer.rb:17:in `call'
  rack (1.4.5) lib/rack/handler/webrick.rb:59:in `service'
  /Users/kevinmuller/.rvm/rubies/ruby-2.2.4/lib/ruby/2.2.0/webrick/httpserver.rb:138:in `service'
  /Users/kevinmuller/.rvm/rubies/ruby-2.2.4/lib/ruby/2.2.0/webrick/httpserver.rb:94:in `run'
  /Users/kevinmuller/.rvm/rubies/ruby-2.2.4/lib/ruby/2.2.0/webrick/server.rb:294:in `block in start_thread'


  Rendered /Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_dispatch/middleware/templates/rescues/unknown_action.erb within rescues/layout (0.4ms)


Started GET "/admin/collections/new" for 127.0.0.1 at 2016-01-16 19:28:10 +0100

AbstractController::ActionNotFound (The action 'new' could not be found for CollectionsController):
  actionpack (3.2.8) lib/abstract_controller/base.rb:116:in `process'
  actionpack (3.2.8) lib/abstract_controller/rendering.rb:45:in `process'
  actionpack (3.2.8) lib/action_controller/metal.rb:203:in `dispatch'
  actionpack (3.2.8) lib/action_controller/metal/rack_delegation.rb:14:in `dispatch'
  actionpack (3.2.8) lib/action_controller/metal.rb:246:in `block in action'
  actionpack (3.2.8) lib/action_dispatch/routing/route_set.rb:73:in `call'
  actionpack (3.2.8) lib/action_dispatch/routing/route_set.rb:73:in `dispatch'
  actionpack (3.2.8) lib/action_dispatch/routing/route_set.rb:36:in `call'
  journey (1.0.4) lib/journey/router.rb:68:in `block in call'
  journey (1.0.4) lib/journey/router.rb:56:in `each'
  journey (1.0.4) lib/journey/router.rb:56:in `call'
  actionpack (3.2.8) lib/action_dispatch/routing/route_set.rb:600:in `call'
  omniauth (1.1.4) lib/omniauth/strategy.rb:184:in `call!'
  omniauth (1.1.4) lib/omniauth/strategy.rb:164:in `call'
  newrelic_rpm (3.7.3.204) lib/new_relic/rack/error_collector.rb:55:in `call'
  newrelic_rpm (3.7.3.204) lib/new_relic/rack/agent_hooks.rb:32:in `call'
  newrelic_rpm (3.7.3.204) lib/new_relic/rack/browser_monitoring.rb:27:in `call'
  newrelic_rpm (3.7.3.204) lib/new_relic/rack/developer_mode.rb:45:in `call'
  galetahub-simple_captcha (0.1.5) lib/simple_captcha/middleware.rb:20:in `call'
  /Users/kevinmuller/.rvm/gems/ruby-2.2.4/bundler/gems/client_side_validations-a6a515504520/lib/client_side_validations/middleware.rb:21:in `call'
  warden (1.1.1) lib/warden/manager.rb:35:in `block in call'
  warden (1.1.1) lib/warden/manager.rb:34:in `catch'
  warden (1.1.1) lib/warden/manager.rb:34:in `call'
  actionpack (3.2.8) lib/action_dispatch/middleware/best_standards_support.rb:17:in `call'
  rack (1.4.5) lib/rack/etag.rb:23:in `call'
  rack (1.4.5) lib/rack/conditionalget.rb:25:in `call'
  actionpack (3.2.8) lib/action_dispatch/middleware/head.rb:14:in `call'
  /Users/kevinmuller/.rvm/gems/ruby-2.2.4/bundler/gems/remotipart-aadc29e996c3/lib/remotipart/middleware.rb:27:in `call'
  actionpack (3.2.8) lib/action_dispatch/middleware/params_parser.rb:21:in `call'
  actionpack (3.2.8) lib/action_dispatch/middleware/flash.rb:242:in `call'
  rack (1.4.5) lib/rack/session/abstract/id.rb:210:in `context'
  rack (1.4.5) lib/rack/session/abstract/id.rb:205:in `call'
  actionpack (3.2.8) lib/action_dispatch/middleware/cookies.rb:339:in `call'
  dragonfly (0.9.15) lib/dragonfly/cookie_monster.rb:9:in `call'
  activerecord (3.2.8) lib/active_record/query_cache.rb:64:in `call'
  activerecord (3.2.8) lib/active_record/connection_adapters/abstract/connection_pool.rb:473:in `call'
  actionpack (3.2.8) lib/action_dispatch/middleware/callbacks.rb:28:in `block in call'
  activesupport (3.2.8) lib/active_support/callbacks.rb:405:in `_run__1964689105930070249__call__2247822051254444417__callbacks'
  activesupport (3.2.8) lib/active_support/callbacks.rb:405:in `__run_callback'
  activesupport (3.2.8) lib/active_support/callbacks.rb:385:in `_run_call_callbacks'
  activesupport (3.2.8) lib/active_support/callbacks.rb:81:in `run_callbacks'
  actionpack (3.2.8) lib/action_dispatch/middleware/callbacks.rb:27:in `call'
  actionpack (3.2.8) lib/action_dispatch/middleware/reloader.rb:65:in `call'
  actionpack (3.2.8) lib/action_dispatch/middleware/remote_ip.rb:31:in `call'
  actionpack (3.2.8) lib/action_dispatch/middleware/debug_exceptions.rb:16:in `call'
  actionpack (3.2.8) lib/action_dispatch/middleware/show_exceptions.rb:56:in `call'
  railties (3.2.8) lib/rails/rack/logger.rb:26:in `call_app'
  railties (3.2.8) lib/rails/rack/logger.rb:16:in `call'
  quiet_assets (1.0.3) lib/quiet_assets.rb:23:in `call_with_quiet_assets'
  actionpack (3.2.8) lib/action_dispatch/middleware/request_id.rb:22:in `call'
  rack (1.4.5) lib/rack/methodoverride.rb:21:in `call'
  rack (1.4.5) lib/rack/runtime.rb:17:in `call'
  activesupport (3.2.8) lib/active_support/cache/strategy/local_cache.rb:72:in `call'
  rack (1.4.5) lib/rack/lock.rb:15:in `call'
  actionpack (3.2.8) lib/action_dispatch/middleware/static.rb:62:in `call'
  dragonfly (0.9.15) lib/dragonfly/middleware.rb:13:in `call'
  rack-cache (1.2) lib/rack/cache/context.rb:136:in `forward'
  rack-cache (1.2) lib/rack/cache/context.rb:245:in `fetch'
  rack-cache (1.2) lib/rack/cache/context.rb:185:in `lookup'
  rack-cache (1.2) lib/rack/cache/context.rb:66:in `call!'
  rack-cache (1.2) lib/rack/cache/context.rb:51:in `call'
  railties (3.2.8) lib/rails/engine.rb:479:in `call'
  railties (3.2.8) lib/rails/application.rb:223:in `call'
  rack (1.4.5) lib/rack/content_length.rb:14:in `call'
  railties (3.2.8) lib/rails/rack/log_tailer.rb:17:in `call'
  rack (1.4.5) lib/rack/handler/webrick.rb:59:in `service'
  /Users/kevinmuller/.rvm/rubies/ruby-2.2.4/lib/ruby/2.2.0/webrick/httpserver.rb:138:in `service'
  /Users/kevinmuller/.rvm/rubies/ruby-2.2.4/lib/ruby/2.2.0/webrick/httpserver.rb:94:in `run'
  /Users/kevinmuller/.rvm/rubies/ruby-2.2.4/lib/ruby/2.2.0/webrick/server.rb:294:in `block in start_thread'


  Rendered /Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_dispatch/middleware/templates/rescues/unknown_action.erb within rescues/layout (0.4ms)
Connecting to database specified by database.yml
DEPRECATION WARNING: Passing :tag, :class and others to use is deprecated. Please invoke b.use :label, :wrap_with => {:class=>"simple_label"} instead. (called from block (2 levels) in <top (required)> at /Users/kevinmuller/halalgems_backend/config/initializers/simple_form.rb:67)


Started GET "/admin/collections/new" for 127.0.0.1 at 2016-01-16 19:28:47 +0100

AbstractController::ActionNotFound (The action 'new' could not be found for CollectionsController):
  actionpack (3.2.8) lib/abstract_controller/base.rb:116:in `process'
  actionpack (3.2.8) lib/abstract_controller/rendering.rb:45:in `process'
  actionpack (3.2.8) lib/action_controller/metal.rb:203:in `dispatch'
  actionpack (3.2.8) lib/action_controller/metal/rack_delegation.rb:14:in `dispatch'
  actionpack (3.2.8) lib/action_controller/metal.rb:246:in `block in action'
  actionpack (3.2.8) lib/action_dispatch/routing/route_set.rb:73:in `call'
  actionpack (3.2.8) lib/action_dispatch/routing/route_set.rb:73:in `dispatch'
  actionpack (3.2.8) lib/action_dispatch/routing/route_set.rb:36:in `call'
  journey (1.0.4) lib/journey/router.rb:68:in `block in call'
  journey (1.0.4) lib/journey/router.rb:56:in `each'
  journey (1.0.4) lib/journey/router.rb:56:in `call'
  actionpack (3.2.8) lib/action_dispatch/routing/route_set.rb:600:in `call'
  omniauth (1.1.4) lib/omniauth/strategy.rb:184:in `call!'
  omniauth (1.1.4) lib/omniauth/strategy.rb:164:in `call'
  newrelic_rpm (3.7.3.204) lib/new_relic/rack/error_collector.rb:55:in `call'
  newrelic_rpm (3.7.3.204) lib/new_relic/rack/agent_hooks.rb:32:in `call'
  newrelic_rpm (3.7.3.204) lib/new_relic/rack/browser_monitoring.rb:27:in `call'
  newrelic_rpm (3.7.3.204) lib/new_relic/rack/developer_mode.rb:45:in `call'
  galetahub-simple_captcha (0.1.5) lib/simple_captcha/middleware.rb:20:in `call'
  /Users/kevinmuller/.rvm/gems/ruby-2.2.4/bundler/gems/client_side_validations-a6a515504520/lib/client_side_validations/middleware.rb:21:in `call'
  warden (1.1.1) lib/warden/manager.rb:35:in `block in call'
  warden (1.1.1) lib/warden/manager.rb:34:in `catch'
  warden (1.1.1) lib/warden/manager.rb:34:in `call'
  actionpack (3.2.8) lib/action_dispatch/middleware/best_standards_support.rb:17:in `call'
  rack (1.4.5) lib/rack/etag.rb:23:in `call'
  rack (1.4.5) lib/rack/conditionalget.rb:25:in `call'
  actionpack (3.2.8) lib/action_dispatch/middleware/head.rb:14:in `call'
  /Users/kevinmuller/.rvm/gems/ruby-2.2.4/bundler/gems/remotipart-aadc29e996c3/lib/remotipart/middleware.rb:27:in `call'
  actionpack (3.2.8) lib/action_dispatch/middleware/params_parser.rb:21:in `call'
  actionpack (3.2.8) lib/action_dispatch/middleware/flash.rb:242:in `call'
  rack (1.4.5) lib/rack/session/abstract/id.rb:210:in `context'
  rack (1.4.5) lib/rack/session/abstract/id.rb:205:in `call'
  actionpack (3.2.8) lib/action_dispatch/middleware/cookies.rb:339:in `call'
  dragonfly (0.9.15) lib/dragonfly/cookie_monster.rb:9:in `call'
  activerecord (3.2.8) lib/active_record/query_cache.rb:64:in `call'
  activerecord (3.2.8) lib/active_record/connection_adapters/abstract/connection_pool.rb:473:in `call'
  actionpack (3.2.8) lib/action_dispatch/middleware/callbacks.rb:28:in `block in call'
  activesupport (3.2.8) lib/active_support/callbacks.rb:405:in `_run__3888729128259930595__call__2664142449717993528__callbacks'
  activesupport (3.2.8) lib/active_support/callbacks.rb:405:in `__run_callback'
  activesupport (3.2.8) lib/active_support/callbacks.rb:385:in `_run_call_callbacks'
  activesupport (3.2.8) lib/active_support/callbacks.rb:81:in `run_callbacks'
  actionpack (3.2.8) lib/action_dispatch/middleware/callbacks.rb:27:in `call'
  actionpack (3.2.8) lib/action_dispatch/middleware/reloader.rb:65:in `call'
  actionpack (3.2.8) lib/action_dispatch/middleware/remote_ip.rb:31:in `call'
  actionpack (3.2.8) lib/action_dispatch/middleware/debug_exceptions.rb:16:in `call'
  actionpack (3.2.8) lib/action_dispatch/middleware/show_exceptions.rb:56:in `call'
  railties (3.2.8) lib/rails/rack/logger.rb:26:in `call_app'
  railties (3.2.8) lib/rails/rack/logger.rb:16:in `call'
  quiet_assets (1.0.3) lib/quiet_assets.rb:23:in `call_with_quiet_assets'
  actionpack (3.2.8) lib/action_dispatch/middleware/request_id.rb:22:in `call'
  rack (1.4.5) lib/rack/methodoverride.rb:21:in `call'
  rack (1.4.5) lib/rack/runtime.rb:17:in `call'
  activesupport (3.2.8) lib/active_support/cache/strategy/local_cache.rb:72:in `call'
  rack (1.4.5) lib/rack/lock.rb:15:in `call'
  actionpack (3.2.8) lib/action_dispatch/middleware/static.rb:62:in `call'
  dragonfly (0.9.15) lib/dragonfly/middleware.rb:13:in `call'
  rack-cache (1.2) lib/rack/cache/context.rb:136:in `forward'
  rack-cache (1.2) lib/rack/cache/context.rb:245:in `fetch'
  rack-cache (1.2) lib/rack/cache/context.rb:185:in `lookup'
  rack-cache (1.2) lib/rack/cache/context.rb:66:in `call!'
  rack-cache (1.2) lib/rack/cache/context.rb:51:in `call'
  railties (3.2.8) lib/rails/engine.rb:479:in `call'
  railties (3.2.8) lib/rails/application.rb:223:in `call'
  rack (1.4.5) lib/rack/content_length.rb:14:in `call'
  railties (3.2.8) lib/rails/rack/log_tailer.rb:17:in `call'
  rack (1.4.5) lib/rack/handler/webrick.rb:59:in `service'
  /Users/kevinmuller/.rvm/rubies/ruby-2.2.4/lib/ruby/2.2.0/webrick/httpserver.rb:138:in `service'
  /Users/kevinmuller/.rvm/rubies/ruby-2.2.4/lib/ruby/2.2.0/webrick/httpserver.rb:94:in `run'
  /Users/kevinmuller/.rvm/rubies/ruby-2.2.4/lib/ruby/2.2.0/webrick/server.rb:294:in `block in start_thread'


  Rendered /Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_dispatch/middleware/templates/rescues/unknown_action.erb within rescues/layout (1.6ms)


Started GET "/admin/collections/new" for 127.0.0.1 at 2016-01-16 19:28:48 +0100

AbstractController::ActionNotFound (The action 'new' could not be found for CollectionsController):
  actionpack (3.2.8) lib/abstract_controller/base.rb:116:in `process'
  actionpack (3.2.8) lib/abstract_controller/rendering.rb:45:in `process'
  actionpack (3.2.8) lib/action_controller/metal.rb:203:in `dispatch'
  actionpack (3.2.8) lib/action_controller/metal/rack_delegation.rb:14:in `dispatch'
  actionpack (3.2.8) lib/action_controller/metal.rb:246:in `block in action'
  actionpack (3.2.8) lib/action_dispatch/routing/route_set.rb:73:in `call'
  actionpack (3.2.8) lib/action_dispatch/routing/route_set.rb:73:in `dispatch'
  actionpack (3.2.8) lib/action_dispatch/routing/route_set.rb:36:in `call'
  journey (1.0.4) lib/journey/router.rb:68:in `block in call'
  journey (1.0.4) lib/journey/router.rb:56:in `each'
  journey (1.0.4) lib/journey/router.rb:56:in `call'
  actionpack (3.2.8) lib/action_dispatch/routing/route_set.rb:600:in `call'
  omniauth (1.1.4) lib/omniauth/strategy.rb:184:in `call!'
  omniauth (1.1.4) lib/omniauth/strategy.rb:164:in `call'
  newrelic_rpm (3.7.3.204) lib/new_relic/rack/error_collector.rb:55:in `call'
  newrelic_rpm (3.7.3.204) lib/new_relic/rack/agent_hooks.rb:32:in `call'
  newrelic_rpm (3.7.3.204) lib/new_relic/rack/browser_monitoring.rb:27:in `call'
  newrelic_rpm (3.7.3.204) lib/new_relic/rack/developer_mode.rb:45:in `call'
  galetahub-simple_captcha (0.1.5) lib/simple_captcha/middleware.rb:20:in `call'
  /Users/kevinmuller/.rvm/gems/ruby-2.2.4/bundler/gems/client_side_validations-a6a515504520/lib/client_side_validations/middleware.rb:21:in `call'
  warden (1.1.1) lib/warden/manager.rb:35:in `block in call'
  warden (1.1.1) lib/warden/manager.rb:34:in `catch'
  warden (1.1.1) lib/warden/manager.rb:34:in `call'
  actionpack (3.2.8) lib/action_dispatch/middleware/best_standards_support.rb:17:in `call'
  rack (1.4.5) lib/rack/etag.rb:23:in `call'
  rack (1.4.5) lib/rack/conditionalget.rb:25:in `call'
  actionpack (3.2.8) lib/action_dispatch/middleware/head.rb:14:in `call'
  /Users/kevinmuller/.rvm/gems/ruby-2.2.4/bundler/gems/remotipart-aadc29e996c3/lib/remotipart/middleware.rb:27:in `call'
  actionpack (3.2.8) lib/action_dispatch/middleware/params_parser.rb:21:in `call'
  actionpack (3.2.8) lib/action_dispatch/middleware/flash.rb:242:in `call'
  rack (1.4.5) lib/rack/session/abstract/id.rb:210:in `context'
  rack (1.4.5) lib/rack/session/abstract/id.rb:205:in `call'
  actionpack (3.2.8) lib/action_dispatch/middleware/cookies.rb:339:in `call'
  dragonfly (0.9.15) lib/dragonfly/cookie_monster.rb:9:in `call'
  activerecord (3.2.8) lib/active_record/query_cache.rb:64:in `call'
  activerecord (3.2.8) lib/active_record/connection_adapters/abstract/connection_pool.rb:473:in `call'
  actionpack (3.2.8) lib/action_dispatch/middleware/callbacks.rb:28:in `block in call'
  activesupport (3.2.8) lib/active_support/callbacks.rb:405:in `_run__3888729128259930595__call__2664142449717993528__callbacks'
  activesupport (3.2.8) lib/active_support/callbacks.rb:405:in `__run_callback'
  activesupport (3.2.8) lib/active_support/callbacks.rb:385:in `_run_call_callbacks'
  activesupport (3.2.8) lib/active_support/callbacks.rb:81:in `run_callbacks'
  actionpack (3.2.8) lib/action_dispatch/middleware/callbacks.rb:27:in `call'
  actionpack (3.2.8) lib/action_dispatch/middleware/reloader.rb:65:in `call'
  actionpack (3.2.8) lib/action_dispatch/middleware/remote_ip.rb:31:in `call'
  actionpack (3.2.8) lib/action_dispatch/middleware/debug_exceptions.rb:16:in `call'
  actionpack (3.2.8) lib/action_dispatch/middleware/show_exceptions.rb:56:in `call'
  railties (3.2.8) lib/rails/rack/logger.rb:26:in `call_app'
  railties (3.2.8) lib/rails/rack/logger.rb:16:in `call'
  quiet_assets (1.0.3) lib/quiet_assets.rb:23:in `call_with_quiet_assets'
  actionpack (3.2.8) lib/action_dispatch/middleware/request_id.rb:22:in `call'
  rack (1.4.5) lib/rack/methodoverride.rb:21:in `call'
  rack (1.4.5) lib/rack/runtime.rb:17:in `call'
  activesupport (3.2.8) lib/active_support/cache/strategy/local_cache.rb:72:in `call'
  rack (1.4.5) lib/rack/lock.rb:15:in `call'
  actionpack (3.2.8) lib/action_dispatch/middleware/static.rb:62:in `call'
  dragonfly (0.9.15) lib/dragonfly/middleware.rb:13:in `call'
  rack-cache (1.2) lib/rack/cache/context.rb:136:in `forward'
  rack-cache (1.2) lib/rack/cache/context.rb:245:in `fetch'
  rack-cache (1.2) lib/rack/cache/context.rb:185:in `lookup'
  rack-cache (1.2) lib/rack/cache/context.rb:66:in `call!'
  rack-cache (1.2) lib/rack/cache/context.rb:51:in `call'
  railties (3.2.8) lib/rails/engine.rb:479:in `call'
  railties (3.2.8) lib/rails/application.rb:223:in `call'
  rack (1.4.5) lib/rack/content_length.rb:14:in `call'
  railties (3.2.8) lib/rails/rack/log_tailer.rb:17:in `call'
  rack (1.4.5) lib/rack/handler/webrick.rb:59:in `service'
  /Users/kevinmuller/.rvm/rubies/ruby-2.2.4/lib/ruby/2.2.0/webrick/httpserver.rb:138:in `service'
  /Users/kevinmuller/.rvm/rubies/ruby-2.2.4/lib/ruby/2.2.0/webrick/httpserver.rb:94:in `run'
  /Users/kevinmuller/.rvm/rubies/ruby-2.2.4/lib/ruby/2.2.0/webrick/server.rb:294:in `block in start_thread'


  Rendered /Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_dispatch/middleware/templates/rescues/unknown_action.erb within rescues/layout (1.6ms)


Started GET "/admin/collections/new" for 127.0.0.1 at 2016-01-16 19:28:48 +0100

AbstractController::ActionNotFound (The action 'new' could not be found for CollectionsController):
  actionpack (3.2.8) lib/abstract_controller/base.rb:116:in `process'
  actionpack (3.2.8) lib/abstract_controller/rendering.rb:45:in `process'
  actionpack (3.2.8) lib/action_controller/metal.rb:203:in `dispatch'
  actionpack (3.2.8) lib/action_controller/metal/rack_delegation.rb:14:in `dispatch'
  actionpack (3.2.8) lib/action_controller/metal.rb:246:in `block in action'
  actionpack (3.2.8) lib/action_dispatch/routing/route_set.rb:73:in `call'
  actionpack (3.2.8) lib/action_dispatch/routing/route_set.rb:73:in `dispatch'
  actionpack (3.2.8) lib/action_dispatch/routing/route_set.rb:36:in `call'
  journey (1.0.4) lib/journey/router.rb:68:in `block in call'
  journey (1.0.4) lib/journey/router.rb:56:in `each'
  journey (1.0.4) lib/journey/router.rb:56:in `call'
  actionpack (3.2.8) lib/action_dispatch/routing/route_set.rb:600:in `call'
  omniauth (1.1.4) lib/omniauth/strategy.rb:184:in `call!'
  omniauth (1.1.4) lib/omniauth/strategy.rb:164:in `call'
  newrelic_rpm (3.7.3.204) lib/new_relic/rack/error_collector.rb:55:in `call'
  newrelic_rpm (3.7.3.204) lib/new_relic/rack/agent_hooks.rb:32:in `call'
  newrelic_rpm (3.7.3.204) lib/new_relic/rack/browser_monitoring.rb:27:in `call'
  newrelic_rpm (3.7.3.204) lib/new_relic/rack/developer_mode.rb:45:in `call'
  galetahub-simple_captcha (0.1.5) lib/simple_captcha/middleware.rb:20:in `call'
  /Users/kevinmuller/.rvm/gems/ruby-2.2.4/bundler/gems/client_side_validations-a6a515504520/lib/client_side_validations/middleware.rb:21:in `call'
  warden (1.1.1) lib/warden/manager.rb:35:in `block in call'
  warden (1.1.1) lib/warden/manager.rb:34:in `catch'
  warden (1.1.1) lib/warden/manager.rb:34:in `call'
  actionpack (3.2.8) lib/action_dispatch/middleware/best_standards_support.rb:17:in `call'
  rack (1.4.5) lib/rack/etag.rb:23:in `call'
  rack (1.4.5) lib/rack/conditionalget.rb:25:in `call'
  actionpack (3.2.8) lib/action_dispatch/middleware/head.rb:14:in `call'
  /Users/kevinmuller/.rvm/gems/ruby-2.2.4/bundler/gems/remotipart-aadc29e996c3/lib/remotipart/middleware.rb:27:in `call'
  actionpack (3.2.8) lib/action_dispatch/middleware/params_parser.rb:21:in `call'
  actionpack (3.2.8) lib/action_dispatch/middleware/flash.rb:242:in `call'
  rack (1.4.5) lib/rack/session/abstract/id.rb:210:in `context'
  rack (1.4.5) lib/rack/session/abstract/id.rb:205:in `call'
  actionpack (3.2.8) lib/action_dispatch/middleware/cookies.rb:339:in `call'
  dragonfly (0.9.15) lib/dragonfly/cookie_monster.rb:9:in `call'
  activerecord (3.2.8) lib/active_record/query_cache.rb:64:in `call'
  activerecord (3.2.8) lib/active_record/connection_adapters/abstract/connection_pool.rb:473:in `call'
  actionpack (3.2.8) lib/action_dispatch/middleware/callbacks.rb:28:in `block in call'
  activesupport (3.2.8) lib/active_support/callbacks.rb:405:in `_run__3888729128259930595__call__2664142449717993528__callbacks'
  activesupport (3.2.8) lib/active_support/callbacks.rb:405:in `__run_callback'
  activesupport (3.2.8) lib/active_support/callbacks.rb:385:in `_run_call_callbacks'
  activesupport (3.2.8) lib/active_support/callbacks.rb:81:in `run_callbacks'
  actionpack (3.2.8) lib/action_dispatch/middleware/callbacks.rb:27:in `call'
  actionpack (3.2.8) lib/action_dispatch/middleware/reloader.rb:65:in `call'
  actionpack (3.2.8) lib/action_dispatch/middleware/remote_ip.rb:31:in `call'
  actionpack (3.2.8) lib/action_dispatch/middleware/debug_exceptions.rb:16:in `call'
  actionpack (3.2.8) lib/action_dispatch/middleware/show_exceptions.rb:56:in `call'
  railties (3.2.8) lib/rails/rack/logger.rb:26:in `call_app'
  railties (3.2.8) lib/rails/rack/logger.rb:16:in `call'
  quiet_assets (1.0.3) lib/quiet_assets.rb:23:in `call_with_quiet_assets'
  actionpack (3.2.8) lib/action_dispatch/middleware/request_id.rb:22:in `call'
  rack (1.4.5) lib/rack/methodoverride.rb:21:in `call'
  rack (1.4.5) lib/rack/runtime.rb:17:in `call'
  activesupport (3.2.8) lib/active_support/cache/strategy/local_cache.rb:72:in `call'
  rack (1.4.5) lib/rack/lock.rb:15:in `call'
  actionpack (3.2.8) lib/action_dispatch/middleware/static.rb:62:in `call'
  dragonfly (0.9.15) lib/dragonfly/middleware.rb:13:in `call'
  rack-cache (1.2) lib/rack/cache/context.rb:136:in `forward'
  rack-cache (1.2) lib/rack/cache/context.rb:245:in `fetch'
  rack-cache (1.2) lib/rack/cache/context.rb:185:in `lookup'
  rack-cache (1.2) lib/rack/cache/context.rb:66:in `call!'
  rack-cache (1.2) lib/rack/cache/context.rb:51:in `call'
  railties (3.2.8) lib/rails/engine.rb:479:in `call'
  railties (3.2.8) lib/rails/application.rb:223:in `call'
  rack (1.4.5) lib/rack/content_length.rb:14:in `call'
  railties (3.2.8) lib/rails/rack/log_tailer.rb:17:in `call'
  rack (1.4.5) lib/rack/handler/webrick.rb:59:in `service'
  /Users/kevinmuller/.rvm/rubies/ruby-2.2.4/lib/ruby/2.2.0/webrick/httpserver.rb:138:in `service'
  /Users/kevinmuller/.rvm/rubies/ruby-2.2.4/lib/ruby/2.2.0/webrick/httpserver.rb:94:in `run'
  /Users/kevinmuller/.rvm/rubies/ruby-2.2.4/lib/ruby/2.2.0/webrick/server.rb:294:in `block in start_thread'


  Rendered /Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_dispatch/middleware/templates/rescues/unknown_action.erb within rescues/layout (0.3ms)


Started GET "/admin/collections/new" for 127.0.0.1 at 2016-01-16 19:28:49 +0100

AbstractController::ActionNotFound (The action 'new' could not be found for CollectionsController):
  actionpack (3.2.8) lib/abstract_controller/base.rb:116:in `process'
  actionpack (3.2.8) lib/abstract_controller/rendering.rb:45:in `process'
  actionpack (3.2.8) lib/action_controller/metal.rb:203:in `dispatch'
  actionpack (3.2.8) lib/action_controller/metal/rack_delegation.rb:14:in `dispatch'
  actionpack (3.2.8) lib/action_controller/metal.rb:246:in `block in action'
  actionpack (3.2.8) lib/action_dispatch/routing/route_set.rb:73:in `call'
  actionpack (3.2.8) lib/action_dispatch/routing/route_set.rb:73:in `dispatch'
  actionpack (3.2.8) lib/action_dispatch/routing/route_set.rb:36:in `call'
  journey (1.0.4) lib/journey/router.rb:68:in `block in call'
  journey (1.0.4) lib/journey/router.rb:56:in `each'
  journey (1.0.4) lib/journey/router.rb:56:in `call'
  actionpack (3.2.8) lib/action_dispatch/routing/route_set.rb:600:in `call'
  omniauth (1.1.4) lib/omniauth/strategy.rb:184:in `call!'
  omniauth (1.1.4) lib/omniauth/strategy.rb:164:in `call'
  newrelic_rpm (3.7.3.204) lib/new_relic/rack/error_collector.rb:55:in `call'
  newrelic_rpm (3.7.3.204) lib/new_relic/rack/agent_hooks.rb:32:in `call'
  newrelic_rpm (3.7.3.204) lib/new_relic/rack/browser_monitoring.rb:27:in `call'
  newrelic_rpm (3.7.3.204) lib/new_relic/rack/developer_mode.rb:45:in `call'
  galetahub-simple_captcha (0.1.5) lib/simple_captcha/middleware.rb:20:in `call'
  /Users/kevinmuller/.rvm/gems/ruby-2.2.4/bundler/gems/client_side_validations-a6a515504520/lib/client_side_validations/middleware.rb:21:in `call'
  warden (1.1.1) lib/warden/manager.rb:35:in `block in call'
  warden (1.1.1) lib/warden/manager.rb:34:in `catch'
  warden (1.1.1) lib/warden/manager.rb:34:in `call'
  actionpack (3.2.8) lib/action_dispatch/middleware/best_standards_support.rb:17:in `call'
  rack (1.4.5) lib/rack/etag.rb:23:in `call'
  rack (1.4.5) lib/rack/conditionalget.rb:25:in `call'
  actionpack (3.2.8) lib/action_dispatch/middleware/head.rb:14:in `call'
  /Users/kevinmuller/.rvm/gems/ruby-2.2.4/bundler/gems/remotipart-aadc29e996c3/lib/remotipart/middleware.rb:27:in `call'
  actionpack (3.2.8) lib/action_dispatch/middleware/params_parser.rb:21:in `call'
  actionpack (3.2.8) lib/action_dispatch/middleware/flash.rb:242:in `call'
  rack (1.4.5) lib/rack/session/abstract/id.rb:210:in `context'
  rack (1.4.5) lib/rack/session/abstract/id.rb:205:in `call'
  actionpack (3.2.8) lib/action_dispatch/middleware/cookies.rb:339:in `call'
  dragonfly (0.9.15) lib/dragonfly/cookie_monster.rb:9:in `call'
  activerecord (3.2.8) lib/active_record/query_cache.rb:64:in `call'
  activerecord (3.2.8) lib/active_record/connection_adapters/abstract/connection_pool.rb:473:in `call'
  actionpack (3.2.8) lib/action_dispatch/middleware/callbacks.rb:28:in `block in call'
  activesupport (3.2.8) lib/active_support/callbacks.rb:405:in `_run__3888729128259930595__call__2664142449717993528__callbacks'
  activesupport (3.2.8) lib/active_support/callbacks.rb:405:in `__run_callback'
  activesupport (3.2.8) lib/active_support/callbacks.rb:385:in `_run_call_callbacks'
  activesupport (3.2.8) lib/active_support/callbacks.rb:81:in `run_callbacks'
  actionpack (3.2.8) lib/action_dispatch/middleware/callbacks.rb:27:in `call'
  actionpack (3.2.8) lib/action_dispatch/middleware/reloader.rb:65:in `call'
  actionpack (3.2.8) lib/action_dispatch/middleware/remote_ip.rb:31:in `call'
  actionpack (3.2.8) lib/action_dispatch/middleware/debug_exceptions.rb:16:in `call'
  actionpack (3.2.8) lib/action_dispatch/middleware/show_exceptions.rb:56:in `call'
  railties (3.2.8) lib/rails/rack/logger.rb:26:in `call_app'
  railties (3.2.8) lib/rails/rack/logger.rb:16:in `call'
  quiet_assets (1.0.3) lib/quiet_assets.rb:23:in `call_with_quiet_assets'
  actionpack (3.2.8) lib/action_dispatch/middleware/request_id.rb:22:in `call'
  rack (1.4.5) lib/rack/methodoverride.rb:21:in `call'
  rack (1.4.5) lib/rack/runtime.rb:17:in `call'
  activesupport (3.2.8) lib/active_support/cache/strategy/local_cache.rb:72:in `call'
  rack (1.4.5) lib/rack/lock.rb:15:in `call'
  actionpack (3.2.8) lib/action_dispatch/middleware/static.rb:62:in `call'
  dragonfly (0.9.15) lib/dragonfly/middleware.rb:13:in `call'
  rack-cache (1.2) lib/rack/cache/context.rb:136:in `forward'
  rack-cache (1.2) lib/rack/cache/context.rb:245:in `fetch'
  rack-cache (1.2) lib/rack/cache/context.rb:185:in `lookup'
  rack-cache (1.2) lib/rack/cache/context.rb:66:in `call!'
  rack-cache (1.2) lib/rack/cache/context.rb:51:in `call'
  railties (3.2.8) lib/rails/engine.rb:479:in `call'
  railties (3.2.8) lib/rails/application.rb:223:in `call'
  rack (1.4.5) lib/rack/content_length.rb:14:in `call'
  railties (3.2.8) lib/rails/rack/log_tailer.rb:17:in `call'
  rack (1.4.5) lib/rack/handler/webrick.rb:59:in `service'
  /Users/kevinmuller/.rvm/rubies/ruby-2.2.4/lib/ruby/2.2.0/webrick/httpserver.rb:138:in `service'
  /Users/kevinmuller/.rvm/rubies/ruby-2.2.4/lib/ruby/2.2.0/webrick/httpserver.rb:94:in `run'
  /Users/kevinmuller/.rvm/rubies/ruby-2.2.4/lib/ruby/2.2.0/webrick/server.rb:294:in `block in start_thread'


  Rendered /Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_dispatch/middleware/templates/rescues/unknown_action.erb within rescues/layout (0.3ms)


Started GET "/admin/collections/new" for 127.0.0.1 at 2016-01-16 19:28:49 +0100

AbstractController::ActionNotFound (The action 'new' could not be found for CollectionsController):
  actionpack (3.2.8) lib/abstract_controller/base.rb:116:in `process'
  actionpack (3.2.8) lib/abstract_controller/rendering.rb:45:in `process'
  actionpack (3.2.8) lib/action_controller/metal.rb:203:in `dispatch'
  actionpack (3.2.8) lib/action_controller/metal/rack_delegation.rb:14:in `dispatch'
  actionpack (3.2.8) lib/action_controller/metal.rb:246:in `block in action'
  actionpack (3.2.8) lib/action_dispatch/routing/route_set.rb:73:in `call'
  actionpack (3.2.8) lib/action_dispatch/routing/route_set.rb:73:in `dispatch'
  actionpack (3.2.8) lib/action_dispatch/routing/route_set.rb:36:in `call'
  journey (1.0.4) lib/journey/router.rb:68:in `block in call'
  journey (1.0.4) lib/journey/router.rb:56:in `each'
  journey (1.0.4) lib/journey/router.rb:56:in `call'
  actionpack (3.2.8) lib/action_dispatch/routing/route_set.rb:600:in `call'
  omniauth (1.1.4) lib/omniauth/strategy.rb:184:in `call!'
  omniauth (1.1.4) lib/omniauth/strategy.rb:164:in `call'
  newrelic_rpm (3.7.3.204) lib/new_relic/rack/error_collector.rb:55:in `call'
  newrelic_rpm (3.7.3.204) lib/new_relic/rack/agent_hooks.rb:32:in `call'
  newrelic_rpm (3.7.3.204) lib/new_relic/rack/browser_monitoring.rb:27:in `call'
  newrelic_rpm (3.7.3.204) lib/new_relic/rack/developer_mode.rb:45:in `call'
  galetahub-simple_captcha (0.1.5) lib/simple_captcha/middleware.rb:20:in `call'
  /Users/kevinmuller/.rvm/gems/ruby-2.2.4/bundler/gems/client_side_validations-a6a515504520/lib/client_side_validations/middleware.rb:21:in `call'
  warden (1.1.1) lib/warden/manager.rb:35:in `block in call'
  warden (1.1.1) lib/warden/manager.rb:34:in `catch'
  warden (1.1.1) lib/warden/manager.rb:34:in `call'
  actionpack (3.2.8) lib/action_dispatch/middleware/best_standards_support.rb:17:in `call'
  rack (1.4.5) lib/rack/etag.rb:23:in `call'
  rack (1.4.5) lib/rack/conditionalget.rb:25:in `call'
  actionpack (3.2.8) lib/action_dispatch/middleware/head.rb:14:in `call'
  /Users/kevinmuller/.rvm/gems/ruby-2.2.4/bundler/gems/remotipart-aadc29e996c3/lib/remotipart/middleware.rb:27:in `call'
  actionpack (3.2.8) lib/action_dispatch/middleware/params_parser.rb:21:in `call'
  actionpack (3.2.8) lib/action_dispatch/middleware/flash.rb:242:in `call'
  rack (1.4.5) lib/rack/session/abstract/id.rb:210:in `context'
  rack (1.4.5) lib/rack/session/abstract/id.rb:205:in `call'
  actionpack (3.2.8) lib/action_dispatch/middleware/cookies.rb:339:in `call'
  dragonfly (0.9.15) lib/dragonfly/cookie_monster.rb:9:in `call'
  activerecord (3.2.8) lib/active_record/query_cache.rb:64:in `call'
  activerecord (3.2.8) lib/active_record/connection_adapters/abstract/connection_pool.rb:473:in `call'
  actionpack (3.2.8) lib/action_dispatch/middleware/callbacks.rb:28:in `block in call'
  activesupport (3.2.8) lib/active_support/callbacks.rb:405:in `_run__3888729128259930595__call__2664142449717993528__callbacks'
  activesupport (3.2.8) lib/active_support/callbacks.rb:405:in `__run_callback'
  activesupport (3.2.8) lib/active_support/callbacks.rb:385:in `_run_call_callbacks'
  activesupport (3.2.8) lib/active_support/callbacks.rb:81:in `run_callbacks'
  actionpack (3.2.8) lib/action_dispatch/middleware/callbacks.rb:27:in `call'
  actionpack (3.2.8) lib/action_dispatch/middleware/reloader.rb:65:in `call'
  actionpack (3.2.8) lib/action_dispatch/middleware/remote_ip.rb:31:in `call'
  actionpack (3.2.8) lib/action_dispatch/middleware/debug_exceptions.rb:16:in `call'
  actionpack (3.2.8) lib/action_dispatch/middleware/show_exceptions.rb:56:in `call'
  railties (3.2.8) lib/rails/rack/logger.rb:26:in `call_app'
  railties (3.2.8) lib/rails/rack/logger.rb:16:in `call'
  quiet_assets (1.0.3) lib/quiet_assets.rb:23:in `call_with_quiet_assets'
  actionpack (3.2.8) lib/action_dispatch/middleware/request_id.rb:22:in `call'
  rack (1.4.5) lib/rack/methodoverride.rb:21:in `call'
  rack (1.4.5) lib/rack/runtime.rb:17:in `call'
  activesupport (3.2.8) lib/active_support/cache/strategy/local_cache.rb:72:in `call'
  rack (1.4.5) lib/rack/lock.rb:15:in `call'
  actionpack (3.2.8) lib/action_dispatch/middleware/static.rb:62:in `call'
  dragonfly (0.9.15) lib/dragonfly/middleware.rb:13:in `call'
  rack-cache (1.2) lib/rack/cache/context.rb:136:in `forward'
  rack-cache (1.2) lib/rack/cache/context.rb:245:in `fetch'
  rack-cache (1.2) lib/rack/cache/context.rb:185:in `lookup'
  rack-cache (1.2) lib/rack/cache/context.rb:66:in `call!'
  rack-cache (1.2) lib/rack/cache/context.rb:51:in `call'
  railties (3.2.8) lib/rails/engine.rb:479:in `call'
  railties (3.2.8) lib/rails/application.rb:223:in `call'
  rack (1.4.5) lib/rack/content_length.rb:14:in `call'
  railties (3.2.8) lib/rails/rack/log_tailer.rb:17:in `call'
  rack (1.4.5) lib/rack/handler/webrick.rb:59:in `service'
  /Users/kevinmuller/.rvm/rubies/ruby-2.2.4/lib/ruby/2.2.0/webrick/httpserver.rb:138:in `service'
  /Users/kevinmuller/.rvm/rubies/ruby-2.2.4/lib/ruby/2.2.0/webrick/httpserver.rb:94:in `run'
  /Users/kevinmuller/.rvm/rubies/ruby-2.2.4/lib/ruby/2.2.0/webrick/server.rb:294:in `block in start_thread'


  Rendered /Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_dispatch/middleware/templates/rescues/unknown_action.erb within rescues/layout (0.3ms)


Started GET "/admin/collections/new" for 127.0.0.1 at 2016-01-16 19:32:45 +0100

AbstractController::ActionNotFound (The action 'new' could not be found for CollectionsController):
  actionpack (3.2.8) lib/abstract_controller/base.rb:116:in `process'
  actionpack (3.2.8) lib/abstract_controller/rendering.rb:45:in `process'
  actionpack (3.2.8) lib/action_controller/metal.rb:203:in `dispatch'
  actionpack (3.2.8) lib/action_controller/metal/rack_delegation.rb:14:in `dispatch'
  actionpack (3.2.8) lib/action_controller/metal.rb:246:in `block in action'
  actionpack (3.2.8) lib/action_dispatch/routing/route_set.rb:73:in `call'
  actionpack (3.2.8) lib/action_dispatch/routing/route_set.rb:73:in `dispatch'
  actionpack (3.2.8) lib/action_dispatch/routing/route_set.rb:36:in `call'
  journey (1.0.4) lib/journey/router.rb:68:in `block in call'
  journey (1.0.4) lib/journey/router.rb:56:in `each'
  journey (1.0.4) lib/journey/router.rb:56:in `call'
  actionpack (3.2.8) lib/action_dispatch/routing/route_set.rb:600:in `call'
  omniauth (1.1.4) lib/omniauth/strategy.rb:184:in `call!'
  omniauth (1.1.4) lib/omniauth/strategy.rb:164:in `call'
  newrelic_rpm (3.7.3.204) lib/new_relic/rack/error_collector.rb:55:in `call'
  newrelic_rpm (3.7.3.204) lib/new_relic/rack/agent_hooks.rb:32:in `call'
  newrelic_rpm (3.7.3.204) lib/new_relic/rack/browser_monitoring.rb:27:in `call'
  newrelic_rpm (3.7.3.204) lib/new_relic/rack/developer_mode.rb:45:in `call'
  galetahub-simple_captcha (0.1.5) lib/simple_captcha/middleware.rb:20:in `call'
  /Users/kevinmuller/.rvm/gems/ruby-2.2.4/bundler/gems/client_side_validations-a6a515504520/lib/client_side_validations/middleware.rb:21:in `call'
  warden (1.1.1) lib/warden/manager.rb:35:in `block in call'
  warden (1.1.1) lib/warden/manager.rb:34:in `catch'
  warden (1.1.1) lib/warden/manager.rb:34:in `call'
  actionpack (3.2.8) lib/action_dispatch/middleware/best_standards_support.rb:17:in `call'
  rack (1.4.5) lib/rack/etag.rb:23:in `call'
  rack (1.4.5) lib/rack/conditionalget.rb:25:in `call'
  actionpack (3.2.8) lib/action_dispatch/middleware/head.rb:14:in `call'
  /Users/kevinmuller/.rvm/gems/ruby-2.2.4/bundler/gems/remotipart-aadc29e996c3/lib/remotipart/middleware.rb:27:in `call'
  actionpack (3.2.8) lib/action_dispatch/middleware/params_parser.rb:21:in `call'
  actionpack (3.2.8) lib/action_dispatch/middleware/flash.rb:242:in `call'
  rack (1.4.5) lib/rack/session/abstract/id.rb:210:in `context'
  rack (1.4.5) lib/rack/session/abstract/id.rb:205:in `call'
  actionpack (3.2.8) lib/action_dispatch/middleware/cookies.rb:339:in `call'
  dragonfly (0.9.15) lib/dragonfly/cookie_monster.rb:9:in `call'
  activerecord (3.2.8) lib/active_record/query_cache.rb:64:in `call'
  activerecord (3.2.8) lib/active_record/connection_adapters/abstract/connection_pool.rb:473:in `call'
  actionpack (3.2.8) lib/action_dispatch/middleware/callbacks.rb:28:in `block in call'
  activesupport (3.2.8) lib/active_support/callbacks.rb:405:in `_run__3888729128259930595__call__2664142449717993528__callbacks'
  activesupport (3.2.8) lib/active_support/callbacks.rb:405:in `__run_callback'
  activesupport (3.2.8) lib/active_support/callbacks.rb:385:in `_run_call_callbacks'
  activesupport (3.2.8) lib/active_support/callbacks.rb:81:in `run_callbacks'
  actionpack (3.2.8) lib/action_dispatch/middleware/callbacks.rb:27:in `call'
  actionpack (3.2.8) lib/action_dispatch/middleware/reloader.rb:65:in `call'
  actionpack (3.2.8) lib/action_dispatch/middleware/remote_ip.rb:31:in `call'
  actionpack (3.2.8) lib/action_dispatch/middleware/debug_exceptions.rb:16:in `call'
  actionpack (3.2.8) lib/action_dispatch/middleware/show_exceptions.rb:56:in `call'
  railties (3.2.8) lib/rails/rack/logger.rb:26:in `call_app'
  railties (3.2.8) lib/rails/rack/logger.rb:16:in `call'
  quiet_assets (1.0.3) lib/quiet_assets.rb:23:in `call_with_quiet_assets'
  actionpack (3.2.8) lib/action_dispatch/middleware/request_id.rb:22:in `call'
  rack (1.4.5) lib/rack/methodoverride.rb:21:in `call'
  rack (1.4.5) lib/rack/runtime.rb:17:in `call'
  activesupport (3.2.8) lib/active_support/cache/strategy/local_cache.rb:72:in `call'
  rack (1.4.5) lib/rack/lock.rb:15:in `call'
  actionpack (3.2.8) lib/action_dispatch/middleware/static.rb:62:in `call'
  dragonfly (0.9.15) lib/dragonfly/middleware.rb:13:in `call'
  rack-cache (1.2) lib/rack/cache/context.rb:136:in `forward'
  rack-cache (1.2) lib/rack/cache/context.rb:245:in `fetch'
  rack-cache (1.2) lib/rack/cache/context.rb:185:in `lookup'
  rack-cache (1.2) lib/rack/cache/context.rb:66:in `call!'
  rack-cache (1.2) lib/rack/cache/context.rb:51:in `call'
  railties (3.2.8) lib/rails/engine.rb:479:in `call'
  railties (3.2.8) lib/rails/application.rb:223:in `call'
  rack (1.4.5) lib/rack/content_length.rb:14:in `call'
  railties (3.2.8) lib/rails/rack/log_tailer.rb:17:in `call'
  rack (1.4.5) lib/rack/handler/webrick.rb:59:in `service'
  /Users/kevinmuller/.rvm/rubies/ruby-2.2.4/lib/ruby/2.2.0/webrick/httpserver.rb:138:in `service'
  /Users/kevinmuller/.rvm/rubies/ruby-2.2.4/lib/ruby/2.2.0/webrick/httpserver.rb:94:in `run'
  /Users/kevinmuller/.rvm/rubies/ruby-2.2.4/lib/ruby/2.2.0/webrick/server.rb:294:in `block in start_thread'


  Rendered /Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_dispatch/middleware/templates/rescues/unknown_action.erb within rescues/layout (0.3ms)


Started GET "/admin/collections/new" for 127.0.0.1 at 2016-01-16 19:32:47 +0100

AbstractController::ActionNotFound (The action 'new' could not be found for CollectionsController):
  actionpack (3.2.8) lib/abstract_controller/base.rb:116:in `process'
  actionpack (3.2.8) lib/abstract_controller/rendering.rb:45:in `process'
  actionpack (3.2.8) lib/action_controller/metal.rb:203:in `dispatch'
  actionpack (3.2.8) lib/action_controller/metal/rack_delegation.rb:14:in `dispatch'
  actionpack (3.2.8) lib/action_controller/metal.rb:246:in `block in action'
  actionpack (3.2.8) lib/action_dispatch/routing/route_set.rb:73:in `call'
  actionpack (3.2.8) lib/action_dispatch/routing/route_set.rb:73:in `dispatch'
  actionpack (3.2.8) lib/action_dispatch/routing/route_set.rb:36:in `call'
  journey (1.0.4) lib/journey/router.rb:68:in `block in call'
  journey (1.0.4) lib/journey/router.rb:56:in `each'
  journey (1.0.4) lib/journey/router.rb:56:in `call'
  actionpack (3.2.8) lib/action_dispatch/routing/route_set.rb:600:in `call'
  omniauth (1.1.4) lib/omniauth/strategy.rb:184:in `call!'
  omniauth (1.1.4) lib/omniauth/strategy.rb:164:in `call'
  newrelic_rpm (3.7.3.204) lib/new_relic/rack/error_collector.rb:55:in `call'
  newrelic_rpm (3.7.3.204) lib/new_relic/rack/agent_hooks.rb:32:in `call'
  newrelic_rpm (3.7.3.204) lib/new_relic/rack/browser_monitoring.rb:27:in `call'
  newrelic_rpm (3.7.3.204) lib/new_relic/rack/developer_mode.rb:45:in `call'
  galetahub-simple_captcha (0.1.5) lib/simple_captcha/middleware.rb:20:in `call'
  /Users/kevinmuller/.rvm/gems/ruby-2.2.4/bundler/gems/client_side_validations-a6a515504520/lib/client_side_validations/middleware.rb:21:in `call'
  warden (1.1.1) lib/warden/manager.rb:35:in `block in call'
  warden (1.1.1) lib/warden/manager.rb:34:in `catch'
  warden (1.1.1) lib/warden/manager.rb:34:in `call'
  actionpack (3.2.8) lib/action_dispatch/middleware/best_standards_support.rb:17:in `call'
  rack (1.4.5) lib/rack/etag.rb:23:in `call'
  rack (1.4.5) lib/rack/conditionalget.rb:25:in `call'
  actionpack (3.2.8) lib/action_dispatch/middleware/head.rb:14:in `call'
  /Users/kevinmuller/.rvm/gems/ruby-2.2.4/bundler/gems/remotipart-aadc29e996c3/lib/remotipart/middleware.rb:27:in `call'
  actionpack (3.2.8) lib/action_dispatch/middleware/params_parser.rb:21:in `call'
  actionpack (3.2.8) lib/action_dispatch/middleware/flash.rb:242:in `call'
  rack (1.4.5) lib/rack/session/abstract/id.rb:210:in `context'
  rack (1.4.5) lib/rack/session/abstract/id.rb:205:in `call'
  actionpack (3.2.8) lib/action_dispatch/middleware/cookies.rb:339:in `call'
  dragonfly (0.9.15) lib/dragonfly/cookie_monster.rb:9:in `call'
  activerecord (3.2.8) lib/active_record/query_cache.rb:64:in `call'
  activerecord (3.2.8) lib/active_record/connection_adapters/abstract/connection_pool.rb:473:in `call'
  actionpack (3.2.8) lib/action_dispatch/middleware/callbacks.rb:28:in `block in call'
  activesupport (3.2.8) lib/active_support/callbacks.rb:405:in `_run__3888729128259930595__call__2664142449717993528__callbacks'
  activesupport (3.2.8) lib/active_support/callbacks.rb:405:in `__run_callback'
  activesupport (3.2.8) lib/active_support/callbacks.rb:385:in `_run_call_callbacks'
  activesupport (3.2.8) lib/active_support/callbacks.rb:81:in `run_callbacks'
  actionpack (3.2.8) lib/action_dispatch/middleware/callbacks.rb:27:in `call'
  actionpack (3.2.8) lib/action_dispatch/middleware/reloader.rb:65:in `call'
  actionpack (3.2.8) lib/action_dispatch/middleware/remote_ip.rb:31:in `call'
  actionpack (3.2.8) lib/action_dispatch/middleware/debug_exceptions.rb:16:in `call'
  actionpack (3.2.8) lib/action_dispatch/middleware/show_exceptions.rb:56:in `call'
  railties (3.2.8) lib/rails/rack/logger.rb:26:in `call_app'
  railties (3.2.8) lib/rails/rack/logger.rb:16:in `call'
  quiet_assets (1.0.3) lib/quiet_assets.rb:23:in `call_with_quiet_assets'
  actionpack (3.2.8) lib/action_dispatch/middleware/request_id.rb:22:in `call'
  rack (1.4.5) lib/rack/methodoverride.rb:21:in `call'
  rack (1.4.5) lib/rack/runtime.rb:17:in `call'
  activesupport (3.2.8) lib/active_support/cache/strategy/local_cache.rb:72:in `call'
  rack (1.4.5) lib/rack/lock.rb:15:in `call'
  actionpack (3.2.8) lib/action_dispatch/middleware/static.rb:62:in `call'
  dragonfly (0.9.15) lib/dragonfly/middleware.rb:13:in `call'
  rack-cache (1.2) lib/rack/cache/context.rb:136:in `forward'
  rack-cache (1.2) lib/rack/cache/context.rb:245:in `fetch'
  rack-cache (1.2) lib/rack/cache/context.rb:185:in `lookup'
  rack-cache (1.2) lib/rack/cache/context.rb:66:in `call!'
  rack-cache (1.2) lib/rack/cache/context.rb:51:in `call'
  railties (3.2.8) lib/rails/engine.rb:479:in `call'
  railties (3.2.8) lib/rails/application.rb:223:in `call'
  rack (1.4.5) lib/rack/content_length.rb:14:in `call'
  railties (3.2.8) lib/rails/rack/log_tailer.rb:17:in `call'
  rack (1.4.5) lib/rack/handler/webrick.rb:59:in `service'
  /Users/kevinmuller/.rvm/rubies/ruby-2.2.4/lib/ruby/2.2.0/webrick/httpserver.rb:138:in `service'
  /Users/kevinmuller/.rvm/rubies/ruby-2.2.4/lib/ruby/2.2.0/webrick/httpserver.rb:94:in `run'
  /Users/kevinmuller/.rvm/rubies/ruby-2.2.4/lib/ruby/2.2.0/webrick/server.rb:294:in `block in start_thread'


  Rendered /Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_dispatch/middleware/templates/rescues/unknown_action.erb within rescues/layout (0.3ms)


Started GET "/admin/collections" for 127.0.0.1 at 2016-01-16 19:33:07 +0100
Processing by CollectionsController#index as HTML
  Rendered shared/_restaurant_manage_tabs.html.erb (1.3ms)
  [1m[36mCollection Load (0.2ms)[0m  [1mSELECT `collections`.* FROM `collections` ORDER BY name ASC, created_at DESC LIMIT 12 OFFSET 0[0m
  [1m[35m (0.2ms)[0m  SELECT COUNT(*) FROM `collections` 
  Rendered collections/index.erb within layouts/admin (17.8ms)
  [1m[36mUser Load (0.3ms)[0m  [1mSELECT `users`.* FROM `users` WHERE `users`.`id` = 1 LIMIT 1[0m
Completed 200 OK in 122ms (Views: 91.3ms | ActiveRecord: 3.0ms)


Started GET "/admin/collections" for 127.0.0.1 at 2016-01-16 19:33:24 +0100
Processing by CollectionsController#index as HTML
  Rendered shared/_restaurant_manage_tabs.html.erb (0.5ms)
  [1m[35mCollection Load (0.3ms)[0m  SELECT `collections`.* FROM `collections` ORDER BY name ASC, created_at DESC LIMIT 12 OFFSET 0
  [1m[36m (0.1ms)[0m  [1mSELECT COUNT(*) FROM `collections` [0m
  Rendered collections/index.erb within layouts/admin (7.5ms)
  [1m[35mUser Load (0.2ms)[0m  SELECT `users`.* FROM `users` WHERE `users`.`id` = 1 LIMIT 1
Completed 200 OK in 15ms (Views: 13.6ms | ActiveRecord: 0.7ms)


Started GET "/admin/collections/admin_new_collection" for 127.0.0.1 at 2016-01-16 19:33:26 +0100
Processing by CollectionsController#admin_new_collection as HTML
  [1m[36mUser Load (0.4ms)[0m  [1mSELECT `users`.* FROM `users` WHERE `users`.`id` = 1 LIMIT 1[0m
  Rendered collections/_collection_form.html.erb (11.8ms)
  Rendered collections/_collection_restaurants_form.html.erb (0.7ms)
  Rendered collections/_upload_collection_image.html.erb (23.5ms)
  Rendered collections/admin_new_collection.html.erb within layouts/admin (39.4ms)
Completed 200 OK in 71ms (Views: 44.3ms | ActiveRecord: 1.5ms)


Started GET "/collection_images?r_id=" for 127.0.0.1 at 2016-01-16 19:33:26 +0100
  [1m[35m (0.2ms)[0m  SELECT COUNT(*) FROM `filter_types` WHERE (code = 'features')
  [1m[36m (0.2ms)[0m  [1mSELECT COUNT(*) FROM `filters` WHERE (code = 'offer')[0m
  [1m[35mFilter Load (0.2ms)[0m  SELECT `filters`.* FROM `filters` WHERE (code = 'offer') LIMIT 1
  [1m[36mFilterType Load (0.2ms)[0m  [1mSELECT `filter_types`.* FROM `filter_types` WHERE (code = 'features') LIMIT 1[0m
  [1m[35mCACHE (0.0ms)[0m  SELECT `filters`.* FROM `filters` WHERE (code = 'offer') LIMIT 1
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT `filter_types`.* FROM `filter_types` WHERE (code = 'features') LIMIT 1[0m
Processing by RestaurantsController#show as JSON
  Parameters: {"r_id"=>"", "id"=>"collection_images"}
  [1m[35mRestaurant Load (1.5ms)[0m  SELECT `restaurants`.* FROM `restaurants` WHERE `restaurants`.`slug` = 'collection_images' LIMIT 1
  [1m[36mRestaurant Load (0.2ms)[0m  [1mSELECT `restaurants`.* FROM `restaurants` WHERE `restaurants`.`id` = 0 LIMIT 1[0m
Completed 500 Internal Server Error in 8ms

ActiveRecord::RecordNotFound (Couldn't find Restaurant with id=collection_images):
  app/controllers/restaurants_controller.rb:193:in `show'


  Rendered /Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_dispatch/middleware/templates/rescues/_trace.erb (1.1ms)
  Rendered /Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_dispatch/middleware/templates/rescues/_request_and_response.erb (1.0ms)
  Rendered /Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_dispatch/middleware/templates/rescues/diagnostics.erb within rescues/layout (44.7ms)


Started POST "/admin/collections" for 127.0.0.1 at 2016-01-16 19:33:47 +0100
Processing by CollectionsController#create as HTML
  Parameters: {"utf8"=>"âœ“", "authenticity_token"=>"ZhR8a2fYr/EQcBrBVm2c17tt7AHk64f/gvsZ5fOllxc=", "admin"=>"true", "collection"=>{"name"=>"Test", "description"=>"test"}, "image_url"=>#<ActionDispatch::Http::UploadedFile:0x007feae7557fb0 @original_filename="chinese.png", @content_type="image/png", @headers="Content-Disposition: form-data; name=\"image_url\"; filename=\"chinese.png\"\r\nContent-Type: image/png\r\n", @tempfile=#<Tempfile:/var/folders/rf/q4l8n5k56pnbjgkdtzrhq_w00000gn/T/RackMultipart20160116-27868-krha76>>}
  [1m[35mCollection Load (0.4ms)[0m  SELECT `collections`.* FROM `collections` WHERE `collections`.`name` = 'Test' LIMIT 1
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35m (0.1ms)[0m  ROLLBACK
Completed 500 Internal Server Error in 23ms

ActionView::MissingTemplate (Missing template collections/new, application/new with {:locale=>[:en], :formats=>[:html], :handlers=>[:erb, :builder, :coffee, :slim]}. Searched in:
  * "/Users/kevinmuller/halalgems_backend/app/views"
  * "/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/ckeditor-3.7.3/app/views"
  * "/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/devise_mailchimp-0.0.4/app/views"
  * "/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/kaminari-bootstrap-3.0.1/app/views"
  * "/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/bootstrap-kaminari-views-0.0.3/app/views"
  * "/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/kaminari-0.14.1/app/views"
  * "/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/devise-2.0.4/app/views"
):
  app/controllers/collections_controller.rb:83:in `block (2 levels) in create'
  app/controllers/collections_controller.rb:77:in `create'


  Rendered /Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_dispatch/middleware/templates/rescues/missing_template.erb within rescues/layout (0.4ms)


Started POST "/admin/collections" for 127.0.0.1 at 2016-01-16 19:35:33 +0100
Processing by CollectionsController#create as HTML
  Parameters: {"utf8"=>"âœ“", "authenticity_token"=>"ZhR8a2fYr/EQcBrBVm2c17tt7AHk64f/gvsZ5fOllxc=", "admin"=>"true", "collection"=>{"name"=>"Test", "description"=>"test"}, "image_url"=>#<ActionDispatch::Http::UploadedFile:0x007feae71390c8 @original_filename="chinese.png", @content_type="image/png", @headers="Content-Disposition: form-data; name=\"image_url\"; filename=\"chinese.png\"\r\nContent-Type: image/png\r\n", @tempfile=#<Tempfile:/var/folders/rf/q4l8n5k56pnbjgkdtzrhq_w00000gn/T/RackMultipart20160116-27868-1aq4p6m>>}
  [1m[36mCollection Load (0.4ms)[0m  [1mSELECT `collections`.* FROM `collections` WHERE `collections`.`name` = 'Test' LIMIT 1[0m
  [1m[35m (0.1ms)[0m  BEGIN
  [1m[36m (0.1ms)[0m  [1mROLLBACK[0m
Completed 500 Internal Server Error in 14ms

ActionView::MissingTemplate (Missing template collections/new, application/new with {:locale=>[:en], :formats=>[:html], :handlers=>[:erb, :builder, :coffee, :slim]}. Searched in:
  * "/Users/kevinmuller/halalgems_backend/app/views"
  * "/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/ckeditor-3.7.3/app/views"
  * "/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/devise_mailchimp-0.0.4/app/views"
  * "/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/kaminari-bootstrap-3.0.1/app/views"
  * "/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/bootstrap-kaminari-views-0.0.3/app/views"
  * "/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/kaminari-0.14.1/app/views"
  * "/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/devise-2.0.4/app/views"
):
  app/controllers/collections_controller.rb:83:in `block (2 levels) in create'
  app/controllers/collections_controller.rb:77:in `create'


  Rendered /Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_dispatch/middleware/templates/rescues/missing_template.erb within rescues/layout (0.4ms)
Connecting to database specified by database.yml
DEPRECATION WARNING: Passing :tag, :class and others to use is deprecated. Please invoke b.use :label, :wrap_with => {:class=>"simple_label"} instead. (called from block (2 levels) in <top (required)> at /Users/kevinmuller/halalgems_backend/config/initializers/simple_form.rb:67)


Started GET "/admin/collections/admin_new_collection" for 127.0.0.1 at 2016-01-16 19:35:56 +0100
Processing by CollectionsController#admin_new_collection as HTML
  [1m[36mUser Load (0.3ms)[0m  [1mSELECT `users`.* FROM `users` WHERE `users`.`id` = 1 LIMIT 1[0m
  Rendered collections/_collection_form.html.erb (11.3ms)
  Rendered collections/_collection_restaurants_form.html.erb (0.6ms)
  Rendered collections/_upload_collection_image.html.erb (18.3ms)
  Rendered collections/admin_new_collection.html.erb within layouts/admin (34.3ms)
Completed 200 OK in 93ms (Views: 52.0ms | ActiveRecord: 3.6ms)


Started GET "/collection_images?r_id=" for 127.0.0.1 at 2016-01-16 19:35:56 +0100
  [1m[35m (0.2ms)[0m  SELECT COUNT(*) FROM `filter_types` WHERE (code = 'features')
  [1m[36m (0.2ms)[0m  [1mSELECT COUNT(*) FROM `filters` WHERE (code = 'offer')[0m
  [1m[35mFilter Load (0.2ms)[0m  SELECT `filters`.* FROM `filters` WHERE (code = 'offer') LIMIT 1
  [1m[36mFilterType Load (0.4ms)[0m  [1mSELECT `filter_types`.* FROM `filter_types` WHERE (code = 'features') LIMIT 1[0m
  [1m[35mCACHE (0.0ms)[0m  SELECT `filters`.* FROM `filters` WHERE (code = 'offer') LIMIT 1
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT `filter_types`.* FROM `filter_types` WHERE (code = 'features') LIMIT 1[0m
Processing by RestaurantsController#show as JSON
  Parameters: {"r_id"=>"", "id"=>"collection_images"}
  [1m[35mRestaurant Load (1.5ms)[0m  SELECT `restaurants`.* FROM `restaurants` WHERE `restaurants`.`slug` = 'collection_images' LIMIT 1
  [1m[36mRestaurant Load (0.7ms)[0m  [1mSELECT `restaurants`.* FROM `restaurants` WHERE `restaurants`.`id` = 0 LIMIT 1[0m
Completed 500 Internal Server Error in 9ms

ActiveRecord::RecordNotFound (Couldn't find Restaurant with id=collection_images):
  app/controllers/restaurants_controller.rb:193:in `show'


  Rendered /Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_dispatch/middleware/templates/rescues/_trace.erb (0.9ms)
  Rendered /Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_dispatch/middleware/templates/rescues/_request_and_response.erb (0.9ms)
  Rendered /Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_dispatch/middleware/templates/rescues/diagnostics.erb within rescues/layout (48.7ms)


Started POST "/admin/collections" for 127.0.0.1 at 2016-01-16 19:35:58 +0100
Processing by CollectionsController#create as HTML
  Parameters: {"utf8"=>"âœ“", "authenticity_token"=>"ZhR8a2fYr/EQcBrBVm2c17tt7AHk64f/gvsZ5fOllxc=", "admin"=>"true", "collection"=>{"name"=>"Test", "description"=>"test"}, "image_url"=>#<ActionDispatch::Http::UploadedFile:0x007ffc6d1b1220 @original_filename="chinese.png", @content_type="image/png", @headers="Content-Disposition: form-data; name=\"image_url\"; filename=\"chinese.png\"\r\nContent-Type: image/png\r\n", @tempfile=#<Tempfile:/var/folders/rf/q4l8n5k56pnbjgkdtzrhq_w00000gn/T/RackMultipart20160116-27879-k2cvy9>>}
  [1m[35mCollection Load (0.4ms)[0m  SELECT `collections`.* FROM `collections` WHERE `collections`.`name` = 'Test' LIMIT 1
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35m (0.1ms)[0m  ROLLBACK
Completed 500 Internal Server Error in 13ms

ActionView::MissingTemplate (Missing template collections/new, application/new with {:locale=>[:en], :formats=>[:html], :handlers=>[:erb, :builder, :coffee, :slim]}. Searched in:
  * "/Users/kevinmuller/halalgems_backend/app/views"
  * "/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/ckeditor-3.7.3/app/views"
  * "/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/devise_mailchimp-0.0.4/app/views"
  * "/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/kaminari-bootstrap-3.0.1/app/views"
  * "/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/bootstrap-kaminari-views-0.0.3/app/views"
  * "/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/kaminari-0.14.1/app/views"
  * "/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/devise-2.0.4/app/views"
):
  app/controllers/collections_controller.rb:83:in `block (2 levels) in create'
  app/controllers/collections_controller.rb:77:in `create'


  Rendered /Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_dispatch/middleware/templates/rescues/missing_template.erb within rescues/layout (0.4ms)


Started POST "/admin/collections" for 127.0.0.1 at 2016-01-16 19:36:58 +0100
Processing by CollectionsController#create as HTML
  Parameters: {"utf8"=>"âœ“", "authenticity_token"=>"ZhR8a2fYr/EQcBrBVm2c17tt7AHk64f/gvsZ5fOllxc=", "admin"=>"true", "collection"=>{"name"=>"Test", "description"=>"test"}, "image_url"=>#<ActionDispatch::Http::UploadedFile:0x007ffc6cdf0d20 @original_filename="chinese.png", @content_type="image/png", @headers="Content-Disposition: form-data; name=\"image_url\"; filename=\"chinese.png\"\r\nContent-Type: image/png\r\n", @tempfile=#<Tempfile:/var/folders/rf/q4l8n5k56pnbjgkdtzrhq_w00000gn/T/RackMultipart20160116-27879-13xogme>>}
  [1m[36mCollection Load (0.2ms)[0m  [1mSELECT `collections`.* FROM `collections` WHERE `collections`.`name` = 'Test' LIMIT 1[0m
  [1m[35m (0.1ms)[0m  BEGIN
  [1m[36m (0.1ms)[0m  [1mROLLBACK[0m
  Rendered collections/_collection_form.html.erb (5.6ms)
  Rendered collections/_collection_restaurants_form.html.erb (0.2ms)
  [1m[35mUser Load (0.4ms)[0m  SELECT `users`.* FROM `users` WHERE `users`.`id` = 1 LIMIT 1
  Rendered collections/_upload_collection_image.html.erb (69.5ms)
  Rendered collections/admin_new_collection.html.erb within layouts/application (78.0ms)
  [1m[36mSubscription Load (0.3ms)[0m  [1mSELECT `subscriptions`.* FROM `subscriptions` WHERE `subscriptions`.`user_id` = 1 AND `subscriptions`.`success` = 1[0m
  [1m[35mCACHE (0.0ms)[0m  SELECT `subscriptions`.* FROM `subscriptions` WHERE `subscriptions`.`user_id` = 1 AND `subscriptions`.`success` = 1
  Rendered layouts/_user_pnl.html.erb (43.6ms)
  Rendered layouts/_header.html.erb (45.9ms)
  Rendered layouts/_main_menu.html.slim (9.5ms)
  Rendered layouts/_sub_main_menu.html.slim (3.4ms)
  Rendered layouts/_flash_messages.html.erb (0.4ms)
  [1m[36mBasicsPage Load (0.3ms)[0m  [1mSELECT `basics_pages`.* FROM `basics_pages` WHERE `basics_pages`.`page_name` = 'Footer' LIMIT 1[0m
  Rendered layouts/_footer.html.slim (25.5ms)
Completed 200 OK in 270ms (Views: 254.3ms | ActiveRecord: 7.0ms)


Started GET "/collection_images?r_id=" for 127.0.0.1 at 2016-01-16 19:36:59 +0100
  [1m[35m (0.2ms)[0m  SELECT COUNT(*) FROM `filter_types` WHERE (code = 'features')
  [1m[36m (0.3ms)[0m  [1mSELECT COUNT(*) FROM `filters` WHERE (code = 'offer')[0m
  [1m[35mFilter Load (0.2ms)[0m  SELECT `filters`.* FROM `filters` WHERE (code = 'offer') LIMIT 1
  [1m[36mFilterType Load (0.3ms)[0m  [1mSELECT `filter_types`.* FROM `filter_types` WHERE (code = 'features') LIMIT 1[0m
  [1m[35mCACHE (0.0ms)[0m  SELECT `filters`.* FROM `filters` WHERE (code = 'offer') LIMIT 1
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT `filter_types`.* FROM `filter_types` WHERE (code = 'features') LIMIT 1[0m
Processing by RestaurantsController#show as JSON
  Parameters: {"r_id"=>"", "id"=>"collection_images"}
  [1m[35mRestaurant Load (1.8ms)[0m  SELECT `restaurants`.* FROM `restaurants` WHERE `restaurants`.`slug` = 'collection_images' LIMIT 1
  [1m[36mRestaurant Load (0.3ms)[0m  [1mSELECT `restaurants`.* FROM `restaurants` WHERE `restaurants`.`id` = 0 LIMIT 1[0m
Completed 500 Internal Server Error in 10ms

ActiveRecord::RecordNotFound (Couldn't find Restaurant with id=collection_images):
  app/controllers/restaurants_controller.rb:193:in `show'


  Rendered /Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_dispatch/middleware/templates/rescues/_trace.erb (0.9ms)
  Rendered /Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_dispatch/middleware/templates/rescues/_request_and_response.erb (0.9ms)
  Rendered /Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_dispatch/middleware/templates/rescues/diagnostics.erb within rescues/layout (45.5ms)


Started GET "/admin/collections/admin_new_collection" for 127.0.0.1 at 2016-01-16 19:37:31 +0100
Processing by CollectionsController#admin_new_collection as HTML
  [1m[35mUser Load (0.3ms)[0m  SELECT `users`.* FROM `users` WHERE `users`.`id` = 1 LIMIT 1
  Rendered collections/_collection_form.html.erb (4.8ms)
  Rendered collections/_collection_restaurants_form.html.erb (0.3ms)
  Rendered collections/_upload_collection_image.html.erb (14.3ms)
  Rendered collections/admin_new_collection.html.erb within layouts/admin (21.8ms)
Completed 200 OK in 88ms (Views: 28.4ms | ActiveRecord: 3.0ms)


Started GET "/collection_images?r_id=" for 127.0.0.1 at 2016-01-16 19:37:31 +0100
  [1m[36m (0.3ms)[0m  [1mSELECT COUNT(*) FROM `filter_types` WHERE (code = 'features')[0m
  [1m[35m (0.2ms)[0m  SELECT COUNT(*) FROM `filters` WHERE (code = 'offer')
  [1m[36mFilter Load (0.2ms)[0m  [1mSELECT `filters`.* FROM `filters` WHERE (code = 'offer') LIMIT 1[0m
  [1m[35mFilterType Load (0.4ms)[0m  SELECT `filter_types`.* FROM `filter_types` WHERE (code = 'features') LIMIT 1
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT `filters`.* FROM `filters` WHERE (code = 'offer') LIMIT 1[0m
  [1m[35mCACHE (0.0ms)[0m  SELECT `filter_types`.* FROM `filter_types` WHERE (code = 'features') LIMIT 1
Processing by RestaurantsController#show as JSON
  Parameters: {"r_id"=>"", "id"=>"collection_images"}
  [1m[36mRestaurant Load (1.5ms)[0m  [1mSELECT `restaurants`.* FROM `restaurants` WHERE `restaurants`.`slug` = 'collection_images' LIMIT 1[0m
  [1m[35mRestaurant Load (0.2ms)[0m  SELECT `restaurants`.* FROM `restaurants` WHERE `restaurants`.`id` = 0 LIMIT 1
Completed 500 Internal Server Error in 8ms

ActiveRecord::RecordNotFound (Couldn't find Restaurant with id=collection_images):
  app/controllers/restaurants_controller.rb:193:in `show'


  Rendered /Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_dispatch/middleware/templates/rescues/_trace.erb (1.0ms)
  Rendered /Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_dispatch/middleware/templates/rescues/_request_and_response.erb (0.9ms)
  Rendered /Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_dispatch/middleware/templates/rescues/diagnostics.erb within rescues/layout (49.3ms)


Started POST "/admin/collections" for 127.0.0.1 at 2016-01-16 19:37:33 +0100
Processing by CollectionsController#create as HTML
  Parameters: {"utf8"=>"âœ“", "authenticity_token"=>"ZhR8a2fYr/EQcBrBVm2c17tt7AHk64f/gvsZ5fOllxc=", "admin"=>"true", "collection"=>{"name"=>"Test", "description"=>"test"}, "image_url"=>#<ActionDispatch::Http::UploadedFile:0x007ffc6d4c8b48 @original_filename="chinese.png", @content_type="image/png", @headers="Content-Disposition: form-data; name=\"image_url\"; filename=\"chinese.png\"\r\nContent-Type: image/png\r\n", @tempfile=#<Tempfile:/var/folders/rf/q4l8n5k56pnbjgkdtzrhq_w00000gn/T/RackMultipart20160116-27879-1rb5py3>>}
  [1m[36mCollection Load (0.3ms)[0m  [1mSELECT `collections`.* FROM `collections` WHERE `collections`.`name` = 'Test' LIMIT 1[0m
  [1m[35m (0.1ms)[0m  BEGIN
  [1m[36m (0.1ms)[0m  [1mROLLBACK[0m
Completed 500 Internal Server Error in 13ms

ActionView::MissingTemplate (Missing template collections/collections/admin_new_collection, application/collections/admin_new_collection with {:locale=>[:en], :formats=>[:html], :handlers=>[:erb, :builder, :coffee, :slim]}. Searched in:
  * "/Users/kevinmuller/halalgems_backend/app/views"
  * "/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/ckeditor-3.7.3/app/views"
  * "/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/devise_mailchimp-0.0.4/app/views"
  * "/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/kaminari-bootstrap-3.0.1/app/views"
  * "/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/bootstrap-kaminari-views-0.0.3/app/views"
  * "/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/kaminari-0.14.1/app/views"
  * "/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/devise-2.0.4/app/views"
):
  app/controllers/collections_controller.rb:83:in `block (2 levels) in create'
  app/controllers/collections_controller.rb:77:in `create'


  Rendered /Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_dispatch/middleware/templates/rescues/missing_template.erb within rescues/layout (0.4ms)


Started POST "/admin/collections" for 127.0.0.1 at 2016-01-16 19:37:58 +0100
Processing by CollectionsController#create as HTML
  Parameters: {"utf8"=>"âœ“", "authenticity_token"=>"ZhR8a2fYr/EQcBrBVm2c17tt7AHk64f/gvsZ5fOllxc=", "admin"=>"true", "collection"=>{"name"=>"Test", "description"=>"test"}, "image_url"=>#<ActionDispatch::Http::UploadedFile:0x007ffc69c3c478 @original_filename="chinese.png", @content_type="image/png", @headers="Content-Disposition: form-data; name=\"image_url\"; filename=\"chinese.png\"\r\nContent-Type: image/png\r\n", @tempfile=#<Tempfile:/var/folders/rf/q4l8n5k56pnbjgkdtzrhq_w00000gn/T/RackMultipart20160116-27879-88tjo8>>}
  [1m[35mCollection Load (0.2ms)[0m  SELECT `collections`.* FROM `collections` WHERE `collections`.`name` = 'Test' LIMIT 1
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35m (0.1ms)[0m  ROLLBACK
Completed 500 Internal Server Error in 20ms

ActionView::MissingTemplate (Missing template collections/collections, application/collections with {:locale=>[:en], :formats=>[:html], :handlers=>[:erb, :builder, :coffee, :slim]}. Searched in:
  * "/Users/kevinmuller/halalgems_backend/app/views"
  * "/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/ckeditor-3.7.3/app/views"
  * "/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/devise_mailchimp-0.0.4/app/views"
  * "/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/kaminari-bootstrap-3.0.1/app/views"
  * "/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/bootstrap-kaminari-views-0.0.3/app/views"
  * "/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/kaminari-0.14.1/app/views"
  * "/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/devise-2.0.4/app/views"
):
  app/controllers/collections_controller.rb:83:in `block (2 levels) in create'
  app/controllers/collections_controller.rb:77:in `create'


  Rendered /Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_dispatch/middleware/templates/rescues/missing_template.erb within rescues/layout (0.3ms)


Started GET "/admin/collections/admin_new_collection" for 127.0.0.1 at 2016-01-16 19:38:02 +0100
Processing by CollectionsController#admin_new_collection as HTML
  [1m[36mUser Load (0.2ms)[0m  [1mSELECT `users`.* FROM `users` WHERE `users`.`id` = 1 LIMIT 1[0m
  Rendered collections/_collection_form.html.erb (6.1ms)
  Rendered collections/_collection_restaurants_form.html.erb (0.9ms)
  Rendered collections/_upload_collection_image.html.erb (19.4ms)
  Rendered collections/admin_new_collection.html.erb within layouts/admin (30.7ms)
Completed 200 OK in 122ms (Views: 36.4ms | ActiveRecord: 2.2ms)


Started GET "/collection_images?r_id=" for 127.0.0.1 at 2016-01-16 19:38:02 +0100
  [1m[35m (0.2ms)[0m  SELECT COUNT(*) FROM `filter_types` WHERE (code = 'features')
  [1m[36m (0.9ms)[0m  [1mSELECT COUNT(*) FROM `filters` WHERE (code = 'offer')[0m
  [1m[35mFilter Load (0.1ms)[0m  SELECT `filters`.* FROM `filters` WHERE (code = 'offer') LIMIT 1
  [1m[36mFilterType Load (0.3ms)[0m  [1mSELECT `filter_types`.* FROM `filter_types` WHERE (code = 'features') LIMIT 1[0m
  [1m[35mCACHE (0.0ms)[0m  SELECT `filters`.* FROM `filters` WHERE (code = 'offer') LIMIT 1
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT `filter_types`.* FROM `filter_types` WHERE (code = 'features') LIMIT 1[0m
Processing by RestaurantsController#show as JSON
  Parameters: {"r_id"=>"", "id"=>"collection_images"}
  [1m[35mRestaurant Load (1.6ms)[0m  SELECT `restaurants`.* FROM `restaurants` WHERE `restaurants`.`slug` = 'collection_images' LIMIT 1
  [1m[36mRestaurant Load (0.2ms)[0m  [1mSELECT `restaurants`.* FROM `restaurants` WHERE `restaurants`.`id` = 0 LIMIT 1[0m
Completed 500 Internal Server Error in 7ms

ActiveRecord::RecordNotFound (Couldn't find Restaurant with id=collection_images):
  app/controllers/restaurants_controller.rb:193:in `show'


  Rendered /Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_dispatch/middleware/templates/rescues/_trace.erb (1.9ms)
  Rendered /Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_dispatch/middleware/templates/rescues/_request_and_response.erb (1.1ms)
  Rendered /Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_dispatch/middleware/templates/rescues/diagnostics.erb within rescues/layout (47.0ms)


Started POST "/admin/collections" for 127.0.0.1 at 2016-01-16 19:38:03 +0100
Processing by CollectionsController#create as HTML
  Parameters: {"utf8"=>"âœ“", "authenticity_token"=>"ZhR8a2fYr/EQcBrBVm2c17tt7AHk64f/gvsZ5fOllxc=", "admin"=>"true", "collection"=>{"name"=>"Test", "description"=>"test"}, "image_url"=>#<ActionDispatch::Http::UploadedFile:0x007ffc6cdfaa00 @original_filename="chinese.png", @content_type="image/png", @headers="Content-Disposition: form-data; name=\"image_url\"; filename=\"chinese.png\"\r\nContent-Type: image/png\r\n", @tempfile=#<Tempfile:/var/folders/rf/q4l8n5k56pnbjgkdtzrhq_w00000gn/T/RackMultipart20160116-27879-1r7n4xs>>}
  [1m[35mCollection Load (0.3ms)[0m  SELECT `collections`.* FROM `collections` WHERE `collections`.`name` = 'Test' LIMIT 1
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35m (0.1ms)[0m  ROLLBACK
Completed 500 Internal Server Error in 12ms

ActionView::MissingTemplate (Missing template collections/collections, application/collections with {:locale=>[:en], :formats=>[:html], :handlers=>[:erb, :builder, :coffee, :slim]}. Searched in:
  * "/Users/kevinmuller/halalgems_backend/app/views"
  * "/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/ckeditor-3.7.3/app/views"
  * "/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/devise_mailchimp-0.0.4/app/views"
  * "/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/kaminari-bootstrap-3.0.1/app/views"
  * "/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/bootstrap-kaminari-views-0.0.3/app/views"
  * "/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/kaminari-0.14.1/app/views"
  * "/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/devise-2.0.4/app/views"
):
  app/controllers/collections_controller.rb:83:in `block (2 levels) in create'
  app/controllers/collections_controller.rb:77:in `create'


  Rendered /Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_dispatch/middleware/templates/rescues/missing_template.erb within rescues/layout (0.4ms)


Started POST "/admin/collections" for 127.0.0.1 at 2016-01-16 19:39:22 +0100
Processing by CollectionsController#create as HTML
  Parameters: {"utf8"=>"âœ“", "authenticity_token"=>"ZhR8a2fYr/EQcBrBVm2c17tt7AHk64f/gvsZ5fOllxc=", "admin"=>"true", "collection"=>{"name"=>"Test", "description"=>"test"}, "image_url"=>#<ActionDispatch::Http::UploadedFile:0x007ffc6fcba9a8 @original_filename="chinese.png", @content_type="image/png", @headers="Content-Disposition: form-data; name=\"image_url\"; filename=\"chinese.png\"\r\nContent-Type: image/png\r\n", @tempfile=#<Tempfile:/var/folders/rf/q4l8n5k56pnbjgkdtzrhq_w00000gn/T/RackMultipart20160116-27879-1h0oazc>>}
  [1m[36mCollection Load (0.2ms)[0m  [1mSELECT `collections`.* FROM `collections` WHERE `collections`.`name` = 'Test' LIMIT 1[0m
  [1m[35m (0.1ms)[0m  BEGIN
  [1m[36m (0.2ms)[0m  [1mROLLBACK[0m
  Rendered collections/_collection_form.html.erb (6.3ms)
  Rendered collections/_collection_restaurants_form.html.erb (0.3ms)
  [1m[35mUser Load (0.3ms)[0m  SELECT `users`.* FROM `users` WHERE `users`.`id` = 1 LIMIT 1
  Rendered collections/_upload_collection_image.html.erb (94.8ms)
  Rendered collections/admin_new_collection.html.erb within layouts/application (104.1ms)
  [1m[36mSubscription Load (0.3ms)[0m  [1mSELECT `subscriptions`.* FROM `subscriptions` WHERE `subscriptions`.`user_id` = 1 AND `subscriptions`.`success` = 1[0m
  [1m[35mCACHE (0.0ms)[0m  SELECT `subscriptions`.* FROM `subscriptions` WHERE `subscriptions`.`user_id` = 1 AND `subscriptions`.`success` = 1
  Rendered layouts/_user_pnl.html.erb (21.0ms)
  Rendered layouts/_header.html.erb (22.0ms)
  Rendered layouts/_main_menu.html.slim (0.4ms)
  Rendered layouts/_sub_main_menu.html.slim (0.0ms)
  Rendered layouts/_flash_messages.html.erb (0.1ms)
  [1m[36mBasicsPage Load (0.2ms)[0m  [1mSELECT `basics_pages`.* FROM `basics_pages` WHERE `basics_pages`.`page_name` = 'Footer' LIMIT 1[0m
  Rendered layouts/_footer.html.slim (13.7ms)
Completed 200 OK in 167ms (Views: 149.6ms | ActiveRecord: 6.2ms)


Started GET "/collection_images?r_id=" for 127.0.0.1 at 2016-01-16 19:39:23 +0100
  [1m[35m (0.2ms)[0m  SELECT COUNT(*) FROM `filter_types` WHERE (code = 'features')
  [1m[36m (0.2ms)[0m  [1mSELECT COUNT(*) FROM `filters` WHERE (code = 'offer')[0m
  [1m[35mFilter Load (0.5ms)[0m  SELECT `filters`.* FROM `filters` WHERE (code = 'offer') LIMIT 1
  [1m[36mFilterType Load (0.3ms)[0m  [1mSELECT `filter_types`.* FROM `filter_types` WHERE (code = 'features') LIMIT 1[0m
  [1m[35mCACHE (0.0ms)[0m  SELECT `filters`.* FROM `filters` WHERE (code = 'offer') LIMIT 1
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT `filter_types`.* FROM `filter_types` WHERE (code = 'features') LIMIT 1[0m
Processing by RestaurantsController#show as JSON
  Parameters: {"r_id"=>"", "id"=>"collection_images"}
  [1m[35mRestaurant Load (1.8ms)[0m  SELECT `restaurants`.* FROM `restaurants` WHERE `restaurants`.`slug` = 'collection_images' LIMIT 1
  [1m[36mRestaurant Load (0.3ms)[0m  [1mSELECT `restaurants`.* FROM `restaurants` WHERE `restaurants`.`id` = 0 LIMIT 1[0m
Completed 500 Internal Server Error in 11ms

ActiveRecord::RecordNotFound (Couldn't find Restaurant with id=collection_images):
  app/controllers/restaurants_controller.rb:193:in `show'


  Rendered /Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_dispatch/middleware/templates/rescues/_trace.erb (1.1ms)
  Rendered /Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_dispatch/middleware/templates/rescues/_request_and_response.erb (1.0ms)
  Rendered /Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_dispatch/middleware/templates/rescues/diagnostics.erb within rescues/layout (43.8ms)


Started GET "/admin/collections/admin_new_collection" for 127.0.0.1 at 2016-01-16 19:39:26 +0100
Processing by CollectionsController#admin_new_collection as HTML
  [1m[35mUser Load (0.3ms)[0m  SELECT `users`.* FROM `users` WHERE `users`.`id` = 1 LIMIT 1
  Rendered collections/_collection_form.html.erb (7.7ms)
  Rendered collections/_collection_restaurants_form.html.erb (0.3ms)
  Rendered collections/_upload_collection_image.html.erb (0.9ms)
  Rendered collections/admin_new_collection.html.erb within layouts/admin (12.0ms)
Completed 200 OK in 34ms (Views: 19.4ms | ActiveRecord: 0.3ms)


Started GET "/collection_images?r_id=" for 127.0.0.1 at 2016-01-16 19:39:26 +0100
Processing by RestaurantsController#show as JSON
  Parameters: {"r_id"=>"", "id"=>"collection_images"}
  [1m[36mRestaurant Load (1.6ms)[0m  [1mSELECT `restaurants`.* FROM `restaurants` WHERE `restaurants`.`slug` = 'collection_images' LIMIT 1[0m
  [1m[35mRestaurant Load (0.2ms)[0m  SELECT `restaurants`.* FROM `restaurants` WHERE `restaurants`.`id` = 0 LIMIT 1
Completed 500 Internal Server Error in 4ms

ActiveRecord::RecordNotFound (Couldn't find Restaurant with id=collection_images):
  app/controllers/restaurants_controller.rb:193:in `show'


  Rendered /Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_dispatch/middleware/templates/rescues/_trace.erb (1.1ms)
  Rendered /Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_dispatch/middleware/templates/rescues/_request_and_response.erb (1.0ms)
  Rendered /Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_dispatch/middleware/templates/rescues/diagnostics.erb within rescues/layout (47.3ms)


Started POST "/admin/collections" for 127.0.0.1 at 2016-01-16 19:39:31 +0100
Processing by CollectionsController#create as HTML
  Parameters: {"utf8"=>"âœ“", "authenticity_token"=>"ZhR8a2fYr/EQcBrBVm2c17tt7AHk64f/gvsZ5fOllxc=", "admin"=>"true", "collection"=>{"name"=>"Test", "description"=>"test", "image_url"=>#<ActionDispatch::Http::UploadedFile:0x007ffc69f3c290 @original_filename="steak.png", @content_type="image/png", @headers="Content-Disposition: form-data; name=\"collection[image_url]\"; filename=\"steak.png\"\r\nContent-Type: image/png\r\n", @tempfile=#<Tempfile:/var/folders/rf/q4l8n5k56pnbjgkdtzrhq_w00000gn/T/RackMultipart20160116-27879-g6w0dz>>}}
  [1m[36mCollection Load (0.4ms)[0m  [1mSELECT `collections`.* FROM `collections` WHERE `collections`.`name` = 'Test' LIMIT 1[0m
Completed 500 Internal Server Error in 2ms

ActiveModel::MassAssignmentSecurity::Error (Can't mass-assign protected attributes: image_url):
  app/controllers/collections_controller.rb:79:in `new'
  app/controllers/collections_controller.rb:79:in `block in create'
  app/controllers/collections_controller.rb:77:in `create'


  Rendered /Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_dispatch/middleware/templates/rescues/_trace.erb (1.1ms)
  Rendered /Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_dispatch/middleware/templates/rescues/_request_and_response.erb (1.4ms)
  Rendered /Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_dispatch/middleware/templates/rescues/diagnostics.erb within rescues/layout (42.9ms)


Started GET "/test/edit" for 127.0.0.1 at 2016-01-16 19:45:58 +0100
Processing by RestaurantsController#edit as HTML
  Parameters: {"id"=>"test"}
  [1m[35mUser Load (0.2ms)[0m  SELECT `users`.* FROM `users` WHERE `users`.`id` = 1 LIMIT 1
  [1m[36mRestaurant Load (1.4ms)[0m  [1mSELECT `restaurants`.* FROM `restaurants` WHERE `restaurants`.`slug` = 'test' LIMIT 1[0m
  [1m[35mSchedule Load (4.6ms)[0m  SELECT `schedules`.* FROM `schedules` WHERE `schedules`.`restaurant_id` = 1057 ORDER BY day_of_week ASC
  [1m[36mPhoto Load (0.3ms)[0m  [1mSELECT `photos`.* FROM `photos` WHERE `photos`.`restaurant_id` = 1057[0m
  [1m[35mFilter Load (1.3ms)[0m  SELECT `filters`.* FROM `filters` INNER JOIN `filters_restaurants` ON `filters`.`id` = `filters_restaurants`.`filter_id` WHERE `filters_restaurants`.`restaurant_id` = 1057 AND `filters`.`code` = 'cuisine'
  [1m[36m (1.4ms)[0m  [1mSELECT `filters`.id FROM `filters` INNER JOIN `filters_restaurants` ON `filters`.`id` = `filters_restaurants`.`filter_id` WHERE `filters_restaurants`.`restaurant_id` = 1057[0m
  [1m[35mFilterType Load (0.2ms)[0m  SELECT `filter_types`.* FROM `filter_types` WHERE `filter_types`.`code` = 'hal_status' LIMIT 1
  [1m[36mFilterType Load (0.2ms)[0m  [1mSELECT `filter_types`.* FROM `filter_types` WHERE `filter_types`.`code` = 'price' LIMIT 1[0m
  [1m[35mFilterType Load (0.2ms)[0m  SELECT `filter_types`.* FROM `filter_types` WHERE `filter_types`.`code` = 'cuisine' LIMIT 1
  [1m[36mFilterType Load (0.2ms)[0m  [1mSELECT `filter_types`.* FROM `filter_types` WHERE `filter_types`.`code` = 'alcohol' LIMIT 1[0m
  [1m[35mFilterType Load (0.2ms)[0m  SELECT `filter_types`.* FROM `filter_types` WHERE `filter_types`.`code` = 'features' LIMIT 1
  Rendered restaurants/_googlemap.html.erb (0.6ms)
  [1m[36mFilter Load (0.3ms)[0m  [1mSELECT `filters`.* FROM `filters` WHERE `filters`.`filter_type_id` = 8[0m
  [1m[35mFilter Load (0.3ms)[0m  SELECT `filters`.* FROM `filters` WHERE `filters`.`filter_type_id` = 1 ORDER BY name ASC
  [1m[36mFilter Load (0.2ms)[0m  [1mSELECT `filters`.* FROM `filters` WHERE `filters`.`filter_type_id` = 4[0m
  [1m[35mFilter Load (0.2ms)[0m  SELECT `filters`.* FROM `filters` WHERE `filters`.`filter_type_id` = 6
  [1m[36mFilter Load (0.2ms)[0m  [1mSELECT `filters`.* FROM `filters` WHERE `filters`.`filter_type_id` = 11 AND (code != 'offer')[0m
  Rendered restaurants/_admin_form.html.erb (82.2ms)
  [1m[35mMenu Load (0.4ms)[0m  SELECT `menus`.* FROM `menus` WHERE `menus`.`restaurant_id` = 1057
  Rendered restaurants/_upload_menu.html.erb (5.1ms)
  Rendered restaurants/_upload_photos.html.erb (2.5ms)
  Rendered restaurants/edit.html.erb within layouts/admin (94.3ms)
Completed 200 OK in 263ms (Views: 101.9ms | ActiveRecord: 15.6ms)


Started GET "/photos?r_id=1057" for 127.0.0.1 at 2016-01-16 19:46:11 +0100
Processing by PhotosController#index as JSON
  Parameters: {"r_id"=>"1057"}
  [1m[36mRestaurant Load (2.0ms)[0m  [1mSELECT `restaurants`.* FROM `restaurants` WHERE `restaurants`.`slug` = '1057' LIMIT 1[0m
  [1m[35mRestaurant Load (0.4ms)[0m  SELECT `restaurants`.* FROM `restaurants` WHERE `restaurants`.`id` = 1057 LIMIT 1
  [1m[36mPhoto Load (0.4ms)[0m  [1mSELECT `photos`.* FROM `photos` WHERE `photos`.`restaurant_id` = 1057[0m
Completed 200 OK in 8ms (Views: 0.2ms | ActiveRecord: 2.7ms)


Started POST "/admin/menus" for 127.0.0.1 at 2016-01-16 19:46:52 +0100
Processing by MenusController#create as JS
  Parameters: {"utf8"=>"âœ“", "authenticity_token"=>"ZhR8a2fYr/EQcBrBVm2c17tt7AHk64f/gvsZ5fOllxc=", "menus"=>{"name"=>"eadf", "restaurant_id"=>"1057", "menu"=>#<ActionDispatch::Http::UploadedFile:0x007ffc6c9afce8 @original_filename="persian.png", @content_type="image/png", @headers="Content-Disposition: form-data; name=\"menus[menu]\"; filename=\"persian.png\"\r\nContent-Type: image/png\r\n", @tempfile=#<Tempfile:/var/folders/rf/q4l8n5k56pnbjgkdtzrhq_w00000gn/T/RackMultipart20160116-27879-zo7elz>>}, "commit"=>"Submit", "remotipart_submitted"=>"true", "X-Requested-With"=>"IFrame", "X-Http-Accept"=>"text/javascript, application/javascript, application/ecmascript, application/x-ecmascript, */*; q=0.01"}
  [1m[35mUser Load (0.4ms)[0m  SELECT `users`.* FROM `users` WHERE `users`.`id` = 1 LIMIT 1
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO `menus` (`created_at`, `menu_name`, `menu_uid`, `name`, `restaurant_id`, `updated_at`, `user_id`) VALUES ('2016-01-16 18:46:52', 'persian.png', '2016/01/16/19_46_52_806_persian.png', 'eadf', 1057, '2016-01-16 18:46:52', 1)
  [1m[36m (0.5ms)[0m  [1mCOMMIT[0m
Completed 200 OK in 31ms (Views: 0.1ms | ActiveRecord: 1.3ms)


Started POST "/admin/collections" for 127.0.0.1 at 2016-01-16 19:54:35 +0100
Processing by CollectionsController#create as HTML
  Parameters: {"utf8"=>"âœ“", "authenticity_token"=>"ZhR8a2fYr/EQcBrBVm2c17tt7AHk64f/gvsZ5fOllxc=", "admin"=>"true", "collection"=>{"name"=>"Test", "description"=>"test", "image_url"=>#<ActionDispatch::Http::UploadedFile:0x007ffc6f5abd88 @original_filename="steak.png", @content_type="image/png", @headers="Content-Disposition: form-data; name=\"collection[image_url]\"; filename=\"steak.png\"\r\nContent-Type: image/png\r\n", @tempfile=#<Tempfile:/var/folders/rf/q4l8n5k56pnbjgkdtzrhq_w00000gn/T/RackMultipart20160116-27879-j54mec>>}}
  [1m[35mCollection Load (0.2ms)[0m  SELECT `collections`.* FROM `collections` WHERE `collections`.`name` = 'Test' LIMIT 1
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35m (0.2ms)[0m  ROLLBACK
  Rendered collections/_collection_form.html.erb (5.0ms)
  Rendered collections/_collection_restaurants_form.html.erb (0.2ms)
  [1m[36mUser Load (0.3ms)[0m  [1mSELECT `users`.* FROM `users` WHERE `users`.`id` = 1 LIMIT 1[0m
  Rendered collections/_upload_collection_image.html.erb (64.1ms)
  Rendered collections/admin_new_collection.html.erb within layouts/application (72.1ms)
  [1m[35mSubscription Load (0.2ms)[0m  SELECT `subscriptions`.* FROM `subscriptions` WHERE `subscriptions`.`user_id` = 1 AND `subscriptions`.`success` = 1
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT `subscriptions`.* FROM `subscriptions` WHERE `subscriptions`.`user_id` = 1 AND `subscriptions`.`success` = 1[0m
  Rendered layouts/_user_pnl.html.erb (16.4ms)
  Rendered layouts/_header.html.erb (17.3ms)
  Rendered layouts/_main_menu.html.slim (0.4ms)
  Rendered layouts/_sub_main_menu.html.slim (0.1ms)
  Rendered layouts/_flash_messages.html.erb (0.1ms)
  [1m[35mBasicsPage Load (0.2ms)[0m  SELECT `basics_pages`.* FROM `basics_pages` WHERE `basics_pages`.`page_name` = 'Footer' LIMIT 1
  Rendered layouts/_footer.html.slim (13.2ms)
Completed 200 OK in 126ms (Views: 111.9ms | ActiveRecord: 5.5ms)


Started GET "/collection_images?r_id=" for 127.0.0.1 at 2016-01-16 19:54:36 +0100
  [1m[36m (0.3ms)[0m  [1mSELECT COUNT(*) FROM `filter_types` WHERE (code = 'features')[0m
  [1m[35m (0.2ms)[0m  SELECT COUNT(*) FROM `filters` WHERE (code = 'offer')
  [1m[36mFilter Load (0.2ms)[0m  [1mSELECT `filters`.* FROM `filters` WHERE (code = 'offer') LIMIT 1[0m
  [1m[35mFilterType Load (0.3ms)[0m  SELECT `filter_types`.* FROM `filter_types` WHERE (code = 'features') LIMIT 1
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT `filters`.* FROM `filters` WHERE (code = 'offer') LIMIT 1[0m
  [1m[35mCACHE (0.0ms)[0m  SELECT `filter_types`.* FROM `filter_types` WHERE (code = 'features') LIMIT 1
Processing by RestaurantsController#show as JSON
  Parameters: {"r_id"=>"", "id"=>"collection_images"}
  [1m[36mRestaurant Load (1.6ms)[0m  [1mSELECT `restaurants`.* FROM `restaurants` WHERE `restaurants`.`slug` = 'collection_images' LIMIT 1[0m
  [1m[35mRestaurant Load (0.3ms)[0m  SELECT `restaurants`.* FROM `restaurants` WHERE `restaurants`.`id` = 0 LIMIT 1
Completed 500 Internal Server Error in 8ms

ActiveRecord::RecordNotFound (Couldn't find Restaurant with id=collection_images):
  app/controllers/restaurants_controller.rb:193:in `show'


  Rendered /Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_dispatch/middleware/templates/rescues/_trace.erb (1.2ms)
  Rendered /Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_dispatch/middleware/templates/rescues/_request_and_response.erb (0.9ms)
  Rendered /Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_dispatch/middleware/templates/rescues/diagnostics.erb within rescues/layout (43.4ms)


Started GET "/admin/collections/admin_new_collection" for 127.0.0.1 at 2016-01-16 19:58:34 +0100
Processing by CollectionsController#admin_new_collection as HTML
  [1m[36mUser Load (0.2ms)[0m  [1mSELECT `users`.* FROM `users` WHERE `users`.`id` = 1 LIMIT 1[0m
  Rendered collections/_collection_form.html.erb (5.0ms)
  Rendered collections/admin_new_collection.html.erb within layouts/admin (5.8ms)
Completed 500 Internal Server Error in 72ms

ActionView::Template::Error (undefined method `image_url_uid' for #<Collection:0x007ffc6cf78fa8>):
    1: 
    2: <div class="form_add_new_collection">
    3:   <%= simple_form_for(@collection, wrapper: 'collection', :multipart => true, :validate => true) do |f| %>
    4:     <div class="row">
    5:       <div class='col-md-4'>
    6:         <%= hidden_field_tag 'admin', true %>
  app/views/collections/_collection_form.html.erb:3:in `_app_views_collections__collection_form_html_erb___1960648650376828976_70361087148820'
  app/views/collections/admin_new_collection.html.erb:15:in `_app_views_collections_admin_new_collection_html_erb__1406352457603862768_70361090199440'
  app/controllers/collections_controller.rb:55:in `admin_new_collection'


  Rendered /Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_dispatch/middleware/templates/rescues/_trace.erb (1.1ms)
  Rendered /Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_dispatch/middleware/templates/rescues/_request_and_response.erb (0.9ms)
  Rendered /Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_dispatch/middleware/templates/rescues/template_error.erb within rescues/layout (41.2ms)


Started GET "/admin/collections/admin_new_collection" for 127.0.0.1 at 2016-01-16 19:59:01 +0100
Processing by CollectionsController#admin_new_collection as HTML
  [1m[35mUser Load (0.5ms)[0m  SELECT `users`.* FROM `users` WHERE `users`.`id` = 1 LIMIT 1
  Rendered collections/_collection_form.html.erb (5.0ms)
  Rendered collections/_collection_restaurants_form.html.erb (0.2ms)
  Rendered collections/_upload_collection_image.html.erb (15.6ms)
  Rendered collections/admin_new_collection.html.erb within layouts/admin (23.5ms)
Completed 200 OK in 107ms (Views: 30.0ms | ActiveRecord: 3.5ms)


Started GET "/collection_images?r_id=" for 127.0.0.1 at 2016-01-16 19:59:02 +0100
  [1m[36m (0.5ms)[0m  [1mSELECT COUNT(*) FROM `filter_types` WHERE (code = 'features')[0m
  [1m[35m (0.2ms)[0m  SELECT COUNT(*) FROM `filters` WHERE (code = 'offer')
  [1m[36mFilter Load (0.2ms)[0m  [1mSELECT `filters`.* FROM `filters` WHERE (code = 'offer') LIMIT 1[0m
  [1m[35mFilterType Load (0.2ms)[0m  SELECT `filter_types`.* FROM `filter_types` WHERE (code = 'features') LIMIT 1
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT `filters`.* FROM `filters` WHERE (code = 'offer') LIMIT 1[0m
  [1m[35mCACHE (0.0ms)[0m  SELECT `filter_types`.* FROM `filter_types` WHERE (code = 'features') LIMIT 1
Processing by RestaurantsController#show as JSON
  Parameters: {"r_id"=>"", "id"=>"collection_images"}
  [1m[36mRestaurant Load (1.6ms)[0m  [1mSELECT `restaurants`.* FROM `restaurants` WHERE `restaurants`.`slug` = 'collection_images' LIMIT 1[0m
  [1m[35mRestaurant Load (0.2ms)[0m  SELECT `restaurants`.* FROM `restaurants` WHERE `restaurants`.`id` = 0 LIMIT 1
Completed 500 Internal Server Error in 8ms

ActiveRecord::RecordNotFound (Couldn't find Restaurant with id=collection_images):
  app/controllers/restaurants_controller.rb:193:in `show'


  Rendered /Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_dispatch/middleware/templates/rescues/_trace.erb (1.2ms)
  Rendered /Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_dispatch/middleware/templates/rescues/_request_and_response.erb (1.2ms)
  Rendered /Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_dispatch/middleware/templates/rescues/diagnostics.erb within rescues/layout (46.8ms)


Started GET "/admin/collections/admin_new_collection" for 127.0.0.1 at 2016-01-16 19:59:12 +0100
Processing by CollectionsController#admin_new_collection as HTML
  [1m[36mUser Load (0.2ms)[0m  [1mSELECT `users`.* FROM `users` WHERE `users`.`id` = 1 LIMIT 1[0m
  Rendered collections/_collection_form.html.erb (5.3ms)
  Rendered collections/admin_new_collection.html.erb within layouts/admin (6.1ms)
Completed 500 Internal Server Error in 84ms

ActionView::Template::Error (undefined method `image_url_uid' for #<Collection:0x007ffc6fb9be28>):
    1: 
    2: <div class="form_add_new_collection">
    3:   <%= simple_form_for(@collection, wrapper: 'collection', :multipart => true, :validate => true) do |f| %>
    4:     <div class="row">
    5:       <div class='col-md-4'>
    6:         <%= hidden_field_tag 'admin', true %>
  app/views/collections/_collection_form.html.erb:3:in `_app_views_collections__collection_form_html_erb___1960648650376828976_70361087148820'
  app/views/collections/admin_new_collection.html.erb:15:in `_app_views_collections_admin_new_collection_html_erb__1406352457603862768_70361090199440'
  app/controllers/collections_controller.rb:55:in `admin_new_collection'


  Rendered /Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_dispatch/middleware/templates/rescues/_trace.erb (1.1ms)
  Rendered /Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_dispatch/middleware/templates/rescues/_request_and_response.erb (0.8ms)
  Rendered /Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_dispatch/middleware/templates/rescues/template_error.erb within rescues/layout (40.3ms)


Started GET "/admin/collections/admin_new_collection" for 127.0.0.1 at 2016-01-16 20:01:48 +0100
Processing by CollectionsController#admin_new_collection as HTML
  [1m[35mUser Load (0.3ms)[0m  SELECT `users`.* FROM `users` WHERE `users`.`id` = 1 LIMIT 1
  Rendered collections/_collection_form.html.erb (5.4ms)
  Rendered collections/_collection_restaurants_form.html.erb (0.2ms)
  Rendered collections/_upload_collection_image.html.erb (18.0ms)
  Rendered collections/admin_new_collection.html.erb within layouts/admin (26.2ms)
Completed 200 OK in 96ms (Views: 33.7ms | ActiveRecord: 2.7ms)


Started GET "/collection_images?r_id=" for 127.0.0.1 at 2016-01-16 20:01:48 +0100
  [1m[36m (0.2ms)[0m  [1mSELECT COUNT(*) FROM `filter_types` WHERE (code = 'features')[0m
  [1m[35m (0.2ms)[0m  SELECT COUNT(*) FROM `filters` WHERE (code = 'offer')
  [1m[36mFilter Load (0.2ms)[0m  [1mSELECT `filters`.* FROM `filters` WHERE (code = 'offer') LIMIT 1[0m
  [1m[35mFilterType Load (0.3ms)[0m  SELECT `filter_types`.* FROM `filter_types` WHERE (code = 'features') LIMIT 1
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT `filters`.* FROM `filters` WHERE (code = 'offer') LIMIT 1[0m
  [1m[35mCACHE (0.0ms)[0m  SELECT `filter_types`.* FROM `filter_types` WHERE (code = 'features') LIMIT 1
Processing by RestaurantsController#show as JSON
  Parameters: {"r_id"=>"", "id"=>"collection_images"}
  [1m[36mRestaurant Load (1.5ms)[0m  [1mSELECT `restaurants`.* FROM `restaurants` WHERE `restaurants`.`slug` = 'collection_images' LIMIT 1[0m
  [1m[35mRestaurant Load (0.2ms)[0m  SELECT `restaurants`.* FROM `restaurants` WHERE `restaurants`.`id` = 0 LIMIT 1
Completed 500 Internal Server Error in 7ms

ActiveRecord::RecordNotFound (Couldn't find Restaurant with id=collection_images):
  app/controllers/restaurants_controller.rb:193:in `show'


  Rendered /Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_dispatch/middleware/templates/rescues/_trace.erb (1.5ms)
  Rendered /Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_dispatch/middleware/templates/rescues/_request_and_response.erb (1.1ms)
  Rendered /Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_dispatch/middleware/templates/rescues/diagnostics.erb within rescues/layout (49.3ms)


Started POST "/admin/collections" for 127.0.0.1 at 2016-01-16 20:01:56 +0100
Processing by CollectionsController#create as HTML
  Parameters: {"utf8"=>"âœ“", "authenticity_token"=>"ZhR8a2fYr/EQcBrBVm2c17tt7AHk64f/gvsZ5fOllxc=", "admin"=>"true", "collection"=>{"name"=>"test", "description"=>"testst", "image_url"=>#<ActionDispatch::Http::UploadedFile:0x007ffc6d690f70 @original_filename="sunday_roast.png", @content_type="image/png", @headers="Content-Disposition: form-data; name=\"collection[image_url]\"; filename=\"sunday_roast.png\"\r\nContent-Type: image/png\r\n", @tempfile=#<Tempfile:/var/folders/rf/q4l8n5k56pnbjgkdtzrhq_w00000gn/T/RackMultipart20160116-27879-1xsndvc>>}}
  [1m[36mCollection Load (0.5ms)[0m  [1mSELECT `collections`.* FROM `collections` WHERE `collections`.`name` = 'test' LIMIT 1[0m
Completed 500 Internal Server Error in 2ms

NoMethodError (undefined method `image_url_uid' for #<Collection:0x007ffc6cf11560>):
  app/controllers/collections_controller.rb:79:in `new'
  app/controllers/collections_controller.rb:79:in `block in create'
  app/controllers/collections_controller.rb:77:in `create'


  Rendered /Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_dispatch/middleware/templates/rescues/_trace.erb (1.6ms)
  Rendered /Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_dispatch/middleware/templates/rescues/_request_and_response.erb (1.1ms)
  Rendered /Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_dispatch/middleware/templates/rescues/diagnostics.erb within rescues/layout (43.1ms)


Started POST "/admin/collections" for 127.0.0.1 at 2016-01-16 20:02:22 +0100
Processing by CollectionsController#create as HTML
  Parameters: {"utf8"=>"âœ“", "authenticity_token"=>"ZhR8a2fYr/EQcBrBVm2c17tt7AHk64f/gvsZ5fOllxc=", "admin"=>"true", "collection"=>{"name"=>"test", "description"=>"testst", "image_url"=>#<ActionDispatch::Http::UploadedFile:0x007ffc6c8e87d8 @original_filename="sunday_roast.png", @content_type="image/png", @headers="Content-Disposition: form-data; name=\"collection[image_url]\"; filename=\"sunday_roast.png\"\r\nContent-Type: image/png\r\n", @tempfile=#<Tempfile:/var/folders/rf/q4l8n5k56pnbjgkdtzrhq_w00000gn/T/RackMultipart20160116-27879-la5suf>>}}
  [1m[35mCollection Load (0.2ms)[0m  SELECT `collections`.* FROM `collections` WHERE `collections`.`name` = 'test' LIMIT 1
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35m (0.1ms)[0m  ROLLBACK
  Rendered collections/_collection_form.html.erb (5.0ms)
  Rendered collections/_collection_restaurants_form.html.erb (0.2ms)
  [1m[36mUser Load (0.2ms)[0m  [1mSELECT `users`.* FROM `users` WHERE `users`.`id` = 1 LIMIT 1[0m
  Rendered collections/_upload_collection_image.html.erb (79.2ms)
  Rendered collections/admin_new_collection.html.erb within layouts/application (86.8ms)
  [1m[35mSubscription Load (0.2ms)[0m  SELECT `subscriptions`.* FROM `subscriptions` WHERE `subscriptions`.`user_id` = 1 AND `subscriptions`.`success` = 1
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT `subscriptions`.* FROM `subscriptions` WHERE `subscriptions`.`user_id` = 1 AND `subscriptions`.`success` = 1[0m
  Rendered layouts/_user_pnl.html.erb (16.7ms)
  Rendered layouts/_header.html.erb (17.6ms)
  Rendered layouts/_main_menu.html.slim (0.4ms)
  Rendered layouts/_sub_main_menu.html.slim (0.0ms)
  Rendered layouts/_flash_messages.html.erb (0.1ms)
  [1m[35mBasicsPage Load (0.2ms)[0m  SELECT `basics_pages`.* FROM `basics_pages` WHERE `basics_pages`.`page_name` = 'Footer' LIMIT 1
  Rendered layouts/_footer.html.slim (12.9ms)
Completed 200 OK in 142ms (Views: 127.6ms | ActiveRecord: 5.5ms)


Started GET "/collection_images?r_id=" for 127.0.0.1 at 2016-01-16 20:02:23 +0100
  [1m[36m (0.1ms)[0m  [1mSELECT COUNT(*) FROM `filter_types` WHERE (code = 'features')[0m
  [1m[35m (0.2ms)[0m  SELECT COUNT(*) FROM `filters` WHERE (code = 'offer')
  [1m[36mFilter Load (0.2ms)[0m  [1mSELECT `filters`.* FROM `filters` WHERE (code = 'offer') LIMIT 1[0m
  [1m[35mFilterType Load (0.3ms)[0m  SELECT `filter_types`.* FROM `filter_types` WHERE (code = 'features') LIMIT 1
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT `filters`.* FROM `filters` WHERE (code = 'offer') LIMIT 1[0m
  [1m[35mCACHE (0.0ms)[0m  SELECT `filter_types`.* FROM `filter_types` WHERE (code = 'features') LIMIT 1
Processing by RestaurantsController#show as JSON
  Parameters: {"r_id"=>"", "id"=>"collection_images"}
  [1m[36mRestaurant Load (1.6ms)[0m  [1mSELECT `restaurants`.* FROM `restaurants` WHERE `restaurants`.`slug` = 'collection_images' LIMIT 1[0m
  [1m[35mRestaurant Load (0.2ms)[0m  SELECT `restaurants`.* FROM `restaurants` WHERE `restaurants`.`id` = 0 LIMIT 1
Completed 500 Internal Server Error in 8ms

ActiveRecord::RecordNotFound (Couldn't find Restaurant with id=collection_images):
  app/controllers/restaurants_controller.rb:193:in `show'


  Rendered /Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_dispatch/middleware/templates/rescues/_trace.erb (1.3ms)
  Rendered /Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_dispatch/middleware/templates/rescues/_request_and_response.erb (1.0ms)
  Rendered /Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_dispatch/middleware/templates/rescues/diagnostics.erb within rescues/layout (45.4ms)


Started POST "/admin/collections" for 127.0.0.1 at 2016-01-16 20:05:16 +0100
Processing by CollectionsController#create as HTML
  Parameters: {"utf8"=>"âœ“", "authenticity_token"=>"ZhR8a2fYr/EQcBrBVm2c17tt7AHk64f/gvsZ5fOllxc=", "admin"=>"true", "collection"=>{"name"=>"test", "description"=>"testst", "image_url"=>#<ActionDispatch::Http::UploadedFile:0x007ffc6d5eb430 @original_filename="sunday_roast.png", @content_type="image/png", @headers="Content-Disposition: form-data; name=\"collection[image_url]\"; filename=\"sunday_roast.png\"\r\nContent-Type: image/png\r\n", @tempfile=#<Tempfile:/var/folders/rf/q4l8n5k56pnbjgkdtzrhq_w00000gn/T/RackMultipart20160116-27879-1pu0ofi>>}}
  [1m[36mCollection Load (0.2ms)[0m  [1mSELECT `collections`.* FROM `collections` WHERE `collections`.`name` = 'test' LIMIT 1[0m
  [1m[35m (0.1ms)[0m  BEGIN
  [1m[36m (0.1ms)[0m  [1mROLLBACK[0m
  Rendered collections/_collection_form.html.erb (5.8ms)
  Rendered collections/_collection_restaurants_form.html.erb (0.3ms)
  [1m[35mUser Load (0.2ms)[0m  SELECT `users`.* FROM `users` WHERE `users`.`id` = 1 LIMIT 1
  Rendered collections/_upload_collection_image.html.erb (101.6ms)
  Rendered collections/admin_new_collection.html.erb within layouts/admin (110.3ms)
Completed 200 OK in 132ms (Views: 120.0ms | ActiveRecord: 3.3ms)


Started GET "/collection_images?r_id=" for 127.0.0.1 at 2016-01-16 20:05:16 +0100
  [1m[36m (0.1ms)[0m  [1mSELECT COUNT(*) FROM `filter_types` WHERE (code = 'features')[0m
  [1m[35m (0.2ms)[0m  SELECT COUNT(*) FROM `filters` WHERE (code = 'offer')
  [1m[36mFilter Load (0.1ms)[0m  [1mSELECT `filters`.* FROM `filters` WHERE (code = 'offer') LIMIT 1[0m
  [1m[35mFilterType Load (0.3ms)[0m  SELECT `filter_types`.* FROM `filter_types` WHERE (code = 'features') LIMIT 1
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT `filters`.* FROM `filters` WHERE (code = 'offer') LIMIT 1[0m
  [1m[35mCACHE (0.0ms)[0m  SELECT `filter_types`.* FROM `filter_types` WHERE (code = 'features') LIMIT 1
Processing by RestaurantsController#show as JSON
  Parameters: {"r_id"=>"", "id"=>"collection_images"}
  [1m[36mRestaurant Load (1.5ms)[0m  [1mSELECT `restaurants`.* FROM `restaurants` WHERE `restaurants`.`slug` = 'collection_images' LIMIT 1[0m
  [1m[35mRestaurant Load (0.2ms)[0m  SELECT `restaurants`.* FROM `restaurants` WHERE `restaurants`.`id` = 0 LIMIT 1
Completed 500 Internal Server Error in 10ms

ActiveRecord::RecordNotFound (Couldn't find Restaurant with id=collection_images):
  app/controllers/restaurants_controller.rb:193:in `show'


  Rendered /Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_dispatch/middleware/templates/rescues/_trace.erb (1.4ms)
  Rendered /Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_dispatch/middleware/templates/rescues/_request_and_response.erb (1.1ms)
  Rendered /Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_dispatch/middleware/templates/rescues/diagnostics.erb within rescues/layout (46.0ms)


Started POST "/admin/collections" for 127.0.0.1 at 2016-01-16 20:09:49 +0100
Processing by CollectionsController#create as HTML
  Parameters: {"utf8"=>"âœ“", "authenticity_token"=>"ZhR8a2fYr/EQcBrBVm2c17tt7AHk64f/gvsZ5fOllxc=", "admin"=>"true", "collection"=>{"name"=>"test", "description"=>"testst"}}
  [1m[36mCollection Load (0.4ms)[0m  [1mSELECT `collections`.* FROM `collections` WHERE `collections`.`name` = 'test' LIMIT 1[0m
  [1m[35m (0.1ms)[0m  BEGIN
  [1m[36m (0.1ms)[0m  [1mROLLBACK[0m
  Rendered collections/_collection_form.html.erb (6.8ms)
  Rendered collections/_collection_restaurants_form.html.erb (0.3ms)
  [1m[35mUser Load (0.4ms)[0m  SELECT `users`.* FROM `users` WHERE `users`.`id` = 1 LIMIT 1
  Rendered collections/_upload_collection_image.html.erb (5.3ms)
  Rendered collections/admin_new_collection.html.erb within layouts/admin (15.3ms)
Completed 200 OK in 26ms (Views: 22.1ms | ActiveRecord: 1.0ms)


Started GET "/collection_images?r_id=" for 127.0.0.1 at 2016-01-16 20:09:49 +0100
Processing by RestaurantsController#show as JSON
  Parameters: {"r_id"=>"", "id"=>"collection_images"}
  [1m[36mRestaurant Load (2.0ms)[0m  [1mSELECT `restaurants`.* FROM `restaurants` WHERE `restaurants`.`slug` = 'collection_images' LIMIT 1[0m
  [1m[35mRestaurant Load (0.4ms)[0m  SELECT `restaurants`.* FROM `restaurants` WHERE `restaurants`.`id` = 0 LIMIT 1
Completed 500 Internal Server Error in 5ms

ActiveRecord::RecordNotFound (Couldn't find Restaurant with id=collection_images):
  app/controllers/restaurants_controller.rb:193:in `show'


  Rendered /Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_dispatch/middleware/templates/rescues/_trace.erb (1.5ms)
  Rendered /Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_dispatch/middleware/templates/rescues/_request_and_response.erb (1.6ms)
  Rendered /Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_dispatch/middleware/templates/rescues/diagnostics.erb within rescues/layout (46.3ms)


Started POST "/admin/collections" for 127.0.0.1 at 2016-01-16 20:09:53 +0100
Processing by CollectionsController#create as HTML
  Parameters: {"utf8"=>"âœ“", "authenticity_token"=>"ZhR8a2fYr/EQcBrBVm2c17tt7AHk64f/gvsZ5fOllxc=", "admin"=>"true", "collection"=>{"name"=>"test", "description"=>"testst", "image_url"=>#<ActionDispatch::Http::UploadedFile:0x007ffc6cf438d0 @original_filename="sunday_roast.png", @content_type="image/png", @headers="Content-Disposition: form-data; name=\"collection[image_url]\"; filename=\"sunday_roast.png\"\r\nContent-Type: image/png\r\n", @tempfile=#<Tempfile:/var/folders/rf/q4l8n5k56pnbjgkdtzrhq_w00000gn/T/RackMultipart20160116-27879-15c7nx7>>}}
  [1m[36mCollection Load (0.3ms)[0m  [1mSELECT `collections`.* FROM `collections` WHERE `collections`.`name` = 'test' LIMIT 1[0m
  [1m[35m (0.1ms)[0m  BEGIN
  [1m[36m (0.3ms)[0m  [1mROLLBACK[0m
  Rendered collections/_collection_form.html.erb (6.7ms)
  Rendered collections/_collection_restaurants_form.html.erb (0.3ms)
  [1m[35mUser Load (0.7ms)[0m  SELECT `users`.* FROM `users` WHERE `users`.`id` = 1 LIMIT 1
  Rendered collections/_upload_collection_image.html.erb (3.4ms)
  Rendered collections/admin_new_collection.html.erb within layouts/admin (13.2ms)
Completed 200 OK in 24ms (Views: 19.0ms | ActiveRecord: 1.4ms)


Started GET "/collection_images?r_id=" for 127.0.0.1 at 2016-01-16 20:09:53 +0100
Processing by RestaurantsController#show as JSON
  Parameters: {"r_id"=>"", "id"=>"collection_images"}
  [1m[36mRestaurant Load (1.5ms)[0m  [1mSELECT `restaurants`.* FROM `restaurants` WHERE `restaurants`.`slug` = 'collection_images' LIMIT 1[0m
  [1m[35mRestaurant Load (0.2ms)[0m  SELECT `restaurants`.* FROM `restaurants` WHERE `restaurants`.`id` = 0 LIMIT 1
Completed 500 Internal Server Error in 4ms

ActiveRecord::RecordNotFound (Couldn't find Restaurant with id=collection_images):
  app/controllers/restaurants_controller.rb:193:in `show'


  Rendered /Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_dispatch/middleware/templates/rescues/_trace.erb (1.4ms)
  Rendered /Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_dispatch/middleware/templates/rescues/_request_and_response.erb (1.1ms)
  Rendered /Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_dispatch/middleware/templates/rescues/diagnostics.erb within rescues/layout (49.8ms)


Started POST "/admin/collections" for 127.0.0.1 at 2016-01-16 20:12:37 +0100
Processing by CollectionsController#create as HTML
  Parameters: {"utf8"=>"âœ“", "authenticity_token"=>"ZhR8a2fYr/EQcBrBVm2c17tt7AHk64f/gvsZ5fOllxc=", "admin"=>"true", "collection"=>{"name"=>"test", "description"=>"testst", "image_url"=>#<ActionDispatch::Http::UploadedFile:0x007ffc6c9196a8 @original_filename="sunday_roast.png", @content_type="image/png", @headers="Content-Disposition: form-data; name=\"collection[image_url]\"; filename=\"sunday_roast.png\"\r\nContent-Type: image/png\r\n", @tempfile=#<Tempfile:/var/folders/rf/q4l8n5k56pnbjgkdtzrhq_w00000gn/T/RackMultipart20160116-27879-hjo4fj>>}}
  [1m[36mCollection Load (0.2ms)[0m  [1mSELECT `collections`.* FROM `collections` WHERE `collections`.`name` = 'test' LIMIT 1[0m
  [1m[35m (0.1ms)[0m  BEGIN
  [1m[36m (0.1ms)[0m  [1mROLLBACK[0m
  Rendered collections/_collection_form.html.erb (8.1ms)
  Rendered collections/_collection_restaurants_form.html.erb (0.9ms)
  [1m[35mUser Load (0.3ms)[0m  SELECT `users`.* FROM `users` WHERE `users`.`id` = 1 LIMIT 1
  Rendered collections/_upload_collection_image.html.erb (97.0ms)
  Rendered collections/admin_new_collection.html.erb within layouts/admin (109.6ms)
Completed 200 OK in 131ms (Views: 116.7ms | ActiveRecord: 3.8ms)


Started GET "/collection_images?r_id=" for 127.0.0.1 at 2016-01-16 20:12:38 +0100
  [1m[36m (0.2ms)[0m  [1mSELECT COUNT(*) FROM `filter_types` WHERE (code = 'features')[0m
  [1m[35m (0.3ms)[0m  SELECT COUNT(*) FROM `filters` WHERE (code = 'offer')
  [1m[36mFilter Load (0.2ms)[0m  [1mSELECT `filters`.* FROM `filters` WHERE (code = 'offer') LIMIT 1[0m
  [1m[35mFilterType Load (0.2ms)[0m  SELECT `filter_types`.* FROM `filter_types` WHERE (code = 'features') LIMIT 1
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT `filters`.* FROM `filters` WHERE (code = 'offer') LIMIT 1[0m
  [1m[35mCACHE (0.0ms)[0m  SELECT `filter_types`.* FROM `filter_types` WHERE (code = 'features') LIMIT 1
Processing by RestaurantsController#show as JSON
  Parameters: {"r_id"=>"", "id"=>"collection_images"}
  [1m[36mRestaurant Load (1.5ms)[0m  [1mSELECT `restaurants`.* FROM `restaurants` WHERE `restaurants`.`slug` = 'collection_images' LIMIT 1[0m
  [1m[35mRestaurant Load (0.2ms)[0m  SELECT `restaurants`.* FROM `restaurants` WHERE `restaurants`.`id` = 0 LIMIT 1
Completed 500 Internal Server Error in 9ms

ActiveRecord::RecordNotFound (Couldn't find Restaurant with id=collection_images):
  app/controllers/restaurants_controller.rb:193:in `show'


  Rendered /Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_dispatch/middleware/templates/rescues/_trace.erb (1.2ms)
  Rendered /Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_dispatch/middleware/templates/rescues/_request_and_response.erb (1.4ms)
  Rendered /Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_dispatch/middleware/templates/rescues/diagnostics.erb within rescues/layout (46.6ms)


Started POST "/admin/collections" for 127.0.0.1 at 2016-01-16 20:15:30 +0100
Processing by CollectionsController#create as HTML
  Parameters: {"utf8"=>"âœ“", "authenticity_token"=>"ZhR8a2fYr/EQcBrBVm2c17tt7AHk64f/gvsZ5fOllxc=", "admin"=>"true", "collection"=>{"name"=>"test", "description"=>"testst", "image_url"=>#<ActionDispatch::Http::UploadedFile:0x007ffc69f7eca8 @original_filename="sunday_roast.png", @content_type="image/png", @headers="Content-Disposition: form-data; name=\"collection[image_url]\"; filename=\"sunday_roast.png\"\r\nContent-Type: image/png\r\n", @tempfile=#<Tempfile:/var/folders/rf/q4l8n5k56pnbjgkdtzrhq_w00000gn/T/RackMultipart20160116-27879-1jqjgg2>>}}
  [1m[36mCollection Load (0.2ms)[0m  [1mSELECT `collections`.* FROM `collections` WHERE `collections`.`name` = 'test' LIMIT 1[0m
  [1m[35m (0.1ms)[0m  BEGIN
  [1m[36m (0.1ms)[0m  [1mROLLBACK[0m
  Rendered collections/_collection_form.html.erb (5.3ms)
  Rendered collections/_collection_restaurants_form.html.erb (0.3ms)
  [1m[35mUser Load (0.5ms)[0m  SELECT `users`.* FROM `users` WHERE `users`.`id` = 1 LIMIT 1
  Rendered collections/_upload_collection_image.html.erb (91.4ms)
  Rendered collections/admin_new_collection.html.erb within layouts/admin (100.7ms)
Completed 200 OK in 124ms (Views: 110.2ms | ActiveRecord: 4.1ms)


Started GET "/collection_images?r_id=" for 127.0.0.1 at 2016-01-16 20:15:31 +0100
  [1m[36m (0.2ms)[0m  [1mSELECT COUNT(*) FROM `filter_types` WHERE (code = 'features')[0m
  [1m[35m (0.2ms)[0m  SELECT COUNT(*) FROM `filters` WHERE (code = 'offer')
  [1m[36mFilter Load (0.2ms)[0m  [1mSELECT `filters`.* FROM `filters` WHERE (code = 'offer') LIMIT 1[0m
  [1m[35mFilterType Load (1.1ms)[0m  SELECT `filter_types`.* FROM `filter_types` WHERE (code = 'features') LIMIT 1
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT `filters`.* FROM `filters` WHERE (code = 'offer') LIMIT 1[0m
  [1m[35mCACHE (0.0ms)[0m  SELECT `filter_types`.* FROM `filter_types` WHERE (code = 'features') LIMIT 1
Processing by RestaurantsController#show as JSON
  Parameters: {"r_id"=>"", "id"=>"collection_images"}
  [1m[36mRestaurant Load (1.9ms)[0m  [1mSELECT `restaurants`.* FROM `restaurants` WHERE `restaurants`.`slug` = 'collection_images' LIMIT 1[0m
  [1m[35mRestaurant Load (0.2ms)[0m  SELECT `restaurants`.* FROM `restaurants` WHERE `restaurants`.`id` = 0 LIMIT 1
Completed 500 Internal Server Error in 8ms

ActiveRecord::RecordNotFound (Couldn't find Restaurant with id=collection_images):
  app/controllers/restaurants_controller.rb:193:in `show'


  Rendered /Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_dispatch/middleware/templates/rescues/_trace.erb (1.1ms)
  Rendered /Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_dispatch/middleware/templates/rescues/_request_and_response.erb (0.9ms)
  Rendered /Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_dispatch/middleware/templates/rescues/diagnostics.erb within rescues/layout (52.9ms)


Started POST "/admin/collections" for 127.0.0.1 at 2016-01-16 20:16:08 +0100
Processing by CollectionsController#create as HTML
  Parameters: {"utf8"=>"âœ“", "authenticity_token"=>"ZhR8a2fYr/EQcBrBVm2c17tt7AHk64f/gvsZ5fOllxc=", "admin"=>"true", "collection"=>{"name"=>"test", "description"=>"testst"}}
  [1m[36mCollection Load (0.2ms)[0m  [1mSELECT `collections`.* FROM `collections` WHERE `collections`.`name` = 'test' LIMIT 1[0m
  [1m[35m (0.2ms)[0m  BEGIN
  [1m[36m (0.1ms)[0m  [1mROLLBACK[0m
  Rendered collections/_collection_form.html.erb (5.2ms)
  Rendered collections/_collection_restaurants_form.html.erb (0.3ms)
  [1m[35mUser Load (0.2ms)[0m  SELECT `users`.* FROM `users` WHERE `users`.`id` = 1 LIMIT 1
  Rendered collections/_upload_collection_image.html.erb (64.4ms)
  Rendered collections/admin_new_collection.html.erb within layouts/admin (72.3ms)
Completed 200 OK in 101ms (Views: 78.0ms | ActiveRecord: 3.6ms)


Started GET "/collection_images?r_id=" for 127.0.0.1 at 2016-01-16 20:16:09 +0100
  [1m[36m (0.2ms)[0m  [1mSELECT COUNT(*) FROM `filter_types` WHERE (code = 'features')[0m
  [1m[35m (0.2ms)[0m  SELECT COUNT(*) FROM `filters` WHERE (code = 'offer')
  [1m[36mFilter Load (0.2ms)[0m  [1mSELECT `filters`.* FROM `filters` WHERE (code = 'offer') LIMIT 1[0m
  [1m[35mFilterType Load (0.4ms)[0m  SELECT `filter_types`.* FROM `filter_types` WHERE (code = 'features') LIMIT 1
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT `filters`.* FROM `filters` WHERE (code = 'offer') LIMIT 1[0m
  [1m[35mCACHE (0.0ms)[0m  SELECT `filter_types`.* FROM `filter_types` WHERE (code = 'features') LIMIT 1
Processing by RestaurantsController#show as JSON
  Parameters: {"r_id"=>"", "id"=>"collection_images"}
  [1m[36mRestaurant Load (1.4ms)[0m  [1mSELECT `restaurants`.* FROM `restaurants` WHERE `restaurants`.`slug` = 'collection_images' LIMIT 1[0m
  [1m[35mRestaurant Load (0.2ms)[0m  SELECT `restaurants`.* FROM `restaurants` WHERE `restaurants`.`id` = 0 LIMIT 1
Completed 500 Internal Server Error in 8ms

ActiveRecord::RecordNotFound (Couldn't find Restaurant with id=collection_images):
  app/controllers/restaurants_controller.rb:193:in `show'


  Rendered /Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_dispatch/middleware/templates/rescues/_trace.erb (1.4ms)
  Rendered /Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_dispatch/middleware/templates/rescues/_request_and_response.erb (1.0ms)
  Rendered /Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_dispatch/middleware/templates/rescues/diagnostics.erb within rescues/layout (46.6ms)


Started POST "/admin/collections" for 127.0.0.1 at 2016-01-16 20:20:23 +0100
Processing by CollectionsController#create as HTML
  Parameters: {"utf8"=>"âœ“", "authenticity_token"=>"ZhR8a2fYr/EQcBrBVm2c17tt7AHk64f/gvsZ5fOllxc=", "admin"=>"true", "collection"=>{"name"=>"test", "description"=>"testst"}}
  [1m[36mCollection Load (0.2ms)[0m  [1mSELECT `collections`.* FROM `collections` WHERE `collections`.`name` = 'test' LIMIT 1[0m
  [1m[35m (0.1ms)[0m  BEGIN
  [1m[36m (0.1ms)[0m  [1mROLLBACK[0m
Completed 500 Internal Server Error in 9ms

NoMethodError (undefined method `collection_image' for #<Collection:0x007ffc6fbc3950>):
  app/controllers/collections_controller.rb:80:in `block in create'
  app/controllers/collections_controller.rb:77:in `create'


  Rendered /Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_dispatch/middleware/templates/rescues/_trace.erb (1.0ms)
  Rendered /Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_dispatch/middleware/templates/rescues/_request_and_response.erb (0.8ms)
  Rendered /Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_dispatch/middleware/templates/rescues/diagnostics.erb within rescues/layout (41.2ms)


Started POST "/admin/collections" for 127.0.0.1 at 2016-01-16 20:22:03 +0100
Processing by CollectionsController#create as HTML
  Parameters: {"utf8"=>"âœ“", "authenticity_token"=>"ZhR8a2fYr/EQcBrBVm2c17tt7AHk64f/gvsZ5fOllxc=", "admin"=>"true", "collection"=>{"name"=>"test", "description"=>"testst"}}
  [1m[35mCollection Load (0.2ms)[0m  SELECT `collections`.* FROM `collections` WHERE `collections`.`name` = 'test' LIMIT 1
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35m (0.1ms)[0m  ROLLBACK
  Rendered collections/_collection_form.html.erb (5.8ms)
  Rendered collections/_collection_restaurants_form.html.erb (0.3ms)
  [1m[36mUser Load (0.3ms)[0m  [1mSELECT `users`.* FROM `users` WHERE `users`.`id` = 1 LIMIT 1[0m
  Rendered collections/_upload_collection_image.html.erb (76.9ms)
  Rendered collections/admin_new_collection.html.erb within layouts/admin (85.7ms)
Completed 200 OK in 103ms (Views: 91.5ms | ActiveRecord: 3.2ms)


Started GET "/collection_images?r_id=" for 127.0.0.1 at 2016-01-16 20:22:03 +0100
  [1m[35m (0.2ms)[0m  SELECT COUNT(*) FROM `filter_types` WHERE (code = 'features')
  [1m[36m (0.2ms)[0m  [1mSELECT COUNT(*) FROM `filters` WHERE (code = 'offer')[0m
  [1m[35mFilter Load (0.1ms)[0m  SELECT `filters`.* FROM `filters` WHERE (code = 'offer') LIMIT 1
  [1m[36mFilterType Load (0.2ms)[0m  [1mSELECT `filter_types`.* FROM `filter_types` WHERE (code = 'features') LIMIT 1[0m
  [1m[35mCACHE (0.0ms)[0m  SELECT `filters`.* FROM `filters` WHERE (code = 'offer') LIMIT 1
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT `filter_types`.* FROM `filter_types` WHERE (code = 'features') LIMIT 1[0m
Processing by RestaurantsController#show as JSON
  Parameters: {"r_id"=>"", "id"=>"collection_images"}
  [1m[35mRestaurant Load (1.6ms)[0m  SELECT `restaurants`.* FROM `restaurants` WHERE `restaurants`.`slug` = 'collection_images' LIMIT 1
  [1m[36mRestaurant Load (0.2ms)[0m  [1mSELECT `restaurants`.* FROM `restaurants` WHERE `restaurants`.`id` = 0 LIMIT 1[0m
Completed 500 Internal Server Error in 13ms

ActiveRecord::RecordNotFound (Couldn't find Restaurant with id=collection_images):
  app/controllers/restaurants_controller.rb:193:in `show'


  Rendered /Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_dispatch/middleware/templates/rescues/_trace.erb (2.6ms)
  Rendered /Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_dispatch/middleware/templates/rescues/_request_and_response.erb (2.2ms)
  Rendered /Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_dispatch/middleware/templates/rescues/diagnostics.erb within rescues/layout (50.6ms)


Started POST "/admin/collections" for 127.0.0.1 at 2016-01-16 20:33:32 +0100
Processing by CollectionsController#create as HTML
  Parameters: {"utf8"=>"âœ“", "authenticity_token"=>"ZhR8a2fYr/EQcBrBVm2c17tt7AHk64f/gvsZ5fOllxc=", "admin"=>"true", "collection"=>{"name"=>"test", "description"=>"testst", "image_url"=>#<ActionDispatch::Http::UploadedFile:0x007ffc6d4cbed8 @original_filename="steak.png", @content_type="image/png", @headers="Content-Disposition: form-data; name=\"collection[image_url]\"; filename=\"steak.png\"\r\nContent-Type: image/png\r\n", @tempfile=#<Tempfile:/var/folders/rf/q4l8n5k56pnbjgkdtzrhq_w00000gn/T/RackMultipart20160116-27879-372yeq>>}}
  [1m[35mCollection Load (0.3ms)[0m  SELECT `collections`.* FROM `collections` WHERE `collections`.`name` = 'test' LIMIT 1
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35mSQL (1.0ms)[0m  INSERT INTO `collections` (`created_at`, `description`, `image_url`, `name`, `updated_at`) VALUES ('2016-01-16 19:33:32', 'testst', '--- !ruby/object:ActionDispatch::Http::UploadedFile\noriginal_filename: steak.png\ncontent_type: image/png\nheaders: \"Content-Disposition: form-data; name=\\\"collection[image_url]\\\"; filename=\\\"steak.png\\\"\\r\\nContent-Type:\n image/png\\r\\n\"\ntempfile: !ruby/marshalable:Tempfile\n :__v2__:\n - :@data\n - :@clean_proc\n - :@tmpfile\n - :@tmpname\n - :@mode\n - :@opts\n ? - &1\n - \"/var/folders/rf/q4l8n5k56pnbjgkdtzrhq_w00000gn/T/RackMultipart20160116-27879-372yeq\"\n - &2 !ruby/object:File {}\n - !ruby/object:Tempfile::Remover\n pid: 27879\n data: *1\n - *2\n - \"/var/folders/rf/q4l8n5k56pnbjgkdtzrhq_w00000gn/T/RackMultipart20160116-27879-372yeq\"\n - 2\n - :perm: 384\n : *2\n', 'test', '2016-01-16 19:33:32')
Mysql2::Error: Data too long for column 'image_url' at row 1: INSERT INTO `collections` (`created_at`, `description`, `image_url`, `name`, `updated_at`) VALUES ('2016-01-16 19:33:32', 'testst', '--- !ruby/object:ActionDispatch::Http::UploadedFile\noriginal_filename: steak.png\ncontent_type: image/png\nheaders: \"Content-Disposition: form-data; name=\\\"collection[image_url]\\\"; filename=\\\"steak.png\\\"\\r\\nContent-Type:\n  image/png\\r\\n\"\ntempfile: !ruby/marshalable:Tempfile\n  :__v2__:\n  - :@data\n  - :@clean_proc\n  - :@tmpfile\n  - :@tmpname\n  - :@mode\n  - :@opts\n  ? - &1\n      - \"/var/folders/rf/q4l8n5k56pnbjgkdtzrhq_w00000gn/T/RackMultipart20160116-27879-372yeq\"\n      - &2 !ruby/object:File {}\n    - !ruby/object:Tempfile::Remover\n      pid: 27879\n      data: *1\n    - *2\n    - \"/var/folders/rf/q4l8n5k56pnbjgkdtzrhq_w00000gn/T/RackMultipart20160116-27879-372yeq\"\n    - 2\n    - :perm: 384\n  : *2\n', 'test', '2016-01-16 19:33:32')
  [1m[36m (0.1ms)[0m  [1mROLLBACK[0m
Completed 500 Internal Server Error in 43ms

ActiveRecord::StatementInvalid (Mysql2::Error: Data too long for column 'image_url' at row 1: INSERT INTO `collections` (`created_at`, `description`, `image_url`, `name`, `updated_at`) VALUES ('2016-01-16 19:33:32', 'testst', '--- !ruby/object:ActionDispatch::Http::UploadedFile\noriginal_filename: steak.png\ncontent_type: image/png\nheaders: \"Content-Disposition: form-data; name=\\\"collection[image_url]\\\"; filename=\\\"steak.png\\\"\\r\\nContent-Type:\n  image/png\\r\\n\"\ntempfile: !ruby/marshalable:Tempfile\n  :__v2__:\n  - :@data\n  - :@clean_proc\n  - :@tmpfile\n  - :@tmpname\n  - :@mode\n  - :@opts\n  ? - &1\n      - \"/var/folders/rf/q4l8n5k56pnbjgkdtzrhq_w00000gn/T/RackMultipart20160116-27879-372yeq\"\n      - &2 !ruby/object:File {}\n    - !ruby/object:Tempfile::Remover\n      pid: 27879\n      data: *1\n    - *2\n    - \"/var/folders/rf/q4l8n5k56pnbjgkdtzrhq_w00000gn/T/RackMultipart20160116-27879-372yeq\"\n    - 2\n    - :perm: 384\n  : *2\n', 'test', '2016-01-16 19:33:32')):
  app/controllers/collections_controller.rb:80:in `block in create'
  app/controllers/collections_controller.rb:77:in `create'


  Rendered /Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_dispatch/middleware/templates/rescues/_trace.erb (2.9ms)
  Rendered /Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_dispatch/middleware/templates/rescues/_request_and_response.erb (1.8ms)
  Rendered /Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_dispatch/middleware/templates/rescues/diagnostics.erb within rescues/layout (48.3ms)


Started POST "/admin/collections" for 127.0.0.1 at 2016-01-16 20:34:46 +0100
Processing by CollectionsController#create as HTML
  Parameters: {"utf8"=>"âœ“", "authenticity_token"=>"ZhR8a2fYr/EQcBrBVm2c17tt7AHk64f/gvsZ5fOllxc=", "admin"=>"true", "collection"=>{"name"=>"test", "description"=>"testst", "image_url"=>#<ActionDispatch::Http::UploadedFile:0x007ffc6fa43da0 @original_filename="steak.png", @content_type="image/png", @headers="Content-Disposition: form-data; name=\"collection[image_url]\"; filename=\"steak.png\"\r\nContent-Type: image/png\r\n", @tempfile=#<Tempfile:/var/folders/rf/q4l8n5k56pnbjgkdtzrhq_w00000gn/T/RackMultipart20160116-27879-1ymp5uy>>}}
  [1m[35mCollection Load (0.5ms)[0m  SELECT `collections`.* FROM `collections` WHERE `collections`.`name` = 'test' LIMIT 1
Completed 500 Internal Server Error in 9ms

NoMethodError (undefined method `image_url_uid' for #<Collection:0x007ffc6f9e93f0>):
  app/controllers/collections_controller.rb:79:in `new'
  app/controllers/collections_controller.rb:79:in `block in create'
  app/controllers/collections_controller.rb:77:in `create'


  Rendered /Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_dispatch/middleware/templates/rescues/_trace.erb (1.0ms)
  Rendered /Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_dispatch/middleware/templates/rescues/_request_and_response.erb (1.5ms)
  Rendered /Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_dispatch/middleware/templates/rescues/diagnostics.erb within rescues/layout (42.1ms)


Started POST "/admin/collections" for 127.0.0.1 at 2016-01-16 20:37:01 +0100
Processing by CollectionsController#create as HTML
  Parameters: {"utf8"=>"âœ“", "authenticity_token"=>"ZhR8a2fYr/EQcBrBVm2c17tt7AHk64f/gvsZ5fOllxc=", "admin"=>"true", "collection"=>{"name"=>"test", "description"=>"testst"}}
  [1m[36mCollection Load (0.3ms)[0m  [1mSELECT `collections`.* FROM `collections` WHERE `collections`.`name` = 'test' LIMIT 1[0m
  [1m[35m (0.1ms)[0m  BEGIN
  [1m[36m (0.1ms)[0m  [1mROLLBACK[0m
Completed 500 Internal Server Error in 5ms

NoMethodError (undefined method `image_url_uid' for #<Collection:0x007ffc6fbb2c68>):
  app/controllers/collections_controller.rb:80:in `block in create'
  app/controllers/collections_controller.rb:77:in `create'


  Rendered /Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_dispatch/middleware/templates/rescues/_trace.erb (1.9ms)
  Rendered /Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_dispatch/middleware/templates/rescues/_request_and_response.erb (1.4ms)
  Rendered /Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_dispatch/middleware/templates/rescues/diagnostics.erb within rescues/layout (45.9ms)


Started GET "/admin/collections" for 127.0.0.1 at 2016-01-16 20:37:09 +0100
Processing by CollectionsController#index as HTML
  Rendered shared/_restaurant_manage_tabs.html.erb (4.4ms)
  [1m[35mCollection Load (0.4ms)[0m  SELECT `collections`.* FROM `collections` ORDER BY name ASC, created_at DESC LIMIT 12 OFFSET 0
  [1m[36m (0.2ms)[0m  [1mSELECT COUNT(*) FROM `collections` [0m
  Rendered collections/index.erb within layouts/admin (28.0ms)
  [1m[35mUser Load (0.3ms)[0m  SELECT `users`.* FROM `users` WHERE `users`.`id` = 1 LIMIT 1
Completed 200 OK in 135ms (Views: 131.5ms | ActiveRecord: 1.8ms)


Started GET "/admin/collections?_=1452973030883" for 127.0.0.1 at 2016-01-16 20:37:10 +0100
Processing by CollectionsController#index as JS
  Parameters: {"_"=>"1452973030883"}
  Rendered shared/_restaurant_manage_tabs.html.erb (0.8ms)
  [1m[36mCollection Load (0.3ms)[0m  [1mSELECT `collections`.* FROM `collections` ORDER BY name ASC, created_at DESC LIMIT 12 OFFSET 0[0m
  [1m[35m (0.2ms)[0m  SELECT COUNT(*) FROM `collections` 
  Rendered collections/index.erb within layouts/admin (9.9ms)
  [1m[36mUser Load (0.3ms)[0m  [1mSELECT `users`.* FROM `users` WHERE `users`.`id` = 1 LIMIT 1[0m
Completed 200 OK in 21ms (Views: 19.2ms | ActiveRecord: 0.8ms)


Started GET "/admin/collections/admin_new_collection" for 127.0.0.1 at 2016-01-16 20:37:11 +0100
Processing by CollectionsController#admin_new_collection as HTML
  [1m[35mUser Load (0.4ms)[0m  SELECT `users`.* FROM `users` WHERE `users`.`id` = 1 LIMIT 1
  Rendered collections/_collection_form.html.erb (10.9ms)
  Rendered collections/admin_new_collection.html.erb within layouts/admin (12.3ms)
Completed 500 Internal Server Error in 33ms

ActionView::Template::Error (undefined method `image_url_uid' for #<Collection:0x007ffc6cc9a8e0>):
    1: 
    2: <div class="form_add_new_collection">
    3:   <%= simple_form_for(@collection, wrapper: 'collection', :multipart => true, :validate => true) do |f| %>
    4:     <div class="row">
    5:       <div class='col-md-4'>
    6:         <%= hidden_field_tag 'admin', true %>
  app/views/collections/_collection_form.html.erb:3:in `_app_views_collections__collection_form_html_erb___1960648650376828976_70361066656620'
  app/views/collections/admin_new_collection.html.erb:15:in `_app_views_collections_admin_new_collection_html_erb__1406352457603862768_70361090199440'
  app/controllers/collections_controller.rb:55:in `admin_new_collection'


  Rendered /Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_dispatch/middleware/templates/rescues/_trace.erb (1.7ms)
  Rendered /Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_dispatch/middleware/templates/rescues/_request_and_response.erb (0.9ms)
  Rendered /Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_dispatch/middleware/templates/rescues/template_error.erb within rescues/layout (42.3ms)


Started GET "/admin/collections/admin_new_collection" for 127.0.0.1 at 2016-01-16 20:42:59 +0100
Processing by CollectionsController#admin_new_collection as HTML
  [1m[36mUser Load (0.4ms)[0m  [1mSELECT `users`.* FROM `users` WHERE `users`.`id` = 1 LIMIT 1[0m
  Rendered collections/_collection_form.html.erb (7.3ms)
  Rendered collections/admin_new_collection.html.erb within layouts/admin (8.5ms)
Completed 500 Internal Server Error in 31ms

ActionView::Template::Error (undefined method `image_url_uid' for #<Collection:0x007ffc6a7afa08>):
    1: 
    2: <div class="form_add_new_collection">
    3:   <%= simple_form_for(@collection, wrapper: 'collection', :multipart => true, :remote => true, :validate => true) do |f| %>
    4:     <div class="row">
    5:       <div class='col-md-4'>
    6:         <%= hidden_field_tag 'admin', true %>
  app/views/collections/_collection_form.html.erb:3:in `_app_views_collections__collection_form_html_erb___1960648650376828976_70361047382740'
  app/views/collections/admin_new_collection.html.erb:15:in `_app_views_collections_admin_new_collection_html_erb__1406352457603862768_70361090199440'
  app/controllers/collections_controller.rb:55:in `admin_new_collection'


  Rendered /Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_dispatch/middleware/templates/rescues/_trace.erb (1.4ms)
  Rendered /Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_dispatch/middleware/templates/rescues/_request_and_response.erb (0.9ms)
  Rendered /Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_dispatch/middleware/templates/rescues/template_error.erb within rescues/layout (46.0ms)


Started GET "/admin/collections/admin_new_collection" for 127.0.0.1 at 2016-01-16 20:43:34 +0100
Processing by CollectionsController#admin_new_collection as HTML
  [1m[35mUser Load (0.3ms)[0m  SELECT `users`.* FROM `users` WHERE `users`.`id` = 1 LIMIT 1
  Rendered collections/_collection_form.html.erb (62.0ms)
  Rendered collections/admin_new_collection.html.erb within layouts/admin (63.0ms)
Completed 500 Internal Server Error in 68ms

ActionView::Template::Error (undefined method `input' for #<ActionView::Helpers::FormBuilder:0x007ffc6f9f0088>):
    4:     <div class="row">
    5:       <div class='col-md-4'>
    6:         <%= hidden_field_tag 'admin', true %>
    7:         <%= f.input :name, placeholder: 'Name', input_html: { class: 'form-control' } %>
    8:         <%= f.input :description, placeholder: 'Description', input_html: { class: 'form-control' }%>
    9:         <%= f.label :image_url, 'Choose image', class: 'btn btn-default mg-bt-10 border-radius-5 form-control label_for_choose_menu' %>
    10:         <%= f.file_field :image_url, :multiple => false , class: 'form-control'%>
  app/views/collections/_collection_form.html.erb:7:in `block in _app_views_collections__collection_form_html_erb___1960648650376828976_70361090736360'
  app/views/collections/_collection_form.html.erb:3:in `_app_views_collections__collection_form_html_erb___1960648650376828976_70361090736360'
  app/views/collections/admin_new_collection.html.erb:15:in `_app_views_collections_admin_new_collection_html_erb__1406352457603862768_70361090199440'
  app/controllers/collections_controller.rb:55:in `admin_new_collection'


  Rendered /Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_dispatch/middleware/templates/rescues/_trace.erb (1.2ms)
  Rendered /Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_dispatch/middleware/templates/rescues/_request_and_response.erb (0.8ms)
  Rendered /Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_dispatch/middleware/templates/rescues/template_error.erb within rescues/layout (42.6ms)


Started GET "/admin/collections/admin_new_collection" for 127.0.0.1 at 2016-01-16 20:46:08 +0100
Processing by CollectionsController#admin_new_collection as HTML
  [1m[36mUser Load (0.3ms)[0m  [1mSELECT `users`.* FROM `users` WHERE `users`.`id` = 1 LIMIT 1[0m
  Rendered collections/_collection_form.html.erb (6.2ms)
  Rendered collections/_collection_restaurants_form.html.erb (0.5ms)
  Rendered collections/_upload_collection_image.html.erb (29.7ms)
  Rendered collections/admin_new_collection.html.erb within layouts/admin (52.7ms)
Completed 200 OK in 63ms (Views: 58.0ms | ActiveRecord: 1.9ms)


Started GET "/collection_images?r_id=" for 127.0.0.1 at 2016-01-16 20:46:08 +0100
  [1m[35m (0.2ms)[0m  SELECT COUNT(*) FROM `filter_types` WHERE (code = 'features')
  [1m[36m (0.2ms)[0m  [1mSELECT COUNT(*) FROM `filters` WHERE (code = 'offer')[0m
  [1m[35mFilter Load (0.2ms)[0m  SELECT `filters`.* FROM `filters` WHERE (code = 'offer') LIMIT 1
  [1m[36mFilterType Load (0.4ms)[0m  [1mSELECT `filter_types`.* FROM `filter_types` WHERE (code = 'features') LIMIT 1[0m
  [1m[35mCACHE (0.0ms)[0m  SELECT `filters`.* FROM `filters` WHERE (code = 'offer') LIMIT 1
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT `filter_types`.* FROM `filter_types` WHERE (code = 'features') LIMIT 1[0m
Processing by RestaurantsController#show as JSON
  Parameters: {"r_id"=>"", "id"=>"collection_images"}
  [1m[35mRestaurant Load (1.5ms)[0m  SELECT `restaurants`.* FROM `restaurants` WHERE `restaurants`.`slug` = 'collection_images' LIMIT 1
  [1m[36mRestaurant Load (0.2ms)[0m  [1mSELECT `restaurants`.* FROM `restaurants` WHERE `restaurants`.`id` = 0 LIMIT 1[0m
Completed 500 Internal Server Error in 7ms

ActiveRecord::RecordNotFound (Couldn't find Restaurant with id=collection_images):
  app/controllers/restaurants_controller.rb:193:in `show'


  Rendered /Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_dispatch/middleware/templates/rescues/_trace.erb (1.0ms)
  Rendered /Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_dispatch/middleware/templates/rescues/_request_and_response.erb (0.9ms)
  Rendered /Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_dispatch/middleware/templates/rescues/diagnostics.erb within rescues/layout (50.5ms)


Started POST "/admin/collections" for 127.0.0.1 at 2016-01-16 20:46:27 +0100
Processing by CollectionsController#create as HTML
  Parameters: {"utf8"=>"âœ“", "authenticity_token"=>"ZhR8a2fYr/EQcBrBVm2c17tt7AHk64f/gvsZ5fOllxc=", "admin"=>"true", "collection"=>{"name"=>"teste", "description"=>"teste", "image_url"=>#<ActionDispatch::Http::UploadedFile:0x007ffc6c93bc08 @original_filename="sunday_roast.png", @content_type="image/png", @headers="Content-Disposition: form-data; name=\"collection[image_url]\"; filename=\"sunday_roast.png\"\r\nContent-Type: image/png\r\n", @tempfile=#<Tempfile:/var/folders/rf/q4l8n5k56pnbjgkdtzrhq_w00000gn/T/RackMultipart20160116-27879-phztf3>>}}
  [1m[35mCollection Load (0.3ms)[0m  SELECT `collections`.* FROM `collections` WHERE `collections`.`name` = 'teste' LIMIT 1
Completed 500 Internal Server Error in 2ms

NoMethodError (undefined method `image_url_uid' for #<Collection:0x007ffc6d042088>):
  app/controllers/collections_controller.rb:79:in `new'
  app/controllers/collections_controller.rb:79:in `block in create'
  app/controllers/collections_controller.rb:77:in `create'


  Rendered /Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_dispatch/middleware/templates/rescues/_trace.erb (0.9ms)
  Rendered /Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_dispatch/middleware/templates/rescues/_request_and_response.erb (1.0ms)
  Rendered /Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_dispatch/middleware/templates/rescues/diagnostics.erb within rescues/layout (43.3ms)


Started POST "/admin/collections" for 127.0.0.1 at 2016-01-16 20:47:03 +0100
Processing by CollectionsController#create as HTML
  Parameters: {"utf8"=>"âœ“", "authenticity_token"=>"ZhR8a2fYr/EQcBrBVm2c17tt7AHk64f/gvsZ5fOllxc=", "admin"=>"true", "collection"=>{"name"=>"teste", "description"=>"teste", "image_url"=>#<ActionDispatch::Http::UploadedFile:0x007ffc6cd400b0 @original_filename="sunday_roast.png", @content_type="image/png", @headers="Content-Disposition: form-data; name=\"collection[image_url]\"; filename=\"sunday_roast.png\"\r\nContent-Type: image/png\r\n", @tempfile=#<Tempfile:/var/folders/rf/q4l8n5k56pnbjgkdtzrhq_w00000gn/T/RackMultipart20160116-27879-190ljd1>>}}
  [1m[36mCollection Load (0.2ms)[0m  [1mSELECT `collections`.* FROM `collections` WHERE `collections`.`name` = 'teste' LIMIT 1[0m
Completed 500 Internal Server Error in 7ms

NoMethodError (undefined method `image_url_uid' for #<Collection:0x007ffc730755b8>):
  app/controllers/collections_controller.rb:79:in `new'
  app/controllers/collections_controller.rb:79:in `block in create'
  app/controllers/collections_controller.rb:77:in `create'


  Rendered /Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_dispatch/middleware/templates/rescues/_trace.erb (0.8ms)
  Rendered /Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_dispatch/middleware/templates/rescues/_request_and_response.erb (0.8ms)
  Rendered /Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_dispatch/middleware/templates/rescues/diagnostics.erb within rescues/layout (40.3ms)


Started POST "/admin/collections" for 127.0.0.1 at 2016-01-16 20:48:34 +0100
Processing by CollectionsController#create as HTML
  Parameters: {"utf8"=>"âœ“", "authenticity_token"=>"ZhR8a2fYr/EQcBrBVm2c17tt7AHk64f/gvsZ5fOllxc=", "admin"=>"true", "collection"=>{"name"=>"teste", "description"=>"teste", "image_url"=>#<ActionDispatch::Http::UploadedFile:0x007ffc731fa000 @original_filename="sunday_roast.png", @content_type="image/png", @headers="Content-Disposition: form-data; name=\"collection[image_url]\"; filename=\"sunday_roast.png\"\r\nContent-Type: image/png\r\n", @tempfile=#<Tempfile:/var/folders/rf/q4l8n5k56pnbjgkdtzrhq_w00000gn/T/RackMultipart20160116-27879-2z4av5>>}}
  [1m[35mCollection Load (0.2ms)[0m  SELECT `collections`.* FROM `collections` WHERE `collections`.`name` = 'teste' LIMIT 1
Completed 500 Internal Server Error in 7ms

NoMethodError (undefined method `image_url_uid' for #<Collection:0x007ffc6fed3230>):
  app/controllers/collections_controller.rb:79:in `new'
  app/controllers/collections_controller.rb:79:in `block in create'
  app/controllers/collections_controller.rb:77:in `create'


  Rendered /Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_dispatch/middleware/templates/rescues/_trace.erb (1.1ms)
  Rendered /Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_dispatch/middleware/templates/rescues/_request_and_response.erb (1.3ms)
  Rendered /Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_dispatch/middleware/templates/rescues/diagnostics.erb within rescues/layout (42.9ms)


Started GET "/admin/collections/admin_new_collection" for 127.0.0.1 at 2016-01-16 20:48:38 +0100
Processing by CollectionsController#admin_new_collection as HTML
  [1m[36mUser Load (0.2ms)[0m  [1mSELECT `users`.* FROM `users` WHERE `users`.`id` = 1 LIMIT 1[0m
  Rendered collections/_collection_form.html.erb (5.9ms)
  Rendered collections/admin_new_collection.html.erb within layouts/admin (6.8ms)
Completed 500 Internal Server Error in 85ms

ActionView::Template::Error (undefined method `image_url_uid' for #<Collection:0x007ffc73478980>):
    1: 
    2: <div class="form_add_new_collection">
    3:   <%= simple_form_for(@collection, wrapper: 'collection', :multipart => true, :validate => true) do |f| %>
    4:     <div class="row">
    5:       <div class='col-md-4'>
    6:         <%= hidden_field_tag 'admin', true %>
  app/views/collections/_collection_form.html.erb:3:in `_app_views_collections__collection_form_html_erb___1960648650376828976_70361121313860'
  app/views/collections/admin_new_collection.html.erb:15:in `_app_views_collections_admin_new_collection_html_erb__1406352457603862768_70361090199440'
  app/controllers/collections_controller.rb:55:in `admin_new_collection'


  Rendered /Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_dispatch/middleware/templates/rescues/_trace.erb (1.0ms)
  Rendered /Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_dispatch/middleware/templates/rescues/_request_and_response.erb (0.7ms)
  Rendered /Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_dispatch/middleware/templates/rescues/template_error.erb within rescues/layout (43.5ms)


Started GET "/admin/collections/admin_new_collection" for 127.0.0.1 at 2016-01-16 21:03:38 +0100
Processing by CollectionsController#admin_new_collection as HTML
  [1m[35mUser Load (0.4ms)[0m  SELECT `users`.* FROM `users` WHERE `users`.`id` = 1 LIMIT 1
  Rendered collections/_collection_form.html.erb (9.7ms)
  Rendered collections/admin_new_collection.html.erb within layouts/admin (11.1ms)
Completed 500 Internal Server Error in 18ms

ActionView::Template::Error (undefined method `image_url_uid' for #<Collection:0x007ffc735d3168>):
    1: 
    2: <div class="form_add_new_collection">
    3:   <%= simple_form_for(@collection, wrapper: 'collection', :multipart => true, :validate => true) do |f| %>
    4:     <div class="row">
    5:       <div class='col-md-4'>
    6:         <%= hidden_field_tag 'admin', true %>
  app/views/collections/_collection_form.html.erb:3:in `_app_views_collections__collection_form_html_erb___1960648650376828976_70361085631900'
  app/views/collections/admin_new_collection.html.erb:15:in `_app_views_collections_admin_new_collection_html_erb__1406352457603862768_70361090199440'
  app/controllers/collections_controller.rb:55:in `admin_new_collection'


  Rendered /Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_dispatch/middleware/templates/rescues/_trace.erb (1.2ms)
  Rendered /Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_dispatch/middleware/templates/rescues/_request_and_response.erb (0.9ms)
  Rendered /Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_dispatch/middleware/templates/rescues/template_error.erb within rescues/layout (45.7ms)


Started GET "/admin/collections/admin_new_collection" for 127.0.0.1 at 2016-01-16 21:03:39 +0100
Processing by CollectionsController#admin_new_collection as HTML
  [1m[36mUser Load (0.4ms)[0m  [1mSELECT `users`.* FROM `users` WHERE `users`.`id` = 1 LIMIT 1[0m
  Rendered collections/_collection_form.html.erb (6.8ms)
  Rendered collections/admin_new_collection.html.erb within layouts/admin (7.9ms)
Completed 500 Internal Server Error in 13ms

ActionView::Template::Error (undefined method `image_url_uid' for #<Collection:0x007ffc72ab33c8>):
    1: 
    2: <div class="form_add_new_collection">
    3:   <%= simple_form_for(@collection, wrapper: 'collection', :multipart => true, :validate => true) do |f| %>
    4:     <div class="row">
    5:       <div class='col-md-4'>
    6:         <%= hidden_field_tag 'admin', true %>
  app/views/collections/_collection_form.html.erb:3:in `_app_views_collections__collection_form_html_erb___1960648650376828976_70361085631900'
  app/views/collections/admin_new_collection.html.erb:15:in `_app_views_collections_admin_new_collection_html_erb__1406352457603862768_70361090199440'
  app/controllers/collections_controller.rb:55:in `admin_new_collection'


  Rendered /Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_dispatch/middleware/templates/rescues/_trace.erb (1.7ms)
  Rendered /Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_dispatch/middleware/templates/rescues/_request_and_response.erb (0.8ms)
  Rendered /Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_dispatch/middleware/templates/rescues/template_error.erb within rescues/layout (44.6ms)


Started GET "/admin/restaurants" for 127.0.0.1 at 2016-01-16 21:08:13 +0100
  [1m[35m (0.2ms)[0m  SELECT COUNT(*) FROM `filter_types` WHERE (code = 'features')
  [1m[36m (0.2ms)[0m  [1mSELECT COUNT(*) FROM `filters` WHERE (code = 'offer')[0m
  [1m[35mFilter Load (0.2ms)[0m  SELECT `filters`.* FROM `filters` WHERE (code = 'offer') LIMIT 1
  [1m[36mFilterType Load (0.2ms)[0m  [1mSELECT `filter_types`.* FROM `filter_types` WHERE (code = 'features') LIMIT 1[0m
  [1m[35mCACHE (0.0ms)[0m  SELECT `filters`.* FROM `filters` WHERE (code = 'offer') LIMIT 1
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT `filter_types`.* FROM `filter_types` WHERE (code = 'features') LIMIT 1[0m
Processing by RestaurantsController#index as HTML
  [1m[35mUser Load (0.4ms)[0m  SELECT `users`.* FROM `users` WHERE `users`.`id` = 1 LIMIT 1
  Rendered shared/_restaurant_manage_tabs.html.erb (0.6ms)
  Rendered restaurants/_condition_fields.html.erb (13.6ms)
  [1m[36mRestaurant Load (1.2ms)[0m  [1mSELECT `restaurants`.* FROM `restaurants` ORDER BY disabled ASC,created_at DESC LIMIT 12 OFFSET 0[0m
  [1m[35mPhoto Load (0.5ms)[0m  SELECT `photos`.* FROM `photos` WHERE (restaurant_id = 1057 and cover = true and status = 1) LIMIT 1
  [1m[36mPhoto Load (0.4ms)[0m  [1mSELECT `photos`.* FROM `photos` WHERE `photos`.`restaurant_id` = 1057 AND `photos`.`status` = 1 ORDER BY restaurant_id ASC, created_at DESC LIMIT 1[0m
  [1m[35mPhoto Load (0.4ms)[0m  SELECT `photos`.* FROM `photos` WHERE (restaurant_id = 903 and cover = true and status = 1) LIMIT 1
  [1m[36mPhoto Load (0.3ms)[0m  [1mSELECT `photos`.* FROM `photos` WHERE `photos`.`restaurant_id` = 903 AND `photos`.`status` = 1 ORDER BY restaurant_id ASC, created_at DESC LIMIT 1[0m
  [1m[35mPhoto Load (0.3ms)[0m  SELECT `photos`.* FROM `photos` WHERE (restaurant_id = 876 and cover = true and status = 1) LIMIT 1
  [1m[36mPhoto Load (0.4ms)[0m  [1mSELECT `photos`.* FROM `photos` WHERE `photos`.`restaurant_id` = 876 AND `photos`.`status` = 1 ORDER BY restaurant_id ASC, created_at DESC LIMIT 1[0m
  [1m[35mPhoto Load (0.4ms)[0m  SELECT `photos`.* FROM `photos` WHERE (restaurant_id = 851 and cover = true and status = 1) LIMIT 1
  [1m[36mPhoto Load (0.3ms)[0m  [1mSELECT `photos`.* FROM `photos` WHERE `photos`.`restaurant_id` = 851 AND `photos`.`status` = 1 ORDER BY restaurant_id ASC, created_at DESC LIMIT 1[0m
  [1m[35mPhoto Load (0.3ms)[0m  SELECT `photos`.* FROM `photos` WHERE (restaurant_id = 693 and cover = true and status = 1) LIMIT 1
  [1m[36mPhoto Load (0.3ms)[0m  [1mSELECT `photos`.* FROM `photos` WHERE `photos`.`restaurant_id` = 693 AND `photos`.`status` = 1 ORDER BY restaurant_id ASC, created_at DESC LIMIT 1[0m
  [1m[35mPhoto Load (0.3ms)[0m  SELECT `photos`.* FROM `photos` WHERE (restaurant_id = 686 and cover = true and status = 1) LIMIT 1
  [1m[36mPhoto Load (0.3ms)[0m  [1mSELECT `photos`.* FROM `photos` WHERE `photos`.`restaurant_id` = 686 AND `photos`.`status` = 1 ORDER BY restaurant_id ASC, created_at DESC LIMIT 1[0m
  [1m[35mPhoto Load (0.3ms)[0m  SELECT `photos`.* FROM `photos` WHERE (restaurant_id = 669 and cover = true and status = 1) LIMIT 1
  [1m[36mPhoto Load (0.3ms)[0m  [1mSELECT `photos`.* FROM `photos` WHERE `photos`.`restaurant_id` = 669 AND `photos`.`status` = 1 ORDER BY restaurant_id ASC, created_at DESC LIMIT 1[0m
  [1m[35mPhoto Load (0.5ms)[0m  SELECT `photos`.* FROM `photos` WHERE (restaurant_id = 251 and cover = true and status = 1) LIMIT 1
  [1m[36mPhoto Load (0.3ms)[0m  [1mSELECT `photos`.* FROM `photos` WHERE `photos`.`restaurant_id` = 251 AND `photos`.`status` = 1 ORDER BY restaurant_id ASC, created_at DESC LIMIT 1[0m
  [1m[35mPhoto Load (0.3ms)[0m  SELECT `photos`.* FROM `photos` WHERE (restaurant_id = 250 and cover = true and status = 1) LIMIT 1
  [1m[36mPhoto Load (0.3ms)[0m  [1mSELECT `photos`.* FROM `photos` WHERE `photos`.`restaurant_id` = 250 AND `photos`.`status` = 1 ORDER BY restaurant_id ASC, created_at DESC LIMIT 1[0m
  [1m[35mPhoto Load (0.4ms)[0m  SELECT `photos`.* FROM `photos` WHERE (restaurant_id = 237 and cover = true and status = 1) LIMIT 1
  [1m[36mPhoto Load (0.3ms)[0m  [1mSELECT `photos`.* FROM `photos` WHERE `photos`.`restaurant_id` = 237 AND `photos`.`status` = 1 ORDER BY restaurant_id ASC, created_at DESC LIMIT 1[0m
  [1m[35mPhoto Load (0.3ms)[0m  SELECT `photos`.* FROM `photos` WHERE (restaurant_id = 231 and cover = true and status = 1) LIMIT 1
  [1m[36mPhoto Load (0.3ms)[0m  [1mSELECT `photos`.* FROM `photos` WHERE `photos`.`restaurant_id` = 231 AND `photos`.`status` = 1 ORDER BY restaurant_id ASC, created_at DESC LIMIT 1[0m
  [1m[35mPhoto Load (0.3ms)[0m  SELECT `photos`.* FROM `photos` WHERE (restaurant_id = 222 and cover = true and status = 1) LIMIT 1
  [1m[36mPhoto Load (0.3ms)[0m  [1mSELECT `photos`.* FROM `photos` WHERE `photos`.`restaurant_id` = 222 AND `photos`.`status` = 1 ORDER BY restaurant_id ASC, created_at DESC LIMIT 1[0m
  [1m[35m (0.4ms)[0m  SELECT COUNT(*) FROM `restaurants` 
  Rendered restaurants/index.html.erb within layouts/admin (151.8ms)
Completed 200 OK in 163ms (Views: 149.1ms | ActiveRecord: 11.6ms)


Started GET "/admin/collections" for 127.0.0.1 at 2016-01-16 21:08:14 +0100
Processing by CollectionsController#index as HTML
  Rendered shared/_restaurant_manage_tabs.html.erb (0.7ms)
  [1m[36mCollection Load (0.3ms)[0m  [1mSELECT `collections`.* FROM `collections` ORDER BY name ASC, created_at DESC LIMIT 12 OFFSET 0[0m
  [1m[35m (0.2ms)[0m  SELECT COUNT(*) FROM `collections` 
  Rendered collections/index.erb within layouts/admin (9.4ms)
  [1m[36mUser Load (0.4ms)[0m  [1mSELECT `users`.* FROM `users` WHERE `users`.`id` = 1 LIMIT 1[0m
Completed 200 OK in 29ms (Views: 26.9ms | ActiveRecord: 0.9ms)


Started GET "/admin/collections/admin_new_collection" for 127.0.0.1 at 2016-01-16 21:08:15 +0100
Processing by CollectionsController#admin_new_collection as HTML
  [1m[35mUser Load (0.4ms)[0m  SELECT `users`.* FROM `users` WHERE `users`.`id` = 1 LIMIT 1
  Rendered collections/_collection_form.html.erb (8.3ms)
  Rendered collections/admin_new_collection.html.erb within layouts/admin (9.1ms)
Completed 500 Internal Server Error in 14ms

ActionView::Template::Error (undefined method `image_url_uid' for #<Collection:0x007ffc73cf61e8>):
    1: 
    2: <div class="form_add_new_collection">
    3:   <%= simple_form_for(@collection, wrapper: 'collection', :multipart => true, :validate => true) do |f| %>
    4:     <div class="row">
    5:       <div class='col-md-4'>
    6:         <%= hidden_field_tag 'admin', true %>
  app/views/collections/_collection_form.html.erb:3:in `_app_views_collections__collection_form_html_erb___1960648650376828976_70361125752440'
  app/views/collections/admin_new_collection.html.erb:15:in `_app_views_collections_admin_new_collection_html_erb__1406352457603862768_70361090199440'
  app/controllers/collections_controller.rb:55:in `admin_new_collection'


  Rendered /Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_dispatch/middleware/templates/rescues/_trace.erb (1.2ms)
  Rendered /Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_dispatch/middleware/templates/rescues/_request_and_response.erb (0.8ms)
  Rendered /Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_dispatch/middleware/templates/rescues/template_error.erb within rescues/layout (43.1ms)


Started GET "/admin/collections/admin_new_collection" for 127.0.0.1 at 2016-01-16 21:08:28 +0100
Processing by CollectionsController#admin_new_collection as HTML
  [1m[36mUser Load (0.3ms)[0m  [1mSELECT `users`.* FROM `users` WHERE `users`.`id` = 1 LIMIT 1[0m
  Rendered collections/_collection_form.html.erb (5.5ms)
  Rendered collections/_collection_restaurants_form.html.erb (0.2ms)
  Rendered collections/_upload_collection_image.html.erb (15.0ms)
  Rendered collections/admin_new_collection.html.erb within layouts/admin (23.4ms)
Completed 200 OK in 96ms (Views: 30.8ms | ActiveRecord: 3.0ms)


Started GET "/collection_images?r_id=" for 127.0.0.1 at 2016-01-16 21:08:29 +0100
  [1m[35m (0.2ms)[0m  SELECT COUNT(*) FROM `filter_types` WHERE (code = 'features')
  [1m[36m (0.2ms)[0m  [1mSELECT COUNT(*) FROM `filters` WHERE (code = 'offer')[0m
  [1m[35mFilter Load (0.2ms)[0m  SELECT `filters`.* FROM `filters` WHERE (code = 'offer') LIMIT 1
  [1m[36mFilterType Load (0.3ms)[0m  [1mSELECT `filter_types`.* FROM `filter_types` WHERE (code = 'features') LIMIT 1[0m
  [1m[35mCACHE (0.0ms)[0m  SELECT `filters`.* FROM `filters` WHERE (code = 'offer') LIMIT 1
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT `filter_types`.* FROM `filter_types` WHERE (code = 'features') LIMIT 1[0m
Processing by RestaurantsController#show as JSON
  Parameters: {"r_id"=>"", "id"=>"collection_images"}
  [1m[35mRestaurant Load (1.6ms)[0m  SELECT `restaurants`.* FROM `restaurants` WHERE `restaurants`.`slug` = 'collection_images' LIMIT 1
  [1m[36mRestaurant Load (0.2ms)[0m  [1mSELECT `restaurants`.* FROM `restaurants` WHERE `restaurants`.`id` = 0 LIMIT 1[0m
Completed 500 Internal Server Error in 8ms

ActiveRecord::RecordNotFound (Couldn't find Restaurant with id=collection_images):
  app/controllers/restaurants_controller.rb:193:in `show'


  Rendered /Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_dispatch/middleware/templates/rescues/_trace.erb (1.3ms)
  Rendered /Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_dispatch/middleware/templates/rescues/_request_and_response.erb (1.9ms)
  Rendered /Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_dispatch/middleware/templates/rescues/diagnostics.erb within rescues/layout (45.9ms)


Started GET "/admin/collections/admin_new_collection" for 127.0.0.1 at 2016-01-16 21:09:39 +0100
Processing by CollectionsController#admin_new_collection as HTML
  [1m[35mUser Load (0.2ms)[0m  SELECT `users`.* FROM `users` WHERE `users`.`id` = 1 LIMIT 1
  Rendered collections/_collection_form.html.erb (69.3ms)
  Rendered collections/admin_new_collection.html.erb within layouts/admin (70.4ms)
Completed 500 Internal Server Error in 148ms

ActionView::Template::Error (undefined method `input' for #<ActionView::Helpers::FormBuilder:0x007ffc6d1a0268>):
    4:     <div class="row">
    5:       <div class='col-md-4'>
    6:         <%= hidden_field_tag 'admin', true %>
    7:         <%= f.input :name, placeholder: 'Name', input_html: { class: 'form-control' } %>
    8:         <%= f.input :description, placeholder: 'Description', input_html: { class: 'form-control' }%>
    9:         <%= f.label :image_url, 'Choose image', class: 'btn btn-default mg-bt-10 border-radius-5 form-control label_for_choose_menu' %>
    10:         <%= f.file_field :image_url, :multiple => false , class: 'form-control'%>
  app/views/collections/_collection_form.html.erb:7:in `block in _app_views_collections__collection_form_html_erb___1960648650376828976_70361069866060'
  app/views/collections/_collection_form.html.erb:3:in `_app_views_collections__collection_form_html_erb___1960648650376828976_70361069866060'
  app/views/collections/admin_new_collection.html.erb:15:in `_app_views_collections_admin_new_collection_html_erb__1406352457603862768_70361090199440'
  app/controllers/collections_controller.rb:55:in `admin_new_collection'


  Rendered /Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_dispatch/middleware/templates/rescues/_trace.erb (1.0ms)
  Rendered /Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_dispatch/middleware/templates/rescues/_request_and_response.erb (0.7ms)
  Rendered /Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_dispatch/middleware/templates/rescues/template_error.erb within rescues/layout (43.0ms)


Started GET "/admin/collections/admin_new_collection" for 127.0.0.1 at 2016-01-16 21:11:04 +0100
Processing by CollectionsController#admin_new_collection as HTML
  [1m[36mUser Load (0.3ms)[0m  [1mSELECT `users`.* FROM `users` WHERE `users`.`id` = 1 LIMIT 1[0m
  Rendered collections/_collection_form.html.erb (71.5ms)
  Rendered collections/admin_new_collection.html.erb within layouts/admin (72.5ms)
Completed 500 Internal Server Error in 77ms

ActionView::Template::Error (undefined method `textfield' for #<ActionView::Helpers::FormBuilder:0x007ffc74839ac8>):
    4:     <div class="row">
    5:       <div class='col-md-4'>
    6:         <%= hidden_field_tag 'admin', true %>
    7:         <%= f.textfield :name, placeholder: 'Name', input_html: { class: 'form-control' } %>
    8:         <%= f.textfield :description, placeholder: 'Description', input_html: { class: 'form-control' }%>
    9:         <%= f.textfield :image_url, 'Choose image', class: 'btn btn-default mg-bt-10 border-radius-5 form-control label_for_choose_menu' %>
    10:         <%= f.file_field :image_url, :multiple => false , class: 'form-control'%>
  app/views/collections/_collection_form.html.erb:7:in `block in _app_views_collections__collection_form_html_erb___1960648650376828976_70361093571380'
  app/views/collections/_collection_form.html.erb:3:in `_app_views_collections__collection_form_html_erb___1960648650376828976_70361093571380'
  app/views/collections/admin_new_collection.html.erb:15:in `_app_views_collections_admin_new_collection_html_erb__1406352457603862768_70361090199440'
  app/controllers/collections_controller.rb:55:in `admin_new_collection'


  Rendered /Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_dispatch/middleware/templates/rescues/_trace.erb (0.9ms)
  Rendered /Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_dispatch/middleware/templates/rescues/_request_and_response.erb (0.7ms)
  Rendered /Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_dispatch/middleware/templates/rescues/template_error.erb within rescues/layout (40.5ms)


Started GET "/admin/collections/admin_new_collection" for 127.0.0.1 at 2016-01-16 21:11:25 +0100
Processing by CollectionsController#admin_new_collection as HTML
  [1m[35mUser Load (0.7ms)[0m  SELECT `users`.* FROM `users` WHERE `users`.`id` = 1 LIMIT 1
  Rendered collections/_collection_form.html.erb (2.1ms)
  Rendered collections/admin_new_collection.html.erb within layouts/admin (3.0ms)
Completed 500 Internal Server Error in 9ms

ActionView::Template::Error (wrong number of arguments (3 for 1..2)):
    6:         <%= hidden_field_tag 'admin', true %>
    7:         <%= f.text_field :name, placeholder: 'Name', input_html: { class: 'form-control' } %>
    8:         <%= f.text_field :description, placeholder: 'Description', input_html: { class: 'form-control' }%>
    9:         <%= f.text_field :image_url, 'Choose image', class: 'btn btn-default mg-bt-10 border-radius-5 form-control label_for_choose_menu' %>
    10:         <%= f.file_field :image_url, :multiple => false , class: 'form-control'%>
    11:         <label class='hide collection-image-error'> <%= t('collections.please_choose_image') %> </label>
    12:       </div>
  app/views/collections/_collection_form.html.erb:9:in `block in _app_views_collections__collection_form_html_erb___1960648650376828976_70361125480960'
  app/views/collections/_collection_form.html.erb:3:in `_app_views_collections__collection_form_html_erb___1960648650376828976_70361125480960'
  app/views/collections/admin_new_collection.html.erb:15:in `_app_views_collections_admin_new_collection_html_erb__1406352457603862768_70361090199440'
  app/controllers/collections_controller.rb:55:in `admin_new_collection'


  Rendered /Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_dispatch/middleware/templates/rescues/_trace.erb (1.0ms)
  Rendered /Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_dispatch/middleware/templates/rescues/_request_and_response.erb (0.7ms)
  Rendered /Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_dispatch/middleware/templates/rescues/template_error.erb within rescues/layout (42.3ms)


Started GET "/admin/collections/admin_new_collection" for 127.0.0.1 at 2016-01-16 21:11:49 +0100
Processing by CollectionsController#admin_new_collection as HTML
  [1m[36mUser Load (0.4ms)[0m  [1mSELECT `users`.* FROM `users` WHERE `users`.`id` = 1 LIMIT 1[0m
  Rendered collections/_collection_form.html.erb (1.8ms)
  Rendered collections/_collection_restaurants_form.html.erb (0.2ms)
  Rendered collections/_upload_collection_image.html.erb (16.0ms)
  Rendered collections/admin_new_collection.html.erb within layouts/admin (20.8ms)
Completed 200 OK in 30ms (Views: 26.6ms | ActiveRecord: 1.3ms)


Started GET "/collection_images?r_id=" for 127.0.0.1 at 2016-01-16 21:11:49 +0100
  [1m[35m (0.2ms)[0m  SELECT COUNT(*) FROM `filter_types` WHERE (code = 'features')
  [1m[36m (0.2ms)[0m  [1mSELECT COUNT(*) FROM `filters` WHERE (code = 'offer')[0m
  [1m[35mFilter Load (0.2ms)[0m  SELECT `filters`.* FROM `filters` WHERE (code = 'offer') LIMIT 1
  [1m[36mFilterType Load (0.3ms)[0m  [1mSELECT `filter_types`.* FROM `filter_types` WHERE (code = 'features') LIMIT 1[0m
  [1m[35mCACHE (0.0ms)[0m  SELECT `filters`.* FROM `filters` WHERE (code = 'offer') LIMIT 1
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT `filter_types`.* FROM `filter_types` WHERE (code = 'features') LIMIT 1[0m
Processing by RestaurantsController#show as JSON
  Parameters: {"r_id"=>"", "id"=>"collection_images"}
  [1m[35mRestaurant Load (1.4ms)[0m  SELECT `restaurants`.* FROM `restaurants` WHERE `restaurants`.`slug` = 'collection_images' LIMIT 1
  [1m[36mRestaurant Load (0.4ms)[0m  [1mSELECT `restaurants`.* FROM `restaurants` WHERE `restaurants`.`id` = 0 LIMIT 1[0m
Completed 500 Internal Server Error in 8ms

ActiveRecord::RecordNotFound (Couldn't find Restaurant with id=collection_images):
  app/controllers/restaurants_controller.rb:193:in `show'


  Rendered /Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_dispatch/middleware/templates/rescues/_trace.erb (0.9ms)
  Rendered /Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_dispatch/middleware/templates/rescues/_request_and_response.erb (1.1ms)
  Rendered /Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_dispatch/middleware/templates/rescues/diagnostics.erb within rescues/layout (55.8ms)


Started GET "/admin/collections/admin_new_collection" for 127.0.0.1 at 2016-01-16 21:12:02 +0100
Processing by CollectionsController#admin_new_collection as HTML
  [1m[35mUser Load (0.5ms)[0m  SELECT `users`.* FROM `users` WHERE `users`.`id` = 1 LIMIT 1
  Rendered collections/_collection_form.html.erb (35.1ms)
  Rendered collections/_collection_restaurants_form.html.erb (1.3ms)
  Rendered collections/_upload_collection_image.html.erb (1.1ms)
  Rendered collections/admin_new_collection.html.erb within layouts/admin (44.6ms)
Completed 200 OK in 53ms (Views: 50.4ms | ActiveRecord: 0.5ms)


Started GET "/collection_images?r_id=" for 127.0.0.1 at 2016-01-16 21:12:03 +0100
Processing by RestaurantsController#show as JSON
  Parameters: {"r_id"=>"", "id"=>"collection_images"}
  [1m[36mRestaurant Load (1.8ms)[0m  [1mSELECT `restaurants`.* FROM `restaurants` WHERE `restaurants`.`slug` = 'collection_images' LIMIT 1[0m
  [1m[35mRestaurant Load (0.2ms)[0m  SELECT `restaurants`.* FROM `restaurants` WHERE `restaurants`.`id` = 0 LIMIT 1
Completed 500 Internal Server Error in 4ms

ActiveRecord::RecordNotFound (Couldn't find Restaurant with id=collection_images):
  app/controllers/restaurants_controller.rb:193:in `show'


  Rendered /Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_dispatch/middleware/templates/rescues/_trace.erb (1.0ms)
  Rendered /Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_dispatch/middleware/templates/rescues/_request_and_response.erb (0.8ms)
  Rendered /Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_dispatch/middleware/templates/rescues/diagnostics.erb within rescues/layout (44.9ms)


Started GET "/admin/collections/admin_new_collection" for 127.0.0.1 at 2016-01-16 21:13:05 +0100
Processing by CollectionsController#admin_new_collection as HTML
  [1m[36mUser Load (0.3ms)[0m  [1mSELECT `users`.* FROM `users` WHERE `users`.`id` = 1 LIMIT 1[0m
  Rendered collections/_collection_form.html.erb (9.4ms)
  Rendered collections/_collection_restaurants_form.html.erb (0.3ms)
  Rendered collections/_upload_collection_image.html.erb (16.3ms)
  Rendered collections/admin_new_collection.html.erb within layouts/admin (29.1ms)
Completed 200 OK in 124ms (Views: 36.1ms | ActiveRecord: 3.8ms)


Started GET "/collection_images?r_id=" for 127.0.0.1 at 2016-01-16 21:13:05 +0100
  [1m[35m (0.2ms)[0m  SELECT COUNT(*) FROM `filter_types` WHERE (code = 'features')
  [1m[36m (0.2ms)[0m  [1mSELECT COUNT(*) FROM `filters` WHERE (code = 'offer')[0m
  [1m[35mFilter Load (0.1ms)[0m  SELECT `filters`.* FROM `filters` WHERE (code = 'offer') LIMIT 1
  [1m[36mFilterType Load (0.2ms)[0m  [1mSELECT `filter_types`.* FROM `filter_types` WHERE (code = 'features') LIMIT 1[0m
  [1m[35mCACHE (0.0ms)[0m  SELECT `filters`.* FROM `filters` WHERE (code = 'offer') LIMIT 1
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT `filter_types`.* FROM `filter_types` WHERE (code = 'features') LIMIT 1[0m
Processing by RestaurantsController#show as JSON
  Parameters: {"r_id"=>"", "id"=>"collection_images"}
  [1m[35mRestaurant Load (1.4ms)[0m  SELECT `restaurants`.* FROM `restaurants` WHERE `restaurants`.`slug` = 'collection_images' LIMIT 1
  [1m[36mRestaurant Load (0.2ms)[0m  [1mSELECT `restaurants`.* FROM `restaurants` WHERE `restaurants`.`id` = 0 LIMIT 1[0m
Completed 500 Internal Server Error in 7ms

ActiveRecord::RecordNotFound (Couldn't find Restaurant with id=collection_images):
  app/controllers/restaurants_controller.rb:193:in `show'


  Rendered /Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_dispatch/middleware/templates/rescues/_trace.erb (1.6ms)
  Rendered /Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_dispatch/middleware/templates/rescues/_request_and_response.erb (1.1ms)
  Rendered /Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_dispatch/middleware/templates/rescues/diagnostics.erb within rescues/layout (43.5ms)


Started GET "/admin/restaurants" for 127.0.0.1 at 2016-01-16 21:14:27 +0100
Processing by RestaurantsController#index as HTML
  [1m[35mUser Load (0.3ms)[0m  SELECT `users`.* FROM `users` WHERE `users`.`id` = 1 LIMIT 1
  Rendered shared/_restaurant_manage_tabs.html.erb (1.3ms)
  Rendered restaurants/_condition_fields.html.erb (14.0ms)
  [1m[36mRestaurant Load (0.7ms)[0m  [1mSELECT `restaurants`.* FROM `restaurants` ORDER BY disabled ASC,created_at DESC LIMIT 12 OFFSET 0[0m
  [1m[35mPhoto Load (0.4ms)[0m  SELECT `photos`.* FROM `photos` WHERE (restaurant_id = 1057 and cover = true and status = 1) LIMIT 1
  [1m[36mPhoto Load (0.3ms)[0m  [1mSELECT `photos`.* FROM `photos` WHERE `photos`.`restaurant_id` = 1057 AND `photos`.`status` = 1 ORDER BY restaurant_id ASC, created_at DESC LIMIT 1[0m
  [1m[35mPhoto Load (0.5ms)[0m  SELECT `photos`.* FROM `photos` WHERE (restaurant_id = 903 and cover = true and status = 1) LIMIT 1
  [1m[36mPhoto Load (0.3ms)[0m  [1mSELECT `photos`.* FROM `photos` WHERE `photos`.`restaurant_id` = 903 AND `photos`.`status` = 1 ORDER BY restaurant_id ASC, created_at DESC LIMIT 1[0m
  [1m[35mPhoto Load (0.5ms)[0m  SELECT `photos`.* FROM `photos` WHERE (restaurant_id = 876 and cover = true and status = 1) LIMIT 1
  [1m[36mPhoto Load (0.3ms)[0m  [1mSELECT `photos`.* FROM `photos` WHERE `photos`.`restaurant_id` = 876 AND `photos`.`status` = 1 ORDER BY restaurant_id ASC, created_at DESC LIMIT 1[0m
  [1m[35mPhoto Load (0.4ms)[0m  SELECT `photos`.* FROM `photos` WHERE (restaurant_id = 851 and cover = true and status = 1) LIMIT 1
  [1m[36mPhoto Load (0.5ms)[0m  [1mSELECT `photos`.* FROM `photos` WHERE `photos`.`restaurant_id` = 851 AND `photos`.`status` = 1 ORDER BY restaurant_id ASC, created_at DESC LIMIT 1[0m
  [1m[35mPhoto Load (0.4ms)[0m  SELECT `photos`.* FROM `photos` WHERE (restaurant_id = 693 and cover = true and status = 1) LIMIT 1
  [1m[36mPhoto Load (0.3ms)[0m  [1mSELECT `photos`.* FROM `photos` WHERE `photos`.`restaurant_id` = 693 AND `photos`.`status` = 1 ORDER BY restaurant_id ASC, created_at DESC LIMIT 1[0m
  [1m[35mPhoto Load (0.4ms)[0m  SELECT `photos`.* FROM `photos` WHERE (restaurant_id = 686 and cover = true and status = 1) LIMIT 1
  [1m[36mPhoto Load (0.3ms)[0m  [1mSELECT `photos`.* FROM `photos` WHERE `photos`.`restaurant_id` = 686 AND `photos`.`status` = 1 ORDER BY restaurant_id ASC, created_at DESC LIMIT 1[0m
  [1m[35mPhoto Load (0.4ms)[0m  SELECT `photos`.* FROM `photos` WHERE (restaurant_id = 669 and cover = true and status = 1) LIMIT 1
  [1m[36mPhoto Load (0.3ms)[0m  [1mSELECT `photos`.* FROM `photos` WHERE `photos`.`restaurant_id` = 669 AND `photos`.`status` = 1 ORDER BY restaurant_id ASC, created_at DESC LIMIT 1[0m
  [1m[35mPhoto Load (0.4ms)[0m  SELECT `photos`.* FROM `photos` WHERE (restaurant_id = 251 and cover = true and status = 1) LIMIT 1
  [1m[36mPhoto Load (0.3ms)[0m  [1mSELECT `photos`.* FROM `photos` WHERE `photos`.`restaurant_id` = 251 AND `photos`.`status` = 1 ORDER BY restaurant_id ASC, created_at DESC LIMIT 1[0m
  [1m[35mPhoto Load (0.4ms)[0m  SELECT `photos`.* FROM `photos` WHERE (restaurant_id = 250 and cover = true and status = 1) LIMIT 1
  [1m[36mPhoto Load (0.3ms)[0m  [1mSELECT `photos`.* FROM `photos` WHERE `photos`.`restaurant_id` = 250 AND `photos`.`status` = 1 ORDER BY restaurant_id ASC, created_at DESC LIMIT 1[0m
  [1m[35mPhoto Load (0.3ms)[0m  SELECT `photos`.* FROM `photos` WHERE (restaurant_id = 237 and cover = true and status = 1) LIMIT 1
  [1m[36mPhoto Load (0.3ms)[0m  [1mSELECT `photos`.* FROM `photos` WHERE `photos`.`restaurant_id` = 237 AND `photos`.`status` = 1 ORDER BY restaurant_id ASC, created_at DESC LIMIT 1[0m
  [1m[35mPhoto Load (0.3ms)[0m  SELECT `photos`.* FROM `photos` WHERE (restaurant_id = 231 and cover = true and status = 1) LIMIT 1
  [1m[36mPhoto Load (0.3ms)[0m  [1mSELECT `photos`.* FROM `photos` WHERE `photos`.`restaurant_id` = 231 AND `photos`.`status` = 1 ORDER BY restaurant_id ASC, created_at DESC LIMIT 1[0m
  [1m[35mPhoto Load (0.4ms)[0m  SELECT `photos`.* FROM `photos` WHERE (restaurant_id = 222 and cover = true and status = 1) LIMIT 1
  [1m[36mPhoto Load (0.3ms)[0m  [1mSELECT `photos`.* FROM `photos` WHERE `photos`.`restaurant_id` = 222 AND `photos`.`status` = 1 ORDER BY restaurant_id ASC, created_at DESC LIMIT 1[0m
  [1m[35m (0.4ms)[0m  SELECT COUNT(*) FROM `restaurants` 
  Rendered restaurants/index.html.erb within layouts/admin (148.9ms)
Completed 200 OK in 162ms (Views: 147.9ms | ActiveRecord: 10.8ms)


Started GET "/admin/collections/admin_new_collection" for 127.0.0.1 at 2016-01-16 21:14:41 +0100
Processing by CollectionsController#admin_new_collection as HTML
  [1m[36mUser Load (0.2ms)[0m  [1mSELECT `users`.* FROM `users` WHERE `users`.`id` = 1 LIMIT 1[0m
  Rendered collections/_collection_form.html.erb (34.0ms)
  Rendered collections/admin_new_collection.html.erb within layouts/admin (35.4ms)
Completed 500 Internal Server Error in 119ms

ActionView::Template::Error (undefined method `area' for #<#<Class:0x007ffc6a7ce750>:0x007ffc69eefe90>):
    5:       <div class='col-md-4'>
    6:         <%= hidden_field_tag 'admin', true %>
    7:         <%= f.text_field :name, placeholder: 'Name', input_html: { class: 'form-control' } %>
    8:         <%= f.text_ area :description, placeholder: 'Description', input_html: { class: 'form-control' }%>
    9:         <%= f.label :image_url, 'Choose image', class: 'btn btn-default mg-bt-10 border-radius-5 form-control label_for_choose_menu' %>
    10:         <%= f.file_field :image_url, :multiple => false , class: 'form-control'%>
    11:         <label class='hide collection-image-error'> <%= t('collections.please_choose_image') %> </label>
  app/views/collections/_collection_form.html.erb:8:in `block in _app_views_collections__collection_form_html_erb___1960648650376828976_70361064475600'
  app/views/collections/_collection_form.html.erb:3:in `_app_views_collections__collection_form_html_erb___1960648650376828976_70361064475600'
  app/views/collections/admin_new_collection.html.erb:15:in `_app_views_collections_admin_new_collection_html_erb__1406352457603862768_70361090199440'
  app/controllers/collections_controller.rb:55:in `admin_new_collection'


  Rendered /Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_dispatch/middleware/templates/rescues/_trace.erb (1.1ms)
  Rendered /Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_dispatch/middleware/templates/rescues/_request_and_response.erb (0.8ms)
  Rendered /Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_dispatch/middleware/templates/rescues/template_error.erb within rescues/layout (42.2ms)


Started GET "/admin/collections/admin_new_collection" for 127.0.0.1 at 2016-01-16 21:14:52 +0100
Processing by CollectionsController#admin_new_collection as HTML
  [1m[35mUser Load (0.5ms)[0m  SELECT `users`.* FROM `users` WHERE `users`.`id` = 1 LIMIT 1
  Rendered collections/_collection_form.html.erb (1.8ms)
  Rendered collections/_collection_restaurants_form.html.erb (0.2ms)
  Rendered collections/_upload_collection_image.html.erb (20.7ms)
  Rendered collections/admin_new_collection.html.erb within layouts/admin (25.2ms)
Completed 200 OK in 33ms (Views: 29.0ms | ActiveRecord: 2.1ms)


Started GET "/collection_images?r_id=" for 127.0.0.1 at 2016-01-16 21:14:52 +0100
  [1m[36m (0.2ms)[0m  [1mSELECT COUNT(*) FROM `filter_types` WHERE (code = 'features')[0m
  [1m[35m (0.2ms)[0m  SELECT COUNT(*) FROM `filters` WHERE (code = 'offer')
  [1m[36mFilter Load (0.3ms)[0m  [1mSELECT `filters`.* FROM `filters` WHERE (code = 'offer') LIMIT 1[0m
  [1m[35mFilterType Load (0.3ms)[0m  SELECT `filter_types`.* FROM `filter_types` WHERE (code = 'features') LIMIT 1
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT `filters`.* FROM `filters` WHERE (code = 'offer') LIMIT 1[0m
  [1m[35mCACHE (0.0ms)[0m  SELECT `filter_types`.* FROM `filter_types` WHERE (code = 'features') LIMIT 1
Processing by RestaurantsController#show as JSON
  Parameters: {"r_id"=>"", "id"=>"collection_images"}
  [1m[36mRestaurant Load (1.5ms)[0m  [1mSELECT `restaurants`.* FROM `restaurants` WHERE `restaurants`.`slug` = 'collection_images' LIMIT 1[0m
  [1m[35mRestaurant Load (0.2ms)[0m  SELECT `restaurants`.* FROM `restaurants` WHERE `restaurants`.`id` = 0 LIMIT 1
Completed 500 Internal Server Error in 7ms

ActiveRecord::RecordNotFound (Couldn't find Restaurant with id=collection_images):
  app/controllers/restaurants_controller.rb:193:in `show'


  Rendered /Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_dispatch/middleware/templates/rescues/_trace.erb (1.7ms)
  Rendered /Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_dispatch/middleware/templates/rescues/_request_and_response.erb (1.2ms)
  Rendered /Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_dispatch/middleware/templates/rescues/diagnostics.erb within rescues/layout (49.5ms)


Started GET "/admin/collections/admin_new_collection" for 127.0.0.1 at 2016-01-16 21:16:40 +0100
Processing by CollectionsController#admin_new_collection as HTML
  [1m[36mUser Load (0.3ms)[0m  [1mSELECT `users`.* FROM `users` WHERE `users`.`id` = 1 LIMIT 1[0m
  Rendered collections/_collection_form.html.erb (2.8ms)
  Rendered collections/_collection_restaurants_form.html.erb (0.2ms)
  Rendered collections/_upload_collection_image.html.erb (1.3ms)
  Rendered collections/admin_new_collection.html.erb within layouts/admin (7.3ms)
Completed 200 OK in 16ms (Views: 13.8ms | ActiveRecord: 0.3ms)


Started GET "/collection_images?r_id=" for 127.0.0.1 at 2016-01-16 21:16:40 +0100
Processing by RestaurantsController#show as JSON
  Parameters: {"r_id"=>"", "id"=>"collection_images"}
  [1m[35mRestaurant Load (1.8ms)[0m  SELECT `restaurants`.* FROM `restaurants` WHERE `restaurants`.`slug` = 'collection_images' LIMIT 1
  [1m[36mRestaurant Load (1.2ms)[0m  [1mSELECT `restaurants`.* FROM `restaurants` WHERE `restaurants`.`id` = 0 LIMIT 1[0m
Completed 500 Internal Server Error in 6ms

ActiveRecord::RecordNotFound (Couldn't find Restaurant with id=collection_images):
  app/controllers/restaurants_controller.rb:193:in `show'


  Rendered /Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_dispatch/middleware/templates/rescues/_trace.erb (1.1ms)
  Rendered /Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_dispatch/middleware/templates/rescues/_request_and_response.erb (1.0ms)
  Rendered /Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_dispatch/middleware/templates/rescues/diagnostics.erb within rescues/layout (50.1ms)


Started GET "/admin/collections/admin_new_collection" for 127.0.0.1 at 2016-01-16 21:17:56 +0100
Processing by CollectionsController#admin_new_collection as HTML
  [1m[35mUser Load (0.4ms)[0m  SELECT `users`.* FROM `users` WHERE `users`.`id` = 1 LIMIT 1
  Rendered collections/_collection_form.html.erb (4.4ms)
  Rendered collections/_collection_restaurants_form.html.erb (0.4ms)
  Rendered collections/_upload_collection_image.html.erb (1.2ms)
  Rendered collections/admin_new_collection.html.erb within layouts/admin (10.0ms)
Completed 200 OK in 24ms (Views: 20.8ms | ActiveRecord: 0.4ms)


Started GET "/collection_images?r_id=" for 127.0.0.1 at 2016-01-16 21:17:56 +0100
Processing by RestaurantsController#show as JSON
  Parameters: {"r_id"=>"", "id"=>"collection_images"}
  [1m[36mRestaurant Load (1.7ms)[0m  [1mSELECT `restaurants`.* FROM `restaurants` WHERE `restaurants`.`slug` = 'collection_images' LIMIT 1[0m
  [1m[35mRestaurant Load (0.3ms)[0m  SELECT `restaurants`.* FROM `restaurants` WHERE `restaurants`.`id` = 0 LIMIT 1
Completed 500 Internal Server Error in 5ms

ActiveRecord::RecordNotFound (Couldn't find Restaurant with id=collection_images):
  app/controllers/restaurants_controller.rb:193:in `show'


  Rendered /Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_dispatch/middleware/templates/rescues/_trace.erb (1.5ms)
  Rendered /Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_dispatch/middleware/templates/rescues/_request_and_response.erb (1.4ms)
  Rendered /Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_dispatch/middleware/templates/rescues/diagnostics.erb within rescues/layout (47.9ms)


Started POST "/admin/collections" for 127.0.0.1 at 2016-01-16 21:18:12 +0100
Processing by CollectionsController#create as JS
  Parameters: {"utf8"=>"âœ“", "authenticity_token"=>"ZhR8a2fYr/EQcBrBVm2c17tt7AHk64f/gvsZ5fOllxc=", "admin"=>"true", "collection"=>{"name"=>"Test", "description"=>"test desc", "image_url"=>#<ActionDispatch::Http::UploadedFile:0x007ffc73892200 @original_filename="sunday_roast.png", @content_type="image/png", @headers="Content-Disposition: form-data; name=\"collection[image_url]\"; filename=\"sunday_roast.png\"\r\nContent-Type: image/png\r\n", @tempfile=#<Tempfile:/var/folders/rf/q4l8n5k56pnbjgkdtzrhq_w00000gn/T/RackMultipart20160116-27879-zoz13m>>}, "remotipart_submitted"=>"true", "X-Requested-With"=>"IFrame", "X-Http-Accept"=>"text/javascript, application/javascript, application/ecmascript, application/x-ecmascript, */*; q=0.01"}
  [1m[36mCollection Load (0.2ms)[0m  [1mSELECT `collections`.* FROM `collections` WHERE `collections`.`name` = 'Test' LIMIT 1[0m
Completed 500 Internal Server Error in 3ms

NoMethodError (undefined method `image_url_uid' for #<Collection:0x007ffc73bbd290>):
  app/controllers/collections_controller.rb:79:in `new'
  app/controllers/collections_controller.rb:79:in `block in create'
  app/controllers/collections_controller.rb:77:in `create'


  Rendered /Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_dispatch/middleware/templates/rescues/_trace.erb (1.3ms)
  Rendered /Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_dispatch/middleware/templates/rescues/_request_and_response.erb (1.1ms)
  Rendered /Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_dispatch/middleware/templates/rescues/diagnostics.erb within rescues/layout (45.2ms)


Started POST "/admin/collections" for 127.0.0.1 at 2016-01-16 21:18:32 +0100
Processing by CollectionsController#create as JS
  Parameters: {"utf8"=>"âœ“", "authenticity_token"=>"ZhR8a2fYr/EQcBrBVm2c17tt7AHk64f/gvsZ5fOllxc=", "admin"=>"true", "collection"=>{"name"=>"Test", "description"=>"test desc", "image_url"=>#<ActionDispatch::Http::UploadedFile:0x007ffc72853998 @original_filename="sunday_roast.png", @content_type="image/png", @headers="Content-Disposition: form-data; name=\"collection[image_url]\"; filename=\"sunday_roast.png\"\r\nContent-Type: image/png\r\n", @tempfile=#<Tempfile:/var/folders/rf/q4l8n5k56pnbjgkdtzrhq_w00000gn/T/RackMultipart20160116-27879-7cxjjn>>}, "remotipart_submitted"=>"true", "X-Requested-With"=>"IFrame", "X-Http-Accept"=>"text/javascript, application/javascript, application/ecmascript, application/x-ecmascript, */*; q=0.01"}
  [1m[35mCollection Load (0.3ms)[0m  SELECT `collections`.* FROM `collections` WHERE `collections`.`name` = 'Test' LIMIT 1
Completed 500 Internal Server Error in 2ms

NoMethodError (undefined method `image_url_uid' for #<Collection:0x007ffc749b8ef8>):
  app/controllers/collections_controller.rb:79:in `new'
  app/controllers/collections_controller.rb:79:in `block in create'
  app/controllers/collections_controller.rb:77:in `create'


  Rendered /Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_dispatch/middleware/templates/rescues/_trace.erb (1.6ms)
  Rendered /Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_dispatch/middleware/templates/rescues/_request_and_response.erb (1.1ms)
  Rendered /Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_dispatch/middleware/templates/rescues/diagnostics.erb within rescues/layout (43.2ms)


Started POST "/admin/collections" for 127.0.0.1 at 2016-01-16 21:18:53 +0100
Processing by CollectionsController#create as JS
  Parameters: {"utf8"=>"âœ“", "authenticity_token"=>"ZhR8a2fYr/EQcBrBVm2c17tt7AHk64f/gvsZ5fOllxc=", "admin"=>"true", "collection"=>{"name"=>"Test", "description"=>"test desc", "image_url"=>#<ActionDispatch::Http::UploadedFile:0x007ffc72878b08 @original_filename="sunday_roast.png", @content_type="image/png", @headers="Content-Disposition: form-data; name=\"collection[image_url]\"; filename=\"sunday_roast.png\"\r\nContent-Type: image/png\r\n", @tempfile=#<Tempfile:/var/folders/rf/q4l8n5k56pnbjgkdtzrhq_w00000gn/T/RackMultipart20160116-27879-1n8ne1k>>}, "remotipart_submitted"=>"true", "X-Requested-With"=>"IFrame", "X-Http-Accept"=>"text/javascript, application/javascript, application/ecmascript, application/x-ecmascript, */*; q=0.01"}
  [1m[36mCollection Load (0.3ms)[0m  [1mSELECT `collections`.* FROM `collections` WHERE `collections`.`name` = 'Test' LIMIT 1[0m
Completed 500 Internal Server Error in 3ms

NoMethodError (undefined method `image_url_uid' for #<Collection:0x007ffc73061fe0>):
  app/controllers/collections_controller.rb:79:in `new'
  app/controllers/collections_controller.rb:79:in `block in create'
  app/controllers/collections_controller.rb:77:in `create'


  Rendered /Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_dispatch/middleware/templates/rescues/_trace.erb (2.9ms)
  Rendered /Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_dispatch/middleware/templates/rescues/_request_and_response.erb (1.1ms)
  Rendered /Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_dispatch/middleware/templates/rescues/diagnostics.erb within rescues/layout (48.0ms)


Started GET "/admin/collections/admin_new_collection" for 127.0.0.1 at 2016-01-16 21:21:44 +0100
Processing by CollectionsController#admin_new_collection as HTML
  [1m[35mUser Load (0.3ms)[0m  SELECT `users`.* FROM `users` WHERE `users`.`id` = 1 LIMIT 1
  Rendered collections/_collection_form.html.erb (8.4ms)
  Rendered collections/admin_new_collection.html.erb within layouts/admin (9.3ms)
Completed 500 Internal Server Error in 90ms

ActionView::Template::Error (undefined method `image_url_uid' for #<Collection:0x007ffc73b8dfb8>):
    1: 
    2: <div class="form_add_new_collection">
    3:   <%= simple_form_for(@collection, wrapper: 'collection', :multipart => true, :validate => true) do |f| %>
    4:     <div class="row">
    5:       <div class='col-md-4'>
    6:         <%= hidden_field_tag 'admin', true %>
  app/views/collections/_collection_form.html.erb:3:in `_app_views_collections__collection_form_html_erb___1960648650376828976_70361123395840'
  app/views/collections/admin_new_collection.html.erb:15:in `_app_views_collections_admin_new_collection_html_erb__1406352457603862768_70361090199440'
  app/controllers/collections_controller.rb:55:in `admin_new_collection'


  Rendered /Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_dispatch/middleware/templates/rescues/_trace.erb (1.4ms)
  Rendered /Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_dispatch/middleware/templates/rescues/_request_and_response.erb (1.1ms)
  Rendered /Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_dispatch/middleware/templates/rescues/template_error.erb within rescues/layout (44.9ms)


Started GET "/admin/collections/admin_new_collection" for 127.0.0.1 at 2016-01-16 21:22:13 +0100
Processing by CollectionsController#admin_new_collection as HTML
  [1m[36mUser Load (0.5ms)[0m  [1mSELECT `users`.* FROM `users` WHERE `users`.`id` = 1 LIMIT 1[0m
  Rendered collections/_collection_form.html.erb (2.0ms)
  Rendered collections/_collection_restaurants_form.html.erb (0.4ms)
  Rendered collections/_upload_collection_image.html.erb (21.3ms)
  Rendered collections/admin_new_collection.html.erb within layouts/admin (27.4ms)
Completed 200 OK in 36ms (Views: 33.4ms | ActiveRecord: 1.1ms)


Started GET "/collection_images?r_id=" for 127.0.0.1 at 2016-01-16 21:22:14 +0100
  [1m[35m (0.1ms)[0m  SELECT COUNT(*) FROM `filter_types` WHERE (code = 'features')
  [1m[36m (0.2ms)[0m  [1mSELECT COUNT(*) FROM `filters` WHERE (code = 'offer')[0m
  [1m[35mFilter Load (0.2ms)[0m  SELECT `filters`.* FROM `filters` WHERE (code = 'offer') LIMIT 1
  [1m[36mFilterType Load (0.3ms)[0m  [1mSELECT `filter_types`.* FROM `filter_types` WHERE (code = 'features') LIMIT 1[0m
  [1m[35mCACHE (0.0ms)[0m  SELECT `filters`.* FROM `filters` WHERE (code = 'offer') LIMIT 1
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT `filter_types`.* FROM `filter_types` WHERE (code = 'features') LIMIT 1[0m
Processing by RestaurantsController#show as JSON
  Parameters: {"r_id"=>"", "id"=>"collection_images"}
  [1m[35mRestaurant Load (2.0ms)[0m  SELECT `restaurants`.* FROM `restaurants` WHERE `restaurants`.`slug` = 'collection_images' LIMIT 1
  [1m[36mRestaurant Load (0.3ms)[0m  [1mSELECT `restaurants`.* FROM `restaurants` WHERE `restaurants`.`id` = 0 LIMIT 1[0m
Completed 500 Internal Server Error in 11ms

ActiveRecord::RecordNotFound (Couldn't find Restaurant with id=collection_images):
  app/controllers/restaurants_controller.rb:193:in `show'


  Rendered /Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_dispatch/middleware/templates/rescues/_trace.erb (1.3ms)
  Rendered /Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_dispatch/middleware/templates/rescues/_request_and_response.erb (1.1ms)
  Rendered /Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_dispatch/middleware/templates/rescues/diagnostics.erb within rescues/layout (53.0ms)


Started POST "/admin/collections" for 127.0.0.1 at 2016-01-16 21:22:19 +0100
Processing by CollectionsController#create as JS
  Parameters: {"utf8"=>"âœ“", "authenticity_token"=>"ZhR8a2fYr/EQcBrBVm2c17tt7AHk64f/gvsZ5fOllxc=", "admin"=>"true", "collection"=>{"name"=>"Test", "description"=>"test desc", "image_url"=>#<ActionDispatch::Http::UploadedFile:0x007ffc739de8e8 @original_filename="steak.png", @content_type="image/png", @headers="Content-Disposition: form-data; name=\"collection[image_url]\"; filename=\"steak.png\"\r\nContent-Type: image/png\r\n", @tempfile=#<Tempfile:/var/folders/rf/q4l8n5k56pnbjgkdtzrhq_w00000gn/T/RackMultipart20160116-27879-1c0gf07>>}, "remotipart_submitted"=>"true", "X-Requested-With"=>"IFrame", "X-Http-Accept"=>"text/javascript, application/javascript, application/ecmascript, application/x-ecmascript, */*; q=0.01"}
  [1m[35mCollection Load (0.2ms)[0m  SELECT `collections`.* FROM `collections` WHERE `collections`.`name` = 'Test' LIMIT 1
Completed 500 Internal Server Error in 2ms

NoMethodError (undefined method `image_url_uid' for #<Collection:0x007ffc739c5258>):
  app/controllers/collections_controller.rb:79:in `new'
  app/controllers/collections_controller.rb:79:in `block in create'
  app/controllers/collections_controller.rb:77:in `create'


  Rendered /Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_dispatch/middleware/templates/rescues/_trace.erb (1.1ms)
  Rendered /Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_dispatch/middleware/templates/rescues/_request_and_response.erb (1.0ms)
  Rendered /Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_dispatch/middleware/templates/rescues/diagnostics.erb within rescues/layout (43.7ms)
Connecting to database specified by database.yml
DEPRECATION WARNING: Passing :tag, :class and others to use is deprecated. Please invoke b.use :label, :wrap_with => {:class=>"simple_label"} instead. (called from block (2 levels) in <top (required)> at /Users/kevinmuller/halalgems_backend/config/initializers/simple_form.rb:67)


Started POST "/admin/collections" for 127.0.0.1 at 2016-01-16 21:23:15 +0100
Processing by CollectionsController#create as JS
  Parameters: {"utf8"=>"âœ“", "authenticity_token"=>"ZhR8a2fYr/EQcBrBVm2c17tt7AHk64f/gvsZ5fOllxc=", "admin"=>"true", "collection"=>{"name"=>"Test", "description"=>"test desc", "image_url"=>#<ActionDispatch::Http::UploadedFile:0x007feb0982b058 @original_filename="steak.png", @content_type="image/png", @headers="Content-Disposition: form-data; name=\"collection[image_url]\"; filename=\"steak.png\"\r\nContent-Type: image/png\r\n", @tempfile=#<Tempfile:/var/folders/rf/q4l8n5k56pnbjgkdtzrhq_w00000gn/T/RackMultipart20160116-28026-1gb1r4o>>}, "remotipart_submitted"=>"true", "X-Requested-With"=>"IFrame", "X-Http-Accept"=>"text/javascript, application/javascript, application/ecmascript, application/x-ecmascript, */*; q=0.01"}
  [1m[36mCollection Load (0.2ms)[0m  [1mSELECT `collections`.* FROM `collections` WHERE `collections`.`name` = 'Test' LIMIT 1[0m
Completed 500 Internal Server Error in 7ms

NoMethodError (undefined method `image_url_uid' for #<Collection:0x007feb08fe9e30>):
  app/controllers/collections_controller.rb:79:in `new'
  app/controllers/collections_controller.rb:79:in `block in create'
  app/controllers/collections_controller.rb:77:in `create'


  Rendered /Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_dispatch/middleware/templates/rescues/_trace.erb (0.9ms)
  Rendered /Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_dispatch/middleware/templates/rescues/_request_and_response.erb (0.7ms)
  Rendered /Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_dispatch/middleware/templates/rescues/diagnostics.erb within rescues/layout (41.1ms)


Started GET "/admin/collections/admin_new_collection" for 127.0.0.1 at 2016-01-16 21:24:27 +0100
Processing by CollectionsController#admin_new_collection as HTML
  [1m[35mUser Load (0.3ms)[0m  SELECT `users`.* FROM `users` WHERE `users`.`id` = 1 LIMIT 1
  Rendered collections/_collection_form.html.erb (2.3ms)
  Rendered collections/_collection_restaurants_form.html.erb (0.4ms)
  Rendered collections/_upload_collection_image.html.erb (16.9ms)
  Rendered collections/admin_new_collection.html.erb within layouts/admin (22.4ms)
Completed 200 OK in 146ms (Views: 54.2ms | ActiveRecord: 3.6ms)


Started GET "/collection_images?r_id=" for 127.0.0.1 at 2016-01-16 21:24:27 +0100
  [1m[36m (0.3ms)[0m  [1mSELECT COUNT(*) FROM `filter_types` WHERE (code = 'features')[0m
  [1m[35m (0.2ms)[0m  SELECT COUNT(*) FROM `filters` WHERE (code = 'offer')
  [1m[36mFilter Load (0.2ms)[0m  [1mSELECT `filters`.* FROM `filters` WHERE (code = 'offer') LIMIT 1[0m
  [1m[35mFilterType Load (0.2ms)[0m  SELECT `filter_types`.* FROM `filter_types` WHERE (code = 'features') LIMIT 1
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT `filters`.* FROM `filters` WHERE (code = 'offer') LIMIT 1[0m
  [1m[35mCACHE (0.0ms)[0m  SELECT `filter_types`.* FROM `filter_types` WHERE (code = 'features') LIMIT 1
Processing by RestaurantsController#show as JSON
  Parameters: {"r_id"=>"", "id"=>"collection_images"}
  [1m[36mRestaurant Load (1.5ms)[0m  [1mSELECT `restaurants`.* FROM `restaurants` WHERE `restaurants`.`slug` = 'collection_images' LIMIT 1[0m
  [1m[35mRestaurant Load (0.2ms)[0m  SELECT `restaurants`.* FROM `restaurants` WHERE `restaurants`.`id` = 0 LIMIT 1
Completed 500 Internal Server Error in 6ms

ActiveRecord::RecordNotFound (Couldn't find Restaurant with id=collection_images):
  app/controllers/restaurants_controller.rb:193:in `show'


  Rendered /Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_dispatch/middleware/templates/rescues/_trace.erb (0.9ms)
  Rendered /Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_dispatch/middleware/templates/rescues/_request_and_response.erb (0.9ms)
  Rendered /Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_dispatch/middleware/templates/rescues/diagnostics.erb within rescues/layout (42.5ms)


Started GET "/admin/collections/admin_new_collection" for 127.0.0.1 at 2016-01-16 21:24:30 +0100
Processing by CollectionsController#admin_new_collection as HTML
  [1m[36mUser Load (0.6ms)[0m  [1mSELECT `users`.* FROM `users` WHERE `users`.`id` = 1 LIMIT 1[0m
  Rendered collections/_collection_form.html.erb (1.3ms)
  Rendered collections/_collection_restaurants_form.html.erb (9.9ms)
  Rendered collections/_upload_collection_image.html.erb (1.1ms)
  Rendered collections/admin_new_collection.html.erb within layouts/admin (15.5ms)
Completed 200 OK in 24ms (Views: 21.4ms | ActiveRecord: 0.6ms)


Started GET "/collection_images?r_id=" for 127.0.0.1 at 2016-01-16 21:24:30 +0100
Processing by RestaurantsController#show as JSON
  Parameters: {"r_id"=>"", "id"=>"collection_images"}
  [1m[35mRestaurant Load (2.1ms)[0m  SELECT `restaurants`.* FROM `restaurants` WHERE `restaurants`.`slug` = 'collection_images' LIMIT 1
  [1m[36mRestaurant Load (0.2ms)[0m  [1mSELECT `restaurants`.* FROM `restaurants` WHERE `restaurants`.`id` = 0 LIMIT 1[0m
Completed 500 Internal Server Error in 4ms

ActiveRecord::RecordNotFound (Couldn't find Restaurant with id=collection_images):
  app/controllers/restaurants_controller.rb:193:in `show'


  Rendered /Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_dispatch/middleware/templates/rescues/_trace.erb (0.9ms)
  Rendered /Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_dispatch/middleware/templates/rescues/_request_and_response.erb (0.8ms)
  Rendered /Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_dispatch/middleware/templates/rescues/diagnostics.erb within rescues/layout (41.1ms)


Started POST "/admin/collections" for 127.0.0.1 at 2016-01-16 21:24:49 +0100
Processing by CollectionsController#create as JS
  Parameters: {"utf8"=>"âœ“", "authenticity_token"=>"ZhR8a2fYr/EQcBrBVm2c17tt7AHk64f/gvsZ5fOllxc=", "admin"=>"true", "collection"=>{"name"=>"Test", "description"=>"test desc", "image_url"=>#<ActionDispatch::Http::UploadedFile:0x007feb0a051bd8 @original_filename="steak.png", @content_type="image/png", @headers="Content-Disposition: form-data; name=\"collection[image_url]\"; filename=\"steak.png\"\r\nContent-Type: image/png\r\n", @tempfile=#<Tempfile:/var/folders/rf/q4l8n5k56pnbjgkdtzrhq_w00000gn/T/RackMultipart20160116-28026-1fwe6cg>>}, "remotipart_submitted"=>"true", "X-Requested-With"=>"IFrame", "X-Http-Accept"=>"text/javascript, application/javascript, application/ecmascript, application/x-ecmascript, */*; q=0.01"}
  [1m[35mCollection Load (0.3ms)[0m  SELECT `collections`.* FROM `collections` WHERE `collections`.`name` = 'Test' LIMIT 1
Completed 500 Internal Server Error in 2ms

NoMethodError (undefined method `image_url_uid' for #<Collection:0x007feb0a031720>):
  app/controllers/collections_controller.rb:79:in `new'
  app/controllers/collections_controller.rb:79:in `block in create'
  app/controllers/collections_controller.rb:77:in `create'


  Rendered /Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_dispatch/middleware/templates/rescues/_trace.erb (1.0ms)
  Rendered /Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_dispatch/middleware/templates/rescues/_request_and_response.erb (0.9ms)
  Rendered /Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_dispatch/middleware/templates/rescues/diagnostics.erb within rescues/layout (40.6ms)


Started POST "/admin/collections" for 127.0.0.1 at 2016-01-16 21:26:26 +0100
Processing by CollectionsController#create as JS
  Parameters: {"utf8"=>"âœ“", "authenticity_token"=>"ZhR8a2fYr/EQcBrBVm2c17tt7AHk64f/gvsZ5fOllxc=", "admin"=>"true", "collection"=>{"name"=>"Test", "description"=>"test desc", "image_url"=>#<ActionDispatch::Http::UploadedFile:0x007feb08b8b410 @original_filename="steak.png", @content_type="image/png", @headers="Content-Disposition: form-data; name=\"collection[image_url]\"; filename=\"steak.png\"\r\nContent-Type: image/png\r\n", @tempfile=#<Tempfile:/var/folders/rf/q4l8n5k56pnbjgkdtzrhq_w00000gn/T/RackMultipart20160116-28026-1ourpu1>>}, "remotipart_submitted"=>"true", "X-Requested-With"=>"IFrame", "X-Http-Accept"=>"text/javascript, application/javascript, application/ecmascript, application/x-ecmascript, */*; q=0.01"}
  [1m[36mCollection Load (0.2ms)[0m  [1mSELECT `collections`.* FROM `collections` WHERE `collections`.`name` = 'Test' LIMIT 1[0m
Completed 500 Internal Server Error in 7ms

NoMethodError (undefined method `image_url_uid' for #<Collection:0x007feb08b536c8>):
  app/controllers/collections_controller.rb:79:in `new'
  app/controllers/collections_controller.rb:79:in `block in create'
  app/controllers/collections_controller.rb:77:in `create'


  Rendered /Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_dispatch/middleware/templates/rescues/_trace.erb (1.0ms)
  Rendered /Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_dispatch/middleware/templates/rescues/_request_and_response.erb (0.9ms)
  Rendered /Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_dispatch/middleware/templates/rescues/diagnostics.erb within rescues/layout (42.1ms)


Started POST "/collection_images" for 127.0.0.1 at 2016-01-16 21:36:12 +0100
Processing by CollectionImagesController#create as JSON
  Parameters: {"utf8"=>"âœ“", "authenticity_token"=>"ZhR8a2fYr/EQcBrBVm2c17tt7AHk64f/gvsZ5fOllxc=", "collection_image"=>{"collection_id"=>"", "user_id"=>"1", "image"=>[#<ActionDispatch::Http::UploadedFile:0x007feb06f2ade8 @original_filename="steak.png", @content_type="image/png", @headers="Content-Disposition: form-data; name=\"collection_image[image][]\"; filename=\"steak.png\"\r\nContent-Type: image/png\r\n", @tempfile=#<Tempfile:/var/folders/rf/q4l8n5k56pnbjgkdtzrhq_w00000gn/T/RackMultipart20160116-28026-qdu5o6>>]}}
  [1m[35mCollection Load (0.2ms)[0m  SELECT `collections`.* FROM `collections` WHERE `collections`.`id` = 0 LIMIT 1
Completed 500 Internal Server Error in 23ms

ActiveRecord::RecordNotFound (Couldn't find Collection with id=):
  app/controllers/collection_images_controller.rb:26:in `create'


  Rendered /Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_dispatch/middleware/templates/rescues/_trace.erb (1.1ms)
  Rendered /Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_dispatch/middleware/templates/rescues/_request_and_response.erb (1.1ms)
  Rendered /Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_dispatch/middleware/templates/rescues/diagnostics.erb within rescues/layout (45.1ms)


Started POST "/collection_images" for 127.0.0.1 at 2016-01-16 21:37:08 +0100
Processing by CollectionImagesController#create as JSON
  Parameters: {"utf8"=>"âœ“", "authenticity_token"=>"ZhR8a2fYr/EQcBrBVm2c17tt7AHk64f/gvsZ5fOllxc=", "collection_image"=>{"collection_id"=>"", "user_id"=>"1", "image"=>[#<ActionDispatch::Http::UploadedFile:0x007feb05177238 @original_filename="persian.png", @content_type="image/png", @headers="Content-Disposition: form-data; name=\"collection_image[image][]\"; filename=\"persian.png\"\r\nContent-Type: image/png\r\n", @tempfile=#<Tempfile:/var/folders/rf/q4l8n5k56pnbjgkdtzrhq_w00000gn/T/RackMultipart20160116-28026-185oko6>>]}}
  [1m[36mCollection Load (0.4ms)[0m  [1mSELECT `collections`.* FROM `collections` WHERE `collections`.`id` = 0 LIMIT 1[0m
Completed 500 Internal Server Error in 2ms

ActiveRecord::RecordNotFound (Couldn't find Collection with id=):
  app/controllers/collection_images_controller.rb:26:in `create'


  Rendered /Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_dispatch/middleware/templates/rescues/_trace.erb (1.9ms)
  Rendered /Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_dispatch/middleware/templates/rescues/_request_and_response.erb (1.6ms)
  Rendered /Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_dispatch/middleware/templates/rescues/diagnostics.erb within rescues/layout (50.6ms)


Started GET "/admin/collections/admin_new_collection" for 127.0.0.1 at 2016-01-16 21:38:52 +0100
Processing by CollectionsController#admin_new_collection as HTML
  [1m[35mUser Load (0.3ms)[0m  SELECT `users`.* FROM `users` WHERE `users`.`id` = 1 LIMIT 1
  Rendered collections/_collection_form.html.erb (5.9ms)
  Rendered collections/_collection_restaurants_form.html.erb (0.2ms)
  Rendered collections/_upload_collection_image.html.erb (8.1ms)
  Rendered collections/admin_new_collection.html.erb within layouts/admin (16.9ms)
Completed 200 OK in 96ms (Views: 23.4ms | ActiveRecord: 2.1ms)


Started GET "/collection_images?r_id=" for 127.0.0.1 at 2016-01-16 21:38:52 +0100
  [1m[36m (0.2ms)[0m  [1mSELECT COUNT(*) FROM `filter_types` WHERE (code = 'features')[0m
  [1m[35m (0.2ms)[0m  SELECT COUNT(*) FROM `filters` WHERE (code = 'offer')
  [1m[36mFilter Load (0.2ms)[0m  [1mSELECT `filters`.* FROM `filters` WHERE (code = 'offer') LIMIT 1[0m
  [1m[35mFilterType Load (0.3ms)[0m  SELECT `filter_types`.* FROM `filter_types` WHERE (code = 'features') LIMIT 1
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT `filters`.* FROM `filters` WHERE (code = 'offer') LIMIT 1[0m
  [1m[35mCACHE (0.0ms)[0m  SELECT `filter_types`.* FROM `filter_types` WHERE (code = 'features') LIMIT 1
Processing by RestaurantsController#show as JSON
  Parameters: {"r_id"=>"", "id"=>"collection_images"}
  [1m[36mRestaurant Load (1.5ms)[0m  [1mSELECT `restaurants`.* FROM `restaurants` WHERE `restaurants`.`slug` = 'collection_images' LIMIT 1[0m
  [1m[35mRestaurant Load (0.2ms)[0m  SELECT `restaurants`.* FROM `restaurants` WHERE `restaurants`.`id` = 0 LIMIT 1
Completed 500 Internal Server Error in 7ms

ActiveRecord::RecordNotFound (Couldn't find Restaurant with id=collection_images):
  app/controllers/restaurants_controller.rb:193:in `show'


  Rendered /Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_dispatch/middleware/templates/rescues/_trace.erb (1.1ms)
  Rendered /Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_dispatch/middleware/templates/rescues/_request_and_response.erb (1.0ms)
  Rendered /Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_dispatch/middleware/templates/rescues/diagnostics.erb within rescues/layout (51.9ms)


Started POST "/admin/collections" for 127.0.0.1 at 2016-01-16 21:38:56 +0100
Processing by CollectionsController#create as HTML
  Parameters: {"utf8"=>"âœ“", "authenticity_token"=>"ZhR8a2fYr/EQcBrBVm2c17tt7AHk64f/gvsZ5fOllxc=", "admin"=>"true", "collection"=>{"name"=>"Test", "description"=>"test desc"}}
  [1m[36mCollection Load (0.3ms)[0m  [1mSELECT `collections`.* FROM `collections` WHERE `collections`.`name` = 'Test' LIMIT 1[0m
  [1m[35m (0.1ms)[0m  BEGIN
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO `collections` (`created_at`, `description`, `image_url`, `name`, `updated_at`) VALUES ('2016-01-16 20:38:56', 'test desc', NULL, 'Test', '2016-01-16 20:38:56')[0m
  [1m[35m (0.5ms)[0m  COMMIT
Redirected to http://0.0.0.0:3000/
Completed 302 Found in 6ms (ActiveRecord: 1.1ms)


Started GET "/" for 127.0.0.1 at 2016-01-16 21:38:56 +0100
Processing by PagesController#home as HTML
  [1m[36mAdminPhoto Load (0.6ms)[0m  [1mSELECT `admin_photos`.* FROM `admin_photos` WHERE `admin_photos`.`image_type` = 1 ORDER BY RAND() LIMIT 1[0m
  [1m[35mFilter Load (0.6ms)[0m  SELECT `filters`.* FROM `filters` WHERE (code = 'cuisine') ORDER BY name ASC
  [1m[36mUser Load (0.3ms)[0m  [1mSELECT `users`.* FROM `users` WHERE `users`.`gem_hunter` = 1 LIMIT 3[0m
  [1m[35mAdminPhoto Load (0.4ms)[0m  SELECT `admin_photos`.* FROM `admin_photos` WHERE `admin_photos`.`image_type` = 1 ORDER BY `admin_photos`.`id` DESC LIMIT 1
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT `admin_photos`.* FROM `admin_photos` WHERE `admin_photos`.`image_type` = 1 ORDER BY `admin_photos`.`id` DESC LIMIT 1[0m
  [1m[35mCACHE (0.0ms)[0m  SELECT `admin_photos`.* FROM `admin_photos` WHERE `admin_photos`.`image_type` = 1 ORDER BY `admin_photos`.`id` DESC LIMIT 1
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT `admin_photos`.* FROM `admin_photos` WHERE `admin_photos`.`image_type` = 1 ORDER BY `admin_photos`.`id` DESC LIMIT 1[0m
  [1m[35mCACHE (0.0ms)[0m  SELECT `admin_photos`.* FROM `admin_photos` WHERE `admin_photos`.`image_type` = 1 ORDER BY `admin_photos`.`id` DESC LIMIT 1
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT `admin_photos`.* FROM `admin_photos` WHERE `admin_photos`.`image_type` = 1 ORDER BY `admin_photos`.`id` DESC LIMIT 1[0m
  Rendered pages/home.html.slim within layouts/application_home (75.7ms)
  [1m[35mUser Load (0.3ms)[0m  SELECT `users`.* FROM `users` WHERE `users`.`id` = 1 LIMIT 1
  [1m[36mSubscription Load (0.2ms)[0m  [1mSELECT `subscriptions`.* FROM `subscriptions` WHERE `subscriptions`.`user_id` = 1 AND `subscriptions`.`success` = 1[0m
  [1m[35mCACHE (0.0ms)[0m  SELECT `subscriptions`.* FROM `subscriptions` WHERE `subscriptions`.`user_id` = 1 AND `subscriptions`.`success` = 1
  Rendered layouts/_user_pnl.html.erb (95.0ms)
  Rendered layouts/_header.html.erb (99.8ms)
  Rendered layouts/_main_menu.html.slim (8.9ms)
  Rendered layouts/_sub_main_menu.html.slim (4.3ms)
  Rendered layouts/_flash_messages.html.erb (0.6ms)
  [1m[36mBasicsPage Load (0.3ms)[0m  [1mSELECT `basics_pages`.* FROM `basics_pages` WHERE `basics_pages`.`page_name` = 'Footer' LIMIT 1[0m
  Rendered layouts/_footer.html.slim (36.5ms)
Completed 200 OK in 345ms (Views: 299.0ms | ActiveRecord: 6.8ms)
couldn't find file /Users/kevinmuller/halalgems_backend/public/system/dragonfly/development/2014/05/19/10_41_19_654_photo_1_2.JPG
couldn't find file /Users/kevinmuller/halalgems_backend/public/system/dragonfly/development/2014/05/19/10_41_19_654_photo_1_2.JPG


Started GET "/" for 127.0.0.1 at 2016-01-16 21:40:38 +0100
Processing by PagesController#home as HTML
  [1m[35mAdminPhoto Load (0.5ms)[0m  SELECT `admin_photos`.* FROM `admin_photos` WHERE `admin_photos`.`image_type` = 1 ORDER BY RAND() LIMIT 1
  [1m[36mFilter Load (0.3ms)[0m  [1mSELECT `filters`.* FROM `filters` WHERE (code = 'cuisine') ORDER BY name ASC[0m
  [1m[35mUser Load (0.2ms)[0m  SELECT `users`.* FROM `users` WHERE `users`.`gem_hunter` = 1 LIMIT 3
  [1m[36mAdminPhoto Load (0.2ms)[0m  [1mSELECT `admin_photos`.* FROM `admin_photos` WHERE `admin_photos`.`image_type` = 1 ORDER BY `admin_photos`.`id` DESC LIMIT 1[0m
  [1m[35mCACHE (0.0ms)[0m  SELECT `admin_photos`.* FROM `admin_photos` WHERE `admin_photos`.`image_type` = 1 ORDER BY `admin_photos`.`id` DESC LIMIT 1
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT `admin_photos`.* FROM `admin_photos` WHERE `admin_photos`.`image_type` = 1 ORDER BY `admin_photos`.`id` DESC LIMIT 1[0m
  [1m[35mCACHE (0.0ms)[0m  SELECT `admin_photos`.* FROM `admin_photos` WHERE `admin_photos`.`image_type` = 1 ORDER BY `admin_photos`.`id` DESC LIMIT 1
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT `admin_photos`.* FROM `admin_photos` WHERE `admin_photos`.`image_type` = 1 ORDER BY `admin_photos`.`id` DESC LIMIT 1[0m
  [1m[35mCACHE (0.0ms)[0m  SELECT `admin_photos`.* FROM `admin_photos` WHERE `admin_photos`.`image_type` = 1 ORDER BY `admin_photos`.`id` DESC LIMIT 1
  Rendered pages/home.html.slim within layouts/application_home (6.3ms)
  [1m[36mUser Load (0.3ms)[0m  [1mSELECT `users`.* FROM `users` WHERE `users`.`id` = 1 LIMIT 1[0m
  [1m[35mSubscription Load (0.2ms)[0m  SELECT `subscriptions`.* FROM `subscriptions` WHERE `subscriptions`.`user_id` = 1 AND `subscriptions`.`success` = 1
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT `subscriptions`.* FROM `subscriptions` WHERE `subscriptions`.`user_id` = 1 AND `subscriptions`.`success` = 1[0m
  Rendered layouts/_user_pnl.html.erb (3.5ms)
  Rendered layouts/_header.html.erb (6.7ms)
  Rendered layouts/_main_menu.html.slim (0.4ms)
  Rendered layouts/_sub_main_menu.html.slim (0.2ms)
  Rendered layouts/_flash_messages.html.erb (0.1ms)
  [1m[35mBasicsPage Load (0.3ms)[0m  SELECT `basics_pages`.* FROM `basics_pages` WHERE `basics_pages`.`page_name` = 'Footer' LIMIT 1
  Rendered layouts/_footer.html.slim (2.8ms)
Completed 200 OK in 30ms (Views: 23.6ms | ActiveRecord: 2.1ms)
couldn't find file /Users/kevinmuller/halalgems_backend/public/system/dragonfly/development/2014/05/19/10_41_19_654_photo_1_2.JPG


Started GET "/admin/collections/admin_new_collection" for 127.0.0.1 at 2016-01-16 21:40:43 +0100
Processing by CollectionsController#admin_new_collection as HTML
  [1m[36mUser Load (0.5ms)[0m  [1mSELECT `users`.* FROM `users` WHERE `users`.`id` = 1 LIMIT 1[0m
  Rendered collections/_collection_form.html.erb (7.6ms)
  Rendered collections/_collection_restaurants_form.html.erb (0.3ms)
  Rendered collections/_upload_collection_image.html.erb (1.1ms)
  Rendered collections/admin_new_collection.html.erb within layouts/admin (13.3ms)
Completed 200 OK in 23ms (Views: 20.0ms | ActiveRecord: 0.5ms)


Started GET "/collection_images?r_id=" for 127.0.0.1 at 2016-01-16 21:40:43 +0100
Processing by RestaurantsController#show as JSON
  Parameters: {"r_id"=>"", "id"=>"collection_images"}
  [1m[35mRestaurant Load (2.0ms)[0m  SELECT `restaurants`.* FROM `restaurants` WHERE `restaurants`.`slug` = 'collection_images' LIMIT 1
  [1m[36mRestaurant Load (0.2ms)[0m  [1mSELECT `restaurants`.* FROM `restaurants` WHERE `restaurants`.`id` = 0 LIMIT 1[0m
Completed 500 Internal Server Error in 5ms

ActiveRecord::RecordNotFound (Couldn't find Restaurant with id=collection_images):
  app/controllers/restaurants_controller.rb:193:in `show'


  Rendered /Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_dispatch/middleware/templates/rescues/_trace.erb (1.2ms)
  Rendered /Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_dispatch/middleware/templates/rescues/_request_and_response.erb (1.1ms)
  Rendered /Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_dispatch/middleware/templates/rescues/diagnostics.erb within rescues/layout (48.8ms)


Started POST "/collection_images" for 127.0.0.1 at 2016-01-16 21:42:13 +0100
Processing by CollectionImagesController#create as JSON
  Parameters: {"utf8"=>"âœ“", "authenticity_token"=>"ZhR8a2fYr/EQcBrBVm2c17tt7AHk64f/gvsZ5fOllxc=", "collection_image"=>{"collection_id"=>"", "user_id"=>"1", "image"=>[#<ActionDispatch::Http::UploadedFile:0x007feb089c09f0 @original_filename="steak.png", @content_type="image/png", @headers="Content-Disposition: form-data; name=\"collection_image[image][]\"; filename=\"steak.png\"\r\nContent-Type: image/png\r\n", @tempfile=#<Tempfile:/var/folders/rf/q4l8n5k56pnbjgkdtzrhq_w00000gn/T/RackMultipart20160116-28026-17ym0uo>>]}}
  [1m[35mCollection Load (0.4ms)[0m  SELECT `collections`.* FROM `collections` WHERE `collections`.`id` = 0 LIMIT 1
Completed 500 Internal Server Error in 2ms

ActiveRecord::RecordNotFound (Couldn't find Collection with id=):
  app/controllers/collection_images_controller.rb:26:in `create'


  Rendered /Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_dispatch/middleware/templates/rescues/_trace.erb (1.7ms)
  Rendered /Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_dispatch/middleware/templates/rescues/_request_and_response.erb (2.0ms)
  Rendered /Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_dispatch/middleware/templates/rescues/diagnostics.erb within rescues/layout (48.6ms)


Started GET "/admin/restaurants" for 127.0.0.1 at 2016-01-16 21:42:56 +0100
Processing by RestaurantsController#index as HTML
  [1m[36mUser Load (0.3ms)[0m  [1mSELECT `users`.* FROM `users` WHERE `users`.`id` = 1 LIMIT 1[0m
  Rendered shared/_restaurant_manage_tabs.html.erb (1.2ms)
  Rendered restaurants/_condition_fields.html.erb (9.8ms)
  [1m[35mRestaurant Load (1.2ms)[0m  SELECT `restaurants`.* FROM `restaurants` ORDER BY disabled ASC,created_at DESC LIMIT 12 OFFSET 0
  [1m[36mPhoto Load (0.5ms)[0m  [1mSELECT `photos`.* FROM `photos` WHERE (restaurant_id = 1057 and cover = true and status = 1) LIMIT 1[0m
  [1m[35mPhoto Load (0.8ms)[0m  SELECT `photos`.* FROM `photos` WHERE `photos`.`restaurant_id` = 1057 AND `photos`.`status` = 1 ORDER BY restaurant_id ASC, created_at DESC LIMIT 1
  [1m[36mPhoto Load (0.9ms)[0m  [1mSELECT `photos`.* FROM `photos` WHERE (restaurant_id = 903 and cover = true and status = 1) LIMIT 1[0m
  [1m[35mPhoto Load (0.8ms)[0m  SELECT `photos`.* FROM `photos` WHERE `photos`.`restaurant_id` = 903 AND `photos`.`status` = 1 ORDER BY restaurant_id ASC, created_at DESC LIMIT 1
  [1m[36mPhoto Load (0.8ms)[0m  [1mSELECT `photos`.* FROM `photos` WHERE (restaurant_id = 876 and cover = true and status = 1) LIMIT 1[0m
  [1m[35mPhoto Load (0.5ms)[0m  SELECT `photos`.* FROM `photos` WHERE `photos`.`restaurant_id` = 876 AND `photos`.`status` = 1 ORDER BY restaurant_id ASC, created_at DESC LIMIT 1
  [1m[36mPhoto Load (0.6ms)[0m  [1mSELECT `photos`.* FROM `photos` WHERE (restaurant_id = 851 and cover = true and status = 1) LIMIT 1[0m
  [1m[35mPhoto Load (0.3ms)[0m  SELECT `photos`.* FROM `photos` WHERE `photos`.`restaurant_id` = 851 AND `photos`.`status` = 1 ORDER BY restaurant_id ASC, created_at DESC LIMIT 1
  [1m[36mPhoto Load (0.3ms)[0m  [1mSELECT `photos`.* FROM `photos` WHERE (restaurant_id = 693 and cover = true and status = 1) LIMIT 1[0m
  [1m[35mPhoto Load (0.3ms)[0m  SELECT `photos`.* FROM `photos` WHERE `photos`.`restaurant_id` = 693 AND `photos`.`status` = 1 ORDER BY restaurant_id ASC, created_at DESC LIMIT 1
  [1m[36mPhoto Load (0.4ms)[0m  [1mSELECT `photos`.* FROM `photos` WHERE (restaurant_id = 686 and cover = true and status = 1) LIMIT 1[0m
  [1m[35mPhoto Load (0.4ms)[0m  SELECT `photos`.* FROM `photos` WHERE `photos`.`restaurant_id` = 686 AND `photos`.`status` = 1 ORDER BY restaurant_id ASC, created_at DESC LIMIT 1
  [1m[36mPhoto Load (0.3ms)[0m  [1mSELECT `photos`.* FROM `photos` WHERE (restaurant_id = 669 and cover = true and status = 1) LIMIT 1[0m
  [1m[35mPhoto Load (0.4ms)[0m  SELECT `photos`.* FROM `photos` WHERE `photos`.`restaurant_id` = 669 AND `photos`.`status` = 1 ORDER BY restaurant_id ASC, created_at DESC LIMIT 1
  [1m[36mPhoto Load (0.5ms)[0m  [1mSELECT `photos`.* FROM `photos` WHERE (restaurant_id = 251 and cover = true and status = 1) LIMIT 1[0m
  [1m[35mPhoto Load (0.3ms)[0m  SELECT `photos`.* FROM `photos` WHERE `photos`.`restaurant_id` = 251 AND `photos`.`status` = 1 ORDER BY restaurant_id ASC, created_at DESC LIMIT 1
  [1m[36mPhoto Load (0.5ms)[0m  [1mSELECT `photos`.* FROM `photos` WHERE (restaurant_id = 250 and cover = true and status = 1) LIMIT 1[0m
  [1m[35mPhoto Load (0.5ms)[0m  SELECT `photos`.* FROM `photos` WHERE `photos`.`restaurant_id` = 250 AND `photos`.`status` = 1 ORDER BY restaurant_id ASC, created_at DESC LIMIT 1
  [1m[36mPhoto Load (0.6ms)[0m  [1mSELECT `photos`.* FROM `photos` WHERE (restaurant_id = 237 and cover = true and status = 1) LIMIT 1[0m
  [1m[35mPhoto Load (0.4ms)[0m  SELECT `photos`.* FROM `photos` WHERE `photos`.`restaurant_id` = 237 AND `photos`.`status` = 1 ORDER BY restaurant_id ASC, created_at DESC LIMIT 1
  [1m[36mPhoto Load (0.4ms)[0m  [1mSELECT `photos`.* FROM `photos` WHERE (restaurant_id = 231 and cover = true and status = 1) LIMIT 1[0m
  [1m[35mPhoto Load (0.3ms)[0m  SELECT `photos`.* FROM `photos` WHERE `photos`.`restaurant_id` = 231 AND `photos`.`status` = 1 ORDER BY restaurant_id ASC, created_at DESC LIMIT 1
  [1m[36mPhoto Load (0.3ms)[0m  [1mSELECT `photos`.* FROM `photos` WHERE (restaurant_id = 222 and cover = true and status = 1) LIMIT 1[0m
  [1m[35mPhoto Load (0.3ms)[0m  SELECT `photos`.* FROM `photos` WHERE `photos`.`restaurant_id` = 222 AND `photos`.`status` = 1 ORDER BY restaurant_id ASC, created_at DESC LIMIT 1
  [1m[36m (0.7ms)[0m  [1mSELECT COUNT(*) FROM `restaurants` [0m
  Rendered restaurants/index.html.erb within layouts/admin (163.7ms)
Completed 200 OK in 181ms (Views: 162.7ms | ActiveRecord: 15.0ms)


Started GET "/admin/collections" for 127.0.0.1 at 2016-01-16 21:42:58 +0100
Processing by CollectionsController#index as HTML
  Rendered shared/_restaurant_manage_tabs.html.erb (0.6ms)
  [1m[35mCollection Load (0.4ms)[0m  SELECT `collections`.* FROM `collections` ORDER BY name ASC, created_at DESC LIMIT 12 OFFSET 0
  [1m[36m (0.3ms)[0m  [1mSELECT COUNT(*) FROM `collections` [0m
  Rendered collections/index.erb within layouts/admin (9.9ms)
  [1m[35mUser Load (0.4ms)[0m  SELECT `users`.* FROM `users` WHERE `users`.`id` = 1 LIMIT 1
Completed 200 OK in 18ms (Views: 16.5ms | ActiveRecord: 1.1ms)


Started GET "/collection/1/edit" for 127.0.0.1 at 2016-01-16 21:43:01 +0100
Processing by CollectionsController#edit_collection as HTML
  Parameters: {"id"=>"1"}
  [1m[36mUser Load (0.4ms)[0m  [1mSELECT `users`.* FROM `users` WHERE `users`.`id` = 1 LIMIT 1[0m
  [1m[35mCollection Load (0.2ms)[0m  SELECT `collections`.* FROM `collections` WHERE `collections`.`id` = 1 LIMIT 1
  Rendered collections/_collection_form.html.erb (5.2ms)
  Rendered collections/_collection_restaurants_form.html.erb (0.3ms)
  Rendered collections/_upload_collection_image.html.erb (1.0ms)
  Rendered collections/edit_collection.html.erb within layouts/admin (9.6ms)
Completed 200 OK in 19ms (Views: 15.7ms | ActiveRecord: 0.5ms)


Started GET "/collection_images?r_id=1" for 127.0.0.1 at 2016-01-16 21:43:01 +0100
Processing by RestaurantsController#show as JSON
  Parameters: {"r_id"=>"1", "id"=>"collection_images"}
  [1m[36mRestaurant Load (1.8ms)[0m  [1mSELECT `restaurants`.* FROM `restaurants` WHERE `restaurants`.`slug` = 'collection_images' LIMIT 1[0m
  [1m[35mRestaurant Load (0.2ms)[0m  SELECT `restaurants`.* FROM `restaurants` WHERE `restaurants`.`id` = 0 LIMIT 1
Completed 500 Internal Server Error in 5ms

ActiveRecord::RecordNotFound (Couldn't find Restaurant with id=collection_images):
  app/controllers/restaurants_controller.rb:193:in `show'


  Rendered /Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_dispatch/middleware/templates/rescues/_trace.erb (1.2ms)
  Rendered /Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_dispatch/middleware/templates/rescues/_request_and_response.erb (1.0ms)
  Rendered /Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_dispatch/middleware/templates/rescues/diagnostics.erb within rescues/layout (43.9ms)


Started GET "/collection/1/edit" for 127.0.0.1 at 2016-01-16 21:49:53 +0100
Processing by CollectionsController#edit_collection as HTML
  Parameters: {"id"=>"1"}
  [1m[36mUser Load (0.4ms)[0m  [1mSELECT `users`.* FROM `users` WHERE `users`.`id` = 1 LIMIT 1[0m
  [1m[35mCollection Load (0.2ms)[0m  SELECT `collections`.* FROM `collections` WHERE `collections`.`id` = 1 LIMIT 1
  Rendered collections/_collection_form.html.erb (5.7ms)
  Rendered collections/_collection_restaurants_form.html.erb (0.5ms)
  Rendered collections/_upload_collection_image.html.erb (1.1ms)
  Rendered collections/edit_collection.html.erb within layouts/admin (11.1ms)
Completed 200 OK in 21ms (Views: 17.4ms | ActiveRecord: 0.5ms)


Started GET "/collection_images?r_id=1" for 127.0.0.1 at 2016-01-16 21:49:53 +0100
Processing by RestaurantsController#show as JSON
  Parameters: {"r_id"=>"1", "id"=>"collection_images"}
  [1m[36mRestaurant Load (2.1ms)[0m  [1mSELECT `restaurants`.* FROM `restaurants` WHERE `restaurants`.`slug` = 'collection_images' LIMIT 1[0m
  [1m[35mRestaurant Load (0.3ms)[0m  SELECT `restaurants`.* FROM `restaurants` WHERE `restaurants`.`id` = 0 LIMIT 1
Completed 500 Internal Server Error in 5ms

ActiveRecord::RecordNotFound (Couldn't find Restaurant with id=collection_images):
  app/controllers/restaurants_controller.rb:193:in `show'


  Rendered /Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_dispatch/middleware/templates/rescues/_trace.erb (1.1ms)
  Rendered /Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_dispatch/middleware/templates/rescues/_request_and_response.erb (0.9ms)
  Rendered /Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_dispatch/middleware/templates/rescues/diagnostics.erb within rescues/layout (46.6ms)


Started PUT "/admin/collections/1" for 127.0.0.1 at 2016-01-16 21:50:09 +0100
Processing by CollectionsController#update as HTML
  Parameters: {"utf8"=>"âœ“", "authenticity_token"=>"ZhR8a2fYr/EQcBrBVm2c17tt7AHk64f/gvsZ5fOllxc=", "admin"=>"true", "collection"=>{"name"=>"Test1", "description"=>"test desc"}, "id"=>"1"}
  [1m[36mUser Load (0.4ms)[0m  [1mSELECT `users`.* FROM `users` WHERE `users`.`id` = 1 LIMIT 1[0m
  [1m[35mCollection Load (0.2ms)[0m  SELECT `collections`.* FROM `collections` WHERE `collections`.`id` = 1 LIMIT 1
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35m (0.3ms)[0m  UPDATE `collections` SET `name` = 'Test1', `updated_at` = '2016-01-16 20:50:09' WHERE `collections`.`id` = 1
  [1m[36m (1.0ms)[0m  [1mCOMMIT[0m
Redirected to http://0.0.0.0:3000/collection/1/edit
Completed 302 Found in 8ms (ActiveRecord: 2.0ms)


Started GET "/collection/1/edit" for 127.0.0.1 at 2016-01-16 21:50:09 +0100
Processing by CollectionsController#edit_collection as HTML
  Parameters: {"id"=>"1"}
  [1m[35mUser Load (0.4ms)[0m  SELECT `users`.* FROM `users` WHERE `users`.`id` = 1 LIMIT 1
  [1m[36mCollection Load (0.2ms)[0m  [1mSELECT `collections`.* FROM `collections` WHERE `collections`.`id` = 1 LIMIT 1[0m
  Rendered collections/_collection_form.html.erb (4.8ms)
  Rendered collections/_collection_restaurants_form.html.erb (0.3ms)
  Rendered collections/_upload_collection_image.html.erb (0.8ms)
  Rendered collections/edit_collection.html.erb within layouts/admin (8.5ms)
Completed 200 OK in 16ms (Views: 13.4ms | ActiveRecord: 0.6ms)


Started GET "/collection_images?r_id=1" for 127.0.0.1 at 2016-01-16 21:50:10 +0100
Processing by RestaurantsController#show as JSON
  Parameters: {"r_id"=>"1", "id"=>"collection_images"}
  [1m[35mRestaurant Load (1.8ms)[0m  SELECT `restaurants`.* FROM `restaurants` WHERE `restaurants`.`slug` = 'collection_images' LIMIT 1
  [1m[36mRestaurant Load (0.2ms)[0m  [1mSELECT `restaurants`.* FROM `restaurants` WHERE `restaurants`.`id` = 0 LIMIT 1[0m
Completed 500 Internal Server Error in 4ms

ActiveRecord::RecordNotFound (Couldn't find Restaurant with id=collection_images):
  app/controllers/restaurants_controller.rb:193:in `show'


  Rendered /Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_dispatch/middleware/templates/rescues/_trace.erb (1.2ms)
  Rendered /Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_dispatch/middleware/templates/rescues/_request_and_response.erb (0.9ms)
  Rendered /Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_dispatch/middleware/templates/rescues/diagnostics.erb within rescues/layout (43.5ms)


Started GET "/admin/restaurants" for 127.0.0.1 at 2016-01-16 21:50:46 +0100
Processing by RestaurantsController#index as HTML
  [1m[35mUser Load (0.3ms)[0m  SELECT `users`.* FROM `users` WHERE `users`.`id` = 1 LIMIT 1
  Rendered shared/_restaurant_manage_tabs.html.erb (0.7ms)
  Rendered restaurants/_condition_fields.html.erb (9.3ms)
  [1m[36mRestaurant Load (0.8ms)[0m  [1mSELECT `restaurants`.* FROM `restaurants` ORDER BY disabled ASC,created_at DESC LIMIT 12 OFFSET 0[0m
  [1m[35mPhoto Load (0.4ms)[0m  SELECT `photos`.* FROM `photos` WHERE (restaurant_id = 1057 and cover = true and status = 1) LIMIT 1
  [1m[36mPhoto Load (0.3ms)[0m  [1mSELECT `photos`.* FROM `photos` WHERE `photos`.`restaurant_id` = 1057 AND `photos`.`status` = 1 ORDER BY restaurant_id ASC, created_at DESC LIMIT 1[0m
  [1m[35mPhoto Load (0.4ms)[0m  SELECT `photos`.* FROM `photos` WHERE (restaurant_id = 903 and cover = true and status = 1) LIMIT 1
  [1m[36mPhoto Load (0.3ms)[0m  [1mSELECT `photos`.* FROM `photos` WHERE `photos`.`restaurant_id` = 903 AND `photos`.`status` = 1 ORDER BY restaurant_id ASC, created_at DESC LIMIT 1[0m
  [1m[35mPhoto Load (0.4ms)[0m  SELECT `photos`.* FROM `photos` WHERE (restaurant_id = 876 and cover = true and status = 1) LIMIT 1
  [1m[36mPhoto Load (0.3ms)[0m  [1mSELECT `photos`.* FROM `photos` WHERE `photos`.`restaurant_id` = 876 AND `photos`.`status` = 1 ORDER BY restaurant_id ASC, created_at DESC LIMIT 1[0m
  [1m[35mPhoto Load (0.5ms)[0m  SELECT `photos`.* FROM `photos` WHERE (restaurant_id = 851 and cover = true and status = 1) LIMIT 1
  [1m[36mPhoto Load (0.2ms)[0m  [1mSELECT `photos`.* FROM `photos` WHERE `photos`.`restaurant_id` = 851 AND `photos`.`status` = 1 ORDER BY restaurant_id ASC, created_at DESC LIMIT 1[0m
  [1m[35mPhoto Load (0.5ms)[0m  SELECT `photos`.* FROM `photos` WHERE (restaurant_id = 693 and cover = true and status = 1) LIMIT 1
  [1m[36mPhoto Load (0.5ms)[0m  [1mSELECT `photos`.* FROM `photos` WHERE `photos`.`restaurant_id` = 693 AND `photos`.`status` = 1 ORDER BY restaurant_id ASC, created_at DESC LIMIT 1[0m
  [1m[35mPhoto Load (0.3ms)[0m  SELECT `photos`.* FROM `photos` WHERE (restaurant_id = 686 and cover = true and status = 1) LIMIT 1
  [1m[36mPhoto Load (0.4ms)[0m  [1mSELECT `photos`.* FROM `photos` WHERE `photos`.`restaurant_id` = 686 AND `photos`.`status` = 1 ORDER BY restaurant_id ASC, created_at DESC LIMIT 1[0m
  [1m[35mPhoto Load (0.4ms)[0m  SELECT `photos`.* FROM `photos` WHERE (restaurant_id = 669 and cover = true and status = 1) LIMIT 1
  [1m[36mPhoto Load (0.6ms)[0m  [1mSELECT `photos`.* FROM `photos` WHERE `photos`.`restaurant_id` = 669 AND `photos`.`status` = 1 ORDER BY restaurant_id ASC, created_at DESC LIMIT 1[0m
  [1m[35mPhoto Load (0.4ms)[0m  SELECT `photos`.* FROM `photos` WHERE (restaurant_id = 251 and cover = true and status = 1) LIMIT 1
  [1m[36mPhoto Load (2.4ms)[0m  [1mSELECT `photos`.* FROM `photos` WHERE `photos`.`restaurant_id` = 251 AND `photos`.`status` = 1 ORDER BY restaurant_id ASC, created_at DESC LIMIT 1[0m
  [1m[35mPhoto Load (0.4ms)[0m  SELECT `photos`.* FROM `photos` WHERE (restaurant_id = 250 and cover = true and status = 1) LIMIT 1
  [1m[36mPhoto Load (0.3ms)[0m  [1mSELECT `photos`.* FROM `photos` WHERE `photos`.`restaurant_id` = 250 AND `photos`.`status` = 1 ORDER BY restaurant_id ASC, created_at DESC LIMIT 1[0m
  [1m[35mPhoto Load (0.4ms)[0m  SELECT `photos`.* FROM `photos` WHERE (restaurant_id = 237 and cover = true and status = 1) LIMIT 1
  [1m[36mPhoto Load (0.3ms)[0m  [1mSELECT `photos`.* FROM `photos` WHERE `photos`.`restaurant_id` = 237 AND `photos`.`status` = 1 ORDER BY restaurant_id ASC, created_at DESC LIMIT 1[0m
  [1m[35mPhoto Load (0.4ms)[0m  SELECT `photos`.* FROM `photos` WHERE (restaurant_id = 231 and cover = true and status = 1) LIMIT 1
  [1m[36mPhoto Load (0.3ms)[0m  [1mSELECT `photos`.* FROM `photos` WHERE `photos`.`restaurant_id` = 231 AND `photos`.`status` = 1 ORDER BY restaurant_id ASC, created_at DESC LIMIT 1[0m
  [1m[35mPhoto Load (0.4ms)[0m  SELECT `photos`.* FROM `photos` WHERE (restaurant_id = 222 and cover = true and status = 1) LIMIT 1
  [1m[36mPhoto Load (0.3ms)[0m  [1mSELECT `photos`.* FROM `photos` WHERE `photos`.`restaurant_id` = 222 AND `photos`.`status` = 1 ORDER BY restaurant_id ASC, created_at DESC LIMIT 1[0m
  [1m[35m (0.4ms)[0m  SELECT COUNT(*) FROM `restaurants` 
  Rendered restaurants/index.html.erb within layouts/admin (97.1ms)
Completed 200 OK in 106ms (Views: 91.0ms | ActiveRecord: 12.5ms)


Started GET "/test/edit" for 127.0.0.1 at 2016-01-16 21:50:49 +0100
Processing by RestaurantsController#edit as HTML
  Parameters: {"id"=>"test"}
  [1m[36mUser Load (0.3ms)[0m  [1mSELECT `users`.* FROM `users` WHERE `users`.`id` = 1 LIMIT 1[0m
  [1m[35mRestaurant Load (2.4ms)[0m  SELECT `restaurants`.* FROM `restaurants` WHERE `restaurants`.`slug` = 'test' LIMIT 1
  [1m[36mSchedule Load (5.8ms)[0m  [1mSELECT `schedules`.* FROM `schedules` WHERE `schedules`.`restaurant_id` = 1057 ORDER BY day_of_week ASC[0m
  [1m[35mPhoto Load (0.5ms)[0m  SELECT `photos`.* FROM `photos` WHERE `photos`.`restaurant_id` = 1057
  [1m[36mFilter Load (1.5ms)[0m  [1mSELECT `filters`.* FROM `filters` INNER JOIN `filters_restaurants` ON `filters`.`id` = `filters_restaurants`.`filter_id` WHERE `filters_restaurants`.`restaurant_id` = 1057 AND `filters`.`code` = 'cuisine'[0m
  [1m[35m (1.4ms)[0m  SELECT `filters`.id FROM `filters` INNER JOIN `filters_restaurants` ON `filters`.`id` = `filters_restaurants`.`filter_id` WHERE `filters_restaurants`.`restaurant_id` = 1057
  [1m[36mFilterType Load (0.3ms)[0m  [1mSELECT `filter_types`.* FROM `filter_types` WHERE `filter_types`.`code` = 'hal_status' LIMIT 1[0m
  [1m[35mFilterType Load (0.2ms)[0m  SELECT `filter_types`.* FROM `filter_types` WHERE `filter_types`.`code` = 'price' LIMIT 1
  [1m[36mFilterType Load (0.1ms)[0m  [1mSELECT `filter_types`.* FROM `filter_types` WHERE `filter_types`.`code` = 'cuisine' LIMIT 1[0m
  [1m[35mFilterType Load (0.2ms)[0m  SELECT `filter_types`.* FROM `filter_types` WHERE `filter_types`.`code` = 'alcohol' LIMIT 1
  [1m[36mFilterType Load (0.1ms)[0m  [1mSELECT `filter_types`.* FROM `filter_types` WHERE `filter_types`.`code` = 'features' LIMIT 1[0m
  Rendered restaurants/_googlemap.html.erb (0.6ms)
  [1m[35mFilter Load (0.3ms)[0m  SELECT `filters`.* FROM `filters` WHERE `filters`.`filter_type_id` = 8
  [1m[36mFilter Load (0.7ms)[0m  [1mSELECT `filters`.* FROM `filters` WHERE `filters`.`filter_type_id` = 1 ORDER BY name ASC[0m
  [1m[35mFilter Load (0.3ms)[0m  SELECT `filters`.* FROM `filters` WHERE `filters`.`filter_type_id` = 4
  [1m[36mFilter Load (0.2ms)[0m  [1mSELECT `filters`.* FROM `filters` WHERE `filters`.`filter_type_id` = 6[0m
  [1m[35mFilter Load (0.2ms)[0m  SELECT `filters`.* FROM `filters` WHERE `filters`.`filter_type_id` = 11 AND (code != 'offer')
  Rendered restaurants/_admin_form.html.erb (114.1ms)
  [1m[36mMenu Load (0.4ms)[0m  [1mSELECT `menus`.* FROM `menus` WHERE `menus`.`restaurant_id` = 1057[0m
  Rendered restaurants/_upload_menu.html.erb (8.4ms)
  Rendered restaurants/_upload_photos.html.erb (2.5ms)
  Rendered restaurants/edit.html.erb within layouts/admin (129.4ms)
Completed 200 OK in 242ms (Views: 133.7ms | ActiveRecord: 18.0ms)


Started GET "/photos?r_id=1057" for 127.0.0.1 at 2016-01-16 21:50:51 +0100
Processing by PhotosController#index as JSON
  Parameters: {"r_id"=>"1057"}
  [1m[35mRestaurant Load (1.6ms)[0m  SELECT `restaurants`.* FROM `restaurants` WHERE `restaurants`.`slug` = '1057' LIMIT 1
  [1m[36mRestaurant Load (0.2ms)[0m  [1mSELECT `restaurants`.* FROM `restaurants` WHERE `restaurants`.`id` = 1057 LIMIT 1[0m
  [1m[35mPhoto Load (0.3ms)[0m  SELECT `photos`.* FROM `photos` WHERE `photos`.`restaurant_id` = 1057
Completed 200 OK in 6ms (Views: 0.1ms | ActiveRecord: 2.2ms)


Started GET "/saras-halal-foods/edit" for 127.0.0.1 at 2016-01-16 21:51:25 +0100
Processing by RestaurantsController#edit as HTML
  Parameters: {"id"=>"saras-halal-foods"}
  [1m[36mUser Load (0.3ms)[0m  [1mSELECT `users`.* FROM `users` WHERE `users`.`id` = 1 LIMIT 1[0m
  [1m[35mRestaurant Load (1.3ms)[0m  SELECT `restaurants`.* FROM `restaurants` WHERE `restaurants`.`slug` = 'saras-halal-foods' LIMIT 1
  [1m[36mSchedule Load (4.2ms)[0m  [1mSELECT `schedules`.* FROM `schedules` WHERE `schedules`.`restaurant_id` = 903 ORDER BY day_of_week ASC[0m
  [1m[35mPhoto Load (0.4ms)[0m  SELECT `photos`.* FROM `photos` WHERE `photos`.`restaurant_id` = 903
  [1m[36mFilter Load (1.2ms)[0m  [1mSELECT `filters`.* FROM `filters` INNER JOIN `filters_restaurants` ON `filters`.`id` = `filters_restaurants`.`filter_id` WHERE `filters_restaurants`.`restaurant_id` = 903 AND `filters`.`code` = 'cuisine'[0m
  [1m[35m (1.2ms)[0m  SELECT `filters`.id FROM `filters` INNER JOIN `filters_restaurants` ON `filters`.`id` = `filters_restaurants`.`filter_id` WHERE `filters_restaurants`.`restaurant_id` = 903
  [1m[36mFilterType Load (0.2ms)[0m  [1mSELECT `filter_types`.* FROM `filter_types` WHERE `filter_types`.`code` = 'hal_status' LIMIT 1[0m
  [1m[35mFilterType Load (0.1ms)[0m  SELECT `filter_types`.* FROM `filter_types` WHERE `filter_types`.`code` = 'price' LIMIT 1
  [1m[36mFilterType Load (0.2ms)[0m  [1mSELECT `filter_types`.* FROM `filter_types` WHERE `filter_types`.`code` = 'cuisine' LIMIT 1[0m
  [1m[35mFilterType Load (0.1ms)[0m  SELECT `filter_types`.* FROM `filter_types` WHERE `filter_types`.`code` = 'alcohol' LIMIT 1
  [1m[36mFilterType Load (0.1ms)[0m  [1mSELECT `filter_types`.* FROM `filter_types` WHERE `filter_types`.`code` = 'features' LIMIT 1[0m
  Rendered restaurants/_googlemap.html.erb (0.1ms)
  [1m[35mFilter Load (0.3ms)[0m  SELECT `filters`.* FROM `filters` WHERE `filters`.`filter_type_id` = 8
  [1m[36mFilter Load (0.3ms)[0m  [1mSELECT `filters`.* FROM `filters` WHERE `filters`.`filter_type_id` = 1 ORDER BY name ASC[0m
  [1m[35mFilter Load (0.2ms)[0m  SELECT `filters`.* FROM `filters` WHERE `filters`.`filter_type_id` = 4
  [1m[36mFilter Load (0.2ms)[0m  [1mSELECT `filters`.* FROM `filters` WHERE `filters`.`filter_type_id` = 6[0m
  [1m[35mFilter Load (0.4ms)[0m  SELECT `filters`.* FROM `filters` WHERE `filters`.`filter_type_id` = 11 AND (code != 'offer')
  Rendered restaurants/_admin_form.html.erb (92.3ms)
  [1m[36mMenu Load (0.4ms)[0m  [1mSELECT `menus`.* FROM `menus` WHERE `menus`.`restaurant_id` = 903[0m
  Rendered restaurants/_upload_menu.html.erb (3.5ms)
  Rendered restaurants/_upload_photos.html.erb (2.1ms)
  Rendered restaurants/edit.html.erb within layouts/admin (101.3ms)
Completed 200 OK in 130ms (Views: 105.4ms | ActiveRecord: 11.2ms)


Started GET "/photos?r_id=903" for 127.0.0.1 at 2016-01-16 21:51:27 +0100
Processing by PhotosController#index as JSON
  Parameters: {"r_id"=>"903"}
  [1m[35mRestaurant Load (1.5ms)[0m  SELECT `restaurants`.* FROM `restaurants` WHERE `restaurants`.`slug` = '903' LIMIT 1
  [1m[36mRestaurant Load (0.2ms)[0m  [1mSELECT `restaurants`.* FROM `restaurants` WHERE `restaurants`.`id` = 903 LIMIT 1[0m
  [1m[35mPhoto Load (0.3ms)[0m  SELECT `photos`.* FROM `photos` WHERE `photos`.`restaurant_id` = 903
Completed 200 OK in 5ms (Views: 0.1ms | ActiveRecord: 2.0ms)


Started GET "/admin?page=5" for 127.0.0.1 at 2016-01-16 21:51:45 +0100
Processing by RestaurantsController#index as HTML
  Parameters: {"page"=>"5"}
  [1m[36mUser Load (0.3ms)[0m  [1mSELECT `users`.* FROM `users` WHERE `users`.`id` = 1 LIMIT 1[0m
  Rendered shared/_restaurant_manage_tabs.html.erb (0.5ms)
  Rendered restaurants/_condition_fields.html.erb (9.5ms)
  [1m[35mRestaurant Load (0.9ms)[0m  SELECT `restaurants`.* FROM `restaurants` ORDER BY disabled ASC,created_at DESC LIMIT 12 OFFSET 48
  [1m[36mPhoto Load (0.5ms)[0m  [1mSELECT `photos`.* FROM `photos` WHERE (restaurant_id = 1025 and cover = true and status = 1) LIMIT 1[0m
  [1m[35mPhoto Load (0.3ms)[0m  SELECT `photos`.* FROM `photos` WHERE `photos`.`restaurant_id` = 1025 AND `photos`.`status` = 1 ORDER BY restaurant_id ASC, created_at DESC LIMIT 1
  [1m[36mPhoto Load (0.4ms)[0m  [1mSELECT `photos`.* FROM `photos` WHERE (restaurant_id = 1024 and cover = true and status = 1) LIMIT 1[0m
  [1m[35mPhoto Load (0.3ms)[0m  SELECT `photos`.* FROM `photos` WHERE `photos`.`restaurant_id` = 1024 AND `photos`.`status` = 1 ORDER BY restaurant_id ASC, created_at DESC LIMIT 1
  [1m[36mPhoto Load (0.3ms)[0m  [1mSELECT `photos`.* FROM `photos` WHERE (restaurant_id = 1023 and cover = true and status = 1) LIMIT 1[0m
  [1m[35mPhoto Load (0.3ms)[0m  SELECT `photos`.* FROM `photos` WHERE `photos`.`restaurant_id` = 1023 AND `photos`.`status` = 1 ORDER BY restaurant_id ASC, created_at DESC LIMIT 1
  [1m[36mPhoto Load (0.4ms)[0m  [1mSELECT `photos`.* FROM `photos` WHERE (restaurant_id = 1022 and cover = true and status = 1) LIMIT 1[0m
  [1m[35mPhoto Load (0.3ms)[0m  SELECT `photos`.* FROM `photos` WHERE `photos`.`restaurant_id` = 1022 AND `photos`.`status` = 1 ORDER BY restaurant_id ASC, created_at DESC LIMIT 1
  [1m[36mPhoto Load (0.3ms)[0m  [1mSELECT `photos`.* FROM `photos` WHERE (restaurant_id = 1021 and cover = true and status = 1) LIMIT 1[0m
  [1m[35mPhoto Load (0.3ms)[0m  SELECT `photos`.* FROM `photos` WHERE `photos`.`restaurant_id` = 1021 AND `photos`.`status` = 1 ORDER BY restaurant_id ASC, created_at DESC LIMIT 1
  [1m[36mPhoto Load (0.4ms)[0m  [1mSELECT `photos`.* FROM `photos` WHERE (restaurant_id = 1020 and cover = true and status = 1) LIMIT 1[0m
  [1m[35mPhoto Load (0.3ms)[0m  SELECT `photos`.* FROM `photos` WHERE `photos`.`restaurant_id` = 1020 AND `photos`.`status` = 1 ORDER BY restaurant_id ASC, created_at DESC LIMIT 1
  [1m[36mPhoto Load (0.4ms)[0m  [1mSELECT `photos`.* FROM `photos` WHERE (restaurant_id = 1019 and cover = true and status = 1) LIMIT 1[0m
  [1m[35mPhoto Load (0.3ms)[0m  SELECT `photos`.* FROM `photos` WHERE `photos`.`restaurant_id` = 1019 AND `photos`.`status` = 1 ORDER BY restaurant_id ASC, created_at DESC LIMIT 1
  [1m[36mPhoto Load (0.3ms)[0m  [1mSELECT `photos`.* FROM `photos` WHERE (restaurant_id = 1018 and cover = true and status = 1) LIMIT 1[0m
  [1m[35mPhoto Load (0.3ms)[0m  SELECT `photos`.* FROM `photos` WHERE `photos`.`restaurant_id` = 1018 AND `photos`.`status` = 1 ORDER BY restaurant_id ASC, created_at DESC LIMIT 1
  [1m[36mPhoto Load (0.3ms)[0m  [1mSELECT `photos`.* FROM `photos` WHERE (restaurant_id = 1017 and cover = true and status = 1) LIMIT 1[0m
  [1m[35mPhoto Load (0.3ms)[0m  SELECT `photos`.* FROM `photos` WHERE `photos`.`restaurant_id` = 1017 AND `photos`.`status` = 1 ORDER BY restaurant_id ASC, created_at DESC LIMIT 1
  [1m[36mPhoto Load (0.3ms)[0m  [1mSELECT `photos`.* FROM `photos` WHERE (restaurant_id = 1016 and cover = true and status = 1) LIMIT 1[0m
  [1m[35mPhoto Load (0.3ms)[0m  SELECT `photos`.* FROM `photos` WHERE `photos`.`restaurant_id` = 1016 AND `photos`.`status` = 1 ORDER BY restaurant_id ASC, created_at DESC LIMIT 1
  [1m[36mPhoto Load (0.3ms)[0m  [1mSELECT `photos`.* FROM `photos` WHERE (restaurant_id = 1015 and cover = true and status = 1) LIMIT 1[0m
  [1m[35mPhoto Load (0.3ms)[0m  SELECT `photos`.* FROM `photos` WHERE `photos`.`restaurant_id` = 1015 AND `photos`.`status` = 1 ORDER BY restaurant_id ASC, created_at DESC LIMIT 1
  [1m[36mPhoto Load (0.4ms)[0m  [1mSELECT `photos`.* FROM `photos` WHERE (restaurant_id = 1014 and cover = true and status = 1) LIMIT 1[0m
  [1m[35mPhoto Load (0.6ms)[0m  SELECT `photos`.* FROM `photos` WHERE `photos`.`restaurant_id` = 1014 AND `photos`.`status` = 1 ORDER BY restaurant_id ASC, created_at DESC LIMIT 1
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT `photos`.* FROM `photos` WHERE (restaurant_id = 1014 and cover = true and status = 1) LIMIT 1[0m
  [1m[35mCACHE (0.0ms)[0m  SELECT `photos`.* FROM `photos` WHERE `photos`.`restaurant_id` = 1014 AND `photos`.`status` = 1 ORDER BY restaurant_id ASC, created_at DESC LIMIT 1
  [1m[36m (0.4ms)[0m  [1mSELECT COUNT(*) FROM `restaurants` [0m
  Rendered restaurants/index.html.erb within layouts/admin (121.8ms)
Completed 200 OK in 130ms (Views: 117.8ms | ActiveRecord: 9.8ms)
couldn't find file /Users/kevinmuller/halalgems_backend/public/system/dragonfly/development/2015/06/29/12_07_57_552__DSC6428_copy.jpg
couldn't find file /Users/kevinmuller/halalgems_backend/public/system/dragonfly/development/2015/06/29/12_07_57_552__DSC6428_copy.jpg


Started GET "/admin?page=9" for 127.0.0.1 at 2016-01-16 21:51:49 +0100
Processing by RestaurantsController#index as HTML
  Parameters: {"page"=>"9"}
  [1m[35mUser Load (0.2ms)[0m  SELECT `users`.* FROM `users` WHERE `users`.`id` = 1 LIMIT 1
  Rendered shared/_restaurant_manage_tabs.html.erb (0.6ms)
  Rendered restaurants/_condition_fields.html.erb (9.8ms)
  [1m[36mRestaurant Load (1.2ms)[0m  [1mSELECT `restaurants`.* FROM `restaurants` ORDER BY disabled ASC,created_at DESC LIMIT 12 OFFSET 96[0m
  [1m[35mPhoto Load (0.4ms)[0m  SELECT `photos`.* FROM `photos` WHERE (restaurant_id = 953 and cover = true and status = 1) LIMIT 1
  [1m[36mPhoto Load (0.3ms)[0m  [1mSELECT `photos`.* FROM `photos` WHERE `photos`.`restaurant_id` = 953 AND `photos`.`status` = 1 ORDER BY restaurant_id ASC, created_at DESC LIMIT 1[0m
  [1m[35mPhoto Load (0.3ms)[0m  SELECT `photos`.* FROM `photos` WHERE (restaurant_id = 952 and cover = true and status = 1) LIMIT 1
  [1m[36mPhoto Load (0.4ms)[0m  [1mSELECT `photos`.* FROM `photos` WHERE `photos`.`restaurant_id` = 952 AND `photos`.`status` = 1 ORDER BY restaurant_id ASC, created_at DESC LIMIT 1[0m
  [1m[35mPhoto Load (0.4ms)[0m  SELECT `photos`.* FROM `photos` WHERE (restaurant_id = 951 and cover = true and status = 1) LIMIT 1
  [1m[36mPhoto Load (0.3ms)[0m  [1mSELECT `photos`.* FROM `photos` WHERE `photos`.`restaurant_id` = 951 AND `photos`.`status` = 1 ORDER BY restaurant_id ASC, created_at DESC LIMIT 1[0m
  [1m[35mPhoto Load (0.3ms)[0m  SELECT `photos`.* FROM `photos` WHERE (restaurant_id = 950 and cover = true and status = 1) LIMIT 1
  [1m[36mPhoto Load (0.3ms)[0m  [1mSELECT `photos`.* FROM `photos` WHERE `photos`.`restaurant_id` = 950 AND `photos`.`status` = 1 ORDER BY restaurant_id ASC, created_at DESC LIMIT 1[0m
  [1m[35mCACHE (0.0ms)[0m  SELECT `photos`.* FROM `photos` WHERE (restaurant_id = 950 and cover = true and status = 1) LIMIT 1
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT `photos`.* FROM `photos` WHERE `photos`.`restaurant_id` = 950 AND `photos`.`status` = 1 ORDER BY restaurant_id ASC, created_at DESC LIMIT 1[0m
  [1m[35mPhoto Load (0.4ms)[0m  SELECT `photos`.* FROM `photos` WHERE (restaurant_id = 949 and cover = true and status = 1) LIMIT 1
  [1m[36mPhoto Load (0.3ms)[0m  [1mSELECT `photos`.* FROM `photos` WHERE `photos`.`restaurant_id` = 949 AND `photos`.`status` = 1 ORDER BY restaurant_id ASC, created_at DESC LIMIT 1[0m
  [1m[35mPhoto Load (0.3ms)[0m  SELECT `photos`.* FROM `photos` WHERE (restaurant_id = 948 and cover = true and status = 1) LIMIT 1
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT `photos`.* FROM `photos` WHERE (restaurant_id = 948 and cover = true and status = 1) LIMIT 1[0m
  [1m[35mPhoto Load (0.7ms)[0m  SELECT `photos`.* FROM `photos` WHERE (restaurant_id = 947 and cover = true and status = 1) LIMIT 1
  [1m[36mPhoto Load (0.3ms)[0m  [1mSELECT `photos`.* FROM `photos` WHERE `photos`.`restaurant_id` = 947 AND `photos`.`status` = 1 ORDER BY restaurant_id ASC, created_at DESC LIMIT 1[0m
  [1m[35mPhoto Load (0.5ms)[0m  SELECT `photos`.* FROM `photos` WHERE (restaurant_id = 946 and cover = true and status = 1) LIMIT 1
  [1m[36mPhoto Load (0.3ms)[0m  [1mSELECT `photos`.* FROM `photos` WHERE `photos`.`restaurant_id` = 946 AND `photos`.`status` = 1 ORDER BY restaurant_id ASC, created_at DESC LIMIT 1[0m
  [1m[35mPhoto Load (0.3ms)[0m  SELECT `photos`.* FROM `photos` WHERE (restaurant_id = 945 and cover = true and status = 1) LIMIT 1
  [1m[36mPhoto Load (0.3ms)[0m  [1mSELECT `photos`.* FROM `photos` WHERE `photos`.`restaurant_id` = 945 AND `photos`.`status` = 1 ORDER BY restaurant_id ASC, created_at DESC LIMIT 1[0m
  [1m[35mPhoto Load (0.3ms)[0m  SELECT `photos`.* FROM `photos` WHERE (restaurant_id = 944 and cover = true and status = 1) LIMIT 1
  [1m[36mPhoto Load (0.3ms)[0m  [1mSELECT `photos`.* FROM `photos` WHERE `photos`.`restaurant_id` = 944 AND `photos`.`status` = 1 ORDER BY restaurant_id ASC, created_at DESC LIMIT 1[0m
  [1m[35mPhoto Load (0.3ms)[0m  SELECT `photos`.* FROM `photos` WHERE (restaurant_id = 943 and cover = true and status = 1) LIMIT 1
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT `photos`.* FROM `photos` WHERE (restaurant_id = 943 and cover = true and status = 1) LIMIT 1[0m
  [1m[35mPhoto Load (0.3ms)[0m  SELECT `photos`.* FROM `photos` WHERE (restaurant_id = 942 and cover = true and status = 1) LIMIT 1
  [1m[36mPhoto Load (0.4ms)[0m  [1mSELECT `photos`.* FROM `photos` WHERE `photos`.`restaurant_id` = 942 AND `photos`.`status` = 1 ORDER BY restaurant_id ASC, created_at DESC LIMIT 1[0m
  [1m[35mCACHE (0.0ms)[0m  SELECT `photos`.* FROM `photos` WHERE (restaurant_id = 942 and cover = true and status = 1) LIMIT 1
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT `photos`.* FROM `photos` WHERE `photos`.`restaurant_id` = 942 AND `photos`.`status` = 1 ORDER BY restaurant_id ASC, created_at DESC LIMIT 1[0m
  [1m[35m (0.3ms)[0m  SELECT COUNT(*) FROM `restaurants` 
  Rendered restaurants/index.html.erb within layouts/admin (110.6ms)
Completed 200 OK in 118ms (Views: 106.6ms | ActiveRecord: 9.5ms)
couldn't find file /Users/kevinmuller/halalgems_backend/public/system/dragonfly/development/2015/02/19/11_39_10_612_P1160545.jpg
couldn't find file /Users/kevinmuller/halalgems_backend/public/system/dragonfly/development/2014/12/12/20_27_10_420_IMG_0918.JPG
couldn't find file /Users/kevinmuller/halalgems_backend/public/system/dragonfly/development/2014/12/04/10_12_47_111_Jumeirah_Zabeel_Saray_Al_Nafoorah_Mezzeh.jpg
couldn't find file /Users/kevinmuller/halalgems_backend/public/system/dragonfly/development/2014/12/04/09_44_21_993_Jumeirah_Zabeel_Saray_Amala_Restaurant.jpg


Started GET "/admin?page=13" for 127.0.0.1 at 2016-01-16 21:51:54 +0100
Processing by RestaurantsController#index as HTML
  Parameters: {"page"=>"13"}
  [1m[36mUser Load (0.3ms)[0m  [1mSELECT `users`.* FROM `users` WHERE `users`.`id` = 1 LIMIT 1[0m
  Rendered shared/_restaurant_manage_tabs.html.erb (0.6ms)
  Rendered restaurants/_condition_fields.html.erb (9.1ms)
  [1m[35mRestaurant Load (2.2ms)[0m  SELECT `restaurants`.* FROM `restaurants` ORDER BY disabled ASC,created_at DESC LIMIT 12 OFFSET 144
  [1m[36mPhoto Load (0.5ms)[0m  [1mSELECT `photos`.* FROM `photos` WHERE (restaurant_id = 866 and cover = true and status = 1) LIMIT 1[0m
  [1m[35mPhoto Load (0.3ms)[0m  SELECT `photos`.* FROM `photos` WHERE `photos`.`restaurant_id` = 866 AND `photos`.`status` = 1 ORDER BY restaurant_id ASC, created_at DESC LIMIT 1
  [1m[36mPhoto Load (0.4ms)[0m  [1mSELECT `photos`.* FROM `photos` WHERE (restaurant_id = 822 and cover = true and status = 1) LIMIT 1[0m
  [1m[35mPhoto Load (0.3ms)[0m  SELECT `photos`.* FROM `photos` WHERE `photos`.`restaurant_id` = 822 AND `photos`.`status` = 1 ORDER BY restaurant_id ASC, created_at DESC LIMIT 1
  [1m[36mPhoto Load (0.4ms)[0m  [1mSELECT `photos`.* FROM `photos` WHERE (restaurant_id = 819 and cover = true and status = 1) LIMIT 1[0m
  [1m[35mPhoto Load (0.3ms)[0m  SELECT `photos`.* FROM `photos` WHERE `photos`.`restaurant_id` = 819 AND `photos`.`status` = 1 ORDER BY restaurant_id ASC, created_at DESC LIMIT 1
  [1m[36mPhoto Load (0.5ms)[0m  [1mSELECT `photos`.* FROM `photos` WHERE (restaurant_id = 813 and cover = true and status = 1) LIMIT 1[0m
  [1m[35mPhoto Load (0.3ms)[0m  SELECT `photos`.* FROM `photos` WHERE `photos`.`restaurant_id` = 813 AND `photos`.`status` = 1 ORDER BY restaurant_id ASC, created_at DESC LIMIT 1
  [1m[36mPhoto Load (0.3ms)[0m  [1mSELECT `photos`.* FROM `photos` WHERE (restaurant_id = 812 and cover = true and status = 1) LIMIT 1[0m
  [1m[35mPhoto Load (0.3ms)[0m  SELECT `photos`.* FROM `photos` WHERE `photos`.`restaurant_id` = 812 AND `photos`.`status` = 1 ORDER BY restaurant_id ASC, created_at DESC LIMIT 1
  [1m[36mPhoto Load (0.3ms)[0m  [1mSELECT `photos`.* FROM `photos` WHERE (restaurant_id = 811 and cover = true and status = 1) LIMIT 1[0m
  [1m[35mPhoto Load (0.3ms)[0m  SELECT `photos`.* FROM `photos` WHERE `photos`.`restaurant_id` = 811 AND `photos`.`status` = 1 ORDER BY restaurant_id ASC, created_at DESC LIMIT 1
  [1m[36mPhoto Load (0.3ms)[0m  [1mSELECT `photos`.* FROM `photos` WHERE (restaurant_id = 796 and cover = true and status = 1) LIMIT 1[0m
  [1m[35mPhoto Load (0.3ms)[0m  SELECT `photos`.* FROM `photos` WHERE `photos`.`restaurant_id` = 796 AND `photos`.`status` = 1 ORDER BY restaurant_id ASC, created_at DESC LIMIT 1
  [1m[36mPhoto Load (0.3ms)[0m  [1mSELECT `photos`.* FROM `photos` WHERE (restaurant_id = 792 and cover = true and status = 1) LIMIT 1[0m
  [1m[35mPhoto Load (0.3ms)[0m  SELECT `photos`.* FROM `photos` WHERE `photos`.`restaurant_id` = 792 AND `photos`.`status` = 1 ORDER BY restaurant_id ASC, created_at DESC LIMIT 1
  [1m[36mPhoto Load (0.8ms)[0m  [1mSELECT `photos`.* FROM `photos` WHERE (restaurant_id = 782 and cover = true and status = 1) LIMIT 1[0m
  [1m[35mPhoto Load (0.4ms)[0m  SELECT `photos`.* FROM `photos` WHERE `photos`.`restaurant_id` = 782 AND `photos`.`status` = 1 ORDER BY restaurant_id ASC, created_at DESC LIMIT 1
  [1m[36mPhoto Load (0.5ms)[0m  [1mSELECT `photos`.* FROM `photos` WHERE (restaurant_id = 754 and cover = true and status = 1) LIMIT 1[0m
  [1m[35mPhoto Load (0.3ms)[0m  SELECT `photos`.* FROM `photos` WHERE `photos`.`restaurant_id` = 754 AND `photos`.`status` = 1 ORDER BY restaurant_id ASC, created_at DESC LIMIT 1
  [1m[36mPhoto Load (0.3ms)[0m  [1mSELECT `photos`.* FROM `photos` WHERE (restaurant_id = 733 and cover = true and status = 1) LIMIT 1[0m
  [1m[35mPhoto Load (0.2ms)[0m  SELECT `photos`.* FROM `photos` WHERE `photos`.`restaurant_id` = 733 AND `photos`.`status` = 1 ORDER BY restaurant_id ASC, created_at DESC LIMIT 1
  [1m[36mPhoto Load (0.3ms)[0m  [1mSELECT `photos`.* FROM `photos` WHERE (restaurant_id = 713 and cover = true and status = 1) LIMIT 1[0m
  [1m[35mPhoto Load (0.3ms)[0m  SELECT `photos`.* FROM `photos` WHERE `photos`.`restaurant_id` = 713 AND `photos`.`status` = 1 ORDER BY restaurant_id ASC, created_at DESC LIMIT 1
  [1m[36m (0.4ms)[0m  [1mSELECT COUNT(*) FROM `restaurants` [0m
  Rendered restaurants/index.html.erb within layouts/admin (116.1ms)
Completed 200 OK in 123ms (Views: 110.1ms | ActiveRecord: 11.4ms)


Started GET "/red-oven/edit" for 127.0.0.1 at 2016-01-16 21:51:58 +0100
Processing by RestaurantsController#edit as HTML
  Parameters: {"id"=>"red-oven"}
  [1m[35mUser Load (0.2ms)[0m  SELECT `users`.* FROM `users` WHERE `users`.`id` = 1 LIMIT 1
  [1m[36mRestaurant Load (1.2ms)[0m  [1mSELECT `restaurants`.* FROM `restaurants` WHERE `restaurants`.`slug` = 'red-oven' LIMIT 1[0m
  [1m[35mSchedule Load (4.1ms)[0m  SELECT `schedules`.* FROM `schedules` WHERE `schedules`.`restaurant_id` = 754 ORDER BY day_of_week ASC
  [1m[36m (2.6ms)[0m  [1mSELECT COUNT(*) FROM `schedules` WHERE `schedules`.`restaurant_id` = 754 AND (schedule_type = 'daily')[0m
  [1m[35m (3.9ms)[0m  SELECT COUNT(*) FROM `schedules` WHERE `schedules`.`restaurant_id` = 754 AND (schedule_type = 'evening')
  [1m[36mPhoto Load (0.4ms)[0m  [1mSELECT `photos`.* FROM `photos` WHERE `photos`.`restaurant_id` = 754[0m
  [1m[35mFilter Load (1.2ms)[0m  SELECT `filters`.* FROM `filters` INNER JOIN `filters_restaurants` ON `filters`.`id` = `filters_restaurants`.`filter_id` WHERE `filters_restaurants`.`restaurant_id` = 754 AND `filters`.`code` = 'cuisine'
  [1m[36m (1.3ms)[0m  [1mSELECT `filters`.id FROM `filters` INNER JOIN `filters_restaurants` ON `filters`.`id` = `filters_restaurants`.`filter_id` WHERE `filters_restaurants`.`restaurant_id` = 754[0m
  [1m[35mFilterType Load (0.2ms)[0m  SELECT `filter_types`.* FROM `filter_types` WHERE `filter_types`.`code` = 'hal_status' LIMIT 1
  [1m[36mFilterType Load (0.1ms)[0m  [1mSELECT `filter_types`.* FROM `filter_types` WHERE `filter_types`.`code` = 'price' LIMIT 1[0m
  [1m[35mFilterType Load (0.2ms)[0m  SELECT `filter_types`.* FROM `filter_types` WHERE `filter_types`.`code` = 'cuisine' LIMIT 1
  [1m[36mFilterType Load (0.2ms)[0m  [1mSELECT `filter_types`.* FROM `filter_types` WHERE `filter_types`.`code` = 'alcohol' LIMIT 1[0m
  [1m[35mFilterType Load (0.2ms)[0m  SELECT `filter_types`.* FROM `filter_types` WHERE `filter_types`.`code` = 'features' LIMIT 1
  Rendered restaurants/_googlemap.html.erb (0.1ms)
  [1m[36mFilter Load (0.4ms)[0m  [1mSELECT `filters`.* FROM `filters` WHERE `filters`.`filter_type_id` = 8[0m
  [1m[35mFilter Load (0.4ms)[0m  SELECT `filters`.* FROM `filters` WHERE `filters`.`filter_type_id` = 1 ORDER BY name ASC
  [1m[36mFilter Load (0.3ms)[0m  [1mSELECT `filters`.* FROM `filters` WHERE `filters`.`filter_type_id` = 4[0m
  [1m[35mFilter Load (0.2ms)[0m  SELECT `filters`.* FROM `filters` WHERE `filters`.`filter_type_id` = 6
  [1m[36mFilter Load (0.3ms)[0m  [1mSELECT `filters`.* FROM `filters` WHERE `filters`.`filter_type_id` = 11 AND (code != 'offer')[0m
  Rendered restaurants/_admin_form.html.erb (124.1ms)
  [1m[35mMenu Load (0.4ms)[0m  SELECT `menus`.* FROM `menus` WHERE `menus`.`restaurant_id` = 754
  Rendered restaurants/_upload_menu.html.erb (5.6ms)
  Rendered restaurants/_upload_photos.html.erb (1.8ms)
  Rendered restaurants/edit.html.erb within layouts/admin (135.4ms)
Completed 200 OK in 185ms (Views: 143.1ms | ActiveRecord: 17.6ms)


Started GET "/photos?r_id=754" for 127.0.0.1 at 2016-01-16 21:51:59 +0100
Processing by PhotosController#index as JSON
  Parameters: {"r_id"=>"754"}
  [1m[36mRestaurant Load (1.8ms)[0m  [1mSELECT `restaurants`.* FROM `restaurants` WHERE `restaurants`.`slug` = '754' LIMIT 1[0m
  [1m[35mRestaurant Load (0.2ms)[0m  SELECT `restaurants`.* FROM `restaurants` WHERE `restaurants`.`id` = 754 LIMIT 1
  [1m[36mPhoto Load (0.4ms)[0m  [1mSELECT `photos`.* FROM `photos` WHERE `photos`.`restaurant_id` = 754[0m
Completed 200 OK in 7ms (Views: 0.1ms | ActiveRecord: 2.4ms)


Started GET "/admin/collections" for 127.0.0.1 at 2016-01-16 21:52:26 +0100
Processing by CollectionsController#index as HTML
  Rendered shared/_restaurant_manage_tabs.html.erb (1.0ms)
  [1m[35mCollection Load (0.4ms)[0m  SELECT `collections`.* FROM `collections` ORDER BY name ASC, created_at DESC LIMIT 12 OFFSET 0
  [1m[36m (0.2ms)[0m  [1mSELECT COUNT(*) FROM `collections` [0m
  Rendered collections/index.erb within layouts/admin (13.3ms)
  [1m[35mUser Load (0.4ms)[0m  SELECT `users`.* FROM `users` WHERE `users`.`id` = 1 LIMIT 1
Completed 200 OK in 26ms (Views: 23.6ms | ActiveRecord: 0.9ms)


Started GET "/restaurants" for 127.0.0.1 at 2016-01-16 21:52:42 +0100
Processing by RestaurantsController#index as HTML
  [1m[36mUser Load (0.3ms)[0m  [1mSELECT `users`.* FROM `users` WHERE `users`.`id` = 1 LIMIT 1[0m
  Rendered shared/_restaurant_manage_tabs.html.erb (0.5ms)
  Rendered restaurants/_condition_fields.html.erb (8.3ms)
  [1m[35mRestaurant Load (0.8ms)[0m  SELECT `restaurants`.* FROM `restaurants` ORDER BY disabled ASC,created_at DESC LIMIT 12 OFFSET 0
  [1m[36mPhoto Load (0.4ms)[0m  [1mSELECT `photos`.* FROM `photos` WHERE (restaurant_id = 1057 and cover = true and status = 1) LIMIT 1[0m
  [1m[35mPhoto Load (0.3ms)[0m  SELECT `photos`.* FROM `photos` WHERE `photos`.`restaurant_id` = 1057 AND `photos`.`status` = 1 ORDER BY restaurant_id ASC, created_at DESC LIMIT 1
  [1m[36mPhoto Load (0.4ms)[0m  [1mSELECT `photos`.* FROM `photos` WHERE (restaurant_id = 903 and cover = true and status = 1) LIMIT 1[0m
  [1m[35mPhoto Load (0.3ms)[0m  SELECT `photos`.* FROM `photos` WHERE `photos`.`restaurant_id` = 903 AND `photos`.`status` = 1 ORDER BY restaurant_id ASC, created_at DESC LIMIT 1
  [1m[36mPhoto Load (0.3ms)[0m  [1mSELECT `photos`.* FROM `photos` WHERE (restaurant_id = 876 and cover = true and status = 1) LIMIT 1[0m
  [1m[35mPhoto Load (0.3ms)[0m  SELECT `photos`.* FROM `photos` WHERE `photos`.`restaurant_id` = 876 AND `photos`.`status` = 1 ORDER BY restaurant_id ASC, created_at DESC LIMIT 1
  [1m[36mPhoto Load (0.3ms)[0m  [1mSELECT `photos`.* FROM `photos` WHERE (restaurant_id = 851 and cover = true and status = 1) LIMIT 1[0m
  [1m[35mPhoto Load (0.3ms)[0m  SELECT `photos`.* FROM `photos` WHERE `photos`.`restaurant_id` = 851 AND `photos`.`status` = 1 ORDER BY restaurant_id ASC, created_at DESC LIMIT 1
  [1m[36mPhoto Load (0.3ms)[0m  [1mSELECT `photos`.* FROM `photos` WHERE (restaurant_id = 693 and cover = true and status = 1) LIMIT 1[0m
  [1m[35mPhoto Load (0.3ms)[0m  SELECT `photos`.* FROM `photos` WHERE `photos`.`restaurant_id` = 693 AND `photos`.`status` = 1 ORDER BY restaurant_id ASC, created_at DESC LIMIT 1
  [1m[36mPhoto Load (0.3ms)[0m  [1mSELECT `photos`.* FROM `photos` WHERE (restaurant_id = 686 and cover = true and status = 1) LIMIT 1[0m
  [1m[35mPhoto Load (0.3ms)[0m  SELECT `photos`.* FROM `photos` WHERE `photos`.`restaurant_id` = 686 AND `photos`.`status` = 1 ORDER BY restaurant_id ASC, created_at DESC LIMIT 1
  [1m[36mPhoto Load (0.3ms)[0m  [1mSELECT `photos`.* FROM `photos` WHERE (restaurant_id = 669 and cover = true and status = 1) LIMIT 1[0m
  [1m[35mPhoto Load (0.3ms)[0m  SELECT `photos`.* FROM `photos` WHERE `photos`.`restaurant_id` = 669 AND `photos`.`status` = 1 ORDER BY restaurant_id ASC, created_at DESC LIMIT 1
  [1m[36mPhoto Load (0.3ms)[0m  [1mSELECT `photos`.* FROM `photos` WHERE (restaurant_id = 251 and cover = true and status = 1) LIMIT 1[0m
  [1m[35mPhoto Load (0.3ms)[0m  SELECT `photos`.* FROM `photos` WHERE `photos`.`restaurant_id` = 251 AND `photos`.`status` = 1 ORDER BY restaurant_id ASC, created_at DESC LIMIT 1
  [1m[36mPhoto Load (0.3ms)[0m  [1mSELECT `photos`.* FROM `photos` WHERE (restaurant_id = 250 and cover = true and status = 1) LIMIT 1[0m
  [1m[35mPhoto Load (0.3ms)[0m  SELECT `photos`.* FROM `photos` WHERE `photos`.`restaurant_id` = 250 AND `photos`.`status` = 1 ORDER BY restaurant_id ASC, created_at DESC LIMIT 1
  [1m[36mPhoto Load (0.4ms)[0m  [1mSELECT `photos`.* FROM `photos` WHERE (restaurant_id = 237 and cover = true and status = 1) LIMIT 1[0m
  [1m[35mPhoto Load (0.4ms)[0m  SELECT `photos`.* FROM `photos` WHERE `photos`.`restaurant_id` = 237 AND `photos`.`status` = 1 ORDER BY restaurant_id ASC, created_at DESC LIMIT 1
  [1m[36mPhoto Load (0.4ms)[0m  [1mSELECT `photos`.* FROM `photos` WHERE (restaurant_id = 231 and cover = true and status = 1) LIMIT 1[0m
  [1m[35mPhoto Load (0.3ms)[0m  SELECT `photos`.* FROM `photos` WHERE `photos`.`restaurant_id` = 231 AND `photos`.`status` = 1 ORDER BY restaurant_id ASC, created_at DESC LIMIT 1
  [1m[36mPhoto Load (0.4ms)[0m  [1mSELECT `photos`.* FROM `photos` WHERE (restaurant_id = 222 and cover = true and status = 1) LIMIT 1[0m
  [1m[35mPhoto Load (0.3ms)[0m  SELECT `photos`.* FROM `photos` WHERE `photos`.`restaurant_id` = 222 AND `photos`.`status` = 1 ORDER BY restaurant_id ASC, created_at DESC LIMIT 1
  [1m[36m (0.3ms)[0m  [1mSELECT COUNT(*) FROM `restaurants` [0m
  Rendered restaurants/index.html.erb within layouts/admin (81.4ms)
Completed 200 OK in 89ms (Views: 77.8ms | ActiveRecord: 9.2ms)


Started GET "/test/edit" for 127.0.0.1 at 2016-01-16 21:52:44 +0100
Processing by RestaurantsController#edit as HTML
  Parameters: {"id"=>"test"}
  [1m[35mUser Load (0.2ms)[0m  SELECT `users`.* FROM `users` WHERE `users`.`id` = 1 LIMIT 1
  [1m[36mRestaurant Load (1.6ms)[0m  [1mSELECT `restaurants`.* FROM `restaurants` WHERE `restaurants`.`slug` = 'test' LIMIT 1[0m
  [1m[35mSchedule Load (4.4ms)[0m  SELECT `schedules`.* FROM `schedules` WHERE `schedules`.`restaurant_id` = 1057 ORDER BY day_of_week ASC
  [1m[36mPhoto Load (0.4ms)[0m  [1mSELECT `photos`.* FROM `photos` WHERE `photos`.`restaurant_id` = 1057[0m
  [1m[35mFilter Load (1.3ms)[0m  SELECT `filters`.* FROM `filters` INNER JOIN `filters_restaurants` ON `filters`.`id` = `filters_restaurants`.`filter_id` WHERE `filters_restaurants`.`restaurant_id` = 1057 AND `filters`.`code` = 'cuisine'
  [1m[36m (1.5ms)[0m  [1mSELECT `filters`.id FROM `filters` INNER JOIN `filters_restaurants` ON `filters`.`id` = `filters_restaurants`.`filter_id` WHERE `filters_restaurants`.`restaurant_id` = 1057[0m
  [1m[35mFilterType Load (0.2ms)[0m  SELECT `filter_types`.* FROM `filter_types` WHERE `filter_types`.`code` = 'hal_status' LIMIT 1
  [1m[36mFilterType Load (0.2ms)[0m  [1mSELECT `filter_types`.* FROM `filter_types` WHERE `filter_types`.`code` = 'price' LIMIT 1[0m
  [1m[35mFilterType Load (0.1ms)[0m  SELECT `filter_types`.* FROM `filter_types` WHERE `filter_types`.`code` = 'cuisine' LIMIT 1
  [1m[36mFilterType Load (0.1ms)[0m  [1mSELECT `filter_types`.* FROM `filter_types` WHERE `filter_types`.`code` = 'alcohol' LIMIT 1[0m
  [1m[35mFilterType Load (0.1ms)[0m  SELECT `filter_types`.* FROM `filter_types` WHERE `filter_types`.`code` = 'features' LIMIT 1
  Rendered restaurants/_googlemap.html.erb (0.0ms)
  [1m[36mFilter Load (0.6ms)[0m  [1mSELECT `filters`.* FROM `filters` WHERE `filters`.`filter_type_id` = 8[0m
  [1m[35mFilter Load (0.3ms)[0m  SELECT `filters`.* FROM `filters` WHERE `filters`.`filter_type_id` = 1 ORDER BY name ASC
  [1m[36mFilter Load (0.3ms)[0m  [1mSELECT `filters`.* FROM `filters` WHERE `filters`.`filter_type_id` = 4[0m
  [1m[35mFilter Load (0.2ms)[0m  SELECT `filters`.* FROM `filters` WHERE `filters`.`filter_type_id` = 6
  [1m[36mFilter Load (0.2ms)[0m  [1mSELECT `filters`.* FROM `filters` WHERE `filters`.`filter_type_id` = 11 AND (code != 'offer')[0m
  Rendered restaurants/_admin_form.html.erb (70.6ms)
  [1m[35mMenu Load (0.3ms)[0m  SELECT `menus`.* FROM `menus` WHERE `menus`.`restaurant_id` = 1057
  Rendered restaurants/_upload_menu.html.erb (5.1ms)
  Rendered restaurants/_upload_photos.html.erb (1.0ms)
  Rendered restaurants/edit.html.erb within layouts/admin (80.3ms)
Completed 200 OK in 109ms (Views: 85.4ms | ActiveRecord: 12.2ms)


Started GET "/photos?r_id=1057" for 127.0.0.1 at 2016-01-16 21:52:46 +0100
Processing by PhotosController#index as JSON
  Parameters: {"r_id"=>"1057"}
  [1m[36mRestaurant Load (1.4ms)[0m  [1mSELECT `restaurants`.* FROM `restaurants` WHERE `restaurants`.`slug` = '1057' LIMIT 1[0m
  [1m[35mRestaurant Load (0.2ms)[0m  SELECT `restaurants`.* FROM `restaurants` WHERE `restaurants`.`id` = 1057 LIMIT 1
  [1m[36mPhoto Load (0.3ms)[0m  [1mSELECT `photos`.* FROM `photos` WHERE `photos`.`restaurant_id` = 1057[0m
Completed 200 OK in 5ms (Views: 0.1ms | ActiveRecord: 1.9ms)


Started POST "/photos" for 127.0.0.1 at 2016-01-16 21:52:56 +0100
Processing by PhotosController#create as JSON
  Parameters: {"utf8"=>"âœ“", "authenticity_token"=>"ZhR8a2fYr/EQcBrBVm2c17tt7AHk64f/gvsZ5fOllxc=", "photo"=>{"restaurant_id"=>"1057", "user_id"=>"1", "image"=>[#<ActionDispatch::Http::UploadedFile:0x007feb08a03b60 @original_filename="michelin.png", @content_type="image/png", @headers="Content-Disposition: form-data; name=\"photo[image][]\"; filename=\"michelin.png\"\r\nContent-Type: image/png\r\n", @tempfile=#<Tempfile:/var/folders/rf/q4l8n5k56pnbjgkdtzrhq_w00000gn/T/RackMultipart20160116-28026-mppl70>>]}}
  [1m[35mRestaurant Load (1.5ms)[0m  SELECT `restaurants`.* FROM `restaurants` WHERE `restaurants`.`slug` = '1057' LIMIT 1
  [1m[36mRestaurant Load (0.2ms)[0m  [1mSELECT `restaurants`.* FROM `restaurants` WHERE `restaurants`.`id` = 1057 LIMIT 1[0m
  [1m[35m (0.1ms)[0m  BEGIN
  [1m[36mSQL (0.4ms)[0m  [1mINSERT INTO `photos` (`cover`, `created_at`, `image_name`, `image_uid`, `restaurant_id`, `restaurant_temp_id`, `status`, `text_content`, `text_hyperlink`, `text_title`, `updated_at`, `user_id`) VALUES (0, '2016-01-16 20:52:56', 'michelin.png', '2016/01/16/21_52_56_140_michelin.png', 1057, NULL, 0, NULL, NULL, NULL, '2016-01-16 20:52:56', 1)[0m
  [1m[35mRestaurant Load (0.3ms)[0m  SELECT `restaurants`.* FROM `restaurants` WHERE `restaurants`.`id` = 1057 LIMIT 1
  [1m[36mFilter Load (1.3ms)[0m  [1mSELECT `filters`.* FROM `filters` INNER JOIN `filters_restaurants` ON `filters`.`id` = `filters_restaurants`.`filter_id` WHERE `filters_restaurants`.`restaurant_id` = 1057[0m
  [1m[35mFilterType Load (2.3ms)[0m  SELECT `filter_types`.* FROM `filter_types` INNER JOIN `filter_types_restaurants` ON `filter_types`.`id` = `filter_types_restaurants`.`filter_type_id` WHERE `filter_types_restaurants`.`restaurant_id` = 1057
  [1m[36m (0.3ms)[0m  [1mUPDATE `restaurants` SET `request_approve_photo` = 1, `updated_at` = '2016-01-16 20:52:56' WHERE `restaurants`.`id` = 1057[0m
  [1m[35m (5.3ms)[0m  COMMIT
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35mFilter Load (1.7ms)[0m  SELECT `filters`.* FROM `filters` INNER JOIN `filters_restaurants` ON `filters`.`id` = `filters_restaurants`.`filter_id` WHERE `filters_restaurants`.`restaurant_id` = 1057
  [1m[36mFilterType Load (1.4ms)[0m  [1mSELECT `filter_types`.* FROM `filter_types` INNER JOIN `filter_types_restaurants` ON `filter_types`.`id` = `filter_types_restaurants`.`filter_type_id` WHERE `filter_types_restaurants`.`restaurant_id` = 1057[0m
  [1m[35m (0.2ms)[0m  UPDATE `restaurants` SET `updated_at` = '2016-01-16 20:52:56' WHERE `restaurants`.`id` = 1057
  [1m[36m (0.5ms)[0m  [1mCOMMIT[0m
  [1m[35mUser Load (0.7ms)[0m  SELECT `users`.* FROM `users` WHERE `users`.`id` = 1 LIMIT 1
  [1m[36m (1.9ms)[0m  [1mBEGIN[0m
  [1m[35m (0.3ms)[0m  UPDATE `photos` SET `status` = 1, `updated_at` = '2016-01-16 20:52:56' WHERE `photos`.`id` = 535
  [1m[36m (0.3ms)[0m  [1mUPDATE `restaurants` SET `request_approve_photo` = 0, `updated_at` = '2016-01-16 20:52:56' WHERE `restaurants`.`id` = 1057[0m
  [1m[35m (0.5ms)[0m  COMMIT
Completed 200 OK in 89ms (Views: 0.1ms | ActiveRecord: 20.5ms)


Started POST "/photos" for 127.0.0.1 at 2016-01-16 21:52:56 +0100
Processing by PhotosController#create as JSON
  Parameters: {"utf8"=>"âœ“", "authenticity_token"=>"ZhR8a2fYr/EQcBrBVm2c17tt7AHk64f/gvsZ5fOllxc=", "photo"=>{"restaurant_id"=>"1057", "user_id"=>"1", "image"=>[#<ActionDispatch::Http::UploadedFile:0x007feb051a8360 @original_filename="persian.png", @content_type="image/png", @headers="Content-Disposition: form-data; name=\"photo[image][]\"; filename=\"persian.png\"\r\nContent-Type: image/png\r\n", @tempfile=#<Tempfile:/var/folders/rf/q4l8n5k56pnbjgkdtzrhq_w00000gn/T/RackMultipart20160116-28026-ziy54d>>]}}
  [1m[36mRestaurant Load (3.6ms)[0m  [1mSELECT `restaurants`.* FROM `restaurants` WHERE `restaurants`.`slug` = '1057' LIMIT 1[0m
  [1m[35mRestaurant Load (0.9ms)[0m  SELECT `restaurants`.* FROM `restaurants` WHERE `restaurants`.`id` = 1057 LIMIT 1
  [1m[36m (42.9ms)[0m  [1mBEGIN[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO `photos` (`cover`, `created_at`, `image_name`, `image_uid`, `restaurant_id`, `restaurant_temp_id`, `status`, `text_content`, `text_hyperlink`, `text_title`, `updated_at`, `user_id`) VALUES (0, '2016-01-16 20:52:56', 'persian.png', '2016/01/16/21_52_56_278_persian.png', 1057, NULL, 0, NULL, NULL, NULL, '2016-01-16 20:52:56', 1)
  [1m[36mRestaurant Load (0.3ms)[0m  [1mSELECT `restaurants`.* FROM `restaurants` WHERE `restaurants`.`id` = 1057 LIMIT 1[0m
  [1m[35mFilter Load (1.8ms)[0m  SELECT `filters`.* FROM `filters` INNER JOIN `filters_restaurants` ON `filters`.`id` = `filters_restaurants`.`filter_id` WHERE `filters_restaurants`.`restaurant_id` = 1057
  [1m[36mFilterType Load (1.3ms)[0m  [1mSELECT `filter_types`.* FROM `filter_types` INNER JOIN `filter_types_restaurants` ON `filter_types`.`id` = `filter_types_restaurants`.`filter_type_id` WHERE `filter_types_restaurants`.`restaurant_id` = 1057[0m
  [1m[35m (0.3ms)[0m  UPDATE `restaurants` SET `request_approve_photo` = 1, `updated_at` = '2016-01-16 20:52:56' WHERE `restaurants`.`id` = 1057
  [1m[36m (7.6ms)[0m  [1mCOMMIT[0m
  [1m[35m (0.1ms)[0m  BEGIN
  [1m[36mFilter Load (1.6ms)[0m  [1mSELECT `filters`.* FROM `filters` INNER JOIN `filters_restaurants` ON `filters`.`id` = `filters_restaurants`.`filter_id` WHERE `filters_restaurants`.`restaurant_id` = 1057[0m
  [1m[35mFilterType Load (1.4ms)[0m  SELECT `filter_types`.* FROM `filter_types` INNER JOIN `filter_types_restaurants` ON `filter_types`.`id` = `filter_types_restaurants`.`filter_type_id` WHERE `filter_types_restaurants`.`restaurant_id` = 1057
  [1m[36m (0.3ms)[0m  [1mUPDATE `restaurants` SET `updated_at` = '2016-01-16 20:52:56' WHERE `restaurants`.`id` = 1057[0m
  [1m[35m (7.5ms)[0m  COMMIT
  [1m[36mUser Load (0.5ms)[0m  [1mSELECT `users`.* FROM `users` WHERE `users`.`id` = 1 LIMIT 1[0m
  [1m[35m (0.1ms)[0m  BEGIN
  [1m[36m (0.2ms)[0m  [1mUPDATE `photos` SET `status` = 1, `updated_at` = '2016-01-16 20:52:56' WHERE `photos`.`id` = 536[0m
  [1m[35m (0.2ms)[0m  UPDATE `restaurants` SET `request_approve_photo` = 0, `updated_at` = '2016-01-16 20:52:56' WHERE `restaurants`.`id` = 1057
  [1m[36m (15.7ms)[0m  [1mCOMMIT[0m
Completed 200 OK in 120ms (Views: 0.1ms | ActiveRecord: 86.5ms)


Started GET "/admin/restaurants" for 127.0.0.1 at 2016-01-16 22:00:26 +0100
Processing by RestaurantsController#index as HTML
  [1m[35mUser Load (0.3ms)[0m  SELECT `users`.* FROM `users` WHERE `users`.`id` = 1 LIMIT 1
  Rendered shared/_restaurant_manage_tabs.html.erb (1.0ms)
  Rendered restaurants/_condition_fields.html.erb (28.1ms)
  [1m[36mRestaurant Load (0.9ms)[0m  [1mSELECT `restaurants`.* FROM `restaurants` ORDER BY disabled ASC,created_at DESC LIMIT 12 OFFSET 0[0m
  [1m[35mPhoto Load (0.5ms)[0m  SELECT `photos`.* FROM `photos` WHERE (restaurant_id = 1057 and cover = true and status = 1) LIMIT 1
  [1m[36mPhoto Load (0.4ms)[0m  [1mSELECT `photos`.* FROM `photos` WHERE `photos`.`restaurant_id` = 1057 AND `photos`.`status` = 1 ORDER BY restaurant_id ASC, created_at DESC LIMIT 1[0m
  [1m[35mCACHE (0.0ms)[0m  SELECT `photos`.* FROM `photos` WHERE (restaurant_id = 1057 and cover = true and status = 1) LIMIT 1
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT `photos`.* FROM `photos` WHERE `photos`.`restaurant_id` = 1057 AND `photos`.`status` = 1 ORDER BY restaurant_id ASC, created_at DESC LIMIT 1[0m
  [1m[35mPhoto Load (0.5ms)[0m  SELECT `photos`.* FROM `photos` WHERE (restaurant_id = 903 and cover = true and status = 1) LIMIT 1
  [1m[36mPhoto Load (0.4ms)[0m  [1mSELECT `photos`.* FROM `photos` WHERE `photos`.`restaurant_id` = 903 AND `photos`.`status` = 1 ORDER BY restaurant_id ASC, created_at DESC LIMIT 1[0m
  [1m[35mPhoto Load (0.6ms)[0m  SELECT `photos`.* FROM `photos` WHERE (restaurant_id = 876 and cover = true and status = 1) LIMIT 1
  [1m[36mPhoto Load (0.3ms)[0m  [1mSELECT `photos`.* FROM `photos` WHERE `photos`.`restaurant_id` = 876 AND `photos`.`status` = 1 ORDER BY restaurant_id ASC, created_at DESC LIMIT 1[0m
  [1m[35mPhoto Load (3.2ms)[0m  SELECT `photos`.* FROM `photos` WHERE (restaurant_id = 851 and cover = true and status = 1) LIMIT 1
  [1m[36mPhoto Load (0.4ms)[0m  [1mSELECT `photos`.* FROM `photos` WHERE `photos`.`restaurant_id` = 851 AND `photos`.`status` = 1 ORDER BY restaurant_id ASC, created_at DESC LIMIT 1[0m
  [1m[35mPhoto Load (0.4ms)[0m  SELECT `photos`.* FROM `photos` WHERE (restaurant_id = 693 and cover = true and status = 1) LIMIT 1
  [1m[36mPhoto Load (0.5ms)[0m  [1mSELECT `photos`.* FROM `photos` WHERE `photos`.`restaurant_id` = 693 AND `photos`.`status` = 1 ORDER BY restaurant_id ASC, created_at DESC LIMIT 1[0m
  [1m[35mPhoto Load (0.4ms)[0m  SELECT `photos`.* FROM `photos` WHERE (restaurant_id = 686 and cover = true and status = 1) LIMIT 1
  [1m[36mPhoto Load (0.3ms)[0m  [1mSELECT `photos`.* FROM `photos` WHERE `photos`.`restaurant_id` = 686 AND `photos`.`status` = 1 ORDER BY restaurant_id ASC, created_at DESC LIMIT 1[0m
  [1m[35mPhoto Load (0.3ms)[0m  SELECT `photos`.* FROM `photos` WHERE (restaurant_id = 669 and cover = true and status = 1) LIMIT 1
  [1m[36mPhoto Load (0.4ms)[0m  [1mSELECT `photos`.* FROM `photos` WHERE `photos`.`restaurant_id` = 669 AND `photos`.`status` = 1 ORDER BY restaurant_id ASC, created_at DESC LIMIT 1[0m
  [1m[35mPhoto Load (0.4ms)[0m  SELECT `photos`.* FROM `photos` WHERE (restaurant_id = 251 and cover = true and status = 1) LIMIT 1
  [1m[36mPhoto Load (0.3ms)[0m  [1mSELECT `photos`.* FROM `photos` WHERE `photos`.`restaurant_id` = 251 AND `photos`.`status` = 1 ORDER BY restaurant_id ASC, created_at DESC LIMIT 1[0m
  [1m[35mPhoto Load (0.4ms)[0m  SELECT `photos`.* FROM `photos` WHERE (restaurant_id = 250 and cover = true and status = 1) LIMIT 1
  [1m[36mPhoto Load (0.3ms)[0m  [1mSELECT `photos`.* FROM `photos` WHERE `photos`.`restaurant_id` = 250 AND `photos`.`status` = 1 ORDER BY restaurant_id ASC, created_at DESC LIMIT 1[0m
  [1m[35mPhoto Load (0.3ms)[0m  SELECT `photos`.* FROM `photos` WHERE (restaurant_id = 237 and cover = true and status = 1) LIMIT 1
  [1m[36mPhoto Load (0.3ms)[0m  [1mSELECT `photos`.* FROM `photos` WHERE `photos`.`restaurant_id` = 237 AND `photos`.`status` = 1 ORDER BY restaurant_id ASC, created_at DESC LIMIT 1[0m
  [1m[35mPhoto Load (0.3ms)[0m  SELECT `photos`.* FROM `photos` WHERE (restaurant_id = 231 and cover = true and status = 1) LIMIT 1
  [1m[36mPhoto Load (0.3ms)[0m  [1mSELECT `photos`.* FROM `photos` WHERE `photos`.`restaurant_id` = 231 AND `photos`.`status` = 1 ORDER BY restaurant_id ASC, created_at DESC LIMIT 1[0m
  [1m[35mPhoto Load (0.3ms)[0m  SELECT `photos`.* FROM `photos` WHERE (restaurant_id = 222 and cover = true and status = 1) LIMIT 1
  [1m[36mPhoto Load (0.4ms)[0m  [1mSELECT `photos`.* FROM `photos` WHERE `photos`.`restaurant_id` = 222 AND `photos`.`status` = 1 ORDER BY restaurant_id ASC, created_at DESC LIMIT 1[0m
  [1m[35m (0.7ms)[0m  SELECT COUNT(*) FROM `restaurants` 
  Rendered restaurants/index.html.erb within layouts/admin (137.4ms)
Completed 200 OK in 179ms (Views: 162.4ms | ActiveRecord: 13.5ms)


Started GET "/admin/collections/admin_new_collection" for 127.0.0.1 at 2016-01-16 22:00:30 +0100
Processing by CollectionsController#admin_new_collection as HTML
  [1m[36mUser Load (0.4ms)[0m  [1mSELECT `users`.* FROM `users` WHERE `users`.`id` = 1 LIMIT 1[0m
ERROR: compiling _app_views_collections__collection_form_html_erb___2982141954333662942_70323733996120 RAISED /Users/kevinmuller/halalgems_backend/app/views/collections/_collection_form.html.erb:10: syntax error, unexpected ':', expecting ')'
....file_field :image_name, :name: 'collection_images[image_nam...
...                               ^
/Users/kevinmuller/halalgems_backend/app/views/collections/_collection_form.html.erb:10: syntax error, unexpected ',', expecting ')'
...collection_images[image_name]', :multiple => false , class: ...
...                               ^
/Users/kevinmuller/halalgems_backend/app/views/collections/_collection_form.html.erb:10: Can't assign to false
...ge_name]', :multiple => false , class: 'form-control');@outp...
...                               ^
Function body:           def _app_views_collections__collection_form_html_erb___2982141954333662942_70323733996120(local_assigns, output_buffer)
            _old_virtual_path, @virtual_path = @virtual_path, "collections/_collection_form";_old_output_buffer = @output_buffer;collection_form = local_assigns[:collection_form];;@output_buffer = output_buffer || ActionView::OutputBuffer.new;@output_buffer.safe_concat('
<div class="form_add_new_collection">
  ');@output_buffer.append=  simple_form_for(@collection, wrapper: 'collection', :multipart => true, :validate => true) do |f| @output_buffer.safe_concat('
');@output_buffer.safe_concat('    <div class="row">
      <div class=\'col-md-4\'>
        ');@output_buffer.append= ( hidden_field_tag 'admin', true );@output_buffer.safe_concat('
');@output_buffer.safe_concat('        ');@output_buffer.append= ( f.input :name, placeholder: 'Name', input_html: { class: 'form-control' } );@output_buffer.safe_concat('
');@output_buffer.safe_concat('        ');@output_buffer.append= ( f.input :description, placeholder: 'Description', input_html: { class: 'form-control' });@output_buffer.safe_concat('
');@output_buffer.safe_concat('        ');@output_buffer.append= ( f.label :image_name, 'Choose image', class: 'btn btn-default mg-bt-10 border-radius-5 form-control label_for_choose_menu' );@output_buffer.safe_concat('
');@output_buffer.safe_concat('        ');@output_buffer.append= ( f.file_field :image_name, :name: 'collection_images[image_name]', :multiple => false , class: 'form-control');@output_buffer.safe_concat('
');@output_buffer.safe_concat('        <label class=\'hide collection-image-error\'> ');@output_buffer.append= ( t('collections.please_choose_image') );@output_buffer.safe_concat(' </label>
      </div>
    </div>
    <div class="backend">
      <button id=\'submit_collection\' class="btn btn-submit" type="submit">
        ');@output_buffer.append= ( t('layout.submit') );@output_buffer.safe_concat('
');@output_buffer.safe_concat('      </button>
    </div>
');   end 
@output_buffer.safe_concat('</div>

');@output_buffer.to_s
          ensure
            @virtual_path, @output_buffer = _old_virtual_path, _old_output_buffer
          end

Backtrace: /Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_view/template.rb:297:in `module_eval'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_view/template.rb:297:in `compile'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_view/template.rb:244:in `block in compile!'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_view/template.rb:232:in `synchronize'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_view/template.rb:232:in `compile!'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_view/template.rb:144:in `block in render'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/activesupport-3.2.8/lib/active_support/notifications.rb:125:in `instrument'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_view/template.rb:143:in `render'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_view/renderer/partial_renderer.rb:265:in `render_partial'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_view/renderer/partial_renderer.rb:238:in `block in render'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_view/renderer/abstract_renderer.rb:38:in `block in instrument'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/activesupport-3.2.8/lib/active_support/notifications.rb:123:in `block in instrument'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/activesupport-3.2.8/lib/active_support/notifications/instrumenter.rb:20:in `instrument'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/activesupport-3.2.8/lib/active_support/notifications.rb:123:in `instrument'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_view/renderer/abstract_renderer.rb:38:in `instrument'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/newrelic_rpm-3.7.3.204/lib/new_relic/agent/instrumentation/rails3/action_controller.rb:175:in `block in instrument_with_newrelic'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/newrelic_rpm-3.7.3.204/lib/new_relic/agent/method_tracer.rb:281:in `trace_execution_scoped'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/newrelic_rpm-3.7.3.204/lib/new_relic/agent/instrumentation/rails3/action_controller.rb:174:in `instrument_with_newrelic'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_view/renderer/partial_renderer.rb:237:in `render'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_view/renderer/renderer.rb:41:in `render_partial'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_view/helpers/rendering_helper.rb:27:in `render'
/Users/kevinmuller/halalgems_backend/app/views/collections/admin_new_collection.html.erb:15:in `_app_views_collections_admin_new_collection_html_erb___1987632417071435961_70323704917400'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_view/template.rb:145:in `block in render'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/activesupport-3.2.8/lib/active_support/notifications.rb:125:in `instrument'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_view/template.rb:143:in `render'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_view/renderer/template_renderer.rb:47:in `block (2 levels) in render_template'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_view/renderer/abstract_renderer.rb:38:in `block in instrument'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/activesupport-3.2.8/lib/active_support/notifications.rb:123:in `block in instrument'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/activesupport-3.2.8/lib/active_support/notifications/instrumenter.rb:20:in `instrument'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/activesupport-3.2.8/lib/active_support/notifications.rb:123:in `instrument'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_view/renderer/abstract_renderer.rb:38:in `instrument'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_view/renderer/template_renderer.rb:46:in `block in render_template'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_view/renderer/template_renderer.rb:54:in `render_with_layout'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_view/renderer/template_renderer.rb:45:in `render_template'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_view/renderer/template_renderer.rb:18:in `render'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/newrelic_rpm-3.7.3.204/lib/new_relic/agent/instrumentation/rails3/action_controller.rb:160:in `block in render_with_newrelic'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/newrelic_rpm-3.7.3.204/lib/new_relic/agent/method_tracer.rb:281:in `trace_execution_scoped'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/newrelic_rpm-3.7.3.204/lib/new_relic/agent/instrumentation/rails3/action_controller.rb:159:in `render_with_newrelic'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_view/renderer/renderer.rb:36:in `render_template'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_view/renderer/renderer.rb:17:in `render'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/abstract_controller/rendering.rb:110:in `_render_template'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_controller/metal/streaming.rb:225:in `_render_template'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/abstract_controller/rendering.rb:103:in `render_to_body'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_controller/metal/renderers.rb:28:in `render_to_body'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_controller/metal/compatibility.rb:50:in `render_to_body'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/abstract_controller/rendering.rb:88:in `render'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_controller/metal/rendering.rb:16:in `render'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_controller/metal/instrumentation.rb:40:in `block (2 levels) in render'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/activesupport-3.2.8/lib/active_support/core_ext/benchmark.rb:5:in `block in ms'
/Users/kevinmuller/.rvm/rubies/ruby-2.2.4/lib/ruby/2.2.0/benchmark.rb:303:in `realtime'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/activesupport-3.2.8/lib/active_support/core_ext/benchmark.rb:5:in `ms'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_controller/metal/instrumentation.rb:40:in `block in render'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_controller/metal/instrumentation.rb:83:in `cleanup_view_runtime'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/activerecord-3.2.8/lib/active_record/railties/controller_runtime.rb:24:in `cleanup_view_runtime'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_controller/metal/instrumentation.rb:39:in `render'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/bundler/gems/remotipart-aadc29e996c3/lib/remotipart/render_overrides.rb:14:in `render_with_remotipart'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_controller/metal/implicit_render.rb:10:in `default_render'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_controller/metal/mime_responds.rb:196:in `respond_to'
/Users/kevinmuller/halalgems_backend/app/controllers/collections_controller.rb:55:in `admin_new_collection'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_controller/metal/implicit_render.rb:4:in `send_action'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/abstract_controller/base.rb:167:in `process_action'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_controller/metal/rendering.rb:10:in `process_action'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/abstract_controller/callbacks.rb:18:in `block in process_action'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/activesupport-3.2.8/lib/active_support/callbacks.rb:458:in `_run__3012463867562954222__process_action__943724563702743361__callbacks'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/activesupport-3.2.8/lib/active_support/callbacks.rb:405:in `__run_callback'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/activesupport-3.2.8/lib/active_support/callbacks.rb:385:in `_run_process_action_callbacks'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/activesupport-3.2.8/lib/active_support/callbacks.rb:81:in `run_callbacks'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/abstract_controller/callbacks.rb:17:in `process_action'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_controller/metal/rescue.rb:29:in `process_action'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_controller/metal/instrumentation.rb:30:in `block in process_action'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/activesupport-3.2.8/lib/active_support/notifications.rb:123:in `block in instrument'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/activesupport-3.2.8/lib/active_support/notifications/instrumenter.rb:20:in `instrument'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/activesupport-3.2.8/lib/active_support/notifications.rb:123:in `instrument'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_controller/metal/instrumentation.rb:29:in `process_action'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_controller/metal/params_wrapper.rb:207:in `process_action'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/activerecord-3.2.8/lib/active_record/railties/controller_runtime.rb:18:in `process_action'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/newrelic_rpm-3.7.3.204/lib/new_relic/agent/instrumentation/rails3/action_controller.rb:38:in `block in process_action'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/newrelic_rpm-3.7.3.204/lib/new_relic/agent/instrumentation/controller_instrumentation.rb:335:in `perform_action_with_newrelic_trace'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/newrelic_rpm-3.7.3.204/lib/new_relic/agent/instrumentation/rails3/action_controller.rb:37:in `process_action'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/abstract_controller/base.rb:121:in `process'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/abstract_controller/rendering.rb:45:in `process'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_controller/metal.rb:203:in `dispatch'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_controller/metal/rack_delegation.rb:14:in `dispatch'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_controller/metal.rb:246:in `block in action'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_dispatch/routing/route_set.rb:73:in `call'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_dispatch/routing/route_set.rb:73:in `dispatch'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_dispatch/routing/route_set.rb:36:in `call'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/journey-1.0.4/lib/journey/router.rb:68:in `block in call'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/journey-1.0.4/lib/journey/router.rb:56:in `each'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/journey-1.0.4/lib/journey/router.rb:56:in `call'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_dispatch/routing/route_set.rb:600:in `call'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/omniauth-1.1.4/lib/omniauth/strategy.rb:184:in `call!'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/omniauth-1.1.4/lib/omniauth/strategy.rb:164:in `call'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/newrelic_rpm-3.7.3.204/lib/new_relic/rack/error_collector.rb:55:in `call'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/newrelic_rpm-3.7.3.204/lib/new_relic/rack/agent_hooks.rb:32:in `call'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/newrelic_rpm-3.7.3.204/lib/new_relic/rack/browser_monitoring.rb:27:in `call'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/newrelic_rpm-3.7.3.204/lib/new_relic/rack/developer_mode.rb:45:in `call'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/galetahub-simple_captcha-0.1.5/lib/simple_captcha/middleware.rb:20:in `call'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/bundler/gems/client_side_validations-a6a515504520/lib/client_side_validations/middleware.rb:21:in `call'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/warden-1.1.1/lib/warden/manager.rb:35:in `block in call'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/warden-1.1.1/lib/warden/manager.rb:34:in `catch'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/warden-1.1.1/lib/warden/manager.rb:34:in `call'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_dispatch/middleware/best_standards_support.rb:17:in `call'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/rack-1.4.5/lib/rack/etag.rb:23:in `call'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/rack-1.4.5/lib/rack/conditionalget.rb:25:in `call'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_dispatch/middleware/head.rb:14:in `call'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/bundler/gems/remotipart-aadc29e996c3/lib/remotipart/middleware.rb:27:in `call'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_dispatch/middleware/params_parser.rb:21:in `call'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_dispatch/middleware/flash.rb:242:in `call'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/rack-1.4.5/lib/rack/session/abstract/id.rb:210:in `context'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/rack-1.4.5/lib/rack/session/abstract/id.rb:205:in `call'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_dispatch/middleware/cookies.rb:339:in `call'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/dragonfly-0.9.15/lib/dragonfly/cookie_monster.rb:9:in `call'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/activerecord-3.2.8/lib/active_record/query_cache.rb:64:in `call'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/activerecord-3.2.8/lib/active_record/connection_adapters/abstract/connection_pool.rb:473:in `call'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_dispatch/middleware/callbacks.rb:28:in `block in call'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/activesupport-3.2.8/lib/active_support/callbacks.rb:405:in `_run__588680775837337795__call__3560462588581291106__callbacks'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/activesupport-3.2.8/lib/active_support/callbacks.rb:405:in `__run_callback'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/activesupport-3.2.8/lib/active_support/callbacks.rb:385:in `_run_call_callbacks'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/activesupport-3.2.8/lib/active_support/callbacks.rb:81:in `run_callbacks'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_dispatch/middleware/callbacks.rb:27:in `call'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_dispatch/middleware/reloader.rb:65:in `call'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_dispatch/middleware/remote_ip.rb:31:in `call'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_dispatch/middleware/debug_exceptions.rb:16:in `call'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_dispatch/middleware/show_exceptions.rb:56:in `call'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/railties-3.2.8/lib/rails/rack/logger.rb:26:in `call_app'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/railties-3.2.8/lib/rails/rack/logger.rb:16:in `call'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/quiet_assets-1.0.3/lib/quiet_assets.rb:23:in `call_with_quiet_assets'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_dispatch/middleware/request_id.rb:22:in `call'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/rack-1.4.5/lib/rack/methodoverride.rb:21:in `call'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/rack-1.4.5/lib/rack/runtime.rb:17:in `call'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/activesupport-3.2.8/lib/active_support/cache/strategy/local_cache.rb:72:in `call'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/rack-1.4.5/lib/rack/lock.rb:15:in `call'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_dispatch/middleware/static.rb:62:in `call'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/dragonfly-0.9.15/lib/dragonfly/middleware.rb:13:in `call'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/rack-cache-1.2/lib/rack/cache/context.rb:136:in `forward'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/rack-cache-1.2/lib/rack/cache/context.rb:245:in `fetch'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/rack-cache-1.2/lib/rack/cache/context.rb:185:in `lookup'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/rack-cache-1.2/lib/rack/cache/context.rb:66:in `call!'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/rack-cache-1.2/lib/rack/cache/context.rb:51:in `call'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/railties-3.2.8/lib/rails/engine.rb:479:in `call'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/railties-3.2.8/lib/rails/application.rb:223:in `call'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/rack-1.4.5/lib/rack/content_length.rb:14:in `call'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/railties-3.2.8/lib/rails/rack/log_tailer.rb:17:in `call'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/rack-1.4.5/lib/rack/handler/webrick.rb:59:in `service'
/Users/kevinmuller/.rvm/rubies/ruby-2.2.4/lib/ruby/2.2.0/webrick/httpserver.rb:138:in `service'
/Users/kevinmuller/.rvm/rubies/ruby-2.2.4/lib/ruby/2.2.0/webrick/httpserver.rb:94:in `run'
/Users/kevinmuller/.rvm/rubies/ruby-2.2.4/lib/ruby/2.2.0/webrick/server.rb:294:in `block in start_thread'
  Rendered collections/_collection_form.html.erb (10.2ms)
  Rendered collections/admin_new_collection.html.erb within layouts/admin (11.3ms)
Completed 500 Internal Server Error in 32ms

ActionView::Template::Error (/Users/kevinmuller/halalgems_backend/app/views/collections/_collection_form.html.erb:10: syntax error, unexpected ':', expecting ')'
....file_field :image_name, :name: 'collection_images[image_nam...
...                               ^
/Users/kevinmuller/halalgems_backend/app/views/collections/_collection_form.html.erb:10: syntax error, unexpected ',', expecting ')'
...collection_images[image_name]', :multiple => false , class: ...
...                               ^
/Users/kevinmuller/halalgems_backend/app/views/collections/_collection_form.html.erb:10: Can't assign to false
...ge_name]', :multiple => false , class: 'form-control');@outp...
...                               ^):
    7:         <%= f.input :name, placeholder: 'Name', input_html: { class: 'form-control' } %>
    8:         <%= f.input :description, placeholder: 'Description', input_html: { class: 'form-control' }%>
    9:         <%= f.label :image_name, 'Choose image', class: 'btn btn-default mg-bt-10 border-radius-5 form-control label_for_choose_menu' %>
    10:         <%= f.file_field :image_name, :name: 'collection_images[image_name]', :multiple => false , class: 'form-control'%>
    11:         <label class='hide collection-image-error'> <%= t('collections.please_choose_image') %> </label>
    12:       </div>
    13:     </div>
  app/views/collections/admin_new_collection.html.erb:15:in `_app_views_collections_admin_new_collection_html_erb___1987632417071435961_70323704917400'
  app/controllers/collections_controller.rb:55:in `admin_new_collection'


  Rendered /Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_dispatch/middleware/templates/rescues/_trace.erb (1.2ms)
  Rendered /Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_dispatch/middleware/templates/rescues/_request_and_response.erb (1.0ms)
  Rendered /Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_dispatch/middleware/templates/rescues/template_error.erb within rescues/layout (50.1ms)


Started GET "/admin/collections/admin_new_collection" for 127.0.0.1 at 2016-01-16 22:01:10 +0100
Processing by CollectionsController#admin_new_collection as HTML
  [1m[35mUser Load (0.4ms)[0m  SELECT `users`.* FROM `users` WHERE `users`.`id` = 1 LIMIT 1
  Rendered collections/_collection_form.html.erb (6.5ms)
  Rendered collections/_collection_restaurants_form.html.erb (0.4ms)
  Rendered collections/_upload_collection_image.html.erb (2.3ms)
  Rendered collections/admin_new_collection.html.erb within layouts/admin (21.6ms)
Completed 200 OK in 30ms (Views: 27.9ms | ActiveRecord: 0.4ms)


Started GET "/collection_images?r_id=" for 127.0.0.1 at 2016-01-16 22:01:11 +0100
Processing by RestaurantsController#show as JSON
  Parameters: {"r_id"=>"", "id"=>"collection_images"}
  [1m[36mRestaurant Load (2.9ms)[0m  [1mSELECT `restaurants`.* FROM `restaurants` WHERE `restaurants`.`slug` = 'collection_images' LIMIT 1[0m
  [1m[35mRestaurant Load (0.4ms)[0m  SELECT `restaurants`.* FROM `restaurants` WHERE `restaurants`.`id` = 0 LIMIT 1
Completed 500 Internal Server Error in 7ms

ActiveRecord::RecordNotFound (Couldn't find Restaurant with id=collection_images):
  app/controllers/restaurants_controller.rb:193:in `show'


  Rendered /Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_dispatch/middleware/templates/rescues/_trace.erb (1.1ms)
  Rendered /Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_dispatch/middleware/templates/rescues/_request_and_response.erb (1.6ms)
  Rendered /Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_dispatch/middleware/templates/rescues/diagnostics.erb within rescues/layout (50.0ms)


Started GET "/admin/collections/admin_new_collection" for 127.0.0.1 at 2016-01-16 22:02:50 +0100
Processing by CollectionsController#admin_new_collection as HTML
  [1m[36mUser Load (0.4ms)[0m  [1mSELECT `users`.* FROM `users` WHERE `users`.`id` = 1 LIMIT 1[0m
  Rendered collections/_collection_form.html.erb (6.5ms)
  Rendered collections/_collection_restaurants_form.html.erb (0.3ms)
  Rendered collections/_upload_collection_image.html.erb (1.2ms)
  Rendered collections/admin_new_collection.html.erb within layouts/admin (11.6ms)
Completed 200 OK in 21ms (Views: 18.3ms | ActiveRecord: 0.4ms)


Started GET "/collection_images?r_id=" for 127.0.0.1 at 2016-01-16 22:02:50 +0100
Processing by RestaurantsController#show as JSON
  Parameters: {"r_id"=>"", "id"=>"collection_images"}
  [1m[35mRestaurant Load (2.6ms)[0m  SELECT `restaurants`.* FROM `restaurants` WHERE `restaurants`.`slug` = 'collection_images' LIMIT 1
  [1m[36mRestaurant Load (0.3ms)[0m  [1mSELECT `restaurants`.* FROM `restaurants` WHERE `restaurants`.`id` = 0 LIMIT 1[0m
Completed 500 Internal Server Error in 6ms

ActiveRecord::RecordNotFound (Couldn't find Restaurant with id=collection_images):
  app/controllers/restaurants_controller.rb:193:in `show'


  Rendered /Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_dispatch/middleware/templates/rescues/_trace.erb (2.1ms)
  Rendered /Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_dispatch/middleware/templates/rescues/_request_and_response.erb (0.9ms)
  Rendered /Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_dispatch/middleware/templates/rescues/diagnostics.erb within rescues/layout (106.1ms)


Started GET "/admin/collections/admin_new_collection" for 127.0.0.1 at 2016-01-16 22:03:03 +0100
Processing by CollectionsController#admin_new_collection as HTML
  [1m[35mUser Load (0.3ms)[0m  SELECT `users`.* FROM `users` WHERE `users`.`id` = 1 LIMIT 1
  Rendered collections/_collection_form.html.erb (4.7ms)
  Rendered collections/_collection_restaurants_form.html.erb (0.3ms)
  Rendered collections/_upload_collection_image.html.erb (1.1ms)
  Rendered collections/admin_new_collection.html.erb within layouts/admin (8.8ms)
Completed 200 OK in 17ms (Views: 14.3ms | ActiveRecord: 0.3ms)


Started GET "/collection_images?r_id=" for 127.0.0.1 at 2016-01-16 22:03:03 +0100
Processing by RestaurantsController#show as JSON
  Parameters: {"r_id"=>"", "id"=>"collection_images"}
  [1m[36mRestaurant Load (1.6ms)[0m  [1mSELECT `restaurants`.* FROM `restaurants` WHERE `restaurants`.`slug` = 'collection_images' LIMIT 1[0m
  [1m[35mRestaurant Load (0.3ms)[0m  SELECT `restaurants`.* FROM `restaurants` WHERE `restaurants`.`id` = 0 LIMIT 1
Completed 500 Internal Server Error in 4ms

ActiveRecord::RecordNotFound (Couldn't find Restaurant with id=collection_images):
  app/controllers/restaurants_controller.rb:193:in `show'


  Rendered /Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_dispatch/middleware/templates/rescues/_trace.erb (1.7ms)
  Rendered /Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_dispatch/middleware/templates/rescues/_request_and_response.erb (1.7ms)
  Rendered /Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_dispatch/middleware/templates/rescues/diagnostics.erb within rescues/layout (45.4ms)


Started POST "/admin/collections" for 127.0.0.1 at 2016-01-16 22:03:11 +0100
Processing by CollectionsController#create as HTML
  Parameters: {"utf8"=>"âœ“", "authenticity_token"=>"ZhR8a2fYr/EQcBrBVm2c17tt7AHk64f/gvsZ5fOllxc=", "admin"=>"true", "collection"=>{"name"=>"test", "description"=>"testsafd"}}
  [1m[36mCollection Load (0.3ms)[0m  [1mSELECT `collections`.* FROM `collections` WHERE `collections`.`name` = 'test' LIMIT 1[0m
  [1m[35m (0.1ms)[0m  BEGIN
  [1m[36mSQL (0.7ms)[0m  [1mINSERT INTO `collections` (`created_at`, `description`, `image_url`, `name`, `updated_at`) VALUES ('2016-01-16 21:03:11', 'testsafd', NULL, 'test', '2016-01-16 21:03:11')[0m
  [1m[35m (25.3ms)[0m  COMMIT
Redirected to http://0.0.0.0:3000/
Completed 302 Found in 32ms (ActiveRecord: 26.3ms)


Started GET "/" for 127.0.0.1 at 2016-01-16 22:03:11 +0100
Processing by PagesController#home as HTML
  [1m[36mAdminPhoto Load (0.6ms)[0m  [1mSELECT `admin_photos`.* FROM `admin_photos` WHERE `admin_photos`.`image_type` = 1 ORDER BY RAND() LIMIT 1[0m
  [1m[35mFilter Load (0.5ms)[0m  SELECT `filters`.* FROM `filters` WHERE (code = 'cuisine') ORDER BY name ASC
  [1m[36mUser Load (0.2ms)[0m  [1mSELECT `users`.* FROM `users` WHERE `users`.`gem_hunter` = 1 LIMIT 3[0m
  [1m[35mAdminPhoto Load (0.4ms)[0m  SELECT `admin_photos`.* FROM `admin_photos` WHERE `admin_photos`.`image_type` = 1 ORDER BY `admin_photos`.`id` DESC LIMIT 1
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT `admin_photos`.* FROM `admin_photos` WHERE `admin_photos`.`image_type` = 1 ORDER BY `admin_photos`.`id` DESC LIMIT 1[0m
  [1m[35mCACHE (0.0ms)[0m  SELECT `admin_photos`.* FROM `admin_photos` WHERE `admin_photos`.`image_type` = 1 ORDER BY `admin_photos`.`id` DESC LIMIT 1
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT `admin_photos`.* FROM `admin_photos` WHERE `admin_photos`.`image_type` = 1 ORDER BY `admin_photos`.`id` DESC LIMIT 1[0m
  [1m[35mCACHE (0.0ms)[0m  SELECT `admin_photos`.* FROM `admin_photos` WHERE `admin_photos`.`image_type` = 1 ORDER BY `admin_photos`.`id` DESC LIMIT 1
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT `admin_photos`.* FROM `admin_photos` WHERE `admin_photos`.`image_type` = 1 ORDER BY `admin_photos`.`id` DESC LIMIT 1[0m
  Rendered pages/home.html.slim within layouts/application_home (6.4ms)
  [1m[35mUser Load (1.4ms)[0m  SELECT `users`.* FROM `users` WHERE `users`.`id` = 1 LIMIT 1
  [1m[36mSubscription Load (0.3ms)[0m  [1mSELECT `subscriptions`.* FROM `subscriptions` WHERE `subscriptions`.`user_id` = 1 AND `subscriptions`.`success` = 1[0m
  [1m[35mCACHE (0.0ms)[0m  SELECT `subscriptions`.* FROM `subscriptions` WHERE `subscriptions`.`user_id` = 1 AND `subscriptions`.`success` = 1
  Rendered layouts/_user_pnl.html.erb (3.5ms)
  Rendered layouts/_header.html.erb (8.4ms)
  Rendered layouts/_main_menu.html.slim (0.5ms)
  Rendered layouts/_sub_main_menu.html.slim (0.3ms)
  Rendered layouts/_flash_messages.html.erb (0.1ms)
  [1m[36mBasicsPage Load (0.6ms)[0m  [1mSELECT `basics_pages`.* FROM `basics_pages` WHERE `basics_pages`.`page_name` = 'Footer' LIMIT 1[0m
  Rendered layouts/_footer.html.slim (3.1ms)
Completed 200 OK in 59ms (Views: 47.7ms | ActiveRecord: 3.9ms)
couldn't find file /Users/kevinmuller/halalgems_backend/public/system/dragonfly/development/2014/05/19/10_41_19_654_photo_1_2.JPG
couldn't find file /Users/kevinmuller/halalgems_backend/public/system/dragonfly/development/2014/05/19/10_41_19_654_photo_1_2.JPG


Started POST "/admin/collections" for 127.0.0.1 at 2016-01-16 22:06:19 +0100
Processing by CollectionsController#create as HTML
  Parameters: {"utf8"=>"âœ“", "authenticity_token"=>"ZhR8a2fYr/EQcBrBVm2c17tt7AHk64f/gvsZ5fOllxc=", "admin"=>"true", "collection"=>{"name"=>"test", "description"=>"testsafd"}, "collection_image"=>{"image_name"=>#<ActionDispatch::Http::UploadedFile:0x007feb0db9cee0 @original_filename="sunday_roast.png", @content_type="image/png", @headers="Content-Disposition: form-data; name=\"collection_image[image_name]\"; filename=\"sunday_roast.png\"\r\nContent-Type: image/png\r\n", @tempfile=#<Tempfile:/var/folders/rf/q4l8n5k56pnbjgkdtzrhq_w00000gn/T/RackMultipart20160116-28026-rdw7af>>}}
  [1m[35mCollection Load (0.2ms)[0m  SELECT `collections`.* FROM `collections` WHERE `collections`.`name` = 'test' LIMIT 1
  Rendered collections/_collection_form.html.erb (6.7ms)
  Rendered collections/_collection_restaurants_form.html.erb (0.2ms)
  [1m[36mUser Load (0.2ms)[0m  [1mSELECT `users`.* FROM `users` WHERE `users`.`id` = 1 LIMIT 1[0m
  Rendered collections/_upload_collection_image.html.erb (88.1ms)
  Rendered collections/admin_new_collection.html.erb within layouts/admin (97.7ms)
Completed 200 OK in 116ms (Views: 106.0ms | ActiveRecord: 3.4ms)


Started GET "/collection_images?r_id=" for 127.0.0.1 at 2016-01-16 22:06:19 +0100
  [1m[35m (0.2ms)[0m  SELECT COUNT(*) FROM `filter_types` WHERE (code = 'features')
  [1m[36m (0.2ms)[0m  [1mSELECT COUNT(*) FROM `filters` WHERE (code = 'offer')[0m
  [1m[35mFilter Load (0.2ms)[0m  SELECT `filters`.* FROM `filters` WHERE (code = 'offer') LIMIT 1
  [1m[36mFilterType Load (0.3ms)[0m  [1mSELECT `filter_types`.* FROM `filter_types` WHERE (code = 'features') LIMIT 1[0m
  [1m[35mCACHE (0.0ms)[0m  SELECT `filters`.* FROM `filters` WHERE (code = 'offer') LIMIT 1
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT `filter_types`.* FROM `filter_types` WHERE (code = 'features') LIMIT 1[0m
Processing by RestaurantsController#show as JSON
  Parameters: {"r_id"=>"", "id"=>"collection_images"}
  [1m[35mRestaurant Load (1.6ms)[0m  SELECT `restaurants`.* FROM `restaurants` WHERE `restaurants`.`slug` = 'collection_images' LIMIT 1
  [1m[36mRestaurant Load (0.2ms)[0m  [1mSELECT `restaurants`.* FROM `restaurants` WHERE `restaurants`.`id` = 0 LIMIT 1[0m
Completed 500 Internal Server Error in 8ms

ActiveRecord::RecordNotFound (Couldn't find Restaurant with id=collection_images):
  app/controllers/restaurants_controller.rb:193:in `show'


  Rendered /Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_dispatch/middleware/templates/rescues/_trace.erb (1.1ms)
  Rendered /Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_dispatch/middleware/templates/rescues/_request_and_response.erb (1.2ms)
  Rendered /Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_dispatch/middleware/templates/rescues/diagnostics.erb within rescues/layout (48.4ms)


Started POST "/admin/collections" for 127.0.0.1 at 2016-01-16 22:06:54 +0100
Processing by CollectionsController#create as HTML
  Parameters: {"utf8"=>"âœ“", "authenticity_token"=>"ZhR8a2fYr/EQcBrBVm2c17tt7AHk64f/gvsZ5fOllxc=", "admin"=>"true", "collection"=>{"name"=>"test", "description"=>"testsafd"}}
  [1m[35mCollection Load (0.2ms)[0m  SELECT `collections`.* FROM `collections` WHERE `collections`.`name` = 'test' LIMIT 1
  Rendered collections/_collection_form.html.erb (5.6ms)
  Rendered collections/_collection_restaurants_form.html.erb (0.2ms)
  [1m[36mUser Load (0.3ms)[0m  [1mSELECT `users`.* FROM `users` WHERE `users`.`id` = 1 LIMIT 1[0m
  Rendered collections/_upload_collection_image.html.erb (102.8ms)
  Rendered collections/admin_new_collection.html.erb within layouts/admin (111.2ms)
Completed 200 OK in 130ms (Views: 120.4ms | ActiveRecord: 3.4ms)


Started GET "/collection_images?r_id=" for 127.0.0.1 at 2016-01-16 22:06:55 +0100
  [1m[35m (0.2ms)[0m  SELECT COUNT(*) FROM `filter_types` WHERE (code = 'features')
  [1m[36m (0.2ms)[0m  [1mSELECT COUNT(*) FROM `filters` WHERE (code = 'offer')[0m
  [1m[35mFilter Load (0.2ms)[0m  SELECT `filters`.* FROM `filters` WHERE (code = 'offer') LIMIT 1
  [1m[36mFilterType Load (0.2ms)[0m  [1mSELECT `filter_types`.* FROM `filter_types` WHERE (code = 'features') LIMIT 1[0m
  [1m[35mCACHE (0.0ms)[0m  SELECT `filters`.* FROM `filters` WHERE (code = 'offer') LIMIT 1
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT `filter_types`.* FROM `filter_types` WHERE (code = 'features') LIMIT 1[0m
Processing by RestaurantsController#show as JSON
  Parameters: {"r_id"=>"", "id"=>"collection_images"}
  [1m[35mRestaurant Load (1.5ms)[0m  SELECT `restaurants`.* FROM `restaurants` WHERE `restaurants`.`slug` = 'collection_images' LIMIT 1
  [1m[36mRestaurant Load (0.3ms)[0m  [1mSELECT `restaurants`.* FROM `restaurants` WHERE `restaurants`.`id` = 0 LIMIT 1[0m
Completed 500 Internal Server Error in 9ms

ActiveRecord::RecordNotFound (Couldn't find Restaurant with id=collection_images):
  app/controllers/restaurants_controller.rb:193:in `show'


  Rendered /Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_dispatch/middleware/templates/rescues/_trace.erb (1.3ms)
  Rendered /Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_dispatch/middleware/templates/rescues/_request_and_response.erb (1.0ms)
  Rendered /Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_dispatch/middleware/templates/rescues/diagnostics.erb within rescues/layout (46.2ms)


Started POST "/admin/collections" for 127.0.0.1 at 2016-01-16 22:07:00 +0100
Processing by CollectionsController#create as HTML
  Parameters: {"utf8"=>"âœ“", "authenticity_token"=>"ZhR8a2fYr/EQcBrBVm2c17tt7AHk64f/gvsZ5fOllxc=", "admin"=>"true", "collection"=>{"name"=>"test", "description"=>"testsafd"}}
  [1m[35mCollection Load (0.3ms)[0m  SELECT `collections`.* FROM `collections` WHERE `collections`.`name` = 'test' LIMIT 1
  Rendered collections/_collection_form.html.erb (5.2ms)
  Rendered collections/_collection_restaurants_form.html.erb (0.3ms)
  [1m[36mUser Load (0.4ms)[0m  [1mSELECT `users`.* FROM `users` WHERE `users`.`id` = 1 LIMIT 1[0m
  Rendered collections/_upload_collection_image.html.erb (3.7ms)
  Rendered collections/admin_new_collection.html.erb within layouts/admin (12.0ms)
Completed 200 OK in 21ms (Views: 18.2ms | ActiveRecord: 0.7ms)


Started GET "/collection_images?r_id=" for 127.0.0.1 at 2016-01-16 22:07:00 +0100
Processing by RestaurantsController#show as JSON
  Parameters: {"r_id"=>"", "id"=>"collection_images"}
  [1m[35mRestaurant Load (1.7ms)[0m  SELECT `restaurants`.* FROM `restaurants` WHERE `restaurants`.`slug` = 'collection_images' LIMIT 1
  [1m[36mRestaurant Load (0.2ms)[0m  [1mSELECT `restaurants`.* FROM `restaurants` WHERE `restaurants`.`id` = 0 LIMIT 1[0m
Completed 500 Internal Server Error in 4ms

ActiveRecord::RecordNotFound (Couldn't find Restaurant with id=collection_images):
  app/controllers/restaurants_controller.rb:193:in `show'


  Rendered /Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_dispatch/middleware/templates/rescues/_trace.erb (1.2ms)
  Rendered /Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_dispatch/middleware/templates/rescues/_request_and_response.erb (1.1ms)
  Rendered /Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_dispatch/middleware/templates/rescues/diagnostics.erb within rescues/layout (42.7ms)


Started POST "/admin/collections" for 127.0.0.1 at 2016-01-16 22:07:42 +0100
Processing by CollectionsController#create as HTML
  Parameters: {"utf8"=>"âœ“", "authenticity_token"=>"ZhR8a2fYr/EQcBrBVm2c17tt7AHk64f/gvsZ5fOllxc=", "admin"=>"true", "collection"=>{"name"=>"test", "description"=>"testsafd"}}
  [1m[35mCollection Load (0.2ms)[0m  SELECT `collections`.* FROM `collections` WHERE `collections`.`name` = 'test' LIMIT 1
  Rendered collections/_collection_form.html.erb (5.6ms)
  Rendered collections/_collection_restaurants_form.html.erb (0.2ms)
  [1m[36mUser Load (0.2ms)[0m  [1mSELECT `users`.* FROM `users` WHERE `users`.`id` = 1 LIMIT 1[0m
  Rendered collections/_upload_collection_image.html.erb (76.6ms)
  Rendered collections/admin_new_collection.html.erb within layouts/admin (84.9ms)
Completed 200 OK in 201ms (Views: 92.6ms | ActiveRecord: 3.0ms)


Started GET "/collection_images?r_id=" for 127.0.0.1 at 2016-01-16 22:07:42 +0100
  [1m[35m (0.2ms)[0m  SELECT COUNT(*) FROM `filter_types` WHERE (code = 'features')
  [1m[36m (0.2ms)[0m  [1mSELECT COUNT(*) FROM `filters` WHERE (code = 'offer')[0m
  [1m[35mFilter Load (0.2ms)[0m  SELECT `filters`.* FROM `filters` WHERE (code = 'offer') LIMIT 1
  [1m[36mFilterType Load (0.2ms)[0m  [1mSELECT `filter_types`.* FROM `filter_types` WHERE (code = 'features') LIMIT 1[0m
  [1m[35mCACHE (0.0ms)[0m  SELECT `filters`.* FROM `filters` WHERE (code = 'offer') LIMIT 1
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT `filter_types`.* FROM `filter_types` WHERE (code = 'features') LIMIT 1[0m
Processing by RestaurantsController#show as JSON
  Parameters: {"r_id"=>"", "id"=>"collection_images"}
  [1m[35mRestaurant Load (1.6ms)[0m  SELECT `restaurants`.* FROM `restaurants` WHERE `restaurants`.`slug` = 'collection_images' LIMIT 1
  [1m[36mRestaurant Load (0.3ms)[0m  [1mSELECT `restaurants`.* FROM `restaurants` WHERE `restaurants`.`id` = 0 LIMIT 1[0m
Completed 500 Internal Server Error in 9ms

ActiveRecord::RecordNotFound (Couldn't find Restaurant with id=collection_images):
  app/controllers/restaurants_controller.rb:193:in `show'


  Rendered /Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_dispatch/middleware/templates/rescues/_trace.erb (1.0ms)
  Rendered /Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_dispatch/middleware/templates/rescues/_request_and_response.erb (1.1ms)
  Rendered /Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_dispatch/middleware/templates/rescues/diagnostics.erb within rescues/layout (46.5ms)


Started POST "/admin/collections" for 127.0.0.1 at 2016-01-16 22:08:05 +0100
Processing by CollectionsController#create as HTML
  Parameters: {"utf8"=>"âœ“", "authenticity_token"=>"ZhR8a2fYr/EQcBrBVm2c17tt7AHk64f/gvsZ5fOllxc=", "admin"=>"true", "collection"=>{"name"=>"test123", "description"=>"testsafd"}, "collection_image"=>{"image_name"=>#<ActionDispatch::Http::UploadedFile:0x007feb0cc77ac8 @original_filename="sunday_roast.png", @content_type="image/png", @headers="Content-Disposition: form-data; name=\"collection_image[image_name]\"; filename=\"sunday_roast.png\"\r\nContent-Type: image/png\r\n", @tempfile=#<Tempfile:/var/folders/rf/q4l8n5k56pnbjgkdtzrhq_w00000gn/T/RackMultipart20160116-28026-18i2oqm>>}}
  [1m[35mCollection Load (0.2ms)[0m  SELECT `collections`.* FROM `collections` WHERE `collections`.`name` = 'test123' LIMIT 1
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO `collections` (`created_at`, `description`, `image_url`, `name`, `updated_at`) VALUES ('2016-01-16 21:08:05', 'testsafd', NULL, 'test123', '2016-01-16 21:08:05')
  [1m[36m (0.5ms)[0m  [1mCOMMIT[0m
Completed 500 Internal Server Error in 13ms

ActionController::RoutingError (No route matches {:controller=>"collections", :action=>"edit_collection"}):
  app/controllers/collections_controller.rb:94:in `block (2 levels) in create'
  app/controllers/collections_controller.rb:77:in `create'


  Rendered /Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_dispatch/middleware/templates/rescues/routing_error.erb within rescues/layout (0.7ms)


Started POST "/admin/collections" for 127.0.0.1 at 2016-01-16 22:10:06 +0100

SyntaxError (/Users/kevinmuller/halalgems_backend/app/controllers/collections_controller.rb:94: syntax error, unexpected '}', expecting ')'
/Users/kevinmuller/halalgems_backend/app/controllers/collections_controller.rb:171: syntax error, unexpected keyword_end, expecting '}'):
  activesupport (3.2.8) lib/active_support/dependencies.rb:469:in `load'
  activesupport (3.2.8) lib/active_support/dependencies.rb:469:in `block in load_file'
  activesupport (3.2.8) lib/active_support/dependencies.rb:639:in `new_constants_in'
  activesupport (3.2.8) lib/active_support/dependencies.rb:468:in `load_file'
  activesupport (3.2.8) lib/active_support/dependencies.rb:353:in `require_or_load'
  activesupport (3.2.8) lib/active_support/dependencies.rb:502:in `load_missing_constant'
  activesupport (3.2.8) lib/active_support/dependencies.rb:192:in `block in const_missing'
  activesupport (3.2.8) lib/active_support/dependencies.rb:190:in `each'
  activesupport (3.2.8) lib/active_support/dependencies.rb:190:in `const_missing'
  activesupport (3.2.8) lib/active_support/inflector/methods.rb:230:in `block in constantize'
  activesupport (3.2.8) lib/active_support/inflector/methods.rb:229:in `each'
  activesupport (3.2.8) lib/active_support/inflector/methods.rb:229:in `constantize'
  activesupport (3.2.8) lib/active_support/dependencies.rb:554:in `get'
  actionpack (3.2.8) lib/action_dispatch/routing/route_set.rb:69:in `controller_reference'
  actionpack (3.2.8) lib/action_dispatch/routing/route_set.rb:54:in `controller'
  actionpack (3.2.8) lib/action_dispatch/routing/route_set.rb:32:in `call'
  journey (1.0.4) lib/journey/router.rb:68:in `block in call'
  journey (1.0.4) lib/journey/router.rb:56:in `each'
  journey (1.0.4) lib/journey/router.rb:56:in `call'
  actionpack (3.2.8) lib/action_dispatch/routing/route_set.rb:600:in `call'
  omniauth (1.1.4) lib/omniauth/strategy.rb:184:in `call!'
  omniauth (1.1.4) lib/omniauth/strategy.rb:164:in `call'
  newrelic_rpm (3.7.3.204) lib/new_relic/rack/error_collector.rb:55:in `call'
  newrelic_rpm (3.7.3.204) lib/new_relic/rack/agent_hooks.rb:32:in `call'
  newrelic_rpm (3.7.3.204) lib/new_relic/rack/browser_monitoring.rb:27:in `call'
  newrelic_rpm (3.7.3.204) lib/new_relic/rack/developer_mode.rb:45:in `call'
  galetahub-simple_captcha (0.1.5) lib/simple_captcha/middleware.rb:20:in `call'
  /Users/kevinmuller/.rvm/gems/ruby-2.2.4/bundler/gems/client_side_validations-a6a515504520/lib/client_side_validations/middleware.rb:21:in `call'
  warden (1.1.1) lib/warden/manager.rb:35:in `block in call'
  warden (1.1.1) lib/warden/manager.rb:34:in `catch'
  warden (1.1.1) lib/warden/manager.rb:34:in `call'
  actionpack (3.2.8) lib/action_dispatch/middleware/best_standards_support.rb:17:in `call'
  rack (1.4.5) lib/rack/etag.rb:23:in `call'
  rack (1.4.5) lib/rack/conditionalget.rb:35:in `call'
  actionpack (3.2.8) lib/action_dispatch/middleware/head.rb:14:in `call'
  /Users/kevinmuller/.rvm/gems/ruby-2.2.4/bundler/gems/remotipart-aadc29e996c3/lib/remotipart/middleware.rb:27:in `call'
  actionpack (3.2.8) lib/action_dispatch/middleware/params_parser.rb:21:in `call'
  actionpack (3.2.8) lib/action_dispatch/middleware/flash.rb:242:in `call'
  rack (1.4.5) lib/rack/session/abstract/id.rb:210:in `context'
  rack (1.4.5) lib/rack/session/abstract/id.rb:205:in `call'
  actionpack (3.2.8) lib/action_dispatch/middleware/cookies.rb:339:in `call'
  dragonfly (0.9.15) lib/dragonfly/cookie_monster.rb:9:in `call'
  activerecord (3.2.8) lib/active_record/query_cache.rb:64:in `call'
  activerecord (3.2.8) lib/active_record/connection_adapters/abstract/connection_pool.rb:473:in `call'
  actionpack (3.2.8) lib/action_dispatch/middleware/callbacks.rb:28:in `block in call'
  activesupport (3.2.8) lib/active_support/callbacks.rb:405:in `_run__588680775837337795__call__3560462588581291106__callbacks'
  activesupport (3.2.8) lib/active_support/callbacks.rb:405:in `__run_callback'
  activesupport (3.2.8) lib/active_support/callbacks.rb:385:in `_run_call_callbacks'
  activesupport (3.2.8) lib/active_support/callbacks.rb:81:in `run_callbacks'
  actionpack (3.2.8) lib/action_dispatch/middleware/callbacks.rb:27:in `call'
  actionpack (3.2.8) lib/action_dispatch/middleware/reloader.rb:65:in `call'
  actionpack (3.2.8) lib/action_dispatch/middleware/remote_ip.rb:31:in `call'
  actionpack (3.2.8) lib/action_dispatch/middleware/debug_exceptions.rb:16:in `call'
  actionpack (3.2.8) lib/action_dispatch/middleware/show_exceptions.rb:56:in `call'
  railties (3.2.8) lib/rails/rack/logger.rb:26:in `call_app'
  railties (3.2.8) lib/rails/rack/logger.rb:16:in `call'
  quiet_assets (1.0.3) lib/quiet_assets.rb:23:in `call_with_quiet_assets'
  actionpack (3.2.8) lib/action_dispatch/middleware/request_id.rb:22:in `call'
  rack (1.4.5) lib/rack/methodoverride.rb:21:in `call'
  rack (1.4.5) lib/rack/runtime.rb:17:in `call'
  activesupport (3.2.8) lib/active_support/cache/strategy/local_cache.rb:72:in `call'
  rack (1.4.5) lib/rack/lock.rb:15:in `call'
  actionpack (3.2.8) lib/action_dispatch/middleware/static.rb:62:in `call'
  dragonfly (0.9.15) lib/dragonfly/middleware.rb:13:in `call'
  rack-cache (1.2) lib/rack/cache/context.rb:136:in `forward'
  rack-cache (1.2) lib/rack/cache/context.rb:143:in `pass'
  rack-cache (1.2) lib/rack/cache/context.rb:155:in `invalidate'
  rack-cache (1.2) lib/rack/cache/context.rb:71:in `call!'
  rack-cache (1.2) lib/rack/cache/context.rb:51:in `call'
  railties (3.2.8) lib/rails/engine.rb:479:in `call'
  railties (3.2.8) lib/rails/application.rb:223:in `call'
  rack (1.4.5) lib/rack/content_length.rb:14:in `call'
  railties (3.2.8) lib/rails/rack/log_tailer.rb:17:in `call'
  rack (1.4.5) lib/rack/handler/webrick.rb:59:in `service'
  /Users/kevinmuller/.rvm/rubies/ruby-2.2.4/lib/ruby/2.2.0/webrick/httpserver.rb:138:in `service'
  /Users/kevinmuller/.rvm/rubies/ruby-2.2.4/lib/ruby/2.2.0/webrick/httpserver.rb:94:in `run'
  /Users/kevinmuller/.rvm/rubies/ruby-2.2.4/lib/ruby/2.2.0/webrick/server.rb:294:in `block in start_thread'


  Rendered /Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_dispatch/middleware/templates/rescues/_trace.erb (1.1ms)
  Rendered /Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_dispatch/middleware/templates/rescues/_request_and_response.erb (1.0ms)
  Rendered /Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_dispatch/middleware/templates/rescues/diagnostics.erb within rescues/layout (43.5ms)


Started POST "/admin/collections" for 127.0.0.1 at 2016-01-16 22:11:10 +0100
Processing by CollectionsController#create as HTML
  Parameters: {"utf8"=>"âœ“", "authenticity_token"=>"ZhR8a2fYr/EQcBrBVm2c17tt7AHk64f/gvsZ5fOllxc=", "admin"=>"true", "collection"=>{"name"=>"test123", "description"=>"testsafd"}, "collection_image"=>{"image_name"=>#<ActionDispatch::Http::UploadedFile:0x007feb0de1e3a8 @original_filename="sunday_roast.png", @content_type="image/png", @headers="Content-Disposition: form-data; name=\"collection_image[image_name]\"; filename=\"sunday_roast.png\"\r\nContent-Type: image/png\r\n", @tempfile=#<Tempfile:/var/folders/rf/q4l8n5k56pnbjgkdtzrhq_w00000gn/T/RackMultipart20160116-28026-o9l3kt>>}}
  [1m[35mCollection Load (0.2ms)[0m  SELECT `collections`.* FROM `collections` WHERE `collections`.`name` = 'test123' LIMIT 1
  Rendered collections/_collection_form.html.erb (5.4ms)
  Rendered collections/_collection_restaurants_form.html.erb (0.2ms)
  [1m[36mUser Load (0.2ms)[0m  [1mSELECT `users`.* FROM `users` WHERE `users`.`id` = 1 LIMIT 1[0m
  Rendered collections/_upload_collection_image.html.erb (84.1ms)
  Rendered collections/admin_new_collection.html.erb within layouts/admin (100.6ms)
Completed 200 OK in 161ms (Views: 127.6ms | ActiveRecord: 3.3ms)


Started GET "/collection_images?r_id=" for 127.0.0.1 at 2016-01-16 22:11:11 +0100
  [1m[35m (0.2ms)[0m  SELECT COUNT(*) FROM `filter_types` WHERE (code = 'features')
  [1m[36m (0.2ms)[0m  [1mSELECT COUNT(*) FROM `filters` WHERE (code = 'offer')[0m
  [1m[35mFilter Load (0.1ms)[0m  SELECT `filters`.* FROM `filters` WHERE (code = 'offer') LIMIT 1
  [1m[36mFilterType Load (0.2ms)[0m  [1mSELECT `filter_types`.* FROM `filter_types` WHERE (code = 'features') LIMIT 1[0m
  [1m[35mCACHE (0.0ms)[0m  SELECT `filters`.* FROM `filters` WHERE (code = 'offer') LIMIT 1
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT `filter_types`.* FROM `filter_types` WHERE (code = 'features') LIMIT 1[0m
Processing by RestaurantsController#show as JSON
  Parameters: {"r_id"=>"", "id"=>"collection_images"}
  [1m[35mRestaurant Load (1.4ms)[0m  SELECT `restaurants`.* FROM `restaurants` WHERE `restaurants`.`slug` = 'collection_images' LIMIT 1
  [1m[36mRestaurant Load (0.2ms)[0m  [1mSELECT `restaurants`.* FROM `restaurants` WHERE `restaurants`.`id` = 0 LIMIT 1[0m
Completed 500 Internal Server Error in 7ms

ActiveRecord::RecordNotFound (Couldn't find Restaurant with id=collection_images):
  app/controllers/restaurants_controller.rb:193:in `show'


  Rendered /Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_dispatch/middleware/templates/rescues/_trace.erb (1.0ms)
  Rendered /Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_dispatch/middleware/templates/rescues/_request_and_response.erb (0.9ms)
  Rendered /Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_dispatch/middleware/templates/rescues/diagnostics.erb within rescues/layout (55.1ms)


Started POST "/admin/collections" for 127.0.0.1 at 2016-01-16 22:11:19 +0100
Processing by CollectionsController#create as HTML
  Parameters: {"utf8"=>"âœ“", "authenticity_token"=>"ZhR8a2fYr/EQcBrBVm2c17tt7AHk64f/gvsZ5fOllxc=", "admin"=>"true", "collection"=>{"name"=>"test123", "description"=>"testsafd"}, "collection_image"=>{"image_name"=>#<ActionDispatch::Http::UploadedFile:0x007feb08b0a798 @original_filename="persian.png", @content_type="image/png", @headers="Content-Disposition: form-data; name=\"collection_image[image_name]\"; filename=\"persian.png\"\r\nContent-Type: image/png\r\n", @tempfile=#<Tempfile:/var/folders/rf/q4l8n5k56pnbjgkdtzrhq_w00000gn/T/RackMultipart20160116-28026-1tcyzti>>}}
  [1m[35mCollection Load (0.3ms)[0m  SELECT `collections`.* FROM `collections` WHERE `collections`.`name` = 'test123' LIMIT 1
  Rendered collections/_collection_form.html.erb (4.6ms)
  Rendered collections/_collection_restaurants_form.html.erb (0.3ms)
  [1m[36mUser Load (0.3ms)[0m  [1mSELECT `users`.* FROM `users` WHERE `users`.`id` = 1 LIMIT 1[0m
  Rendered collections/_upload_collection_image.html.erb (2.9ms)
  Rendered collections/admin_new_collection.html.erb within layouts/admin (10.5ms)
Completed 200 OK in 18ms (Views: 16.1ms | ActiveRecord: 0.7ms)


Started GET "/collection_images?r_id=" for 127.0.0.1 at 2016-01-16 22:11:20 +0100
Processing by RestaurantsController#show as JSON
  Parameters: {"r_id"=>"", "id"=>"collection_images"}
  [1m[35mRestaurant Load (1.5ms)[0m  SELECT `restaurants`.* FROM `restaurants` WHERE `restaurants`.`slug` = 'collection_images' LIMIT 1
  [1m[36mRestaurant Load (0.3ms)[0m  [1mSELECT `restaurants`.* FROM `restaurants` WHERE `restaurants`.`id` = 0 LIMIT 1[0m
Completed 500 Internal Server Error in 4ms

ActiveRecord::RecordNotFound (Couldn't find Restaurant with id=collection_images):
  app/controllers/restaurants_controller.rb:193:in `show'


  Rendered /Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_dispatch/middleware/templates/rescues/_trace.erb (1.6ms)
  Rendered /Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_dispatch/middleware/templates/rescues/_request_and_response.erb (1.0ms)
  Rendered /Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_dispatch/middleware/templates/rescues/diagnostics.erb within rescues/layout (46.7ms)


Started POST "/admin/collections" for 127.0.0.1 at 2016-01-16 22:11:36 +0100
Processing by CollectionsController#create as HTML
  Parameters: {"utf8"=>"âœ“", "authenticity_token"=>"ZhR8a2fYr/EQcBrBVm2c17tt7AHk64f/gvsZ5fOllxc=", "admin"=>"true", "collection"=>{"name"=>"test12", "description"=>"testsafd"}, "collection_image"=>{"image_name"=>#<ActionDispatch::Http::UploadedFile:0x007feb06f8dd58 @original_filename="sunday_roast.png", @content_type="image/png", @headers="Content-Disposition: form-data; name=\"collection_image[image_name]\"; filename=\"sunday_roast.png\"\r\nContent-Type: image/png\r\n", @tempfile=#<Tempfile:/var/folders/rf/q4l8n5k56pnbjgkdtzrhq_w00000gn/T/RackMultipart20160116-28026-190a5e5>>}}
  [1m[35mCollection Load (0.3ms)[0m  SELECT `collections`.* FROM `collections` WHERE `collections`.`name` = 'test12' LIMIT 1
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35mSQL (0.6ms)[0m  INSERT INTO `collections` (`created_at`, `description`, `image_url`, `name`, `updated_at`) VALUES ('2016-01-16 21:11:36', 'testsafd', NULL, 'test12', '2016-01-16 21:11:36')
  [1m[36m (0.3ms)[0m  [1mCOMMIT[0m
Redirected to http://0.0.0.0:3000/collection/4/edit
Completed 302 Found in 7ms (ActiveRecord: 1.3ms)


Started GET "/collection/4/edit" for 127.0.0.1 at 2016-01-16 22:11:36 +0100
Processing by CollectionsController#edit_collection as HTML
  Parameters: {"id"=>"4"}
  [1m[35mUser Load (0.3ms)[0m  SELECT `users`.* FROM `users` WHERE `users`.`id` = 1 LIMIT 1
  [1m[36mCollection Load (0.2ms)[0m  [1mSELECT `collections`.* FROM `collections` WHERE `collections`.`id` = 4 LIMIT 1[0m
  Rendered collections/_collection_form.html.erb (6.3ms)
  Rendered collections/_collection_restaurants_form.html.erb (0.3ms)
  Rendered collections/_upload_collection_image.html.erb (0.9ms)
  Rendered collections/edit_collection.html.erb within layouts/admin (10.0ms)
Completed 200 OK in 34ms (Views: 15.6ms | ActiveRecord: 0.5ms)


Started GET "/collection_images?r_id=4" for 127.0.0.1 at 2016-01-16 22:11:36 +0100
Processing by RestaurantsController#show as JSON
  Parameters: {"r_id"=>"4", "id"=>"collection_images"}
  [1m[35mRestaurant Load (1.6ms)[0m  SELECT `restaurants`.* FROM `restaurants` WHERE `restaurants`.`slug` = 'collection_images' LIMIT 1
  [1m[36mRestaurant Load (0.2ms)[0m  [1mSELECT `restaurants`.* FROM `restaurants` WHERE `restaurants`.`id` = 0 LIMIT 1[0m
Completed 500 Internal Server Error in 4ms

ActiveRecord::RecordNotFound (Couldn't find Restaurant with id=collection_images):
  app/controllers/restaurants_controller.rb:193:in `show'


  Rendered /Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_dispatch/middleware/templates/rescues/_trace.erb (1.0ms)
  Rendered /Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_dispatch/middleware/templates/rescues/_request_and_response.erb (0.9ms)
  Rendered /Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_dispatch/middleware/templates/rescues/diagnostics.erb within rescues/layout (43.9ms)


Started PUT "/admin/collections/4" for 127.0.0.1 at 2016-01-16 22:13:02 +0100
Processing by CollectionsController#update as HTML
  Parameters: {"utf8"=>"âœ“", "authenticity_token"=>"ZhR8a2fYr/EQcBrBVm2c17tt7AHk64f/gvsZ5fOllxc=", "admin"=>"true", "collection"=>{"name"=>"test124", "description"=>"testsafd"}, "id"=>"4"}
  [1m[35mUser Load (0.6ms)[0m  SELECT `users`.* FROM `users` WHERE `users`.`id` = 1 LIMIT 1
  [1m[36mCollection Load (0.2ms)[0m  [1mSELECT `collections`.* FROM `collections` WHERE `collections`.`id` = 4 LIMIT 1[0m
  [1m[35m (0.1ms)[0m  BEGIN
  [1m[36m (0.3ms)[0m  [1mUPDATE `collections` SET `name` = 'test124', `updated_at` = '2016-01-16 21:13:02' WHERE `collections`.`id` = 4[0m
  [1m[35m (0.5ms)[0m  COMMIT
Redirected to http://0.0.0.0:3000/collection/4/edit
Completed 302 Found in 8ms (ActiveRecord: 1.7ms)


Started GET "/collection/4/edit" for 127.0.0.1 at 2016-01-16 22:13:02 +0100
Processing by CollectionsController#edit_collection as HTML
  Parameters: {"id"=>"4"}
  [1m[36mUser Load (0.3ms)[0m  [1mSELECT `users`.* FROM `users` WHERE `users`.`id` = 1 LIMIT 1[0m
  [1m[35mCollection Load (0.2ms)[0m  SELECT `collections`.* FROM `collections` WHERE `collections`.`id` = 4 LIMIT 1
  Rendered collections/_collection_form.html.erb (5.0ms)
  Rendered collections/_collection_restaurants_form.html.erb (0.3ms)
  Rendered collections/_upload_collection_image.html.erb (0.9ms)
  Rendered collections/edit_collection.html.erb within layouts/admin (9.5ms)
Completed 200 OK in 17ms (Views: 14.9ms | ActiveRecord: 0.5ms)


Started GET "/collection_images?r_id=4" for 127.0.0.1 at 2016-01-16 22:13:02 +0100
Processing by RestaurantsController#show as JSON
  Parameters: {"r_id"=>"4", "id"=>"collection_images"}
  [1m[36mRestaurant Load (1.6ms)[0m  [1mSELECT `restaurants`.* FROM `restaurants` WHERE `restaurants`.`slug` = 'collection_images' LIMIT 1[0m
  [1m[35mRestaurant Load (0.2ms)[0m  SELECT `restaurants`.* FROM `restaurants` WHERE `restaurants`.`id` = 0 LIMIT 1
Completed 500 Internal Server Error in 4ms

ActiveRecord::RecordNotFound (Couldn't find Restaurant with id=collection_images):
  app/controllers/restaurants_controller.rb:193:in `show'


  Rendered /Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_dispatch/middleware/templates/rescues/_trace.erb (1.6ms)
  Rendered /Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_dispatch/middleware/templates/rescues/_request_and_response.erb (0.9ms)
  Rendered /Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_dispatch/middleware/templates/rescues/diagnostics.erb within rescues/layout (50.2ms)


Started PUT "/admin/collections/4" for 127.0.0.1 at 2016-01-16 22:16:47 +0100

SyntaxError (/Users/kevinmuller/halalgems_backend/app/controllers/collections_controller.rb:84: syntax error, unexpected tIVAR, expecting ':'
            @collection_image.save
                             ^
/Users/kevinmuller/halalgems_backend/app/controllers/collections_controller.rb:90: syntax error, unexpected keyword_elsif, expecting keyword_end
      elsif params[:admin] == 'true'
           ^
/Users/kevinmuller/halalgems_backend/app/controllers/collections_controller.rb:175: syntax error, unexpected keyword_end, expecting end-of-input):
  activesupport (3.2.8) lib/active_support/dependencies.rb:469:in `load'
  activesupport (3.2.8) lib/active_support/dependencies.rb:469:in `block in load_file'
  activesupport (3.2.8) lib/active_support/dependencies.rb:639:in `new_constants_in'
  activesupport (3.2.8) lib/active_support/dependencies.rb:468:in `load_file'
  activesupport (3.2.8) lib/active_support/dependencies.rb:353:in `require_or_load'
  activesupport (3.2.8) lib/active_support/dependencies.rb:502:in `load_missing_constant'
  activesupport (3.2.8) lib/active_support/dependencies.rb:192:in `block in const_missing'
  activesupport (3.2.8) lib/active_support/dependencies.rb:190:in `each'
  activesupport (3.2.8) lib/active_support/dependencies.rb:190:in `const_missing'
  activesupport (3.2.8) lib/active_support/inflector/methods.rb:230:in `block in constantize'
  activesupport (3.2.8) lib/active_support/inflector/methods.rb:229:in `each'
  activesupport (3.2.8) lib/active_support/inflector/methods.rb:229:in `constantize'
  activesupport (3.2.8) lib/active_support/dependencies.rb:554:in `get'
  actionpack (3.2.8) lib/action_dispatch/routing/route_set.rb:69:in `controller_reference'
  actionpack (3.2.8) lib/action_dispatch/routing/route_set.rb:54:in `controller'
  actionpack (3.2.8) lib/action_dispatch/routing/route_set.rb:32:in `call'
  journey (1.0.4) lib/journey/router.rb:68:in `block in call'
  journey (1.0.4) lib/journey/router.rb:56:in `each'
  journey (1.0.4) lib/journey/router.rb:56:in `call'
  actionpack (3.2.8) lib/action_dispatch/routing/route_set.rb:600:in `call'
  omniauth (1.1.4) lib/omniauth/strategy.rb:184:in `call!'
  omniauth (1.1.4) lib/omniauth/strategy.rb:164:in `call'
  newrelic_rpm (3.7.3.204) lib/new_relic/rack/error_collector.rb:55:in `call'
  newrelic_rpm (3.7.3.204) lib/new_relic/rack/agent_hooks.rb:32:in `call'
  newrelic_rpm (3.7.3.204) lib/new_relic/rack/browser_monitoring.rb:27:in `call'
  newrelic_rpm (3.7.3.204) lib/new_relic/rack/developer_mode.rb:45:in `call'
  galetahub-simple_captcha (0.1.5) lib/simple_captcha/middleware.rb:20:in `call'
  /Users/kevinmuller/.rvm/gems/ruby-2.2.4/bundler/gems/client_side_validations-a6a515504520/lib/client_side_validations/middleware.rb:21:in `call'
  warden (1.1.1) lib/warden/manager.rb:35:in `block in call'
  warden (1.1.1) lib/warden/manager.rb:34:in `catch'
  warden (1.1.1) lib/warden/manager.rb:34:in `call'
  actionpack (3.2.8) lib/action_dispatch/middleware/best_standards_support.rb:17:in `call'
  rack (1.4.5) lib/rack/etag.rb:23:in `call'
  rack (1.4.5) lib/rack/conditionalget.rb:35:in `call'
  actionpack (3.2.8) lib/action_dispatch/middleware/head.rb:14:in `call'
  /Users/kevinmuller/.rvm/gems/ruby-2.2.4/bundler/gems/remotipart-aadc29e996c3/lib/remotipart/middleware.rb:27:in `call'
  actionpack (3.2.8) lib/action_dispatch/middleware/params_parser.rb:21:in `call'
  actionpack (3.2.8) lib/action_dispatch/middleware/flash.rb:242:in `call'
  rack (1.4.5) lib/rack/session/abstract/id.rb:210:in `context'
  rack (1.4.5) lib/rack/session/abstract/id.rb:205:in `call'
  actionpack (3.2.8) lib/action_dispatch/middleware/cookies.rb:339:in `call'
  dragonfly (0.9.15) lib/dragonfly/cookie_monster.rb:9:in `call'
  activerecord (3.2.8) lib/active_record/query_cache.rb:64:in `call'
  activerecord (3.2.8) lib/active_record/connection_adapters/abstract/connection_pool.rb:473:in `call'
  actionpack (3.2.8) lib/action_dispatch/middleware/callbacks.rb:28:in `block in call'
  activesupport (3.2.8) lib/active_support/callbacks.rb:405:in `_run__588680775837337795__call__3560462588581291106__callbacks'
  activesupport (3.2.8) lib/active_support/callbacks.rb:405:in `__run_callback'
  activesupport (3.2.8) lib/active_support/callbacks.rb:385:in `_run_call_callbacks'
  activesupport (3.2.8) lib/active_support/callbacks.rb:81:in `run_callbacks'
  actionpack (3.2.8) lib/action_dispatch/middleware/callbacks.rb:27:in `call'
  actionpack (3.2.8) lib/action_dispatch/middleware/reloader.rb:65:in `call'
  actionpack (3.2.8) lib/action_dispatch/middleware/remote_ip.rb:31:in `call'
  actionpack (3.2.8) lib/action_dispatch/middleware/debug_exceptions.rb:16:in `call'
  actionpack (3.2.8) lib/action_dispatch/middleware/show_exceptions.rb:56:in `call'
  railties (3.2.8) lib/rails/rack/logger.rb:26:in `call_app'
  railties (3.2.8) lib/rails/rack/logger.rb:16:in `call'
  quiet_assets (1.0.3) lib/quiet_assets.rb:23:in `call_with_quiet_assets'
  actionpack (3.2.8) lib/action_dispatch/middleware/request_id.rb:22:in `call'
  rack (1.4.5) lib/rack/methodoverride.rb:21:in `call'
  rack (1.4.5) lib/rack/runtime.rb:17:in `call'
  activesupport (3.2.8) lib/active_support/cache/strategy/local_cache.rb:72:in `call'
  rack (1.4.5) lib/rack/lock.rb:15:in `call'
  actionpack (3.2.8) lib/action_dispatch/middleware/static.rb:62:in `call'
  dragonfly (0.9.15) lib/dragonfly/middleware.rb:13:in `call'
  rack-cache (1.2) lib/rack/cache/context.rb:136:in `forward'
  rack-cache (1.2) lib/rack/cache/context.rb:143:in `pass'
  rack-cache (1.2) lib/rack/cache/context.rb:155:in `invalidate'
  rack-cache (1.2) lib/rack/cache/context.rb:71:in `call!'
  rack-cache (1.2) lib/rack/cache/context.rb:51:in `call'
  railties (3.2.8) lib/rails/engine.rb:479:in `call'
  railties (3.2.8) lib/rails/application.rb:223:in `call'
  rack (1.4.5) lib/rack/content_length.rb:14:in `call'
  railties (3.2.8) lib/rails/rack/log_tailer.rb:17:in `call'
  rack (1.4.5) lib/rack/handler/webrick.rb:59:in `service'
  /Users/kevinmuller/.rvm/rubies/ruby-2.2.4/lib/ruby/2.2.0/webrick/httpserver.rb:138:in `service'
  /Users/kevinmuller/.rvm/rubies/ruby-2.2.4/lib/ruby/2.2.0/webrick/httpserver.rb:94:in `run'
  /Users/kevinmuller/.rvm/rubies/ruby-2.2.4/lib/ruby/2.2.0/webrick/server.rb:294:in `block in start_thread'


  Rendered /Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_dispatch/middleware/templates/rescues/_trace.erb (1.5ms)
  Rendered /Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_dispatch/middleware/templates/rescues/_request_and_response.erb (1.3ms)
  Rendered /Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_dispatch/middleware/templates/rescues/diagnostics.erb within rescues/layout (48.1ms)


Started PUT "/admin/collections/4" for 127.0.0.1 at 2016-01-16 22:20:37 +0100
Processing by CollectionsController#update as HTML
  Parameters: {"utf8"=>"âœ“", "authenticity_token"=>"ZhR8a2fYr/EQcBrBVm2c17tt7AHk64f/gvsZ5fOllxc=", "admin"=>"true", "collection"=>{"name"=>"test125", "description"=>"testsafd"}, "collection_image"=>{"image_name"=>#<ActionDispatch::Http::UploadedFile:0x007feb0daaf5c8 @original_filename="sunday_roast.png", @content_type="image/png", @headers="Content-Disposition: form-data; name=\"collection_image[image_name]\"; filename=\"sunday_roast.png\"\r\nContent-Type: image/png\r\n", @tempfile=#<Tempfile:/var/folders/rf/q4l8n5k56pnbjgkdtzrhq_w00000gn/T/RackMultipart20160116-28026-4e4wki>>}, "id"=>"4"}
  [1m[36mUser Load (0.2ms)[0m  [1mSELECT `users`.* FROM `users` WHERE `users`.`id` = 1 LIMIT 1[0m
  [1m[35mCollection Load (0.3ms)[0m  SELECT `collections`.* FROM `collections` WHERE `collections`.`id` = 4 LIMIT 1
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35m (0.2ms)[0m  UPDATE `collections` SET `name` = 'test125', `updated_at` = '2016-01-16 21:20:37' WHERE `collections`.`id` = 4
  [1m[36m (0.8ms)[0m  [1mCOMMIT[0m
Redirected to http://0.0.0.0:3000/collection/4/edit
Completed 302 Found in 94ms (ActiveRecord: 3.8ms)


Started GET "/collection/4/edit" for 127.0.0.1 at 2016-01-16 22:20:37 +0100
Processing by CollectionsController#edit_collection as HTML
  Parameters: {"id"=>"4"}
  [1m[35mUser Load (0.3ms)[0m  SELECT `users`.* FROM `users` WHERE `users`.`id` = 1 LIMIT 1
  [1m[36mCollection Load (0.2ms)[0m  [1mSELECT `collections`.* FROM `collections` WHERE `collections`.`id` = 4 LIMIT 1[0m
  Rendered collections/_collection_form.html.erb (8.3ms)
  Rendered collections/_collection_restaurants_form.html.erb (0.3ms)
  Rendered collections/_upload_collection_image.html.erb (28.8ms)
  Rendered collections/edit_collection.html.erb within layouts/admin (40.9ms)
Completed 200 OK in 58ms (Views: 52.9ms | ActiveRecord: 1.5ms)


Started GET "/collection_images?r_id=4" for 127.0.0.1 at 2016-01-16 22:20:37 +0100
  [1m[35m (0.2ms)[0m  SELECT COUNT(*) FROM `filter_types` WHERE (code = 'features')
  [1m[36m (0.2ms)[0m  [1mSELECT COUNT(*) FROM `filters` WHERE (code = 'offer')[0m
  [1m[35mFilter Load (0.2ms)[0m  SELECT `filters`.* FROM `filters` WHERE (code = 'offer') LIMIT 1
  [1m[36mFilterType Load (0.3ms)[0m  [1mSELECT `filter_types`.* FROM `filter_types` WHERE (code = 'features') LIMIT 1[0m
  [1m[35mCACHE (0.0ms)[0m  SELECT `filters`.* FROM `filters` WHERE (code = 'offer') LIMIT 1
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT `filter_types`.* FROM `filter_types` WHERE (code = 'features') LIMIT 1[0m
Processing by RestaurantsController#show as JSON
  Parameters: {"r_id"=>"4", "id"=>"collection_images"}
  [1m[35mRestaurant Load (1.6ms)[0m  SELECT `restaurants`.* FROM `restaurants` WHERE `restaurants`.`slug` = 'collection_images' LIMIT 1
  [1m[36mRestaurant Load (0.2ms)[0m  [1mSELECT `restaurants`.* FROM `restaurants` WHERE `restaurants`.`id` = 0 LIMIT 1[0m
Completed 500 Internal Server Error in 10ms

ActiveRecord::RecordNotFound (Couldn't find Restaurant with id=collection_images):
  app/controllers/restaurants_controller.rb:193:in `show'


  Rendered /Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_dispatch/middleware/templates/rescues/_trace.erb (1.3ms)
  Rendered /Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_dispatch/middleware/templates/rescues/_request_and_response.erb (1.2ms)
  Rendered /Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_dispatch/middleware/templates/rescues/diagnostics.erb within rescues/layout (44.1ms)


Started GET "/collection/4/edit" for 127.0.0.1 at 2016-01-17 02:25:27 +0100
Processing by CollectionsController#edit_collection as HTML
  Parameters: {"id"=>"4"}
  [1m[35mUser Load (0.6ms)[0m  SELECT `users`.* FROM `users` WHERE `users`.`id` = 1 LIMIT 1
  [1m[36m (0.2ms)[0m  [1mBEGIN[0m
  [1m[35m (0.2ms)[0m  COMMIT
Completed 401 Unauthorized in 217ms


Started GET "/collection/4/edit" for 127.0.0.1 at 2016-01-17 02:25:27 +0100
Processing by CollectionsController#edit_collection as HTML
  Parameters: {"id"=>"4"}
Completed 401 Unauthorized in 219ms


Started GET "/users/sign_in" for 127.0.0.1 at 2016-01-17 02:25:28 +0100
Processing by SessionsController#new as HTML
  Rendered sessions/new.html.slim within layouts/application (11.9ms)
  Rendered layouts/_header.html.erb (2.0ms)
  Rendered layouts/_main_menu.html.slim (0.8ms)
  Rendered layouts/_sub_main_menu.html.slim (0.0ms)
  Rendered layouts/_flash_messages.html.erb (0.2ms)
  [1m[36mBasicsPage Load (0.4ms)[0m  [1mSELECT `basics_pages`.* FROM `basics_pages` WHERE `basics_pages`.`page_name` = 'Footer' LIMIT 1[0m
  Rendered layouts/_footer.html.slim (20.1ms)
Completed 200 OK in 84ms (Views: 81.0ms | ActiveRecord: 1.5ms)


Started POST "/users/sign_in" for 127.0.0.1 at 2016-01-17 02:25:40 +0100
Processing by SessionsController#create as HTML
  Parameters: {"utf8"=>"âœ“", "authenticity_token"=>"ZhR8a2fYr/EQcBrBVm2c17tt7AHk64f/gvsZ5fOllxc=", "user"=>{"email"=>"kevin.muller1220@gmail.com", "password"=>"[FILTERED]"}, "button"=>""}
  [1m[35mUser Load (0.4ms)[0m  SELECT `users`.* FROM `users` WHERE `users`.`email` = 'kevin.muller1220@gmail.com' LIMIT 1
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35m (0.1ms)[0m  COMMIT
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35m (0.3ms)[0m  UPDATE `users` SET `last_sign_in_at` = '2016-01-16 16:34:00', `current_sign_in_at` = '2016-01-17 01:25:40', `sign_in_count` = 7, `updated_at` = '2016-01-17 01:25:40' WHERE `users`.`id` = 1
  [1m[36m (0.5ms)[0m  [1mCOMMIT[0m
Redirected to http://0.0.0.0:3000/admin
Completed 302 Found in 71ms (ActiveRecord: 1.7ms)


Started GET "/admin" for 127.0.0.1 at 2016-01-17 02:25:40 +0100
  [1m[35m (0.3ms)[0m  SELECT COUNT(*) FROM `filter_types` WHERE (code = 'features')
  [1m[36m (0.4ms)[0m  [1mSELECT COUNT(*) FROM `filters` WHERE (code = 'offer')[0m
  [1m[35mFilter Load (0.2ms)[0m  SELECT `filters`.* FROM `filters` WHERE (code = 'offer') LIMIT 1
  [1m[36mFilterType Load (0.3ms)[0m  [1mSELECT `filter_types`.* FROM `filter_types` WHERE (code = 'features') LIMIT 1[0m
  [1m[35mCACHE (0.0ms)[0m  SELECT `filters`.* FROM `filters` WHERE (code = 'offer') LIMIT 1
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT `filter_types`.* FROM `filter_types` WHERE (code = 'features') LIMIT 1[0m
Processing by RestaurantsController#index as HTML
  [1m[35mUser Load (0.4ms)[0m  SELECT `users`.* FROM `users` WHERE `users`.`id` = 1 LIMIT 1
  Rendered shared/_restaurant_manage_tabs.html.erb (1.0ms)
  Rendered restaurants/_condition_fields.html.erb (16.0ms)
  [1m[36mRestaurant Load (1.7ms)[0m  [1mSELECT `restaurants`.* FROM `restaurants` ORDER BY disabled ASC,created_at DESC LIMIT 12 OFFSET 0[0m
  [1m[35mPhoto Load (0.7ms)[0m  SELECT `photos`.* FROM `photos` WHERE (restaurant_id = 1057 and cover = true and status = 1) LIMIT 1
  [1m[36mPhoto Load (0.4ms)[0m  [1mSELECT `photos`.* FROM `photos` WHERE `photos`.`restaurant_id` = 1057 AND `photos`.`status` = 1 ORDER BY restaurant_id ASC, created_at DESC LIMIT 1[0m
  [1m[35mCACHE (0.0ms)[0m  SELECT `photos`.* FROM `photos` WHERE (restaurant_id = 1057 and cover = true and status = 1) LIMIT 1
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT `photos`.* FROM `photos` WHERE `photos`.`restaurant_id` = 1057 AND `photos`.`status` = 1 ORDER BY restaurant_id ASC, created_at DESC LIMIT 1[0m
  [1m[35mPhoto Load (0.6ms)[0m  SELECT `photos`.* FROM `photos` WHERE (restaurant_id = 903 and cover = true and status = 1) LIMIT 1
  [1m[36mPhoto Load (0.3ms)[0m  [1mSELECT `photos`.* FROM `photos` WHERE `photos`.`restaurant_id` = 903 AND `photos`.`status` = 1 ORDER BY restaurant_id ASC, created_at DESC LIMIT 1[0m
  [1m[35mPhoto Load (0.3ms)[0m  SELECT `photos`.* FROM `photos` WHERE (restaurant_id = 876 and cover = true and status = 1) LIMIT 1
  [1m[36mPhoto Load (0.4ms)[0m  [1mSELECT `photos`.* FROM `photos` WHERE `photos`.`restaurant_id` = 876 AND `photos`.`status` = 1 ORDER BY restaurant_id ASC, created_at DESC LIMIT 1[0m
  [1m[35mPhoto Load (0.5ms)[0m  SELECT `photos`.* FROM `photos` WHERE (restaurant_id = 851 and cover = true and status = 1) LIMIT 1
  [1m[36mPhoto Load (0.3ms)[0m  [1mSELECT `photos`.* FROM `photos` WHERE `photos`.`restaurant_id` = 851 AND `photos`.`status` = 1 ORDER BY restaurant_id ASC, created_at DESC LIMIT 1[0m
  [1m[35mPhoto Load (0.3ms)[0m  SELECT `photos`.* FROM `photos` WHERE (restaurant_id = 693 and cover = true and status = 1) LIMIT 1
  [1m[36mPhoto Load (0.3ms)[0m  [1mSELECT `photos`.* FROM `photos` WHERE `photos`.`restaurant_id` = 693 AND `photos`.`status` = 1 ORDER BY restaurant_id ASC, created_at DESC LIMIT 1[0m
  [1m[35mPhoto Load (0.4ms)[0m  SELECT `photos`.* FROM `photos` WHERE (restaurant_id = 686 and cover = true and status = 1) LIMIT 1
  [1m[36mPhoto Load (0.3ms)[0m  [1mSELECT `photos`.* FROM `photos` WHERE `photos`.`restaurant_id` = 686 AND `photos`.`status` = 1 ORDER BY restaurant_id ASC, created_at DESC LIMIT 1[0m
  [1m[35mPhoto Load (0.3ms)[0m  SELECT `photos`.* FROM `photos` WHERE (restaurant_id = 669 and cover = true and status = 1) LIMIT 1
  [1m[36mPhoto Load (0.3ms)[0m  [1mSELECT `photos`.* FROM `photos` WHERE `photos`.`restaurant_id` = 669 AND `photos`.`status` = 1 ORDER BY restaurant_id ASC, created_at DESC LIMIT 1[0m
  [1m[35mPhoto Load (0.5ms)[0m  SELECT `photos`.* FROM `photos` WHERE (restaurant_id = 251 and cover = true and status = 1) LIMIT 1
  [1m[36mPhoto Load (0.4ms)[0m  [1mSELECT `photos`.* FROM `photos` WHERE `photos`.`restaurant_id` = 251 AND `photos`.`status` = 1 ORDER BY restaurant_id ASC, created_at DESC LIMIT 1[0m
  [1m[35mPhoto Load (0.6ms)[0m  SELECT `photos`.* FROM `photos` WHERE (restaurant_id = 250 and cover = true and status = 1) LIMIT 1
  [1m[36mPhoto Load (0.3ms)[0m  [1mSELECT `photos`.* FROM `photos` WHERE `photos`.`restaurant_id` = 250 AND `photos`.`status` = 1 ORDER BY restaurant_id ASC, created_at DESC LIMIT 1[0m
  [1m[35mPhoto Load (0.4ms)[0m  SELECT `photos`.* FROM `photos` WHERE (restaurant_id = 237 and cover = true and status = 1) LIMIT 1
  [1m[36mPhoto Load (0.3ms)[0m  [1mSELECT `photos`.* FROM `photos` WHERE `photos`.`restaurant_id` = 237 AND `photos`.`status` = 1 ORDER BY restaurant_id ASC, created_at DESC LIMIT 1[0m
  [1m[35mPhoto Load (0.3ms)[0m  SELECT `photos`.* FROM `photos` WHERE (restaurant_id = 231 and cover = true and status = 1) LIMIT 1
  [1m[36mPhoto Load (0.3ms)[0m  [1mSELECT `photos`.* FROM `photos` WHERE `photos`.`restaurant_id` = 231 AND `photos`.`status` = 1 ORDER BY restaurant_id ASC, created_at DESC LIMIT 1[0m
  [1m[35mPhoto Load (0.4ms)[0m  SELECT `photos`.* FROM `photos` WHERE (restaurant_id = 222 and cover = true and status = 1) LIMIT 1
  [1m[36mPhoto Load (0.8ms)[0m  [1mSELECT `photos`.* FROM `photos` WHERE `photos`.`restaurant_id` = 222 AND `photos`.`status` = 1 ORDER BY restaurant_id ASC, created_at DESC LIMIT 1[0m
  [1m[35m (0.4ms)[0m  SELECT COUNT(*) FROM `restaurants` 
  Rendered restaurants/index.html.erb within layouts/admin (184.0ms)
Completed 200 OK in 209ms (Views: 191.2ms | ActiveRecord: 14.4ms)


Started GET "/admin/restaurants" for 127.0.0.1 at 2016-01-17 02:25:50 +0100
Processing by RestaurantsController#index as HTML
  [1m[36mUser Load (0.4ms)[0m  [1mSELECT `users`.* FROM `users` WHERE `users`.`id` = 1 LIMIT 1[0m
  Rendered shared/_restaurant_manage_tabs.html.erb (1.0ms)
  Rendered restaurants/_condition_fields.html.erb (18.5ms)
  [1m[35mRestaurant Load (1.0ms)[0m  SELECT `restaurants`.* FROM `restaurants` ORDER BY disabled ASC,created_at DESC LIMIT 12 OFFSET 0
  [1m[36mPhoto Load (0.4ms)[0m  [1mSELECT `photos`.* FROM `photos` WHERE (restaurant_id = 1057 and cover = true and status = 1) LIMIT 1[0m
  [1m[35mPhoto Load (0.3ms)[0m  SELECT `photos`.* FROM `photos` WHERE `photos`.`restaurant_id` = 1057 AND `photos`.`status` = 1 ORDER BY restaurant_id ASC, created_at DESC LIMIT 1
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT `photos`.* FROM `photos` WHERE (restaurant_id = 1057 and cover = true and status = 1) LIMIT 1[0m
  [1m[35mCACHE (0.0ms)[0m  SELECT `photos`.* FROM `photos` WHERE `photos`.`restaurant_id` = 1057 AND `photos`.`status` = 1 ORDER BY restaurant_id ASC, created_at DESC LIMIT 1
  [1m[36mPhoto Load (0.5ms)[0m  [1mSELECT `photos`.* FROM `photos` WHERE (restaurant_id = 903 and cover = true and status = 1) LIMIT 1[0m
  [1m[35mPhoto Load (0.4ms)[0m  SELECT `photos`.* FROM `photos` WHERE `photos`.`restaurant_id` = 903 AND `photos`.`status` = 1 ORDER BY restaurant_id ASC, created_at DESC LIMIT 1
  [1m[36mPhoto Load (0.5ms)[0m  [1mSELECT `photos`.* FROM `photos` WHERE (restaurant_id = 876 and cover = true and status = 1) LIMIT 1[0m
  [1m[35mPhoto Load (0.3ms)[0m  SELECT `photos`.* FROM `photos` WHERE `photos`.`restaurant_id` = 876 AND `photos`.`status` = 1 ORDER BY restaurant_id ASC, created_at DESC LIMIT 1
  [1m[36mPhoto Load (0.5ms)[0m  [1mSELECT `photos`.* FROM `photos` WHERE (restaurant_id = 851 and cover = true and status = 1) LIMIT 1[0m
  [1m[35mPhoto Load (0.8ms)[0m  SELECT `photos`.* FROM `photos` WHERE `photos`.`restaurant_id` = 851 AND `photos`.`status` = 1 ORDER BY restaurant_id ASC, created_at DESC LIMIT 1
  [1m[36mPhoto Load (0.4ms)[0m  [1mSELECT `photos`.* FROM `photos` WHERE (restaurant_id = 693 and cover = true and status = 1) LIMIT 1[0m
  [1m[35mPhoto Load (0.3ms)[0m  SELECT `photos`.* FROM `photos` WHERE `photos`.`restaurant_id` = 693 AND `photos`.`status` = 1 ORDER BY restaurant_id ASC, created_at DESC LIMIT 1
  [1m[36mPhoto Load (0.4ms)[0m  [1mSELECT `photos`.* FROM `photos` WHERE (restaurant_id = 686 and cover = true and status = 1) LIMIT 1[0m
  [1m[35mPhoto Load (0.3ms)[0m  SELECT `photos`.* FROM `photos` WHERE `photos`.`restaurant_id` = 686 AND `photos`.`status` = 1 ORDER BY restaurant_id ASC, created_at DESC LIMIT 1
  [1m[36mPhoto Load (0.4ms)[0m  [1mSELECT `photos`.* FROM `photos` WHERE (restaurant_id = 669 and cover = true and status = 1) LIMIT 1[0m
  [1m[35mPhoto Load (0.4ms)[0m  SELECT `photos`.* FROM `photos` WHERE `photos`.`restaurant_id` = 669 AND `photos`.`status` = 1 ORDER BY restaurant_id ASC, created_at DESC LIMIT 1
  [1m[36mPhoto Load (0.3ms)[0m  [1mSELECT `photos`.* FROM `photos` WHERE (restaurant_id = 251 and cover = true and status = 1) LIMIT 1[0m
  [1m[35mPhoto Load (0.3ms)[0m  SELECT `photos`.* FROM `photos` WHERE `photos`.`restaurant_id` = 251 AND `photos`.`status` = 1 ORDER BY restaurant_id ASC, created_at DESC LIMIT 1
  [1m[36mPhoto Load (0.4ms)[0m  [1mSELECT `photos`.* FROM `photos` WHERE (restaurant_id = 250 and cover = true and status = 1) LIMIT 1[0m
  [1m[35mPhoto Load (0.3ms)[0m  SELECT `photos`.* FROM `photos` WHERE `photos`.`restaurant_id` = 250 AND `photos`.`status` = 1 ORDER BY restaurant_id ASC, created_at DESC LIMIT 1
  [1m[36mPhoto Load (0.5ms)[0m  [1mSELECT `photos`.* FROM `photos` WHERE (restaurant_id = 237 and cover = true and status = 1) LIMIT 1[0m
  [1m[35mPhoto Load (0.3ms)[0m  SELECT `photos`.* FROM `photos` WHERE `photos`.`restaurant_id` = 237 AND `photos`.`status` = 1 ORDER BY restaurant_id ASC, created_at DESC LIMIT 1
  [1m[36mPhoto Load (0.4ms)[0m  [1mSELECT `photos`.* FROM `photos` WHERE (restaurant_id = 231 and cover = true and status = 1) LIMIT 1[0m
  [1m[35mPhoto Load (0.3ms)[0m  SELECT `photos`.* FROM `photos` WHERE `photos`.`restaurant_id` = 231 AND `photos`.`status` = 1 ORDER BY restaurant_id ASC, created_at DESC LIMIT 1
  [1m[36mPhoto Load (0.4ms)[0m  [1mSELECT `photos`.* FROM `photos` WHERE (restaurant_id = 222 and cover = true and status = 1) LIMIT 1[0m
  [1m[35mPhoto Load (0.4ms)[0m  SELECT `photos`.* FROM `photos` WHERE `photos`.`restaurant_id` = 222 AND `photos`.`status` = 1 ORDER BY restaurant_id ASC, created_at DESC LIMIT 1
  [1m[36m (0.3ms)[0m  [1mSELECT COUNT(*) FROM `restaurants` [0m
  Rendered restaurants/index.html.erb within layouts/admin (109.4ms)
Completed 200 OK in 119ms (Views: 104.8ms | ActiveRecord: 10.9ms)


Started GET "/admin/restaurants" for 127.0.0.1 at 2016-01-17 02:25:53 +0100
Processing by RestaurantsController#index as HTML
  [1m[35mUser Load (0.4ms)[0m  SELECT `users`.* FROM `users` WHERE `users`.`id` = 1 LIMIT 1
  Rendered shared/_restaurant_manage_tabs.html.erb (0.9ms)
  Rendered restaurants/_condition_fields.html.erb (9.3ms)
  [1m[36mRestaurant Load (0.9ms)[0m  [1mSELECT `restaurants`.* FROM `restaurants` ORDER BY disabled ASC,created_at DESC LIMIT 12 OFFSET 0[0m
  [1m[35mPhoto Load (0.4ms)[0m  SELECT `photos`.* FROM `photos` WHERE (restaurant_id = 1057 and cover = true and status = 1) LIMIT 1
  [1m[36mPhoto Load (0.3ms)[0m  [1mSELECT `photos`.* FROM `photos` WHERE `photos`.`restaurant_id` = 1057 AND `photos`.`status` = 1 ORDER BY restaurant_id ASC, created_at DESC LIMIT 1[0m
  [1m[35mCACHE (0.0ms)[0m  SELECT `photos`.* FROM `photos` WHERE (restaurant_id = 1057 and cover = true and status = 1) LIMIT 1
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT `photos`.* FROM `photos` WHERE `photos`.`restaurant_id` = 1057 AND `photos`.`status` = 1 ORDER BY restaurant_id ASC, created_at DESC LIMIT 1[0m
  [1m[35mPhoto Load (0.4ms)[0m  SELECT `photos`.* FROM `photos` WHERE (restaurant_id = 903 and cover = true and status = 1) LIMIT 1
  [1m[36mPhoto Load (0.4ms)[0m  [1mSELECT `photos`.* FROM `photos` WHERE `photos`.`restaurant_id` = 903 AND `photos`.`status` = 1 ORDER BY restaurant_id ASC, created_at DESC LIMIT 1[0m
  [1m[35mPhoto Load (0.6ms)[0m  SELECT `photos`.* FROM `photos` WHERE (restaurant_id = 876 and cover = true and status = 1) LIMIT 1
  [1m[36mPhoto Load (0.4ms)[0m  [1mSELECT `photos`.* FROM `photos` WHERE `photos`.`restaurant_id` = 876 AND `photos`.`status` = 1 ORDER BY restaurant_id ASC, created_at DESC LIMIT 1[0m
  [1m[35mPhoto Load (0.4ms)[0m  SELECT `photos`.* FROM `photos` WHERE (restaurant_id = 851 and cover = true and status = 1) LIMIT 1
  [1m[36mPhoto Load (0.3ms)[0m  [1mSELECT `photos`.* FROM `photos` WHERE `photos`.`restaurant_id` = 851 AND `photos`.`status` = 1 ORDER BY restaurant_id ASC, created_at DESC LIMIT 1[0m
  [1m[35mPhoto Load (0.4ms)[0m  SELECT `photos`.* FROM `photos` WHERE (restaurant_id = 693 and cover = true and status = 1) LIMIT 1
  [1m[36mPhoto Load (0.3ms)[0m  [1mSELECT `photos`.* FROM `photos` WHERE `photos`.`restaurant_id` = 693 AND `photos`.`status` = 1 ORDER BY restaurant_id ASC, created_at DESC LIMIT 1[0m
  [1m[35mPhoto Load (0.4ms)[0m  SELECT `photos`.* FROM `photos` WHERE (restaurant_id = 686 and cover = true and status = 1) LIMIT 1
  [1m[36mPhoto Load (0.3ms)[0m  [1mSELECT `photos`.* FROM `photos` WHERE `photos`.`restaurant_id` = 686 AND `photos`.`status` = 1 ORDER BY restaurant_id ASC, created_at DESC LIMIT 1[0m
  [1m[35mPhoto Load (0.4ms)[0m  SELECT `photos`.* FROM `photos` WHERE (restaurant_id = 669 and cover = true and status = 1) LIMIT 1
  [1m[36mPhoto Load (0.3ms)[0m  [1mSELECT `photos`.* FROM `photos` WHERE `photos`.`restaurant_id` = 669 AND `photos`.`status` = 1 ORDER BY restaurant_id ASC, created_at DESC LIMIT 1[0m
  [1m[35mPhoto Load (0.5ms)[0m  SELECT `photos`.* FROM `photos` WHERE (restaurant_id = 251 and cover = true and status = 1) LIMIT 1
  [1m[36mPhoto Load (0.3ms)[0m  [1mSELECT `photos`.* FROM `photos` WHERE `photos`.`restaurant_id` = 251 AND `photos`.`status` = 1 ORDER BY restaurant_id ASC, created_at DESC LIMIT 1[0m
  [1m[35mPhoto Load (0.4ms)[0m  SELECT `photos`.* FROM `photos` WHERE (restaurant_id = 250 and cover = true and status = 1) LIMIT 1
  [1m[36mPhoto Load (0.3ms)[0m  [1mSELECT `photos`.* FROM `photos` WHERE `photos`.`restaurant_id` = 250 AND `photos`.`status` = 1 ORDER BY restaurant_id ASC, created_at DESC LIMIT 1[0m
  [1m[35mPhoto Load (0.3ms)[0m  SELECT `photos`.* FROM `photos` WHERE (restaurant_id = 237 and cover = true and status = 1) LIMIT 1
  [1m[36mPhoto Load (0.3ms)[0m  [1mSELECT `photos`.* FROM `photos` WHERE `photos`.`restaurant_id` = 237 AND `photos`.`status` = 1 ORDER BY restaurant_id ASC, created_at DESC LIMIT 1[0m
  [1m[35mPhoto Load (0.3ms)[0m  SELECT `photos`.* FROM `photos` WHERE (restaurant_id = 231 and cover = true and status = 1) LIMIT 1
  [1m[36mPhoto Load (0.3ms)[0m  [1mSELECT `photos`.* FROM `photos` WHERE `photos`.`restaurant_id` = 231 AND `photos`.`status` = 1 ORDER BY restaurant_id ASC, created_at DESC LIMIT 1[0m
  [1m[35mPhoto Load (0.5ms)[0m  SELECT `photos`.* FROM `photos` WHERE (restaurant_id = 222 and cover = true and status = 1) LIMIT 1
  [1m[36mPhoto Load (0.3ms)[0m  [1mSELECT `photos`.* FROM `photos` WHERE `photos`.`restaurant_id` = 222 AND `photos`.`status` = 1 ORDER BY restaurant_id ASC, created_at DESC LIMIT 1[0m
  [1m[35m (0.4ms)[0m  SELECT COUNT(*) FROM `restaurants` 
  Rendered restaurants/index.html.erb within layouts/admin (122.4ms)
Completed 200 OK in 131ms (Views: 118.4ms | ActiveRecord: 10.3ms)


Started GET "/admin/collections" for 127.0.0.1 at 2016-01-17 02:25:55 +0100
Processing by CollectionsController#index as HTML
  Rendered shared/_restaurant_manage_tabs.html.erb (1.2ms)
  [1m[36mCollection Load (0.3ms)[0m  [1mSELECT `collections`.* FROM `collections` ORDER BY name ASC, created_at DESC LIMIT 12 OFFSET 0[0m
  [1m[35m (0.3ms)[0m  SELECT COUNT(*) FROM `collections` 
  Rendered collections/index.erb within layouts/admin (20.6ms)
  [1m[36mUser Load (0.4ms)[0m  [1mSELECT `users`.* FROM `users` WHERE `users`.`id` = 1 LIMIT 1[0m
Completed 200 OK in 44ms (Views: 40.0ms | ActiveRecord: 1.8ms)


Started GET "/admin/collections/admin_new_collection" for 127.0.0.1 at 2016-01-17 02:25:59 +0100
Processing by CollectionsController#admin_new_collection as HTML
  [1m[35mUser Load (0.5ms)[0m  SELECT `users`.* FROM `users` WHERE `users`.`id` = 1 LIMIT 1
  Rendered collections/_collection_form.html.erb (9.2ms)
  Rendered collections/_collection_restaurants_form.html.erb (0.3ms)
  Rendered collections/_upload_collection_image.html.erb (27.2ms)
  Rendered collections/admin_new_collection.html.erb within layouts/admin (40.9ms)
Completed 200 OK in 70ms (Views: 65.9ms | ActiveRecord: 1.6ms)


Started GET "/collection_images?r_id=" for 127.0.0.1 at 2016-01-17 02:25:59 +0100
Processing by RestaurantsController#show as JSON
  Parameters: {"r_id"=>"", "id"=>"collection_images"}
  [1m[36mRestaurant Load (1.7ms)[0m  [1mSELECT `restaurants`.* FROM `restaurants` WHERE `restaurants`.`slug` = 'collection_images' LIMIT 1[0m
  [1m[35mRestaurant Load (0.3ms)[0m  SELECT `restaurants`.* FROM `restaurants` WHERE `restaurants`.`id` = 0 LIMIT 1
Completed 500 Internal Server Error in 4ms

ActiveRecord::RecordNotFound (Couldn't find Restaurant with id=collection_images):
  app/controllers/restaurants_controller.rb:193:in `show'


  Rendered /Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_dispatch/middleware/templates/rescues/_trace.erb (1.2ms)
  Rendered /Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_dispatch/middleware/templates/rescues/_request_and_response.erb (1.1ms)
  Rendered /Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_dispatch/middleware/templates/rescues/diagnostics.erb within rescues/layout (56.7ms)


Started POST "/admin/collections" for 127.0.0.1 at 2016-01-17 02:26:12 +0100
Processing by CollectionsController#create as HTML
  Parameters: {"utf8"=>"âœ“", "authenticity_token"=>"ZhR8a2fYr/EQcBrBVm2c17tt7AHk64f/gvsZ5fOllxc=", "admin"=>"true", "collection"=>{"name"=>"testtest", "description"=>"test"}, "collection_image"=>{"image_name"=>#<ActionDispatch::Http::UploadedFile:0x007feb0df5d110 @original_filename="steak.png", @content_type="image/png", @headers="Content-Disposition: form-data; name=\"collection_image[image_name]\"; filename=\"steak.png\"\r\nContent-Type: image/png\r\n", @tempfile=#<Tempfile:/var/folders/rf/q4l8n5k56pnbjgkdtzrhq_w00000gn/T/RackMultipart20160117-28026-pv1dt4>>}}
  [1m[36mCollection Load (0.3ms)[0m  [1mSELECT `collections`.* FROM `collections` WHERE `collections`.`name` = 'testtest' LIMIT 1[0m
  [1m[35m (0.1ms)[0m  BEGIN
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO `collections` (`created_at`, `description`, `image_url`, `name`, `updated_at`) VALUES ('2016-01-17 01:26:12', 'test', NULL, 'testtest', '2016-01-17 01:26:12')[0m
  [1m[35m (0.5ms)[0m  COMMIT
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35m (0.3ms)[0m  ROLLBACK
Redirected to http://0.0.0.0:3000/collection/5/edit
Completed 302 Found in 13ms (ActiveRecord: 1.6ms)


Started GET "/collection/5/edit" for 127.0.0.1 at 2016-01-17 02:26:12 +0100
Processing by CollectionsController#edit_collection as HTML
  Parameters: {"id"=>"5"}
  [1m[36mUser Load (0.2ms)[0m  [1mSELECT `users`.* FROM `users` WHERE `users`.`id` = 1 LIMIT 1[0m
  [1m[35mCollection Load (0.2ms)[0m  SELECT `collections`.* FROM `collections` WHERE `collections`.`id` = 5 LIMIT 1
  Rendered collections/_collection_form.html.erb (5.7ms)
  Rendered collections/_collection_restaurants_form.html.erb (0.3ms)
  Rendered collections/_upload_collection_image.html.erb (1.0ms)
  Rendered collections/edit_collection.html.erb within layouts/admin (9.5ms)
Completed 200 OK in 19ms (Views: 15.4ms | ActiveRecord: 0.4ms)


Started GET "/collection_images?r_id=5" for 127.0.0.1 at 2016-01-17 02:26:12 +0100
Processing by RestaurantsController#show as JSON
  Parameters: {"r_id"=>"5", "id"=>"collection_images"}
  [1m[36mRestaurant Load (1.6ms)[0m  [1mSELECT `restaurants`.* FROM `restaurants` WHERE `restaurants`.`slug` = 'collection_images' LIMIT 1[0m
  [1m[35mRestaurant Load (0.2ms)[0m  SELECT `restaurants`.* FROM `restaurants` WHERE `restaurants`.`id` = 0 LIMIT 1
Completed 500 Internal Server Error in 4ms

ActiveRecord::RecordNotFound (Couldn't find Restaurant with id=collection_images):
  app/controllers/restaurants_controller.rb:193:in `show'


  Rendered /Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_dispatch/middleware/templates/rescues/_trace.erb (1.3ms)
  Rendered /Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_dispatch/middleware/templates/rescues/_request_and_response.erb (1.0ms)
  Rendered /Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_dispatch/middleware/templates/rescues/diagnostics.erb within rescues/layout (45.5ms)


Started PUT "/admin/collections/5" for 127.0.0.1 at 2016-01-17 02:28:24 +0100
Processing by CollectionsController#update as HTML
  Parameters: {"utf8"=>"âœ“", "authenticity_token"=>"ZhR8a2fYr/EQcBrBVm2c17tt7AHk64f/gvsZ5fOllxc=", "admin"=>"true", "collection"=>{"name"=>"testtest123", "description"=>"test"}, "collection_image"=>{"image_name"=>#<ActionDispatch::Http::UploadedFile:0x007feb09cd1170 @original_filename="indian.png", @content_type="image/png", @headers="Content-Disposition: form-data; name=\"collection_image[image_name]\"; filename=\"indian.png\"\r\nContent-Type: image/png\r\n", @tempfile=#<Tempfile:/var/folders/rf/q4l8n5k56pnbjgkdtzrhq_w00000gn/T/RackMultipart20160117-28026-rv6pfc>>}, "id"=>"5"}
  [1m[36mUser Load (0.3ms)[0m  [1mSELECT `users`.* FROM `users` WHERE `users`.`id` = 1 LIMIT 1[0m
  [1m[35mCollection Load (0.2ms)[0m  SELECT `collections`.* FROM `collections` WHERE `collections`.`id` = 5 LIMIT 1
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35m (0.7ms)[0m  UPDATE `collections` SET `name` = 'testtest123', `updated_at` = '2016-01-17 01:28:24' WHERE `collections`.`id` = 5
  [1m[36m (0.8ms)[0m  [1mCOMMIT[0m
Redirected to http://0.0.0.0:3000/collection/5/edit
Completed 302 Found in 122ms (ActiveRecord: 4.1ms)


Started GET "/collection/5/edit" for 127.0.0.1 at 2016-01-17 02:28:24 +0100
Processing by CollectionsController#edit_collection as HTML
  Parameters: {"id"=>"5"}
  [1m[35mUser Load (0.4ms)[0m  SELECT `users`.* FROM `users` WHERE `users`.`id` = 1 LIMIT 1
  [1m[36mCollection Load (0.2ms)[0m  [1mSELECT `collections`.* FROM `collections` WHERE `collections`.`id` = 5 LIMIT 1[0m
  Rendered collections/_collection_form.html.erb (7.9ms)
  Rendered collections/_collection_restaurants_form.html.erb (0.5ms)
  Rendered collections/_upload_collection_image.html.erb (29.0ms)
  Rendered collections/edit_collection.html.erb within layouts/admin (40.7ms)
Completed 200 OK in 57ms (Views: 50.1ms | ActiveRecord: 1.9ms)


Started GET "/collection_images?r_id=5" for 127.0.0.1 at 2016-01-17 02:28:24 +0100
  [1m[35m (0.2ms)[0m  SELECT COUNT(*) FROM `filter_types` WHERE (code = 'features')
  [1m[36m (0.2ms)[0m  [1mSELECT COUNT(*) FROM `filters` WHERE (code = 'offer')[0m
  [1m[35mFilter Load (0.2ms)[0m  SELECT `filters`.* FROM `filters` WHERE (code = 'offer') LIMIT 1
  [1m[36mFilterType Load (0.3ms)[0m  [1mSELECT `filter_types`.* FROM `filter_types` WHERE (code = 'features') LIMIT 1[0m
  [1m[35mCACHE (0.0ms)[0m  SELECT `filters`.* FROM `filters` WHERE (code = 'offer') LIMIT 1
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT `filter_types`.* FROM `filter_types` WHERE (code = 'features') LIMIT 1[0m
Processing by RestaurantsController#show as JSON
  Parameters: {"r_id"=>"5", "id"=>"collection_images"}
  [1m[35mRestaurant Load (1.7ms)[0m  SELECT `restaurants`.* FROM `restaurants` WHERE `restaurants`.`slug` = 'collection_images' LIMIT 1
  [1m[36mRestaurant Load (0.2ms)[0m  [1mSELECT `restaurants`.* FROM `restaurants` WHERE `restaurants`.`id` = 0 LIMIT 1[0m
Completed 500 Internal Server Error in 31ms

ActiveRecord::RecordNotFound (Couldn't find Restaurant with id=collection_images):
  app/controllers/restaurants_controller.rb:193:in `show'


  Rendered /Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_dispatch/middleware/templates/rescues/_trace.erb (1.5ms)
  Rendered /Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_dispatch/middleware/templates/rescues/_request_and_response.erb (1.0ms)
  Rendered /Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_dispatch/middleware/templates/rescues/diagnostics.erb within rescues/layout (47.3ms)


Started GET "/admin/restaurants" for 127.0.0.1 at 2016-01-17 02:28:50 +0100
Processing by RestaurantsController#index as HTML
  [1m[35mUser Load (0.3ms)[0m  SELECT `users`.* FROM `users` WHERE `users`.`id` = 1 LIMIT 1
  Rendered shared/_restaurant_manage_tabs.html.erb (0.7ms)
  Rendered restaurants/_condition_fields.html.erb (12.8ms)
  [1m[36mRestaurant Load (1.1ms)[0m  [1mSELECT `restaurants`.* FROM `restaurants` ORDER BY disabled ASC,created_at DESC LIMIT 12 OFFSET 0[0m
  [1m[35mPhoto Load (0.4ms)[0m  SELECT `photos`.* FROM `photos` WHERE (restaurant_id = 1057 and cover = true and status = 1) LIMIT 1
  [1m[36mPhoto Load (0.3ms)[0m  [1mSELECT `photos`.* FROM `photos` WHERE `photos`.`restaurant_id` = 1057 AND `photos`.`status` = 1 ORDER BY restaurant_id ASC, created_at DESC LIMIT 1[0m
  [1m[35mCACHE (0.0ms)[0m  SELECT `photos`.* FROM `photos` WHERE (restaurant_id = 1057 and cover = true and status = 1) LIMIT 1
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT `photos`.* FROM `photos` WHERE `photos`.`restaurant_id` = 1057 AND `photos`.`status` = 1 ORDER BY restaurant_id ASC, created_at DESC LIMIT 1[0m
  [1m[35mPhoto Load (0.5ms)[0m  SELECT `photos`.* FROM `photos` WHERE (restaurant_id = 903 and cover = true and status = 1) LIMIT 1
  [1m[36mPhoto Load (0.3ms)[0m  [1mSELECT `photos`.* FROM `photos` WHERE `photos`.`restaurant_id` = 903 AND `photos`.`status` = 1 ORDER BY restaurant_id ASC, created_at DESC LIMIT 1[0m
  [1m[35mPhoto Load (0.3ms)[0m  SELECT `photos`.* FROM `photos` WHERE (restaurant_id = 876 and cover = true and status = 1) LIMIT 1
  [1m[36mPhoto Load (0.3ms)[0m  [1mSELECT `photos`.* FROM `photos` WHERE `photos`.`restaurant_id` = 876 AND `photos`.`status` = 1 ORDER BY restaurant_id ASC, created_at DESC LIMIT 1[0m
  [1m[35mPhoto Load (0.3ms)[0m  SELECT `photos`.* FROM `photos` WHERE (restaurant_id = 851 and cover = true and status = 1) LIMIT 1
  [1m[36mPhoto Load (0.3ms)[0m  [1mSELECT `photos`.* FROM `photos` WHERE `photos`.`restaurant_id` = 851 AND `photos`.`status` = 1 ORDER BY restaurant_id ASC, created_at DESC LIMIT 1[0m
  [1m[35mPhoto Load (0.3ms)[0m  SELECT `photos`.* FROM `photos` WHERE (restaurant_id = 693 and cover = true and status = 1) LIMIT 1
  [1m[36mPhoto Load (0.3ms)[0m  [1mSELECT `photos`.* FROM `photos` WHERE `photos`.`restaurant_id` = 693 AND `photos`.`status` = 1 ORDER BY restaurant_id ASC, created_at DESC LIMIT 1[0m
  [1m[35mPhoto Load (0.3ms)[0m  SELECT `photos`.* FROM `photos` WHERE (restaurant_id = 686 and cover = true and status = 1) LIMIT 1
  [1m[36mPhoto Load (0.3ms)[0m  [1mSELECT `photos`.* FROM `photos` WHERE `photos`.`restaurant_id` = 686 AND `photos`.`status` = 1 ORDER BY restaurant_id ASC, created_at DESC LIMIT 1[0m
  [1m[35mPhoto Load (0.4ms)[0m  SELECT `photos`.* FROM `photos` WHERE (restaurant_id = 669 and cover = true and status = 1) LIMIT 1
  [1m[36mPhoto Load (0.3ms)[0m  [1mSELECT `photos`.* FROM `photos` WHERE `photos`.`restaurant_id` = 669 AND `photos`.`status` = 1 ORDER BY restaurant_id ASC, created_at DESC LIMIT 1[0m
  [1m[35mPhoto Load (0.3ms)[0m  SELECT `photos`.* FROM `photos` WHERE (restaurant_id = 251 and cover = true and status = 1) LIMIT 1
  [1m[36mPhoto Load (0.3ms)[0m  [1mSELECT `photos`.* FROM `photos` WHERE `photos`.`restaurant_id` = 251 AND `photos`.`status` = 1 ORDER BY restaurant_id ASC, created_at DESC LIMIT 1[0m
  [1m[35mPhoto Load (0.3ms)[0m  SELECT `photos`.* FROM `photos` WHERE (restaurant_id = 250 and cover = true and status = 1) LIMIT 1
  [1m[36mPhoto Load (0.3ms)[0m  [1mSELECT `photos`.* FROM `photos` WHERE `photos`.`restaurant_id` = 250 AND `photos`.`status` = 1 ORDER BY restaurant_id ASC, created_at DESC LIMIT 1[0m
  [1m[35mPhoto Load (0.3ms)[0m  SELECT `photos`.* FROM `photos` WHERE (restaurant_id = 237 and cover = true and status = 1) LIMIT 1
  [1m[36mPhoto Load (0.3ms)[0m  [1mSELECT `photos`.* FROM `photos` WHERE `photos`.`restaurant_id` = 237 AND `photos`.`status` = 1 ORDER BY restaurant_id ASC, created_at DESC LIMIT 1[0m
  [1m[35mPhoto Load (0.4ms)[0m  SELECT `photos`.* FROM `photos` WHERE (restaurant_id = 231 and cover = true and status = 1) LIMIT 1
  [1m[36mPhoto Load (0.2ms)[0m  [1mSELECT `photos`.* FROM `photos` WHERE `photos`.`restaurant_id` = 231 AND `photos`.`status` = 1 ORDER BY restaurant_id ASC, created_at DESC LIMIT 1[0m
  [1m[35mPhoto Load (0.4ms)[0m  SELECT `photos`.* FROM `photos` WHERE (restaurant_id = 222 and cover = true and status = 1) LIMIT 1
  [1m[36mPhoto Load (0.3ms)[0m  [1mSELECT `photos`.* FROM `photos` WHERE `photos`.`restaurant_id` = 222 AND `photos`.`status` = 1 ORDER BY restaurant_id ASC, created_at DESC LIMIT 1[0m
  [1m[35m (0.4ms)[0m  SELECT COUNT(*) FROM `restaurants` 
  Rendered restaurants/index.html.erb within layouts/admin (143.3ms)
Completed 200 OK in 159ms (Views: 145.2ms | ActiveRecord: 10.4ms)


Started GET "/admin/collections" for 127.0.0.1 at 2016-01-17 02:28:51 +0100
Processing by CollectionsController#index as HTML
  Rendered shared/_restaurant_manage_tabs.html.erb (0.7ms)
  [1m[36mCollection Load (0.4ms)[0m  [1mSELECT `collections`.* FROM `collections` ORDER BY name ASC, created_at DESC LIMIT 12 OFFSET 0[0m
  [1m[35m (0.2ms)[0m  SELECT COUNT(*) FROM `collections` 
  Rendered collections/index.erb within layouts/admin (10.8ms)
  [1m[36mUser Load (0.4ms)[0m  [1mSELECT `users`.* FROM `users` WHERE `users`.`id` = 1 LIMIT 1[0m
Completed 200 OK in 24ms (Views: 21.7ms | ActiveRecord: 0.9ms)


Started GET "/admin/collections/admin_new_collection" for 127.0.0.1 at 2016-01-17 02:28:53 +0100
Processing by CollectionsController#admin_new_collection as HTML
  [1m[35mUser Load (0.4ms)[0m  SELECT `users`.* FROM `users` WHERE `users`.`id` = 1 LIMIT 1
  Rendered collections/_collection_form.html.erb (7.8ms)
  Rendered collections/_collection_restaurants_form.html.erb (0.8ms)
  Rendered collections/_upload_collection_image.html.erb (1.5ms)
  Rendered collections/admin_new_collection.html.erb within layouts/admin (13.6ms)
Completed 200 OK in 25ms (Views: 22.0ms | ActiveRecord: 0.4ms)


Started GET "/collection_images?r_id=" for 127.0.0.1 at 2016-01-17 02:28:53 +0100
Processing by RestaurantsController#show as JSON
  Parameters: {"r_id"=>"", "id"=>"collection_images"}
  [1m[36mRestaurant Load (1.7ms)[0m  [1mSELECT `restaurants`.* FROM `restaurants` WHERE `restaurants`.`slug` = 'collection_images' LIMIT 1[0m
  [1m[35mRestaurant Load (0.2ms)[0m  SELECT `restaurants`.* FROM `restaurants` WHERE `restaurants`.`id` = 0 LIMIT 1
Completed 500 Internal Server Error in 4ms

ActiveRecord::RecordNotFound (Couldn't find Restaurant with id=collection_images):
  app/controllers/restaurants_controller.rb:193:in `show'


  Rendered /Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_dispatch/middleware/templates/rescues/_trace.erb (1.3ms)
  Rendered /Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_dispatch/middleware/templates/rescues/_request_and_response.erb (1.2ms)
  Rendered /Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_dispatch/middleware/templates/rescues/diagnostics.erb within rescues/layout (48.8ms)


Started POST "/admin/collections" for 127.0.0.1 at 2016-01-17 02:29:12 +0100
Processing by CollectionsController#create as HTML
  Parameters: {"utf8"=>"âœ“", "authenticity_token"=>"ZhR8a2fYr/EQcBrBVm2c17tt7AHk64f/gvsZ5fOllxc=", "admin"=>"true", "collection"=>{"name"=>"test1234", "description"=>"asdfsadf"}, "collection_image"=>{"image_name"=>#<ActionDispatch::Http::UploadedFile:0x007feb099d4cd8 @original_filename="steak.png", @content_type="image/png", @headers="Content-Disposition: form-data; name=\"collection_image[image_name]\"; filename=\"steak.png\"\r\nContent-Type: image/png\r\n", @tempfile=#<Tempfile:/var/folders/rf/q4l8n5k56pnbjgkdtzrhq_w00000gn/T/RackMultipart20160117-28026-vfxeaz>>}}
  [1m[36mCollection Load (0.4ms)[0m  [1mSELECT `collections`.* FROM `collections` WHERE `collections`.`name` = 'test1234' LIMIT 1[0m
  [1m[35m (0.1ms)[0m  BEGIN
  [1m[36mSQL (12.3ms)[0m  [1mINSERT INTO `collections` (`created_at`, `description`, `image_url`, `name`, `updated_at`) VALUES ('2016-01-17 01:29:12', 'asdfsadf', NULL, 'test1234', '2016-01-17 01:29:12')[0m
  [1m[35m (0.6ms)[0m  COMMIT
  [1m[36m (0.5ms)[0m  [1mBEGIN[0m
  [1m[35m (0.2ms)[0m  ROLLBACK
Redirected to http://0.0.0.0:3000/collection/6/edit
Completed 302 Found in 26ms (ActiveRecord: 14.0ms)


Started GET "/collection/6/edit" for 127.0.0.1 at 2016-01-17 02:29:12 +0100
Processing by CollectionsController#edit_collection as HTML
  Parameters: {"id"=>"6"}
  [1m[36mUser Load (0.4ms)[0m  [1mSELECT `users`.* FROM `users` WHERE `users`.`id` = 1 LIMIT 1[0m
  [1m[35mCollection Load (0.2ms)[0m  SELECT `collections`.* FROM `collections` WHERE `collections`.`id` = 6 LIMIT 1
  Rendered collections/_collection_form.html.erb (6.3ms)
  Rendered collections/_collection_restaurants_form.html.erb (0.3ms)
  Rendered collections/_upload_collection_image.html.erb (1.7ms)
  Rendered collections/edit_collection.html.erb within layouts/admin (11.5ms)
Completed 200 OK in 21ms (Views: 17.3ms | ActiveRecord: 0.6ms)


Started GET "/collection_images?r_id=6" for 127.0.0.1 at 2016-01-17 02:29:12 +0100
Processing by RestaurantsController#show as JSON
  Parameters: {"r_id"=>"6", "id"=>"collection_images"}
  [1m[36mRestaurant Load (1.5ms)[0m  [1mSELECT `restaurants`.* FROM `restaurants` WHERE `restaurants`.`slug` = 'collection_images' LIMIT 1[0m
  [1m[35mRestaurant Load (0.2ms)[0m  SELECT `restaurants`.* FROM `restaurants` WHERE `restaurants`.`id` = 0 LIMIT 1
Completed 500 Internal Server Error in 4ms

ActiveRecord::RecordNotFound (Couldn't find Restaurant with id=collection_images):
  app/controllers/restaurants_controller.rb:193:in `show'


  Rendered /Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_dispatch/middleware/templates/rescues/_trace.erb (1.3ms)
  Rendered /Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_dispatch/middleware/templates/rescues/_request_and_response.erb (1.0ms)
  Rendered /Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_dispatch/middleware/templates/rescues/diagnostics.erb within rescues/layout (50.7ms)


Started POST "/admin/collections" for 127.0.0.1 at 2016-01-17 02:33:38 +0100
Processing by CollectionsController#create as HTML
  Parameters: {"utf8"=>"âœ“", "authenticity_token"=>"ZhR8a2fYr/EQcBrBVm2c17tt7AHk64f/gvsZ5fOllxc=", "admin"=>"true", "collection"=>{"name"=>"test12345", "description"=>"asdfsadf"}, "collection_image"=>{"image_name"=>#<ActionDispatch::Http::UploadedFile:0x007feb08acad00 @original_filename="sunday_roast.png", @content_type="image/png", @headers="Content-Disposition: form-data; name=\"collection_image[image_name]\"; filename=\"sunday_roast.png\"\r\nContent-Type: image/png\r\n", @tempfile=#<Tempfile:/var/folders/rf/q4l8n5k56pnbjgkdtzrhq_w00000gn/T/RackMultipart20160117-28026-ljdirf>>}}
  [1m[36mCollection Load (0.3ms)[0m  [1mSELECT `collections`.* FROM `collections` WHERE `collections`.`name` = 'test12345' LIMIT 1[0m
  [1m[35m (0.1ms)[0m  BEGIN
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO `collections` (`created_at`, `description`, `image_url`, `name`, `updated_at`) VALUES ('2016-01-17 01:33:38', 'asdfsadf', NULL, 'test12345', '2016-01-17 01:33:38')[0m
  [1m[35m (0.6ms)[0m  COMMIT
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35m (0.1ms)[0m  ROLLBACK
Redirected to http://0.0.0.0:3000/collection/7/edit
Completed 302 Found in 44ms (ActiveRecord: 3.3ms)


Started GET "/collection/7/edit" for 127.0.0.1 at 2016-01-17 02:33:38 +0100
Processing by CollectionsController#edit_collection as HTML
  Parameters: {"id"=>"7"}
  [1m[36mUser Load (0.2ms)[0m  [1mSELECT `users`.* FROM `users` WHERE `users`.`id` = 1 LIMIT 1[0m
  [1m[35mCollection Load (0.4ms)[0m  SELECT `collections`.* FROM `collections` WHERE `collections`.`id` = 7 LIMIT 1
  Rendered collections/_collection_form.html.erb (6.6ms)
  Rendered collections/_collection_restaurants_form.html.erb (0.4ms)
  Rendered collections/_upload_collection_image.html.erb (1.0ms)
  Rendered collections/edit_collection.html.erb within layouts/admin (10.7ms)
Completed 200 OK in 131ms (Views: 22.0ms | ActiveRecord: 1.6ms)


Started GET "/collection_images?r_id=7" for 127.0.0.1 at 2016-01-17 02:33:39 +0100
  [1m[36m (0.2ms)[0m  [1mSELECT COUNT(*) FROM `filter_types` WHERE (code = 'features')[0m
  [1m[35m (0.2ms)[0m  SELECT COUNT(*) FROM `filters` WHERE (code = 'offer')
  [1m[36mFilter Load (0.2ms)[0m  [1mSELECT `filters`.* FROM `filters` WHERE (code = 'offer') LIMIT 1[0m
  [1m[35mFilterType Load (0.3ms)[0m  SELECT `filter_types`.* FROM `filter_types` WHERE (code = 'features') LIMIT 1
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT `filters`.* FROM `filters` WHERE (code = 'offer') LIMIT 1[0m
  [1m[35mCACHE (0.0ms)[0m  SELECT `filter_types`.* FROM `filter_types` WHERE (code = 'features') LIMIT 1
Processing by RestaurantsController#show as JSON
  Parameters: {"r_id"=>"7", "id"=>"collection_images"}
  [1m[36mRestaurant Load (1.9ms)[0m  [1mSELECT `restaurants`.* FROM `restaurants` WHERE `restaurants`.`slug` = 'collection_images' LIMIT 1[0m
  [1m[35mRestaurant Load (0.2ms)[0m  SELECT `restaurants`.* FROM `restaurants` WHERE `restaurants`.`id` = 0 LIMIT 1
Completed 500 Internal Server Error in 11ms

ActiveRecord::RecordNotFound (Couldn't find Restaurant with id=collection_images):
  app/controllers/restaurants_controller.rb:193:in `show'


  Rendered /Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_dispatch/middleware/templates/rescues/_trace.erb (1.6ms)
  Rendered /Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_dispatch/middleware/templates/rescues/_request_and_response.erb (1.2ms)
  Rendered /Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_dispatch/middleware/templates/rescues/diagnostics.erb within rescues/layout (53.6ms)


Started POST "/admin/collections" for 127.0.0.1 at 2016-01-17 02:36:16 +0100
Processing by CollectionsController#create as HTML
  Parameters: {"utf8"=>"âœ“", "authenticity_token"=>"ZhR8a2fYr/EQcBrBVm2c17tt7AHk64f/gvsZ5fOllxc=", "admin"=>"true", "collection"=>{"name"=>"abc", "description"=>"asdfsadf"}, "collection_image"=>{"image_name"=>#<ActionDispatch::Http::UploadedFile:0x007feb0d8d3ab0 @original_filename="sunday_roast.png", @content_type="image/png", @headers="Content-Disposition: form-data; name=\"collection_image[image_name]\"; filename=\"sunday_roast.png\"\r\nContent-Type: image/png\r\n", @tempfile=#<Tempfile:/var/folders/rf/q4l8n5k56pnbjgkdtzrhq_w00000gn/T/RackMultipart20160117-28026-khwf46>>}}
  [1m[36mCollection Load (0.2ms)[0m  [1mSELECT `collections`.* FROM `collections` WHERE `collections`.`name` = 'abc' LIMIT 1[0m
  [1m[35m (0.1ms)[0m  BEGIN
  [1m[36mSQL (0.4ms)[0m  [1mINSERT INTO `collections` (`created_at`, `description`, `image_url`, `name`, `updated_at`) VALUES ('2016-01-17 01:36:16', 'asdfsadf', NULL, 'abc', '2016-01-17 01:36:16')[0m
  [1m[35m (0.7ms)[0m  COMMIT
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35m (0.1ms)[0m  ROLLBACK
Redirected to http://0.0.0.0:3000/collection/8/edit
Completed 302 Found in 36ms (ActiveRecord: 3.5ms)


Started GET "/collection/8/edit" for 127.0.0.1 at 2016-01-17 02:36:16 +0100
Processing by CollectionsController#edit_collection as HTML
  Parameters: {"id"=>"8"}
  [1m[36mUser Load (0.2ms)[0m  [1mSELECT `users`.* FROM `users` WHERE `users`.`id` = 1 LIMIT 1[0m
  [1m[35mCollection Load (0.3ms)[0m  SELECT `collections`.* FROM `collections` WHERE `collections`.`id` = 8 LIMIT 1
  Rendered collections/_collection_form.html.erb (5.1ms)
  Rendered collections/_collection_restaurants_form.html.erb (0.3ms)
  Rendered collections/_upload_collection_image.html.erb (0.9ms)
  Rendered collections/edit_collection.html.erb within layouts/admin (8.7ms)
Completed 200 OK in 96ms (Views: 17.6ms | ActiveRecord: 1.5ms)


Started GET "/collection_images?r_id=8" for 127.0.0.1 at 2016-01-17 02:36:16 +0100
  [1m[36m (0.2ms)[0m  [1mSELECT COUNT(*) FROM `filter_types` WHERE (code = 'features')[0m
  [1m[35m (0.3ms)[0m  SELECT COUNT(*) FROM `filters` WHERE (code = 'offer')
  [1m[36mFilter Load (0.2ms)[0m  [1mSELECT `filters`.* FROM `filters` WHERE (code = 'offer') LIMIT 1[0m
  [1m[35mFilterType Load (0.6ms)[0m  SELECT `filter_types`.* FROM `filter_types` WHERE (code = 'features') LIMIT 1
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT `filters`.* FROM `filters` WHERE (code = 'offer') LIMIT 1[0m
  [1m[35mCACHE (0.0ms)[0m  SELECT `filter_types`.* FROM `filter_types` WHERE (code = 'features') LIMIT 1
Processing by RestaurantsController#show as JSON
  Parameters: {"r_id"=>"8", "id"=>"collection_images"}
  [1m[36mRestaurant Load (1.7ms)[0m  [1mSELECT `restaurants`.* FROM `restaurants` WHERE `restaurants`.`slug` = 'collection_images' LIMIT 1[0m
  [1m[35mRestaurant Load (0.2ms)[0m  SELECT `restaurants`.* FROM `restaurants` WHERE `restaurants`.`id` = 0 LIMIT 1
Completed 500 Internal Server Error in 8ms

ActiveRecord::RecordNotFound (Couldn't find Restaurant with id=collection_images):
  app/controllers/restaurants_controller.rb:193:in `show'


  Rendered /Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_dispatch/middleware/templates/rescues/_trace.erb (1.4ms)
  Rendered /Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_dispatch/middleware/templates/rescues/_request_and_response.erb (1.1ms)
  Rendered /Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_dispatch/middleware/templates/rescues/diagnostics.erb within rescues/layout (48.7ms)


Started POST "/admin/collections" for 127.0.0.1 at 2016-01-17 02:37:20 +0100
Processing by CollectionsController#create as HTML
  Parameters: {"utf8"=>"âœ“", "authenticity_token"=>"ZhR8a2fYr/EQcBrBVm2c17tt7AHk64f/gvsZ5fOllxc=", "admin"=>"true", "collection"=>{"name"=>"abc123", "description"=>"asdfsadf"}, "collection_image"=>{"image_name"=>#<ActionDispatch::Http::UploadedFile:0x007feb0db049d8 @original_filename="sunday_roast.png", @content_type="image/png", @headers="Content-Disposition: form-data; name=\"collection_image[image_name]\"; filename=\"sunday_roast.png\"\r\nContent-Type: image/png\r\n", @tempfile=#<Tempfile:/var/folders/rf/q4l8n5k56pnbjgkdtzrhq_w00000gn/T/RackMultipart20160117-28026-1purkuk>>}}
  [1m[36mCollection Load (0.2ms)[0m  [1mSELECT `collections`.* FROM `collections` WHERE `collections`.`name` = 'abc123' LIMIT 1[0m
  [1m[35m (0.1ms)[0m  BEGIN
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO `collections` (`created_at`, `description`, `image_url`, `name`, `updated_at`) VALUES ('2016-01-17 01:37:20', 'asdfsadf', NULL, 'abc123', '2016-01-17 01:37:20')[0m
  [1m[35m (0.8ms)[0m  COMMIT
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35m (0.1ms)[0m  ROLLBACK
Redirected to http://0.0.0.0:3000/collection/9/edit
Completed 302 Found in 39ms (ActiveRecord: 3.4ms)


Started GET "/collection/9/edit" for 127.0.0.1 at 2016-01-17 02:37:20 +0100
Processing by CollectionsController#edit_collection as HTML
  Parameters: {"id"=>"9"}
  [1m[36mUser Load (0.3ms)[0m  [1mSELECT `users`.* FROM `users` WHERE `users`.`id` = 1 LIMIT 1[0m
  [1m[35mCollection Load (0.3ms)[0m  SELECT `collections`.* FROM `collections` WHERE `collections`.`id` = 9 LIMIT 1
  Rendered collections/_collection_form.html.erb (5.2ms)
  Rendered collections/_collection_restaurants_form.html.erb (0.3ms)
  Rendered collections/_upload_collection_image.html.erb (1.0ms)
  Rendered collections/edit_collection.html.erb within layouts/admin (9.2ms)
Completed 200 OK in 101ms (Views: 20.0ms | ActiveRecord: 1.7ms)


Started GET "/collection_images?r_id=9" for 127.0.0.1 at 2016-01-17 02:37:20 +0100
  [1m[36m (0.2ms)[0m  [1mSELECT COUNT(*) FROM `filter_types` WHERE (code = 'features')[0m
  [1m[35m (0.2ms)[0m  SELECT COUNT(*) FROM `filters` WHERE (code = 'offer')
  [1m[36mFilter Load (0.6ms)[0m  [1mSELECT `filters`.* FROM `filters` WHERE (code = 'offer') LIMIT 1[0m
  [1m[35mFilterType Load (0.3ms)[0m  SELECT `filter_types`.* FROM `filter_types` WHERE (code = 'features') LIMIT 1
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT `filters`.* FROM `filters` WHERE (code = 'offer') LIMIT 1[0m
  [1m[35mCACHE (0.0ms)[0m  SELECT `filter_types`.* FROM `filter_types` WHERE (code = 'features') LIMIT 1
Processing by RestaurantsController#show as JSON
  Parameters: {"r_id"=>"9", "id"=>"collection_images"}
  [1m[36mRestaurant Load (2.2ms)[0m  [1mSELECT `restaurants`.* FROM `restaurants` WHERE `restaurants`.`slug` = 'collection_images' LIMIT 1[0m
  [1m[35mRestaurant Load (0.3ms)[0m  SELECT `restaurants`.* FROM `restaurants` WHERE `restaurants`.`id` = 0 LIMIT 1
Completed 500 Internal Server Error in 11ms

ActiveRecord::RecordNotFound (Couldn't find Restaurant with id=collection_images):
  app/controllers/restaurants_controller.rb:193:in `show'


  Rendered /Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_dispatch/middleware/templates/rescues/_trace.erb (1.3ms)
  Rendered /Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_dispatch/middleware/templates/rescues/_request_and_response.erb (1.4ms)
  Rendered /Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_dispatch/middleware/templates/rescues/diagnostics.erb within rescues/layout (54.9ms)


Started POST "/admin/collections" for 127.0.0.1 at 2016-01-17 02:38:14 +0100
Processing by CollectionsController#create as HTML
  Parameters: {"utf8"=>"âœ“", "authenticity_token"=>"ZhR8a2fYr/EQcBrBVm2c17tt7AHk64f/gvsZ5fOllxc=", "admin"=>"true", "collection"=>{"name"=>"abc1234", "description"=>"asdfsadf"}, "collection_image"=>{"image_name"=>#<ActionDispatch::Http::UploadedFile:0x007feb03c42ea8 @original_filename="sunday_roast.png", @content_type="image/png", @headers="Content-Disposition: form-data; name=\"collection_image[image_name]\"; filename=\"sunday_roast.png\"\r\nContent-Type: image/png\r\n", @tempfile=#<Tempfile:/var/folders/rf/q4l8n5k56pnbjgkdtzrhq_w00000gn/T/RackMultipart20160117-28026-1ydbda2>>}}
  [1m[36mCollection Load (0.2ms)[0m  [1mSELECT `collections`.* FROM `collections` WHERE `collections`.`name` = 'abc1234' LIMIT 1[0m
  [1m[35m (0.1ms)[0m  BEGIN
  [1m[36mSQL (0.6ms)[0m  [1mINSERT INTO `collections` (`created_at`, `description`, `image_url`, `name`, `updated_at`) VALUES ('2016-01-17 01:38:14', 'asdfsadf', NULL, 'abc1234', '2016-01-17 01:38:14')[0m
  [1m[35m (0.4ms)[0m  COMMIT
  [1m[36m (0.5ms)[0m  [1mBEGIN[0m
  [1m[35m (0.2ms)[0m  ROLLBACK
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35m (0.1ms)[0m  ROLLBACK
Redirected to http://0.0.0.0:3000/collection/10/edit
Completed 302 Found in 65ms (ActiveRecord: 4.0ms)


Started GET "/collection/10/edit" for 127.0.0.1 at 2016-01-17 02:38:14 +0100
Processing by CollectionsController#edit_collection as HTML
  Parameters: {"id"=>"10"}
  [1m[36mUser Load (0.3ms)[0m  [1mSELECT `users`.* FROM `users` WHERE `users`.`id` = 1 LIMIT 1[0m
  [1m[35mCollection Load (0.3ms)[0m  SELECT `collections`.* FROM `collections` WHERE `collections`.`id` = 10 LIMIT 1
  Rendered collections/_collection_form.html.erb (6.5ms)
  Rendered collections/_collection_restaurants_form.html.erb (0.5ms)
  Rendered collections/_upload_collection_image.html.erb (1.0ms)
  Rendered collections/edit_collection.html.erb within layouts/admin (11.2ms)
Completed 200 OK in 110ms (Views: 22.5ms | ActiveRecord: 1.5ms)


Started GET "/collection_images?r_id=10" for 127.0.0.1 at 2016-01-17 02:38:14 +0100
  [1m[36m (0.2ms)[0m  [1mSELECT COUNT(*) FROM `filter_types` WHERE (code = 'features')[0m
  [1m[35m (0.2ms)[0m  SELECT COUNT(*) FROM `filters` WHERE (code = 'offer')
  [1m[36mFilter Load (0.2ms)[0m  [1mSELECT `filters`.* FROM `filters` WHERE (code = 'offer') LIMIT 1[0m
  [1m[35mFilterType Load (0.3ms)[0m  SELECT `filter_types`.* FROM `filter_types` WHERE (code = 'features') LIMIT 1
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT `filters`.* FROM `filters` WHERE (code = 'offer') LIMIT 1[0m
  [1m[35mCACHE (0.0ms)[0m  SELECT `filter_types`.* FROM `filter_types` WHERE (code = 'features') LIMIT 1
Processing by RestaurantsController#show as JSON
  Parameters: {"r_id"=>"10", "id"=>"collection_images"}
  [1m[36mRestaurant Load (1.6ms)[0m  [1mSELECT `restaurants`.* FROM `restaurants` WHERE `restaurants`.`slug` = 'collection_images' LIMIT 1[0m
  [1m[35mRestaurant Load (0.2ms)[0m  SELECT `restaurants`.* FROM `restaurants` WHERE `restaurants`.`id` = 0 LIMIT 1
Completed 500 Internal Server Error in 8ms

ActiveRecord::RecordNotFound (Couldn't find Restaurant with id=collection_images):
  app/controllers/restaurants_controller.rb:193:in `show'


  Rendered /Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_dispatch/middleware/templates/rescues/_trace.erb (1.2ms)
  Rendered /Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_dispatch/middleware/templates/rescues/_request_and_response.erb (1.2ms)
  Rendered /Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_dispatch/middleware/templates/rescues/diagnostics.erb within rescues/layout (44.2ms)


Started POST "/admin/collections" for 127.0.0.1 at 2016-01-17 02:51:57 +0100
Processing by CollectionsController#create as HTML
  Parameters: {"utf8"=>"âœ“", "authenticity_token"=>"ZhR8a2fYr/EQcBrBVm2c17tt7AHk64f/gvsZ5fOllxc=", "admin"=>"true", "collection"=>{"name"=>"abcd", "description"=>"asdfsadf"}, "collection_image"=>{"image_name"=>#<ActionDispatch::Http::UploadedFile:0x007feb0a2ccea8 @original_filename="sunday_roast.png", @content_type="image/png", @headers="Content-Disposition: form-data; name=\"collection_image[image_name]\"; filename=\"sunday_roast.png\"\r\nContent-Type: image/png\r\n", @tempfile=#<Tempfile:/var/folders/rf/q4l8n5k56pnbjgkdtzrhq_w00000gn/T/RackMultipart20160117-28026-k004xt>>}}
  [1m[36mCollection Load (0.3ms)[0m  [1mSELECT `collections`.* FROM `collections` WHERE `collections`.`name` = 'abcd' LIMIT 1[0m
  [1m[35m (0.1ms)[0m  BEGIN
  [1m[36mSQL (0.7ms)[0m  [1mINSERT INTO `collections` (`created_at`, `description`, `image_url`, `name`, `updated_at`) VALUES ('2016-01-17 01:51:57', 'asdfsadf', NULL, 'abcd', '2016-01-17 01:51:57')[0m
  [1m[35m (13.0ms)[0m  COMMIT
  [1m[36m (0.2ms)[0m  [1mBEGIN[0m
  [1m[35m (0.1ms)[0m  ROLLBACK
Redirected to http://0.0.0.0:3000/collection/11/edit
Completed 302 Found in 63ms (ActiveRecord: 16.5ms)


Started GET "/collection/11/edit" for 127.0.0.1 at 2016-01-17 02:51:57 +0100
Processing by CollectionsController#edit_collection as HTML
  Parameters: {"id"=>"11"}
  [1m[36mUser Load (0.3ms)[0m  [1mSELECT `users`.* FROM `users` WHERE `users`.`id` = 1 LIMIT 1[0m
  [1m[35mCollection Load (0.3ms)[0m  SELECT `collections`.* FROM `collections` WHERE `collections`.`id` = 11 LIMIT 1
  Rendered collections/_collection_form.html.erb (6.4ms)
  Rendered collections/_collection_restaurants_form.html.erb (0.5ms)
  Rendered collections/_upload_collection_image.html.erb (1.0ms)
  Rendered collections/edit_collection.html.erb within layouts/admin (12.4ms)
Completed 200 OK in 133ms (Views: 24.8ms | ActiveRecord: 1.6ms)


Started GET "/collection_images?r_id=11" for 127.0.0.1 at 2016-01-17 02:51:57 +0100
  [1m[36m (0.2ms)[0m  [1mSELECT COUNT(*) FROM `filter_types` WHERE (code = 'features')[0m
  [1m[35m (0.2ms)[0m  SELECT COUNT(*) FROM `filters` WHERE (code = 'offer')
  [1m[36mFilter Load (0.2ms)[0m  [1mSELECT `filters`.* FROM `filters` WHERE (code = 'offer') LIMIT 1[0m
  [1m[35mFilterType Load (0.4ms)[0m  SELECT `filter_types`.* FROM `filter_types` WHERE (code = 'features') LIMIT 1
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT `filters`.* FROM `filters` WHERE (code = 'offer') LIMIT 1[0m
  [1m[35mCACHE (0.0ms)[0m  SELECT `filter_types`.* FROM `filter_types` WHERE (code = 'features') LIMIT 1
Processing by RestaurantsController#show as JSON
  Parameters: {"r_id"=>"11", "id"=>"collection_images"}
  [1m[36mRestaurant Load (2.6ms)[0m  [1mSELECT `restaurants`.* FROM `restaurants` WHERE `restaurants`.`slug` = 'collection_images' LIMIT 1[0m
  [1m[35mRestaurant Load (0.2ms)[0m  SELECT `restaurants`.* FROM `restaurants` WHERE `restaurants`.`id` = 0 LIMIT 1
Completed 500 Internal Server Error in 12ms

ActiveRecord::RecordNotFound (Couldn't find Restaurant with id=collection_images):
  app/controllers/restaurants_controller.rb:193:in `show'


  Rendered /Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_dispatch/middleware/templates/rescues/_trace.erb (1.3ms)
  Rendered /Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_dispatch/middleware/templates/rescues/_request_and_response.erb (1.1ms)
  Rendered /Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_dispatch/middleware/templates/rescues/diagnostics.erb within rescues/layout (51.3ms)


Started POST "/admin/collections" for 127.0.0.1 at 2016-01-17 02:55:51 +0100
Processing by CollectionsController#create as HTML
  Parameters: {"utf8"=>"âœ“", "authenticity_token"=>"ZhR8a2fYr/EQcBrBVm2c17tt7AHk64f/gvsZ5fOllxc=", "admin"=>"true", "collection"=>{"name"=>"abcde", "description"=>"asdfsadf"}, "collection_image"=>{"image_name"=>#<ActionDispatch::Http::UploadedFile:0x007feb0d899a68 @original_filename="sunday_roast.png", @content_type="image/png", @headers="Content-Disposition: form-data; name=\"collection_image[image_name]\"; filename=\"sunday_roast.png\"\r\nContent-Type: image/png\r\n", @tempfile=#<Tempfile:/var/folders/rf/q4l8n5k56pnbjgkdtzrhq_w00000gn/T/RackMultipart20160117-28026-ubldkt>>}}
  [1m[36mCollection Load (0.2ms)[0m  [1mSELECT `collections`.* FROM `collections` WHERE `collections`.`name` = 'abcde' LIMIT 1[0m
  [1m[35m (0.1ms)[0m  BEGIN
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO `collections` (`created_at`, `description`, `image_url`, `name`, `updated_at`) VALUES ('2016-01-17 01:55:51', 'asdfsadf', NULL, 'abcde', '2016-01-17 01:55:51')[0m
  [1m[35m (0.8ms)[0m  COMMIT
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35mSQL (7.3ms)[0m  INSERT INTO `collection_images` (`collection_id`, `created_at`, `image_name`, `image_uid`, `text_content`, `text_hyperlink`, `text_title`, `updated_at`) VALUES (12, '2016-01-17 01:55:51', '--- !ruby/object:ActionDispatch::Http::UploadedFile\noriginal_filename: sunday_roast.png\ncontent_type: image/png\nheaders: \"Content-Disposition: form-data; name=\\\"collection_image[image_name]\\\"; filename=\\\"sunday_roast.png\\\"\\r\\nContent-Type:\n image/png\\r\\n\"\ntempfile: !ruby/marshalable:Tempfile\n :__v2__:\n - :@data\n - :@clean_proc\n - :@tmpfile\n - :@tmpname\n - :@mode\n - :@opts\n ? - &1\n - \"/var/folders/rf/q4l8n5k56pnbjgkdtzrhq_w00000gn/T/RackMultipart20160117-28026-ubldkt\"\n - &2 !ruby/object:File {}\n - !ruby/object:Tempfile::Remover\n pid: 28026\n data: *1\n - *2\n - \"/var/folders/rf/q4l8n5k56pnbjgkdtzrhq_w00000gn/T/RackMultipart20160117-28026-ubldkt\"\n - 2\n - :perm: 384\n : *2\n', NULL, NULL, NULL, NULL, '2016-01-17 01:55:51')
Mysql2::Error: Data too long for column 'image_name' at row 1: INSERT INTO `collection_images` (`collection_id`, `created_at`, `image_name`, `image_uid`, `text_content`, `text_hyperlink`, `text_title`, `updated_at`) VALUES (12, '2016-01-17 01:55:51', '--- !ruby/object:ActionDispatch::Http::UploadedFile\noriginal_filename: sunday_roast.png\ncontent_type: image/png\nheaders: \"Content-Disposition: form-data; name=\\\"collection_image[image_name]\\\"; filename=\\\"sunday_roast.png\\\"\\r\\nContent-Type:\n  image/png\\r\\n\"\ntempfile: !ruby/marshalable:Tempfile\n  :__v2__:\n  - :@data\n  - :@clean_proc\n  - :@tmpfile\n  - :@tmpname\n  - :@mode\n  - :@opts\n  ? - &1\n      - \"/var/folders/rf/q4l8n5k56pnbjgkdtzrhq_w00000gn/T/RackMultipart20160117-28026-ubldkt\"\n      - &2 !ruby/object:File {}\n    - !ruby/object:Tempfile::Remover\n      pid: 28026\n      data: *1\n    - *2\n    - \"/var/folders/rf/q4l8n5k56pnbjgkdtzrhq_w00000gn/T/RackMultipart20160117-28026-ubldkt\"\n    - 2\n    - :perm: 384\n  : *2\n', NULL, NULL, NULL, NULL, '2016-01-17 01:55:51')
  [1m[36m (0.1ms)[0m  [1mROLLBACK[0m
Completed 500 Internal Server Error in 68ms

ActiveRecord::StatementInvalid (Mysql2::Error: Data too long for column 'image_name' at row 1: INSERT INTO `collection_images` (`collection_id`, `created_at`, `image_name`, `image_uid`, `text_content`, `text_hyperlink`, `text_title`, `updated_at`) VALUES (12, '2016-01-17 01:55:51', '--- !ruby/object:ActionDispatch::Http::UploadedFile\noriginal_filename: sunday_roast.png\ncontent_type: image/png\nheaders: \"Content-Disposition: form-data; name=\\\"collection_image[image_name]\\\"; filename=\\\"sunday_roast.png\\\"\\r\\nContent-Type:\n  image/png\\r\\n\"\ntempfile: !ruby/marshalable:Tempfile\n  :__v2__:\n  - :@data\n  - :@clean_proc\n  - :@tmpfile\n  - :@tmpname\n  - :@mode\n  - :@opts\n  ? - &1\n      - \"/var/folders/rf/q4l8n5k56pnbjgkdtzrhq_w00000gn/T/RackMultipart20160117-28026-ubldkt\"\n      - &2 !ruby/object:File {}\n    - !ruby/object:Tempfile::Remover\n      pid: 28026\n      data: *1\n    - *2\n    - \"/var/folders/rf/q4l8n5k56pnbjgkdtzrhq_w00000gn/T/RackMultipart20160117-28026-ubldkt\"\n    - 2\n    - :perm: 384\n  : *2\n', NULL, NULL, NULL, NULL, '2016-01-17 01:55:51')):
  app/controllers/collections_controller.rb:87:in `block in create'
  app/controllers/collections_controller.rb:77:in `create'


  Rendered /Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_dispatch/middleware/templates/rescues/_trace.erb (1.2ms)
  Rendered /Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_dispatch/middleware/templates/rescues/_request_and_response.erb (1.0ms)
  Rendered /Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_dispatch/middleware/templates/rescues/diagnostics.erb within rescues/layout (57.5ms)


Started POST "/admin/collections" for 127.0.0.1 at 2016-01-17 02:57:52 +0100
Processing by CollectionsController#create as HTML
  Parameters: {"utf8"=>"âœ“", "authenticity_token"=>"ZhR8a2fYr/EQcBrBVm2c17tt7AHk64f/gvsZ5fOllxc=", "admin"=>"true", "collection"=>{"name"=>"abcde", "description"=>"asdfsadf"}, "collection_image"=>{"image_name"=>#<ActionDispatch::Http::UploadedFile:0x007feb08bd1eb0 @original_filename="sunday_roast.png", @content_type="image/png", @headers="Content-Disposition: form-data; name=\"collection_image[image_name]\"; filename=\"sunday_roast.png\"\r\nContent-Type: image/png\r\n", @tempfile=#<Tempfile:/var/folders/rf/q4l8n5k56pnbjgkdtzrhq_w00000gn/T/RackMultipart20160117-28026-1h7dqsl>>}}
  [1m[35mCollection Load (0.2ms)[0m  SELECT `collections`.* FROM `collections` WHERE `collections`.`name` = 'abcde' LIMIT 1
  Rendered collections/_collection_form.html.erb (5.4ms)
  Rendered collections/_collection_restaurants_form.html.erb (0.3ms)
  [1m[36mUser Load (0.2ms)[0m  [1mSELECT `users`.* FROM `users` WHERE `users`.`id` = 1 LIMIT 1[0m
  Rendered collections/_upload_collection_image.html.erb (107.3ms)
  Rendered collections/admin_new_collection.html.erb within layouts/admin (115.5ms)
Completed 200 OK in 136ms (Views: 125.6ms | ActiveRecord: 3.3ms)


Started GET "/collection_images?r_id=" for 127.0.0.1 at 2016-01-17 02:57:52 +0100
  [1m[35m (0.2ms)[0m  SELECT COUNT(*) FROM `filter_types` WHERE (code = 'features')
  [1m[36m (0.2ms)[0m  [1mSELECT COUNT(*) FROM `filters` WHERE (code = 'offer')[0m
  [1m[35mFilter Load (0.2ms)[0m  SELECT `filters`.* FROM `filters` WHERE (code = 'offer') LIMIT 1
  [1m[36mFilterType Load (0.3ms)[0m  [1mSELECT `filter_types`.* FROM `filter_types` WHERE (code = 'features') LIMIT 1[0m
  [1m[35mCACHE (0.0ms)[0m  SELECT `filters`.* FROM `filters` WHERE (code = 'offer') LIMIT 1
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT `filter_types`.* FROM `filter_types` WHERE (code = 'features') LIMIT 1[0m
Processing by RestaurantsController#show as JSON
  Parameters: {"r_id"=>"", "id"=>"collection_images"}
  [1m[35mRestaurant Load (1.5ms)[0m  SELECT `restaurants`.* FROM `restaurants` WHERE `restaurants`.`slug` = 'collection_images' LIMIT 1
  [1m[36mRestaurant Load (0.3ms)[0m  [1mSELECT `restaurants`.* FROM `restaurants` WHERE `restaurants`.`id` = 0 LIMIT 1[0m
Completed 500 Internal Server Error in 10ms

ActiveRecord::RecordNotFound (Couldn't find Restaurant with id=collection_images):
  app/controllers/restaurants_controller.rb:193:in `show'


  Rendered /Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_dispatch/middleware/templates/rescues/_trace.erb (1.7ms)
  Rendered /Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_dispatch/middleware/templates/rescues/_request_and_response.erb (1.1ms)
  Rendered /Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_dispatch/middleware/templates/rescues/diagnostics.erb within rescues/layout (47.3ms)


Started POST "/admin/collections" for 127.0.0.1 at 2016-01-17 02:58:05 +0100
Processing by CollectionsController#create as HTML
  Parameters: {"utf8"=>"âœ“", "authenticity_token"=>"ZhR8a2fYr/EQcBrBVm2c17tt7AHk64f/gvsZ5fOllxc=", "admin"=>"true", "collection"=>{"name"=>"abcdef", "description"=>"asdfsadf"}, "collection_image"=>{"image_name"=>#<ActionDispatch::Http::UploadedFile:0x007feb06cbd650 @original_filename="sunday_roast.png", @content_type="image/png", @headers="Content-Disposition: form-data; name=\"collection_image[image_name]\"; filename=\"sunday_roast.png\"\r\nContent-Type: image/png\r\n", @tempfile=#<Tempfile:/var/folders/rf/q4l8n5k56pnbjgkdtzrhq_w00000gn/T/RackMultipart20160117-28026-q1bd2s>>}}
  [1m[35mCollection Load (1.2ms)[0m  SELECT `collections`.* FROM `collections` WHERE `collections`.`name` = 'abcdef' LIMIT 1
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO `collections` (`created_at`, `description`, `image_url`, `name`, `updated_at`) VALUES ('2016-01-17 01:58:05', 'asdfsadf', NULL, 'abcdef', '2016-01-17 01:58:05')
  [1m[36m (0.4ms)[0m  [1mCOMMIT[0m
  [1m[35m (0.1ms)[0m  BEGIN
  [1m[36mSQL (0.4ms)[0m  [1mINSERT INTO `collection_images` (`collection_id`, `created_at`, `image_name`, `image_uid`, `text_content`, `text_hyperlink`, `text_title`, `updated_at`) VALUES (13, '2016-01-17 01:58:05', '--- !ruby/object:ActionDispatch::Http::UploadedFile\noriginal_filename: sunday_roast.png\ncontent_type: image/png\nheaders: \"Content-Disposition: form-data; name=\\\"collection_image[image_name]\\\"; filename=\\\"sunday_roast.png\\\"\\r\\nContent-Type:\n image/png\\r\\n\"\ntempfile: !ruby/marshalable:Tempfile\n :__v2__:\n - :@data\n - :@clean_proc\n - :@tmpfile\n - :@tmpname\n - :@mode\n - :@opts\n ? - &1\n - \"/var/folders/rf/q4l8n5k56pnbjgkdtzrhq_w00000gn/T/RackMultipart20160117-28026-q1bd2s\"\n - &2 !ruby/object:File {}\n - !ruby/object:Tempfile::Remover\n pid: 28026\n data: *1\n - *2\n - \"/var/folders/rf/q4l8n5k56pnbjgkdtzrhq_w00000gn/T/RackMultipart20160117-28026-q1bd2s\"\n - 2\n - :perm: 384\n : *2\n', NULL, NULL, NULL, NULL, '2016-01-17 01:58:05')[0m
Mysql2::Error: Data too long for column 'image_name' at row 1: INSERT INTO `collection_images` (`collection_id`, `created_at`, `image_name`, `image_uid`, `text_content`, `text_hyperlink`, `text_title`, `updated_at`) VALUES (13, '2016-01-17 01:58:05', '--- !ruby/object:ActionDispatch::Http::UploadedFile\noriginal_filename: sunday_roast.png\ncontent_type: image/png\nheaders: \"Content-Disposition: form-data; name=\\\"collection_image[image_name]\\\"; filename=\\\"sunday_roast.png\\\"\\r\\nContent-Type:\n  image/png\\r\\n\"\ntempfile: !ruby/marshalable:Tempfile\n  :__v2__:\n  - :@data\n  - :@clean_proc\n  - :@tmpfile\n  - :@tmpname\n  - :@mode\n  - :@opts\n  ? - &1\n      - \"/var/folders/rf/q4l8n5k56pnbjgkdtzrhq_w00000gn/T/RackMultipart20160117-28026-q1bd2s\"\n      - &2 !ruby/object:File {}\n    - !ruby/object:Tempfile::Remover\n      pid: 28026\n      data: *1\n    - *2\n    - \"/var/folders/rf/q4l8n5k56pnbjgkdtzrhq_w00000gn/T/RackMultipart20160117-28026-q1bd2s\"\n    - 2\n    - :perm: 384\n  : *2\n', NULL, NULL, NULL, NULL, '2016-01-17 01:58:05')
  [1m[35m (0.1ms)[0m  ROLLBACK
Completed 500 Internal Server Error in 26ms

ActiveRecord::StatementInvalid (Mysql2::Error: Data too long for column 'image_name' at row 1: INSERT INTO `collection_images` (`collection_id`, `created_at`, `image_name`, `image_uid`, `text_content`, `text_hyperlink`, `text_title`, `updated_at`) VALUES (13, '2016-01-17 01:58:05', '--- !ruby/object:ActionDispatch::Http::UploadedFile\noriginal_filename: sunday_roast.png\ncontent_type: image/png\nheaders: \"Content-Disposition: form-data; name=\\\"collection_image[image_name]\\\"; filename=\\\"sunday_roast.png\\\"\\r\\nContent-Type:\n  image/png\\r\\n\"\ntempfile: !ruby/marshalable:Tempfile\n  :__v2__:\n  - :@data\n  - :@clean_proc\n  - :@tmpfile\n  - :@tmpname\n  - :@mode\n  - :@opts\n  ? - &1\n      - \"/var/folders/rf/q4l8n5k56pnbjgkdtzrhq_w00000gn/T/RackMultipart20160117-28026-q1bd2s\"\n      - &2 !ruby/object:File {}\n    - !ruby/object:Tempfile::Remover\n      pid: 28026\n      data: *1\n    - *2\n    - \"/var/folders/rf/q4l8n5k56pnbjgkdtzrhq_w00000gn/T/RackMultipart20160117-28026-q1bd2s\"\n    - 2\n    - :perm: 384\n  : *2\n', NULL, NULL, NULL, NULL, '2016-01-17 01:58:05')):
  app/controllers/collections_controller.rb:87:in `block in create'
  app/controllers/collections_controller.rb:77:in `create'


  Rendered /Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_dispatch/middleware/templates/rescues/_trace.erb (1.5ms)
  Rendered /Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_dispatch/middleware/templates/rescues/_request_and_response.erb (1.2ms)
  Rendered /Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_dispatch/middleware/templates/rescues/diagnostics.erb within rescues/layout (44.2ms)


Started GET "/admin/collections" for 127.0.0.1 at 2016-01-17 03:06:04 +0100
Processing by CollectionsController#index as HTML
  Rendered shared/_restaurant_manage_tabs.html.erb (2.1ms)
  [1m[36mCollection Load (53.1ms)[0m  [1mSELECT `collections`.* FROM `collections` ORDER BY name ASC, created_at DESC LIMIT 12 OFFSET 0[0m
  [1m[35m (0.4ms)[0m  SELECT COUNT(*) FROM `collections` 
  Rendered collections/index.erb within layouts/admin (199.3ms)
  [1m[36mUser Load (0.4ms)[0m  [1mSELECT `users`.* FROM `users` WHERE `users`.`id` = 1 LIMIT 1[0m
Completed 200 OK in 269ms (Views: 212.8ms | ActiveRecord: 53.9ms)


Started GET "/admin/collections/admin_new_collection" for 127.0.0.1 at 2016-01-17 03:06:11 +0100
Processing by CollectionsController#admin_new_collection as HTML
  [1m[35mUser Load (0.6ms)[0m  SELECT `users`.* FROM `users` WHERE `users`.`id` = 1 LIMIT 1
  Rendered collections/_collection_form.html.erb (6.7ms)
  Rendered collections/_collection_restaurants_form.html.erb (0.4ms)
  Rendered collections/_upload_collection_image.html.erb (1.0ms)
  Rendered collections/admin_new_collection.html.erb within layouts/admin (10.7ms)
Completed 200 OK in 38ms (Views: 17.0ms | ActiveRecord: 0.6ms)


Started GET "/collection_images?r_id=" for 127.0.0.1 at 2016-01-17 03:06:12 +0100
Processing by RestaurantsController#show as JSON
  Parameters: {"r_id"=>"", "id"=>"collection_images"}
  [1m[36mRestaurant Load (1.7ms)[0m  [1mSELECT `restaurants`.* FROM `restaurants` WHERE `restaurants`.`slug` = 'collection_images' LIMIT 1[0m
  [1m[35mRestaurant Load (0.2ms)[0m  SELECT `restaurants`.* FROM `restaurants` WHERE `restaurants`.`id` = 0 LIMIT 1
Completed 500 Internal Server Error in 5ms

ActiveRecord::RecordNotFound (Couldn't find Restaurant with id=collection_images):
  app/controllers/restaurants_controller.rb:193:in `show'


  Rendered /Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_dispatch/middleware/templates/rescues/_trace.erb (2.9ms)
  Rendered /Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_dispatch/middleware/templates/rescues/_request_and_response.erb (1.7ms)
  Rendered /Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_dispatch/middleware/templates/rescues/diagnostics.erb within rescues/layout (52.5ms)


Started POST "/admin/collections" for 127.0.0.1 at 2016-01-17 03:06:26 +0100
Processing by CollectionsController#create as HTML
  Parameters: {"utf8"=>"âœ“", "authenticity_token"=>"ZhR8a2fYr/EQcBrBVm2c17tt7AHk64f/gvsZ5fOllxc=", "admin"=>"true", "collection"=>{"name"=>"abcdef123", "description"=>"adsfasdf"}, "collection_image"=>{"image"=>#<ActionDispatch::Http::UploadedFile:0x007feb0a7acbf8 @original_filename="steak.png", @content_type="image/png", @headers="Content-Disposition: form-data; name=\"collection_image[image]\"; filename=\"steak.png\"\r\nContent-Type: image/png\r\n", @tempfile=#<Tempfile:/var/folders/rf/q4l8n5k56pnbjgkdtzrhq_w00000gn/T/RackMultipart20160117-28026-rgz6wx>>}}
  [1m[36mCollection Load (0.4ms)[0m  [1mSELECT `collections`.* FROM `collections` WHERE `collections`.`name` = 'abcdef123' LIMIT 1[0m
  [1m[35m (0.1ms)[0m  BEGIN
  [1m[36mSQL (1.9ms)[0m  [1mINSERT INTO `collections` (`created_at`, `description`, `image_url`, `name`, `updated_at`) VALUES ('2016-01-17 02:06:26', 'adsfasdf', NULL, 'abcdef123', '2016-01-17 02:06:26')[0m
  [1m[35m (0.4ms)[0m  COMMIT
Redirected to http://0.0.0.0:3000/collection/14/edit
Completed 302 Found in 9ms (ActiveRecord: 2.7ms)


Started GET "/collection/14/edit" for 127.0.0.1 at 2016-01-17 03:06:26 +0100
Processing by CollectionsController#edit_collection as HTML
  Parameters: {"id"=>"14"}
  [1m[36mUser Load (0.3ms)[0m  [1mSELECT `users`.* FROM `users` WHERE `users`.`id` = 1 LIMIT 1[0m
  [1m[35mCollection Load (0.2ms)[0m  SELECT `collections`.* FROM `collections` WHERE `collections`.`id` = 14 LIMIT 1
  Rendered collections/_collection_form.html.erb (8.1ms)
  Rendered collections/_collection_restaurants_form.html.erb (0.2ms)
  Rendered collections/_upload_collection_image.html.erb (1.1ms)
  Rendered collections/edit_collection.html.erb within layouts/admin (12.9ms)
Completed 200 OK in 24ms (Views: 19.4ms | ActiveRecord: 0.5ms)


Started GET "/collection_images?r_id=14" for 127.0.0.1 at 2016-01-17 03:06:26 +0100
Processing by RestaurantsController#show as JSON
  Parameters: {"r_id"=>"14", "id"=>"collection_images"}
  [1m[36mRestaurant Load (1.6ms)[0m  [1mSELECT `restaurants`.* FROM `restaurants` WHERE `restaurants`.`slug` = 'collection_images' LIMIT 1[0m
  [1m[35mRestaurant Load (0.3ms)[0m  SELECT `restaurants`.* FROM `restaurants` WHERE `restaurants`.`id` = 0 LIMIT 1
Completed 500 Internal Server Error in 5ms

ActiveRecord::RecordNotFound (Couldn't find Restaurant with id=collection_images):
  app/controllers/restaurants_controller.rb:193:in `show'


  Rendered /Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_dispatch/middleware/templates/rescues/_trace.erb (3.0ms)
  Rendered /Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_dispatch/middleware/templates/rescues/_request_and_response.erb (2.3ms)
  Rendered /Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_dispatch/middleware/templates/rescues/diagnostics.erb within rescues/layout (49.4ms)


Started GET "/admin/collections/admin_new_collection" for 127.0.0.1 at 2016-01-17 03:08:52 +0100
Processing by CollectionsController#admin_new_collection as HTML
  [1m[36mUser Load (0.3ms)[0m  [1mSELECT `users`.* FROM `users` WHERE `users`.`id` = 1 LIMIT 1[0m
  Rendered collections/_collection_form.html.erb (11.4ms)
  Rendered collections/_collection_restaurants_form.html.erb (0.3ms)
  Rendered collections/_upload_collection_image.html.erb (1.2ms)
  Rendered collections/admin_new_collection.html.erb within layouts/admin (15.7ms)
Completed 200 OK in 24ms (Views: 22.1ms | ActiveRecord: 0.3ms)


Started GET "/collection_images?r_id=" for 127.0.0.1 at 2016-01-17 03:08:52 +0100
Processing by RestaurantsController#show as JSON
  Parameters: {"r_id"=>"", "id"=>"collection_images"}
  [1m[35mRestaurant Load (2.2ms)[0m  SELECT `restaurants`.* FROM `restaurants` WHERE `restaurants`.`slug` = 'collection_images' LIMIT 1
  [1m[36mRestaurant Load (0.3ms)[0m  [1mSELECT `restaurants`.* FROM `restaurants` WHERE `restaurants`.`id` = 0 LIMIT 1[0m
Completed 500 Internal Server Error in 6ms

ActiveRecord::RecordNotFound (Couldn't find Restaurant with id=collection_images):
  app/controllers/restaurants_controller.rb:193:in `show'


  Rendered /Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_dispatch/middleware/templates/rescues/_trace.erb (1.2ms)
  Rendered /Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_dispatch/middleware/templates/rescues/_request_and_response.erb (1.6ms)
  Rendered /Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_dispatch/middleware/templates/rescues/diagnostics.erb within rescues/layout (48.2ms)


Started POST "/admin/collections" for 127.0.0.1 at 2016-01-17 03:09:10 +0100
Processing by CollectionsController#create as HTML
  Parameters: {"utf8"=>"âœ“", "authenticity_token"=>"ZhR8a2fYr/EQcBrBVm2c17tt7AHk64f/gvsZ5fOllxc=", "admin"=>"true", "collection"=>{"name"=>"asdfg", "description"=>"asdfg"}, "collection_image"=>{"image"=>#<ActionDispatch::Http::UploadedFile:0x007feb0a5069a8 @original_filename="steak.png", @content_type="image/png", @headers="Content-Disposition: form-data; name=\"collection_image[image]\"; filename=\"steak.png\"\r\nContent-Type: image/png\r\n", @tempfile=#<Tempfile:/var/folders/rf/q4l8n5k56pnbjgkdtzrhq_w00000gn/T/RackMultipart20160117-28026-kfo7su>>}}
  [1m[35mCollection Load (0.3ms)[0m  SELECT `collections`.* FROM `collections` WHERE `collections`.`name` = 'asdfg' LIMIT 1
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO `collections` (`created_at`, `description`, `image_url`, `name`, `updated_at`) VALUES ('2016-01-17 02:09:10', 'asdfg', NULL, 'asdfg', '2016-01-17 02:09:10')
  [1m[36m (0.5ms)[0m  [1mCOMMIT[0m
Redirected to http://0.0.0.0:3000/collection/15/edit
Completed 302 Found in 5ms (ActiveRecord: 1.1ms)


Started GET "/collection/15/edit" for 127.0.0.1 at 2016-01-17 03:09:11 +0100
Processing by CollectionsController#edit_collection as HTML
  Parameters: {"id"=>"15"}
  [1m[35mUser Load (2.0ms)[0m  SELECT `users`.* FROM `users` WHERE `users`.`id` = 1 LIMIT 1
  [1m[36mCollection Load (0.2ms)[0m  [1mSELECT `collections`.* FROM `collections` WHERE `collections`.`id` = 15 LIMIT 1[0m
  Rendered collections/_collection_form.html.erb (6.1ms)
  Rendered collections/_collection_restaurants_form.html.erb (0.4ms)
  Rendered collections/_upload_collection_image.html.erb (1.4ms)
  Rendered collections/edit_collection.html.erb within layouts/admin (11.1ms)
Completed 200 OK in 23ms (Views: 17.8ms | ActiveRecord: 2.2ms)


Started GET "/collection_images?r_id=15" for 127.0.0.1 at 2016-01-17 03:09:11 +0100
Processing by RestaurantsController#show as JSON
  Parameters: {"r_id"=>"15", "id"=>"collection_images"}
  [1m[35mRestaurant Load (2.3ms)[0m  SELECT `restaurants`.* FROM `restaurants` WHERE `restaurants`.`slug` = 'collection_images' LIMIT 1
  [1m[36mRestaurant Load (0.2ms)[0m  [1mSELECT `restaurants`.* FROM `restaurants` WHERE `restaurants`.`id` = 0 LIMIT 1[0m
Completed 500 Internal Server Error in 5ms

ActiveRecord::RecordNotFound (Couldn't find Restaurant with id=collection_images):
  app/controllers/restaurants_controller.rb:193:in `show'


  Rendered /Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_dispatch/middleware/templates/rescues/_trace.erb (1.4ms)
  Rendered /Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_dispatch/middleware/templates/rescues/_request_and_response.erb (1.2ms)
  Rendered /Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_dispatch/middleware/templates/rescues/diagnostics.erb within rescues/layout (52.1ms)


Started POST "/admin/collections" for 127.0.0.1 at 2016-01-17 03:10:37 +0100
Processing by CollectionsController#create as HTML
  Parameters: {"utf8"=>"âœ“", "authenticity_token"=>"ZhR8a2fYr/EQcBrBVm2c17tt7AHk64f/gvsZ5fOllxc=", "admin"=>"true", "collection"=>{"name"=>"abc123", "description"=>"asdfgadf"}, "collection_image"=>{"image"=>#<ActionDispatch::Http::UploadedFile:0x007feb0cfe9ad0 @original_filename="steak.png", @content_type="image/png", @headers="Content-Disposition: form-data; name=\"collection_image[image]\"; filename=\"steak.png\"\r\nContent-Type: image/png\r\n", @tempfile=#<Tempfile:/var/folders/rf/q4l8n5k56pnbjgkdtzrhq_w00000gn/T/RackMultipart20160117-28026-bynfll>>}}
  [1m[35mCollection Load (0.2ms)[0m  SELECT `collections`.* FROM `collections` WHERE `collections`.`name` = 'abc123' LIMIT 1
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35mSQL (0.4ms)[0m  INSERT INTO `collections` (`created_at`, `description`, `image_url`, `name`, `updated_at`) VALUES ('2016-01-17 02:10:37', 'asdfgadf', NULL, 'abc123', '2016-01-17 02:10:37')
  [1m[36m (0.6ms)[0m  [1mCOMMIT[0m
  [1m[35m (0.1ms)[0m  BEGIN
  [1m[36mSQL (7.6ms)[0m  [1mINSERT INTO `collection_images` (`collection_id`, `created_at`, `image_name`, `image_uid`, `text_content`, `text_hyperlink`, `text_title`, `updated_at`) VALUES (16, '2016-01-17 02:10:37', 'steak.png', '2016/01/17/03_10_37_249_steak.png', NULL, NULL, NULL, '2016-01-17 02:10:37')[0m
  [1m[35m (0.5ms)[0m  COMMIT
Redirected to http://0.0.0.0:3000/collection/16/edit
Completed 302 Found in 70ms (ActiveRecord: 11.0ms)


Started GET "/collection/16/edit" for 127.0.0.1 at 2016-01-17 03:10:37 +0100
Processing by CollectionsController#edit_collection as HTML
  Parameters: {"id"=>"16"}
  [1m[36mUser Load (0.2ms)[0m  [1mSELECT `users`.* FROM `users` WHERE `users`.`id` = 1 LIMIT 1[0m
  [1m[35mCollection Load (0.3ms)[0m  SELECT `collections`.* FROM `collections` WHERE `collections`.`id` = 16 LIMIT 1
  Rendered collections/_collection_form.html.erb (7.5ms)
  Rendered collections/_collection_restaurants_form.html.erb (0.6ms)
  Rendered collections/_upload_collection_image.html.erb (1.8ms)
  Rendered collections/edit_collection.html.erb within layouts/admin (13.9ms)
Completed 200 OK in 158ms (Views: 29.0ms | ActiveRecord: 1.5ms)


Started GET "/collection_images?r_id=16" for 127.0.0.1 at 2016-01-17 03:10:37 +0100
  [1m[36m (0.3ms)[0m  [1mSELECT COUNT(*) FROM `filter_types` WHERE (code = 'features')[0m
  [1m[35m (0.2ms)[0m  SELECT COUNT(*) FROM `filters` WHERE (code = 'offer')
  [1m[36mFilter Load (0.3ms)[0m  [1mSELECT `filters`.* FROM `filters` WHERE (code = 'offer') LIMIT 1[0m
  [1m[35mFilterType Load (0.3ms)[0m  SELECT `filter_types`.* FROM `filter_types` WHERE (code = 'features') LIMIT 1
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT `filters`.* FROM `filters` WHERE (code = 'offer') LIMIT 1[0m
  [1m[35mCACHE (0.0ms)[0m  SELECT `filter_types`.* FROM `filter_types` WHERE (code = 'features') LIMIT 1
Processing by RestaurantsController#show as JSON
  Parameters: {"r_id"=>"16", "id"=>"collection_images"}
  [1m[36mRestaurant Load (1.5ms)[0m  [1mSELECT `restaurants`.* FROM `restaurants` WHERE `restaurants`.`slug` = 'collection_images' LIMIT 1[0m
  [1m[35mRestaurant Load (0.2ms)[0m  SELECT `restaurants`.* FROM `restaurants` WHERE `restaurants`.`id` = 0 LIMIT 1
Completed 500 Internal Server Error in 9ms

ActiveRecord::RecordNotFound (Couldn't find Restaurant with id=collection_images):
  app/controllers/restaurants_controller.rb:193:in `show'


  Rendered /Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_dispatch/middleware/templates/rescues/_trace.erb (1.5ms)
  Rendered /Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_dispatch/middleware/templates/rescues/_request_and_response.erb (3.1ms)
  Rendered /Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_dispatch/middleware/templates/rescues/diagnostics.erb within rescues/layout (70.8ms)


Started POST "/admin/collections" for 127.0.0.1 at 2016-01-17 03:12:32 +0100
Processing by CollectionsController#create as HTML
  Parameters: {"utf8"=>"âœ“", "authenticity_token"=>"ZhR8a2fYr/EQcBrBVm2c17tt7AHk64f/gvsZ5fOllxc=", "admin"=>"true", "collection"=>{"name"=>"abc123b", "description"=>"asdfgadfadf"}, "collection_image"=>{"image"=>#<ActionDispatch::Http::UploadedFile:0x007feb03489bf8 @original_filename="steak.png", @content_type="image/png", @headers="Content-Disposition: form-data; name=\"collection_image[image]\"; filename=\"steak.png\"\r\nContent-Type: image/png\r\n", @tempfile=#<Tempfile:/var/folders/rf/q4l8n5k56pnbjgkdtzrhq_w00000gn/T/RackMultipart20160117-28026-powt6f>>}}
  [1m[36mCollection Load (0.2ms)[0m  [1mSELECT `collections`.* FROM `collections` WHERE `collections`.`name` = 'abc123b' LIMIT 1[0m
  [1m[35m (0.2ms)[0m  BEGIN
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO `collections` (`created_at`, `description`, `image_url`, `name`, `updated_at`) VALUES ('2016-01-17 02:12:32', 'asdfgadfadf', NULL, 'abc123b', '2016-01-17 02:12:32')[0m
  [1m[35m (0.5ms)[0m  COMMIT
Completed 500 Internal Server Error in 42ms

NoMethodError (undefined method `stringify_keys' for 17:Fixnum):
  app/controllers/collections_controller.rb:82:in `new'
  app/controllers/collections_controller.rb:82:in `block in create'
  app/controllers/collections_controller.rb:77:in `create'


  Rendered /Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_dispatch/middleware/templates/rescues/_trace.erb (1.1ms)
  Rendered /Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_dispatch/middleware/templates/rescues/_request_and_response.erb (1.0ms)
  Rendered /Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_dispatch/middleware/templates/rescues/diagnostics.erb within rescues/layout (42.6ms)


Started POST "/admin/collections" for 127.0.0.1 at 2016-01-17 03:18:55 +0100
Processing by CollectionsController#create as HTML
  Parameters: {"utf8"=>"âœ“", "authenticity_token"=>"ZhR8a2fYr/EQcBrBVm2c17tt7AHk64f/gvsZ5fOllxc=", "admin"=>"true", "collection"=>{"name"=>"abc123bc", "description"=>"asdfgadfadf"}, "collection_image"=>{"image"=>#<ActionDispatch::Http::UploadedFile:0x007feb0dcd6518 @original_filename="steak.png", @content_type="image/png", @headers="Content-Disposition: form-data; name=\"collection_image[image]\"; filename=\"steak.png\"\r\nContent-Type: image/png\r\n", @tempfile=#<Tempfile:/var/folders/rf/q4l8n5k56pnbjgkdtzrhq_w00000gn/T/RackMultipart20160117-28026-71zbn2>>}}
  [1m[36mCollection Load (0.2ms)[0m  [1mSELECT `collections`.* FROM `collections` WHERE `collections`.`name` = 'abc123bc' LIMIT 1[0m
  [1m[35m (0.1ms)[0m  BEGIN
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO `collections` (`created_at`, `description`, `image_url`, `name`, `updated_at`) VALUES ('2016-01-17 02:18:55', 'asdfgadfadf', NULL, 'abc123bc', '2016-01-17 02:18:55')[0m
  [1m[35m (0.7ms)[0m  COMMIT
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO `collection_images` (`collection_id`, `created_at`, `image_name`, `image_uid`, `text_content`, `text_hyperlink`, `text_title`, `updated_at`) VALUES (18, '2016-01-17 02:18:55', 'steak.png', '2016/01/17/03_18_55_694_steak.png', NULL, NULL, NULL, '2016-01-17 02:18:55')
  [1m[36m (0.4ms)[0m  [1mCOMMIT[0m
Redirected to http://0.0.0.0:3000/collection/18/edit
Completed 302 Found in 46ms (ActiveRecord: 4.0ms)


Started GET "/collection/18/edit" for 127.0.0.1 at 2016-01-17 03:18:55 +0100
Processing by CollectionsController#edit_collection as HTML
  Parameters: {"id"=>"18"}
  [1m[35mUser Load (0.2ms)[0m  SELECT `users`.* FROM `users` WHERE `users`.`id` = 1 LIMIT 1
  [1m[36mCollection Load (0.3ms)[0m  [1mSELECT `collections`.* FROM `collections` WHERE `collections`.`id` = 18 LIMIT 1[0m
  Rendered collections/_collection_form.html.erb (5.3ms)
  Rendered collections/_collection_restaurants_form.html.erb (0.3ms)
  Rendered collections/_upload_collection_image.html.erb (1.2ms)
  Rendered collections/edit_collection.html.erb within layouts/admin (9.2ms)
Completed 200 OK in 99ms (Views: 20.6ms | ActiveRecord: 1.5ms)


Started GET "/collection_images?r_id=18" for 127.0.0.1 at 2016-01-17 03:18:56 +0100
  [1m[35m (0.2ms)[0m  SELECT COUNT(*) FROM `filter_types` WHERE (code = 'features')
  [1m[36m (0.2ms)[0m  [1mSELECT COUNT(*) FROM `filters` WHERE (code = 'offer')[0m
  [1m[35mFilter Load (0.2ms)[0m  SELECT `filters`.* FROM `filters` WHERE (code = 'offer') LIMIT 1
  [1m[36mFilterType Load (0.2ms)[0m  [1mSELECT `filter_types`.* FROM `filter_types` WHERE (code = 'features') LIMIT 1[0m
  [1m[35mCACHE (0.0ms)[0m  SELECT `filters`.* FROM `filters` WHERE (code = 'offer') LIMIT 1
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT `filter_types`.* FROM `filter_types` WHERE (code = 'features') LIMIT 1[0m
Processing by RestaurantsController#show as JSON
  Parameters: {"r_id"=>"18", "id"=>"collection_images"}
  [1m[35mRestaurant Load (1.6ms)[0m  SELECT `restaurants`.* FROM `restaurants` WHERE `restaurants`.`slug` = 'collection_images' LIMIT 1
  [1m[36mRestaurant Load (0.4ms)[0m  [1mSELECT `restaurants`.* FROM `restaurants` WHERE `restaurants`.`id` = 0 LIMIT 1[0m
Completed 500 Internal Server Error in 8ms

ActiveRecord::RecordNotFound (Couldn't find Restaurant with id=collection_images):
  app/controllers/restaurants_controller.rb:193:in `show'


  Rendered /Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_dispatch/middleware/templates/rescues/_trace.erb (1.7ms)
  Rendered /Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_dispatch/middleware/templates/rescues/_request_and_response.erb (1.1ms)
  Rendered /Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_dispatch/middleware/templates/rescues/diagnostics.erb within rescues/layout (48.9ms)


Started GET "/admin/restaurants" for 127.0.0.1 at 2016-01-17 03:19:29 +0100
Processing by RestaurantsController#index as HTML
  [1m[35mUser Load (0.4ms)[0m  SELECT `users`.* FROM `users` WHERE `users`.`id` = 1 LIMIT 1
  Rendered shared/_restaurant_manage_tabs.html.erb (1.0ms)
  Rendered restaurants/_condition_fields.html.erb (9.6ms)
  [1m[36mRestaurant Load (1.1ms)[0m  [1mSELECT `restaurants`.* FROM `restaurants` ORDER BY disabled ASC,created_at DESC LIMIT 12 OFFSET 0[0m
  [1m[35mPhoto Load (0.5ms)[0m  SELECT `photos`.* FROM `photos` WHERE (restaurant_id = 1057 and cover = true and status = 1) LIMIT 1
  [1m[36mPhoto Load (0.4ms)[0m  [1mSELECT `photos`.* FROM `photos` WHERE `photos`.`restaurant_id` = 1057 AND `photos`.`status` = 1 ORDER BY restaurant_id ASC, created_at DESC LIMIT 1[0m
  [1m[35mCACHE (0.0ms)[0m  SELECT `photos`.* FROM `photos` WHERE (restaurant_id = 1057 and cover = true and status = 1) LIMIT 1
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT `photos`.* FROM `photos` WHERE `photos`.`restaurant_id` = 1057 AND `photos`.`status` = 1 ORDER BY restaurant_id ASC, created_at DESC LIMIT 1[0m
  [1m[35mPhoto Load (0.5ms)[0m  SELECT `photos`.* FROM `photos` WHERE (restaurant_id = 903 and cover = true and status = 1) LIMIT 1
  [1m[36mPhoto Load (0.3ms)[0m  [1mSELECT `photos`.* FROM `photos` WHERE `photos`.`restaurant_id` = 903 AND `photos`.`status` = 1 ORDER BY restaurant_id ASC, created_at DESC LIMIT 1[0m
  [1m[35mPhoto Load (0.4ms)[0m  SELECT `photos`.* FROM `photos` WHERE (restaurant_id = 876 and cover = true and status = 1) LIMIT 1
  [1m[36mPhoto Load (0.4ms)[0m  [1mSELECT `photos`.* FROM `photos` WHERE `photos`.`restaurant_id` = 876 AND `photos`.`status` = 1 ORDER BY restaurant_id ASC, created_at DESC LIMIT 1[0m
  [1m[35mPhoto Load (0.4ms)[0m  SELECT `photos`.* FROM `photos` WHERE (restaurant_id = 851 and cover = true and status = 1) LIMIT 1
  [1m[36mPhoto Load (0.3ms)[0m  [1mSELECT `photos`.* FROM `photos` WHERE `photos`.`restaurant_id` = 851 AND `photos`.`status` = 1 ORDER BY restaurant_id ASC, created_at DESC LIMIT 1[0m
  [1m[35mPhoto Load (0.3ms)[0m  SELECT `photos`.* FROM `photos` WHERE (restaurant_id = 693 and cover = true and status = 1) LIMIT 1
  [1m[36mPhoto Load (0.3ms)[0m  [1mSELECT `photos`.* FROM `photos` WHERE `photos`.`restaurant_id` = 693 AND `photos`.`status` = 1 ORDER BY restaurant_id ASC, created_at DESC LIMIT 1[0m
  [1m[35mPhoto Load (0.4ms)[0m  SELECT `photos`.* FROM `photos` WHERE (restaurant_id = 686 and cover = true and status = 1) LIMIT 1
  [1m[36mPhoto Load (0.3ms)[0m  [1mSELECT `photos`.* FROM `photos` WHERE `photos`.`restaurant_id` = 686 AND `photos`.`status` = 1 ORDER BY restaurant_id ASC, created_at DESC LIMIT 1[0m
  [1m[35mPhoto Load (0.3ms)[0m  SELECT `photos`.* FROM `photos` WHERE (restaurant_id = 669 and cover = true and status = 1) LIMIT 1
  [1m[36mPhoto Load (0.3ms)[0m  [1mSELECT `photos`.* FROM `photos` WHERE `photos`.`restaurant_id` = 669 AND `photos`.`status` = 1 ORDER BY restaurant_id ASC, created_at DESC LIMIT 1[0m
  [1m[35mPhoto Load (0.3ms)[0m  SELECT `photos`.* FROM `photos` WHERE (restaurant_id = 251 and cover = true and status = 1) LIMIT 1
  [1m[36mPhoto Load (0.3ms)[0m  [1mSELECT `photos`.* FROM `photos` WHERE `photos`.`restaurant_id` = 251 AND `photos`.`status` = 1 ORDER BY restaurant_id ASC, created_at DESC LIMIT 1[0m
  [1m[35mPhoto Load (0.3ms)[0m  SELECT `photos`.* FROM `photos` WHERE (restaurant_id = 250 and cover = true and status = 1) LIMIT 1
  [1m[36mPhoto Load (0.3ms)[0m  [1mSELECT `photos`.* FROM `photos` WHERE `photos`.`restaurant_id` = 250 AND `photos`.`status` = 1 ORDER BY restaurant_id ASC, created_at DESC LIMIT 1[0m
  [1m[35mPhoto Load (0.3ms)[0m  SELECT `photos`.* FROM `photos` WHERE (restaurant_id = 237 and cover = true and status = 1) LIMIT 1
  [1m[36mPhoto Load (0.4ms)[0m  [1mSELECT `photos`.* FROM `photos` WHERE `photos`.`restaurant_id` = 237 AND `photos`.`status` = 1 ORDER BY restaurant_id ASC, created_at DESC LIMIT 1[0m
  [1m[35mPhoto Load (0.4ms)[0m  SELECT `photos`.* FROM `photos` WHERE (restaurant_id = 231 and cover = true and status = 1) LIMIT 1
  [1m[36mPhoto Load (0.3ms)[0m  [1mSELECT `photos`.* FROM `photos` WHERE `photos`.`restaurant_id` = 231 AND `photos`.`status` = 1 ORDER BY restaurant_id ASC, created_at DESC LIMIT 1[0m
  [1m[35mPhoto Load (0.4ms)[0m  SELECT `photos`.* FROM `photos` WHERE (restaurant_id = 222 and cover = true and status = 1) LIMIT 1
  [1m[36mPhoto Load (0.3ms)[0m  [1mSELECT `photos`.* FROM `photos` WHERE `photos`.`restaurant_id` = 222 AND `photos`.`status` = 1 ORDER BY restaurant_id ASC, created_at DESC LIMIT 1[0m
  [1m[35m (0.4ms)[0m  SELECT COUNT(*) FROM `restaurants` 
  Rendered restaurants/index.html.erb within layouts/admin (158.5ms)
Completed 200 OK in 189ms (Views: 175.0ms | ActiveRecord: 10.9ms)


Started GET "/admin/collections" for 127.0.0.1 at 2016-01-17 03:20:34 +0100
Processing by CollectionsController#index as HTML
  Rendered shared/_restaurant_manage_tabs.html.erb (0.8ms)
  [1m[36mCollection Load (0.3ms)[0m  [1mSELECT `collections`.* FROM `collections` ORDER BY name ASC, created_at DESC LIMIT 12 OFFSET 0[0m
  [1m[35m (0.1ms)[0m  SELECT COUNT(*) FROM `collections` 
  Rendered collections/index.erb within layouts/admin (10.5ms)
  [1m[36mUser Load (0.4ms)[0m  [1mSELECT `users`.* FROM `users` WHERE `users`.`id` = 1 LIMIT 1[0m
Completed 200 OK in 21ms (Views: 19.1ms | ActiveRecord: 0.9ms)


Started GET "/restaurants" for 127.0.0.1 at 2016-01-17 03:20:44 +0100
Processing by RestaurantsController#index as HTML
  [1m[35mUser Load (0.4ms)[0m  SELECT `users`.* FROM `users` WHERE `users`.`id` = 1 LIMIT 1
  Rendered shared/_restaurant_manage_tabs.html.erb (0.8ms)
  Rendered restaurants/_condition_fields.html.erb (13.0ms)
  [1m[36mRestaurant Load (0.7ms)[0m  [1mSELECT `restaurants`.* FROM `restaurants` ORDER BY disabled ASC,created_at DESC LIMIT 12 OFFSET 0[0m
  [1m[35mPhoto Load (0.6ms)[0m  SELECT `photos`.* FROM `photos` WHERE (restaurant_id = 1057 and cover = true and status = 1) LIMIT 1
  [1m[36mPhoto Load (0.5ms)[0m  [1mSELECT `photos`.* FROM `photos` WHERE `photos`.`restaurant_id` = 1057 AND `photos`.`status` = 1 ORDER BY restaurant_id ASC, created_at DESC LIMIT 1[0m
  [1m[35mCACHE (0.0ms)[0m  SELECT `photos`.* FROM `photos` WHERE (restaurant_id = 1057 and cover = true and status = 1) LIMIT 1
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT `photos`.* FROM `photos` WHERE `photos`.`restaurant_id` = 1057 AND `photos`.`status` = 1 ORDER BY restaurant_id ASC, created_at DESC LIMIT 1[0m
  [1m[35mPhoto Load (0.5ms)[0m  SELECT `photos`.* FROM `photos` WHERE (restaurant_id = 903 and cover = true and status = 1) LIMIT 1
  [1m[36mPhoto Load (0.3ms)[0m  [1mSELECT `photos`.* FROM `photos` WHERE `photos`.`restaurant_id` = 903 AND `photos`.`status` = 1 ORDER BY restaurant_id ASC, created_at DESC LIMIT 1[0m
  [1m[35mPhoto Load (0.5ms)[0m  SELECT `photos`.* FROM `photos` WHERE (restaurant_id = 876 and cover = true and status = 1) LIMIT 1
  [1m[36mPhoto Load (0.3ms)[0m  [1mSELECT `photos`.* FROM `photos` WHERE `photos`.`restaurant_id` = 876 AND `photos`.`status` = 1 ORDER BY restaurant_id ASC, created_at DESC LIMIT 1[0m
  [1m[35mPhoto Load (0.3ms)[0m  SELECT `photos`.* FROM `photos` WHERE (restaurant_id = 851 and cover = true and status = 1) LIMIT 1
  [1m[36mPhoto Load (0.6ms)[0m  [1mSELECT `photos`.* FROM `photos` WHERE `photos`.`restaurant_id` = 851 AND `photos`.`status` = 1 ORDER BY restaurant_id ASC, created_at DESC LIMIT 1[0m
  [1m[35mPhoto Load (0.7ms)[0m  SELECT `photos`.* FROM `photos` WHERE (restaurant_id = 693 and cover = true and status = 1) LIMIT 1
  [1m[36mPhoto Load (0.4ms)[0m  [1mSELECT `photos`.* FROM `photos` WHERE `photos`.`restaurant_id` = 693 AND `photos`.`status` = 1 ORDER BY restaurant_id ASC, created_at DESC LIMIT 1[0m
  [1m[35mPhoto Load (0.4ms)[0m  SELECT `photos`.* FROM `photos` WHERE (restaurant_id = 686 and cover = true and status = 1) LIMIT 1
  [1m[36mPhoto Load (0.3ms)[0m  [1mSELECT `photos`.* FROM `photos` WHERE `photos`.`restaurant_id` = 686 AND `photos`.`status` = 1 ORDER BY restaurant_id ASC, created_at DESC LIMIT 1[0m
  [1m[35mPhoto Load (0.3ms)[0m  SELECT `photos`.* FROM `photos` WHERE (restaurant_id = 669 and cover = true and status = 1) LIMIT 1
  [1m[36mPhoto Load (0.3ms)[0m  [1mSELECT `photos`.* FROM `photos` WHERE `photos`.`restaurant_id` = 669 AND `photos`.`status` = 1 ORDER BY restaurant_id ASC, created_at DESC LIMIT 1[0m
  [1m[35mPhoto Load (0.3ms)[0m  SELECT `photos`.* FROM `photos` WHERE (restaurant_id = 251 and cover = true and status = 1) LIMIT 1
  [1m[36mPhoto Load (0.3ms)[0m  [1mSELECT `photos`.* FROM `photos` WHERE `photos`.`restaurant_id` = 251 AND `photos`.`status` = 1 ORDER BY restaurant_id ASC, created_at DESC LIMIT 1[0m
  [1m[35mPhoto Load (0.4ms)[0m  SELECT `photos`.* FROM `photos` WHERE (restaurant_id = 250 and cover = true and status = 1) LIMIT 1
  [1m[36mPhoto Load (0.3ms)[0m  [1mSELECT `photos`.* FROM `photos` WHERE `photos`.`restaurant_id` = 250 AND `photos`.`status` = 1 ORDER BY restaurant_id ASC, created_at DESC LIMIT 1[0m
  [1m[35mPhoto Load (0.3ms)[0m  SELECT `photos`.* FROM `photos` WHERE (restaurant_id = 237 and cover = true and status = 1) LIMIT 1
  [1m[36mPhoto Load (0.3ms)[0m  [1mSELECT `photos`.* FROM `photos` WHERE `photos`.`restaurant_id` = 237 AND `photos`.`status` = 1 ORDER BY restaurant_id ASC, created_at DESC LIMIT 1[0m
  [1m[35mPhoto Load (0.3ms)[0m  SELECT `photos`.* FROM `photos` WHERE (restaurant_id = 231 and cover = true and status = 1) LIMIT 1
  [1m[36mPhoto Load (0.3ms)[0m  [1mSELECT `photos`.* FROM `photos` WHERE `photos`.`restaurant_id` = 231 AND `photos`.`status` = 1 ORDER BY restaurant_id ASC, created_at DESC LIMIT 1[0m
  [1m[35mPhoto Load (0.3ms)[0m  SELECT `photos`.* FROM `photos` WHERE (restaurant_id = 222 and cover = true and status = 1) LIMIT 1
  [1m[36mPhoto Load (0.3ms)[0m  [1mSELECT `photos`.* FROM `photos` WHERE `photos`.`restaurant_id` = 222 AND `photos`.`status` = 1 ORDER BY restaurant_id ASC, created_at DESC LIMIT 1[0m
  [1m[35m (0.7ms)[0m  SELECT COUNT(*) FROM `restaurants` 
  Rendered restaurants/index.html.erb within layouts/admin (107.6ms)
Completed 200 OK in 117ms (Views: 103.5ms | ActiveRecord: 11.0ms)


Started GET "/admin/collections" for 127.0.0.1 at 2016-01-17 03:22:12 +0100
Processing by CollectionsController#index as HTML
  Rendered shared/_restaurant_manage_tabs.html.erb (1.0ms)
  [1m[36mCollection Load (0.3ms)[0m  [1mSELECT `collections`.* FROM `collections` ORDER BY name ASC, created_at DESC LIMIT 12 OFFSET 0[0m
  [1m[35m (0.2ms)[0m  SELECT COUNT(*) FROM `collections` 
  Rendered collections/index.erb within layouts/admin (11.2ms)
  [1m[36mUser Load (0.3ms)[0m  [1mSELECT `users`.* FROM `users` WHERE `users`.`id` = 1 LIMIT 1[0m
Completed 200 OK in 21ms (Views: 19.2ms | ActiveRecord: 0.8ms)


Started GET "/collection/16/edit" for 127.0.0.1 at 2016-01-17 03:22:14 +0100
Processing by CollectionsController#edit_collection as HTML
  Parameters: {"id"=>"16"}
  [1m[35mUser Load (0.5ms)[0m  SELECT `users`.* FROM `users` WHERE `users`.`id` = 1 LIMIT 1
  [1m[36mCollection Load (0.2ms)[0m  [1mSELECT `collections`.* FROM `collections` WHERE `collections`.`id` = 16 LIMIT 1[0m
  Rendered collections/_collection_form.html.erb (6.8ms)
  Rendered collections/_collection_restaurants_form.html.erb (0.5ms)
  Rendered collections/_upload_collection_image.html.erb (1.3ms)
  Rendered collections/edit_collection.html.erb within layouts/admin (11.8ms)
Completed 200 OK in 24ms (Views: 19.9ms | ActiveRecord: 0.7ms)


Started GET "/collection_images?r_id=16" for 127.0.0.1 at 2016-01-17 03:22:14 +0100
Processing by RestaurantsController#show as JSON
  Parameters: {"r_id"=>"16", "id"=>"collection_images"}
  [1m[35mRestaurant Load (1.7ms)[0m  SELECT `restaurants`.* FROM `restaurants` WHERE `restaurants`.`slug` = 'collection_images' LIMIT 1
  [1m[36mRestaurant Load (0.3ms)[0m  [1mSELECT `restaurants`.* FROM `restaurants` WHERE `restaurants`.`id` = 0 LIMIT 1[0m
Completed 500 Internal Server Error in 5ms

ActiveRecord::RecordNotFound (Couldn't find Restaurant with id=collection_images):
  app/controllers/restaurants_controller.rb:193:in `show'


  Rendered /Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_dispatch/middleware/templates/rescues/_trace.erb (1.4ms)
  Rendered /Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_dispatch/middleware/templates/rescues/_request_and_response.erb (1.1ms)
  Rendered /Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_dispatch/middleware/templates/rescues/diagnostics.erb within rescues/layout (46.1ms)


Started GET "/collection/16/edit" for 127.0.0.1 at 2016-01-17 03:23:32 +0100
Processing by CollectionsController#edit_collection as HTML
  Parameters: {"id"=>"16"}
  [1m[35mUser Load (0.3ms)[0m  SELECT `users`.* FROM `users` WHERE `users`.`id` = 1 LIMIT 1
  [1m[36mCollection Load (0.2ms)[0m  [1mSELECT `collections`.* FROM `collections` WHERE `collections`.`id` = 16 LIMIT 1[0m
  Rendered collections/_collection_form.html.erb (5.5ms)
  Rendered collections/_collection_restaurants_form.html.erb (0.5ms)
  Rendered collections/edit_collection.html.erb within layouts/admin (8.4ms)
Completed 200 OK in 18ms (Views: 14.6ms | ActiveRecord: 0.4ms)


Started GET "/collection/16/edit" for 127.0.0.1 at 2016-01-17 03:26:33 +0100
Processing by CollectionsController#edit_collection as HTML
  Parameters: {"id"=>"16"}
Completed 401 Unauthorized in 1ms


Started GET "/users/sign_in" for 127.0.0.1 at 2016-01-17 03:26:34 +0100
Processing by SessionsController#new as HTML
  Rendered sessions/new.html.slim within layouts/application (2.1ms)
  Rendered layouts/_header.html.erb (1.6ms)
  Rendered layouts/_main_menu.html.slim (0.6ms)
  Rendered layouts/_sub_main_menu.html.slim (0.0ms)
  Rendered layouts/_flash_messages.html.erb (0.1ms)
  [1m[35mBasicsPage Load (0.3ms)[0m  SELECT `basics_pages`.* FROM `basics_pages` WHERE `basics_pages`.`page_name` = 'Footer' LIMIT 1
  Rendered layouts/_footer.html.slim (43.2ms)
Completed 200 OK in 89ms (Views: 63.3ms | ActiveRecord: 24.8ms)


Started POST "/users/sign_in" for 127.0.0.1 at 2016-01-17 03:26:46 +0100
Processing by SessionsController#create as HTML
  Parameters: {"utf8"=>"âœ“", "authenticity_token"=>"RUljBeFq2Kuk53sFNS/nHZPaIO2p/6bajboSTDM6gqE=", "user"=>{"email"=>"kevin.muller1220@gmail.com", "password"=>"[FILTERED]"}, "button"=>""}
  [1m[36mUser Load (0.4ms)[0m  [1mSELECT `users`.* FROM `users` WHERE `users`.`email` = 'kevin.muller1220@gmail.com' LIMIT 1[0m
  [1m[35m (0.2ms)[0m  BEGIN
  [1m[36m (0.1ms)[0m  [1mCOMMIT[0m
  [1m[35m (0.1ms)[0m  BEGIN
  [1m[36m (0.3ms)[0m  [1mUPDATE `users` SET `last_sign_in_at` = '2016-01-17 01:25:40', `current_sign_in_at` = '2016-01-17 02:26:46', `sign_in_count` = 8, `updated_at` = '2016-01-17 02:26:46' WHERE `users`.`id` = 1[0m
  [1m[35m (0.6ms)[0m  COMMIT
Redirected to http://localhost:3000/admin
Completed 302 Found in 68ms (ActiveRecord: 1.6ms)


Started GET "/admin" for 127.0.0.1 at 2016-01-17 03:26:46 +0100
Processing by RestaurantsController#index as HTML
  [1m[36mUser Load (0.2ms)[0m  [1mSELECT `users`.* FROM `users` WHERE `users`.`id` = 1 LIMIT 1[0m
  Rendered shared/_restaurant_manage_tabs.html.erb (0.8ms)
  Rendered restaurants/_condition_fields.html.erb (11.0ms)
  [1m[35mRestaurant Load (0.9ms)[0m  SELECT `restaurants`.* FROM `restaurants` ORDER BY disabled ASC,created_at DESC LIMIT 12 OFFSET 0
  [1m[36mPhoto Load (0.4ms)[0m  [1mSELECT `photos`.* FROM `photos` WHERE (restaurant_id = 1057 and cover = true and status = 1) LIMIT 1[0m
  [1m[35mPhoto Load (0.3ms)[0m  SELECT `photos`.* FROM `photos` WHERE `photos`.`restaurant_id` = 1057 AND `photos`.`status` = 1 ORDER BY restaurant_id ASC, created_at DESC LIMIT 1
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT `photos`.* FROM `photos` WHERE (restaurant_id = 1057 and cover = true and status = 1) LIMIT 1[0m
  [1m[35mCACHE (0.0ms)[0m  SELECT `photos`.* FROM `photos` WHERE `photos`.`restaurant_id` = 1057 AND `photos`.`status` = 1 ORDER BY restaurant_id ASC, created_at DESC LIMIT 1
  [1m[36mPhoto Load (0.3ms)[0m  [1mSELECT `photos`.* FROM `photos` WHERE (restaurant_id = 903 and cover = true and status = 1) LIMIT 1[0m
  [1m[35mPhoto Load (0.3ms)[0m  SELECT `photos`.* FROM `photos` WHERE `photos`.`restaurant_id` = 903 AND `photos`.`status` = 1 ORDER BY restaurant_id ASC, created_at DESC LIMIT 1
  [1m[36mPhoto Load (0.4ms)[0m  [1mSELECT `photos`.* FROM `photos` WHERE (restaurant_id = 876 and cover = true and status = 1) LIMIT 1[0m
  [1m[35mPhoto Load (0.3ms)[0m  SELECT `photos`.* FROM `photos` WHERE `photos`.`restaurant_id` = 876 AND `photos`.`status` = 1 ORDER BY restaurant_id ASC, created_at DESC LIMIT 1
  [1m[36mPhoto Load (0.4ms)[0m  [1mSELECT `photos`.* FROM `photos` WHERE (restaurant_id = 851 and cover = true and status = 1) LIMIT 1[0m
  [1m[35mPhoto Load (0.3ms)[0m  SELECT `photos`.* FROM `photos` WHERE `photos`.`restaurant_id` = 851 AND `photos`.`status` = 1 ORDER BY restaurant_id ASC, created_at DESC LIMIT 1
  [1m[36mPhoto Load (0.4ms)[0m  [1mSELECT `photos`.* FROM `photos` WHERE (restaurant_id = 693 and cover = true and status = 1) LIMIT 1[0m
  [1m[35mPhoto Load (0.5ms)[0m  SELECT `photos`.* FROM `photos` WHERE `photos`.`restaurant_id` = 693 AND `photos`.`status` = 1 ORDER BY restaurant_id ASC, created_at DESC LIMIT 1
  [1m[36mPhoto Load (0.4ms)[0m  [1mSELECT `photos`.* FROM `photos` WHERE (restaurant_id = 686 and cover = true and status = 1) LIMIT 1[0m
  [1m[35mPhoto Load (0.3ms)[0m  SELECT `photos`.* FROM `photos` WHERE `photos`.`restaurant_id` = 686 AND `photos`.`status` = 1 ORDER BY restaurant_id ASC, created_at DESC LIMIT 1
  [1m[36mPhoto Load (0.5ms)[0m  [1mSELECT `photos`.* FROM `photos` WHERE (restaurant_id = 669 and cover = true and status = 1) LIMIT 1[0m
  [1m[35mPhoto Load (0.4ms)[0m  SELECT `photos`.* FROM `photos` WHERE `photos`.`restaurant_id` = 669 AND `photos`.`status` = 1 ORDER BY restaurant_id ASC, created_at DESC LIMIT 1
  [1m[36mPhoto Load (0.5ms)[0m  [1mSELECT `photos`.* FROM `photos` WHERE (restaurant_id = 251 and cover = true and status = 1) LIMIT 1[0m
  [1m[35mPhoto Load (0.4ms)[0m  SELECT `photos`.* FROM `photos` WHERE `photos`.`restaurant_id` = 251 AND `photos`.`status` = 1 ORDER BY restaurant_id ASC, created_at DESC LIMIT 1
  [1m[36mPhoto Load (0.5ms)[0m  [1mSELECT `photos`.* FROM `photos` WHERE (restaurant_id = 250 and cover = true and status = 1) LIMIT 1[0m
  [1m[35mPhoto Load (0.3ms)[0m  SELECT `photos`.* FROM `photos` WHERE `photos`.`restaurant_id` = 250 AND `photos`.`status` = 1 ORDER BY restaurant_id ASC, created_at DESC LIMIT 1
  [1m[36mPhoto Load (0.4ms)[0m  [1mSELECT `photos`.* FROM `photos` WHERE (restaurant_id = 237 and cover = true and status = 1) LIMIT 1[0m
  [1m[35mPhoto Load (0.3ms)[0m  SELECT `photos`.* FROM `photos` WHERE `photos`.`restaurant_id` = 237 AND `photos`.`status` = 1 ORDER BY restaurant_id ASC, created_at DESC LIMIT 1
  [1m[36mPhoto Load (0.3ms)[0m  [1mSELECT `photos`.* FROM `photos` WHERE (restaurant_id = 231 and cover = true and status = 1) LIMIT 1[0m
  [1m[35mPhoto Load (0.3ms)[0m  SELECT `photos`.* FROM `photos` WHERE `photos`.`restaurant_id` = 231 AND `photos`.`status` = 1 ORDER BY restaurant_id ASC, created_at DESC LIMIT 1
  [1m[36mPhoto Load (0.3ms)[0m  [1mSELECT `photos`.* FROM `photos` WHERE (restaurant_id = 222 and cover = true and status = 1) LIMIT 1[0m
  [1m[35mPhoto Load (0.3ms)[0m  SELECT `photos`.* FROM `photos` WHERE `photos`.`restaurant_id` = 222 AND `photos`.`status` = 1 ORDER BY restaurant_id ASC, created_at DESC LIMIT 1
  [1m[36m (0.3ms)[0m  [1mSELECT COUNT(*) FROM `restaurants` [0m
  Rendered restaurants/index.html.erb within layouts/admin (138.3ms)
Completed 200 OK in 175ms (Views: 162.8ms | ActiveRecord: 10.2ms)


Started GET "/admin/collections" for 127.0.0.1 at 2016-01-17 03:26:54 +0100
Processing by CollectionsController#index as HTML
  Rendered shared/_restaurant_manage_tabs.html.erb (1.3ms)
  [1m[35mCollection Load (0.3ms)[0m  SELECT `collections`.* FROM `collections` ORDER BY name ASC, created_at DESC LIMIT 12 OFFSET 0
  [1m[36m (0.2ms)[0m  [1mSELECT COUNT(*) FROM `collections` [0m
  Rendered collections/index.erb within layouts/admin (12.0ms)
  [1m[35mUser Load (0.4ms)[0m  SELECT `users`.* FROM `users` WHERE `users`.`id` = 1 LIMIT 1
Completed 200 OK in 56ms (Views: 53.8ms | ActiveRecord: 0.9ms)


Started GET "/collection/16/edit" for 127.0.0.1 at 2016-01-17 03:27:04 +0100
Processing by CollectionsController#edit_collection as HTML
  Parameters: {"id"=>"16"}
  [1m[36mUser Load (0.2ms)[0m  [1mSELECT `users`.* FROM `users` WHERE `users`.`id` = 1 LIMIT 1[0m
  [1m[35mCollection Load (0.2ms)[0m  SELECT `collections`.* FROM `collections` WHERE `collections`.`id` = 16 LIMIT 1
  Rendered collections/_collection_form.html.erb (7.4ms)
  Rendered collections/_collection_restaurants_form.html.erb (0.6ms)
  Rendered collections/edit_collection.html.erb within layouts/admin (30.8ms)
Completed 200 OK in 52ms (Views: 48.8ms | ActiveRecord: 0.4ms)


Started GET "/collection/16/edit" for 127.0.0.1 at 2016-01-17 03:27:32 +0100
Processing by CollectionsController#edit_collection as HTML
  Parameters: {"id"=>"16"}
  [1m[36mUser Load (0.4ms)[0m  [1mSELECT `users`.* FROM `users` WHERE `users`.`id` = 1 LIMIT 1[0m
  [1m[35mCollection Load (0.2ms)[0m  SELECT `collections`.* FROM `collections` WHERE `collections`.`id` = 16 LIMIT 1
  Rendered collections/_collection_form.html.erb (7.8ms)
  Rendered collections/_collection_restaurants_form.html.erb (0.4ms)
  Rendered collections/edit_collection.html.erb within layouts/admin (12.2ms)
Completed 200 OK in 25ms (Views: 20.4ms | ActiveRecord: 0.6ms)


Started GET "/admin/restaurants" for 127.0.0.1 at 2016-01-17 03:27:46 +0100
Processing by RestaurantsController#index as HTML
  [1m[36mUser Load (0.3ms)[0m  [1mSELECT `users`.* FROM `users` WHERE `users`.`id` = 1 LIMIT 1[0m
  Rendered shared/_restaurant_manage_tabs.html.erb (0.8ms)
  Rendered restaurants/_condition_fields.html.erb (14.1ms)
  [1m[35mRestaurant Load (0.7ms)[0m  SELECT `restaurants`.* FROM `restaurants` ORDER BY disabled ASC,created_at DESC LIMIT 12 OFFSET 0
  [1m[36mPhoto Load (0.4ms)[0m  [1mSELECT `photos`.* FROM `photos` WHERE (restaurant_id = 1057 and cover = true and status = 1) LIMIT 1[0m
  [1m[35mPhoto Load (0.3ms)[0m  SELECT `photos`.* FROM `photos` WHERE `photos`.`restaurant_id` = 1057 AND `photos`.`status` = 1 ORDER BY restaurant_id ASC, created_at DESC LIMIT 1
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT `photos`.* FROM `photos` WHERE (restaurant_id = 1057 and cover = true and status = 1) LIMIT 1[0m
  [1m[35mCACHE (0.0ms)[0m  SELECT `photos`.* FROM `photos` WHERE `photos`.`restaurant_id` = 1057 AND `photos`.`status` = 1 ORDER BY restaurant_id ASC, created_at DESC LIMIT 1
  [1m[36mPhoto Load (0.4ms)[0m  [1mSELECT `photos`.* FROM `photos` WHERE (restaurant_id = 903 and cover = true and status = 1) LIMIT 1[0m
  [1m[35mPhoto Load (0.3ms)[0m  SELECT `photos`.* FROM `photos` WHERE `photos`.`restaurant_id` = 903 AND `photos`.`status` = 1 ORDER BY restaurant_id ASC, created_at DESC LIMIT 1
  [1m[36mPhoto Load (0.4ms)[0m  [1mSELECT `photos`.* FROM `photos` WHERE (restaurant_id = 876 and cover = true and status = 1) LIMIT 1[0m
  [1m[35mPhoto Load (0.3ms)[0m  SELECT `photos`.* FROM `photos` WHERE `photos`.`restaurant_id` = 876 AND `photos`.`status` = 1 ORDER BY restaurant_id ASC, created_at DESC LIMIT 1
  [1m[36mPhoto Load (0.4ms)[0m  [1mSELECT `photos`.* FROM `photos` WHERE (restaurant_id = 851 and cover = true and status = 1) LIMIT 1[0m
  [1m[35mPhoto Load (0.3ms)[0m  SELECT `photos`.* FROM `photos` WHERE `photos`.`restaurant_id` = 851 AND `photos`.`status` = 1 ORDER BY restaurant_id ASC, created_at DESC LIMIT 1
  [1m[36mPhoto Load (0.4ms)[0m  [1mSELECT `photos`.* FROM `photos` WHERE (restaurant_id = 693 and cover = true and status = 1) LIMIT 1[0m
  [1m[35mPhoto Load (0.4ms)[0m  SELECT `photos`.* FROM `photos` WHERE `photos`.`restaurant_id` = 693 AND `photos`.`status` = 1 ORDER BY restaurant_id ASC, created_at DESC LIMIT 1
  [1m[36mPhoto Load (0.5ms)[0m  [1mSELECT `photos`.* FROM `photos` WHERE (restaurant_id = 686 and cover = true and status = 1) LIMIT 1[0m
  [1m[35mPhoto Load (0.3ms)[0m  SELECT `photos`.* FROM `photos` WHERE `photos`.`restaurant_id` = 686 AND `photos`.`status` = 1 ORDER BY restaurant_id ASC, created_at DESC LIMIT 1
  [1m[36mPhoto Load (0.4ms)[0m  [1mSELECT `photos`.* FROM `photos` WHERE (restaurant_id = 669 and cover = true and status = 1) LIMIT 1[0m
  [1m[35mPhoto Load (0.3ms)[0m  SELECT `photos`.* FROM `photos` WHERE `photos`.`restaurant_id` = 669 AND `photos`.`status` = 1 ORDER BY restaurant_id ASC, created_at DESC LIMIT 1
  [1m[36mPhoto Load (0.4ms)[0m  [1mSELECT `photos`.* FROM `photos` WHERE (restaurant_id = 251 and cover = true and status = 1) LIMIT 1[0m
  [1m[35mPhoto Load (0.3ms)[0m  SELECT `photos`.* FROM `photos` WHERE `photos`.`restaurant_id` = 251 AND `photos`.`status` = 1 ORDER BY restaurant_id ASC, created_at DESC LIMIT 1
  [1m[36mPhoto Load (0.4ms)[0m  [1mSELECT `photos`.* FROM `photos` WHERE (restaurant_id = 250 and cover = true and status = 1) LIMIT 1[0m
  [1m[35mPhoto Load (0.3ms)[0m  SELECT `photos`.* FROM `photos` WHERE `photos`.`restaurant_id` = 250 AND `photos`.`status` = 1 ORDER BY restaurant_id ASC, created_at DESC LIMIT 1
  [1m[36mPhoto Load (0.3ms)[0m  [1mSELECT `photos`.* FROM `photos` WHERE (restaurant_id = 237 and cover = true and status = 1) LIMIT 1[0m
  [1m[35mPhoto Load (0.3ms)[0m  SELECT `photos`.* FROM `photos` WHERE `photos`.`restaurant_id` = 237 AND `photos`.`status` = 1 ORDER BY restaurant_id ASC, created_at DESC LIMIT 1
  [1m[36mPhoto Load (0.4ms)[0m  [1mSELECT `photos`.* FROM `photos` WHERE (restaurant_id = 231 and cover = true and status = 1) LIMIT 1[0m
  [1m[35mPhoto Load (0.4ms)[0m  SELECT `photos`.* FROM `photos` WHERE `photos`.`restaurant_id` = 231 AND `photos`.`status` = 1 ORDER BY restaurant_id ASC, created_at DESC LIMIT 1
  [1m[36mPhoto Load (0.4ms)[0m  [1mSELECT `photos`.* FROM `photos` WHERE (restaurant_id = 222 and cover = true and status = 1) LIMIT 1[0m
  [1m[35mPhoto Load (0.4ms)[0m  SELECT `photos`.* FROM `photos` WHERE `photos`.`restaurant_id` = 222 AND `photos`.`status` = 1 ORDER BY restaurant_id ASC, created_at DESC LIMIT 1
  [1m[36m (0.5ms)[0m  [1mSELECT COUNT(*) FROM `restaurants` [0m
  Rendered restaurants/index.html.erb within layouts/admin (162.5ms)
Completed 200 OK in 172ms (Views: 159.9ms | ActiveRecord: 9.8ms)


Started GET "/admin/restaurants" for 127.0.0.1 at 2016-01-17 03:27:46 +0100
Processing by RestaurantsController#index as HTML
  [1m[35mUser Load (0.4ms)[0m  SELECT `users`.* FROM `users` WHERE `users`.`id` = 1 LIMIT 1
  Rendered shared/_restaurant_manage_tabs.html.erb (0.6ms)
  Rendered restaurants/_condition_fields.html.erb (10.2ms)
  [1m[36mRestaurant Load (0.8ms)[0m  [1mSELECT `restaurants`.* FROM `restaurants` ORDER BY disabled ASC,created_at DESC LIMIT 12 OFFSET 0[0m
  [1m[35mPhoto Load (0.5ms)[0m  SELECT `photos`.* FROM `photos` WHERE (restaurant_id = 1057 and cover = true and status = 1) LIMIT 1
  [1m[36mPhoto Load (1.2ms)[0m  [1mSELECT `photos`.* FROM `photos` WHERE `photos`.`restaurant_id` = 1057 AND `photos`.`status` = 1 ORDER BY restaurant_id ASC, created_at DESC LIMIT 1[0m
  [1m[35mCACHE (0.0ms)[0m  SELECT `photos`.* FROM `photos` WHERE (restaurant_id = 1057 and cover = true and status = 1) LIMIT 1
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT `photos`.* FROM `photos` WHERE `photos`.`restaurant_id` = 1057 AND `photos`.`status` = 1 ORDER BY restaurant_id ASC, created_at DESC LIMIT 1[0m
  [1m[35mPhoto Load (0.9ms)[0m  SELECT `photos`.* FROM `photos` WHERE (restaurant_id = 903 and cover = true and status = 1) LIMIT 1
  [1m[36mPhoto Load (0.3ms)[0m  [1mSELECT `photos`.* FROM `photos` WHERE `photos`.`restaurant_id` = 903 AND `photos`.`status` = 1 ORDER BY restaurant_id ASC, created_at DESC LIMIT 1[0m
  [1m[35mPhoto Load (0.4ms)[0m  SELECT `photos`.* FROM `photos` WHERE (restaurant_id = 876 and cover = true and status = 1) LIMIT 1
  [1m[36mPhoto Load (0.3ms)[0m  [1mSELECT `photos`.* FROM `photos` WHERE `photos`.`restaurant_id` = 876 AND `photos`.`status` = 1 ORDER BY restaurant_id ASC, created_at DESC LIMIT 1[0m
  [1m[35mPhoto Load (0.3ms)[0m  SELECT `photos`.* FROM `photos` WHERE (restaurant_id = 851 and cover = true and status = 1) LIMIT 1
  [1m[36mPhoto Load (0.3ms)[0m  [1mSELECT `photos`.* FROM `photos` WHERE `photos`.`restaurant_id` = 851 AND `photos`.`status` = 1 ORDER BY restaurant_id ASC, created_at DESC LIMIT 1[0m
  [1m[35mPhoto Load (0.3ms)[0m  SELECT `photos`.* FROM `photos` WHERE (restaurant_id = 693 and cover = true and status = 1) LIMIT 1
  [1m[36mPhoto Load (0.3ms)[0m  [1mSELECT `photos`.* FROM `photos` WHERE `photos`.`restaurant_id` = 693 AND `photos`.`status` = 1 ORDER BY restaurant_id ASC, created_at DESC LIMIT 1[0m
  [1m[35mPhoto Load (0.4ms)[0m  SELECT `photos`.* FROM `photos` WHERE (restaurant_id = 686 and cover = true and status = 1) LIMIT 1
  [1m[36mPhoto Load (0.3ms)[0m  [1mSELECT `photos`.* FROM `photos` WHERE `photos`.`restaurant_id` = 686 AND `photos`.`status` = 1 ORDER BY restaurant_id ASC, created_at DESC LIMIT 1[0m
  [1m[35mPhoto Load (0.3ms)[0m  SELECT `photos`.* FROM `photos` WHERE (restaurant_id = 669 and cover = true and status = 1) LIMIT 1
  [1m[36mPhoto Load (0.3ms)[0m  [1mSELECT `photos`.* FROM `photos` WHERE `photos`.`restaurant_id` = 669 AND `photos`.`status` = 1 ORDER BY restaurant_id ASC, created_at DESC LIMIT 1[0m
  [1m[35mPhoto Load (0.5ms)[0m  SELECT `photos`.* FROM `photos` WHERE (restaurant_id = 251 and cover = true and status = 1) LIMIT 1
  [1m[36mPhoto Load (0.3ms)[0m  [1mSELECT `photos`.* FROM `photos` WHERE `photos`.`restaurant_id` = 251 AND `photos`.`status` = 1 ORDER BY restaurant_id ASC, created_at DESC LIMIT 1[0m
  [1m[35mPhoto Load (0.5ms)[0m  SELECT `photos`.* FROM `photos` WHERE (restaurant_id = 250 and cover = true and status = 1) LIMIT 1
  [1m[36mPhoto Load (0.3ms)[0m  [1mSELECT `photos`.* FROM `photos` WHERE `photos`.`restaurant_id` = 250 AND `photos`.`status` = 1 ORDER BY restaurant_id ASC, created_at DESC LIMIT 1[0m
  [1m[35mPhoto Load (3.3ms)[0m  SELECT `photos`.* FROM `photos` WHERE (restaurant_id = 237 and cover = true and status = 1) LIMIT 1
  [1m[36mPhoto Load (0.4ms)[0m  [1mSELECT `photos`.* FROM `photos` WHERE `photos`.`restaurant_id` = 237 AND `photos`.`status` = 1 ORDER BY restaurant_id ASC, created_at DESC LIMIT 1[0m
  [1m[35mPhoto Load (0.4ms)[0m  SELECT `photos`.* FROM `photos` WHERE (restaurant_id = 231 and cover = true and status = 1) LIMIT 1
  [1m[36mPhoto Load (0.4ms)[0m  [1mSELECT `photos`.* FROM `photos` WHERE `photos`.`restaurant_id` = 231 AND `photos`.`status` = 1 ORDER BY restaurant_id ASC, created_at DESC LIMIT 1[0m
  [1m[35mPhoto Load (0.5ms)[0m  SELECT `photos`.* FROM `photos` WHERE (restaurant_id = 222 and cover = true and status = 1) LIMIT 1
  [1m[36mPhoto Load (0.3ms)[0m  [1mSELECT `photos`.* FROM `photos` WHERE `photos`.`restaurant_id` = 222 AND `photos`.`status` = 1 ORDER BY restaurant_id ASC, created_at DESC LIMIT 1[0m
  [1m[35m (0.3ms)[0m  SELECT COUNT(*) FROM `restaurants` 
  Rendered restaurants/index.html.erb within layouts/admin (124.0ms)
Completed 200 OK in 133ms (Views: 115.7ms | ActiveRecord: 14.4ms)


Started GET "/admin/restaurants/admin_new" for 127.0.0.1 at 2016-01-17 03:27:52 +0100
Processing by RestaurantsController#admin_new as HTML
  [1m[36mUser Load (0.4ms)[0m  [1mSELECT `users`.* FROM `users` WHERE `users`.`id` = 1 LIMIT 1[0m
  [1m[35m (2.2ms)[0m  SELECT `filters`.id FROM `filters` INNER JOIN `filters_restaurants` ON `filters`.`id` = `filters_restaurants`.`filter_id` WHERE `filters_restaurants`.`restaurant_id` IS NULL
  [1m[36mFilterType Load (0.4ms)[0m  [1mSELECT `filter_types`.* FROM `filter_types` WHERE `filter_types`.`code` = 'hal_status' LIMIT 1[0m
  [1m[35mFilterType Load (0.1ms)[0m  SELECT `filter_types`.* FROM `filter_types` WHERE `filter_types`.`code` = 'price' LIMIT 1
  [1m[36mFilterType Load (0.2ms)[0m  [1mSELECT `filter_types`.* FROM `filter_types` WHERE `filter_types`.`code` = 'cuisine' LIMIT 1[0m
  [1m[35mFilterType Load (0.2ms)[0m  SELECT `filter_types`.* FROM `filter_types` WHERE `filter_types`.`code` = 'alcohol' LIMIT 1
  [1m[36mFilterType Load (0.2ms)[0m  [1mSELECT `filter_types`.* FROM `filter_types` WHERE `filter_types`.`code` = 'features' LIMIT 1[0m
  Rendered restaurants/_googlemap.html.erb (0.2ms)
  [1m[35mFilter Load (0.4ms)[0m  SELECT `filters`.* FROM `filters` WHERE `filters`.`filter_type_id` = 8
  [1m[36mFilter Load (0.8ms)[0m  [1mSELECT `filters`.* FROM `filters` WHERE `filters`.`filter_type_id` = 1 ORDER BY name ASC[0m
  [1m[35mFilter Load (0.7ms)[0m  SELECT `filters`.* FROM `filters` WHERE `filters`.`filter_type_id` = 4
  [1m[36mFilter Load (0.4ms)[0m  [1mSELECT `filters`.* FROM `filters` WHERE `filters`.`filter_type_id` = 6[0m
  [1m[35mFilter Load (0.2ms)[0m  SELECT `filters`.* FROM `filters` WHERE `filters`.`filter_type_id` = 11 AND (code != 'offer')
  Rendered restaurants/_admin_form.html.erb (140.8ms)
  Rendered restaurants/_upload_menu.html.erb (3.4ms)
  Rendered restaurants/_upload_photos.html.erb (2.0ms)
  Rendered restaurants/admin_new.html.erb within layouts/admin (152.3ms)
Completed 200 OK in 284ms (Views: 160.8ms | ActiveRecord: 8.6ms)


Started GET "/photos?r_id=" for 127.0.0.1 at 2016-01-17 03:27:56 +0100
Processing by PhotosController#index as JSON
  Parameters: {"r_id"=>""}
  [1m[36mRestaurant Load (1.5ms)[0m  [1mSELECT `restaurants`.* FROM `restaurants` WHERE `restaurants`.`slug` = '' LIMIT 1[0m
  [1m[35mRestaurant Load (0.2ms)[0m  SELECT `restaurants`.* FROM `restaurants` WHERE `restaurants`.`id` = 0 LIMIT 1
Completed 500 Internal Server Error in 6ms

ActiveRecord::RecordNotFound (Couldn't find Restaurant with id=):
  app/controllers/photos_controller.rb:11:in `index'


  Rendered /Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_dispatch/middleware/templates/rescues/_trace.erb (2.6ms)
  Rendered /Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_dispatch/middleware/templates/rescues/_request_and_response.erb (2.6ms)
  Rendered /Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_dispatch/middleware/templates/rescues/diagnostics.erb within rescues/layout (69.1ms)


Started GET "/collection/16/edit" for 127.0.0.1 at 2016-01-17 03:28:09 +0100
Processing by CollectionsController#edit_collection as HTML
  Parameters: {"id"=>"16"}
  [1m[36mUser Load (0.4ms)[0m  [1mSELECT `users`.* FROM `users` WHERE `users`.`id` = 1 LIMIT 1[0m
  [1m[35mCollection Load (0.3ms)[0m  SELECT `collections`.* FROM `collections` WHERE `collections`.`id` = 16 LIMIT 1
  Rendered collections/_collection_form.html.erb (5.9ms)
  Rendered collections/_collection_restaurants_form.html.erb (0.4ms)
  Rendered collections/edit_collection.html.erb within layouts/admin (8.4ms)
Completed 200 OK in 21ms (Views: 15.9ms | ActiveRecord: 0.6ms)


Started GET "/admin/restaurants" for 127.0.0.1 at 2016-01-17 03:28:11 +0100
Processing by RestaurantsController#index as HTML
  [1m[36mUser Load (0.3ms)[0m  [1mSELECT `users`.* FROM `users` WHERE `users`.`id` = 1 LIMIT 1[0m
  Rendered shared/_restaurant_manage_tabs.html.erb (0.7ms)
  Rendered restaurants/_condition_fields.html.erb (11.4ms)
  [1m[35mRestaurant Load (0.8ms)[0m  SELECT `restaurants`.* FROM `restaurants` ORDER BY disabled ASC,created_at DESC LIMIT 12 OFFSET 0
  [1m[36mPhoto Load (0.4ms)[0m  [1mSELECT `photos`.* FROM `photos` WHERE (restaurant_id = 1057 and cover = true and status = 1) LIMIT 1[0m
  [1m[35mPhoto Load (0.3ms)[0m  SELECT `photos`.* FROM `photos` WHERE `photos`.`restaurant_id` = 1057 AND `photos`.`status` = 1 ORDER BY restaurant_id ASC, created_at DESC LIMIT 1
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT `photos`.* FROM `photos` WHERE (restaurant_id = 1057 and cover = true and status = 1) LIMIT 1[0m
  [1m[35mCACHE (0.0ms)[0m  SELECT `photos`.* FROM `photos` WHERE `photos`.`restaurant_id` = 1057 AND `photos`.`status` = 1 ORDER BY restaurant_id ASC, created_at DESC LIMIT 1
  [1m[36mPhoto Load (0.5ms)[0m  [1mSELECT `photos`.* FROM `photos` WHERE (restaurant_id = 903 and cover = true and status = 1) LIMIT 1[0m
  [1m[35mPhoto Load (0.4ms)[0m  SELECT `photos`.* FROM `photos` WHERE `photos`.`restaurant_id` = 903 AND `photos`.`status` = 1 ORDER BY restaurant_id ASC, created_at DESC LIMIT 1
  [1m[36mPhoto Load (0.4ms)[0m  [1mSELECT `photos`.* FROM `photos` WHERE (restaurant_id = 876 and cover = true and status = 1) LIMIT 1[0m
  [1m[35mPhoto Load (0.3ms)[0m  SELECT `photos`.* FROM `photos` WHERE `photos`.`restaurant_id` = 876 AND `photos`.`status` = 1 ORDER BY restaurant_id ASC, created_at DESC LIMIT 1
  [1m[36mPhoto Load (0.4ms)[0m  [1mSELECT `photos`.* FROM `photos` WHERE (restaurant_id = 851 and cover = true and status = 1) LIMIT 1[0m
  [1m[35mPhoto Load (0.4ms)[0m  SELECT `photos`.* FROM `photos` WHERE `photos`.`restaurant_id` = 851 AND `photos`.`status` = 1 ORDER BY restaurant_id ASC, created_at DESC LIMIT 1
  [1m[36mPhoto Load (0.4ms)[0m  [1mSELECT `photos`.* FROM `photos` WHERE (restaurant_id = 693 and cover = true and status = 1) LIMIT 1[0m
  [1m[35mPhoto Load (0.3ms)[0m  SELECT `photos`.* FROM `photos` WHERE `photos`.`restaurant_id` = 693 AND `photos`.`status` = 1 ORDER BY restaurant_id ASC, created_at DESC LIMIT 1
  [1m[36mPhoto Load (0.4ms)[0m  [1mSELECT `photos`.* FROM `photos` WHERE (restaurant_id = 686 and cover = true and status = 1) LIMIT 1[0m
  [1m[35mPhoto Load (0.3ms)[0m  SELECT `photos`.* FROM `photos` WHERE `photos`.`restaurant_id` = 686 AND `photos`.`status` = 1 ORDER BY restaurant_id ASC, created_at DESC LIMIT 1
  [1m[36mPhoto Load (0.5ms)[0m  [1mSELECT `photos`.* FROM `photos` WHERE (restaurant_id = 669 and cover = true and status = 1) LIMIT 1[0m
  [1m[35mPhoto Load (0.3ms)[0m  SELECT `photos`.* FROM `photos` WHERE `photos`.`restaurant_id` = 669 AND `photos`.`status` = 1 ORDER BY restaurant_id ASC, created_at DESC LIMIT 1
  [1m[36mPhoto Load (0.4ms)[0m  [1mSELECT `photos`.* FROM `photos` WHERE (restaurant_id = 251 and cover = true and status = 1) LIMIT 1[0m
  [1m[35mPhoto Load (0.3ms)[0m  SELECT `photos`.* FROM `photos` WHERE `photos`.`restaurant_id` = 251 AND `photos`.`status` = 1 ORDER BY restaurant_id ASC, created_at DESC LIMIT 1
  [1m[36mPhoto Load (0.4ms)[0m  [1mSELECT `photos`.* FROM `photos` WHERE (restaurant_id = 250 and cover = true and status = 1) LIMIT 1[0m
  [1m[35mPhoto Load (0.3ms)[0m  SELECT `photos`.* FROM `photos` WHERE `photos`.`restaurant_id` = 250 AND `photos`.`status` = 1 ORDER BY restaurant_id ASC, created_at DESC LIMIT 1
  [1m[36mPhoto Load (0.3ms)[0m  [1mSELECT `photos`.* FROM `photos` WHERE (restaurant_id = 237 and cover = true and status = 1) LIMIT 1[0m
  [1m[35mPhoto Load (0.4ms)[0m  SELECT `photos`.* FROM `photos` WHERE `photos`.`restaurant_id` = 237 AND `photos`.`status` = 1 ORDER BY restaurant_id ASC, created_at DESC LIMIT 1
  [1m[36mPhoto Load (0.4ms)[0m  [1mSELECT `photos`.* FROM `photos` WHERE (restaurant_id = 231 and cover = true and status = 1) LIMIT 1[0m
  [1m[35mPhoto Load (0.3ms)[0m  SELECT `photos`.* FROM `photos` WHERE `photos`.`restaurant_id` = 231 AND `photos`.`status` = 1 ORDER BY restaurant_id ASC, created_at DESC LIMIT 1
  [1m[36mPhoto Load (0.4ms)[0m  [1mSELECT `photos`.* FROM `photos` WHERE (restaurant_id = 222 and cover = true and status = 1) LIMIT 1[0m
  [1m[35mPhoto Load (0.3ms)[0m  SELECT `photos`.* FROM `photos` WHERE `photos`.`restaurant_id` = 222 AND `photos`.`status` = 1 ORDER BY restaurant_id ASC, created_at DESC LIMIT 1
  [1m[36m (0.3ms)[0m  [1mSELECT COUNT(*) FROM `restaurants` [0m
  Rendered restaurants/index.html.erb within layouts/admin (128.9ms)
Completed 200 OK in 140ms (Views: 127.3ms | ActiveRecord: 10.1ms)


Started GET "/admin/restaurants/admin_new" for 127.0.0.1 at 2016-01-17 03:28:13 +0100
Processing by RestaurantsController#admin_new as HTML
  [1m[35mUser Load (0.3ms)[0m  SELECT `users`.* FROM `users` WHERE `users`.`id` = 1 LIMIT 1
  [1m[36m (1.5ms)[0m  [1mSELECT `filters`.id FROM `filters` INNER JOIN `filters_restaurants` ON `filters`.`id` = `filters_restaurants`.`filter_id` WHERE `filters_restaurants`.`restaurant_id` IS NULL[0m
  [1m[35mFilterType Load (0.2ms)[0m  SELECT `filter_types`.* FROM `filter_types` WHERE `filter_types`.`code` = 'hal_status' LIMIT 1
  [1m[36mFilterType Load (0.2ms)[0m  [1mSELECT `filter_types`.* FROM `filter_types` WHERE `filter_types`.`code` = 'price' LIMIT 1[0m
  [1m[35mFilterType Load (0.2ms)[0m  SELECT `filter_types`.* FROM `filter_types` WHERE `filter_types`.`code` = 'cuisine' LIMIT 1
  [1m[36mFilterType Load (0.2ms)[0m  [1mSELECT `filter_types`.* FROM `filter_types` WHERE `filter_types`.`code` = 'alcohol' LIMIT 1[0m
  [1m[35mFilterType Load (0.2ms)[0m  SELECT `filter_types`.* FROM `filter_types` WHERE `filter_types`.`code` = 'features' LIMIT 1
  Rendered restaurants/_googlemap.html.erb (0.1ms)
  [1m[36mFilter Load (0.3ms)[0m  [1mSELECT `filters`.* FROM `filters` WHERE `filters`.`filter_type_id` = 8[0m
  [1m[35mFilter Load (0.3ms)[0m  SELECT `filters`.* FROM `filters` WHERE `filters`.`filter_type_id` = 1 ORDER BY name ASC
  [1m[36mFilter Load (0.3ms)[0m  [1mSELECT `filters`.* FROM `filters` WHERE `filters`.`filter_type_id` = 4[0m
  [1m[35mFilter Load (0.2ms)[0m  SELECT `filters`.* FROM `filters` WHERE `filters`.`filter_type_id` = 6
  [1m[36mFilter Load (0.2ms)[0m  [1mSELECT `filters`.* FROM `filters` WHERE `filters`.`filter_type_id` = 11 AND (code != 'offer')[0m
  Rendered restaurants/_admin_form.html.erb (98.7ms)
  Rendered restaurants/_upload_menu.html.erb (2.1ms)
  Rendered restaurants/_upload_photos.html.erb (1.1ms)
  Rendered restaurants/admin_new.html.erb within layouts/admin (114.4ms)
Completed 200 OK in 143ms (Views: 122.2ms | ActiveRecord: 4.2ms)


Started GET "/photos?r_id=" for 127.0.0.1 at 2016-01-17 03:28:17 +0100
Processing by PhotosController#index as JSON
  Parameters: {"r_id"=>""}
  [1m[35mRestaurant Load (1.7ms)[0m  SELECT `restaurants`.* FROM `restaurants` WHERE `restaurants`.`slug` = '' LIMIT 1
  [1m[36mRestaurant Load (0.2ms)[0m  [1mSELECT `restaurants`.* FROM `restaurants` WHERE `restaurants`.`id` = 0 LIMIT 1[0m
Completed 500 Internal Server Error in 5ms

ActiveRecord::RecordNotFound (Couldn't find Restaurant with id=):
  app/controllers/photos_controller.rb:11:in `index'


  Rendered /Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_dispatch/middleware/templates/rescues/_trace.erb (1.6ms)
  Rendered /Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_dispatch/middleware/templates/rescues/_request_and_response.erb (1.1ms)
  Rendered /Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_dispatch/middleware/templates/rescues/diagnostics.erb within rescues/layout (49.2ms)


Started GET "/admin/reviews" for 127.0.0.1 at 2016-01-17 03:28:34 +0100
Processing by ReviewsController#index as HTML
  [1m[35mUser Load (0.4ms)[0m  SELECT `users`.* FROM `users` WHERE `users`.`id` = 1 LIMIT 1
  Rendered shared/_review_manage_tabs.html.erb (1.1ms)
  Rendered reviews/_condition_fields.html.erb (43.6ms)
  [1m[36mReview Load (1.0ms)[0m  [1mSELECT `reviews`.* FROM `reviews` ORDER BY created_at DESC LIMIT 30 OFFSET 0[0m
  [1m[35mRestaurant Load (0.4ms)[0m  SELECT `restaurants`.* FROM `restaurants` WHERE `restaurants`.`id` = 390 LIMIT 1
  [1m[36mPhoto Load (0.4ms)[0m  [1mSELECT `photos`.* FROM `photos` WHERE (restaurant_id = 390 and cover = true and status = 1) LIMIT 1[0m
  [1m[35mPhoto Load (0.3ms)[0m  SELECT `photos`.* FROM `photos` WHERE `photos`.`restaurant_id` = 390 AND `photos`.`status` = 1 ORDER BY restaurant_id ASC, created_at DESC LIMIT 1
  [1m[36mUser Load (0.3ms)[0m  [1mSELECT `users`.* FROM `users` WHERE `users`.`id` = 174 LIMIT 1[0m
  Rendered reviews/_rating.html.erb (0.5ms)
  Rendered reviews/_rating.html.erb (0.0ms)
  Rendered reviews/_rating.html.erb (0.0ms)
  Rendered reviews/_rating.html.erb (0.0ms)
  Rendered reviews/_status_label.html.erb (0.5ms)
  Rendered reviews/_review_status.html.erb (3.5ms)
  [1m[35mRestaurant Load (0.4ms)[0m  SELECT `restaurants`.* FROM `restaurants` WHERE `restaurants`.`id` = 575 LIMIT 1
  [1m[36mPhoto Load (0.4ms)[0m  [1mSELECT `photos`.* FROM `photos` WHERE (restaurant_id = 575 and cover = true and status = 1) LIMIT 1[0m
  [1m[35mPhoto Load (0.3ms)[0m  SELECT `photos`.* FROM `photos` WHERE `photos`.`restaurant_id` = 575 AND `photos`.`status` = 1 ORDER BY restaurant_id ASC, created_at DESC LIMIT 1
  [1m[36mUser Load (0.3ms)[0m  [1mSELECT `users`.* FROM `users` WHERE `users`.`id` = 172 LIMIT 1[0m
  Rendered reviews/_rating.html.erb (0.0ms)
  Rendered reviews/_rating.html.erb (0.2ms)
  Rendered reviews/_rating.html.erb (0.0ms)
  Rendered reviews/_rating.html.erb (0.0ms)
  Rendered reviews/_status_label.html.erb (0.2ms)
  Rendered reviews/_review_status.html.erb (0.8ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT `restaurants`.* FROM `restaurants` WHERE `restaurants`.`id` = 575 LIMIT 1
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT `photos`.* FROM `photos` WHERE (restaurant_id = 575 and cover = true and status = 1) LIMIT 1[0m
  [1m[35mCACHE (0.0ms)[0m  SELECT `photos`.* FROM `photos` WHERE `photos`.`restaurant_id` = 575 AND `photos`.`status` = 1 ORDER BY restaurant_id ASC, created_at DESC LIMIT 1
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT `users`.* FROM `users` WHERE `users`.`id` = 172 LIMIT 1[0m
  Rendered reviews/_rating.html.erb (0.0ms)
  Rendered reviews/_rating.html.erb (0.0ms)
  Rendered reviews/_rating.html.erb (0.0ms)
  Rendered reviews/_rating.html.erb (0.0ms)
  Rendered reviews/_status_label.html.erb (0.2ms)
  Rendered reviews/_review_status.html.erb (0.9ms)
  [1m[35mRestaurant Load (1.0ms)[0m  SELECT `restaurants`.* FROM `restaurants` WHERE `restaurants`.`id` = 994 LIMIT 1
  [1m[36mPhoto Load (0.4ms)[0m  [1mSELECT `photos`.* FROM `photos` WHERE (restaurant_id = 994 and cover = true and status = 1) LIMIT 1[0m
  [1m[35mPhoto Load (0.3ms)[0m  SELECT `photos`.* FROM `photos` WHERE `photos`.`restaurant_id` = 994 AND `photos`.`status` = 1 ORDER BY restaurant_id ASC, created_at DESC LIMIT 1
  [1m[36mUser Load (0.2ms)[0m  [1mSELECT `users`.* FROM `users` WHERE `users`.`id` = 169 LIMIT 1[0m
  Rendered reviews/_rating.html.erb (0.1ms)
  Rendered reviews/_rating.html.erb (0.0ms)
  Rendered reviews/_rating.html.erb (0.0ms)
  Rendered reviews/_rating.html.erb (0.0ms)
  Rendered reviews/_status_label.html.erb (0.1ms)
  Rendered reviews/_review_status.html.erb (1.0ms)
  [1m[35mRestaurant Load (0.4ms)[0m  SELECT `restaurants`.* FROM `restaurants` WHERE `restaurants`.`id` = 996 LIMIT 1
  [1m[36mPhoto Load (0.7ms)[0m  [1mSELECT `photos`.* FROM `photos` WHERE (restaurant_id = 996 and cover = true and status = 1) LIMIT 1[0m
  [1m[35mPhoto Load (0.3ms)[0m  SELECT `photos`.* FROM `photos` WHERE `photos`.`restaurant_id` = 996 AND `photos`.`status` = 1 ORDER BY restaurant_id ASC, created_at DESC LIMIT 1
  [1m[36mUser Load (0.2ms)[0m  [1mSELECT `users`.* FROM `users` WHERE `users`.`id` = 166 LIMIT 1[0m
  Rendered reviews/_rating.html.erb (0.0ms)
  Rendered reviews/_rating.html.erb (0.0ms)
  Rendered reviews/_rating.html.erb (0.0ms)
  Rendered reviews/_rating.html.erb (0.0ms)
  Rendered reviews/_status_label.html.erb (0.2ms)
  Rendered reviews/_review_status.html.erb (1.1ms)
  [1m[35mRestaurant Load (0.3ms)[0m  SELECT `restaurants`.* FROM `restaurants` WHERE `restaurants`.`id` = 992 LIMIT 1
  [1m[36mPhoto Load (1.0ms)[0m  [1mSELECT `photos`.* FROM `photos` WHERE (restaurant_id = 992 and cover = true and status = 1) LIMIT 1[0m
  [1m[35mPhoto Load (0.4ms)[0m  SELECT `photos`.* FROM `photos` WHERE `photos`.`restaurant_id` = 992 AND `photos`.`status` = 1 ORDER BY restaurant_id ASC, created_at DESC LIMIT 1
  [1m[36mUser Load (0.2ms)[0m  [1mSELECT `users`.* FROM `users` WHERE `users`.`id` = 12 LIMIT 1[0m
  Rendered reviews/_rating.html.erb (0.0ms)
  Rendered reviews/_rating.html.erb (0.0ms)
  Rendered reviews/_rating.html.erb (0.2ms)
  Rendered reviews/_rating.html.erb (0.0ms)
  Rendered reviews/_status_label.html.erb (0.2ms)
  Rendered reviews/_review_status.html.erb (1.1ms)
  [1m[35mRestaurant Load (0.3ms)[0m  SELECT `restaurants`.* FROM `restaurants` WHERE `restaurants`.`id` = 115 LIMIT 1
  [1m[36mPhoto Load (0.5ms)[0m  [1mSELECT `photos`.* FROM `photos` WHERE (restaurant_id = 115 and cover = true and status = 1) LIMIT 1[0m
  [1m[35mPhoto Load (0.4ms)[0m  SELECT `photos`.* FROM `photos` WHERE `photos`.`restaurant_id` = 115 AND `photos`.`status` = 1 ORDER BY restaurant_id ASC, created_at DESC LIMIT 1
  [1m[36mUser Load (0.2ms)[0m  [1mSELECT `users`.* FROM `users` WHERE `users`.`id` = 164 LIMIT 1[0m
  Rendered reviews/_rating.html.erb (0.0ms)
  Rendered reviews/_rating.html.erb (0.0ms)
  Rendered reviews/_rating.html.erb (0.0ms)
  Rendered reviews/_rating.html.erb (0.0ms)
  Rendered reviews/_status_label.html.erb (0.1ms)
  Rendered reviews/_review_status.html.erb (1.2ms)
  [1m[35mRestaurant Load (0.3ms)[0m  SELECT `restaurants`.* FROM `restaurants` WHERE `restaurants`.`id` = 32 LIMIT 1
  [1m[36mPhoto Load (0.5ms)[0m  [1mSELECT `photos`.* FROM `photos` WHERE (restaurant_id = 32 and cover = true and status = 1) LIMIT 1[0m
  [1m[35mPhoto Load (0.3ms)[0m  SELECT `photos`.* FROM `photos` WHERE `photos`.`restaurant_id` = 32 AND `photos`.`status` = 1 ORDER BY restaurant_id ASC, created_at DESC LIMIT 1
  [1m[36mUser Load (0.5ms)[0m  [1mSELECT `users`.* FROM `users` WHERE `users`.`id` = 23 LIMIT 1[0m
  Rendered reviews/_rating.html.erb (0.0ms)
  Rendered reviews/_rating.html.erb (0.1ms)
  Rendered reviews/_rating.html.erb (0.0ms)
  Rendered reviews/_rating.html.erb (0.0ms)
  Rendered reviews/_status_label.html.erb (0.1ms)
  Rendered reviews/_review_status.html.erb (1.1ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT `restaurants`.* FROM `restaurants` WHERE `restaurants`.`id` = 32 LIMIT 1
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT `photos`.* FROM `photos` WHERE (restaurant_id = 32 and cover = true and status = 1) LIMIT 1[0m
  [1m[35mCACHE (0.0ms)[0m  SELECT `photos`.* FROM `photos` WHERE `photos`.`restaurant_id` = 32 AND `photos`.`status` = 1 ORDER BY restaurant_id ASC, created_at DESC LIMIT 1
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT `users`.* FROM `users` WHERE `users`.`id` = 23 LIMIT 1[0m
  Rendered reviews/_rating.html.erb (0.0ms)
  Rendered reviews/_rating.html.erb (0.0ms)
  Rendered reviews/_rating.html.erb (0.0ms)
  Rendered reviews/_rating.html.erb (0.0ms)
  Rendered reviews/_status_label.html.erb (0.2ms)
  Rendered reviews/_review_status.html.erb (0.9ms)
  [1m[35mRestaurant Load (0.4ms)[0m  SELECT `restaurants`.* FROM `restaurants` WHERE `restaurants`.`id` = 958 LIMIT 1
  [1m[36mPhoto Load (0.4ms)[0m  [1mSELECT `photos`.* FROM `photos` WHERE (restaurant_id = 958 and cover = true and status = 1) LIMIT 1[0m
  [1m[35mPhoto Load (0.5ms)[0m  SELECT `photos`.* FROM `photos` WHERE `photos`.`restaurant_id` = 958 AND `photos`.`status` = 1 ORDER BY restaurant_id ASC, created_at DESC LIMIT 1
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT `photos`.* FROM `photos` WHERE (restaurant_id = 958 and cover = true and status = 1) LIMIT 1[0m
  [1m[35mCACHE (0.0ms)[0m  SELECT `photos`.* FROM `photos` WHERE `photos`.`restaurant_id` = 958 AND `photos`.`status` = 1 ORDER BY restaurant_id ASC, created_at DESC LIMIT 1
  [1m[36mUser Load (0.3ms)[0m  [1mSELECT `users`.* FROM `users` WHERE `users`.`id` = 160 LIMIT 1[0m
  Rendered reviews/_rating.html.erb (0.0ms)
  Rendered reviews/_rating.html.erb (0.0ms)
  Rendered reviews/_rating.html.erb (0.2ms)
  Rendered reviews/_rating.html.erb (0.0ms)
  Rendered reviews/_status_label.html.erb (0.1ms)
  Rendered reviews/_review_status.html.erb (1.0ms)
  [1m[35mRestaurant Load (0.3ms)[0m  SELECT `restaurants`.* FROM `restaurants` WHERE `restaurants`.`id` = 79 LIMIT 1
  [1m[36mPhoto Load (1.0ms)[0m  [1mSELECT `photos`.* FROM `photos` WHERE (restaurant_id = 79 and cover = true and status = 1) LIMIT 1[0m
  [1m[35mPhoto Load (0.4ms)[0m  SELECT `photos`.* FROM `photos` WHERE `photos`.`restaurant_id` = 79 AND `photos`.`status` = 1 ORDER BY restaurant_id ASC, created_at DESC LIMIT 1
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT `photos`.* FROM `photos` WHERE (restaurant_id = 79 and cover = true and status = 1) LIMIT 1[0m
  [1m[35mCACHE (0.0ms)[0m  SELECT `photos`.* FROM `photos` WHERE `photos`.`restaurant_id` = 79 AND `photos`.`status` = 1 ORDER BY restaurant_id ASC, created_at DESC LIMIT 1
  [1m[36mUser Load (0.3ms)[0m  [1mSELECT `users`.* FROM `users` WHERE `users`.`id` = 159 LIMIT 1[0m
  Rendered reviews/_rating.html.erb (0.0ms)
  Rendered reviews/_rating.html.erb (0.0ms)
  Rendered reviews/_rating.html.erb (0.0ms)
  Rendered reviews/_rating.html.erb (0.0ms)
  Rendered reviews/_status_label.html.erb (0.1ms)
  Rendered reviews/_review_status.html.erb (1.2ms)
  [1m[35mRestaurant Load (0.4ms)[0m  SELECT `restaurants`.* FROM `restaurants` WHERE `restaurants`.`id` = 3 LIMIT 1
  [1m[36mPhoto Load (0.4ms)[0m  [1mSELECT `photos`.* FROM `photos` WHERE (restaurant_id = 3 and cover = true and status = 1) LIMIT 1[0m
  [1m[35mPhoto Load (0.4ms)[0m  SELECT `photos`.* FROM `photos` WHERE `photos`.`restaurant_id` = 3 AND `photos`.`status` = 1 ORDER BY restaurant_id ASC, created_at DESC LIMIT 1
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT `users`.* FROM `users` WHERE `users`.`id` = 159 LIMIT 1[0m
  Rendered reviews/_rating.html.erb (0.0ms)
  Rendered reviews/_rating.html.erb (0.1ms)
  Rendered reviews/_rating.html.erb (0.0ms)
  Rendered reviews/_rating.html.erb (0.0ms)
  Rendered reviews/_status_label.html.erb (0.1ms)
  Rendered reviews/_review_status.html.erb (1.0ms)
  [1m[35mRestaurant Load (0.4ms)[0m  SELECT `restaurants`.* FROM `restaurants` WHERE `restaurants`.`id` = 668 LIMIT 1
  [1m[36mPhoto Load (0.4ms)[0m  [1mSELECT `photos`.* FROM `photos` WHERE (restaurant_id = 668 and cover = true and status = 1) LIMIT 1[0m
  [1m[35mPhoto Load (0.7ms)[0m  SELECT `photos`.* FROM `photos` WHERE `photos`.`restaurant_id` = 668 AND `photos`.`status` = 1 ORDER BY restaurant_id ASC, created_at DESC LIMIT 1
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT `users`.* FROM `users` WHERE `users`.`id` = 159 LIMIT 1[0m
  Rendered reviews/_rating.html.erb (0.0ms)
  Rendered reviews/_rating.html.erb (0.0ms)
  Rendered reviews/_rating.html.erb (0.0ms)
  Rendered reviews/_rating.html.erb (0.0ms)
  Rendered reviews/_status_label.html.erb (0.1ms)
  Rendered reviews/_review_status.html.erb (1.4ms)
  [1m[35mRestaurant Load (0.4ms)[0m  SELECT `restaurants`.* FROM `restaurants` WHERE `restaurants`.`id` = 156 LIMIT 1
  [1m[36mPhoto Load (0.3ms)[0m  [1mSELECT `photos`.* FROM `photos` WHERE (restaurant_id = 156 and cover = true and status = 1) LIMIT 1[0m
  [1m[35mCACHE (0.0ms)[0m  SELECT `photos`.* FROM `photos` WHERE (restaurant_id = 156 and cover = true and status = 1) LIMIT 1
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT `users`.* FROM `users` WHERE `users`.`id` = 159 LIMIT 1[0m
  Rendered reviews/_rating.html.erb (0.0ms)
  Rendered reviews/_rating.html.erb (0.0ms)
  Rendered reviews/_rating.html.erb (0.0ms)
  Rendered reviews/_rating.html.erb (0.0ms)
  Rendered reviews/_status_label.html.erb (0.3ms)
  Rendered reviews/_review_status.html.erb (1.9ms)
  [1m[35mRestaurant Load (0.4ms)[0m  SELECT `restaurants`.* FROM `restaurants` WHERE `restaurants`.`id` = 875 LIMIT 1
  [1m[36mPhoto Load (0.4ms)[0m  [1mSELECT `photos`.* FROM `photos` WHERE (restaurant_id = 875 and cover = true and status = 1) LIMIT 1[0m
  [1m[35mCACHE (0.0ms)[0m  SELECT `photos`.* FROM `photos` WHERE (restaurant_id = 875 and cover = true and status = 1) LIMIT 1
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT `users`.* FROM `users` WHERE `users`.`id` = 12 LIMIT 1[0m
  Rendered reviews/_rating.html.erb (0.0ms)
  Rendered reviews/_rating.html.erb (0.0ms)
  Rendered reviews/_rating.html.erb (0.0ms)
  Rendered reviews/_rating.html.erb (0.0ms)
  Rendered reviews/_status_label.html.erb (0.2ms)
  Rendered reviews/_review_status.html.erb (1.6ms)
  [1m[35mRestaurant Load (0.4ms)[0m  SELECT `restaurants`.* FROM `restaurants` WHERE `restaurants`.`id` = 547 LIMIT 1
  [1m[36mPhoto Load (0.3ms)[0m  [1mSELECT `photos`.* FROM `photos` WHERE (restaurant_id = 547 and cover = true and status = 1) LIMIT 1[0m
  [1m[35mCACHE (0.0ms)[0m  SELECT `photos`.* FROM `photos` WHERE (restaurant_id = 547 and cover = true and status = 1) LIMIT 1
  [1m[36mUser Load (0.6ms)[0m  [1mSELECT `users`.* FROM `users` WHERE `users`.`id` = 157 LIMIT 1[0m
  Rendered reviews/_rating.html.erb (0.0ms)
  Rendered reviews/_rating.html.erb (0.0ms)
  Rendered reviews/_rating.html.erb (0.0ms)
  Rendered reviews/_rating.html.erb (0.0ms)
  Rendered reviews/_status_label.html.erb (0.2ms)
  Rendered reviews/_review_status.html.erb (1.0ms)
  [1m[35mRestaurant Load (0.3ms)[0m  SELECT `restaurants`.* FROM `restaurants` WHERE `restaurants`.`id` = 631 LIMIT 1
  [1m[36mPhoto Load (0.3ms)[0m  [1mSELECT `photos`.* FROM `photos` WHERE (restaurant_id = 631 and cover = true and status = 1) LIMIT 1[0m
  [1m[35mCACHE (0.0ms)[0m  SELECT `photos`.* FROM `photos` WHERE (restaurant_id = 631 and cover = true and status = 1) LIMIT 1
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT `users`.* FROM `users` WHERE `users`.`id` = 157 LIMIT 1[0m
  Rendered reviews/_rating.html.erb (0.0ms)
  Rendered reviews/_rating.html.erb (0.0ms)
  Rendered reviews/_rating.html.erb (0.0ms)
  Rendered reviews/_rating.html.erb (0.0ms)
  Rendered reviews/_status_label.html.erb (0.1ms)
  Rendered reviews/_review_status.html.erb (1.6ms)
  [1m[35mRestaurant Load (0.3ms)[0m  SELECT `restaurants`.* FROM `restaurants` WHERE `restaurants`.`id` = 634 LIMIT 1
  [1m[36mPhoto Load (0.3ms)[0m  [1mSELECT `photos`.* FROM `photos` WHERE (restaurant_id = 634 and cover = true and status = 1) LIMIT 1[0m
  [1m[35mCACHE (0.0ms)[0m  SELECT `photos`.* FROM `photos` WHERE (restaurant_id = 634 and cover = true and status = 1) LIMIT 1
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT `users`.* FROM `users` WHERE `users`.`id` = 157 LIMIT 1[0m
  Rendered reviews/_rating.html.erb (0.0ms)
  Rendered reviews/_rating.html.erb (0.0ms)
  Rendered reviews/_rating.html.erb (0.0ms)
  Rendered reviews/_rating.html.erb (0.1ms)
  Rendered reviews/_status_label.html.erb (0.3ms)
  Rendered reviews/_review_status.html.erb (1.4ms)
  [1m[35mRestaurant Load (0.4ms)[0m  SELECT `restaurants`.* FROM `restaurants` WHERE `restaurants`.`id` = 381 LIMIT 1
  [1m[36mPhoto Load (0.3ms)[0m  [1mSELECT `photos`.* FROM `photos` WHERE (restaurant_id = 381 and cover = true and status = 1) LIMIT 1[0m
  [1m[35mCACHE (0.0ms)[0m  SELECT `photos`.* FROM `photos` WHERE (restaurant_id = 381 and cover = true and status = 1) LIMIT 1
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT `users`.* FROM `users` WHERE `users`.`id` = 157 LIMIT 1[0m
  Rendered reviews/_rating.html.erb (0.0ms)
  Rendered reviews/_rating.html.erb (0.0ms)
  Rendered reviews/_rating.html.erb (0.1ms)
  Rendered reviews/_rating.html.erb (0.0ms)
  Rendered reviews/_status_label.html.erb (0.1ms)
  Rendered reviews/_review_status.html.erb (1.0ms)
  [1m[35mRestaurant Load (0.5ms)[0m  SELECT `restaurants`.* FROM `restaurants` WHERE `restaurants`.`id` = 630 LIMIT 1
  [1m[36mPhoto Load (0.4ms)[0m  [1mSELECT `photos`.* FROM `photos` WHERE (restaurant_id = 630 and cover = true and status = 1) LIMIT 1[0m
  [1m[35mCACHE (0.0ms)[0m  SELECT `photos`.* FROM `photos` WHERE (restaurant_id = 630 and cover = true and status = 1) LIMIT 1
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT `users`.* FROM `users` WHERE `users`.`id` = 157 LIMIT 1[0m
  Rendered reviews/_rating.html.erb (0.0ms)
  Rendered reviews/_rating.html.erb (0.0ms)
  Rendered reviews/_rating.html.erb (0.0ms)
  Rendered reviews/_rating.html.erb (0.1ms)
  Rendered reviews/_status_label.html.erb (0.1ms)
  Rendered reviews/_review_status.html.erb (1.1ms)
  [1m[35mRestaurant Load (0.4ms)[0m  SELECT `restaurants`.* FROM `restaurants` WHERE `restaurants`.`id` = 353 LIMIT 1
  [1m[36mPhoto Load (0.6ms)[0m  [1mSELECT `photos`.* FROM `photos` WHERE (restaurant_id = 353 and cover = true and status = 1) LIMIT 1[0m
  [1m[35mPhoto Load (0.3ms)[0m  SELECT `photos`.* FROM `photos` WHERE `photos`.`restaurant_id` = 353 AND `photos`.`status` = 1 ORDER BY restaurant_id ASC, created_at DESC LIMIT 1
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT `users`.* FROM `users` WHERE `users`.`id` = 157 LIMIT 1[0m
  Rendered reviews/_rating.html.erb (0.0ms)
  Rendered reviews/_rating.html.erb (0.0ms)
  Rendered reviews/_rating.html.erb (0.0ms)
  Rendered reviews/_rating.html.erb (0.0ms)
  Rendered reviews/_status_label.html.erb (0.2ms)
  Rendered reviews/_review_status.html.erb (1.1ms)
  [1m[35mRestaurant Load (0.3ms)[0m  SELECT `restaurants`.* FROM `restaurants` WHERE `restaurants`.`id` = 506 LIMIT 1
  [1m[36mPhoto Load (0.7ms)[0m  [1mSELECT `photos`.* FROM `photos` WHERE (restaurant_id = 506 and cover = true and status = 1) LIMIT 1[0m
  [1m[35mPhoto Load (0.3ms)[0m  SELECT `photos`.* FROM `photos` WHERE `photos`.`restaurant_id` = 506 AND `photos`.`status` = 1 ORDER BY restaurant_id ASC, created_at DESC LIMIT 1
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT `users`.* FROM `users` WHERE `users`.`id` = 157 LIMIT 1[0m
  Rendered reviews/_rating.html.erb (0.0ms)
  Rendered reviews/_rating.html.erb (0.1ms)
  Rendered reviews/_rating.html.erb (0.0ms)
  Rendered reviews/_rating.html.erb (0.0ms)
  Rendered reviews/_status_label.html.erb (0.1ms)
  Rendered reviews/_review_status.html.erb (1.1ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT `restaurants`.* FROM `restaurants` WHERE `restaurants`.`id` = 575 LIMIT 1
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT `photos`.* FROM `photos` WHERE (restaurant_id = 575 and cover = true and status = 1) LIMIT 1[0m
  [1m[35mCACHE (0.0ms)[0m  SELECT `photos`.* FROM `photos` WHERE `photos`.`restaurant_id` = 575 AND `photos`.`status` = 1 ORDER BY restaurant_id ASC, created_at DESC LIMIT 1
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT `users`.* FROM `users` WHERE `users`.`id` = 157 LIMIT 1[0m
  Rendered reviews/_rating.html.erb (0.0ms)
  Rendered reviews/_rating.html.erb (0.1ms)
  Rendered reviews/_rating.html.erb (0.0ms)
  Rendered reviews/_rating.html.erb (0.0ms)
  Rendered reviews/_status_label.html.erb (0.2ms)
  Rendered reviews/_review_status.html.erb (1.1ms)
  [1m[35mRestaurant Load (0.3ms)[0m  SELECT `restaurants`.* FROM `restaurants` WHERE `restaurants`.`id` = 582 LIMIT 1
  [1m[36mPhoto Load (0.3ms)[0m  [1mSELECT `photos`.* FROM `photos` WHERE (restaurant_id = 582 and cover = true and status = 1) LIMIT 1[0m
  [1m[35mCACHE (0.0ms)[0m  SELECT `photos`.* FROM `photos` WHERE (restaurant_id = 582 and cover = true and status = 1) LIMIT 1
  [1m[36mUser Load (0.2ms)[0m  [1mSELECT `users`.* FROM `users` WHERE `users`.`id` = 122 LIMIT 1[0m
  Rendered reviews/_rating.html.erb (0.1ms)
  Rendered reviews/_rating.html.erb (0.0ms)
  Rendered reviews/_rating.html.erb (0.0ms)
  Rendered reviews/_rating.html.erb (0.1ms)
  Rendered reviews/_status_label.html.erb (0.2ms)
  Rendered reviews/_review_status.html.erb (1.0ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT `restaurants`.* FROM `restaurants` WHERE `restaurants`.`id` = 582 LIMIT 1
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT `photos`.* FROM `photos` WHERE (restaurant_id = 582 and cover = true and status = 1) LIMIT 1[0m
  [1m[35mCACHE (0.0ms)[0m  SELECT `photos`.* FROM `photos` WHERE (restaurant_id = 582 and cover = true and status = 1) LIMIT 1
  [1m[36mUser Load (0.5ms)[0m  [1mSELECT `users`.* FROM `users` WHERE `users`.`id` = 5 LIMIT 1[0m
  Rendered reviews/_rating.html.erb (0.1ms)
  Rendered reviews/_rating.html.erb (0.0ms)
  Rendered reviews/_rating.html.erb (0.0ms)
  Rendered reviews/_rating.html.erb (0.0ms)
  Rendered reviews/_status_label.html.erb (0.2ms)
  Rendered reviews/_review_status.html.erb (0.8ms)
  [1m[35mRestaurant Load (0.3ms)[0m  SELECT `restaurants`.* FROM `restaurants` WHERE `restaurants`.`id` = 535 LIMIT 1
  [1m[36mPhoto Load (0.4ms)[0m  [1mSELECT `photos`.* FROM `photos` WHERE (restaurant_id = 535 and cover = true and status = 1) LIMIT 1[0m
  [1m[35mCACHE (0.0ms)[0m  SELECT `photos`.* FROM `photos` WHERE (restaurant_id = 535 and cover = true and status = 1) LIMIT 1
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT `users`.* FROM `users` WHERE `users`.`id` = 122 LIMIT 1[0m
  Rendered reviews/_rating.html.erb (0.0ms)
  Rendered reviews/_rating.html.erb (0.0ms)
  Rendered reviews/_rating.html.erb (0.0ms)
  Rendered reviews/_rating.html.erb (0.0ms)
  Rendered reviews/_status_label.html.erb (0.1ms)
  Rendered reviews/_review_status.html.erb (13.0ms)
  [1m[35mRestaurant Load (0.4ms)[0m  SELECT `restaurants`.* FROM `restaurants` WHERE `restaurants`.`id` = 39 LIMIT 1
  [1m[36mPhoto Load (0.2ms)[0m  [1mSELECT `photos`.* FROM `photos` WHERE (restaurant_id = 39 and cover = true and status = 1) LIMIT 1[0m
  [1m[35mCACHE (0.0ms)[0m  SELECT `photos`.* FROM `photos` WHERE (restaurant_id = 39 and cover = true and status = 1) LIMIT 1
  [1m[36mUser Load (0.2ms)[0m  [1mSELECT `users`.* FROM `users` WHERE `users`.`id` = 150 LIMIT 1[0m
  Rendered reviews/_rating.html.erb (0.1ms)
  Rendered reviews/_rating.html.erb (0.0ms)
  Rendered reviews/_rating.html.erb (0.0ms)
  Rendered reviews/_rating.html.erb (0.0ms)
  Rendered reviews/_status_label.html.erb (0.1ms)
  Rendered reviews/_review_status.html.erb (0.8ms)
  [1m[35mRestaurant Load (0.3ms)[0m  SELECT `restaurants`.* FROM `restaurants` WHERE `restaurants`.`id` = 907 LIMIT 1
  [1m[36mPhoto Load (0.4ms)[0m  [1mSELECT `photos`.* FROM `photos` WHERE (restaurant_id = 907 and cover = true and status = 1) LIMIT 1[0m
  [1m[35mPhoto Load (0.3ms)[0m  SELECT `photos`.* FROM `photos` WHERE `photos`.`restaurant_id` = 907 AND `photos`.`status` = 1 ORDER BY restaurant_id ASC, created_at DESC LIMIT 1
  [1m[36mUser Load (0.2ms)[0m  [1mSELECT `users`.* FROM `users` WHERE `users`.`id` = 146 LIMIT 1[0m
  Rendered reviews/_rating.html.erb (0.0ms)
  Rendered reviews/_rating.html.erb (0.0ms)
  Rendered reviews/_rating.html.erb (0.0ms)
  Rendered reviews/_rating.html.erb (0.0ms)
  Rendered reviews/_status_label.html.erb (0.1ms)
  Rendered reviews/_review_status.html.erb (0.8ms)
  [1m[35mRestaurant Load (0.3ms)[0m  SELECT `restaurants`.* FROM `restaurants` WHERE `restaurants`.`id` = 201 LIMIT 1
  [1m[36mPhoto Load (0.7ms)[0m  [1mSELECT `photos`.* FROM `photos` WHERE (restaurant_id = 201 and cover = true and status = 1) LIMIT 1[0m
  [1m[35mPhoto Load (0.3ms)[0m  SELECT `photos`.* FROM `photos` WHERE `photos`.`restaurant_id` = 201 AND `photos`.`status` = 1 ORDER BY restaurant_id ASC, created_at DESC LIMIT 1
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT `photos`.* FROM `photos` WHERE (restaurant_id = 201 and cover = true and status = 1) LIMIT 1[0m
  [1m[35mCACHE (0.0ms)[0m  SELECT `photos`.* FROM `photos` WHERE `photos`.`restaurant_id` = 201 AND `photos`.`status` = 1 ORDER BY restaurant_id ASC, created_at DESC LIMIT 1
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT `users`.* FROM `users` WHERE `users`.`id` = 146 LIMIT 1[0m
  Rendered reviews/_rating.html.erb (0.1ms)
  Rendered reviews/_rating.html.erb (0.0ms)
  Rendered reviews/_rating.html.erb (0.0ms)
  Rendered reviews/_rating.html.erb (0.0ms)
  Rendered reviews/_status_label.html.erb (0.1ms)
  Rendered reviews/_review_status.html.erb (0.7ms)
  [1m[35mRestaurant Load (0.4ms)[0m  SELECT `restaurants`.* FROM `restaurants` WHERE `restaurants`.`id` = 642 LIMIT 1
  [1m[36mPhoto Load (0.4ms)[0m  [1mSELECT `photos`.* FROM `photos` WHERE (restaurant_id = 642 and cover = true and status = 1) LIMIT 1[0m
  [1m[35mCACHE (0.0ms)[0m  SELECT `photos`.* FROM `photos` WHERE (restaurant_id = 642 and cover = true and status = 1) LIMIT 1
  [1m[36mUser Load (0.3ms)[0m  [1mSELECT `users`.* FROM `users` WHERE `users`.`id` = 147 LIMIT 1[0m
  Rendered reviews/_rating.html.erb (0.0ms)
  Rendered reviews/_rating.html.erb (0.0ms)
  Rendered reviews/_rating.html.erb (0.0ms)
  Rendered reviews/_rating.html.erb (0.0ms)
  Rendered reviews/_status_label.html.erb (0.1ms)
  Rendered reviews/_review_status.html.erb (0.8ms)
  [1m[35m (0.3ms)[0m  SELECT COUNT(*) FROM `reviews` 
  Rendered reviews/index.html.erb within layouts/admin (583.7ms)
Completed 200 OK in 620ms (Views: 582.4ms | ActiveRecord: 33.9ms)
couldn't find file /Users/kevinmuller/halalgems_backend/public/system/dragonfly/development/2014/06/06/17_15_25_274_steak.jpg
couldn't find file /Users/kevinmuller/halalgems_backend/public/system/dragonfly/development/2013/07/14/18_25_14_272_photo_4_1.JPG
couldn't find file /Users/kevinmuller/halalgems_backend/public/system/dragonfly/development/2014/12/15/17_01_49_216_14855778379_b0a5a4cc89_k.jpg
couldn't find file /Users/kevinmuller/halalgems_backend/public/system/dragonfly/development/2014/06/18/15_13_09_454_efes.jpg
couldn't find file /Users/kevinmuller/halalgems_backend/public/system/dragonfly/development/2014/06/18/14_04_36_546_grillzbase.jpg
couldn't find file /Users/kevinmuller/halalgems_backend/public/system/dragonfly/development/2015/02/18/10_53_53_919_Boof.png
couldn't find file /Users/kevinmuller/halalgems_backend/public/system/dragonfly/development/2014/06/18/14_15_10_390_red_dragon.jpg
couldn't find file /Users/kevinmuller/halalgems_backend/public/system/dragonfly/development/2014/06/18/13_39_04_192_mexican_grille.jpg
couldn't find file /Users/kevinmuller/halalgems_backend/public/system/dragonfly/development/2014/06/18/13_48_27_616_hayfield_masala.jpg
couldn't find file /Users/kevinmuller/halalgems_backend/public/system/dragonfly/development/2014/06/18/13_20_57_443_ariana.jpg
couldn't find file /Users/kevinmuller/halalgems_backend/public/system/dragonfly/development/2012/11/05/20_23_55_401_Mosque_Kitchen.jpg
couldn't find file /Users/kevinmuller/halalgems_backend/public/system/dragonfly/development/2014/06/18/14_57_19_420_needo.jpg
couldn't find file /Users/kevinmuller/halalgems_backend/public/system/dragonfly/development/2013/07/27/16_24_11_339_Hot_Grill.jpg
couldn't find file /Users/kevinmuller/halalgems_backend/public/system/dragonfly/development/2014/12/15/16_34_59_694_14877383357_64bc45da28_k.jpg
couldn't find file /Users/kevinmuller/halalgems_backend/public/system/dragonfly/development/2015/02/18/10_53_53_919_Boof.png
couldn't find file /Users/kevinmuller/halalgems_backend/public/system/dragonfly/development/2013/07/14/18_25_14_272_photo_4_1.JPG
couldn't find file /Users/kevinmuller/halalgems_backend/public/system/dragonfly/development/2014/06/06/17_15_25_274_steak.jpg
couldn't find file /Users/kevinmuller/halalgems_backend/public/system/dragonfly/development/2014/06/18/15_13_09_454_efes.jpg
couldn't find file /Users/kevinmuller/halalgems_backend/public/system/dragonfly/development/2014/12/15/17_01_49_216_14855778379_b0a5a4cc89_k.jpg
couldn't find file /Users/kevinmuller/halalgems_backend/public/system/dragonfly/development/2014/06/18/14_04_36_546_grillzbase.jpg
couldn't find file /Users/kevinmuller/halalgems_backend/public/system/dragonfly/development/2014/06/18/14_15_10_390_red_dragon.jpg
couldn't find file /Users/kevinmuller/halalgems_backend/public/system/dragonfly/development/2014/06/18/13_39_04_192_mexican_grille.jpg
couldn't find file /Users/kevinmuller/halalgems_backend/public/system/dragonfly/development/2014/06/18/13_48_27_616_hayfield_masala.jpg
couldn't find file /Users/kevinmuller/halalgems_backend/public/system/dragonfly/development/2014/06/18/13_20_57_443_ariana.jpg
couldn't find file /Users/kevinmuller/halalgems_backend/public/system/dragonfly/development/2012/11/05/20_23_55_401_Mosque_Kitchen.jpg
couldn't find file /Users/kevinmuller/halalgems_backend/public/system/dragonfly/development/2014/06/18/14_57_19_420_needo.jpg
couldn't find file /Users/kevinmuller/halalgems_backend/public/system/dragonfly/development/2013/07/27/16_24_11_339_Hot_Grill.jpg
couldn't find file /Users/kevinmuller/halalgems_backend/public/system/dragonfly/development/2014/12/15/16_34_59_694_14877383357_64bc45da28_k.jpg


Started GET "/admin/restaurants" for 127.0.0.1 at 2016-01-17 03:28:43 +0100
Processing by RestaurantsController#index as HTML
  [1m[36mUser Load (0.2ms)[0m  [1mSELECT `users`.* FROM `users` WHERE `users`.`id` = 1 LIMIT 1[0m
  Rendered shared/_restaurant_manage_tabs.html.erb (0.8ms)
  Rendered restaurants/_condition_fields.html.erb (9.2ms)
  [1m[35mRestaurant Load (0.9ms)[0m  SELECT `restaurants`.* FROM `restaurants` ORDER BY disabled ASC,created_at DESC LIMIT 12 OFFSET 0
  [1m[36mPhoto Load (0.4ms)[0m  [1mSELECT `photos`.* FROM `photos` WHERE (restaurant_id = 1057 and cover = true and status = 1) LIMIT 1[0m
  [1m[35mPhoto Load (0.3ms)[0m  SELECT `photos`.* FROM `photos` WHERE `photos`.`restaurant_id` = 1057 AND `photos`.`status` = 1 ORDER BY restaurant_id ASC, created_at DESC LIMIT 1
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT `photos`.* FROM `photos` WHERE (restaurant_id = 1057 and cover = true and status = 1) LIMIT 1[0m
  [1m[35mCACHE (0.0ms)[0m  SELECT `photos`.* FROM `photos` WHERE `photos`.`restaurant_id` = 1057 AND `photos`.`status` = 1 ORDER BY restaurant_id ASC, created_at DESC LIMIT 1
  [1m[36mPhoto Load (0.3ms)[0m  [1mSELECT `photos`.* FROM `photos` WHERE (restaurant_id = 903 and cover = true and status = 1) LIMIT 1[0m
  [1m[35mPhoto Load (0.3ms)[0m  SELECT `photos`.* FROM `photos` WHERE `photos`.`restaurant_id` = 903 AND `photos`.`status` = 1 ORDER BY restaurant_id ASC, created_at DESC LIMIT 1
  [1m[36mPhoto Load (0.4ms)[0m  [1mSELECT `photos`.* FROM `photos` WHERE (restaurant_id = 876 and cover = true and status = 1) LIMIT 1[0m
  [1m[35mPhoto Load (0.3ms)[0m  SELECT `photos`.* FROM `photos` WHERE `photos`.`restaurant_id` = 876 AND `photos`.`status` = 1 ORDER BY restaurant_id ASC, created_at DESC LIMIT 1
  [1m[36mPhoto Load (0.4ms)[0m  [1mSELECT `photos`.* FROM `photos` WHERE (restaurant_id = 851 and cover = true and status = 1) LIMIT 1[0m
  [1m[35mPhoto Load (0.3ms)[0m  SELECT `photos`.* FROM `photos` WHERE `photos`.`restaurant_id` = 851 AND `photos`.`status` = 1 ORDER BY restaurant_id ASC, created_at DESC LIMIT 1
  [1m[36mPhoto Load (0.3ms)[0m  [1mSELECT `photos`.* FROM `photos` WHERE (restaurant_id = 693 and cover = true and status = 1) LIMIT 1[0m
  [1m[35mPhoto Load (0.4ms)[0m  SELECT `photos`.* FROM `photos` WHERE `photos`.`restaurant_id` = 693 AND `photos`.`status` = 1 ORDER BY restaurant_id ASC, created_at DESC LIMIT 1
  [1m[36mPhoto Load (0.4ms)[0m  [1mSELECT `photos`.* FROM `photos` WHERE (restaurant_id = 686 and cover = true and status = 1) LIMIT 1[0m
  [1m[35mPhoto Load (0.3ms)[0m  SELECT `photos`.* FROM `photos` WHERE `photos`.`restaurant_id` = 686 AND `photos`.`status` = 1 ORDER BY restaurant_id ASC, created_at DESC LIMIT 1
  [1m[36mPhoto Load (0.3ms)[0m  [1mSELECT `photos`.* FROM `photos` WHERE (restaurant_id = 669 and cover = true and status = 1) LIMIT 1[0m
  [1m[35mPhoto Load (0.3ms)[0m  SELECT `photos`.* FROM `photos` WHERE `photos`.`restaurant_id` = 669 AND `photos`.`status` = 1 ORDER BY restaurant_id ASC, created_at DESC LIMIT 1
  [1m[36mPhoto Load (0.3ms)[0m  [1mSELECT `photos`.* FROM `photos` WHERE (restaurant_id = 251 and cover = true and status = 1) LIMIT 1[0m
  [1m[35mPhoto Load (0.3ms)[0m  SELECT `photos`.* FROM `photos` WHERE `photos`.`restaurant_id` = 251 AND `photos`.`status` = 1 ORDER BY restaurant_id ASC, created_at DESC LIMIT 1
  [1m[36mPhoto Load (0.3ms)[0m  [1mSELECT `photos`.* FROM `photos` WHERE (restaurant_id = 250 and cover = true and status = 1) LIMIT 1[0m
  [1m[35mPhoto Load (0.3ms)[0m  SELECT `photos`.* FROM `photos` WHERE `photos`.`restaurant_id` = 250 AND `photos`.`status` = 1 ORDER BY restaurant_id ASC, created_at DESC LIMIT 1
  [1m[36mPhoto Load (0.3ms)[0m  [1mSELECT `photos`.* FROM `photos` WHERE (restaurant_id = 237 and cover = true and status = 1) LIMIT 1[0m
  [1m[35mPhoto Load (0.3ms)[0m  SELECT `photos`.* FROM `photos` WHERE `photos`.`restaurant_id` = 237 AND `photos`.`status` = 1 ORDER BY restaurant_id ASC, created_at DESC LIMIT 1
  [1m[36mPhoto Load (0.3ms)[0m  [1mSELECT `photos`.* FROM `photos` WHERE (restaurant_id = 231 and cover = true and status = 1) LIMIT 1[0m
  [1m[35mPhoto Load (0.3ms)[0m  SELECT `photos`.* FROM `photos` WHERE `photos`.`restaurant_id` = 231 AND `photos`.`status` = 1 ORDER BY restaurant_id ASC, created_at DESC LIMIT 1
  [1m[36mPhoto Load (0.3ms)[0m  [1mSELECT `photos`.* FROM `photos` WHERE (restaurant_id = 222 and cover = true and status = 1) LIMIT 1[0m
  [1m[35mPhoto Load (0.3ms)[0m  SELECT `photos`.* FROM `photos` WHERE `photos`.`restaurant_id` = 222 AND `photos`.`status` = 1 ORDER BY restaurant_id ASC, created_at DESC LIMIT 1
  [1m[36m (0.3ms)[0m  [1mSELECT COUNT(*) FROM `restaurants` [0m
  Rendered restaurants/index.html.erb within layouts/admin (87.1ms)
Completed 200 OK in 95ms (Views: 83.6ms | ActiveRecord: 9.1ms)


Started GET "/admin/collections" for 127.0.0.1 at 2016-01-17 03:28:44 +0100
Processing by CollectionsController#index as HTML
  Rendered shared/_restaurant_manage_tabs.html.erb (0.9ms)
  [1m[35mCollection Load (0.4ms)[0m  SELECT `collections`.* FROM `collections` ORDER BY name ASC, created_at DESC LIMIT 12 OFFSET 0
  [1m[36m (0.2ms)[0m  [1mSELECT COUNT(*) FROM `collections` [0m
  Rendered collections/index.erb within layouts/admin (13.4ms)
  [1m[35mUser Load (0.4ms)[0m  SELECT `users`.* FROM `users` WHERE `users`.`id` = 1 LIMIT 1
Completed 200 OK in 26ms (Views: 24.3ms | ActiveRecord: 1.0ms)


Started GET "/admin/collections/admin_new_collection" for 127.0.0.1 at 2016-01-17 03:28:46 +0100
Processing by CollectionsController#admin_new_collection as HTML
  [1m[36mUser Load (0.4ms)[0m  [1mSELECT `users`.* FROM `users` WHERE `users`.`id` = 1 LIMIT 1[0m
  Rendered collections/_collection_form.html.erb (7.3ms)
  Rendered collections/_collection_restaurants_form.html.erb (0.3ms)
  Rendered collections/_upload_collection_image.html.erb (1.2ms)
  Rendered collections/admin_new_collection.html.erb within layouts/admin (12.2ms)
Completed 200 OK in 35ms (Views: 31.7ms | ActiveRecord: 0.4ms)


Started GET "/collection_images?r_id=" for 127.0.0.1 at 2016-01-17 03:28:46 +0100
Processing by RestaurantsController#show as JSON
  Parameters: {"r_id"=>"", "id"=>"collection_images"}
  [1m[35mRestaurant Load (1.8ms)[0m  SELECT `restaurants`.* FROM `restaurants` WHERE `restaurants`.`slug` = 'collection_images' LIMIT 1
  [1m[36mRestaurant Load (0.3ms)[0m  [1mSELECT `restaurants`.* FROM `restaurants` WHERE `restaurants`.`id` = 0 LIMIT 1[0m
Completed 500 Internal Server Error in 5ms

ActiveRecord::RecordNotFound (Couldn't find Restaurant with id=collection_images):
  app/controllers/restaurants_controller.rb:193:in `show'


  Rendered /Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_dispatch/middleware/templates/rescues/_trace.erb (1.9ms)
  Rendered /Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_dispatch/middleware/templates/rescues/_request_and_response.erb (1.4ms)
  Rendered /Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_dispatch/middleware/templates/rescues/diagnostics.erb within rescues/layout (53.0ms)


Started GET "/admin/collections/admin_new_collection" for 127.0.0.1 at 2016-01-17 03:29:23 +0100
Processing by CollectionsController#admin_new_collection as HTML
  [1m[35mUser Load (0.5ms)[0m  SELECT `users`.* FROM `users` WHERE `users`.`id` = 1 LIMIT 1
  Rendered collections/_collection_form.html.erb (5.7ms)
  Rendered collections/_collection_restaurants_form.html.erb (0.3ms)
  Rendered collections/_upload_collection_image.html.erb (1.0ms)
  Rendered collections/admin_new_collection.html.erb within layouts/admin (9.8ms)
Completed 200 OK in 22ms (Views: 16.5ms | ActiveRecord: 0.5ms)


Started GET "/collection_images?r_id=" for 127.0.0.1 at 2016-01-17 03:29:23 +0100
Processing by RestaurantsController#show as JSON
  Parameters: {"r_id"=>"", "id"=>"collection_images"}
  [1m[36mRestaurant Load (1.5ms)[0m  [1mSELECT `restaurants`.* FROM `restaurants` WHERE `restaurants`.`slug` = 'collection_images' LIMIT 1[0m
  [1m[35mRestaurant Load (0.2ms)[0m  SELECT `restaurants`.* FROM `restaurants` WHERE `restaurants`.`id` = 0 LIMIT 1
Completed 500 Internal Server Error in 4ms

ActiveRecord::RecordNotFound (Couldn't find Restaurant with id=collection_images):
  app/controllers/restaurants_controller.rb:193:in `show'


  Rendered /Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_dispatch/middleware/templates/rescues/_trace.erb (1.6ms)
  Rendered /Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_dispatch/middleware/templates/rescues/_request_and_response.erb (1.1ms)
  Rendered /Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_dispatch/middleware/templates/rescues/diagnostics.erb within rescues/layout (48.9ms)


Started GET "/admin/restaurants" for 127.0.0.1 at 2016-01-17 03:29:29 +0100
Processing by RestaurantsController#index as HTML
  [1m[36mUser Load (0.3ms)[0m  [1mSELECT `users`.* FROM `users` WHERE `users`.`id` = 1 LIMIT 1[0m
  Rendered shared/_restaurant_manage_tabs.html.erb (0.8ms)
  Rendered restaurants/_condition_fields.html.erb (12.9ms)
  [1m[35mRestaurant Load (0.7ms)[0m  SELECT `restaurants`.* FROM `restaurants` ORDER BY disabled ASC,created_at DESC LIMIT 12 OFFSET 0
  [1m[36mPhoto Load (0.4ms)[0m  [1mSELECT `photos`.* FROM `photos` WHERE (restaurant_id = 1057 and cover = true and status = 1) LIMIT 1[0m
  [1m[35mPhoto Load (0.3ms)[0m  SELECT `photos`.* FROM `photos` WHERE `photos`.`restaurant_id` = 1057 AND `photos`.`status` = 1 ORDER BY restaurant_id ASC, created_at DESC LIMIT 1
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT `photos`.* FROM `photos` WHERE (restaurant_id = 1057 and cover = true and status = 1) LIMIT 1[0m
  [1m[35mCACHE (0.0ms)[0m  SELECT `photos`.* FROM `photos` WHERE `photos`.`restaurant_id` = 1057 AND `photos`.`status` = 1 ORDER BY restaurant_id ASC, created_at DESC LIMIT 1
  [1m[36mPhoto Load (0.4ms)[0m  [1mSELECT `photos`.* FROM `photos` WHERE (restaurant_id = 903 and cover = true and status = 1) LIMIT 1[0m
  [1m[35mPhoto Load (0.3ms)[0m  SELECT `photos`.* FROM `photos` WHERE `photos`.`restaurant_id` = 903 AND `photos`.`status` = 1 ORDER BY restaurant_id ASC, created_at DESC LIMIT 1
  [1m[36mPhoto Load (0.4ms)[0m  [1mSELECT `photos`.* FROM `photos` WHERE (restaurant_id = 876 and cover = true and status = 1) LIMIT 1[0m
  [1m[35mPhoto Load (0.3ms)[0m  SELECT `photos`.* FROM `photos` WHERE `photos`.`restaurant_id` = 876 AND `photos`.`status` = 1 ORDER BY restaurant_id ASC, created_at DESC LIMIT 1
  [1m[36mPhoto Load (0.4ms)[0m  [1mSELECT `photos`.* FROM `photos` WHERE (restaurant_id = 851 and cover = true and status = 1) LIMIT 1[0m
  [1m[35mPhoto Load (0.3ms)[0m  SELECT `photos`.* FROM `photos` WHERE `photos`.`restaurant_id` = 851 AND `photos`.`status` = 1 ORDER BY restaurant_id ASC, created_at DESC LIMIT 1
  [1m[36mPhoto Load (0.3ms)[0m  [1mSELECT `photos`.* FROM `photos` WHERE (restaurant_id = 693 and cover = true and status = 1) LIMIT 1[0m
  [1m[35mPhoto Load (0.3ms)[0m  SELECT `photos`.* FROM `photos` WHERE `photos`.`restaurant_id` = 693 AND `photos`.`status` = 1 ORDER BY restaurant_id ASC, created_at DESC LIMIT 1
  [1m[36mPhoto Load (0.4ms)[0m  [1mSELECT `photos`.* FROM `photos` WHERE (restaurant_id = 686 and cover = true and status = 1) LIMIT 1[0m
  [1m[35mPhoto Load (0.3ms)[0m  SELECT `photos`.* FROM `photos` WHERE `photos`.`restaurant_id` = 686 AND `photos`.`status` = 1 ORDER BY restaurant_id ASC, created_at DESC LIMIT 1
  [1m[36mPhoto Load (0.4ms)[0m  [1mSELECT `photos`.* FROM `photos` WHERE (restaurant_id = 669 and cover = true and status = 1) LIMIT 1[0m
  [1m[35mPhoto Load (0.3ms)[0m  SELECT `photos`.* FROM `photos` WHERE `photos`.`restaurant_id` = 669 AND `photos`.`status` = 1 ORDER BY restaurant_id ASC, created_at DESC LIMIT 1
  [1m[36mPhoto Load (0.4ms)[0m  [1mSELECT `photos`.* FROM `photos` WHERE (restaurant_id = 251 and cover = true and status = 1) LIMIT 1[0m
  [1m[35mPhoto Load (0.3ms)[0m  SELECT `photos`.* FROM `photos` WHERE `photos`.`restaurant_id` = 251 AND `photos`.`status` = 1 ORDER BY restaurant_id ASC, created_at DESC LIMIT 1
  [1m[36mPhoto Load (0.3ms)[0m  [1mSELECT `photos`.* FROM `photos` WHERE (restaurant_id = 250 and cover = true and status = 1) LIMIT 1[0m
  [1m[35mPhoto Load (0.3ms)[0m  SELECT `photos`.* FROM `photos` WHERE `photos`.`restaurant_id` = 250 AND `photos`.`status` = 1 ORDER BY restaurant_id ASC, created_at DESC LIMIT 1
  [1m[36mPhoto Load (0.4ms)[0m  [1mSELECT `photos`.* FROM `photos` WHERE (restaurant_id = 237 and cover = true and status = 1) LIMIT 1[0m
  [1m[35mPhoto Load (0.3ms)[0m  SELECT `photos`.* FROM `photos` WHERE `photos`.`restaurant_id` = 237 AND `photos`.`status` = 1 ORDER BY restaurant_id ASC, created_at DESC LIMIT 1
  [1m[36mPhoto Load (0.4ms)[0m  [1mSELECT `photos`.* FROM `photos` WHERE (restaurant_id = 231 and cover = true and status = 1) LIMIT 1[0m
  [1m[35mPhoto Load (0.3ms)[0m  SELECT `photos`.* FROM `photos` WHERE `photos`.`restaurant_id` = 231 AND `photos`.`status` = 1 ORDER BY restaurant_id ASC, created_at DESC LIMIT 1
  [1m[36mPhoto Load (0.4ms)[0m  [1mSELECT `photos`.* FROM `photos` WHERE (restaurant_id = 222 and cover = true and status = 1) LIMIT 1[0m
  [1m[35mPhoto Load (0.3ms)[0m  SELECT `photos`.* FROM `photos` WHERE `photos`.`restaurant_id` = 222 AND `photos`.`status` = 1 ORDER BY restaurant_id ASC, created_at DESC LIMIT 1
  [1m[36m (0.3ms)[0m  [1mSELECT COUNT(*) FROM `restaurants` [0m
  Rendered restaurants/index.html.erb within layouts/admin (99.8ms)
Completed 200 OK in 109ms (Views: 97.3ms | ActiveRecord: 9.3ms)


Started GET "/admin/collections" for 127.0.0.1 at 2016-01-17 03:29:32 +0100
Processing by CollectionsController#index as HTML
  Rendered shared/_restaurant_manage_tabs.html.erb (1.4ms)
  [1m[35mCollection Load (0.4ms)[0m  SELECT `collections`.* FROM `collections` ORDER BY name ASC, created_at DESC LIMIT 12 OFFSET 0
  [1m[36m (0.2ms)[0m  [1mSELECT COUNT(*) FROM `collections` [0m
  Rendered collections/index.erb within layouts/admin (14.2ms)
  [1m[35mUser Load (0.4ms)[0m  SELECT `users`.* FROM `users` WHERE `users`.`id` = 1 LIMIT 1
Completed 200 OK in 44ms (Views: 41.9ms | ActiveRecord: 1.0ms)


Started GET "/collection/16/edit" for 127.0.0.1 at 2016-01-17 03:29:34 +0100
Processing by CollectionsController#edit_collection as HTML
  Parameters: {"id"=>"16"}
  [1m[36mUser Load (0.4ms)[0m  [1mSELECT `users`.* FROM `users` WHERE `users`.`id` = 1 LIMIT 1[0m
  [1m[35mCollection Load (1.1ms)[0m  SELECT `collections`.* FROM `collections` WHERE `collections`.`id` = 16 LIMIT 1
  Rendered collections/_collection_form.html.erb (6.5ms)
  Rendered collections/_collection_restaurants_form.html.erb (0.4ms)
  Rendered collections/edit_collection.html.erb within layouts/admin (9.0ms)
Completed 200 OK in 21ms (Views: 16.1ms | ActiveRecord: 1.5ms)


Started GET "/collection/16/edit" for 127.0.0.1 at 2016-01-17 03:29:56 +0100
Processing by CollectionsController#edit_collection as HTML
  Parameters: {"id"=>"16"}
  [1m[36mUser Load (0.5ms)[0m  [1mSELECT `users`.* FROM `users` WHERE `users`.`id` = 1 LIMIT 1[0m
  [1m[35mCollection Load (0.6ms)[0m  SELECT `collections`.* FROM `collections` WHERE `collections`.`id` = 16 LIMIT 1
  Rendered collections/_collection_form.html.erb (5.3ms)
  Rendered collections/_collection_restaurants_form.html.erb (0.5ms)
  Rendered collections/edit_collection.html.erb within layouts/admin (31.9ms)
Completed 200 OK in 76ms (Views: 65.7ms | ActiveRecord: 1.0ms)


Started GET "/admin/restaurants" for 127.0.0.1 at 2016-01-17 03:30:08 +0100
Processing by RestaurantsController#index as HTML
  [1m[36mUser Load (0.2ms)[0m  [1mSELECT `users`.* FROM `users` WHERE `users`.`id` = 1 LIMIT 1[0m
  Rendered shared/_restaurant_manage_tabs.html.erb (0.9ms)
  Rendered restaurants/_condition_fields.html.erb (11.9ms)
  [1m[35mRestaurant Load (0.8ms)[0m  SELECT `restaurants`.* FROM `restaurants` ORDER BY disabled ASC,created_at DESC LIMIT 12 OFFSET 0
  [1m[36mPhoto Load (0.4ms)[0m  [1mSELECT `photos`.* FROM `photos` WHERE (restaurant_id = 1057 and cover = true and status = 1) LIMIT 1[0m
  [1m[35mPhoto Load (0.3ms)[0m  SELECT `photos`.* FROM `photos` WHERE `photos`.`restaurant_id` = 1057 AND `photos`.`status` = 1 ORDER BY restaurant_id ASC, created_at DESC LIMIT 1
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT `photos`.* FROM `photos` WHERE (restaurant_id = 1057 and cover = true and status = 1) LIMIT 1[0m
  [1m[35mCACHE (0.0ms)[0m  SELECT `photos`.* FROM `photos` WHERE `photos`.`restaurant_id` = 1057 AND `photos`.`status` = 1 ORDER BY restaurant_id ASC, created_at DESC LIMIT 1
  [1m[36mPhoto Load (0.4ms)[0m  [1mSELECT `photos`.* FROM `photos` WHERE (restaurant_id = 903 and cover = true and status = 1) LIMIT 1[0m
  [1m[35mPhoto Load (0.3ms)[0m  SELECT `photos`.* FROM `photos` WHERE `photos`.`restaurant_id` = 903 AND `photos`.`status` = 1 ORDER BY restaurant_id ASC, created_at DESC LIMIT 1
  [1m[36mPhoto Load (0.3ms)[0m  [1mSELECT `photos`.* FROM `photos` WHERE (restaurant_id = 876 and cover = true and status = 1) LIMIT 1[0m
  [1m[35mPhoto Load (0.3ms)[0m  SELECT `photos`.* FROM `photos` WHERE `photos`.`restaurant_id` = 876 AND `photos`.`status` = 1 ORDER BY restaurant_id ASC, created_at DESC LIMIT 1
  [1m[36mPhoto Load (0.3ms)[0m  [1mSELECT `photos`.* FROM `photos` WHERE (restaurant_id = 851 and cover = true and status = 1) LIMIT 1[0m
  [1m[35mPhoto Load (0.3ms)[0m  SELECT `photos`.* FROM `photos` WHERE `photos`.`restaurant_id` = 851 AND `photos`.`status` = 1 ORDER BY restaurant_id ASC, created_at DESC LIMIT 1
  [1m[36mPhoto Load (0.3ms)[0m  [1mSELECT `photos`.* FROM `photos` WHERE (restaurant_id = 693 and cover = true and status = 1) LIMIT 1[0m
  [1m[35mPhoto Load (0.3ms)[0m  SELECT `photos`.* FROM `photos` WHERE `photos`.`restaurant_id` = 693 AND `photos`.`status` = 1 ORDER BY restaurant_id ASC, created_at DESC LIMIT 1
  [1m[36mPhoto Load (0.3ms)[0m  [1mSELECT `photos`.* FROM `photos` WHERE (restaurant_id = 686 and cover = true and status = 1) LIMIT 1[0m
  [1m[35mPhoto Load (0.3ms)[0m  SELECT `photos`.* FROM `photos` WHERE `photos`.`restaurant_id` = 686 AND `photos`.`status` = 1 ORDER BY restaurant_id ASC, created_at DESC LIMIT 1
  [1m[36mPhoto Load (0.4ms)[0m  [1mSELECT `photos`.* FROM `photos` WHERE (restaurant_id = 669 and cover = true and status = 1) LIMIT 1[0m
  [1m[35mPhoto Load (0.4ms)[0m  SELECT `photos`.* FROM `photos` WHERE `photos`.`restaurant_id` = 669 AND `photos`.`status` = 1 ORDER BY restaurant_id ASC, created_at DESC LIMIT 1
  [1m[36mPhoto Load (0.3ms)[0m  [1mSELECT `photos`.* FROM `photos` WHERE (restaurant_id = 251 and cover = true and status = 1) LIMIT 1[0m
  [1m[35mPhoto Load (0.3ms)[0m  SELECT `photos`.* FROM `photos` WHERE `photos`.`restaurant_id` = 251 AND `photos`.`status` = 1 ORDER BY restaurant_id ASC, created_at DESC LIMIT 1
  [1m[36mPhoto Load (0.3ms)[0m  [1mSELECT `photos`.* FROM `photos` WHERE (restaurant_id = 250 and cover = true and status = 1) LIMIT 1[0m
  [1m[35mPhoto Load (0.3ms)[0m  SELECT `photos`.* FROM `photos` WHERE `photos`.`restaurant_id` = 250 AND `photos`.`status` = 1 ORDER BY restaurant_id ASC, created_at DESC LIMIT 1
  [1m[36mPhoto Load (0.3ms)[0m  [1mSELECT `photos`.* FROM `photos` WHERE (restaurant_id = 237 and cover = true and status = 1) LIMIT 1[0m
  [1m[35mPhoto Load (0.3ms)[0m  SELECT `photos`.* FROM `photos` WHERE `photos`.`restaurant_id` = 237 AND `photos`.`status` = 1 ORDER BY restaurant_id ASC, created_at DESC LIMIT 1
  [1m[36mPhoto Load (0.3ms)[0m  [1mSELECT `photos`.* FROM `photos` WHERE (restaurant_id = 231 and cover = true and status = 1) LIMIT 1[0m
  [1m[35mPhoto Load (0.3ms)[0m  SELECT `photos`.* FROM `photos` WHERE `photos`.`restaurant_id` = 231 AND `photos`.`status` = 1 ORDER BY restaurant_id ASC, created_at DESC LIMIT 1
  [1m[36mPhoto Load (0.6ms)[0m  [1mSELECT `photos`.* FROM `photos` WHERE (restaurant_id = 222 and cover = true and status = 1) LIMIT 1[0m
  [1m[35mPhoto Load (0.4ms)[0m  SELECT `photos`.* FROM `photos` WHERE `photos`.`restaurant_id` = 222 AND `photos`.`status` = 1 ORDER BY restaurant_id ASC, created_at DESC LIMIT 1
  [1m[36m (0.3ms)[0m  [1mSELECT COUNT(*) FROM `restaurants` [0m
  Rendered restaurants/index.html.erb within layouts/admin (109.4ms)
Completed 200 OK in 133ms (Views: 120.6ms | ActiveRecord: 9.5ms)


Started GET "/admin/collections" for 127.0.0.1 at 2016-01-17 03:30:10 +0100
Processing by CollectionsController#index as HTML
  Rendered shared/_restaurant_manage_tabs.html.erb (1.1ms)
  [1m[35mCollection Load (0.3ms)[0m  SELECT `collections`.* FROM `collections` ORDER BY name ASC, created_at DESC LIMIT 12 OFFSET 0
  [1m[36m (0.2ms)[0m  [1mSELECT COUNT(*) FROM `collections` [0m
  Rendered collections/index.erb within layouts/admin (11.5ms)
  [1m[35mUser Load (0.3ms)[0m  SELECT `users`.* FROM `users` WHERE `users`.`id` = 1 LIMIT 1
Completed 200 OK in 45ms (Views: 43.6ms | ActiveRecord: 0.8ms)


Started GET "/admin/collections/admin_new_collection" for 127.0.0.1 at 2016-01-17 03:30:11 +0100
Processing by CollectionsController#admin_new_collection as HTML
  [1m[36mUser Load (0.2ms)[0m  [1mSELECT `users`.* FROM `users` WHERE `users`.`id` = 1 LIMIT 1[0m
  Rendered collections/_collection_form.html.erb (6.9ms)
  Rendered collections/_collection_restaurants_form.html.erb (0.6ms)
  Rendered collections/_upload_collection_image.html.erb (1.7ms)
  Rendered collections/admin_new_collection.html.erb within layouts/admin (13.3ms)
Completed 200 OK in 50ms (Views: 47.6ms | ActiveRecord: 0.2ms)


Started GET "/collection_images?r_id=" for 127.0.0.1 at 2016-01-17 03:30:11 +0100
Processing by RestaurantsController#show as JSON
  Parameters: {"r_id"=>"", "id"=>"collection_images"}
  [1m[35mRestaurant Load (1.8ms)[0m  SELECT `restaurants`.* FROM `restaurants` WHERE `restaurants`.`slug` = 'collection_images' LIMIT 1
  [1m[36mRestaurant Load (0.3ms)[0m  [1mSELECT `restaurants`.* FROM `restaurants` WHERE `restaurants`.`id` = 0 LIMIT 1[0m
Completed 500 Internal Server Error in 6ms

ActiveRecord::RecordNotFound (Couldn't find Restaurant with id=collection_images):
  app/controllers/restaurants_controller.rb:193:in `show'


  Rendered /Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_dispatch/middleware/templates/rescues/_trace.erb (3.1ms)
  Rendered /Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_dispatch/middleware/templates/rescues/_request_and_response.erb (3.9ms)
  Rendered /Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_dispatch/middleware/templates/rescues/diagnostics.erb within rescues/layout (96.7ms)


Started GET "/admin/collections/admin_new_collection" for 127.0.0.1 at 2016-01-17 03:30:43 +0100
Processing by CollectionsController#admin_new_collection as HTML
  [1m[35mUser Load (0.5ms)[0m  SELECT `users`.* FROM `users` WHERE `users`.`id` = 1 LIMIT 1
  Rendered collections/_collection_form.html.erb (5.0ms)
  Rendered collections/_collection_restaurants_form.html.erb (0.3ms)
  Rendered collections/_upload_collection_image.html.erb (1.0ms)
  Rendered collections/admin_new_collection.html.erb within layouts/admin (9.0ms)
Completed 200 OK in 20ms (Views: 16.3ms | ActiveRecord: 0.5ms)


Started GET "/collection_images?r_id=" for 127.0.0.1 at 2016-01-17 03:30:44 +0100
Processing by RestaurantsController#show as JSON
  Parameters: {"r_id"=>"", "id"=>"collection_images"}
  [1m[36mRestaurant Load (1.6ms)[0m  [1mSELECT `restaurants`.* FROM `restaurants` WHERE `restaurants`.`slug` = 'collection_images' LIMIT 1[0m
  [1m[35mRestaurant Load (0.3ms)[0m  SELECT `restaurants`.* FROM `restaurants` WHERE `restaurants`.`id` = 0 LIMIT 1
Completed 500 Internal Server Error in 4ms

ActiveRecord::RecordNotFound (Couldn't find Restaurant with id=collection_images):
  app/controllers/restaurants_controller.rb:193:in `show'


  Rendered /Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_dispatch/middleware/templates/rescues/_trace.erb (1.5ms)
  Rendered /Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_dispatch/middleware/templates/rescues/_request_and_response.erb (1.2ms)
  Rendered /Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_dispatch/middleware/templates/rescues/diagnostics.erb within rescues/layout (59.6ms)
Connecting to database specified by database.yml
DEPRECATION WARNING: Passing :tag, :class and others to use is deprecated. Please invoke b.use :label, :wrap_with => {:class=>"simple_label"} instead. (called from block (2 levels) in <top (required)> at /Users/kevinmuller/halalgems_backend/config/initializers/simple_form.rb:67)


Started GET "/admin/collections/admin_new_collection" for 127.0.0.1 at 2016-01-17 03:32:51 +0100
Processing by CollectionsController#admin_new_collection as HTML
  [1m[36mUser Load (0.5ms)[0m  [1mSELECT `users`.* FROM `users` WHERE `users`.`id` = 1 LIMIT 1[0m
  Rendered collections/_collection_form.html.erb (7.9ms)
  Rendered collections/_collection_restaurants_form.html.erb (0.7ms)
  Rendered collections/admin_new_collection.html.erb within layouts/admin (12.5ms)
Completed 200 OK in 114ms (Views: 53.2ms | ActiveRecord: 16.9ms)


Started GET "/admin/collections/admin_new_collection" for 127.0.0.1 at 2016-01-17 03:40:03 +0100
Processing by CollectionsController#admin_new_collection as HTML
  [1m[35mUser Load (0.7ms)[0m  SELECT `users`.* FROM `users` WHERE `users`.`id` = 1 LIMIT 1
  Rendered collections/_collection_form.html.erb (40.3ms)
  Rendered collections/admin_new_collection.html.erb within layouts/admin (41.4ms)
Completed 500 Internal Server Error in 48ms

ActionView::Template::Error (undefined local variable or method `collection' for #<#<Class:0x007f836908a338>:0x007f8368859a38>):
    7:         <%= f.input :name, placeholder: 'Name', input_html: { class: 'form-control' } %>
    8:         <%= f.input :description, placeholder: 'Description', input_html: { class: 'form-control' }%>
    9:         <div class="controls-group">
    10:           <img src="<%= collection.image_url %>" alt="<%= collection.name %>" class="jtooltip" title="<%= collection.name %>" />
    11:           <%= f.label :image, 'Choose image', class: 'btn btn-default mg-bt-10 border-radius-5 form-control label_for_choose_menu' %>
    12:           <%= f.file_field :image, :name => 'collection_image[image]', :multiple => false , class: 'form-control'%>
    13:           <label class='hide collection-image-error'> <%= t('collections.please_choose_image') %> </label>
  app/views/collections/_collection_form.html.erb:10:in `block in _app_views_collections__collection_form_html_erb___3552832767113902179_70101185479600'
  app/views/collections/_collection_form.html.erb:3:in `_app_views_collections__collection_form_html_erb___3552832767113902179_70101185479600'
  app/views/collections/admin_new_collection.html.erb:14:in `_app_views_collections_admin_new_collection_html_erb__817927608510063314_70101189776980'
  app/controllers/collections_controller.rb:55:in `admin_new_collection'


  Rendered /Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_dispatch/middleware/templates/rescues/_trace.erb (1.0ms)
  Rendered /Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_dispatch/middleware/templates/rescues/_request_and_response.erb (0.8ms)
  Rendered /Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_dispatch/middleware/templates/rescues/template_error.erb within rescues/layout (53.1ms)


Started GET "/admin/collections/admin_new_collection" for 127.0.0.1 at 2016-01-17 03:40:33 +0100
Processing by CollectionsController#admin_new_collection as HTML
  [1m[36mUser Load (0.6ms)[0m  [1mSELECT `users`.* FROM `users` WHERE `users`.`id` = 1 LIMIT 1[0m
  Rendered collections/_collection_form.html.erb (7.1ms)
  Rendered collections/_collection_restaurants_form.html.erb (0.3ms)
  Rendered collections/admin_new_collection.html.erb within layouts/admin (9.6ms)
Completed 200 OK in 20ms (Views: 16.3ms | ActiveRecord: 0.6ms)


Started GET "/admin/collections/admin_new_collection" for 127.0.0.1 at 2016-01-17 03:40:54 +0100
Processing by CollectionsController#admin_new_collection as HTML
  [1m[35mUser Load (0.5ms)[0m  SELECT `users`.* FROM `users` WHERE `users`.`id` = 1 LIMIT 1
  Rendered collections/_collection_form.html.erb (4.9ms)
  Rendered collections/_collection_restaurants_form.html.erb (0.3ms)
  Rendered collections/admin_new_collection.html.erb within layouts/admin (6.9ms)
Completed 200 OK in 17ms (Views: 13.2ms | ActiveRecord: 0.5ms)


Started GET "/admin/restaurants" for 127.0.0.1 at 2016-01-17 03:41:54 +0100
  [1m[36m (0.2ms)[0m  [1mSELECT COUNT(*) FROM `filter_types` WHERE (code = 'features')[0m
  [1m[35m (0.2ms)[0m  SELECT COUNT(*) FROM `filters` WHERE (code = 'offer')
  [1m[36mFilter Load (0.2ms)[0m  [1mSELECT `filters`.* FROM `filters` WHERE (code = 'offer') LIMIT 1[0m
  [1m[35mFilterType Load (0.2ms)[0m  SELECT `filter_types`.* FROM `filter_types` WHERE (code = 'features') LIMIT 1
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT `filters`.* FROM `filters` WHERE (code = 'offer') LIMIT 1[0m
  [1m[35mCACHE (0.0ms)[0m  SELECT `filter_types`.* FROM `filter_types` WHERE (code = 'features') LIMIT 1
Processing by RestaurantsController#index as HTML
  [1m[36mUser Load (0.4ms)[0m  [1mSELECT `users`.* FROM `users` WHERE `users`.`id` = 1 LIMIT 1[0m
  Rendered shared/_restaurant_manage_tabs.html.erb (1.2ms)
  Rendered restaurants/_condition_fields.html.erb (12.0ms)
  [1m[35mRestaurant Load (0.9ms)[0m  SELECT `restaurants`.* FROM `restaurants` ORDER BY disabled ASC,created_at DESC LIMIT 12 OFFSET 0
  [1m[36mPhoto Load (0.4ms)[0m  [1mSELECT `photos`.* FROM `photos` WHERE (restaurant_id = 1057 and cover = true and status = 1) LIMIT 1[0m
  [1m[35mPhoto Load (0.4ms)[0m  SELECT `photos`.* FROM `photos` WHERE `photos`.`restaurant_id` = 1057 AND `photos`.`status` = 1 ORDER BY restaurant_id ASC, created_at DESC LIMIT 1
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT `photos`.* FROM `photos` WHERE (restaurant_id = 1057 and cover = true and status = 1) LIMIT 1[0m
  [1m[35mCACHE (0.0ms)[0m  SELECT `photos`.* FROM `photos` WHERE `photos`.`restaurant_id` = 1057 AND `photos`.`status` = 1 ORDER BY restaurant_id ASC, created_at DESC LIMIT 1
  [1m[36mPhoto Load (0.5ms)[0m  [1mSELECT `photos`.* FROM `photos` WHERE (restaurant_id = 903 and cover = true and status = 1) LIMIT 1[0m
  [1m[35mPhoto Load (0.3ms)[0m  SELECT `photos`.* FROM `photos` WHERE `photos`.`restaurant_id` = 903 AND `photos`.`status` = 1 ORDER BY restaurant_id ASC, created_at DESC LIMIT 1
  [1m[36mPhoto Load (0.3ms)[0m  [1mSELECT `photos`.* FROM `photos` WHERE (restaurant_id = 876 and cover = true and status = 1) LIMIT 1[0m
  [1m[35mPhoto Load (0.3ms)[0m  SELECT `photos`.* FROM `photos` WHERE `photos`.`restaurant_id` = 876 AND `photos`.`status` = 1 ORDER BY restaurant_id ASC, created_at DESC LIMIT 1
  [1m[36mPhoto Load (0.3ms)[0m  [1mSELECT `photos`.* FROM `photos` WHERE (restaurant_id = 851 and cover = true and status = 1) LIMIT 1[0m
  [1m[35mPhoto Load (0.3ms)[0m  SELECT `photos`.* FROM `photos` WHERE `photos`.`restaurant_id` = 851 AND `photos`.`status` = 1 ORDER BY restaurant_id ASC, created_at DESC LIMIT 1
  [1m[36mPhoto Load (0.4ms)[0m  [1mSELECT `photos`.* FROM `photos` WHERE (restaurant_id = 693 and cover = true and status = 1) LIMIT 1[0m
  [1m[35mPhoto Load (0.4ms)[0m  SELECT `photos`.* FROM `photos` WHERE `photos`.`restaurant_id` = 693 AND `photos`.`status` = 1 ORDER BY restaurant_id ASC, created_at DESC LIMIT 1
  [1m[36mPhoto Load (0.3ms)[0m  [1mSELECT `photos`.* FROM `photos` WHERE (restaurant_id = 686 and cover = true and status = 1) LIMIT 1[0m
  [1m[35mPhoto Load (0.3ms)[0m  SELECT `photos`.* FROM `photos` WHERE `photos`.`restaurant_id` = 686 AND `photos`.`status` = 1 ORDER BY restaurant_id ASC, created_at DESC LIMIT 1
  [1m[36mPhoto Load (0.3ms)[0m  [1mSELECT `photos`.* FROM `photos` WHERE (restaurant_id = 669 and cover = true and status = 1) LIMIT 1[0m
  [1m[35mPhoto Load (0.3ms)[0m  SELECT `photos`.* FROM `photos` WHERE `photos`.`restaurant_id` = 669 AND `photos`.`status` = 1 ORDER BY restaurant_id ASC, created_at DESC LIMIT 1
  [1m[36mPhoto Load (0.3ms)[0m  [1mSELECT `photos`.* FROM `photos` WHERE (restaurant_id = 251 and cover = true and status = 1) LIMIT 1[0m
  [1m[35mPhoto Load (0.3ms)[0m  SELECT `photos`.* FROM `photos` WHERE `photos`.`restaurant_id` = 251 AND `photos`.`status` = 1 ORDER BY restaurant_id ASC, created_at DESC LIMIT 1
  [1m[36mPhoto Load (0.4ms)[0m  [1mSELECT `photos`.* FROM `photos` WHERE (restaurant_id = 250 and cover = true and status = 1) LIMIT 1[0m
  [1m[35mPhoto Load (0.3ms)[0m  SELECT `photos`.* FROM `photos` WHERE `photos`.`restaurant_id` = 250 AND `photos`.`status` = 1 ORDER BY restaurant_id ASC, created_at DESC LIMIT 1
  [1m[36mPhoto Load (0.3ms)[0m  [1mSELECT `photos`.* FROM `photos` WHERE (restaurant_id = 237 and cover = true and status = 1) LIMIT 1[0m
  [1m[35mPhoto Load (0.3ms)[0m  SELECT `photos`.* FROM `photos` WHERE `photos`.`restaurant_id` = 237 AND `photos`.`status` = 1 ORDER BY restaurant_id ASC, created_at DESC LIMIT 1
  [1m[36mPhoto Load (0.3ms)[0m  [1mSELECT `photos`.* FROM `photos` WHERE (restaurant_id = 231 and cover = true and status = 1) LIMIT 1[0m
  [1m[35mPhoto Load (0.3ms)[0m  SELECT `photos`.* FROM `photos` WHERE `photos`.`restaurant_id` = 231 AND `photos`.`status` = 1 ORDER BY restaurant_id ASC, created_at DESC LIMIT 1
  [1m[36mPhoto Load (0.3ms)[0m  [1mSELECT `photos`.* FROM `photos` WHERE (restaurant_id = 222 and cover = true and status = 1) LIMIT 1[0m
  [1m[35mPhoto Load (0.3ms)[0m  SELECT `photos`.* FROM `photos` WHERE `photos`.`restaurant_id` = 222 AND `photos`.`status` = 1 ORDER BY restaurant_id ASC, created_at DESC LIMIT 1
  [1m[36m (0.4ms)[0m  [1mSELECT COUNT(*) FROM `restaurants` [0m
  Rendered restaurants/index.html.erb within layouts/admin (234.7ms)
Completed 200 OK in 268ms (Views: 217.6ms | ActiveRecord: 34.6ms)


Started GET "/admin/collections" for 127.0.0.1 at 2016-01-17 03:41:59 +0100
Processing by CollectionsController#index as HTML
  Rendered shared/_restaurant_manage_tabs.html.erb (0.9ms)
  [1m[35mCollection Load (0.4ms)[0m  SELECT `collections`.* FROM `collections` ORDER BY name ASC, created_at DESC LIMIT 12 OFFSET 0
  [1m[36m (0.3ms)[0m  [1mSELECT COUNT(*) FROM `collections` [0m
  Rendered collections/index.erb within layouts/admin (11.6ms)
  [1m[35mUser Load (0.2ms)[0m  SELECT `users`.* FROM `users` WHERE `users`.`id` = 1 LIMIT 1
Completed 200 OK in 39ms (Views: 37.5ms | ActiveRecord: 0.9ms)


Started GET "/admin/collections/admin_new_collection" for 127.0.0.1 at 2016-01-17 03:42:04 +0100
Processing by CollectionsController#admin_new_collection as HTML
  [1m[36mUser Load (0.4ms)[0m  [1mSELECT `users`.* FROM `users` WHERE `users`.`id` = 1 LIMIT 1[0m
  Rendered collections/_collection_form.html.erb (6.5ms)
  Rendered collections/_collection_restaurants_form.html.erb (0.3ms)
  Rendered collections/admin_new_collection.html.erb within layouts/admin (13.3ms)
Completed 200 OK in 29ms (Views: 27.5ms | ActiveRecord: 0.4ms)


Started POST "/admin/collections" for 127.0.0.1 at 2016-01-17 03:42:10 +0100
Processing by CollectionsController#create as HTML
  Parameters: {"utf8"=>"âœ“", "authenticity_token"=>"RUljBeFq2Kuk53sFNS/nHZPaIO2p/6bajboSTDM6gqE=", "admin"=>"true", "collection"=>{"name"=>"test", "description"=>"test"}}
  [1m[35mCollection Load (0.5ms)[0m  SELECT `collections`.* FROM `collections` WHERE `collections`.`name` = 'test' LIMIT 1
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO `collections` (`created_at`, `description`, `image_url`, `name`, `updated_at`) VALUES ('2016-01-17 02:42:10', 'test', NULL, 'test', '2016-01-17 02:42:10')
  [1m[36m (0.5ms)[0m  [1mCOMMIT[0m
Completed 500 Internal Server Error in 6ms

NoMethodError (undefined method `[]' for nil:NilClass):
  app/controllers/collections_controller.rb:82:in `block in create'
  app/controllers/collections_controller.rb:77:in `create'


  Rendered /Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_dispatch/middleware/templates/rescues/_trace.erb (1.0ms)
  Rendered /Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_dispatch/middleware/templates/rescues/_request_and_response.erb (0.9ms)
  Rendered /Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_dispatch/middleware/templates/rescues/diagnostics.erb within rescues/layout (56.7ms)


Started POST "/admin/collections" for 127.0.0.1 at 2016-01-17 03:43:07 +0100
Processing by CollectionsController#create as HTML
  Parameters: {"utf8"=>"âœ“", "authenticity_token"=>"RUljBeFq2Kuk53sFNS/nHZPaIO2p/6bajboSTDM6gqE=", "admin"=>"true", "collection"=>{"name"=>"test123", "description"=>"test"}}
  [1m[35mCollection Load (0.2ms)[0m  SELECT `collections`.* FROM `collections` WHERE `collections`.`name` = 'test123' LIMIT 1
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35mSQL (18.5ms)[0m  INSERT INTO `collections` (`created_at`, `description`, `image_url`, `name`, `updated_at`) VALUES ('2016-01-17 02:43:07', 'test', NULL, 'test123', '2016-01-17 02:43:07')
  [1m[36m (0.4ms)[0m  [1mCOMMIT[0m
Redirected to http://localhost:3000/collection/20/edit
Completed 302 Found in 31ms (ActiveRecord: 20.2ms)


Started GET "/collection/20/edit" for 127.0.0.1 at 2016-01-17 03:43:07 +0100
Processing by CollectionsController#edit_collection as HTML
  Parameters: {"id"=>"20"}
  [1m[35mUser Load (0.2ms)[0m  SELECT `users`.* FROM `users` WHERE `users`.`id` = 1 LIMIT 1
  [1m[36mCollection Load (0.3ms)[0m  [1mSELECT `collections`.* FROM `collections` WHERE `collections`.`id` = 20 LIMIT 1[0m
  Rendered collections/_collection_form.html.erb (6.4ms)
  Rendered collections/_collection_restaurants_form.html.erb (0.2ms)
  Rendered collections/edit_collection.html.erb within layouts/admin (8.6ms)
Completed 200 OK in 100ms (Views: 21.9ms | ActiveRecord: 2.0ms)


Started GET "/admin/restaurants" for 127.0.0.1 at 2016-01-17 03:43:10 +0100
  [1m[35m (0.3ms)[0m  SELECT COUNT(*) FROM `filter_types` WHERE (code = 'features')
  [1m[36m (0.2ms)[0m  [1mSELECT COUNT(*) FROM `filters` WHERE (code = 'offer')[0m
  [1m[35mFilter Load (0.2ms)[0m  SELECT `filters`.* FROM `filters` WHERE (code = 'offer') LIMIT 1
  [1m[36mFilterType Load (0.1ms)[0m  [1mSELECT `filter_types`.* FROM `filter_types` WHERE (code = 'features') LIMIT 1[0m
  [1m[35mCACHE (0.0ms)[0m  SELECT `filters`.* FROM `filters` WHERE (code = 'offer') LIMIT 1
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT `filter_types`.* FROM `filter_types` WHERE (code = 'features') LIMIT 1[0m
Processing by RestaurantsController#index as HTML
  [1m[35mUser Load (0.3ms)[0m  SELECT `users`.* FROM `users` WHERE `users`.`id` = 1 LIMIT 1
  Rendered shared/_restaurant_manage_tabs.html.erb (0.7ms)
  Rendered restaurants/_condition_fields.html.erb (12.1ms)
  [1m[36mRestaurant Load (0.9ms)[0m  [1mSELECT `restaurants`.* FROM `restaurants` ORDER BY disabled ASC,created_at DESC LIMIT 12 OFFSET 0[0m
  [1m[35mPhoto Load (0.4ms)[0m  SELECT `photos`.* FROM `photos` WHERE (restaurant_id = 1057 and cover = true and status = 1) LIMIT 1
  [1m[36mPhoto Load (0.4ms)[0m  [1mSELECT `photos`.* FROM `photos` WHERE `photos`.`restaurant_id` = 1057 AND `photos`.`status` = 1 ORDER BY restaurant_id ASC, created_at DESC LIMIT 1[0m
  [1m[35mCACHE (0.0ms)[0m  SELECT `photos`.* FROM `photos` WHERE (restaurant_id = 1057 and cover = true and status = 1) LIMIT 1
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT `photos`.* FROM `photos` WHERE `photos`.`restaurant_id` = 1057 AND `photos`.`status` = 1 ORDER BY restaurant_id ASC, created_at DESC LIMIT 1[0m
  [1m[35mPhoto Load (0.5ms)[0m  SELECT `photos`.* FROM `photos` WHERE (restaurant_id = 903 and cover = true and status = 1) LIMIT 1
  [1m[36mPhoto Load (0.3ms)[0m  [1mSELECT `photos`.* FROM `photos` WHERE `photos`.`restaurant_id` = 903 AND `photos`.`status` = 1 ORDER BY restaurant_id ASC, created_at DESC LIMIT 1[0m
  [1m[35mPhoto Load (0.3ms)[0m  SELECT `photos`.* FROM `photos` WHERE (restaurant_id = 876 and cover = true and status = 1) LIMIT 1
  [1m[36mPhoto Load (0.3ms)[0m  [1mSELECT `photos`.* FROM `photos` WHERE `photos`.`restaurant_id` = 876 AND `photos`.`status` = 1 ORDER BY restaurant_id ASC, created_at DESC LIMIT 1[0m
  [1m[35mPhoto Load (0.4ms)[0m  SELECT `photos`.* FROM `photos` WHERE (restaurant_id = 851 and cover = true and status = 1) LIMIT 1
  [1m[36mPhoto Load (0.3ms)[0m  [1mSELECT `photos`.* FROM `photos` WHERE `photos`.`restaurant_id` = 851 AND `photos`.`status` = 1 ORDER BY restaurant_id ASC, created_at DESC LIMIT 1[0m
  [1m[35mPhoto Load (0.3ms)[0m  SELECT `photos`.* FROM `photos` WHERE (restaurant_id = 693 and cover = true and status = 1) LIMIT 1
  [1m[36mPhoto Load (0.3ms)[0m  [1mSELECT `photos`.* FROM `photos` WHERE `photos`.`restaurant_id` = 693 AND `photos`.`status` = 1 ORDER BY restaurant_id ASC, created_at DESC LIMIT 1[0m
  [1m[35mPhoto Load (0.3ms)[0m  SELECT `photos`.* FROM `photos` WHERE (restaurant_id = 686 and cover = true and status = 1) LIMIT 1
  [1m[36mPhoto Load (0.3ms)[0m  [1mSELECT `photos`.* FROM `photos` WHERE `photos`.`restaurant_id` = 686 AND `photos`.`status` = 1 ORDER BY restaurant_id ASC, created_at DESC LIMIT 1[0m
  [1m[35mPhoto Load (0.3ms)[0m  SELECT `photos`.* FROM `photos` WHERE (restaurant_id = 669 and cover = true and status = 1) LIMIT 1
  [1m[36mPhoto Load (0.3ms)[0m  [1mSELECT `photos`.* FROM `photos` WHERE `photos`.`restaurant_id` = 669 AND `photos`.`status` = 1 ORDER BY restaurant_id ASC, created_at DESC LIMIT 1[0m
  [1m[35mPhoto Load (0.3ms)[0m  SELECT `photos`.* FROM `photos` WHERE (restaurant_id = 251 and cover = true and status = 1) LIMIT 1
  [1m[36mPhoto Load (0.3ms)[0m  [1mSELECT `photos`.* FROM `photos` WHERE `photos`.`restaurant_id` = 251 AND `photos`.`status` = 1 ORDER BY restaurant_id ASC, created_at DESC LIMIT 1[0m
  [1m[35mPhoto Load (0.4ms)[0m  SELECT `photos`.* FROM `photos` WHERE (restaurant_id = 250 and cover = true and status = 1) LIMIT 1
  [1m[36mPhoto Load (0.3ms)[0m  [1mSELECT `photos`.* FROM `photos` WHERE `photos`.`restaurant_id` = 250 AND `photos`.`status` = 1 ORDER BY restaurant_id ASC, created_at DESC LIMIT 1[0m
  [1m[35mPhoto Load (0.5ms)[0m  SELECT `photos`.* FROM `photos` WHERE (restaurant_id = 237 and cover = true and status = 1) LIMIT 1
  [1m[36mPhoto Load (0.4ms)[0m  [1mSELECT `photos`.* FROM `photos` WHERE `photos`.`restaurant_id` = 237 AND `photos`.`status` = 1 ORDER BY restaurant_id ASC, created_at DESC LIMIT 1[0m
  [1m[35mPhoto Load (0.3ms)[0m  SELECT `photos`.* FROM `photos` WHERE (restaurant_id = 231 and cover = true and status = 1) LIMIT 1
  [1m[36mPhoto Load (0.3ms)[0m  [1mSELECT `photos`.* FROM `photos` WHERE `photos`.`restaurant_id` = 231 AND `photos`.`status` = 1 ORDER BY restaurant_id ASC, created_at DESC LIMIT 1[0m
  [1m[35mPhoto Load (0.7ms)[0m  SELECT `photos`.* FROM `photos` WHERE (restaurant_id = 222 and cover = true and status = 1) LIMIT 1
  [1m[36mPhoto Load (0.3ms)[0m  [1mSELECT `photos`.* FROM `photos` WHERE `photos`.`restaurant_id` = 222 AND `photos`.`status` = 1 ORDER BY restaurant_id ASC, created_at DESC LIMIT 1[0m
  [1m[35m (0.3ms)[0m  SELECT COUNT(*) FROM `restaurants` 
  Rendered restaurants/index.html.erb within layouts/admin (127.3ms)
Completed 200 OK in 137ms (Views: 122.8ms | ActiveRecord: 11.8ms)


Started GET "/admin/collections" for 127.0.0.1 at 2016-01-17 03:43:12 +0100
Processing by CollectionsController#index as HTML
  Rendered shared/_restaurant_manage_tabs.html.erb (0.9ms)
  [1m[36mCollection Load (0.4ms)[0m  [1mSELECT `collections`.* FROM `collections` ORDER BY name ASC, created_at DESC LIMIT 12 OFFSET 0[0m
  [1m[35m (0.2ms)[0m  SELECT COUNT(*) FROM `collections` 
  Rendered collections/index.erb within layouts/admin (10.1ms)
  [1m[36mUser Load (0.3ms)[0m  [1mSELECT `users`.* FROM `users` WHERE `users`.`id` = 1 LIMIT 1[0m
Completed 200 OK in 45ms (Views: 42.7ms | ActiveRecord: 0.8ms)


Started GET "/admin/collections/admin_new_collection" for 127.0.0.1 at 2016-01-17 03:44:29 +0100
Processing by CollectionsController#admin_new_collection as HTML
  [1m[35mUser Load (0.3ms)[0m  SELECT `users`.* FROM `users` WHERE `users`.`id` = 1 LIMIT 1
  Rendered collections/_collection_form.html.erb (7.1ms)
  Rendered collections/_collection_restaurants_form.html.erb (0.3ms)
  Rendered collections/admin_new_collection.html.erb within layouts/admin (9.3ms)
Completed 200 OK in 31ms (Views: 28.2ms | ActiveRecord: 0.3ms)


Started POST "/admin/collections" for 127.0.0.1 at 2016-01-17 03:44:36 +0100
Processing by CollectionsController#create as HTML
  Parameters: {"utf8"=>"âœ“", "authenticity_token"=>"RUljBeFq2Kuk53sFNS/nHZPaIO2p/6bajboSTDM6gqE=", "admin"=>"true", "collection"=>{"name"=>"test111", "description"=>"asdfa"}}
  [1m[36mCollection Load (0.3ms)[0m  [1mSELECT `collections`.* FROM `collections` WHERE `collections`.`name` = 'test111' LIMIT 1[0m
  [1m[35m (0.3ms)[0m  BEGIN
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO `collections` (`created_at`, `description`, `image_url`, `name`, `updated_at`) VALUES ('2016-01-17 02:44:36', 'asdfa', NULL, 'test111', '2016-01-17 02:44:36')[0m
  [1m[35m (0.5ms)[0m  COMMIT
Redirected to http://localhost:3000/collection/21/edit
Completed 302 Found in 6ms (ActiveRecord: 1.3ms)


Started GET "/collection/21/edit" for 127.0.0.1 at 2016-01-17 03:44:36 +0100
Processing by CollectionsController#edit_collection as HTML
  Parameters: {"id"=>"21"}
  [1m[36mUser Load (0.2ms)[0m  [1mSELECT `users`.* FROM `users` WHERE `users`.`id` = 1 LIMIT 1[0m
  [1m[35mCollection Load (0.4ms)[0m  SELECT `collections`.* FROM `collections` WHERE `collections`.`id` = 21 LIMIT 1
  Rendered collections/_collection_form.html.erb (5.1ms)
  Rendered collections/_collection_restaurants_form.html.erb (0.3ms)
  Rendered collections/edit_collection.html.erb within layouts/admin (7.0ms)
Completed 200 OK in 16ms (Views: 12.3ms | ActiveRecord: 0.6ms)


Started POST "/admin/collections" for 127.0.0.1 at 2016-01-17 03:45:34 +0100
Processing by CollectionsController#create as HTML
  Parameters: {"utf8"=>"âœ“", "authenticity_token"=>"RUljBeFq2Kuk53sFNS/nHZPaIO2p/6bajboSTDM6gqE=", "admin"=>"true", "collection"=>{"name"=>"test1111", "description"=>"asdfa"}, "collection_image"=>{"image"=>#<ActionDispatch::Http::UploadedFile:0x007f83652bc678 @original_filename="burgers.png", @content_type="image/png", @headers="Content-Disposition: form-data; name=\"collection_image[image]\"; filename=\"burgers.png\"\r\nContent-Type: image/png\r\n", @tempfile=#<Tempfile:/var/folders/rf/q4l8n5k56pnbjgkdtzrhq_w00000gn/T/RackMultipart20160117-28269-1yn3ovn>>}}
  [1m[36mCollection Load (0.2ms)[0m  [1mSELECT `collections`.* FROM `collections` WHERE `collections`.`name` = 'test1111' LIMIT 1[0m
  [1m[35m (0.1ms)[0m  BEGIN
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO `collections` (`created_at`, `description`, `image_url`, `name`, `updated_at`) VALUES ('2016-01-17 02:45:34', 'asdfa', NULL, 'test1111', '2016-01-17 02:45:34')[0m
  [1m[35m (17.5ms)[0m  COMMIT
  [1m[36m (0.2ms)[0m  [1mBEGIN[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO `collection_images` (`collection_id`, `created_at`, `image_name`, `image_uid`, `text_content`, `text_hyperlink`, `text_title`, `updated_at`) VALUES (22, '2016-01-17 02:45:34', 'burgers.png', '2016/01/17/03_45_34_426_burgers.png', NULL, NULL, NULL, '2016-01-17 02:45:34')
  [1m[36m (0.6ms)[0m  [1mCOMMIT[0m
Redirected to http://localhost:3000/collection/22/edit
Completed 302 Found in 105ms (ActiveRecord: 47.1ms)


Started GET "/collection/22/edit" for 127.0.0.1 at 2016-01-17 03:45:34 +0100
Processing by CollectionsController#edit_collection as HTML
  Parameters: {"id"=>"22"}
  [1m[35mUser Load (0.2ms)[0m  SELECT `users`.* FROM `users` WHERE `users`.`id` = 1 LIMIT 1
  [1m[36mCollection Load (0.2ms)[0m  [1mSELECT `collections`.* FROM `collections` WHERE `collections`.`id` = 22 LIMIT 1[0m
  Rendered collections/_collection_form.html.erb (19.8ms)
  Rendered collections/_collection_restaurants_form.html.erb (0.9ms)
  Rendered collections/edit_collection.html.erb within layouts/admin (32.4ms)
Completed 200 OK in 55ms (Views: 50.6ms | ActiveRecord: 0.4ms)


Started GET "/collection/22/edit" for 127.0.0.1 at 2016-01-17 03:48:17 +0100
Processing by CollectionsController#edit_collection as HTML
  Parameters: {"id"=>"22"}
  [1m[35mUser Load (0.2ms)[0m  SELECT `users`.* FROM `users` WHERE `users`.`id` = 1 LIMIT 1
  [1m[36mCollection Load (0.3ms)[0m  [1mSELECT `collections`.* FROM `collections` WHERE `collections`.`id` = 22 LIMIT 1[0m
  Rendered collections/_collection_form.html.erb (8.2ms)
  Rendered collections/_collection_restaurants_form.html.erb (0.9ms)
  Rendered collections/edit_collection.html.erb within layouts/admin (11.2ms)
Completed 200 OK in 120ms (Views: 21.6ms | ActiveRecord: 2.5ms)


Started GET "/collection/22/edit" for 127.0.0.1 at 2016-01-17 03:48:19 +0100
Processing by CollectionsController#edit_collection as HTML
  Parameters: {"id"=>"22"}
  [1m[35mUser Load (0.3ms)[0m  SELECT `users`.* FROM `users` WHERE `users`.`id` = 1 LIMIT 1
  [1m[36mCollection Load (0.2ms)[0m  [1mSELECT `collections`.* FROM `collections` WHERE `collections`.`id` = 22 LIMIT 1[0m
  Rendered collections/_collection_form.html.erb (12.1ms)
  Rendered collections/_collection_restaurants_form.html.erb (0.6ms)
  Rendered collections/edit_collection.html.erb within layouts/admin (15.4ms)
Completed 200 OK in 27ms (Views: 23.5ms | ActiveRecord: 0.5ms)


Started GET "/collection/22/edit" for 127.0.0.1 at 2016-01-17 03:51:53 +0100
Processing by CollectionsController#edit_collection as HTML
  Parameters: {"id"=>"22"}
  [1m[35mUser Load (0.2ms)[0m  SELECT `users`.* FROM `users` WHERE `users`.`id` = 1 LIMIT 1
  [1m[36mCollection Load (0.2ms)[0m  [1mSELECT `collections`.* FROM `collections` WHERE `collections`.`id` = 22 LIMIT 1[0m
  [1m[35mCollectionImage Load (0.2ms)[0m  SELECT `collection_images`.* FROM `collection_images` WHERE (collection_id = 22) LIMIT 1
  Rendered collections/_collection_form.html.erb (18.8ms)
  Rendered collections/edit_collection.html.erb within layouts/admin (19.7ms)
Completed 500 Internal Server Error in 107ms

ActionView::Template::Error (undefined method `url' for #<CollectionImage:0x007f8368ce3298>):
    7:         <%= f.input :name, placeholder: 'Name', input_html: { class: 'form-control' } %>
    8:         <%= f.input :description, placeholder: 'Description', input_html: { class: 'form-control' }%>
    9:         <div class="control-group">
    10:           <img src="<%= @collection.image_url %>" alt="<%= @collection.name %>" class="jtooltip" title="<%= @collection.name %>" />
    11:           <%= f.label :image, 'Choose image', class: 'btn btn-default mg-bt-10 border-radius-5 form-control label_for_choose_menu' %>
    12:           <%= f.file_field :image, :name => 'collection_image[image]', :multiple => false , class: 'form-control'%>
    13:           <label class='hide collection-image-error'> <%= t('collections.please_choose_image') %> </label>
  app/models/collection.rb:30:in `image_url'
  app/views/collections/_collection_form.html.erb:10:in `block in _app_views_collections__collection_form_html_erb___3552832767113902179_70101172439020'
  app/views/collections/_collection_form.html.erb:3:in `_app_views_collections__collection_form_html_erb___3552832767113902179_70101172439020'
  app/views/collections/edit_collection.html.erb:13:in `_app_views_collections_edit_collection_html_erb__2302143935996500133_70101142220660'


  Rendered /Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_dispatch/middleware/templates/rescues/_trace.erb (1.2ms)
  Rendered /Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_dispatch/middleware/templates/rescues/_request_and_response.erb (0.6ms)
  Rendered /Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_dispatch/middleware/templates/rescues/template_error.erb within rescues/layout (41.5ms)


Started GET "/collection/22/edit" for 127.0.0.1 at 2016-01-17 03:52:11 +0100
Processing by CollectionsController#edit_collection as HTML
  Parameters: {"id"=>"22"}
  [1m[36mUser Load (0.2ms)[0m  [1mSELECT `users`.* FROM `users` WHERE `users`.`id` = 1 LIMIT 1[0m
  [1m[35mCollection Load (0.2ms)[0m  SELECT `collections`.* FROM `collections` WHERE `collections`.`id` = 22 LIMIT 1
  [1m[36mCollectionImage Load (0.2ms)[0m  [1mSELECT `collection_images`.* FROM `collection_images` WHERE (collection_id = 22) LIMIT 1[0m
  Rendered collections/_collection_form.html.erb (22.5ms)
  Rendered collections/edit_collection.html.erb within layouts/admin (23.5ms)
Completed 500 Internal Server Error in 95ms

ActionView::Template::Error (undefined method `url' for #<CollectionImage:0x007f836569aba0>):
    7:         <%= f.input :name, placeholder: 'Name', input_html: { class: 'form-control' } %>
    8:         <%= f.input :description, placeholder: 'Description', input_html: { class: 'form-control' }%>
    9:         <div class="control-group">
    10:           <img src="<%= @collection.image_url %>" alt="<%= @collection.name %>" class="jtooltip" title="<%= @collection.name %>" />
    11:           <%= f.label :image, 'Choose image', class: 'btn btn-default mg-bt-10 border-radius-5 form-control label_for_choose_menu' %>
    12:           <%= f.file_field :image, :name => 'collection_image[image]', :multiple => false , class: 'form-control'%>
    13:           <label class='hide collection-image-error'> <%= t('collections.please_choose_image') %> </label>
  app/models/collection.rb:30:in `image_url'
  app/views/collections/_collection_form.html.erb:10:in `block in _app_views_collections__collection_form_html_erb___3552832767113902179_70101172439020'
  app/views/collections/_collection_form.html.erb:3:in `_app_views_collections__collection_form_html_erb___3552832767113902179_70101172439020'
  app/views/collections/edit_collection.html.erb:13:in `_app_views_collections_edit_collection_html_erb__2302143935996500133_70101142220660'


  Rendered /Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_dispatch/middleware/templates/rescues/_trace.erb (1.7ms)
  Rendered /Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_dispatch/middleware/templates/rescues/_request_and_response.erb (1.1ms)
  Rendered /Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_dispatch/middleware/templates/rescues/template_error.erb within rescues/layout (49.5ms)


Started GET "/admin/restaurants" for 127.0.0.1 at 2016-01-17 04:10:49 +0100
  [1m[35m (0.2ms)[0m  SELECT COUNT(*) FROM `filter_types` WHERE (code = 'features')
  [1m[36m (0.2ms)[0m  [1mSELECT COUNT(*) FROM `filters` WHERE (code = 'offer')[0m
  [1m[35mFilter Load (0.2ms)[0m  SELECT `filters`.* FROM `filters` WHERE (code = 'offer') LIMIT 1
  [1m[36mFilterType Load (0.2ms)[0m  [1mSELECT `filter_types`.* FROM `filter_types` WHERE (code = 'features') LIMIT 1[0m
  [1m[35mCACHE (0.0ms)[0m  SELECT `filters`.* FROM `filters` WHERE (code = 'offer') LIMIT 1
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT `filter_types`.* FROM `filter_types` WHERE (code = 'features') LIMIT 1[0m
Processing by RestaurantsController#index as HTML
  [1m[35mUser Load (0.5ms)[0m  SELECT `users`.* FROM `users` WHERE `users`.`id` = 1 LIMIT 1
  Rendered shared/_restaurant_manage_tabs.html.erb (0.9ms)
  Rendered restaurants/_condition_fields.html.erb (12.2ms)
  [1m[36mRestaurant Load (0.9ms)[0m  [1mSELECT `restaurants`.* FROM `restaurants` ORDER BY disabled ASC,created_at DESC LIMIT 12 OFFSET 0[0m
  [1m[35mPhoto Load (0.5ms)[0m  SELECT `photos`.* FROM `photos` WHERE (restaurant_id = 1057 and cover = true and status = 1) LIMIT 1
  [1m[36mPhoto Load (0.4ms)[0m  [1mSELECT `photos`.* FROM `photos` WHERE `photos`.`restaurant_id` = 1057 AND `photos`.`status` = 1 ORDER BY restaurant_id ASC, created_at DESC LIMIT 1[0m
  [1m[35mCACHE (0.0ms)[0m  SELECT `photos`.* FROM `photos` WHERE (restaurant_id = 1057 and cover = true and status = 1) LIMIT 1
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT `photos`.* FROM `photos` WHERE `photos`.`restaurant_id` = 1057 AND `photos`.`status` = 1 ORDER BY restaurant_id ASC, created_at DESC LIMIT 1[0m
  [1m[35mPhoto Load (0.5ms)[0m  SELECT `photos`.* FROM `photos` WHERE (restaurant_id = 903 and cover = true and status = 1) LIMIT 1
  [1m[36mPhoto Load (0.3ms)[0m  [1mSELECT `photos`.* FROM `photos` WHERE `photos`.`restaurant_id` = 903 AND `photos`.`status` = 1 ORDER BY restaurant_id ASC, created_at DESC LIMIT 1[0m
  [1m[35mPhoto Load (0.3ms)[0m  SELECT `photos`.* FROM `photos` WHERE (restaurant_id = 876 and cover = true and status = 1) LIMIT 1
  [1m[36mPhoto Load (0.3ms)[0m  [1mSELECT `photos`.* FROM `photos` WHERE `photos`.`restaurant_id` = 876 AND `photos`.`status` = 1 ORDER BY restaurant_id ASC, created_at DESC LIMIT 1[0m
  [1m[35mPhoto Load (0.4ms)[0m  SELECT `photos`.* FROM `photos` WHERE (restaurant_id = 851 and cover = true and status = 1) LIMIT 1
  [1m[36mPhoto Load (0.3ms)[0m  [1mSELECT `photos`.* FROM `photos` WHERE `photos`.`restaurant_id` = 851 AND `photos`.`status` = 1 ORDER BY restaurant_id ASC, created_at DESC LIMIT 1[0m
  [1m[35mPhoto Load (0.3ms)[0m  SELECT `photos`.* FROM `photos` WHERE (restaurant_id = 693 and cover = true and status = 1) LIMIT 1
  [1m[36mPhoto Load (0.3ms)[0m  [1mSELECT `photos`.* FROM `photos` WHERE `photos`.`restaurant_id` = 693 AND `photos`.`status` = 1 ORDER BY restaurant_id ASC, created_at DESC LIMIT 1[0m
  [1m[35mPhoto Load (0.4ms)[0m  SELECT `photos`.* FROM `photos` WHERE (restaurant_id = 686 and cover = true and status = 1) LIMIT 1
  [1m[36mPhoto Load (0.3ms)[0m  [1mSELECT `photos`.* FROM `photos` WHERE `photos`.`restaurant_id` = 686 AND `photos`.`status` = 1 ORDER BY restaurant_id ASC, created_at DESC LIMIT 1[0m
  [1m[35mPhoto Load (0.5ms)[0m  SELECT `photos`.* FROM `photos` WHERE (restaurant_id = 669 and cover = true and status = 1) LIMIT 1
  [1m[36mPhoto Load (0.3ms)[0m  [1mSELECT `photos`.* FROM `photos` WHERE `photos`.`restaurant_id` = 669 AND `photos`.`status` = 1 ORDER BY restaurant_id ASC, created_at DESC LIMIT 1[0m
  [1m[35mPhoto Load (0.3ms)[0m  SELECT `photos`.* FROM `photos` WHERE (restaurant_id = 251 and cover = true and status = 1) LIMIT 1
  [1m[36mPhoto Load (0.3ms)[0m  [1mSELECT `photos`.* FROM `photos` WHERE `photos`.`restaurant_id` = 251 AND `photos`.`status` = 1 ORDER BY restaurant_id ASC, created_at DESC LIMIT 1[0m
  [1m[35mPhoto Load (0.4ms)[0m  SELECT `photos`.* FROM `photos` WHERE (restaurant_id = 250 and cover = true and status = 1) LIMIT 1
  [1m[36mPhoto Load (0.4ms)[0m  [1mSELECT `photos`.* FROM `photos` WHERE `photos`.`restaurant_id` = 250 AND `photos`.`status` = 1 ORDER BY restaurant_id ASC, created_at DESC LIMIT 1[0m
  [1m[35mPhoto Load (0.3ms)[0m  SELECT `photos`.* FROM `photos` WHERE (restaurant_id = 237 and cover = true and status = 1) LIMIT 1
  [1m[36mPhoto Load (0.3ms)[0m  [1mSELECT `photos`.* FROM `photos` WHERE `photos`.`restaurant_id` = 237 AND `photos`.`status` = 1 ORDER BY restaurant_id ASC, created_at DESC LIMIT 1[0m
  [1m[35mPhoto Load (0.4ms)[0m  SELECT `photos`.* FROM `photos` WHERE (restaurant_id = 231 and cover = true and status = 1) LIMIT 1
  [1m[36mPhoto Load (0.3ms)[0m  [1mSELECT `photos`.* FROM `photos` WHERE `photos`.`restaurant_id` = 231 AND `photos`.`status` = 1 ORDER BY restaurant_id ASC, created_at DESC LIMIT 1[0m
  [1m[35mPhoto Load (0.4ms)[0m  SELECT `photos`.* FROM `photos` WHERE (restaurant_id = 222 and cover = true and status = 1) LIMIT 1
  [1m[36mPhoto Load (0.3ms)[0m  [1mSELECT `photos`.* FROM `photos` WHERE `photos`.`restaurant_id` = 222 AND `photos`.`status` = 1 ORDER BY restaurant_id ASC, created_at DESC LIMIT 1[0m
  [1m[35m (0.4ms)[0m  SELECT COUNT(*) FROM `restaurants` 
  Rendered restaurants/index.html.erb within layouts/admin (158.1ms)
Completed 200 OK in 172ms (Views: 157.2ms | ActiveRecord: 11.9ms)


Started GET "/admin/collections" for 127.0.0.1 at 2016-01-17 04:10:51 +0100
Processing by CollectionsController#index as HTML
  Rendered shared/_restaurant_manage_tabs.html.erb (1.0ms)
  [1m[36mCollection Load (0.4ms)[0m  [1mSELECT `collections`.* FROM `collections` ORDER BY name ASC, created_at DESC LIMIT 12 OFFSET 0[0m
  [1m[35mCollectionImage Load (0.2ms)[0m  SELECT `collection_images`.* FROM `collection_images` WHERE (collection_id = 16) LIMIT 1
  Rendered collections/index.erb within layouts/admin (7.7ms)
Completed 500 Internal Server Error in 23ms

ActionView::Template::Error (undefined method `url' for #<CollectionImage:0x007f8366a579e0>):
    27:       <tr>
    28:         <td><%= collection.name %></td>
    29:         <td class="collection_image_column" >
    30:           <img src="<%= collection.image_url %>" alt="<%= collection.name %>" class="jtooltip" title="<%= collection.name %>" />
    31:         </td>
    32:         <td><%= collection.description %></td>
    33:         <td>
  app/models/collection.rb:30:in `image_url'
  app/views/collections/index.erb:30:in `block in _app_views_collections_index_erb___1182846876568079597_70101186616880'
  app/views/collections/index.erb:26:in `_app_views_collections_index_erb___1182846876568079597_70101186616880'
  app/controllers/collections_controller.rb:20:in `index'


  Rendered /Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_dispatch/middleware/templates/rescues/_trace.erb (1.2ms)
  Rendered /Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_dispatch/middleware/templates/rescues/_request_and_response.erb (0.9ms)
  Rendered /Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_dispatch/middleware/templates/rescues/template_error.erb within rescues/layout (42.3ms)


Started GET "/admin/collections" for 127.0.0.1 at 2016-01-17 04:11:16 +0100
Processing by CollectionsController#index as HTML
  Rendered shared/_restaurant_manage_tabs.html.erb (0.8ms)
  [1m[36mCollection Load (0.2ms)[0m  [1mSELECT `collections`.* FROM `collections` ORDER BY name ASC, created_at DESC LIMIT 12 OFFSET 0[0m
  [1m[35mCollectionImage Load (0.2ms)[0m  SELECT `collection_images`.* FROM `collection_images` WHERE (collection_id = 16) LIMIT 1
  [1m[36mCollectionImage Load (0.3ms)[0m  [1mSELECT `collection_images`.* FROM `collection_images` WHERE (collection_id = 17) LIMIT 1[0m
  Rendered collections/index.erb within layouts/admin (40.9ms)
Completed 500 Internal Server Error in 46ms

ActionView::Template::Error (undefined method `asset_path' for #<Collection:0x007f83695503e0>):
    27:       <tr>
    28:         <td><%= collection.name %></td>
    29:         <td class="collection_image_column" >
    30:           <img src="<%= collection.image_url %>" alt="<%= collection.name %>" class="jtooltip" title="<%= collection.name %>" />
    31:         </td>
    32:         <td><%= collection.description %></td>
    33:         <td>
  app/models/collection.rb:31:in `image_url'
  app/views/collections/index.erb:30:in `block in _app_views_collections_index_erb___1182846876568079597_70101186616880'
  app/views/collections/index.erb:26:in `_app_views_collections_index_erb___1182846876568079597_70101186616880'
  app/controllers/collections_controller.rb:20:in `index'


  Rendered /Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_dispatch/middleware/templates/rescues/_trace.erb (1.3ms)
  Rendered /Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_dispatch/middleware/templates/rescues/_request_and_response.erb (0.9ms)
  Rendered /Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_dispatch/middleware/templates/rescues/template_error.erb within rescues/layout (41.0ms)


Started GET "/admin/collections" for 127.0.0.1 at 2016-01-17 04:11:55 +0100
Processing by CollectionsController#index as HTML
  Rendered shared/_restaurant_manage_tabs.html.erb (0.5ms)
  [1m[35mCollection Load (0.3ms)[0m  SELECT `collections`.* FROM `collections` ORDER BY name ASC, created_at DESC LIMIT 12 OFFSET 0
  [1m[36mCollectionImage Load (0.2ms)[0m  [1mSELECT `collection_images`.* FROM `collection_images` WHERE (collection_id = 16) LIMIT 1[0m
  [1m[35mCollectionImage Load (0.2ms)[0m  SELECT `collection_images`.* FROM `collection_images` WHERE (collection_id = 17) LIMIT 1
  [1m[36mCollectionImage Load (0.2ms)[0m  [1mSELECT `collection_images`.* FROM `collection_images` WHERE (collection_id = 18) LIMIT 1[0m
  [1m[35mCollectionImage Load (0.1ms)[0m  SELECT `collection_images`.* FROM `collection_images` WHERE (collection_id = 15) LIMIT 1
  [1m[36mCollectionImage Load (0.1ms)[0m  [1mSELECT `collection_images`.* FROM `collection_images` WHERE (collection_id = 19) LIMIT 1[0m
  [1m[35mCollectionImage Load (0.2ms)[0m  SELECT `collection_images`.* FROM `collection_images` WHERE (collection_id = 21) LIMIT 1
  [1m[36mCollectionImage Load (0.2ms)[0m  [1mSELECT `collection_images`.* FROM `collection_images` WHERE (collection_id = 22) LIMIT 1[0m
  [1m[35mCollectionImage Load (0.1ms)[0m  SELECT `collection_images`.* FROM `collection_images` WHERE (collection_id = 20) LIMIT 1
  [1m[36m (0.1ms)[0m  [1mSELECT COUNT(*) FROM `collections` [0m
  Rendered collections/index.erb within layouts/admin (39.3ms)
  [1m[35mUser Load (0.2ms)[0m  SELECT `users`.* FROM `users` WHERE `users`.`id` = 1 LIMIT 1
Completed 200 OK in 98ms (Views: 92.3ms | ActiveRecord: 4.8ms)


Started GET "/admin/collections/admin_new_collection" for 127.0.0.1 at 2016-01-17 04:12:20 +0100
Processing by CollectionsController#admin_new_collection as HTML
  [1m[36mUser Load (0.6ms)[0m  [1mSELECT `users`.* FROM `users` WHERE `users`.`id` = 1 LIMIT 1[0m
  [1m[35mCollectionImage Load (0.5ms)[0m  SELECT `collection_images`.* FROM `collection_images` WHERE (collection_id = ) LIMIT 1
Mysql2::Error: You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near ') LIMIT 1' at line 1: SELECT  `collection_images`.* FROM `collection_images`  WHERE (collection_id = ) LIMIT 1
  Rendered collections/_collection_form.html.erb (9.0ms)
  Rendered collections/admin_new_collection.html.erb within layouts/admin (17.5ms)
Completed 500 Internal Server Error in 57ms

ActionView::Template::Error (Mysql2::Error: You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near ') LIMIT 1' at line 1: SELECT  `collection_images`.* FROM `collection_images`  WHERE (collection_id = ) LIMIT 1):
    8:         <%= f.input :description, placeholder: 'Description', input_html: { class: 'form-control' }%>
    9:         <div class="control-group">
    10:           image_tag(get_image_url(collection))
    11:           <img src="<%= @collection.image_url %>" alt="<%= @collection.name %>" class="jtooltip" title="<%= @collection.name %>" />
    12:           <%= f.label :image, 'Choose image', class: 'btn btn-default mg-bt-10 border-radius-5 form-control label_for_choose_menu' %>
    13:           <%= f.file_field :image, :name => 'collection_image[image]', :multiple => false , class: 'form-control'%>
    14:           <label class='hide collection-image-error'> <%= t('collections.please_choose_image') %> </label>
  app/models/collection.rb:27:in `image_url'
  app/views/collections/_collection_form.html.erb:11:in `block in _app_views_collections__collection_form_html_erb___3552832767113902179_70101192601220'
  app/views/collections/_collection_form.html.erb:3:in `_app_views_collections__collection_form_html_erb___3552832767113902179_70101192601220'
  app/views/collections/admin_new_collection.html.erb:14:in `_app_views_collections_admin_new_collection_html_erb__817927608510063314_70101189776980'
  app/controllers/collections_controller.rb:55:in `admin_new_collection'


  Rendered /Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_dispatch/middleware/templates/rescues/_trace.erb (1.2ms)
  Rendered /Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_dispatch/middleware/templates/rescues/_request_and_response.erb (0.9ms)
  Rendered /Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_dispatch/middleware/templates/rescues/template_error.erb within rescues/layout (42.6ms)


Started GET "/admin/collections/admin_new_collection" for 127.0.0.1 at 2016-01-17 04:13:24 +0100
Processing by CollectionsController#admin_new_collection as HTML
  [1m[36mUser Load (0.5ms)[0m  [1mSELECT `users`.* FROM `users` WHERE `users`.`id` = 1 LIMIT 1[0m
  [1m[35mCollectionImage Load (0.4ms)[0m  SELECT `collection_images`.* FROM `collection_images` WHERE (collection_id = ) LIMIT 1
Mysql2::Error: You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near ') LIMIT 1' at line 1: SELECT  `collection_images`.* FROM `collection_images`  WHERE (collection_id = ) LIMIT 1
  Rendered collections/_collection_form.html.erb (6.0ms)
  Rendered collections/admin_new_collection.html.erb within layouts/admin (7.0ms)
Completed 500 Internal Server Error in 15ms

ActionView::Template::Error (Mysql2::Error: You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near ') LIMIT 1' at line 1: SELECT  `collection_images`.* FROM `collection_images`  WHERE (collection_id = ) LIMIT 1):
    7:         <%= f.input :name, placeholder: 'Name', input_html: { class: 'form-control' } %>
    8:         <%= f.input :description, placeholder: 'Description', input_html: { class: 'form-control' }%>
    9:         <div class="control-group">
    10:           <img src="<%= @collection.image_url %>" alt="<%= @collection.name %>" class="jtooltip" title="<%= @collection.name %>" />
    11:           <%= f.label :image, 'Choose image', class: 'btn btn-default mg-bt-10 border-radius-5 form-control label_for_choose_menu' %>
    12:           <%= f.file_field :image, :name => 'collection_image[image]', :multiple => false , class: 'form-control'%>
    13:           <label class='hide collection-image-error'> <%= t('collections.please_choose_image') %> </label>
  app/models/collection.rb:27:in `image_url'
  app/views/collections/_collection_form.html.erb:10:in `block in _app_views_collections__collection_form_html_erb___3552832767113902179_70101187789400'
  app/views/collections/_collection_form.html.erb:3:in `_app_views_collections__collection_form_html_erb___3552832767113902179_70101187789400'
  app/views/collections/admin_new_collection.html.erb:14:in `_app_views_collections_admin_new_collection_html_erb__817927608510063314_70101189776980'
  app/controllers/collections_controller.rb:55:in `admin_new_collection'


  Rendered /Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_dispatch/middleware/templates/rescues/_trace.erb (1.3ms)
  Rendered /Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_dispatch/middleware/templates/rescues/_request_and_response.erb (1.1ms)
  Rendered /Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_dispatch/middleware/templates/rescues/template_error.erb within rescues/layout (45.6ms)


Started GET "/admin/collections/admin_new_collection" for 127.0.0.1 at 2016-01-17 04:13:33 +0100
Processing by CollectionsController#admin_new_collection as HTML
  [1m[36mUser Load (0.9ms)[0m  [1mSELECT `users`.* FROM `users` WHERE `users`.`id` = 1 LIMIT 1[0m
  Rendered collections/_collection_form.html.erb (8.7ms)
  Rendered collections/_collection_restaurants_form.html.erb (0.4ms)
  Rendered collections/admin_new_collection.html.erb within layouts/admin (26.9ms)
Completed 200 OK in 40ms (Views: 34.0ms | ActiveRecord: 0.9ms)


Started GET "/admin/collections/admin_new_collection" for 127.0.0.1 at 2016-01-17 04:13:54 +0100
Processing by CollectionsController#admin_new_collection as HTML
  [1m[35mUser Load (0.4ms)[0m  SELECT `users`.* FROM `users` WHERE `users`.`id` = 1 LIMIT 1
  Rendered collections/_collection_form.html.erb (24.4ms)
  Rendered collections/admin_new_collection.html.erb within layouts/admin (25.7ms)
Completed 500 Internal Server Error in 31ms

ActionView::Template::Error (undefined local variable or method `collection' for #<#<Class:0x007f83646bcf80>:0x007f836474d508>):
    7:         <%= f.input :name, placeholder: 'Name', input_html: { class: 'form-control' } %>
    8:         <%= f.input :description, placeholder: 'Description', input_html: { class: 'form-control' }%>
    9:         <div class="control-group">
    10:           <%= image_tag(get_image_url(collection)) %>
    11:           <img src="<%= @collection.image_url %>" alt="<%= @collection.name %>" class="jtooltip" title="<%= @collection.name %>" />
    12:           <%= f.label :image, 'Choose image', class: 'btn btn-default mg-bt-10 border-radius-5 form-control label_for_choose_menu' %>
    13:           <%= f.file_field :image, :name => 'collection_image[image]', :multiple => false , class: 'form-control'%>
  app/views/collections/_collection_form.html.erb:10:in `block in _app_views_collections__collection_form_html_erb___3552832767113902179_70101151365560'
  app/views/collections/_collection_form.html.erb:3:in `_app_views_collections__collection_form_html_erb___3552832767113902179_70101151365560'
  app/views/collections/admin_new_collection.html.erb:14:in `_app_views_collections_admin_new_collection_html_erb__817927608510063314_70101189776980'
  app/controllers/collections_controller.rb:55:in `admin_new_collection'


  Rendered /Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_dispatch/middleware/templates/rescues/_trace.erb (1.3ms)
  Rendered /Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_dispatch/middleware/templates/rescues/_request_and_response.erb (0.8ms)
  Rendered /Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_dispatch/middleware/templates/rescues/template_error.erb within rescues/layout (41.3ms)


Started GET "/admin/collections/admin_new_collection" for 127.0.0.1 at 2016-01-17 04:13:59 +0100
Processing by CollectionsController#admin_new_collection as HTML
  [1m[36mUser Load (0.4ms)[0m  [1mSELECT `users`.* FROM `users` WHERE `users`.`id` = 1 LIMIT 1[0m
  Rendered collections/_collection_form.html.erb (26.0ms)
  Rendered collections/admin_new_collection.html.erb within layouts/admin (27.4ms)
Completed 500 Internal Server Error in 35ms

ActionView::Template::Error (undefined local variable or method `collection' for #<#<Class:0x007f83646bcf80>:0x007f836579bd10>):
    7:         <%= f.input :name, placeholder: 'Name', input_html: { class: 'form-control' } %>
    8:         <%= f.input :description, placeholder: 'Description', input_html: { class: 'form-control' }%>
    9:         <div class="control-group">
    10:           <%= image_tag(get_image_url(collection)) %>
    11:           <%= f.label :image, 'Choose image', class: 'btn btn-default mg-bt-10 border-radius-5 form-control label_for_choose_menu' %>
    12:           <%= f.file_field :image, :name => 'collection_image[image]', :multiple => false , class: 'form-control'%>
    13:           <label class='hide collection-image-error'> <%= t('collections.please_choose_image') %> </label>
  app/views/collections/_collection_form.html.erb:10:in `block in _app_views_collections__collection_form_html_erb___3552832767113902179_70101159844560'
  app/views/collections/_collection_form.html.erb:3:in `_app_views_collections__collection_form_html_erb___3552832767113902179_70101159844560'
  app/views/collections/admin_new_collection.html.erb:14:in `_app_views_collections_admin_new_collection_html_erb__817927608510063314_70101189776980'
  app/controllers/collections_controller.rb:55:in `admin_new_collection'


  Rendered /Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_dispatch/middleware/templates/rescues/_trace.erb (1.3ms)
  Rendered /Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_dispatch/middleware/templates/rescues/_request_and_response.erb (0.9ms)
  Rendered /Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_dispatch/middleware/templates/rescues/template_error.erb within rescues/layout (43.0ms)


Started GET "/admin/collections/admin_new_collection" for 127.0.0.1 at 2016-01-17 04:14:10 +0100
Processing by CollectionsController#admin_new_collection as HTML
  [1m[35mUser Load (0.3ms)[0m  SELECT `users`.* FROM `users` WHERE `users`.`id` = 1 LIMIT 1
  Rendered collections/_collection_form.html.erb (5.8ms)
  Rendered collections/admin_new_collection.html.erb within layouts/admin (7.3ms)
Completed 500 Internal Server Error in 19ms

ActionView::Template::Error (undefined method `image' for #<Collection:0x007f8368dfc198>):
    7:         <%= f.input :name, placeholder: 'Name', input_html: { class: 'form-control' } %>
    8:         <%= f.input :description, placeholder: 'Description', input_html: { class: 'form-control' }%>
    9:         <div class="control-group">
    10:           <%= image_tag(get_image_url(@collection)) %>
    11:           <%= f.label :image, 'Choose image', class: 'btn btn-default mg-bt-10 border-radius-5 form-control label_for_choose_menu' %>
    12:           <%= f.file_field :image, :name => 'collection_image[image]', :multiple => false , class: 'form-control'%>
    13:           <label class='hide collection-image-error'> <%= t('collections.please_choose_image') %> </label>
  app/helpers/photos_helper.rb:3:in `get_image_url'
  app/views/collections/_collection_form.html.erb:10:in `block in _app_views_collections__collection_form_html_erb___3552832767113902179_70101188392020'
  app/views/collections/_collection_form.html.erb:3:in `_app_views_collections__collection_form_html_erb___3552832767113902179_70101188392020'
  app/views/collections/admin_new_collection.html.erb:14:in `_app_views_collections_admin_new_collection_html_erb__817927608510063314_70101189776980'
  app/controllers/collections_controller.rb:55:in `admin_new_collection'


  Rendered /Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_dispatch/middleware/templates/rescues/_trace.erb (1.2ms)
  Rendered /Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_dispatch/middleware/templates/rescues/_request_and_response.erb (1.0ms)
  Rendered /Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_dispatch/middleware/templates/rescues/template_error.erb within rescues/layout (48.5ms)


Started GET "/admin/collections/admin_new_collection" for 127.0.0.1 at 2016-01-17 04:15:44 +0100
Processing by CollectionsController#admin_new_collection as HTML
  [1m[36mUser Load (0.4ms)[0m  [1mSELECT `users`.* FROM `users` WHERE `users`.`id` = 1 LIMIT 1[0m
ERROR: compiling _app_views_collections__collection_form_html_erb___3552832767113902179_70101187810800 RAISED /Users/kevinmuller/halalgems_backend/app/views/collections/_collection_form.html.erb:11: syntax error, unexpected tIDENTIFIER, expecting keyword_do or '{' or '('
...safe_concat('          <img src="');@output_buffer.append= (...
...                               ^
/Users/kevinmuller/halalgems_backend/app/views/collections/_collection_form.html.erb:11: syntax error, unexpected tIDENTIFIER, expecting ')'
...utput_buffer.safe_concat('" alt="');@output_buffer.append= (...
...                               ^
/Users/kevinmuller/halalgems_backend/app/views/collections/_collection_form.html.erb:11: syntax error, unexpected keyword_class, expecting ')'
...put_buffer.safe_concat('" class="jtooltip" title="');@output...
...                               ^
/Users/kevinmuller/halalgems_backend/app/views/collections/_collection_form.html.erb:11: syntax error, unexpected tIDENTIFIER, expecting ')'
...oncat('" class="jtooltip" title="');@output_buffer.append= (...
...                               ^
/Users/kevinmuller/halalgems_backend/app/views/collections/_collection_form.html.erb:11: syntax error, unexpected '>'
/Users/kevinmuller/halalgems_backend/app/views/collections/_collection_form.html.erb:12: syntax error, unexpected tCONSTANT, expecting ')'
...pend= ( f.label :image, 'Choose image', class: 'btn btn-defa...
...                               ^
/Users/kevinmuller/halalgems_backend/app/views/collections/_collection_form.html.erb:12: syntax error, unexpected tIDENTIFIER, expecting ')'
...ge, 'Choose image', class: 'btn btn-default mg-bt-10 border-...
...                               ^
/Users/kevinmuller/halalgems_backend/app/views/collections/_collection_form.html.erb:12: syntax error, unexpected tIDENTIFIER, expecting keyword_do or '{' or '('
...ge', class: 'btn btn-default mg-bt-10 border-radius-5 form-c...
...                               ^
/Users/kevinmuller/halalgems_backend/app/views/collections/_collection_form.html.erb:12: syntax error, unexpected tIDENTIFIER, expecting ')'
...btn btn-default mg-bt-10 border-radius-5 form-control label_...
...                               ^
/Users/kevinmuller/halalgems_backend/app/views/collections/_collection_form.html.erb:12: syntax error, unexpected tIDENTIFIER, expecting ')'
...t mg-bt-10 border-radius-5 form-control label_for_choose_men...
...                               ^
/Users/kevinmuller/halalgems_backend/app/views/collections/_collection_form.html.erb:12: syntax error, unexpected tIDENTIFIER, expecting keyword_do or '{' or '('
...m-control label_for_choose_menu' );@output_buffer.safe_conca...
...                               ^
/Users/kevinmuller/halalgems_backend/app/views/collections/_collection_form.html.erb:13: syntax error, unexpected tIDENTIFIER, expecting ')'
...age, :name => 'collection_image[image]', :multiple => false ...
...                               ^
/Users/kevinmuller/halalgems_backend/app/views/collections/_collection_form.html.erb:13: syntax error, unexpected tSTRING_BEG, expecting ')'
...me => 'collection_image[image]', :multiple => false , class:...
...                               ^
/Users/kevinmuller/halalgems_backend/app/views/collections/_collection_form.html.erb:13: syntax error, unexpected tIDENTIFIER, expecting ')'
...ultiple => false , class: 'form-control');@output_buffer.saf...
...                               ^
/Users/kevinmuller/halalgems_backend/app/views/collections/_collection_form.html.erb:13: syntax error, unexpected tSTRING_BEG, expecting keyword_do or '{' or '('
...> false , class: 'form-control');@output_buffer.safe_concat('
...                               ^
/Users/kevinmuller/halalgems_backend/app/views/collections/_collection_form.html.erb:14: syntax error, unexpected keyword_class, expecting keyword_do or '{' or '('
..._concat('          <label class=\'hide collection-image-erro...
...                               ^
Function body:           def _app_views_collections__collection_form_html_erb___3552832767113902179_70101187810800(local_assigns, output_buffer)
            _old_virtual_path, @virtual_path = @virtual_path, "collections/_collection_form";_old_output_buffer = @output_buffer;collection_form = local_assigns[:collection_form];;@output_buffer = output_buffer || ActionView::OutputBuffer.new;@output_buffer.safe_concat('
<div class="form_add_new_collection">
  ');@output_buffer.append=  simple_form_for(@collection, wrapper: 'collection', :multipart => true, :validate => true) do |f| @output_buffer.safe_concat('
');@output_buffer.safe_concat('    <div class="row">
      <div class=\'col-md-4\'>
        ');@output_buffer.append= ( hidden_field_tag 'admin', true );@output_buffer.safe_concat('
');@output_buffer.safe_concat('        ');@output_buffer.append= ( f.input :name, placeholder: 'Name', input_html: { class: 'form-control' } );@output_buffer.safe_concat('
');@output_buffer.safe_concat('        ');@output_buffer.append= ( f.input :description, placeholder: 'Description', input_html: { class: 'form-control' });@output_buffer.safe_concat('
');@output_buffer.safe_concat('        <div class="control-group">
          ');@output_buffer.append= ( #image_tag(get_image_url(collection)) );@output_buffer.safe_concat('
');@output_buffer.safe_concat('          <img src="');@output_buffer.append= ( @collection.image_url );@output_buffer.safe_concat('" alt="');@output_buffer.append= ( @collection.name );@output_buffer.safe_concat('" class="jtooltip" title="');@output_buffer.append= ( @collection.name );@output_buffer.safe_concat('" />
          ');@output_buffer.append= ( f.label :image, 'Choose image', class: 'btn btn-default mg-bt-10 border-radius-5 form-control label_for_choose_menu' );@output_buffer.safe_concat('
');@output_buffer.safe_concat('          ');@output_buffer.append= ( f.file_field :image, :name => 'collection_image[image]', :multiple => false , class: 'form-control');@output_buffer.safe_concat('
');@output_buffer.safe_concat('          <label class=\'hide collection-image-error\'> ');@output_buffer.append= ( t('collections.please_choose_image') );@output_buffer.safe_concat(' </label>
        </div>
      </div>
    </div>
    <div class="backend">
      <button id=\'submit_collection\' class="btn btn-submit" type="submit">
        ');@output_buffer.append= ( t('layout.submit') );@output_buffer.safe_concat('
');@output_buffer.safe_concat('      </button>
    </div>
');   end 
@output_buffer.safe_concat('</div>

');@output_buffer.to_s
          ensure
            @virtual_path, @output_buffer = _old_virtual_path, _old_output_buffer
          end

Backtrace: /Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_view/template.rb:297:in `module_eval'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_view/template.rb:297:in `compile'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_view/template.rb:244:in `block in compile!'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_view/template.rb:232:in `synchronize'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_view/template.rb:232:in `compile!'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_view/template.rb:144:in `block in render'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/activesupport-3.2.8/lib/active_support/notifications.rb:125:in `instrument'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_view/template.rb:143:in `render'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_view/renderer/partial_renderer.rb:265:in `render_partial'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_view/renderer/partial_renderer.rb:238:in `block in render'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_view/renderer/abstract_renderer.rb:38:in `block in instrument'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/activesupport-3.2.8/lib/active_support/notifications.rb:123:in `block in instrument'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/activesupport-3.2.8/lib/active_support/notifications/instrumenter.rb:20:in `instrument'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/activesupport-3.2.8/lib/active_support/notifications.rb:123:in `instrument'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_view/renderer/abstract_renderer.rb:38:in `instrument'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/newrelic_rpm-3.7.3.204/lib/new_relic/agent/instrumentation/rails3/action_controller.rb:175:in `block in instrument_with_newrelic'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/newrelic_rpm-3.7.3.204/lib/new_relic/agent/method_tracer.rb:281:in `trace_execution_scoped'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/newrelic_rpm-3.7.3.204/lib/new_relic/agent/instrumentation/rails3/action_controller.rb:174:in `instrument_with_newrelic'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_view/renderer/partial_renderer.rb:237:in `render'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_view/renderer/renderer.rb:41:in `render_partial'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_view/helpers/rendering_helper.rb:27:in `render'
/Users/kevinmuller/halalgems_backend/app/views/collections/admin_new_collection.html.erb:14:in `_app_views_collections_admin_new_collection_html_erb__817927608510063314_70101189776980'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_view/template.rb:145:in `block in render'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/activesupport-3.2.8/lib/active_support/notifications.rb:125:in `instrument'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_view/template.rb:143:in `render'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_view/renderer/template_renderer.rb:47:in `block (2 levels) in render_template'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_view/renderer/abstract_renderer.rb:38:in `block in instrument'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/activesupport-3.2.8/lib/active_support/notifications.rb:123:in `block in instrument'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/activesupport-3.2.8/lib/active_support/notifications/instrumenter.rb:20:in `instrument'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/activesupport-3.2.8/lib/active_support/notifications.rb:123:in `instrument'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_view/renderer/abstract_renderer.rb:38:in `instrument'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_view/renderer/template_renderer.rb:46:in `block in render_template'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_view/renderer/template_renderer.rb:54:in `render_with_layout'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_view/renderer/template_renderer.rb:45:in `render_template'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_view/renderer/template_renderer.rb:18:in `render'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/newrelic_rpm-3.7.3.204/lib/new_relic/agent/instrumentation/rails3/action_controller.rb:160:in `block in render_with_newrelic'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/newrelic_rpm-3.7.3.204/lib/new_relic/agent/method_tracer.rb:281:in `trace_execution_scoped'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/newrelic_rpm-3.7.3.204/lib/new_relic/agent/instrumentation/rails3/action_controller.rb:159:in `render_with_newrelic'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_view/renderer/renderer.rb:36:in `render_template'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_view/renderer/renderer.rb:17:in `render'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/abstract_controller/rendering.rb:110:in `_render_template'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_controller/metal/streaming.rb:225:in `_render_template'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/abstract_controller/rendering.rb:103:in `render_to_body'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_controller/metal/renderers.rb:28:in `render_to_body'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_controller/metal/compatibility.rb:50:in `render_to_body'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/abstract_controller/rendering.rb:88:in `render'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_controller/metal/rendering.rb:16:in `render'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_controller/metal/instrumentation.rb:40:in `block (2 levels) in render'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/activesupport-3.2.8/lib/active_support/core_ext/benchmark.rb:5:in `block in ms'
/Users/kevinmuller/.rvm/rubies/ruby-2.2.4/lib/ruby/2.2.0/benchmark.rb:303:in `realtime'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/activesupport-3.2.8/lib/active_support/core_ext/benchmark.rb:5:in `ms'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_controller/metal/instrumentation.rb:40:in `block in render'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_controller/metal/instrumentation.rb:83:in `cleanup_view_runtime'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/activerecord-3.2.8/lib/active_record/railties/controller_runtime.rb:24:in `cleanup_view_runtime'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_controller/metal/instrumentation.rb:39:in `render'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/bundler/gems/remotipart-aadc29e996c3/lib/remotipart/render_overrides.rb:14:in `render_with_remotipart'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_controller/metal/implicit_render.rb:10:in `default_render'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_controller/metal/mime_responds.rb:196:in `respond_to'
/Users/kevinmuller/halalgems_backend/app/controllers/collections_controller.rb:55:in `admin_new_collection'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_controller/metal/implicit_render.rb:4:in `send_action'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/abstract_controller/base.rb:167:in `process_action'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_controller/metal/rendering.rb:10:in `process_action'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/abstract_controller/callbacks.rb:18:in `block in process_action'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/activesupport-3.2.8/lib/active_support/callbacks.rb:458:in `_run__4154829590817395004__process_action__653697207975831017__callbacks'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/activesupport-3.2.8/lib/active_support/callbacks.rb:405:in `__run_callback'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/activesupport-3.2.8/lib/active_support/callbacks.rb:385:in `_run_process_action_callbacks'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/activesupport-3.2.8/lib/active_support/callbacks.rb:81:in `run_callbacks'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/abstract_controller/callbacks.rb:17:in `process_action'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_controller/metal/rescue.rb:29:in `process_action'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_controller/metal/instrumentation.rb:30:in `block in process_action'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/activesupport-3.2.8/lib/active_support/notifications.rb:123:in `block in instrument'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/activesupport-3.2.8/lib/active_support/notifications/instrumenter.rb:20:in `instrument'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/activesupport-3.2.8/lib/active_support/notifications.rb:123:in `instrument'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_controller/metal/instrumentation.rb:29:in `process_action'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_controller/metal/params_wrapper.rb:207:in `process_action'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/activerecord-3.2.8/lib/active_record/railties/controller_runtime.rb:18:in `process_action'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/newrelic_rpm-3.7.3.204/lib/new_relic/agent/instrumentation/rails3/action_controller.rb:38:in `block in process_action'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/newrelic_rpm-3.7.3.204/lib/new_relic/agent/instrumentation/controller_instrumentation.rb:335:in `perform_action_with_newrelic_trace'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/newrelic_rpm-3.7.3.204/lib/new_relic/agent/instrumentation/rails3/action_controller.rb:37:in `process_action'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/abstract_controller/base.rb:121:in `process'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/abstract_controller/rendering.rb:45:in `process'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_controller/metal.rb:203:in `dispatch'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_controller/metal/rack_delegation.rb:14:in `dispatch'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_controller/metal.rb:246:in `block in action'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_dispatch/routing/route_set.rb:73:in `call'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_dispatch/routing/route_set.rb:73:in `dispatch'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_dispatch/routing/route_set.rb:36:in `call'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/journey-1.0.4/lib/journey/router.rb:68:in `block in call'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/journey-1.0.4/lib/journey/router.rb:56:in `each'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/journey-1.0.4/lib/journey/router.rb:56:in `call'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_dispatch/routing/route_set.rb:600:in `call'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/omniauth-1.1.4/lib/omniauth/strategy.rb:184:in `call!'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/omniauth-1.1.4/lib/omniauth/strategy.rb:164:in `call'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/newrelic_rpm-3.7.3.204/lib/new_relic/rack/error_collector.rb:55:in `call'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/newrelic_rpm-3.7.3.204/lib/new_relic/rack/agent_hooks.rb:32:in `call'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/newrelic_rpm-3.7.3.204/lib/new_relic/rack/browser_monitoring.rb:27:in `call'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/newrelic_rpm-3.7.3.204/lib/new_relic/rack/developer_mode.rb:45:in `call'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/galetahub-simple_captcha-0.1.5/lib/simple_captcha/middleware.rb:20:in `call'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/bundler/gems/client_side_validations-a6a515504520/lib/client_side_validations/middleware.rb:21:in `call'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/warden-1.1.1/lib/warden/manager.rb:35:in `block in call'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/warden-1.1.1/lib/warden/manager.rb:34:in `catch'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/warden-1.1.1/lib/warden/manager.rb:34:in `call'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_dispatch/middleware/best_standards_support.rb:17:in `call'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/rack-1.4.5/lib/rack/etag.rb:23:in `call'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/rack-1.4.5/lib/rack/conditionalget.rb:25:in `call'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_dispatch/middleware/head.rb:14:in `call'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/bundler/gems/remotipart-aadc29e996c3/lib/remotipart/middleware.rb:27:in `call'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_dispatch/middleware/params_parser.rb:21:in `call'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_dispatch/middleware/flash.rb:242:in `call'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/rack-1.4.5/lib/rack/session/abstract/id.rb:210:in `context'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/rack-1.4.5/lib/rack/session/abstract/id.rb:205:in `call'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_dispatch/middleware/cookies.rb:339:in `call'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/dragonfly-0.9.15/lib/dragonfly/cookie_monster.rb:9:in `call'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/activerecord-3.2.8/lib/active_record/query_cache.rb:64:in `call'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/activerecord-3.2.8/lib/active_record/connection_adapters/abstract/connection_pool.rb:473:in `call'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_dispatch/middleware/callbacks.rb:28:in `block in call'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/activesupport-3.2.8/lib/active_support/callbacks.rb:405:in `_run__664777706266228461__call__3878498479493024392__callbacks'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/activesupport-3.2.8/lib/active_support/callbacks.rb:405:in `__run_callback'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/activesupport-3.2.8/lib/active_support/callbacks.rb:385:in `_run_call_callbacks'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/activesupport-3.2.8/lib/active_support/callbacks.rb:81:in `run_callbacks'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_dispatch/middleware/callbacks.rb:27:in `call'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_dispatch/middleware/reloader.rb:65:in `call'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_dispatch/middleware/remote_ip.rb:31:in `call'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_dispatch/middleware/debug_exceptions.rb:16:in `call'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_dispatch/middleware/show_exceptions.rb:56:in `call'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/railties-3.2.8/lib/rails/rack/logger.rb:26:in `call_app'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/railties-3.2.8/lib/rails/rack/logger.rb:16:in `call'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/quiet_assets-1.0.3/lib/quiet_assets.rb:23:in `call_with_quiet_assets'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_dispatch/middleware/request_id.rb:22:in `call'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/rack-1.4.5/lib/rack/methodoverride.rb:21:in `call'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/rack-1.4.5/lib/rack/runtime.rb:17:in `call'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/activesupport-3.2.8/lib/active_support/cache/strategy/local_cache.rb:72:in `call'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/rack-1.4.5/lib/rack/lock.rb:15:in `call'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_dispatch/middleware/static.rb:62:in `call'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/dragonfly-0.9.15/lib/dragonfly/middleware.rb:13:in `call'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/rack-cache-1.2/lib/rack/cache/context.rb:136:in `forward'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/rack-cache-1.2/lib/rack/cache/context.rb:245:in `fetch'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/rack-cache-1.2/lib/rack/cache/context.rb:185:in `lookup'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/rack-cache-1.2/lib/rack/cache/context.rb:66:in `call!'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/rack-cache-1.2/lib/rack/cache/context.rb:51:in `call'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/railties-3.2.8/lib/rails/engine.rb:479:in `call'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/railties-3.2.8/lib/rails/application.rb:223:in `call'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/rack-1.4.5/lib/rack/content_length.rb:14:in `call'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/railties-3.2.8/lib/rails/rack/log_tailer.rb:17:in `call'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/rack-1.4.5/lib/rack/handler/webrick.rb:59:in `service'
/Users/kevinmuller/.rvm/rubies/ruby-2.2.4/lib/ruby/2.2.0/webrick/httpserver.rb:138:in `service'
/Users/kevinmuller/.rvm/rubies/ruby-2.2.4/lib/ruby/2.2.0/webrick/httpserver.rb:94:in `run'
/Users/kevinmuller/.rvm/rubies/ruby-2.2.4/lib/ruby/2.2.0/webrick/server.rb:294:in `block in start_thread'
  Rendered collections/_collection_form.html.erb (1.5ms)
  Rendered collections/admin_new_collection.html.erb within layouts/admin (3.2ms)
Completed 500 Internal Server Error in 11ms

ActionView::Template::Error (/Users/kevinmuller/halalgems_backend/app/views/collections/_collection_form.html.erb:11: syntax error, unexpected tIDENTIFIER, expecting keyword_do or '{' or '('
...safe_concat('          <img src="');@output_buffer.append= (...
...                               ^
/Users/kevinmuller/halalgems_backend/app/views/collections/_collection_form.html.erb:11: syntax error, unexpected tIDENTIFIER, expecting ')'
...utput_buffer.safe_concat('" alt="');@output_buffer.append= (...
...                               ^
/Users/kevinmuller/halalgems_backend/app/views/collections/_collection_form.html.erb:11: syntax error, unexpected keyword_class, expecting ')'
...put_buffer.safe_concat('" class="jtooltip" title="');@output...
...                               ^
/Users/kevinmuller/halalgems_backend/app/views/collections/_collection_form.html.erb:11: syntax error, unexpected tIDENTIFIER, expecting ')'
...oncat('" class="jtooltip" title="');@output_buffer.append= (...
...                               ^
/Users/kevinmuller/halalgems_backend/app/views/collections/_collection_form.html.erb:11: syntax error, unexpected '>'
/Users/kevinmuller/halalgems_backend/app/views/collections/_collection_form.html.erb:12: syntax error, unexpected tCONSTANT, expecting ')'
...pend= ( f.label :image, 'Choose image', class: 'btn btn-defa...
...                               ^
/Users/kevinmuller/halalgems_backend/app/views/collections/_collection_form.html.erb:12: syntax error, unexpected tIDENTIFIER, expecting ')'
...ge, 'Choose image', class: 'btn btn-default mg-bt-10 border-...
...                               ^
/Users/kevinmuller/halalgems_backend/app/views/collections/_collection_form.html.erb:12: syntax error, unexpected tIDENTIFIER, expecting keyword_do or '{' or '('
...ge', class: 'btn btn-default mg-bt-10 border-radius-5 form-c...
...                               ^
/Users/kevinmuller/halalgems_backend/app/views/collections/_collection_form.html.erb:12: syntax error, unexpected tIDENTIFIER, expecting ')'
...btn btn-default mg-bt-10 border-radius-5 form-control label_...
...                               ^
/Users/kevinmuller/halalgems_backend/app/views/collections/_collection_form.html.erb:12: syntax error, unexpected tIDENTIFIER, expecting ')'
...t mg-bt-10 border-radius-5 form-control label_for_choose_men...
...                               ^
/Users/kevinmuller/halalgems_backend/app/views/collections/_collection_form.html.erb:12: syntax error, unexpected tIDENTIFIER, expecting keyword_do or '{' or '('
...m-control label_for_choose_menu' );@output_buffer.safe_conca...
...                               ^
/Users/kevinmuller/halalgems_backend/app/views/collections/_collection_form.html.erb:13: syntax error, unexpected tIDENTIFIER, expecting ')'
...age, :name => 'collection_image[image]', :multiple => false ...
...                               ^
/Users/kevinmuller/halalgems_backend/app/views/collections/_collection_form.html.erb:13: syntax error, unexpected tSTRING_BEG, expecting ')'
...me => 'collection_image[image]', :multiple => false , class:...
...                               ^
/Users/kevinmuller/halalgems_backend/app/views/collections/_collection_form.html.erb:13: syntax error, unexpected tIDENTIFIER, expecting ')'
...ultiple => false , class: 'form-control');@output_buffer.saf...
...                               ^
/Users/kevinmuller/halalgems_backend/app/views/collections/_collection_form.html.erb:13: syntax error, unexpected tSTRING_BEG, expecting keyword_do or '{' or '('
...> false , class: 'form-control');@output_buffer.safe_concat('
...                               ^
/Users/kevinmuller/halalgems_backend/app/views/collections/_collection_form.html.erb:14: syntax error, unexpected keyword_class, expecting keyword_do or '{' or '('
..._concat('          <label class=\'hide collection-image-erro...
...                               ^):
    8:         <%= f.input :description, placeholder: 'Description', input_html: { class: 'form-control' }%>
    9:         <div class="control-group">
    10:           <%= #image_tag(get_image_url(collection)) %>
    11:           <img src="<%= @collection.image_url %>" alt="<%= @collection.name %>" class="jtooltip" title="<%= @collection.name %>" />
    12:           <%= f.label :image, 'Choose image', class: 'btn btn-default mg-bt-10 border-radius-5 form-control label_for_choose_menu' %>
    13:           <%= f.file_field :image, :name => 'collection_image[image]', :multiple => false , class: 'form-control'%>
    14:           <label class='hide collection-image-error'> <%= t('collections.please_choose_image') %> </label>
  app/views/collections/admin_new_collection.html.erb:14:in `_app_views_collections_admin_new_collection_html_erb__817927608510063314_70101189776980'
  app/controllers/collections_controller.rb:55:in `admin_new_collection'


  Rendered /Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_dispatch/middleware/templates/rescues/_trace.erb (1.0ms)
  Rendered /Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_dispatch/middleware/templates/rescues/_request_and_response.erb (0.9ms)
  Rendered /Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_dispatch/middleware/templates/rescues/template_error.erb within rescues/layout (40.7ms)


Started GET "/admin/collections/admin_new_collection" for 127.0.0.1 at 2016-01-17 04:16:00 +0100
Processing by CollectionsController#admin_new_collection as HTML
  [1m[35mUser Load (0.5ms)[0m  SELECT `users`.* FROM `users` WHERE `users`.`id` = 1 LIMIT 1
  [1m[36mCollectionImage Load (0.4ms)[0m  [1mSELECT `collection_images`.* FROM `collection_images` WHERE (collection_id = ) LIMIT 1[0m
Mysql2::Error: You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near ') LIMIT 1' at line 1: SELECT  `collection_images`.* FROM `collection_images`  WHERE (collection_id = ) LIMIT 1
  Rendered collections/_collection_form.html.erb (7.5ms)
  Rendered collections/admin_new_collection.html.erb within layouts/admin (9.1ms)
Completed 500 Internal Server Error in 17ms

ActionView::Template::Error (Mysql2::Error: You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near ') LIMIT 1' at line 1: SELECT  `collection_images`.* FROM `collection_images`  WHERE (collection_id = ) LIMIT 1):
    7:         <%= f.input :name, placeholder: 'Name', input_html: { class: 'form-control' } %>
    8:         <%= f.input :description, placeholder: 'Description', input_html: { class: 'form-control' }%>
    9:         <div class="control-group">
    10:           <img src="<%= @collection.image_url %>" alt="<%= @collection.name %>" class="jtooltip" title="<%= @collection.name %>" />
    11:           <%= f.label :image, 'Choose image', class: 'btn btn-default mg-bt-10 border-radius-5 form-control label_for_choose_menu' %>
    12:           <%= f.file_field :image, :name => 'collection_image[image]', :multiple => false , class: 'form-control'%>
    13:           <label class='hide collection-image-error'> <%= t('collections.please_choose_image') %> </label>
  app/models/collection.rb:27:in `image_url'
  app/views/collections/_collection_form.html.erb:10:in `block in _app_views_collections__collection_form_html_erb___3552832767113902179_70101187107140'
  app/views/collections/_collection_form.html.erb:3:in `_app_views_collections__collection_form_html_erb___3552832767113902179_70101187107140'
  app/views/collections/admin_new_collection.html.erb:14:in `_app_views_collections_admin_new_collection_html_erb__817927608510063314_70101189776980'
  app/controllers/collections_controller.rb:55:in `admin_new_collection'


  Rendered /Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_dispatch/middleware/templates/rescues/_trace.erb (1.3ms)
  Rendered /Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_dispatch/middleware/templates/rescues/_request_and_response.erb (0.8ms)
  Rendered /Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_dispatch/middleware/templates/rescues/template_error.erb within rescues/layout (40.7ms)


Started GET "/admin/collections/admin_new_collection" for 127.0.0.1 at 2016-01-17 04:18:07 +0100
Processing by CollectionsController#admin_new_collection as HTML
  [1m[35mUser Load (0.2ms)[0m  SELECT `users`.* FROM `users` WHERE `users`.`id` = 1 LIMIT 1
  Rendered collections/_collection_form.html.erb (5.6ms)
  Rendered collections/_collection_restaurants_form.html.erb (0.3ms)
  Rendered collections/admin_new_collection.html.erb within layouts/admin (8.1ms)
Completed 200 OK in 90ms (Views: 15.8ms | ActiveRecord: 2.1ms)


Started GET "/admin/collections/admin_new_collection" for 127.0.0.1 at 2016-01-17 04:18:39 +0100
Processing by CollectionsController#admin_new_collection as HTML
  [1m[36mUser Load (0.4ms)[0m  [1mSELECT `users`.* FROM `users` WHERE `users`.`id` = 1 LIMIT 1[0m
  Rendered collections/_collection_form.html.erb (6.1ms)
  Rendered collections/admin_new_collection.html.erb within layouts/admin (7.3ms)
Completed 500 Internal Server Error in 13ms

ActionView::Template::Error (undefined method `image' for #<Collection:0x007f8369242248>):
    7:         <%= f.input :name, placeholder: 'Name', input_html: { class: 'form-control' } %>
    8:         <%= f.input :description, placeholder: 'Description', input_html: { class: 'form-control' }%>
    9:         <div class="control-group">
    10:           <%= image_tag(get_image_url(@collection)) %>
    11:           <img src="<%= @collection.image_url %>" alt="<%= @collection.name %>" class="jtooltip" title="<%= @collection.name %>" />
    12:           <%= f.label :image, 'Choose image', class: 'btn btn-default mg-bt-10 border-radius-5 form-control label_for_choose_menu' %>
    13:           <%= f.file_field :image, :name => 'collection_image[image]', :multiple => false , class: 'form-control'%>
  app/helpers/photos_helper.rb:3:in `get_image_url'
  app/views/collections/_collection_form.html.erb:10:in `block in _app_views_collections__collection_form_html_erb___3552832767113902179_70101187566640'
  app/views/collections/_collection_form.html.erb:3:in `_app_views_collections__collection_form_html_erb___3552832767113902179_70101187566640'
  app/views/collections/admin_new_collection.html.erb:14:in `_app_views_collections_admin_new_collection_html_erb__817927608510063314_70101189776980'
  app/controllers/collections_controller.rb:55:in `admin_new_collection'


  Rendered /Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_dispatch/middleware/templates/rescues/_trace.erb (1.1ms)
  Rendered /Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_dispatch/middleware/templates/rescues/_request_and_response.erb (0.8ms)
  Rendered /Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_dispatch/middleware/templates/rescues/template_error.erb within rescues/layout (42.9ms)


Started GET "/admin/collections/admin_new_collection" for 127.0.0.1 at 2016-01-17 04:20:19 +0100
Processing by CollectionsController#admin_new_collection as HTML
  [1m[35mUser Load (0.4ms)[0m  SELECT `users`.* FROM `users` WHERE `users`.`id` = 1 LIMIT 1
  Rendered collections/_collection_form.html.erb (5.0ms)
  Rendered collections/_collection_restaurants_form.html.erb (0.3ms)
  Rendered collections/admin_new_collection.html.erb within layouts/admin (6.9ms)
Completed 200 OK in 16ms (Views: 13.9ms | ActiveRecord: 0.4ms)


Started GET "/admin/restaurants" for 127.0.0.1 at 2016-01-17 04:20:32 +0100
  [1m[36m (0.2ms)[0m  [1mSELECT COUNT(*) FROM `filter_types` WHERE (code = 'features')[0m
  [1m[35m (0.2ms)[0m  SELECT COUNT(*) FROM `filters` WHERE (code = 'offer')
  [1m[36mFilter Load (0.2ms)[0m  [1mSELECT `filters`.* FROM `filters` WHERE (code = 'offer') LIMIT 1[0m
  [1m[35mFilterType Load (0.2ms)[0m  SELECT `filter_types`.* FROM `filter_types` WHERE (code = 'features') LIMIT 1
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT `filters`.* FROM `filters` WHERE (code = 'offer') LIMIT 1[0m
  [1m[35mCACHE (0.0ms)[0m  SELECT `filter_types`.* FROM `filter_types` WHERE (code = 'features') LIMIT 1
Processing by RestaurantsController#index as HTML
  [1m[36mUser Load (0.4ms)[0m  [1mSELECT `users`.* FROM `users` WHERE `users`.`id` = 1 LIMIT 1[0m
  Rendered shared/_restaurant_manage_tabs.html.erb (0.7ms)
  Rendered restaurants/_condition_fields.html.erb (22.6ms)
  [1m[35mRestaurant Load (0.9ms)[0m  SELECT `restaurants`.* FROM `restaurants` ORDER BY disabled ASC,created_at DESC LIMIT 12 OFFSET 0
  [1m[36mPhoto Load (0.4ms)[0m  [1mSELECT `photos`.* FROM `photos` WHERE (restaurant_id = 1057 and cover = true and status = 1) LIMIT 1[0m
  [1m[35mPhoto Load (0.3ms)[0m  SELECT `photos`.* FROM `photos` WHERE `photos`.`restaurant_id` = 1057 AND `photos`.`status` = 1 ORDER BY restaurant_id ASC, created_at DESC LIMIT 1
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT `photos`.* FROM `photos` WHERE (restaurant_id = 1057 and cover = true and status = 1) LIMIT 1[0m
  [1m[35mCACHE (0.0ms)[0m  SELECT `photos`.* FROM `photos` WHERE `photos`.`restaurant_id` = 1057 AND `photos`.`status` = 1 ORDER BY restaurant_id ASC, created_at DESC LIMIT 1
  [1m[36mPhoto Load (0.5ms)[0m  [1mSELECT `photos`.* FROM `photos` WHERE (restaurant_id = 903 and cover = true and status = 1) LIMIT 1[0m
  [1m[35mPhoto Load (0.4ms)[0m  SELECT `photos`.* FROM `photos` WHERE `photos`.`restaurant_id` = 903 AND `photos`.`status` = 1 ORDER BY restaurant_id ASC, created_at DESC LIMIT 1
  [1m[36mPhoto Load (0.3ms)[0m  [1mSELECT `photos`.* FROM `photos` WHERE (restaurant_id = 876 and cover = true and status = 1) LIMIT 1[0m
  [1m[35mPhoto Load (0.3ms)[0m  SELECT `photos`.* FROM `photos` WHERE `photos`.`restaurant_id` = 876 AND `photos`.`status` = 1 ORDER BY restaurant_id ASC, created_at DESC LIMIT 1
  [1m[36mPhoto Load (0.4ms)[0m  [1mSELECT `photos`.* FROM `photos` WHERE (restaurant_id = 851 and cover = true and status = 1) LIMIT 1[0m
  [1m[35mPhoto Load (0.3ms)[0m  SELECT `photos`.* FROM `photos` WHERE `photos`.`restaurant_id` = 851 AND `photos`.`status` = 1 ORDER BY restaurant_id ASC, created_at DESC LIMIT 1
  [1m[36mPhoto Load (0.5ms)[0m  [1mSELECT `photos`.* FROM `photos` WHERE (restaurant_id = 693 and cover = true and status = 1) LIMIT 1[0m
  [1m[35mPhoto Load (0.3ms)[0m  SELECT `photos`.* FROM `photos` WHERE `photos`.`restaurant_id` = 693 AND `photos`.`status` = 1 ORDER BY restaurant_id ASC, created_at DESC LIMIT 1
  [1m[36mPhoto Load (0.3ms)[0m  [1mSELECT `photos`.* FROM `photos` WHERE (restaurant_id = 686 and cover = true and status = 1) LIMIT 1[0m
  [1m[35mPhoto Load (0.3ms)[0m  SELECT `photos`.* FROM `photos` WHERE `photos`.`restaurant_id` = 686 AND `photos`.`status` = 1 ORDER BY restaurant_id ASC, created_at DESC LIMIT 1
  [1m[36mPhoto Load (0.3ms)[0m  [1mSELECT `photos`.* FROM `photos` WHERE (restaurant_id = 669 and cover = true and status = 1) LIMIT 1[0m
  [1m[35mPhoto Load (0.3ms)[0m  SELECT `photos`.* FROM `photos` WHERE `photos`.`restaurant_id` = 669 AND `photos`.`status` = 1 ORDER BY restaurant_id ASC, created_at DESC LIMIT 1
  [1m[36mPhoto Load (0.3ms)[0m  [1mSELECT `photos`.* FROM `photos` WHERE (restaurant_id = 251 and cover = true and status = 1) LIMIT 1[0m
  [1m[35mPhoto Load (0.3ms)[0m  SELECT `photos`.* FROM `photos` WHERE `photos`.`restaurant_id` = 251 AND `photos`.`status` = 1 ORDER BY restaurant_id ASC, created_at DESC LIMIT 1
  [1m[36mPhoto Load (0.4ms)[0m  [1mSELECT `photos`.* FROM `photos` WHERE (restaurant_id = 250 and cover = true and status = 1) LIMIT 1[0m
  [1m[35mPhoto Load (0.3ms)[0m  SELECT `photos`.* FROM `photos` WHERE `photos`.`restaurant_id` = 250 AND `photos`.`status` = 1 ORDER BY restaurant_id ASC, created_at DESC LIMIT 1
  [1m[36mPhoto Load (0.3ms)[0m  [1mSELECT `photos`.* FROM `photos` WHERE (restaurant_id = 237 and cover = true and status = 1) LIMIT 1[0m
  [1m[35mPhoto Load (0.3ms)[0m  SELECT `photos`.* FROM `photos` WHERE `photos`.`restaurant_id` = 237 AND `photos`.`status` = 1 ORDER BY restaurant_id ASC, created_at DESC LIMIT 1
  [1m[36mPhoto Load (0.4ms)[0m  [1mSELECT `photos`.* FROM `photos` WHERE (restaurant_id = 231 and cover = true and status = 1) LIMIT 1[0m
  [1m[35mPhoto Load (0.3ms)[0m  SELECT `photos`.* FROM `photos` WHERE `photos`.`restaurant_id` = 231 AND `photos`.`status` = 1 ORDER BY restaurant_id ASC, created_at DESC LIMIT 1
  [1m[36mPhoto Load (0.3ms)[0m  [1mSELECT `photos`.* FROM `photos` WHERE (restaurant_id = 222 and cover = true and status = 1) LIMIT 1[0m
  [1m[35mPhoto Load (0.3ms)[0m  SELECT `photos`.* FROM `photos` WHERE `photos`.`restaurant_id` = 222 AND `photos`.`status` = 1 ORDER BY restaurant_id ASC, created_at DESC LIMIT 1
  [1m[36m (0.4ms)[0m  [1mSELECT COUNT(*) FROM `restaurants` [0m
  Rendered restaurants/index.html.erb within layouts/admin (177.9ms)
Completed 200 OK in 198ms (Views: 183.5ms | ActiveRecord: 11.4ms)


Started GET "/admin/collections" for 127.0.0.1 at 2016-01-17 04:21:17 +0100
Processing by CollectionsController#index as HTML
  Rendered shared/_restaurant_manage_tabs.html.erb (1.1ms)
  [1m[35mCollection Load (0.4ms)[0m  SELECT `collections`.* FROM `collections` ORDER BY name ASC, created_at DESC LIMIT 12 OFFSET 0
  [1m[36mCollectionImage Load (0.2ms)[0m  [1mSELECT `collection_images`.* FROM `collection_images` WHERE (collection_id = 16) LIMIT 1[0m
  [1m[35mCollectionImage Load (0.3ms)[0m  SELECT `collection_images`.* FROM `collection_images` WHERE (collection_id = 17) LIMIT 1
  [1m[36mCollectionImage Load (0.2ms)[0m  [1mSELECT `collection_images`.* FROM `collection_images` WHERE (collection_id = 18) LIMIT 1[0m
  [1m[35mCollectionImage Load (0.2ms)[0m  SELECT `collection_images`.* FROM `collection_images` WHERE (collection_id = 15) LIMIT 1
  [1m[36mCollectionImage Load (0.2ms)[0m  [1mSELECT `collection_images`.* FROM `collection_images` WHERE (collection_id = 19) LIMIT 1[0m
  [1m[35mCollectionImage Load (0.2ms)[0m  SELECT `collection_images`.* FROM `collection_images` WHERE (collection_id = 21) LIMIT 1
  [1m[36mCollectionImage Load (0.2ms)[0m  [1mSELECT `collection_images`.* FROM `collection_images` WHERE (collection_id = 22) LIMIT 1[0m
  [1m[35mCollectionImage Load (0.2ms)[0m  SELECT `collection_images`.* FROM `collection_images` WHERE (collection_id = 20) LIMIT 1
  [1m[36m (0.2ms)[0m  [1mSELECT COUNT(*) FROM `collections` [0m
  Rendered collections/index.erb within layouts/admin (58.6ms)
  [1m[35mUser Load (0.4ms)[0m  SELECT `users`.* FROM `users` WHERE `users`.`id` = 1 LIMIT 1
Completed 200 OK in 83ms (Views: 78.2ms | ActiveRecord: 3.6ms)


Started GET "/collection/17/edit" for 127.0.0.1 at 2016-01-17 04:21:22 +0100
Processing by CollectionsController#edit_collection as HTML
  Parameters: {"id"=>"17"}
  [1m[36mUser Load (0.4ms)[0m  [1mSELECT `users`.* FROM `users` WHERE `users`.`id` = 1 LIMIT 1[0m
  [1m[35mCollection Load (0.3ms)[0m  SELECT `collections`.* FROM `collections` WHERE `collections`.`id` = 17 LIMIT 1
  [1m[36mCollectionImage Load (0.4ms)[0m  [1mSELECT `collection_images`.* FROM `collection_images` WHERE (collection_id = 17) LIMIT 1[0m
  Rendered collections/_collection_form.html.erb (11.1ms)
  Rendered collections/_collection_restaurants_form.html.erb (0.3ms)
  Rendered collections/edit_collection.html.erb within layouts/admin (27.4ms)
Completed 200 OK in 43ms (Views: 36.6ms | ActiveRecord: 1.0ms)


Started PUT "/admin/collections/17" for 127.0.0.1 at 2016-01-17 04:21:35 +0100
Processing by CollectionsController#update as HTML
  Parameters: {"utf8"=>"âœ“", "authenticity_token"=>"RUljBeFq2Kuk53sFNS/nHZPaIO2p/6bajboSTDM6gqE=", "admin"=>"true", "collection"=>{"name"=>"abc123b", "description"=>"asdfgadfadf"}, "collection_image"=>{"image"=>#<ActionDispatch::Http::UploadedFile:0x007f83694c8648 @original_filename="indian.png", @content_type="image/png", @headers="Content-Disposition: form-data; name=\"collection_image[image]\"; filename=\"indian.png\"\r\nContent-Type: image/png\r\n", @tempfile=#<Tempfile:/var/folders/rf/q4l8n5k56pnbjgkdtzrhq_w00000gn/T/RackMultipart20160117-28269-1ujovtl>>}, "id"=>"17"}
  [1m[35mUser Load (0.4ms)[0m  SELECT `users`.* FROM `users` WHERE `users`.`id` = 1 LIMIT 1
  [1m[36mCollection Load (0.2ms)[0m  [1mSELECT `collections`.* FROM `collections` WHERE `collections`.`id` = 17 LIMIT 1[0m
  [1m[35m (0.1ms)[0m  BEGIN
  [1m[36m (0.1ms)[0m  [1mCOMMIT[0m
Redirected to http://localhost:3000/collection/17/edit
Completed 302 Found in 7ms (ActiveRecord: 0.8ms)


Started GET "/collection/17/edit" for 127.0.0.1 at 2016-01-17 04:21:36 +0100
Processing by CollectionsController#edit_collection as HTML
  Parameters: {"id"=>"17"}
  [1m[35mUser Load (0.3ms)[0m  SELECT `users`.* FROM `users` WHERE `users`.`id` = 1 LIMIT 1
  [1m[36mCollection Load (0.2ms)[0m  [1mSELECT `collections`.* FROM `collections` WHERE `collections`.`id` = 17 LIMIT 1[0m
  [1m[35mCollectionImage Load (0.3ms)[0m  SELECT `collection_images`.* FROM `collection_images` WHERE (collection_id = 17) LIMIT 1
  Rendered collections/_collection_form.html.erb (8.0ms)
  Rendered collections/_collection_restaurants_form.html.erb (0.3ms)
  Rendered collections/edit_collection.html.erb within layouts/admin (10.1ms)
Completed 200 OK in 21ms (Views: 16.4ms | ActiveRecord: 0.7ms)


Started GET "/collection/17/edit" for 127.0.0.1 at 2016-01-17 04:21:39 +0100
Processing by CollectionsController#edit_collection as HTML
  Parameters: {"id"=>"17"}
  [1m[36mUser Load (0.5ms)[0m  [1mSELECT `users`.* FROM `users` WHERE `users`.`id` = 1 LIMIT 1[0m
  [1m[35mCollection Load (0.3ms)[0m  SELECT `collections`.* FROM `collections` WHERE `collections`.`id` = 17 LIMIT 1
  [1m[36mCollectionImage Load (0.3ms)[0m  [1mSELECT `collection_images`.* FROM `collection_images` WHERE (collection_id = 17) LIMIT 1[0m
  Rendered collections/_collection_form.html.erb (8.4ms)
  Rendered collections/_collection_restaurants_form.html.erb (0.4ms)
  Rendered collections/edit_collection.html.erb within layouts/admin (11.2ms)
Completed 200 OK in 25ms (Views: 20.1ms | ActiveRecord: 1.0ms)


Started GET "/collection/17/edit" for 127.0.0.1 at 2016-01-17 04:24:58 +0100
Processing by CollectionsController#edit_collection as HTML
  Parameters: {"id"=>"17"}
  [1m[35mUser Load (0.4ms)[0m  SELECT `users`.* FROM `users` WHERE `users`.`id` = 1 LIMIT 1
  [1m[36mCollection Load (0.2ms)[0m  [1mSELECT `collections`.* FROM `collections` WHERE `collections`.`id` = 17 LIMIT 1[0m
  [1m[35mCollectionImage Load (0.2ms)[0m  SELECT `collection_images`.* FROM `collection_images` WHERE (collection_id = 17) LIMIT 1
  Rendered collections/_collection_form.html.erb (46.5ms)
  Rendered collections/_collection_restaurants_form.html.erb (0.4ms)
  Rendered collections/edit_collection.html.erb within layouts/admin (48.8ms)
Completed 200 OK in 246ms (Views: 58.4ms | ActiveRecord: 3.9ms)


Started GET "/admin/restaurants" for 127.0.0.1 at 2016-01-17 04:25:14 +0100
  [1m[36m (0.2ms)[0m  [1mSELECT COUNT(*) FROM `filter_types` WHERE (code = 'features')[0m
  [1m[35m (0.2ms)[0m  SELECT COUNT(*) FROM `filters` WHERE (code = 'offer')
  [1m[36mFilter Load (0.2ms)[0m  [1mSELECT `filters`.* FROM `filters` WHERE (code = 'offer') LIMIT 1[0m
  [1m[35mFilterType Load (0.2ms)[0m  SELECT `filter_types`.* FROM `filter_types` WHERE (code = 'features') LIMIT 1
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT `filters`.* FROM `filters` WHERE (code = 'offer') LIMIT 1[0m
  [1m[35mCACHE (0.0ms)[0m  SELECT `filter_types`.* FROM `filter_types` WHERE (code = 'features') LIMIT 1
Processing by RestaurantsController#index as HTML
  [1m[36mUser Load (0.4ms)[0m  [1mSELECT `users`.* FROM `users` WHERE `users`.`id` = 1 LIMIT 1[0m
  Rendered shared/_restaurant_manage_tabs.html.erb (0.8ms)
  Rendered restaurants/_condition_fields.html.erb (14.0ms)
  [1m[35mRestaurant Load (0.8ms)[0m  SELECT `restaurants`.* FROM `restaurants` ORDER BY disabled ASC,created_at DESC LIMIT 12 OFFSET 0
  [1m[36mPhoto Load (0.4ms)[0m  [1mSELECT `photos`.* FROM `photos` WHERE (restaurant_id = 1057 and cover = true and status = 1) LIMIT 1[0m
  [1m[35mPhoto Load (0.3ms)[0m  SELECT `photos`.* FROM `photos` WHERE `photos`.`restaurant_id` = 1057 AND `photos`.`status` = 1 ORDER BY restaurant_id ASC, created_at DESC LIMIT 1
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT `photos`.* FROM `photos` WHERE (restaurant_id = 1057 and cover = true and status = 1) LIMIT 1[0m
  [1m[35mCACHE (0.0ms)[0m  SELECT `photos`.* FROM `photos` WHERE `photos`.`restaurant_id` = 1057 AND `photos`.`status` = 1 ORDER BY restaurant_id ASC, created_at DESC LIMIT 1
  [1m[36mPhoto Load (0.5ms)[0m  [1mSELECT `photos`.* FROM `photos` WHERE (restaurant_id = 903 and cover = true and status = 1) LIMIT 1[0m
  [1m[35mPhoto Load (0.3ms)[0m  SELECT `photos`.* FROM `photos` WHERE `photos`.`restaurant_id` = 903 AND `photos`.`status` = 1 ORDER BY restaurant_id ASC, created_at DESC LIMIT 1
  [1m[36mPhoto Load (0.7ms)[0m  [1mSELECT `photos`.* FROM `photos` WHERE (restaurant_id = 876 and cover = true and status = 1) LIMIT 1[0m
  [1m[35mPhoto Load (0.4ms)[0m  SELECT `photos`.* FROM `photos` WHERE `photos`.`restaurant_id` = 876 AND `photos`.`status` = 1 ORDER BY restaurant_id ASC, created_at DESC LIMIT 1
  [1m[36mPhoto Load (0.3ms)[0m  [1mSELECT `photos`.* FROM `photos` WHERE (restaurant_id = 851 and cover = true and status = 1) LIMIT 1[0m
  [1m[35mPhoto Load (0.3ms)[0m  SELECT `photos`.* FROM `photos` WHERE `photos`.`restaurant_id` = 851 AND `photos`.`status` = 1 ORDER BY restaurant_id ASC, created_at DESC LIMIT 1
  [1m[36mPhoto Load (0.6ms)[0m  [1mSELECT `photos`.* FROM `photos` WHERE (restaurant_id = 693 and cover = true and status = 1) LIMIT 1[0m
  [1m[35mPhoto Load (0.3ms)[0m  SELECT `photos`.* FROM `photos` WHERE `photos`.`restaurant_id` = 693 AND `photos`.`status` = 1 ORDER BY restaurant_id ASC, created_at DESC LIMIT 1
  [1m[36mPhoto Load (0.4ms)[0m  [1mSELECT `photos`.* FROM `photos` WHERE (restaurant_id = 686 and cover = true and status = 1) LIMIT 1[0m
  [1m[35mPhoto Load (0.3ms)[0m  SELECT `photos`.* FROM `photos` WHERE `photos`.`restaurant_id` = 686 AND `photos`.`status` = 1 ORDER BY restaurant_id ASC, created_at DESC LIMIT 1
  [1m[36mPhoto Load (0.4ms)[0m  [1mSELECT `photos`.* FROM `photos` WHERE (restaurant_id = 669 and cover = true and status = 1) LIMIT 1[0m
  [1m[35mPhoto Load (0.5ms)[0m  SELECT `photos`.* FROM `photos` WHERE `photos`.`restaurant_id` = 669 AND `photos`.`status` = 1 ORDER BY restaurant_id ASC, created_at DESC LIMIT 1
  [1m[36mPhoto Load (0.4ms)[0m  [1mSELECT `photos`.* FROM `photos` WHERE (restaurant_id = 251 and cover = true and status = 1) LIMIT 1[0m
  [1m[35mPhoto Load (0.3ms)[0m  SELECT `photos`.* FROM `photos` WHERE `photos`.`restaurant_id` = 251 AND `photos`.`status` = 1 ORDER BY restaurant_id ASC, created_at DESC LIMIT 1
  [1m[36mPhoto Load (0.4ms)[0m  [1mSELECT `photos`.* FROM `photos` WHERE (restaurant_id = 250 and cover = true and status = 1) LIMIT 1[0m
  [1m[35mPhoto Load (0.6ms)[0m  SELECT `photos`.* FROM `photos` WHERE `photos`.`restaurant_id` = 250 AND `photos`.`status` = 1 ORDER BY restaurant_id ASC, created_at DESC LIMIT 1
  [1m[36mPhoto Load (0.4ms)[0m  [1mSELECT `photos`.* FROM `photos` WHERE (restaurant_id = 237 and cover = true and status = 1) LIMIT 1[0m
  [1m[35mPhoto Load (0.4ms)[0m  SELECT `photos`.* FROM `photos` WHERE `photos`.`restaurant_id` = 237 AND `photos`.`status` = 1 ORDER BY restaurant_id ASC, created_at DESC LIMIT 1
  [1m[36mPhoto Load (0.4ms)[0m  [1mSELECT `photos`.* FROM `photos` WHERE (restaurant_id = 231 and cover = true and status = 1) LIMIT 1[0m
  [1m[35mPhoto Load (0.4ms)[0m  SELECT `photos`.* FROM `photos` WHERE `photos`.`restaurant_id` = 231 AND `photos`.`status` = 1 ORDER BY restaurant_id ASC, created_at DESC LIMIT 1
  [1m[36mPhoto Load (0.4ms)[0m  [1mSELECT `photos`.* FROM `photos` WHERE (restaurant_id = 222 and cover = true and status = 1) LIMIT 1[0m
  [1m[35mPhoto Load (0.3ms)[0m  SELECT `photos`.* FROM `photos` WHERE `photos`.`restaurant_id` = 222 AND `photos`.`status` = 1 ORDER BY restaurant_id ASC, created_at DESC LIMIT 1
  [1m[36m (0.4ms)[0m  [1mSELECT COUNT(*) FROM `restaurants` [0m
  Rendered restaurants/index.html.erb within layouts/admin (193.9ms)
Completed 200 OK in 222ms (Views: 204.7ms | ActiveRecord: 13.9ms)


Started GET "/admin/restaurants/admin_new" for 127.0.0.1 at 2016-01-17 04:25:17 +0100
Processing by RestaurantsController#admin_new as HTML
  [1m[35mUser Load (0.3ms)[0m  SELECT `users`.* FROM `users` WHERE `users`.`id` = 1 LIMIT 1
  [1m[36m (1.4ms)[0m  [1mSELECT `filters`.id FROM `filters` INNER JOIN `filters_restaurants` ON `filters`.`id` = `filters_restaurants`.`filter_id` WHERE `filters_restaurants`.`restaurant_id` IS NULL[0m
  [1m[35mFilterType Load (0.2ms)[0m  SELECT `filter_types`.* FROM `filter_types` WHERE `filter_types`.`code` = 'hal_status' LIMIT 1
  [1m[36mFilterType Load (0.2ms)[0m  [1mSELECT `filter_types`.* FROM `filter_types` WHERE `filter_types`.`code` = 'price' LIMIT 1[0m
  [1m[35mFilterType Load (0.1ms)[0m  SELECT `filter_types`.* FROM `filter_types` WHERE `filter_types`.`code` = 'cuisine' LIMIT 1
  [1m[36mFilterType Load (0.2ms)[0m  [1mSELECT `filter_types`.* FROM `filter_types` WHERE `filter_types`.`code` = 'alcohol' LIMIT 1[0m
  [1m[35mFilterType Load (0.2ms)[0m  SELECT `filter_types`.* FROM `filter_types` WHERE `filter_types`.`code` = 'features' LIMIT 1
  Rendered restaurants/_googlemap.html.erb (0.6ms)
  [1m[36mFilter Load (0.3ms)[0m  [1mSELECT `filters`.* FROM `filters` WHERE `filters`.`filter_type_id` = 8[0m
  [1m[35mFilter Load (0.5ms)[0m  SELECT `filters`.* FROM `filters` WHERE `filters`.`filter_type_id` = 1 ORDER BY name ASC
  [1m[36mFilter Load (0.2ms)[0m  [1mSELECT `filters`.* FROM `filters` WHERE `filters`.`filter_type_id` = 4[0m
  [1m[35mFilter Load (0.2ms)[0m  SELECT `filters`.* FROM `filters` WHERE `filters`.`filter_type_id` = 6
  [1m[36mFilter Load (0.2ms)[0m  [1mSELECT `filters`.* FROM `filters` WHERE `filters`.`filter_type_id` = 11 AND (code != 'offer')[0m
  Rendered restaurants/_admin_form.html.erb (95.6ms)
  Rendered restaurants/_upload_menu.html.erb (3.4ms)
  Rendered restaurants/_upload_photos.html.erb (2.0ms)
  Rendered restaurants/admin_new.html.erb within layouts/admin (109.7ms)
Completed 200 OK in 386ms (Views: 115.5ms | ActiveRecord: 6.8ms)


Started GET "/admin/restaurants" for 127.0.0.1 at 2016-01-17 04:25:19 +0100
Processing by RestaurantsController#index as HTML
  [1m[35mUser Load (0.4ms)[0m  SELECT `users`.* FROM `users` WHERE `users`.`id` = 1 LIMIT 1
  Rendered shared/_restaurant_manage_tabs.html.erb (0.7ms)
  Rendered restaurants/_condition_fields.html.erb (10.5ms)
  [1m[36mRestaurant Load (1.0ms)[0m  [1mSELECT `restaurants`.* FROM `restaurants` ORDER BY disabled ASC,created_at DESC LIMIT 12 OFFSET 0[0m
  [1m[35mPhoto Load (0.4ms)[0m  SELECT `photos`.* FROM `photos` WHERE (restaurant_id = 1057 and cover = true and status = 1) LIMIT 1
  [1m[36mPhoto Load (0.3ms)[0m  [1mSELECT `photos`.* FROM `photos` WHERE `photos`.`restaurant_id` = 1057 AND `photos`.`status` = 1 ORDER BY restaurant_id ASC, created_at DESC LIMIT 1[0m
  [1m[35mCACHE (0.0ms)[0m  SELECT `photos`.* FROM `photos` WHERE (restaurant_id = 1057 and cover = true and status = 1) LIMIT 1
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT `photos`.* FROM `photos` WHERE `photos`.`restaurant_id` = 1057 AND `photos`.`status` = 1 ORDER BY restaurant_id ASC, created_at DESC LIMIT 1[0m
  [1m[35mPhoto Load (0.4ms)[0m  SELECT `photos`.* FROM `photos` WHERE (restaurant_id = 903 and cover = true and status = 1) LIMIT 1
  [1m[36mPhoto Load (0.3ms)[0m  [1mSELECT `photos`.* FROM `photos` WHERE `photos`.`restaurant_id` = 903 AND `photos`.`status` = 1 ORDER BY restaurant_id ASC, created_at DESC LIMIT 1[0m
  [1m[35mPhoto Load (0.4ms)[0m  SELECT `photos`.* FROM `photos` WHERE (restaurant_id = 876 and cover = true and status = 1) LIMIT 1
  [1m[36mPhoto Load (0.5ms)[0m  [1mSELECT `photos`.* FROM `photos` WHERE `photos`.`restaurant_id` = 876 AND `photos`.`status` = 1 ORDER BY restaurant_id ASC, created_at DESC LIMIT 1[0m
  [1m[35mPhoto Load (0.3ms)[0m  SELECT `photos`.* FROM `photos` WHERE (restaurant_id = 851 and cover = true and status = 1) LIMIT 1
  [1m[36mPhoto Load (0.3ms)[0m  [1mSELECT `photos`.* FROM `photos` WHERE `photos`.`restaurant_id` = 851 AND `photos`.`status` = 1 ORDER BY restaurant_id ASC, created_at DESC LIMIT 1[0m
  [1m[35mPhoto Load (0.4ms)[0m  SELECT `photos`.* FROM `photos` WHERE (restaurant_id = 693 and cover = true and status = 1) LIMIT 1
  [1m[36mPhoto Load (0.3ms)[0m  [1mSELECT `photos`.* FROM `photos` WHERE `photos`.`restaurant_id` = 693 AND `photos`.`status` = 1 ORDER BY restaurant_id ASC, created_at DESC LIMIT 1[0m
  [1m[35mPhoto Load (0.5ms)[0m  SELECT `photos`.* FROM `photos` WHERE (restaurant_id = 686 and cover = true and status = 1) LIMIT 1
  [1m[36mPhoto Load (0.3ms)[0m  [1mSELECT `photos`.* FROM `photos` WHERE `photos`.`restaurant_id` = 686 AND `photos`.`status` = 1 ORDER BY restaurant_id ASC, created_at DESC LIMIT 1[0m
  [1m[35mPhoto Load (0.3ms)[0m  SELECT `photos`.* FROM `photos` WHERE (restaurant_id = 669 and cover = true and status = 1) LIMIT 1
  [1m[36mPhoto Load (0.3ms)[0m  [1mSELECT `photos`.* FROM `photos` WHERE `photos`.`restaurant_id` = 669 AND `photos`.`status` = 1 ORDER BY restaurant_id ASC, created_at DESC LIMIT 1[0m
  [1m[35mPhoto Load (0.4ms)[0m  SELECT `photos`.* FROM `photos` WHERE (restaurant_id = 251 and cover = true and status = 1) LIMIT 1
  [1m[36mPhoto Load (0.3ms)[0m  [1mSELECT `photos`.* FROM `photos` WHERE `photos`.`restaurant_id` = 251 AND `photos`.`status` = 1 ORDER BY restaurant_id ASC, created_at DESC LIMIT 1[0m
  [1m[35mPhoto Load (0.4ms)[0m  SELECT `photos`.* FROM `photos` WHERE (restaurant_id = 250 and cover = true and status = 1) LIMIT 1
  [1m[36mPhoto Load (0.3ms)[0m  [1mSELECT `photos`.* FROM `photos` WHERE `photos`.`restaurant_id` = 250 AND `photos`.`status` = 1 ORDER BY restaurant_id ASC, created_at DESC LIMIT 1[0m
  [1m[35mPhoto Load (0.3ms)[0m  SELECT `photos`.* FROM `photos` WHERE (restaurant_id = 237 and cover = true and status = 1) LIMIT 1
  [1m[36mPhoto Load (0.4ms)[0m  [1mSELECT `photos`.* FROM `photos` WHERE `photos`.`restaurant_id` = 237 AND `photos`.`status` = 1 ORDER BY restaurant_id ASC, created_at DESC LIMIT 1[0m
  [1m[35mPhoto Load (0.4ms)[0m  SELECT `photos`.* FROM `photos` WHERE (restaurant_id = 231 and cover = true and status = 1) LIMIT 1
  [1m[36mPhoto Load (0.3ms)[0m  [1mSELECT `photos`.* FROM `photos` WHERE `photos`.`restaurant_id` = 231 AND `photos`.`status` = 1 ORDER BY restaurant_id ASC, created_at DESC LIMIT 1[0m
  [1m[35mPhoto Load (0.3ms)[0m  SELECT `photos`.* FROM `photos` WHERE (restaurant_id = 222 and cover = true and status = 1) LIMIT 1
  [1m[36mPhoto Load (0.3ms)[0m  [1mSELECT `photos`.* FROM `photos` WHERE `photos`.`restaurant_id` = 222 AND `photos`.`status` = 1 ORDER BY restaurant_id ASC, created_at DESC LIMIT 1[0m
  [1m[35m (0.3ms)[0m  SELECT COUNT(*) FROM `restaurants` 
  Rendered restaurants/index.html.erb within layouts/admin (89.1ms)
Completed 200 OK in 97ms (Views: 84.8ms | ActiveRecord: 10.1ms)


Started GET "/admin/collections" for 127.0.0.1 at 2016-01-17 04:25:20 +0100
Processing by CollectionsController#index as HTML
  Rendered shared/_restaurant_manage_tabs.html.erb (1.0ms)
  [1m[36mCollection Load (0.4ms)[0m  [1mSELECT `collections`.* FROM `collections` ORDER BY name ASC, created_at DESC LIMIT 12 OFFSET 0[0m
  [1m[35mCollectionImage Load (0.2ms)[0m  SELECT `collection_images`.* FROM `collection_images` WHERE (collection_id = 16) LIMIT 1
  [1m[36mCollectionImage Load (0.3ms)[0m  [1mSELECT `collection_images`.* FROM `collection_images` WHERE (collection_id = 17) LIMIT 1[0m
  [1m[35mCollectionImage Load (0.2ms)[0m  SELECT `collection_images`.* FROM `collection_images` WHERE (collection_id = 18) LIMIT 1
  [1m[36mCollectionImage Load (0.2ms)[0m  [1mSELECT `collection_images`.* FROM `collection_images` WHERE (collection_id = 15) LIMIT 1[0m
  [1m[35mCollectionImage Load (0.2ms)[0m  SELECT `collection_images`.* FROM `collection_images` WHERE (collection_id = 19) LIMIT 1
  [1m[36mCollectionImage Load (0.2ms)[0m  [1mSELECT `collection_images`.* FROM `collection_images` WHERE (collection_id = 21) LIMIT 1[0m
  [1m[35mCollectionImage Load (0.2ms)[0m  SELECT `collection_images`.* FROM `collection_images` WHERE (collection_id = 22) LIMIT 1
  [1m[36mCollectionImage Load (0.2ms)[0m  [1mSELECT `collection_images`.* FROM `collection_images` WHERE (collection_id = 20) LIMIT 1[0m
  [1m[35m (0.1ms)[0m  SELECT COUNT(*) FROM `collections` 
  Rendered collections/index.erb within layouts/admin (26.3ms)
  [1m[36mUser Load (0.3ms)[0m  [1mSELECT `users`.* FROM `users` WHERE `users`.`id` = 1 LIMIT 1[0m
Completed 200 OK in 42ms (Views: 38.4ms | ActiveRecord: 2.3ms)


Started GET "/admin/collections/admin_new_collection" for 127.0.0.1 at 2016-01-17 04:25:21 +0100
Processing by CollectionsController#admin_new_collection as HTML
  [1m[35mUser Load (0.3ms)[0m  SELECT `users`.* FROM `users` WHERE `users`.`id` = 1 LIMIT 1
  Rendered collections/_collection_form.html.erb (6.1ms)
  Rendered collections/_collection_restaurants_form.html.erb (0.3ms)
  Rendered collections/admin_new_collection.html.erb within layouts/admin (17.8ms)
Completed 200 OK in 39ms (Views: 35.8ms | ActiveRecord: 0.3ms)


Started GET "/admin/restaurants" for 127.0.0.1 at 2016-01-17 04:25:42 +0100
Processing by RestaurantsController#index as HTML
  [1m[36mUser Load (0.4ms)[0m  [1mSELECT `users`.* FROM `users` WHERE `users`.`id` = 1 LIMIT 1[0m
  Rendered shared/_restaurant_manage_tabs.html.erb (0.7ms)
  Rendered restaurants/_condition_fields.html.erb (10.0ms)
  [1m[35mRestaurant Load (0.8ms)[0m  SELECT `restaurants`.* FROM `restaurants` ORDER BY disabled ASC,created_at DESC LIMIT 12 OFFSET 0
  [1m[36mPhoto Load (0.4ms)[0m  [1mSELECT `photos`.* FROM `photos` WHERE (restaurant_id = 1057 and cover = true and status = 1) LIMIT 1[0m
  [1m[35mPhoto Load (0.3ms)[0m  SELECT `photos`.* FROM `photos` WHERE `photos`.`restaurant_id` = 1057 AND `photos`.`status` = 1 ORDER BY restaurant_id ASC, created_at DESC LIMIT 1
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT `photos`.* FROM `photos` WHERE (restaurant_id = 1057 and cover = true and status = 1) LIMIT 1[0m
  [1m[35mCACHE (0.0ms)[0m  SELECT `photos`.* FROM `photos` WHERE `photos`.`restaurant_id` = 1057 AND `photos`.`status` = 1 ORDER BY restaurant_id ASC, created_at DESC LIMIT 1
  [1m[36mPhoto Load (0.4ms)[0m  [1mSELECT `photos`.* FROM `photos` WHERE (restaurant_id = 903 and cover = true and status = 1) LIMIT 1[0m
  [1m[35mPhoto Load (0.3ms)[0m  SELECT `photos`.* FROM `photos` WHERE `photos`.`restaurant_id` = 903 AND `photos`.`status` = 1 ORDER BY restaurant_id ASC, created_at DESC LIMIT 1
  [1m[36mPhoto Load (0.4ms)[0m  [1mSELECT `photos`.* FROM `photos` WHERE (restaurant_id = 876 and cover = true and status = 1) LIMIT 1[0m
  [1m[35mPhoto Load (0.3ms)[0m  SELECT `photos`.* FROM `photos` WHERE `photos`.`restaurant_id` = 876 AND `photos`.`status` = 1 ORDER BY restaurant_id ASC, created_at DESC LIMIT 1
  [1m[36mPhoto Load (0.3ms)[0m  [1mSELECT `photos`.* FROM `photos` WHERE (restaurant_id = 851 and cover = true and status = 1) LIMIT 1[0m
  [1m[35mPhoto Load (0.3ms)[0m  SELECT `photos`.* FROM `photos` WHERE `photos`.`restaurant_id` = 851 AND `photos`.`status` = 1 ORDER BY restaurant_id ASC, created_at DESC LIMIT 1
  [1m[36mPhoto Load (0.3ms)[0m  [1mSELECT `photos`.* FROM `photos` WHERE (restaurant_id = 693 and cover = true and status = 1) LIMIT 1[0m
  [1m[35mPhoto Load (0.3ms)[0m  SELECT `photos`.* FROM `photos` WHERE `photos`.`restaurant_id` = 693 AND `photos`.`status` = 1 ORDER BY restaurant_id ASC, created_at DESC LIMIT 1
  [1m[36mPhoto Load (0.4ms)[0m  [1mSELECT `photos`.* FROM `photos` WHERE (restaurant_id = 686 and cover = true and status = 1) LIMIT 1[0m
  [1m[35mPhoto Load (0.3ms)[0m  SELECT `photos`.* FROM `photos` WHERE `photos`.`restaurant_id` = 686 AND `photos`.`status` = 1 ORDER BY restaurant_id ASC, created_at DESC LIMIT 1
  [1m[36mPhoto Load (0.3ms)[0m  [1mSELECT `photos`.* FROM `photos` WHERE (restaurant_id = 669 and cover = true and status = 1) LIMIT 1[0m
  [1m[35mPhoto Load (0.4ms)[0m  SELECT `photos`.* FROM `photos` WHERE `photos`.`restaurant_id` = 669 AND `photos`.`status` = 1 ORDER BY restaurant_id ASC, created_at DESC LIMIT 1
  [1m[36mPhoto Load (0.3ms)[0m  [1mSELECT `photos`.* FROM `photos` WHERE (restaurant_id = 251 and cover = true and status = 1) LIMIT 1[0m
  [1m[35mPhoto Load (0.3ms)[0m  SELECT `photos`.* FROM `photos` WHERE `photos`.`restaurant_id` = 251 AND `photos`.`status` = 1 ORDER BY restaurant_id ASC, created_at DESC LIMIT 1
  [1m[36mPhoto Load (0.3ms)[0m  [1mSELECT `photos`.* FROM `photos` WHERE (restaurant_id = 250 and cover = true and status = 1) LIMIT 1[0m
  [1m[35mPhoto Load (0.3ms)[0m  SELECT `photos`.* FROM `photos` WHERE `photos`.`restaurant_id` = 250 AND `photos`.`status` = 1 ORDER BY restaurant_id ASC, created_at DESC LIMIT 1
  [1m[36mPhoto Load (0.4ms)[0m  [1mSELECT `photos`.* FROM `photos` WHERE (restaurant_id = 237 and cover = true and status = 1) LIMIT 1[0m
  [1m[35mPhoto Load (0.3ms)[0m  SELECT `photos`.* FROM `photos` WHERE `photos`.`restaurant_id` = 237 AND `photos`.`status` = 1 ORDER BY restaurant_id ASC, created_at DESC LIMIT 1
  [1m[36mPhoto Load (0.3ms)[0m  [1mSELECT `photos`.* FROM `photos` WHERE (restaurant_id = 231 and cover = true and status = 1) LIMIT 1[0m
  [1m[35mPhoto Load (0.3ms)[0m  SELECT `photos`.* FROM `photos` WHERE `photos`.`restaurant_id` = 231 AND `photos`.`status` = 1 ORDER BY restaurant_id ASC, created_at DESC LIMIT 1
  [1m[36mPhoto Load (0.3ms)[0m  [1mSELECT `photos`.* FROM `photos` WHERE (restaurant_id = 222 and cover = true and status = 1) LIMIT 1[0m
  [1m[35mPhoto Load (0.3ms)[0m  SELECT `photos`.* FROM `photos` WHERE `photos`.`restaurant_id` = 222 AND `photos`.`status` = 1 ORDER BY restaurant_id ASC, created_at DESC LIMIT 1
  [1m[36m (0.3ms)[0m  [1mSELECT COUNT(*) FROM `restaurants` [0m
  Rendered restaurants/index.html.erb within layouts/admin (86.7ms)
Completed 200 OK in 95ms (Views: 83.6ms | ActiveRecord: 9.3ms)


Started GET "/admin/collections" for 127.0.0.1 at 2016-01-17 04:25:43 +0100
Processing by CollectionsController#index as HTML
  Rendered shared/_restaurant_manage_tabs.html.erb (1.1ms)
  [1m[35mCollection Load (0.4ms)[0m  SELECT `collections`.* FROM `collections` ORDER BY name ASC, created_at DESC LIMIT 12 OFFSET 0
  [1m[36mCollectionImage Load (0.2ms)[0m  [1mSELECT `collection_images`.* FROM `collection_images` WHERE (collection_id = 16) LIMIT 1[0m
  [1m[35mCollectionImage Load (0.1ms)[0m  SELECT `collection_images`.* FROM `collection_images` WHERE (collection_id = 17) LIMIT 1
  [1m[36mCollectionImage Load (0.3ms)[0m  [1mSELECT `collection_images`.* FROM `collection_images` WHERE (collection_id = 18) LIMIT 1[0m
  [1m[35mCollectionImage Load (0.2ms)[0m  SELECT `collection_images`.* FROM `collection_images` WHERE (collection_id = 15) LIMIT 1
  [1m[36mCollectionImage Load (0.2ms)[0m  [1mSELECT `collection_images`.* FROM `collection_images` WHERE (collection_id = 19) LIMIT 1[0m
  [1m[35mCollectionImage Load (0.2ms)[0m  SELECT `collection_images`.* FROM `collection_images` WHERE (collection_id = 21) LIMIT 1
  [1m[36mCollectionImage Load (0.2ms)[0m  [1mSELECT `collection_images`.* FROM `collection_images` WHERE (collection_id = 22) LIMIT 1[0m
  [1m[35mCollectionImage Load (0.1ms)[0m  SELECT `collection_images`.* FROM `collection_images` WHERE (collection_id = 20) LIMIT 1
  [1m[36m (0.2ms)[0m  [1mSELECT COUNT(*) FROM `collections` [0m
  Rendered collections/index.erb within layouts/admin (19.9ms)
  [1m[35mUser Load (0.3ms)[0m  SELECT `users`.* FROM `users` WHERE `users`.`id` = 1 LIMIT 1
Completed 200 OK in 29ms (Views: 25.6ms | ActiveRecord: 2.3ms)


Started GET "/collection/16/edit" for 127.0.0.1 at 2016-01-17 04:27:05 +0100
Processing by CollectionsController#edit_collection as HTML
  Parameters: {"id"=>"16"}
  [1m[36mUser Load (0.3ms)[0m  [1mSELECT `users`.* FROM `users` WHERE `users`.`id` = 1 LIMIT 1[0m
  [1m[35mCollection Load (0.2ms)[0m  SELECT `collections`.* FROM `collections` WHERE `collections`.`id` = 16 LIMIT 1
  [1m[36mCollectionImage Load (0.3ms)[0m  [1mSELECT `collection_images`.* FROM `collection_images` WHERE (collection_id = 16) LIMIT 1[0m
  Rendered collections/_collection_form.html.erb (19.2ms)
  Rendered collections/_collection_restaurants_form.html.erb (0.5ms)
  Rendered collections/edit_collection.html.erb within layouts/admin (38.9ms)
Completed 200 OK in 62ms (Views: 58.8ms | ActiveRecord: 0.7ms)


Started GET "/admin/restaurants" for 127.0.0.1 at 2016-01-17 04:27:40 +0100
Processing by RestaurantsController#index as HTML
  [1m[35mUser Load (0.4ms)[0m  SELECT `users`.* FROM `users` WHERE `users`.`id` = 1 LIMIT 1
  Rendered shared/_restaurant_manage_tabs.html.erb (1.0ms)
  Rendered restaurants/_condition_fields.html.erb (31.3ms)
  [1m[36mRestaurant Load (0.8ms)[0m  [1mSELECT `restaurants`.* FROM `restaurants` ORDER BY disabled ASC,created_at DESC LIMIT 12 OFFSET 0[0m
  [1m[35mPhoto Load (0.4ms)[0m  SELECT `photos`.* FROM `photos` WHERE (restaurant_id = 1057 and cover = true and status = 1) LIMIT 1
  [1m[36mPhoto Load (0.3ms)[0m  [1mSELECT `photos`.* FROM `photos` WHERE `photos`.`restaurant_id` = 1057 AND `photos`.`status` = 1 ORDER BY restaurant_id ASC, created_at DESC LIMIT 1[0m
  [1m[35mCACHE (0.0ms)[0m  SELECT `photos`.* FROM `photos` WHERE (restaurant_id = 1057 and cover = true and status = 1) LIMIT 1
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT `photos`.* FROM `photos` WHERE `photos`.`restaurant_id` = 1057 AND `photos`.`status` = 1 ORDER BY restaurant_id ASC, created_at DESC LIMIT 1[0m
  [1m[35mPhoto Load (0.4ms)[0m  SELECT `photos`.* FROM `photos` WHERE (restaurant_id = 903 and cover = true and status = 1) LIMIT 1
  [1m[36mPhoto Load (0.3ms)[0m  [1mSELECT `photos`.* FROM `photos` WHERE `photos`.`restaurant_id` = 903 AND `photos`.`status` = 1 ORDER BY restaurant_id ASC, created_at DESC LIMIT 1[0m
  [1m[35mPhoto Load (0.4ms)[0m  SELECT `photos`.* FROM `photos` WHERE (restaurant_id = 876 and cover = true and status = 1) LIMIT 1
  [1m[36mPhoto Load (0.3ms)[0m  [1mSELECT `photos`.* FROM `photos` WHERE `photos`.`restaurant_id` = 876 AND `photos`.`status` = 1 ORDER BY restaurant_id ASC, created_at DESC LIMIT 1[0m
  [1m[35mPhoto Load (0.3ms)[0m  SELECT `photos`.* FROM `photos` WHERE (restaurant_id = 851 and cover = true and status = 1) LIMIT 1
  [1m[36mPhoto Load (0.3ms)[0m  [1mSELECT `photos`.* FROM `photos` WHERE `photos`.`restaurant_id` = 851 AND `photos`.`status` = 1 ORDER BY restaurant_id ASC, created_at DESC LIMIT 1[0m
  [1m[35mPhoto Load (0.4ms)[0m  SELECT `photos`.* FROM `photos` WHERE (restaurant_id = 693 and cover = true and status = 1) LIMIT 1
  [1m[36mPhoto Load (0.3ms)[0m  [1mSELECT `photos`.* FROM `photos` WHERE `photos`.`restaurant_id` = 693 AND `photos`.`status` = 1 ORDER BY restaurant_id ASC, created_at DESC LIMIT 1[0m
  [1m[35mPhoto Load (0.4ms)[0m  SELECT `photos`.* FROM `photos` WHERE (restaurant_id = 686 and cover = true and status = 1) LIMIT 1
  [1m[36mPhoto Load (0.3ms)[0m  [1mSELECT `photos`.* FROM `photos` WHERE `photos`.`restaurant_id` = 686 AND `photos`.`status` = 1 ORDER BY restaurant_id ASC, created_at DESC LIMIT 1[0m
  [1m[35mPhoto Load (0.3ms)[0m  SELECT `photos`.* FROM `photos` WHERE (restaurant_id = 669 and cover = true and status = 1) LIMIT 1
  [1m[36mPhoto Load (0.3ms)[0m  [1mSELECT `photos`.* FROM `photos` WHERE `photos`.`restaurant_id` = 669 AND `photos`.`status` = 1 ORDER BY restaurant_id ASC, created_at DESC LIMIT 1[0m
  [1m[35mPhoto Load (0.3ms)[0m  SELECT `photos`.* FROM `photos` WHERE (restaurant_id = 251 and cover = true and status = 1) LIMIT 1
  [1m[36mPhoto Load (0.3ms)[0m  [1mSELECT `photos`.* FROM `photos` WHERE `photos`.`restaurant_id` = 251 AND `photos`.`status` = 1 ORDER BY restaurant_id ASC, created_at DESC LIMIT 1[0m
  [1m[35mPhoto Load (0.4ms)[0m  SELECT `photos`.* FROM `photos` WHERE (restaurant_id = 250 and cover = true and status = 1) LIMIT 1
  [1m[36mPhoto Load (0.3ms)[0m  [1mSELECT `photos`.* FROM `photos` WHERE `photos`.`restaurant_id` = 250 AND `photos`.`status` = 1 ORDER BY restaurant_id ASC, created_at DESC LIMIT 1[0m
  [1m[35mPhoto Load (0.3ms)[0m  SELECT `photos`.* FROM `photos` WHERE (restaurant_id = 237 and cover = true and status = 1) LIMIT 1
  [1m[36mPhoto Load (0.3ms)[0m  [1mSELECT `photos`.* FROM `photos` WHERE `photos`.`restaurant_id` = 237 AND `photos`.`status` = 1 ORDER BY restaurant_id ASC, created_at DESC LIMIT 1[0m
  [1m[35mPhoto Load (0.3ms)[0m  SELECT `photos`.* FROM `photos` WHERE (restaurant_id = 231 and cover = true and status = 1) LIMIT 1
  [1m[36mPhoto Load (0.3ms)[0m  [1mSELECT `photos`.* FROM `photos` WHERE `photos`.`restaurant_id` = 231 AND `photos`.`status` = 1 ORDER BY restaurant_id ASC, created_at DESC LIMIT 1[0m
  [1m[35mPhoto Load (0.3ms)[0m  SELECT `photos`.* FROM `photos` WHERE (restaurant_id = 222 and cover = true and status = 1) LIMIT 1
  [1m[36mPhoto Load (0.3ms)[0m  [1mSELECT `photos`.* FROM `photos` WHERE `photos`.`restaurant_id` = 222 AND `photos`.`status` = 1 ORDER BY restaurant_id ASC, created_at DESC LIMIT 1[0m
  [1m[35m (0.4ms)[0m  SELECT COUNT(*) FROM `restaurants` 
  Rendered restaurants/index.html.erb within layouts/admin (127.7ms)
Completed 200 OK in 138ms (Views: 125.0ms | ActiveRecord: 9.3ms)


Started GET "/admin/collections" for 127.0.0.1 at 2016-01-17 04:27:46 +0100
Processing by CollectionsController#index as HTML
  Rendered shared/_restaurant_manage_tabs.html.erb (1.0ms)
  [1m[36mCollection Load (0.4ms)[0m  [1mSELECT `collections`.* FROM `collections` ORDER BY name ASC, created_at DESC LIMIT 12 OFFSET 0[0m
  [1m[35mCollectionImage Load (0.2ms)[0m  SELECT `collection_images`.* FROM `collection_images` WHERE (collection_id = 16) LIMIT 1
  [1m[36mCollectionImage Load (0.4ms)[0m  [1mSELECT `collection_images`.* FROM `collection_images` WHERE (collection_id = 17) LIMIT 1[0m
  [1m[35mCollectionImage Load (0.2ms)[0m  SELECT `collection_images`.* FROM `collection_images` WHERE (collection_id = 18) LIMIT 1
  [1m[36mCollectionImage Load (0.3ms)[0m  [1mSELECT `collection_images`.* FROM `collection_images` WHERE (collection_id = 15) LIMIT 1[0m
  [1m[35mCollectionImage Load (0.2ms)[0m  SELECT `collection_images`.* FROM `collection_images` WHERE (collection_id = 19) LIMIT 1
  [1m[36mCollectionImage Load (0.2ms)[0m  [1mSELECT `collection_images`.* FROM `collection_images` WHERE (collection_id = 21) LIMIT 1[0m
  [1m[35mCollectionImage Load (0.3ms)[0m  SELECT `collection_images`.* FROM `collection_images` WHERE (collection_id = 22) LIMIT 1
  [1m[36mCollectionImage Load (0.3ms)[0m  [1mSELECT `collection_images`.* FROM `collection_images` WHERE (collection_id = 20) LIMIT 1[0m
  [1m[35m (0.1ms)[0m  SELECT COUNT(*) FROM `collections` 
  Rendered collections/index.erb within layouts/admin (31.6ms)
  [1m[36mUser Load (0.3ms)[0m  [1mSELECT `users`.* FROM `users` WHERE `users`.`id` = 1 LIMIT 1[0m
Completed 200 OK in 43ms (Views: 38.7ms | ActiveRecord: 2.7ms)


Started GET "/admin/collections/admin_new_collection" for 127.0.0.1 at 2016-01-17 04:31:32 +0100
Processing by CollectionsController#admin_new_collection as HTML
  [1m[35mUser Load (0.3ms)[0m  SELECT `users`.* FROM `users` WHERE `users`.`id` = 1 LIMIT 1
  Rendered collections/_collection_form.html.erb (8.9ms)
  Rendered collections/_collection_restaurants_form.html.erb (0.5ms)
  Rendered collections/admin_new_collection.html.erb within layouts/admin (32.4ms)
Completed 200 OK in 57ms (Views: 54.6ms | ActiveRecord: 0.3ms)


Started POST "/admin/collections" for 127.0.0.1 at 2016-01-17 04:31:49 +0100
Processing by CollectionsController#create as HTML
  Parameters: {"utf8"=>"âœ“", "authenticity_token"=>"RUljBeFq2Kuk53sFNS/nHZPaIO2p/6bajboSTDM6gqE=", "admin"=>"true", "collection"=>{"name"=>"test1234", "description"=>"asdfasdf"}, "collection_image"=>{"image"=>#<ActionDispatch::Http::UploadedFile:0x007f8368a83430 @original_filename="indian.png", @content_type="image/png", @headers="Content-Disposition: form-data; name=\"collection_image[image]\"; filename=\"indian.png\"\r\nContent-Type: image/png\r\n", @tempfile=#<Tempfile:/var/folders/rf/q4l8n5k56pnbjgkdtzrhq_w00000gn/T/RackMultipart20160117-28269-ogsnty>>}}
  [1m[36mCollection Load (0.3ms)[0m  [1mSELECT `collections`.* FROM `collections` WHERE `collections`.`name` = 'test1234' LIMIT 1[0m
  [1m[35m (0.1ms)[0m  BEGIN
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO `collections` (`created_at`, `description`, `image_url`, `name`, `updated_at`) VALUES ('2016-01-17 03:31:49', 'asdfasdf', NULL, 'test1234', '2016-01-17 03:31:49')[0m
  [1m[35m (0.6ms)[0m  COMMIT
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO `collection_images` (`collection_id`, `created_at`, `image_name`, `image_uid`, `text_content`, `text_hyperlink`, `text_title`, `updated_at`) VALUES (23, '2016-01-17 03:31:49', 'indian.png', '2016/01/17/04_31_49_883_indian.png', NULL, NULL, NULL, '2016-01-17 03:31:49')
  [1m[36m (0.6ms)[0m  [1mCOMMIT[0m
Redirected to http://localhost:3000/collection/23/edit
Completed 302 Found in 16ms (ActiveRecord: 2.2ms)


Started GET "/collection/23/edit" for 127.0.0.1 at 2016-01-17 04:31:49 +0100
Processing by CollectionsController#edit_collection as HTML
  Parameters: {"id"=>"23"}
  [1m[35mUser Load (0.3ms)[0m  SELECT `users`.* FROM `users` WHERE `users`.`id` = 1 LIMIT 1
  [1m[36mCollection Load (0.2ms)[0m  [1mSELECT `collections`.* FROM `collections` WHERE `collections`.`id` = 23 LIMIT 1[0m
  [1m[35mCollectionImage Load (0.3ms)[0m  SELECT `collection_images`.* FROM `collection_images` WHERE (collection_id = 23) LIMIT 1
  Rendered collections/_collection_form.html.erb (8.7ms)
  Rendered collections/_collection_restaurants_form.html.erb (0.4ms)
  Rendered collections/edit_collection.html.erb within layouts/admin (11.1ms)
Completed 200 OK in 29ms (Views: 25.4ms | ActiveRecord: 0.7ms)


Started POST "/admin/collections" for 127.0.0.1 at 2016-01-17 04:36:56 +0100
Processing by CollectionsController#create as HTML
  Parameters: {"utf8"=>"âœ“", "authenticity_token"=>"RUljBeFq2Kuk53sFNS/nHZPaIO2p/6bajboSTDM6gqE=", "admin"=>"true", "collection"=>{"name"=>"test1234b", "description"=>"asdfasdf"}, "collection_image"=>{"image"=>#<ActionDispatch::Http::UploadedFile:0x007f8365670a30 @original_filename="indian.png", @content_type="image/png", @headers="Content-Disposition: form-data; name=\"collection_image[image]\"; filename=\"indian.png\"\r\nContent-Type: image/png\r\n", @tempfile=#<Tempfile:/var/folders/rf/q4l8n5k56pnbjgkdtzrhq_w00000gn/T/RackMultipart20160117-28269-1rgpwc5>>}}
  [1m[36mCollection Load (0.2ms)[0m  [1mSELECT `collections`.* FROM `collections` WHERE `collections`.`name` = 'test1234b' LIMIT 1[0m
  [1m[35m (0.1ms)[0m  BEGIN
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO `collections` (`created_at`, `description`, `image_url`, `name`, `updated_at`) VALUES ('2016-01-17 03:36:56', 'asdfasdf', NULL, 'test1234b', '2016-01-17 03:36:56')[0m
  [1m[35m (21.0ms)[0m  COMMIT
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO `collection_images` (`collection_id`, `created_at`, `image_name`, `image_uid`, `text_content`, `text_hyperlink`, `text_title`, `updated_at`) VALUES (24, '2016-01-17 03:36:56', 'indian.png', '2016/01/17/04_36_56_551_indian.png', NULL, NULL, NULL, '2016-01-17 03:36:56')
  [1m[36m (0.6ms)[0m  [1mCOMMIT[0m
Redirected to http://localhost:3000/collection/24/edit
Completed 302 Found in 54ms (ActiveRecord: 22.5ms)


Started GET "/collection/24/edit" for 127.0.0.1 at 2016-01-17 04:36:56 +0100
Processing by CollectionsController#edit_collection as HTML
  Parameters: {"id"=>"24"}
  [1m[35mUser Load (0.3ms)[0m  SELECT `users`.* FROM `users` WHERE `users`.`id` = 1 LIMIT 1
  [1m[36mCollection Load (0.3ms)[0m  [1mSELECT `collections`.* FROM `collections` WHERE `collections`.`id` = 24 LIMIT 1[0m
  [1m[35mCollectionImage Load (0.3ms)[0m  SELECT `collection_images`.* FROM `collection_images` WHERE (collection_id = 24) LIMIT 1
  Rendered collections/_collection_form.html.erb (11.4ms)
  Rendered collections/_collection_restaurants_form.html.erb (0.8ms)
  Rendered collections/edit_collection.html.erb within layouts/admin (32.2ms)
Completed 200 OK in 74ms (Views: 66.3ms | ActiveRecord: 0.9ms)


Started POST "/admin/collections" for 127.0.0.1 at 2016-01-17 04:40:29 +0100
Processing by CollectionsController#create as HTML
  Parameters: {"utf8"=>"âœ“", "authenticity_token"=>"RUljBeFq2Kuk53sFNS/nHZPaIO2p/6bajboSTDM6gqE=", "admin"=>"true", "collection"=>{"name"=>"atest1234b", "description"=>"asdfasdf"}, "collection_image"=>{"image"=>#<ActionDispatch::Http::UploadedFile:0x007f8366eee120 @original_filename="indian.png", @content_type="image/png", @headers="Content-Disposition: form-data; name=\"collection_image[image]\"; filename=\"indian.png\"\r\nContent-Type: image/png\r\n", @tempfile=#<Tempfile:/var/folders/rf/q4l8n5k56pnbjgkdtzrhq_w00000gn/T/RackMultipart20160117-28269-1dtl7ah>>}}
  [1m[36mCollection Load (0.2ms)[0m  [1mSELECT `collections`.* FROM `collections` WHERE `collections`.`name` = 'atest1234b' LIMIT 1[0m
  [1m[35m (0.1ms)[0m  BEGIN
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO `collections` (`created_at`, `description`, `image_url`, `name`, `updated_at`) VALUES ('2016-01-17 03:40:29', 'asdfasdf', NULL, 'atest1234b', '2016-01-17 03:40:29')[0m
  [1m[35m (4.9ms)[0m  COMMIT
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO `collection_images` (`collection_id`, `created_at`, `image_name`, `image_uid`, `text_content`, `text_hyperlink`, `text_title`, `updated_at`) VALUES (25, '2016-01-17 03:40:29', 'indian.png', '2016/01/17/04_40_29_464_indian.png', NULL, NULL, NULL, '2016-01-17 03:40:29')
  [1m[36m (0.5ms)[0m  [1mCOMMIT[0m
Redirected to http://localhost:3000/collection/25/edit
Completed 302 Found in 36ms (ActiveRecord: 6.4ms)


Started GET "/collection/25/edit" for 127.0.0.1 at 2016-01-17 04:40:29 +0100
Processing by CollectionsController#edit_collection as HTML
  Parameters: {"id"=>"25"}
  [1m[35mUser Load (0.3ms)[0m  SELECT `users`.* FROM `users` WHERE `users`.`id` = 1 LIMIT 1
  [1m[36mCollection Load (0.2ms)[0m  [1mSELECT `collections`.* FROM `collections` WHERE `collections`.`id` = 25 LIMIT 1[0m
  [1m[35mCollectionImage Load (0.3ms)[0m  SELECT `collection_images`.* FROM `collection_images` WHERE (collection_id = 25) LIMIT 1
  Rendered collections/_collection_form.html.erb (8.7ms)
  Rendered collections/_collection_restaurants_form.html.erb (0.5ms)
  Rendered collections/edit_collection.html.erb within layouts/admin (82.0ms)
Completed 200 OK in 104ms (Views: 100.1ms | ActiveRecord: 0.8ms)


Started GET "/collection/25/edit" for 127.0.0.1 at 2016-01-17 04:50:54 +0100
Processing by CollectionsController#edit_collection as HTML
  Parameters: {"id"=>"25"}
  [1m[36mUser Load (0.3ms)[0m  [1mSELECT `users`.* FROM `users` WHERE `users`.`id` = 1 LIMIT 1[0m
  [1m[35mCollection Load (0.2ms)[0m  SELECT `collections`.* FROM `collections` WHERE `collections`.`id` = 25 LIMIT 1
  [1m[36mCollectionImage Load (0.2ms)[0m  [1mSELECT `collection_images`.* FROM `collection_images` WHERE (collection_id = 25) LIMIT 1[0m
  Rendered collections/_collection_form.html.erb (44.2ms)
  Rendered collections/_collection_restaurants_form.html.erb (0.4ms)
  Rendered collections/edit_collection.html.erb within layouts/admin (57.0ms)
Completed 200 OK in 176ms (Views: 82.8ms | ActiveRecord: 3.4ms)


Started PUT "/admin/collections/25" for 127.0.0.1 at 2016-01-17 05:01:28 +0100
Processing by CollectionsController#update as HTML
  Parameters: {"utf8"=>"âœ“", "authenticity_token"=>"RUljBeFq2Kuk53sFNS/nHZPaIO2p/6bajboSTDM6gqE=", "admin"=>"true", "collection"=>{"name"=>"atest1234b", "description"=>"asdfasdfg"}, "id"=>"25"}
  [1m[35mUser Load (0.6ms)[0m  SELECT `users`.* FROM `users` WHERE `users`.`id` = 1 LIMIT 1
  [1m[36mCollection Load (0.3ms)[0m  [1mSELECT `collections`.* FROM `collections` WHERE `collections`.`id` = 25 LIMIT 1[0m
  [1m[35m (0.1ms)[0m  BEGIN
  [1m[36m (0.7ms)[0m  [1mUPDATE `collections` SET `description` = 'asdfasdfg', `updated_at` = '2016-01-17 04:01:28' WHERE `collections`.`id` = 25[0m
  [1m[35m (1.6ms)[0m  COMMIT
Redirected to http://localhost:3000/collection/25/edit
Completed 302 Found in 15ms (ActiveRecord: 3.4ms)


Started GET "/collection/25/edit" for 127.0.0.1 at 2016-01-17 05:01:28 +0100
Processing by CollectionsController#edit_collection as HTML
  Parameters: {"id"=>"25"}
  [1m[36mUser Load (0.3ms)[0m  [1mSELECT `users`.* FROM `users` WHERE `users`.`id` = 1 LIMIT 1[0m
  [1m[35mCollection Load (0.3ms)[0m  SELECT `collections`.* FROM `collections` WHERE `collections`.`id` = 25 LIMIT 1
  [1m[36mCollectionImage Load (0.4ms)[0m  [1mSELECT `collection_images`.* FROM `collection_images` WHERE (collection_id = 25) LIMIT 1[0m
  Rendered collections/_collection_form.html.erb (8.1ms)
  Rendered collections/_collection_restaurants_form.html.erb (0.4ms)
  Rendered collections/edit_collection.html.erb within layouts/admin (32.1ms)
Completed 200 OK in 61ms (Views: 58.1ms | ActiveRecord: 0.9ms)


Started GET "/collection/25/edit" for 127.0.0.1 at 2016-01-17 05:01:30 +0100
Processing by CollectionsController#edit_collection as HTML
  Parameters: {"id"=>"25"}
  [1m[35mUser Load (0.5ms)[0m  SELECT `users`.* FROM `users` WHERE `users`.`id` = 1 LIMIT 1
  [1m[36mCollection Load (0.3ms)[0m  [1mSELECT `collections`.* FROM `collections` WHERE `collections`.`id` = 25 LIMIT 1[0m
  [1m[35mCollectionImage Load (0.3ms)[0m  SELECT `collection_images`.* FROM `collection_images` WHERE (collection_id = 25) LIMIT 1
  Rendered collections/_collection_form.html.erb (6.8ms)
  Rendered collections/_collection_restaurants_form.html.erb (0.3ms)
  Rendered collections/edit_collection.html.erb within layouts/admin (8.7ms)
Completed 200 OK in 22ms (Views: 16.0ms | ActiveRecord: 1.1ms)


Started GET "/collection/25/edit" for 127.0.0.1 at 2016-01-17 05:01:31 +0100
Processing by CollectionsController#edit_collection as HTML
  Parameters: {"id"=>"25"}
  [1m[36mUser Load (0.5ms)[0m  [1mSELECT `users`.* FROM `users` WHERE `users`.`id` = 1 LIMIT 1[0m
  [1m[35mCollection Load (0.3ms)[0m  SELECT `collections`.* FROM `collections` WHERE `collections`.`id` = 25 LIMIT 1
  [1m[36mCollectionImage Load (0.3ms)[0m  [1mSELECT `collection_images`.* FROM `collection_images` WHERE (collection_id = 25) LIMIT 1[0m
  Rendered collections/_collection_form.html.erb (7.8ms)
  Rendered collections/_collection_restaurants_form.html.erb (0.3ms)
  Rendered collections/edit_collection.html.erb within layouts/admin (10.5ms)
Completed 200 OK in 23ms (Views: 17.7ms | ActiveRecord: 1.1ms)


Started GET "/collection/25/edit" for 127.0.0.1 at 2016-01-17 05:01:59 +0100
Processing by CollectionsController#edit_collection as HTML
  Parameters: {"id"=>"25"}
  [1m[35mUser Load (0.2ms)[0m  SELECT `users`.* FROM `users` WHERE `users`.`id` = 1 LIMIT 1
  [1m[36mCollection Load (0.2ms)[0m  [1mSELECT `collections`.* FROM `collections` WHERE `collections`.`id` = 25 LIMIT 1[0m
  [1m[35mCollectionImage Load (0.2ms)[0m  SELECT `collection_images`.* FROM `collection_images` WHERE (collection_id = 25) LIMIT 1
  Rendered collections/_collection_form.html.erb (35.8ms)
  Rendered collections/_collection_restaurants_form.html.erb (0.2ms)
  Rendered collections/edit_collection.html.erb within layouts/admin (38.1ms)
Completed 200 OK in 117ms (Views: 45.1ms | ActiveRecord: 3.3ms)


Started PUT "/admin/collections/25" for 127.0.0.1 at 2016-01-17 05:02:19 +0100
Processing by CollectionsController#update as HTML
  Parameters: {"utf8"=>"âœ“", "authenticity_token"=>"RUljBeFq2Kuk53sFNS/nHZPaIO2p/6bajboSTDM6gqE=", "admin"=>"true", "collection"=>{"name"=>"atest1234b", "description"=>"asdfasdfga"}, "collection_image"=>{"image"=>#<ActionDispatch::Http::UploadedFile:0x007f836c1fac10 @original_filename="persian.png", @content_type="image/png", @headers="Content-Disposition: form-data; name=\"collection_image[image]\"; filename=\"persian.png\"\r\nContent-Type: image/png\r\n", @tempfile=#<Tempfile:/var/folders/rf/q4l8n5k56pnbjgkdtzrhq_w00000gn/T/RackMultipart20160117-28269-1qcj3kq>>}, "id"=>"25"}
  [1m[36mUser Load (0.5ms)[0m  [1mSELECT `users`.* FROM `users` WHERE `users`.`id` = 1 LIMIT 1[0m
  [1m[35mCollection Load (0.2ms)[0m  SELECT `collections`.* FROM `collections` WHERE `collections`.`id` = 25 LIMIT 1
  [1m[36mCollectionImage Load (0.4ms)[0m  [1mSELECT `collection_images`.* FROM `collection_images` WHERE `collection_images`.`collection_id` = 25 LIMIT 1[0m
  [1m[35m (9.7ms)[0m  BEGIN
  [1m[36m (0.3ms)[0m  [1mUPDATE `collection_images` SET `image_uid` = '2016/01/17/05_02_19_831_persian.png', `image_name` = 'persian.png', `updated_at` = '2016-01-17 04:02:19' WHERE `collection_images`.`id` = 6[0m
  [1m[35m (0.6ms)[0m  COMMIT
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35m (0.3ms)[0m  UPDATE `collections` SET `description` = 'asdfasdfga', `updated_at` = '2016-01-17 04:02:19' WHERE `collections`.`id` = 25
  [1m[36m (0.6ms)[0m  [1mCOMMIT[0m
  [1m[35m (0.1ms)[0m  BEGIN
  [1m[36m (0.2ms)[0m  [1mCOMMIT[0m
Redirected to http://localhost:3000/collection/25/edit
Completed 302 Found in 59ms (ActiveRecord: 13.0ms)


Started GET "/collection/25/edit" for 127.0.0.1 at 2016-01-17 05:02:19 +0100
Processing by CollectionsController#edit_collection as HTML
  Parameters: {"id"=>"25"}
  [1m[35mUser Load (0.3ms)[0m  SELECT `users`.* FROM `users` WHERE `users`.`id` = 1 LIMIT 1
  [1m[36mCollection Load (0.2ms)[0m  [1mSELECT `collections`.* FROM `collections` WHERE `collections`.`id` = 25 LIMIT 1[0m
  [1m[35mCollectionImage Load (0.3ms)[0m  SELECT `collection_images`.* FROM `collection_images` WHERE (collection_id = 25) LIMIT 1
  Rendered collections/_collection_form.html.erb (8.2ms)
  Rendered collections/_collection_restaurants_form.html.erb (0.3ms)
  Rendered collections/edit_collection.html.erb within layouts/admin (10.7ms)
Completed 200 OK in 20ms (Views: 16.8ms | ActiveRecord: 0.7ms)


Started GET "/admin/restaurants" for 127.0.0.1 at 2016-01-17 05:03:42 +0100
  [1m[36m (0.2ms)[0m  [1mSELECT COUNT(*) FROM `filter_types` WHERE (code = 'features')[0m
  [1m[35m (0.4ms)[0m  SELECT COUNT(*) FROM `filters` WHERE (code = 'offer')
  [1m[36mFilter Load (0.3ms)[0m  [1mSELECT `filters`.* FROM `filters` WHERE (code = 'offer') LIMIT 1[0m
  [1m[35mFilterType Load (0.3ms)[0m  SELECT `filter_types`.* FROM `filter_types` WHERE (code = 'features') LIMIT 1
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT `filters`.* FROM `filters` WHERE (code = 'offer') LIMIT 1[0m
  [1m[35mCACHE (0.0ms)[0m  SELECT `filter_types`.* FROM `filter_types` WHERE (code = 'features') LIMIT 1
Processing by RestaurantsController#index as HTML
  [1m[36mUser Load (0.3ms)[0m  [1mSELECT `users`.* FROM `users` WHERE `users`.`id` = 1 LIMIT 1[0m
  Rendered shared/_restaurant_manage_tabs.html.erb (1.0ms)
  Rendered restaurants/_condition_fields.html.erb (16.4ms)
  [1m[35mRestaurant Load (0.9ms)[0m  SELECT `restaurants`.* FROM `restaurants` ORDER BY disabled ASC,created_at DESC LIMIT 12 OFFSET 0
  [1m[36mPhoto Load (0.4ms)[0m  [1mSELECT `photos`.* FROM `photos` WHERE (restaurant_id = 1057 and cover = true and status = 1) LIMIT 1[0m
  [1m[35mPhoto Load (0.3ms)[0m  SELECT `photos`.* FROM `photos` WHERE `photos`.`restaurant_id` = 1057 AND `photos`.`status` = 1 ORDER BY restaurant_id ASC, created_at DESC LIMIT 1
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT `photos`.* FROM `photos` WHERE (restaurant_id = 1057 and cover = true and status = 1) LIMIT 1[0m
  [1m[35mCACHE (0.0ms)[0m  SELECT `photos`.* FROM `photos` WHERE `photos`.`restaurant_id` = 1057 AND `photos`.`status` = 1 ORDER BY restaurant_id ASC, created_at DESC LIMIT 1
  [1m[36mPhoto Load (0.5ms)[0m  [1mSELECT `photos`.* FROM `photos` WHERE (restaurant_id = 903 and cover = true and status = 1) LIMIT 1[0m
  [1m[35mPhoto Load (0.3ms)[0m  SELECT `photos`.* FROM `photos` WHERE `photos`.`restaurant_id` = 903 AND `photos`.`status` = 1 ORDER BY restaurant_id ASC, created_at DESC LIMIT 1
  [1m[36mPhoto Load (0.4ms)[0m  [1mSELECT `photos`.* FROM `photos` WHERE (restaurant_id = 876 and cover = true and status = 1) LIMIT 1[0m
  [1m[35mPhoto Load (0.3ms)[0m  SELECT `photos`.* FROM `photos` WHERE `photos`.`restaurant_id` = 876 AND `photos`.`status` = 1 ORDER BY restaurant_id ASC, created_at DESC LIMIT 1
  [1m[36mPhoto Load (0.3ms)[0m  [1mSELECT `photos`.* FROM `photos` WHERE (restaurant_id = 851 and cover = true and status = 1) LIMIT 1[0m
  [1m[35mPhoto Load (0.3ms)[0m  SELECT `photos`.* FROM `photos` WHERE `photos`.`restaurant_id` = 851 AND `photos`.`status` = 1 ORDER BY restaurant_id ASC, created_at DESC LIMIT 1
  [1m[36mPhoto Load (0.4ms)[0m  [1mSELECT `photos`.* FROM `photos` WHERE (restaurant_id = 693 and cover = true and status = 1) LIMIT 1[0m
  [1m[35mPhoto Load (0.3ms)[0m  SELECT `photos`.* FROM `photos` WHERE `photos`.`restaurant_id` = 693 AND `photos`.`status` = 1 ORDER BY restaurant_id ASC, created_at DESC LIMIT 1
  [1m[36mPhoto Load (0.4ms)[0m  [1mSELECT `photos`.* FROM `photos` WHERE (restaurant_id = 686 and cover = true and status = 1) LIMIT 1[0m
  [1m[35mPhoto Load (0.3ms)[0m  SELECT `photos`.* FROM `photos` WHERE `photos`.`restaurant_id` = 686 AND `photos`.`status` = 1 ORDER BY restaurant_id ASC, created_at DESC LIMIT 1
  [1m[36mPhoto Load (0.4ms)[0m  [1mSELECT `photos`.* FROM `photos` WHERE (restaurant_id = 669 and cover = true and status = 1) LIMIT 1[0m
  [1m[35mPhoto Load (0.3ms)[0m  SELECT `photos`.* FROM `photos` WHERE `photos`.`restaurant_id` = 669 AND `photos`.`status` = 1 ORDER BY restaurant_id ASC, created_at DESC LIMIT 1
  [1m[36mPhoto Load (0.3ms)[0m  [1mSELECT `photos`.* FROM `photos` WHERE (restaurant_id = 251 and cover = true and status = 1) LIMIT 1[0m
  [1m[35mPhoto Load (0.3ms)[0m  SELECT `photos`.* FROM `photos` WHERE `photos`.`restaurant_id` = 251 AND `photos`.`status` = 1 ORDER BY restaurant_id ASC, created_at DESC LIMIT 1
  [1m[36mPhoto Load (0.5ms)[0m  [1mSELECT `photos`.* FROM `photos` WHERE (restaurant_id = 250 and cover = true and status = 1) LIMIT 1[0m
  [1m[35mPhoto Load (0.4ms)[0m  SELECT `photos`.* FROM `photos` WHERE `photos`.`restaurant_id` = 250 AND `photos`.`status` = 1 ORDER BY restaurant_id ASC, created_at DESC LIMIT 1
  [1m[36mPhoto Load (0.4ms)[0m  [1mSELECT `photos`.* FROM `photos` WHERE (restaurant_id = 237 and cover = true and status = 1) LIMIT 1[0m
  [1m[35mPhoto Load (0.3ms)[0m  SELECT `photos`.* FROM `photos` WHERE `photos`.`restaurant_id` = 237 AND `photos`.`status` = 1 ORDER BY restaurant_id ASC, created_at DESC LIMIT 1
  [1m[36mPhoto Load (0.3ms)[0m  [1mSELECT `photos`.* FROM `photos` WHERE (restaurant_id = 231 and cover = true and status = 1) LIMIT 1[0m
  [1m[35mPhoto Load (0.3ms)[0m  SELECT `photos`.* FROM `photos` WHERE `photos`.`restaurant_id` = 231 AND `photos`.`status` = 1 ORDER BY restaurant_id ASC, created_at DESC LIMIT 1
  [1m[36mPhoto Load (0.4ms)[0m  [1mSELECT `photos`.* FROM `photos` WHERE (restaurant_id = 222 and cover = true and status = 1) LIMIT 1[0m
  [1m[35mPhoto Load (0.3ms)[0m  SELECT `photos`.* FROM `photos` WHERE `photos`.`restaurant_id` = 222 AND `photos`.`status` = 1 ORDER BY restaurant_id ASC, created_at DESC LIMIT 1
  [1m[36m (0.4ms)[0m  [1mSELECT COUNT(*) FROM `restaurants` [0m
  Rendered restaurants/index.html.erb within layouts/admin (171.0ms)
Completed 200 OK in 295ms (Views: 180.7ms | ActiveRecord: 12.7ms)


Started GET "/admin/collections" for 127.0.0.1 at 2016-01-17 05:03:44 +0100
Processing by CollectionsController#index as HTML
  Rendered shared/_restaurant_manage_tabs.html.erb (1.0ms)
  [1m[35mCollection Load (0.2ms)[0m  SELECT `collections`.* FROM `collections` ORDER BY name ASC, created_at DESC LIMIT 12 OFFSET 0
  [1m[36mCollectionImage Load (0.2ms)[0m  [1mSELECT `collection_images`.* FROM `collection_images` WHERE (collection_id = 16) LIMIT 1[0m
  [1m[35mCollectionImage Load (0.3ms)[0m  SELECT `collection_images`.* FROM `collection_images` WHERE (collection_id = 17) LIMIT 1
  [1m[36mCollectionImage Load (0.3ms)[0m  [1mSELECT `collection_images`.* FROM `collection_images` WHERE (collection_id = 18) LIMIT 1[0m
  [1m[35mCollectionImage Load (0.2ms)[0m  SELECT `collection_images`.* FROM `collection_images` WHERE (collection_id = 15) LIMIT 1
  [1m[36mCollectionImage Load (0.2ms)[0m  [1mSELECT `collection_images`.* FROM `collection_images` WHERE (collection_id = 25) LIMIT 1[0m
  [1m[35mCollectionImage Load (0.2ms)[0m  SELECT `collection_images`.* FROM `collection_images` WHERE (collection_id = 19) LIMIT 1
  [1m[36mCollectionImage Load (0.2ms)[0m  [1mSELECT `collection_images`.* FROM `collection_images` WHERE (collection_id = 21) LIMIT 1[0m
  [1m[35mCollectionImage Load (0.2ms)[0m  SELECT `collection_images`.* FROM `collection_images` WHERE (collection_id = 22) LIMIT 1
  [1m[36mCollectionImage Load (0.3ms)[0m  [1mSELECT `collection_images`.* FROM `collection_images` WHERE (collection_id = 20) LIMIT 1[0m
  [1m[35mCollectionImage Load (0.2ms)[0m  SELECT `collection_images`.* FROM `collection_images` WHERE (collection_id = 23) LIMIT 1
  [1m[36mCollectionImage Load (0.3ms)[0m  [1mSELECT `collection_images`.* FROM `collection_images` WHERE (collection_id = 24) LIMIT 1[0m
  [1m[35m (0.5ms)[0m  SELECT COUNT(*) FROM `collections` 
  Rendered collections/index.erb within layouts/admin (80.7ms)
  [1m[36mUser Load (0.4ms)[0m  [1mSELECT `users`.* FROM `users` WHERE `users`.`id` = 1 LIMIT 1[0m
Completed 200 OK in 112ms (Views: 104.7ms | ActiveRecord: 5.5ms)


Started GET "/admin/collections/admin_new_collection" for 127.0.0.1 at 2016-01-17 05:03:45 +0100
Processing by CollectionsController#admin_new_collection as HTML
  [1m[35mUser Load (0.3ms)[0m  SELECT `users`.* FROM `users` WHERE `users`.`id` = 1 LIMIT 1
  Rendered collections/_collection_form.html.erb (7.8ms)
  Rendered collections/_collection_restaurants_form.html.erb (0.3ms)
  Rendered collections/admin_new_collection.html.erb within layouts/admin (10.1ms)
Completed 200 OK in 29ms (Views: 26.7ms | ActiveRecord: 0.3ms)


Started POST "/admin/collections" for 127.0.0.1 at 2016-01-17 05:03:57 +0100
Processing by CollectionsController#create as HTML
  Parameters: {"utf8"=>"âœ“", "authenticity_token"=>"RUljBeFq2Kuk53sFNS/nHZPaIO2p/6bajboSTDM6gqE=", "admin"=>"true", "collection"=>{"name"=>"bbcdad", "description"=>"asdf"}, "collection_image"=>{"image"=>#<ActionDispatch::Http::UploadedFile:0x007f8369051d80 @original_filename="sunday_roast.png", @content_type="image/png", @headers="Content-Disposition: form-data; name=\"collection_image[image]\"; filename=\"sunday_roast.png\"\r\nContent-Type: image/png\r\n", @tempfile=#<Tempfile:/var/folders/rf/q4l8n5k56pnbjgkdtzrhq_w00000gn/T/RackMultipart20160117-28269-sqci3e>>}}
  [1m[36mCollection Load (0.3ms)[0m  [1mSELECT `collections`.* FROM `collections` WHERE `collections`.`name` = 'bbcdad' LIMIT 1[0m
  [1m[35m (0.1ms)[0m  BEGIN
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO `collections` (`created_at`, `description`, `image_url`, `name`, `updated_at`) VALUES ('2016-01-17 04:03:57', 'asdf', NULL, 'bbcdad', '2016-01-17 04:03:57')[0m
  [1m[35m (0.6ms)[0m  COMMIT
Completed 500 Internal Server Error in 7ms

NoMethodError (undefined method `collection_image' for #<Class:0x007f836d040270>):
  app/controllers/collections_controller.rb:83:in `block in create'
  app/controllers/collections_controller.rb:77:in `create'


  Rendered /Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_dispatch/middleware/templates/rescues/_trace.erb (1.1ms)
  Rendered /Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_dispatch/middleware/templates/rescues/_request_and_response.erb (1.0ms)
  Rendered /Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_dispatch/middleware/templates/rescues/diagnostics.erb within rescues/layout (43.1ms)


Started POST "/admin/collections" for 127.0.0.1 at 2016-01-17 05:04:39 +0100
Processing by CollectionsController#create as HTML
  Parameters: {"utf8"=>"âœ“", "authenticity_token"=>"RUljBeFq2Kuk53sFNS/nHZPaIO2p/6bajboSTDM6gqE=", "admin"=>"true", "collection"=>{"name"=>"bbcdada", "description"=>"asdfb"}, "collection_image"=>{"image"=>#<ActionDispatch::Http::UploadedFile:0x007f83647efdf8 @original_filename="sunday_roast.png", @content_type="image/png", @headers="Content-Disposition: form-data; name=\"collection_image[image]\"; filename=\"sunday_roast.png\"\r\nContent-Type: image/png\r\n", @tempfile=#<Tempfile:/var/folders/rf/q4l8n5k56pnbjgkdtzrhq_w00000gn/T/RackMultipart20160117-28269-pg1e1i>>}}
  [1m[36mCollection Load (0.4ms)[0m  [1mSELECT `collections`.* FROM `collections` WHERE `collections`.`name` = 'bbcdada' LIMIT 1[0m
  [1m[35m (0.1ms)[0m  BEGIN
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO `collections` (`created_at`, `description`, `image_url`, `name`, `updated_at`) VALUES ('2016-01-17 04:04:39', 'asdfb', NULL, 'bbcdada', '2016-01-17 04:04:39')[0m
  [1m[35m (0.5ms)[0m  COMMIT
  [1m[36mCollectionImage Load (0.3ms)[0m  [1mSELECT `collection_images`.* FROM `collection_images` WHERE `collection_images`.`collection_id` = 27 LIMIT 1[0m
Completed 500 Internal Server Error in 27ms

NoMethodError (undefined method `update_attributes' for nil:NilClass):
  app/controllers/collections_controller.rb:84:in `block in create'
  app/controllers/collections_controller.rb:77:in `create'


  Rendered /Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_dispatch/middleware/templates/rescues/_trace.erb (1.2ms)
  Rendered /Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_dispatch/middleware/templates/rescues/_request_and_response.erb (1.0ms)
  Rendered /Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_dispatch/middleware/templates/rescues/diagnostics.erb within rescues/layout (41.9ms)


Started POST "/admin/collections" for 127.0.0.1 at 2016-01-17 05:05:45 +0100
Processing by CollectionsController#create as HTML
  Parameters: {"utf8"=>"âœ“", "authenticity_token"=>"RUljBeFq2Kuk53sFNS/nHZPaIO2p/6bajboSTDM6gqE=", "admin"=>"true", "collection"=>{"name"=>"aaabbcdada", "description"=>"asdfb"}, "collection_image"=>{"image"=>#<ActionDispatch::Http::UploadedFile:0x007f83697cb840 @original_filename="sunday_roast.png", @content_type="image/png", @headers="Content-Disposition: form-data; name=\"collection_image[image]\"; filename=\"sunday_roast.png\"\r\nContent-Type: image/png\r\n", @tempfile=#<Tempfile:/var/folders/rf/q4l8n5k56pnbjgkdtzrhq_w00000gn/T/RackMultipart20160117-28269-1bzniv5>>}}
  [1m[35mCollection Load (0.2ms)[0m  SELECT `collections`.* FROM `collections` WHERE `collections`.`name` = 'aaabbcdada' LIMIT 1
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35m (0.1ms)[0m  COMMIT
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35mSQL (0.6ms)[0m  INSERT INTO `collections` (`created_at`, `description`, `image_url`, `name`, `updated_at`) VALUES ('2016-01-17 04:05:46', 'asdfb', NULL, 'aaabbcdada', '2016-01-17 04:05:46')
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO `collection_images` (`collection_id`, `created_at`, `image_name`, `image_uid`, `text_content`, `text_hyperlink`, `text_title`, `updated_at`) VALUES (28, '2016-01-17 04:05:46', 'sunday_roast.png', '2016/01/17/05_05_46_29_sunday_roast.png', NULL, NULL, NULL, '2016-01-17 04:05:46')[0m
  [1m[35m (0.5ms)[0m  COMMIT
Redirected to http://localhost:3000/collection/28/edit
Completed 302 Found in 30ms (ActiveRecord: 3.5ms)


Started GET "/collection/28/edit" for 127.0.0.1 at 2016-01-17 05:05:46 +0100
Processing by CollectionsController#edit_collection as HTML
  Parameters: {"id"=>"28"}
  [1m[36mUser Load (0.2ms)[0m  [1mSELECT `users`.* FROM `users` WHERE `users`.`id` = 1 LIMIT 1[0m
  [1m[35mCollection Load (0.4ms)[0m  SELECT `collections`.* FROM `collections` WHERE `collections`.`id` = 28 LIMIT 1
  [1m[36mCollectionImage Load (0.3ms)[0m  [1mSELECT `collection_images`.* FROM `collection_images` WHERE (collection_id = 28) LIMIT 1[0m
  Rendered collections/_collection_form.html.erb (7.5ms)
  Rendered collections/_collection_restaurants_form.html.erb (0.2ms)
  Rendered collections/edit_collection.html.erb within layouts/admin (9.3ms)
Completed 200 OK in 89ms (Views: 16.9ms | ActiveRecord: 1.8ms)


Started GET "/admin/restaurants" for 127.0.0.1 at 2016-01-17 05:07:23 +0100
  [1m[35m (0.2ms)[0m  SELECT COUNT(*) FROM `filter_types` WHERE (code = 'features')
  [1m[36m (0.2ms)[0m  [1mSELECT COUNT(*) FROM `filters` WHERE (code = 'offer')[0m
  [1m[35mFilter Load (0.2ms)[0m  SELECT `filters`.* FROM `filters` WHERE (code = 'offer') LIMIT 1
  [1m[36mFilterType Load (0.2ms)[0m  [1mSELECT `filter_types`.* FROM `filter_types` WHERE (code = 'features') LIMIT 1[0m
  [1m[35mCACHE (0.0ms)[0m  SELECT `filters`.* FROM `filters` WHERE (code = 'offer') LIMIT 1
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT `filter_types`.* FROM `filter_types` WHERE (code = 'features') LIMIT 1[0m
Processing by RestaurantsController#index as HTML
  [1m[35mUser Load (0.3ms)[0m  SELECT `users`.* FROM `users` WHERE `users`.`id` = 1 LIMIT 1
  Rendered shared/_restaurant_manage_tabs.html.erb (0.7ms)
  Rendered restaurants/_condition_fields.html.erb (11.5ms)
  [1m[36mRestaurant Load (0.7ms)[0m  [1mSELECT `restaurants`.* FROM `restaurants` ORDER BY disabled ASC,created_at DESC LIMIT 12 OFFSET 0[0m
  [1m[35mPhoto Load (0.4ms)[0m  SELECT `photos`.* FROM `photos` WHERE (restaurant_id = 1057 and cover = true and status = 1) LIMIT 1
  [1m[36mPhoto Load (0.4ms)[0m  [1mSELECT `photos`.* FROM `photos` WHERE `photos`.`restaurant_id` = 1057 AND `photos`.`status` = 1 ORDER BY restaurant_id ASC, created_at DESC LIMIT 1[0m
  [1m[35mCACHE (0.0ms)[0m  SELECT `photos`.* FROM `photos` WHERE (restaurant_id = 1057 and cover = true and status = 1) LIMIT 1
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT `photos`.* FROM `photos` WHERE `photos`.`restaurant_id` = 1057 AND `photos`.`status` = 1 ORDER BY restaurant_id ASC, created_at DESC LIMIT 1[0m
  [1m[35mPhoto Load (0.5ms)[0m  SELECT `photos`.* FROM `photos` WHERE (restaurant_id = 903 and cover = true and status = 1) LIMIT 1
  [1m[36mPhoto Load (0.3ms)[0m  [1mSELECT `photos`.* FROM `photos` WHERE `photos`.`restaurant_id` = 903 AND `photos`.`status` = 1 ORDER BY restaurant_id ASC, created_at DESC LIMIT 1[0m
  [1m[35mPhoto Load (0.3ms)[0m  SELECT `photos`.* FROM `photos` WHERE (restaurant_id = 876 and cover = true and status = 1) LIMIT 1
  [1m[36mPhoto Load (0.8ms)[0m  [1mSELECT `photos`.* FROM `photos` WHERE `photos`.`restaurant_id` = 876 AND `photos`.`status` = 1 ORDER BY restaurant_id ASC, created_at DESC LIMIT 1[0m
  [1m[35mPhoto Load (0.4ms)[0m  SELECT `photos`.* FROM `photos` WHERE (restaurant_id = 851 and cover = true and status = 1) LIMIT 1
  [1m[36mPhoto Load (0.3ms)[0m  [1mSELECT `photos`.* FROM `photos` WHERE `photos`.`restaurant_id` = 851 AND `photos`.`status` = 1 ORDER BY restaurant_id ASC, created_at DESC LIMIT 1[0m
  [1m[35mPhoto Load (0.4ms)[0m  SELECT `photos`.* FROM `photos` WHERE (restaurant_id = 693 and cover = true and status = 1) LIMIT 1
  [1m[36mPhoto Load (0.4ms)[0m  [1mSELECT `photos`.* FROM `photos` WHERE `photos`.`restaurant_id` = 693 AND `photos`.`status` = 1 ORDER BY restaurant_id ASC, created_at DESC LIMIT 1[0m
  [1m[35mPhoto Load (0.4ms)[0m  SELECT `photos`.* FROM `photos` WHERE (restaurant_id = 686 and cover = true and status = 1) LIMIT 1
  [1m[36mPhoto Load (0.3ms)[0m  [1mSELECT `photos`.* FROM `photos` WHERE `photos`.`restaurant_id` = 686 AND `photos`.`status` = 1 ORDER BY restaurant_id ASC, created_at DESC LIMIT 1[0m
  [1m[35mPhoto Load (0.3ms)[0m  SELECT `photos`.* FROM `photos` WHERE (restaurant_id = 669 and cover = true and status = 1) LIMIT 1
  [1m[36mPhoto Load (0.7ms)[0m  [1mSELECT `photos`.* FROM `photos` WHERE `photos`.`restaurant_id` = 669 AND `photos`.`status` = 1 ORDER BY restaurant_id ASC, created_at DESC LIMIT 1[0m
  [1m[35mPhoto Load (0.4ms)[0m  SELECT `photos`.* FROM `photos` WHERE (restaurant_id = 251 and cover = true and status = 1) LIMIT 1
  [1m[36mPhoto Load (0.3ms)[0m  [1mSELECT `photos`.* FROM `photos` WHERE `photos`.`restaurant_id` = 251 AND `photos`.`status` = 1 ORDER BY restaurant_id ASC, created_at DESC LIMIT 1[0m
  [1m[35mPhoto Load (0.3ms)[0m  SELECT `photos`.* FROM `photos` WHERE (restaurant_id = 250 and cover = true and status = 1) LIMIT 1
  [1m[36mPhoto Load (0.3ms)[0m  [1mSELECT `photos`.* FROM `photos` WHERE `photos`.`restaurant_id` = 250 AND `photos`.`status` = 1 ORDER BY restaurant_id ASC, created_at DESC LIMIT 1[0m
  [1m[35mPhoto Load (0.4ms)[0m  SELECT `photos`.* FROM `photos` WHERE (restaurant_id = 237 and cover = true and status = 1) LIMIT 1
  [1m[36mPhoto Load (0.3ms)[0m  [1mSELECT `photos`.* FROM `photos` WHERE `photos`.`restaurant_id` = 237 AND `photos`.`status` = 1 ORDER BY restaurant_id ASC, created_at DESC LIMIT 1[0m
  [1m[35mPhoto Load (0.4ms)[0m  SELECT `photos`.* FROM `photos` WHERE (restaurant_id = 231 and cover = true and status = 1) LIMIT 1
  [1m[36mPhoto Load (0.3ms)[0m  [1mSELECT `photos`.* FROM `photos` WHERE `photos`.`restaurant_id` = 231 AND `photos`.`status` = 1 ORDER BY restaurant_id ASC, created_at DESC LIMIT 1[0m
  [1m[35mPhoto Load (0.4ms)[0m  SELECT `photos`.* FROM `photos` WHERE (restaurant_id = 222 and cover = true and status = 1) LIMIT 1
  [1m[36mPhoto Load (0.3ms)[0m  [1mSELECT `photos`.* FROM `photos` WHERE `photos`.`restaurant_id` = 222 AND `photos`.`status` = 1 ORDER BY restaurant_id ASC, created_at DESC LIMIT 1[0m
  [1m[35m (0.3ms)[0m  SELECT COUNT(*) FROM `restaurants` 
  Rendered restaurants/index.html.erb within layouts/admin (158.4ms)
Completed 200 OK in 175ms (Views: 159.1ms | ActiveRecord: 12.7ms)


Started GET "/admin/collections" for 127.0.0.1 at 2016-01-17 05:07:33 +0100
Processing by CollectionsController#index as HTML
  Rendered shared/_restaurant_manage_tabs.html.erb (1.0ms)
  [1m[36mCollection Load (0.4ms)[0m  [1mSELECT `collections`.* FROM `collections` ORDER BY name ASC, created_at DESC LIMIT 12 OFFSET 0[0m
  [1m[35mCollectionImage Load (0.2ms)[0m  SELECT `collection_images`.* FROM `collection_images` WHERE (collection_id = 28) LIMIT 1
  [1m[36mCollectionImage Load (0.2ms)[0m  [1mSELECT `collection_images`.* FROM `collection_images` WHERE (collection_id = 16) LIMIT 1[0m
  [1m[35mCollectionImage Load (0.1ms)[0m  SELECT `collection_images`.* FROM `collection_images` WHERE (collection_id = 17) LIMIT 1
  [1m[36mCollectionImage Load (0.2ms)[0m  [1mSELECT `collection_images`.* FROM `collection_images` WHERE (collection_id = 18) LIMIT 1[0m
  [1m[35mCollectionImage Load (0.2ms)[0m  SELECT `collection_images`.* FROM `collection_images` WHERE (collection_id = 15) LIMIT 1
  [1m[36mCollectionImage Load (0.2ms)[0m  [1mSELECT `collection_images`.* FROM `collection_images` WHERE (collection_id = 25) LIMIT 1[0m
  [1m[35mCollectionImage Load (0.2ms)[0m  SELECT `collection_images`.* FROM `collection_images` WHERE (collection_id = 26) LIMIT 1
  [1m[36mCollectionImage Load (0.2ms)[0m  [1mSELECT `collection_images`.* FROM `collection_images` WHERE (collection_id = 27) LIMIT 1[0m
  [1m[35mCollectionImage Load (0.2ms)[0m  SELECT `collection_images`.* FROM `collection_images` WHERE (collection_id = 19) LIMIT 1
  [1m[36mCollectionImage Load (0.2ms)[0m  [1mSELECT `collection_images`.* FROM `collection_images` WHERE (collection_id = 21) LIMIT 1[0m
  [1m[35mCollectionImage Load (0.2ms)[0m  SELECT `collection_images`.* FROM `collection_images` WHERE (collection_id = 22) LIMIT 1
  [1m[36mCollectionImage Load (0.2ms)[0m  [1mSELECT `collection_images`.* FROM `collection_images` WHERE (collection_id = 20) LIMIT 1[0m
  [1m[35m (0.1ms)[0m  SELECT COUNT(*) FROM `collections` 
  Rendered collections/index.erb within layouts/admin (41.9ms)
  [1m[36mUser Load (0.4ms)[0m  [1mSELECT `users`.* FROM `users` WHERE `users`.`id` = 1 LIMIT 1[0m
Completed 200 OK in 62ms (Views: 58.2ms | ActiveRecord: 3.0ms)


Started GET "/restaurants" for 127.0.0.1 at 2016-01-17 05:07:39 +0100
Processing by RestaurantsController#index as HTML
  [1m[35mUser Load (0.5ms)[0m  SELECT `users`.* FROM `users` WHERE `users`.`id` = 1 LIMIT 1
  Rendered shared/_restaurant_manage_tabs.html.erb (1.4ms)
  Rendered restaurants/_condition_fields.html.erb (10.6ms)
  [1m[36mRestaurant Load (0.7ms)[0m  [1mSELECT `restaurants`.* FROM `restaurants` ORDER BY disabled ASC,created_at DESC LIMIT 12 OFFSET 0[0m
  [1m[35mPhoto Load (0.4ms)[0m  SELECT `photos`.* FROM `photos` WHERE (restaurant_id = 1057 and cover = true and status = 1) LIMIT 1
  [1m[36mPhoto Load (0.3ms)[0m  [1mSELECT `photos`.* FROM `photos` WHERE `photos`.`restaurant_id` = 1057 AND `photos`.`status` = 1 ORDER BY restaurant_id ASC, created_at DESC LIMIT 1[0m
  [1m[35mCACHE (0.0ms)[0m  SELECT `photos`.* FROM `photos` WHERE (restaurant_id = 1057 and cover = true and status = 1) LIMIT 1
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT `photos`.* FROM `photos` WHERE `photos`.`restaurant_id` = 1057 AND `photos`.`status` = 1 ORDER BY restaurant_id ASC, created_at DESC LIMIT 1[0m
  [1m[35mPhoto Load (0.7ms)[0m  SELECT `photos`.* FROM `photos` WHERE (restaurant_id = 903 and cover = true and status = 1) LIMIT 1
  [1m[36mPhoto Load (0.3ms)[0m  [1mSELECT `photos`.* FROM `photos` WHERE `photos`.`restaurant_id` = 903 AND `photos`.`status` = 1 ORDER BY restaurant_id ASC, created_at DESC LIMIT 1[0m
  [1m[35mPhoto Load (0.4ms)[0m  SELECT `photos`.* FROM `photos` WHERE (restaurant_id = 876 and cover = true and status = 1) LIMIT 1
  [1m[36mPhoto Load (0.3ms)[0m  [1mSELECT `photos`.* FROM `photos` WHERE `photos`.`restaurant_id` = 876 AND `photos`.`status` = 1 ORDER BY restaurant_id ASC, created_at DESC LIMIT 1[0m
  [1m[35mPhoto Load (0.3ms)[0m  SELECT `photos`.* FROM `photos` WHERE (restaurant_id = 851 and cover = true and status = 1) LIMIT 1
  [1m[36mPhoto Load (0.3ms)[0m  [1mSELECT `photos`.* FROM `photos` WHERE `photos`.`restaurant_id` = 851 AND `photos`.`status` = 1 ORDER BY restaurant_id ASC, created_at DESC LIMIT 1[0m
  [1m[35mPhoto Load (0.4ms)[0m  SELECT `photos`.* FROM `photos` WHERE (restaurant_id = 693 and cover = true and status = 1) LIMIT 1
  [1m[36mPhoto Load (0.3ms)[0m  [1mSELECT `photos`.* FROM `photos` WHERE `photos`.`restaurant_id` = 693 AND `photos`.`status` = 1 ORDER BY restaurant_id ASC, created_at DESC LIMIT 1[0m
  [1m[35mPhoto Load (0.4ms)[0m  SELECT `photos`.* FROM `photos` WHERE (restaurant_id = 686 and cover = true and status = 1) LIMIT 1
  [1m[36mPhoto Load (0.3ms)[0m  [1mSELECT `photos`.* FROM `photos` WHERE `photos`.`restaurant_id` = 686 AND `photos`.`status` = 1 ORDER BY restaurant_id ASC, created_at DESC LIMIT 1[0m
  [1m[35mPhoto Load (0.4ms)[0m  SELECT `photos`.* FROM `photos` WHERE (restaurant_id = 669 and cover = true and status = 1) LIMIT 1
  [1m[36mPhoto Load (0.3ms)[0m  [1mSELECT `photos`.* FROM `photos` WHERE `photos`.`restaurant_id` = 669 AND `photos`.`status` = 1 ORDER BY restaurant_id ASC, created_at DESC LIMIT 1[0m
  [1m[35mPhoto Load (0.3ms)[0m  SELECT `photos`.* FROM `photos` WHERE (restaurant_id = 251 and cover = true and status = 1) LIMIT 1
  [1m[36mPhoto Load (0.3ms)[0m  [1mSELECT `photos`.* FROM `photos` WHERE `photos`.`restaurant_id` = 251 AND `photos`.`status` = 1 ORDER BY restaurant_id ASC, created_at DESC LIMIT 1[0m
  [1m[35mPhoto Load (0.4ms)[0m  SELECT `photos`.* FROM `photos` WHERE (restaurant_id = 250 and cover = true and status = 1) LIMIT 1
  [1m[36mPhoto Load (0.3ms)[0m  [1mSELECT `photos`.* FROM `photos` WHERE `photos`.`restaurant_id` = 250 AND `photos`.`status` = 1 ORDER BY restaurant_id ASC, created_at DESC LIMIT 1[0m
  [1m[35mPhoto Load (0.3ms)[0m  SELECT `photos`.* FROM `photos` WHERE (restaurant_id = 237 and cover = true and status = 1) LIMIT 1
  [1m[36mPhoto Load (0.3ms)[0m  [1mSELECT `photos`.* FROM `photos` WHERE `photos`.`restaurant_id` = 237 AND `photos`.`status` = 1 ORDER BY restaurant_id ASC, created_at DESC LIMIT 1[0m
  [1m[35mPhoto Load (0.4ms)[0m  SELECT `photos`.* FROM `photos` WHERE (restaurant_id = 231 and cover = true and status = 1) LIMIT 1
  [1m[36mPhoto Load (0.3ms)[0m  [1mSELECT `photos`.* FROM `photos` WHERE `photos`.`restaurant_id` = 231 AND `photos`.`status` = 1 ORDER BY restaurant_id ASC, created_at DESC LIMIT 1[0m
  [1m[35mPhoto Load (0.4ms)[0m  SELECT `photos`.* FROM `photos` WHERE (restaurant_id = 222 and cover = true and status = 1) LIMIT 1
  [1m[36mPhoto Load (0.3ms)[0m  [1mSELECT `photos`.* FROM `photos` WHERE `photos`.`restaurant_id` = 222 AND `photos`.`status` = 1 ORDER BY restaurant_id ASC, created_at DESC LIMIT 1[0m
  [1m[35m (0.3ms)[0m  SELECT COUNT(*) FROM `restaurants` 
  Rendered restaurants/index.html.erb within layouts/admin (98.8ms)
Completed 200 OK in 109ms (Views: 96.7ms | ActiveRecord: 9.6ms)


Started GET "/test/edit" for 127.0.0.1 at 2016-01-17 05:47:44 +0100
Processing by RestaurantsController#edit as HTML
  Parameters: {"id"=>"test"}
  [1m[36mUser Load (0.4ms)[0m  [1mSELECT `users`.* FROM `users` WHERE `users`.`id` = 1 LIMIT 1[0m
  [1m[35m (0.2ms)[0m  BEGIN
  [1m[36m (0.2ms)[0m  [1mCOMMIT[0m
Completed 401 Unauthorized in 38ms


Started GET "/test/edit" for 127.0.0.1 at 2016-01-17 05:47:44 +0100
Processing by RestaurantsController#edit as HTML
  Parameters: {"id"=>"test"}
Redirected to http://localhost:3000/users/sign_in
Filter chain halted as :required_user_login rendered or redirected
Completed 302 Found in 17ms (ActiveRecord: 0.0ms)


Started GET "/users/sign_in" for 127.0.0.1 at 2016-01-17 05:47:44 +0100
Processing by SessionsController#new as HTML
  Rendered sessions/new.html.slim within layouts/application (66.1ms)
  Rendered layouts/_header.html.erb (3.1ms)
  Rendered layouts/_main_menu.html.slim (10.8ms)
  Rendered layouts/_sub_main_menu.html.slim (4.7ms)
  Rendered layouts/_flash_messages.html.erb (0.5ms)
  [1m[35mBasicsPage Load (0.5ms)[0m  SELECT `basics_pages`.* FROM `basics_pages` WHERE `basics_pages`.`page_name` = 'Footer' LIMIT 1
  Rendered layouts/_footer.html.slim (25.3ms)
Completed 200 OK in 196ms (Views: 193.6ms | ActiveRecord: 1.6ms)


Started POST "/users/sign_in" for 127.0.0.1 at 2016-01-17 05:48:08 +0100
Processing by SessionsController#create as HTML
  Parameters: {"utf8"=>"âœ“", "authenticity_token"=>"RUljBeFq2Kuk53sFNS/nHZPaIO2p/6bajboSTDM6gqE=", "user"=>{"email"=>"kevin.muller1220@gmail.com", "password"=>"[FILTERED]"}, "button"=>""}
  [1m[36mUser Load (0.5ms)[0m  [1mSELECT `users`.* FROM `users` WHERE `users`.`email` = 'kevin.muller1220@gmail.com' LIMIT 1[0m
  [1m[35m (0.1ms)[0m  BEGIN
  [1m[36m (0.1ms)[0m  [1mCOMMIT[0m
  [1m[35m (0.1ms)[0m  BEGIN
  [1m[36m (0.3ms)[0m  [1mUPDATE `users` SET `last_sign_in_at` = '2016-01-17 02:26:46', `current_sign_in_at` = '2016-01-17 04:48:08', `sign_in_count` = 9, `updated_at` = '2016-01-17 04:48:08' WHERE `users`.`id` = 1[0m
  [1m[35m (0.5ms)[0m  COMMIT
Redirected to http://localhost:3000/admin
Completed 302 Found in 84ms (ActiveRecord: 1.6ms)


Started GET "/admin" for 127.0.0.1 at 2016-01-17 05:48:08 +0100
Processing by RestaurantsController#index as HTML
  [1m[36mUser Load (0.2ms)[0m  [1mSELECT `users`.* FROM `users` WHERE `users`.`id` = 1 LIMIT 1[0m
  Rendered shared/_restaurant_manage_tabs.html.erb (0.7ms)
  Rendered restaurants/_condition_fields.html.erb (9.3ms)
  [1m[35mRestaurant Load (0.9ms)[0m  SELECT `restaurants`.* FROM `restaurants` ORDER BY disabled ASC,created_at DESC LIMIT 12 OFFSET 0
  [1m[36mPhoto Load (0.4ms)[0m  [1mSELECT `photos`.* FROM `photos` WHERE (restaurant_id = 1057 and cover = true and status = 1) LIMIT 1[0m
  [1m[35mPhoto Load (0.3ms)[0m  SELECT `photos`.* FROM `photos` WHERE `photos`.`restaurant_id` = 1057 AND `photos`.`status` = 1 ORDER BY restaurant_id ASC, created_at DESC LIMIT 1
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT `photos`.* FROM `photos` WHERE (restaurant_id = 1057 and cover = true and status = 1) LIMIT 1[0m
  [1m[35mCACHE (0.0ms)[0m  SELECT `photos`.* FROM `photos` WHERE `photos`.`restaurant_id` = 1057 AND `photos`.`status` = 1 ORDER BY restaurant_id ASC, created_at DESC LIMIT 1
  [1m[36mPhoto Load (0.4ms)[0m  [1mSELECT `photos`.* FROM `photos` WHERE (restaurant_id = 903 and cover = true and status = 1) LIMIT 1[0m
  [1m[35mPhoto Load (0.4ms)[0m  SELECT `photos`.* FROM `photos` WHERE `photos`.`restaurant_id` = 903 AND `photos`.`status` = 1 ORDER BY restaurant_id ASC, created_at DESC LIMIT 1
  [1m[36mPhoto Load (0.4ms)[0m  [1mSELECT `photos`.* FROM `photos` WHERE (restaurant_id = 876 and cover = true and status = 1) LIMIT 1[0m
  [1m[35mPhoto Load (0.3ms)[0m  SELECT `photos`.* FROM `photos` WHERE `photos`.`restaurant_id` = 876 AND `photos`.`status` = 1 ORDER BY restaurant_id ASC, created_at DESC LIMIT 1
  [1m[36mPhoto Load (0.3ms)[0m  [1mSELECT `photos`.* FROM `photos` WHERE (restaurant_id = 851 and cover = true and status = 1) LIMIT 1[0m
  [1m[35mPhoto Load (0.3ms)[0m  SELECT `photos`.* FROM `photos` WHERE `photos`.`restaurant_id` = 851 AND `photos`.`status` = 1 ORDER BY restaurant_id ASC, created_at DESC LIMIT 1
  [1m[36mPhoto Load (0.3ms)[0m  [1mSELECT `photos`.* FROM `photos` WHERE (restaurant_id = 693 and cover = true and status = 1) LIMIT 1[0m
  [1m[35mPhoto Load (0.4ms)[0m  SELECT `photos`.* FROM `photos` WHERE `photos`.`restaurant_id` = 693 AND `photos`.`status` = 1 ORDER BY restaurant_id ASC, created_at DESC LIMIT 1
  [1m[36mPhoto Load (0.4ms)[0m  [1mSELECT `photos`.* FROM `photos` WHERE (restaurant_id = 686 and cover = true and status = 1) LIMIT 1[0m
  [1m[35mPhoto Load (0.3ms)[0m  SELECT `photos`.* FROM `photos` WHERE `photos`.`restaurant_id` = 686 AND `photos`.`status` = 1 ORDER BY restaurant_id ASC, created_at DESC LIMIT 1
  [1m[36mPhoto Load (0.3ms)[0m  [1mSELECT `photos`.* FROM `photos` WHERE (restaurant_id = 669 and cover = true and status = 1) LIMIT 1[0m
  [1m[35mPhoto Load (0.3ms)[0m  SELECT `photos`.* FROM `photos` WHERE `photos`.`restaurant_id` = 669 AND `photos`.`status` = 1 ORDER BY restaurant_id ASC, created_at DESC LIMIT 1
  [1m[36mPhoto Load (0.4ms)[0m  [1mSELECT `photos`.* FROM `photos` WHERE (restaurant_id = 251 and cover = true and status = 1) LIMIT 1[0m
  [1m[35mPhoto Load (0.3ms)[0m  SELECT `photos`.* FROM `photos` WHERE `photos`.`restaurant_id` = 251 AND `photos`.`status` = 1 ORDER BY restaurant_id ASC, created_at DESC LIMIT 1
  [1m[36mPhoto Load (0.4ms)[0m  [1mSELECT `photos`.* FROM `photos` WHERE (restaurant_id = 250 and cover = true and status = 1) LIMIT 1[0m
  [1m[35mPhoto Load (0.3ms)[0m  SELECT `photos`.* FROM `photos` WHERE `photos`.`restaurant_id` = 250 AND `photos`.`status` = 1 ORDER BY restaurant_id ASC, created_at DESC LIMIT 1
  [1m[36mPhoto Load (0.4ms)[0m  [1mSELECT `photos`.* FROM `photos` WHERE (restaurant_id = 237 and cover = true and status = 1) LIMIT 1[0m
  [1m[35mPhoto Load (0.3ms)[0m  SELECT `photos`.* FROM `photos` WHERE `photos`.`restaurant_id` = 237 AND `photos`.`status` = 1 ORDER BY restaurant_id ASC, created_at DESC LIMIT 1
  [1m[36mPhoto Load (0.3ms)[0m  [1mSELECT `photos`.* FROM `photos` WHERE (restaurant_id = 231 and cover = true and status = 1) LIMIT 1[0m
  [1m[35mPhoto Load (0.3ms)[0m  SELECT `photos`.* FROM `photos` WHERE `photos`.`restaurant_id` = 231 AND `photos`.`status` = 1 ORDER BY restaurant_id ASC, created_at DESC LIMIT 1
  [1m[36mPhoto Load (0.3ms)[0m  [1mSELECT `photos`.* FROM `photos` WHERE (restaurant_id = 222 and cover = true and status = 1) LIMIT 1[0m
  [1m[35mPhoto Load (0.3ms)[0m  SELECT `photos`.* FROM `photos` WHERE `photos`.`restaurant_id` = 222 AND `photos`.`status` = 1 ORDER BY restaurant_id ASC, created_at DESC LIMIT 1
  [1m[36m (0.4ms)[0m  [1mSELECT COUNT(*) FROM `restaurants` [0m
  Rendered restaurants/index.html.erb within layouts/admin (93.7ms)
Completed 200 OK in 103ms (Views: 91.1ms | ActiveRecord: 9.6ms)


Started GET "/saras-halal-foods/edit" for 127.0.0.1 at 2016-01-17 05:48:16 +0100
Processing by RestaurantsController#edit as HTML
  Parameters: {"id"=>"saras-halal-foods"}
  [1m[35mUser Load (0.4ms)[0m  SELECT `users`.* FROM `users` WHERE `users`.`id` = 1 LIMIT 1
  [1m[36mRestaurant Load (1.7ms)[0m  [1mSELECT `restaurants`.* FROM `restaurants` WHERE `restaurants`.`slug` = 'saras-halal-foods' LIMIT 1[0m
  [1m[35mSchedule Load (5.8ms)[0m  SELECT `schedules`.* FROM `schedules` WHERE `schedules`.`restaurant_id` = 903 ORDER BY day_of_week ASC
  [1m[36mPhoto Load (0.5ms)[0m  [1mSELECT `photos`.* FROM `photos` WHERE `photos`.`restaurant_id` = 903[0m
  [1m[35mFilter Load (1.4ms)[0m  SELECT `filters`.* FROM `filters` INNER JOIN `filters_restaurants` ON `filters`.`id` = `filters_restaurants`.`filter_id` WHERE `filters_restaurants`.`restaurant_id` = 903 AND `filters`.`code` = 'cuisine'
  [1m[36m (1.4ms)[0m  [1mSELECT `filters`.id FROM `filters` INNER JOIN `filters_restaurants` ON `filters`.`id` = `filters_restaurants`.`filter_id` WHERE `filters_restaurants`.`restaurant_id` = 903[0m
  [1m[35mFilterType Load (0.2ms)[0m  SELECT `filter_types`.* FROM `filter_types` WHERE `filter_types`.`code` = 'hal_status' LIMIT 1
  [1m[36mFilterType Load (0.2ms)[0m  [1mSELECT `filter_types`.* FROM `filter_types` WHERE `filter_types`.`code` = 'price' LIMIT 1[0m
  [1m[35mFilterType Load (0.2ms)[0m  SELECT `filter_types`.* FROM `filter_types` WHERE `filter_types`.`code` = 'cuisine' LIMIT 1
  [1m[36mFilterType Load (0.2ms)[0m  [1mSELECT `filter_types`.* FROM `filter_types` WHERE `filter_types`.`code` = 'alcohol' LIMIT 1[0m
  [1m[35mFilterType Load (0.2ms)[0m  SELECT `filter_types`.* FROM `filter_types` WHERE `filter_types`.`code` = 'features' LIMIT 1
  Rendered restaurants/_googlemap.html.erb (0.1ms)
  [1m[36mFilter Load (0.3ms)[0m  [1mSELECT `filters`.* FROM `filters` WHERE `filters`.`filter_type_id` = 8[0m
  [1m[35mFilter Load (0.4ms)[0m  SELECT `filters`.* FROM `filters` WHERE `filters`.`filter_type_id` = 1 ORDER BY name ASC
  [1m[36mFilter Load (0.2ms)[0m  [1mSELECT `filters`.* FROM `filters` WHERE `filters`.`filter_type_id` = 4[0m
  [1m[35mFilter Load (0.2ms)[0m  SELECT `filters`.* FROM `filters` WHERE `filters`.`filter_type_id` = 6
  [1m[36mFilter Load (0.2ms)[0m  [1mSELECT `filters`.* FROM `filters` WHERE `filters`.`filter_type_id` = 11 AND (code != 'offer')[0m
  Rendered restaurants/_admin_form.html.erb (100.8ms)
  [1m[35mMenu Load (0.5ms)[0m  SELECT `menus`.* FROM `menus` WHERE `menus`.`restaurant_id` = 903
  Rendered restaurants/_upload_menu.html.erb (4.1ms)
  Rendered restaurants/_upload_photos.html.erb (1.4ms)
  Rendered restaurants/edit.html.erb within layouts/admin (111.2ms)
Completed 200 OK in 195ms (Views: 116.0ms | ActiveRecord: 16.3ms)


Started GET "/photos?r_id=903" for 127.0.0.1 at 2016-01-17 05:48:36 +0100
Processing by PhotosController#index as JSON
  Parameters: {"r_id"=>"903"}
  [1m[36mRestaurant Load (1.6ms)[0m  [1mSELECT `restaurants`.* FROM `restaurants` WHERE `restaurants`.`slug` = '903' LIMIT 1[0m
  [1m[35mRestaurant Load (0.8ms)[0m  SELECT `restaurants`.* FROM `restaurants` WHERE `restaurants`.`id` = 903 LIMIT 1
  [1m[36mPhoto Load (0.4ms)[0m  [1mSELECT `photos`.* FROM `photos` WHERE `photos`.`restaurant_id` = 903[0m
Completed 200 OK in 8ms (Views: 0.1ms | ActiveRecord: 2.8ms)


Started GET "/admin/restaurants" for 127.0.0.1 at 2016-01-17 05:49:12 +0100
Processing by RestaurantsController#index as HTML
  [1m[35mUser Load (0.3ms)[0m  SELECT `users`.* FROM `users` WHERE `users`.`id` = 1 LIMIT 1
  Rendered shared/_restaurant_manage_tabs.html.erb (0.9ms)
  Rendered restaurants/_condition_fields.html.erb (10.3ms)
  [1m[36mRestaurant Load (0.8ms)[0m  [1mSELECT `restaurants`.* FROM `restaurants` ORDER BY disabled ASC,created_at DESC LIMIT 12 OFFSET 0[0m
  [1m[35mPhoto Load (0.4ms)[0m  SELECT `photos`.* FROM `photos` WHERE (restaurant_id = 1057 and cover = true and status = 1) LIMIT 1
  [1m[36mPhoto Load (0.3ms)[0m  [1mSELECT `photos`.* FROM `photos` WHERE `photos`.`restaurant_id` = 1057 AND `photos`.`status` = 1 ORDER BY restaurant_id ASC, created_at DESC LIMIT 1[0m
  [1m[35mCACHE (0.0ms)[0m  SELECT `photos`.* FROM `photos` WHERE (restaurant_id = 1057 and cover = true and status = 1) LIMIT 1
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT `photos`.* FROM `photos` WHERE `photos`.`restaurant_id` = 1057 AND `photos`.`status` = 1 ORDER BY restaurant_id ASC, created_at DESC LIMIT 1[0m
  [1m[35mPhoto Load (0.4ms)[0m  SELECT `photos`.* FROM `photos` WHERE (restaurant_id = 903 and cover = true and status = 1) LIMIT 1
  [1m[36mPhoto Load (0.3ms)[0m  [1mSELECT `photos`.* FROM `photos` WHERE `photos`.`restaurant_id` = 903 AND `photos`.`status` = 1 ORDER BY restaurant_id ASC, created_at DESC LIMIT 1[0m
  [1m[35mPhoto Load (0.4ms)[0m  SELECT `photos`.* FROM `photos` WHERE (restaurant_id = 876 and cover = true and status = 1) LIMIT 1
  [1m[36mPhoto Load (0.3ms)[0m  [1mSELECT `photos`.* FROM `photos` WHERE `photos`.`restaurant_id` = 876 AND `photos`.`status` = 1 ORDER BY restaurant_id ASC, created_at DESC LIMIT 1[0m
  [1m[35mPhoto Load (0.3ms)[0m  SELECT `photos`.* FROM `photos` WHERE (restaurant_id = 851 and cover = true and status = 1) LIMIT 1
  [1m[36mPhoto Load (0.3ms)[0m  [1mSELECT `photos`.* FROM `photos` WHERE `photos`.`restaurant_id` = 851 AND `photos`.`status` = 1 ORDER BY restaurant_id ASC, created_at DESC LIMIT 1[0m
  [1m[35mPhoto Load (0.4ms)[0m  SELECT `photos`.* FROM `photos` WHERE (restaurant_id = 693 and cover = true and status = 1) LIMIT 1
  [1m[36mPhoto Load (0.3ms)[0m  [1mSELECT `photos`.* FROM `photos` WHERE `photos`.`restaurant_id` = 693 AND `photos`.`status` = 1 ORDER BY restaurant_id ASC, created_at DESC LIMIT 1[0m
  [1m[35mPhoto Load (0.4ms)[0m  SELECT `photos`.* FROM `photos` WHERE (restaurant_id = 686 and cover = true and status = 1) LIMIT 1
  [1m[36mPhoto Load (0.3ms)[0m  [1mSELECT `photos`.* FROM `photos` WHERE `photos`.`restaurant_id` = 686 AND `photos`.`status` = 1 ORDER BY restaurant_id ASC, created_at DESC LIMIT 1[0m
  [1m[35mPhoto Load (0.3ms)[0m  SELECT `photos`.* FROM `photos` WHERE (restaurant_id = 669 and cover = true and status = 1) LIMIT 1
  [1m[36mPhoto Load (0.3ms)[0m  [1mSELECT `photos`.* FROM `photos` WHERE `photos`.`restaurant_id` = 669 AND `photos`.`status` = 1 ORDER BY restaurant_id ASC, created_at DESC LIMIT 1[0m
  [1m[35mPhoto Load (0.3ms)[0m  SELECT `photos`.* FROM `photos` WHERE (restaurant_id = 251 and cover = true and status = 1) LIMIT 1
  [1m[36mPhoto Load (0.3ms)[0m  [1mSELECT `photos`.* FROM `photos` WHERE `photos`.`restaurant_id` = 251 AND `photos`.`status` = 1 ORDER BY restaurant_id ASC, created_at DESC LIMIT 1[0m
  [1m[35mPhoto Load (0.4ms)[0m  SELECT `photos`.* FROM `photos` WHERE (restaurant_id = 250 and cover = true and status = 1) LIMIT 1
  [1m[36mPhoto Load (0.3ms)[0m  [1mSELECT `photos`.* FROM `photos` WHERE `photos`.`restaurant_id` = 250 AND `photos`.`status` = 1 ORDER BY restaurant_id ASC, created_at DESC LIMIT 1[0m
  [1m[35mPhoto Load (0.3ms)[0m  SELECT `photos`.* FROM `photos` WHERE (restaurant_id = 237 and cover = true and status = 1) LIMIT 1
  [1m[36mPhoto Load (0.3ms)[0m  [1mSELECT `photos`.* FROM `photos` WHERE `photos`.`restaurant_id` = 237 AND `photos`.`status` = 1 ORDER BY restaurant_id ASC, created_at DESC LIMIT 1[0m
  [1m[35mPhoto Load (0.3ms)[0m  SELECT `photos`.* FROM `photos` WHERE (restaurant_id = 231 and cover = true and status = 1) LIMIT 1
  [1m[36mPhoto Load (0.3ms)[0m  [1mSELECT `photos`.* FROM `photos` WHERE `photos`.`restaurant_id` = 231 AND `photos`.`status` = 1 ORDER BY restaurant_id ASC, created_at DESC LIMIT 1[0m
  [1m[35mPhoto Load (0.3ms)[0m  SELECT `photos`.* FROM `photos` WHERE (restaurant_id = 222 and cover = true and status = 1) LIMIT 1
  [1m[36mPhoto Load (0.3ms)[0m  [1mSELECT `photos`.* FROM `photos` WHERE `photos`.`restaurant_id` = 222 AND `photos`.`status` = 1 ORDER BY restaurant_id ASC, created_at DESC LIMIT 1[0m
  [1m[35m (0.3ms)[0m  SELECT COUNT(*) FROM `restaurants` 
  Rendered restaurants/index.html.erb within layouts/admin (88.5ms)
Completed 200 OK in 97ms (Views: 85.5ms | ActiveRecord: 9.3ms)


Started GET "/admin/collections" for 127.0.0.1 at 2016-01-17 05:49:20 +0100
Processing by CollectionsController#index as HTML
  Rendered shared/_restaurant_manage_tabs.html.erb (1.1ms)
  [1m[36mCollection Load (0.4ms)[0m  [1mSELECT `collections`.* FROM `collections` ORDER BY name ASC, created_at DESC LIMIT 12 OFFSET 0[0m
  [1m[35mCollectionImage Load (0.3ms)[0m  SELECT `collection_images`.* FROM `collection_images` WHERE (collection_id = 28) LIMIT 1
  [1m[36mCollectionImage Load (0.2ms)[0m  [1mSELECT `collection_images`.* FROM `collection_images` WHERE (collection_id = 16) LIMIT 1[0m
  [1m[35mCollectionImage Load (0.2ms)[0m  SELECT `collection_images`.* FROM `collection_images` WHERE (collection_id = 17) LIMIT 1
  [1m[36mCollectionImage Load (0.2ms)[0m  [1mSELECT `collection_images`.* FROM `collection_images` WHERE (collection_id = 18) LIMIT 1[0m
  [1m[35mCollectionImage Load (0.2ms)[0m  SELECT `collection_images`.* FROM `collection_images` WHERE (collection_id = 15) LIMIT 1
  [1m[36mCollectionImage Load (0.2ms)[0m  [1mSELECT `collection_images`.* FROM `collection_images` WHERE (collection_id = 25) LIMIT 1[0m
  [1m[35mCollectionImage Load (0.2ms)[0m  SELECT `collection_images`.* FROM `collection_images` WHERE (collection_id = 26) LIMIT 1
  [1m[36mCollectionImage Load (0.2ms)[0m  [1mSELECT `collection_images`.* FROM `collection_images` WHERE (collection_id = 27) LIMIT 1[0m
  [1m[35mCollectionImage Load (0.2ms)[0m  SELECT `collection_images`.* FROM `collection_images` WHERE (collection_id = 19) LIMIT 1
  [1m[36mCollectionImage Load (0.2ms)[0m  [1mSELECT `collection_images`.* FROM `collection_images` WHERE (collection_id = 21) LIMIT 1[0m
  [1m[35mCollectionImage Load (0.2ms)[0m  SELECT `collection_images`.* FROM `collection_images` WHERE (collection_id = 22) LIMIT 1
  [1m[36mCollectionImage Load (0.3ms)[0m  [1mSELECT `collection_images`.* FROM `collection_images` WHERE (collection_id = 20) LIMIT 1[0m
  [1m[35m (0.2ms)[0m  SELECT COUNT(*) FROM `collections` 
  Rendered collections/index.erb within layouts/admin (45.4ms)
  [1m[36mUser Load (0.3ms)[0m  [1mSELECT `users`.* FROM `users` WHERE `users`.`id` = 1 LIMIT 1[0m
Completed 200 OK in 80ms (Views: 75.1ms | ActiveRecord: 3.5ms)


Started GET "/restaurants" for 127.0.0.1 at 2016-01-17 05:51:09 +0100
Processing by RestaurantsController#index as HTML
  [1m[35mUser Load (0.3ms)[0m  SELECT `users`.* FROM `users` WHERE `users`.`id` = 1 LIMIT 1
  Rendered shared/_restaurant_manage_tabs.html.erb (0.9ms)
  Rendered restaurants/_condition_fields.html.erb (13.7ms)
  [1m[36mRestaurant Load (0.8ms)[0m  [1mSELECT `restaurants`.* FROM `restaurants` ORDER BY disabled ASC,created_at DESC LIMIT 12 OFFSET 0[0m
  [1m[35mPhoto Load (0.4ms)[0m  SELECT `photos`.* FROM `photos` WHERE (restaurant_id = 1057 and cover = true and status = 1) LIMIT 1
  [1m[36mPhoto Load (0.5ms)[0m  [1mSELECT `photos`.* FROM `photos` WHERE `photos`.`restaurant_id` = 1057 AND `photos`.`status` = 1 ORDER BY restaurant_id ASC, created_at DESC LIMIT 1[0m
  [1m[35mCACHE (0.0ms)[0m  SELECT `photos`.* FROM `photos` WHERE (restaurant_id = 1057 and cover = true and status = 1) LIMIT 1
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT `photos`.* FROM `photos` WHERE `photos`.`restaurant_id` = 1057 AND `photos`.`status` = 1 ORDER BY restaurant_id ASC, created_at DESC LIMIT 1[0m
  [1m[35mPhoto Load (0.4ms)[0m  SELECT `photos`.* FROM `photos` WHERE (restaurant_id = 903 and cover = true and status = 1) LIMIT 1
  [1m[36mPhoto Load (0.3ms)[0m  [1mSELECT `photos`.* FROM `photos` WHERE `photos`.`restaurant_id` = 903 AND `photos`.`status` = 1 ORDER BY restaurant_id ASC, created_at DESC LIMIT 1[0m
  [1m[35mPhoto Load (0.4ms)[0m  SELECT `photos`.* FROM `photos` WHERE (restaurant_id = 876 and cover = true and status = 1) LIMIT 1
  [1m[36mPhoto Load (0.3ms)[0m  [1mSELECT `photos`.* FROM `photos` WHERE `photos`.`restaurant_id` = 876 AND `photos`.`status` = 1 ORDER BY restaurant_id ASC, created_at DESC LIMIT 1[0m
  [1m[35mPhoto Load (0.5ms)[0m  SELECT `photos`.* FROM `photos` WHERE (restaurant_id = 851 and cover = true and status = 1) LIMIT 1
  [1m[36mPhoto Load (0.3ms)[0m  [1mSELECT `photos`.* FROM `photos` WHERE `photos`.`restaurant_id` = 851 AND `photos`.`status` = 1 ORDER BY restaurant_id ASC, created_at DESC LIMIT 1[0m
  [1m[35mPhoto Load (0.3ms)[0m  SELECT `photos`.* FROM `photos` WHERE (restaurant_id = 693 and cover = true and status = 1) LIMIT 1
  [1m[36mPhoto Load (0.3ms)[0m  [1mSELECT `photos`.* FROM `photos` WHERE `photos`.`restaurant_id` = 693 AND `photos`.`status` = 1 ORDER BY restaurant_id ASC, created_at DESC LIMIT 1[0m
  [1m[35mPhoto Load (0.4ms)[0m  SELECT `photos`.* FROM `photos` WHERE (restaurant_id = 686 and cover = true and status = 1) LIMIT 1
  [1m[36mPhoto Load (0.3ms)[0m  [1mSELECT `photos`.* FROM `photos` WHERE `photos`.`restaurant_id` = 686 AND `photos`.`status` = 1 ORDER BY restaurant_id ASC, created_at DESC LIMIT 1[0m
  [1m[35mPhoto Load (0.4ms)[0m  SELECT `photos`.* FROM `photos` WHERE (restaurant_id = 669 and cover = true and status = 1) LIMIT 1
  [1m[36mPhoto Load (0.3ms)[0m  [1mSELECT `photos`.* FROM `photos` WHERE `photos`.`restaurant_id` = 669 AND `photos`.`status` = 1 ORDER BY restaurant_id ASC, created_at DESC LIMIT 1[0m
  [1m[35mPhoto Load (0.3ms)[0m  SELECT `photos`.* FROM `photos` WHERE (restaurant_id = 251 and cover = true and status = 1) LIMIT 1
  [1m[36mPhoto Load (0.3ms)[0m  [1mSELECT `photos`.* FROM `photos` WHERE `photos`.`restaurant_id` = 251 AND `photos`.`status` = 1 ORDER BY restaurant_id ASC, created_at DESC LIMIT 1[0m
  [1m[35mPhoto Load (0.3ms)[0m  SELECT `photos`.* FROM `photos` WHERE (restaurant_id = 250 and cover = true and status = 1) LIMIT 1
  [1m[36mPhoto Load (0.3ms)[0m  [1mSELECT `photos`.* FROM `photos` WHERE `photos`.`restaurant_id` = 250 AND `photos`.`status` = 1 ORDER BY restaurant_id ASC, created_at DESC LIMIT 1[0m
  [1m[35mPhoto Load (0.3ms)[0m  SELECT `photos`.* FROM `photos` WHERE (restaurant_id = 237 and cover = true and status = 1) LIMIT 1
  [1m[36mPhoto Load (0.3ms)[0m  [1mSELECT `photos`.* FROM `photos` WHERE `photos`.`restaurant_id` = 237 AND `photos`.`status` = 1 ORDER BY restaurant_id ASC, created_at DESC LIMIT 1[0m
  [1m[35mPhoto Load (0.3ms)[0m  SELECT `photos`.* FROM `photos` WHERE (restaurant_id = 231 and cover = true and status = 1) LIMIT 1
  [1m[36mPhoto Load (0.3ms)[0m  [1mSELECT `photos`.* FROM `photos` WHERE `photos`.`restaurant_id` = 231 AND `photos`.`status` = 1 ORDER BY restaurant_id ASC, created_at DESC LIMIT 1[0m
  [1m[35mPhoto Load (0.5ms)[0m  SELECT `photos`.* FROM `photos` WHERE (restaurant_id = 222 and cover = true and status = 1) LIMIT 1
  [1m[36mPhoto Load (0.3ms)[0m  [1mSELECT `photos`.* FROM `photos` WHERE `photos`.`restaurant_id` = 222 AND `photos`.`status` = 1 ORDER BY restaurant_id ASC, created_at DESC LIMIT 1[0m
  [1m[35m (0.3ms)[0m  SELECT COUNT(*) FROM `restaurants` 
  Rendered restaurants/index.html.erb within layouts/admin (100.6ms)
Completed 200 OK in 110ms (Views: 98.2ms | ActiveRecord: 9.5ms)


Started GET "/admin/collections" for 127.0.0.1 at 2016-01-17 06:00:55 +0100
Processing by CollectionsController#index as HTML
  Rendered shared/_restaurant_manage_tabs.html.erb (86.4ms)
  [1m[36mCollection Load (0.3ms)[0m  [1mSELECT `collections`.* FROM `collections` ORDER BY name ASC, created_at DESC LIMIT 12 OFFSET 0[0m
  [1m[35mCollectionImage Load (0.2ms)[0m  SELECT `collection_images`.* FROM `collection_images` WHERE (collection_id = 28) LIMIT 1
  Rendered collections/index.erb within layouts/admin (167.3ms)
Completed 500 Internal Server Error in 190ms

ActionView::Template::Error (undefined method `delete_collection_path' for #<#<Class:0x007f83644f98b0>:0x007f83644f0170>):
    35:             <%= link_to edit_collection_path(collection.id), class: "btn btn-default fa fa-edit", title: 'Edit' do %>
    36:                 <span class="open-san"><%= ' Edit' %></span>
    37:             <% end %>
    38:             <%= link_to delete_collection_path(collection.id), class: "btn btn-default fa fa-remove", title: 'Delete' do %>
    39:                 <span class="open-san"><%= ' Delete' %></span>
    40:             <% end %>
    41:           </div>
  app/views/collections/index.erb:38:in `block in _app_views_collections_index_erb___1182846876568079597_70101150155260'
  app/views/collections/index.erb:26:in `_app_views_collections_index_erb___1182846876568079597_70101150155260'
  app/controllers/collections_controller.rb:20:in `index'


  Rendered /Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_dispatch/middleware/templates/rescues/_trace.erb (1.4ms)
  Rendered /Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_dispatch/middleware/templates/rescues/_request_and_response.erb (1.0ms)
  Rendered /Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_dispatch/middleware/templates/rescues/template_error.erb within rescues/layout (44.5ms)


Started GET "/admin/collections" for 127.0.0.1 at 2016-01-17 06:06:06 +0100
Processing by CollectionsController#index as HTML
ERROR: compiling _app_views_collections_index_erb___1182846876568079597_70101226137660 RAISED /Users/kevinmuller/halalgems_backend/app/views/collections/index.erb:38: syntax error, unexpected ':', expecting '}'
...'</span>', {:action=>'delete' :id => collection.id}, class: ...
...                               ^
/Users/kevinmuller/halalgems_backend/app/views/collections/index.erb:38: syntax error, unexpected '}', expecting ')'
...>'delete' :id => collection.id}, class: "btn btn-default fa ...
...                               ^
/Users/kevinmuller/halalgems_backend/app/views/collections/index.erb:38: syntax error, unexpected ',', expecting ')'
..."btn btn-default fa fa-remove", title: 'Delete') );@output_b...
...                               ^
/Users/kevinmuller/halalgems_backend/app/views/collections/index.erb:38: syntax error, unexpected ')', expecting keyword_end
... fa-remove", title: 'Delete') );@output_buffer.safe_concat('
...                               ^
Function body:           def _app_views_collections_index_erb___1182846876568079597_70101226137660(local_assigns, output_buffer)
            _old_virtual_path, @virtual_path = @virtual_path, "collections/index";_old_output_buffer = @output_buffer;;@output_buffer = output_buffer || ActionView::OutputBuffer.new;@output_buffer.append= ( render 'shared/restaurant_manage_tabs' );@output_buffer.safe_concat('
');@output_buffer.safe_concat('
<div class="row">
  <div class="col-lg-12">
    <h3 id="restaurant_collections" class="title">');@output_buffer.append= (t 'collections.title' );@output_buffer.safe_concat('</h3>

    <span class=\'new-restaurant-button\'>
      ');@output_buffer.append=  link_to new_collection_collections_path, class: "btn btn-success fa fa-plus-circle" do @output_buffer.safe_concat('
');@output_buffer.safe_concat('        <span class="open-san">');@output_buffer.append= ( t('collections.new') );@output_buffer.safe_concat('</span>
');       end 
@output_buffer.safe_concat('    </span>

  </div>
</div>

<table class="table table-condensed table-striped">
  <thead>
  <tr>
    <th style="width: 20%">');@output_buffer.append= ( sort_link @search, :name, "Collection name" );@output_buffer.safe_concat('</th>
    <th style="width: 170px">Image</th>
    <th>');@output_buffer.append= ( sort_link @search, :description, "Description" );@output_buffer.safe_concat('</th>
    <th style="width: 25%">Actions</th>
  </tr>
  </thead>
  <tbody>
');   @collections.each_with_index do |collection, index| 
@output_buffer.safe_concat('      <tr>
        <td>');@output_buffer.append= ( collection.name );@output_buffer.safe_concat('</td>
        <td class="collection_image_column" >
          <img src="');@output_buffer.append= ( collection.image_url );@output_buffer.safe_concat('" alt="');@output_buffer.append= ( collection.name );@output_buffer.safe_concat('" class="jtooltip" title="');@output_buffer.append= ( collection.name );@output_buffer.safe_concat('" />
        </td>
        <td>');@output_buffer.append= ( collection.description );@output_buffer.safe_concat('</td>
        <td>
          <div class="btn-group btn-group-xs">
            ');@output_buffer.append=  link_to edit_collection_path(collection.id), class: "btn btn-default fa fa-edit", title: 'Edit' do @output_buffer.safe_concat('
');@output_buffer.safe_concat('                <span class="open-san">');@output_buffer.append= ( t('collections.edit') );@output_buffer.safe_concat('</span>
');             end 
@output_buffer.safe_concat('            ');@output_buffer.append= ( link_to('<span class="open-san">' + t('collections.delete') + '</span>', {:action=>'delete' :id => collection.id}, class: "btn btn-default fa fa-remove", title: 'Delete') );@output_buffer.safe_concat('
');@output_buffer.safe_concat('          </div>
        </td>
      </tr>
');   end 
@output_buffer.safe_concat('  </tbody>
</table>
<p>
  ');@output_buffer.append= ( paginate @collections, :theme => "twitter-bootstrap-3");@output_buffer.safe_concat('
');@output_buffer.safe_concat('</p>

<script>
  $(\'.carousel\').carousel({
    interval: false
  })
</script>');@output_buffer.to_s
          ensure
            @virtual_path, @output_buffer = _old_virtual_path, _old_output_buffer
          end

Backtrace: /Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_view/template.rb:297:in `module_eval'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_view/template.rb:297:in `compile'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_view/template.rb:244:in `block in compile!'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_view/template.rb:232:in `synchronize'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_view/template.rb:232:in `compile!'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_view/template.rb:144:in `block in render'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/activesupport-3.2.8/lib/active_support/notifications.rb:125:in `instrument'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_view/template.rb:143:in `render'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_view/renderer/template_renderer.rb:47:in `block (2 levels) in render_template'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_view/renderer/abstract_renderer.rb:38:in `block in instrument'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/activesupport-3.2.8/lib/active_support/notifications.rb:123:in `block in instrument'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/activesupport-3.2.8/lib/active_support/notifications/instrumenter.rb:20:in `instrument'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/activesupport-3.2.8/lib/active_support/notifications.rb:123:in `instrument'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_view/renderer/abstract_renderer.rb:38:in `instrument'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_view/renderer/template_renderer.rb:46:in `block in render_template'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_view/renderer/template_renderer.rb:54:in `render_with_layout'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_view/renderer/template_renderer.rb:45:in `render_template'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_view/renderer/template_renderer.rb:18:in `render'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/newrelic_rpm-3.7.3.204/lib/new_relic/agent/instrumentation/rails3/action_controller.rb:160:in `block in render_with_newrelic'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/newrelic_rpm-3.7.3.204/lib/new_relic/agent/method_tracer.rb:281:in `trace_execution_scoped'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/newrelic_rpm-3.7.3.204/lib/new_relic/agent/instrumentation/rails3/action_controller.rb:159:in `render_with_newrelic'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_view/renderer/renderer.rb:36:in `render_template'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_view/renderer/renderer.rb:17:in `render'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/abstract_controller/rendering.rb:110:in `_render_template'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_controller/metal/streaming.rb:225:in `_render_template'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/abstract_controller/rendering.rb:103:in `render_to_body'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_controller/metal/renderers.rb:28:in `render_to_body'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_controller/metal/compatibility.rb:50:in `render_to_body'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/abstract_controller/rendering.rb:88:in `render'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_controller/metal/rendering.rb:16:in `render'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_controller/metal/instrumentation.rb:40:in `block (2 levels) in render'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/activesupport-3.2.8/lib/active_support/core_ext/benchmark.rb:5:in `block in ms'
/Users/kevinmuller/.rvm/rubies/ruby-2.2.4/lib/ruby/2.2.0/benchmark.rb:303:in `realtime'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/activesupport-3.2.8/lib/active_support/core_ext/benchmark.rb:5:in `ms'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_controller/metal/instrumentation.rb:40:in `block in render'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_controller/metal/instrumentation.rb:83:in `cleanup_view_runtime'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/activerecord-3.2.8/lib/active_record/railties/controller_runtime.rb:24:in `cleanup_view_runtime'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_controller/metal/instrumentation.rb:39:in `render'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/bundler/gems/remotipart-aadc29e996c3/lib/remotipart/render_overrides.rb:14:in `render_with_remotipart'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_controller/metal/implicit_render.rb:10:in `default_render'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_controller/metal/mime_responds.rb:196:in `respond_to'
/Users/kevinmuller/halalgems_backend/app/controllers/collections_controller.rb:20:in `index'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_controller/metal/implicit_render.rb:4:in `send_action'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/abstract_controller/base.rb:167:in `process_action'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_controller/metal/rendering.rb:10:in `process_action'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/abstract_controller/callbacks.rb:18:in `block in process_action'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/activesupport-3.2.8/lib/active_support/callbacks.rb:436:in `_run__4154829590817395004__process_action__2909530600737073017__callbacks'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/activesupport-3.2.8/lib/active_support/callbacks.rb:405:in `__run_callback'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/activesupport-3.2.8/lib/active_support/callbacks.rb:385:in `_run_process_action_callbacks'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/activesupport-3.2.8/lib/active_support/callbacks.rb:81:in `run_callbacks'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/abstract_controller/callbacks.rb:17:in `process_action'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_controller/metal/rescue.rb:29:in `process_action'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_controller/metal/instrumentation.rb:30:in `block in process_action'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/activesupport-3.2.8/lib/active_support/notifications.rb:123:in `block in instrument'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/activesupport-3.2.8/lib/active_support/notifications/instrumenter.rb:20:in `instrument'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/activesupport-3.2.8/lib/active_support/notifications.rb:123:in `instrument'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_controller/metal/instrumentation.rb:29:in `process_action'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_controller/metal/params_wrapper.rb:207:in `process_action'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/activerecord-3.2.8/lib/active_record/railties/controller_runtime.rb:18:in `process_action'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/newrelic_rpm-3.7.3.204/lib/new_relic/agent/instrumentation/rails3/action_controller.rb:38:in `block in process_action'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/newrelic_rpm-3.7.3.204/lib/new_relic/agent/instrumentation/controller_instrumentation.rb:335:in `perform_action_with_newrelic_trace'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/newrelic_rpm-3.7.3.204/lib/new_relic/agent/instrumentation/rails3/action_controller.rb:37:in `process_action'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/abstract_controller/base.rb:121:in `process'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/abstract_controller/rendering.rb:45:in `process'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_controller/metal.rb:203:in `dispatch'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_controller/metal/rack_delegation.rb:14:in `dispatch'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_controller/metal.rb:246:in `block in action'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_dispatch/routing/route_set.rb:73:in `call'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_dispatch/routing/route_set.rb:73:in `dispatch'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_dispatch/routing/route_set.rb:36:in `call'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/journey-1.0.4/lib/journey/router.rb:68:in `block in call'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/journey-1.0.4/lib/journey/router.rb:56:in `each'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/journey-1.0.4/lib/journey/router.rb:56:in `call'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_dispatch/routing/route_set.rb:600:in `call'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/omniauth-1.1.4/lib/omniauth/strategy.rb:184:in `call!'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/omniauth-1.1.4/lib/omniauth/strategy.rb:164:in `call'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/newrelic_rpm-3.7.3.204/lib/new_relic/rack/error_collector.rb:55:in `call'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/newrelic_rpm-3.7.3.204/lib/new_relic/rack/agent_hooks.rb:32:in `call'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/newrelic_rpm-3.7.3.204/lib/new_relic/rack/browser_monitoring.rb:27:in `call'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/newrelic_rpm-3.7.3.204/lib/new_relic/rack/developer_mode.rb:45:in `call'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/galetahub-simple_captcha-0.1.5/lib/simple_captcha/middleware.rb:20:in `call'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/bundler/gems/client_side_validations-a6a515504520/lib/client_side_validations/middleware.rb:21:in `call'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/warden-1.1.1/lib/warden/manager.rb:35:in `block in call'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/warden-1.1.1/lib/warden/manager.rb:34:in `catch'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/warden-1.1.1/lib/warden/manager.rb:34:in `call'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_dispatch/middleware/best_standards_support.rb:17:in `call'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/rack-1.4.5/lib/rack/etag.rb:23:in `call'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/rack-1.4.5/lib/rack/conditionalget.rb:25:in `call'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_dispatch/middleware/head.rb:14:in `call'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/bundler/gems/remotipart-aadc29e996c3/lib/remotipart/middleware.rb:27:in `call'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_dispatch/middleware/params_parser.rb:21:in `call'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_dispatch/middleware/flash.rb:242:in `call'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/rack-1.4.5/lib/rack/session/abstract/id.rb:210:in `context'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/rack-1.4.5/lib/rack/session/abstract/id.rb:205:in `call'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_dispatch/middleware/cookies.rb:339:in `call'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/dragonfly-0.9.15/lib/dragonfly/cookie_monster.rb:9:in `call'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/activerecord-3.2.8/lib/active_record/query_cache.rb:64:in `call'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/activerecord-3.2.8/lib/active_record/connection_adapters/abstract/connection_pool.rb:473:in `call'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_dispatch/middleware/callbacks.rb:28:in `block in call'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/activesupport-3.2.8/lib/active_support/callbacks.rb:405:in `_run__664777706266228461__call__3878498479493024392__callbacks'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/activesupport-3.2.8/lib/active_support/callbacks.rb:405:in `__run_callback'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/activesupport-3.2.8/lib/active_support/callbacks.rb:385:in `_run_call_callbacks'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/activesupport-3.2.8/lib/active_support/callbacks.rb:81:in `run_callbacks'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_dispatch/middleware/callbacks.rb:27:in `call'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_dispatch/middleware/reloader.rb:65:in `call'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_dispatch/middleware/remote_ip.rb:31:in `call'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_dispatch/middleware/debug_exceptions.rb:16:in `call'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_dispatch/middleware/show_exceptions.rb:56:in `call'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/railties-3.2.8/lib/rails/rack/logger.rb:26:in `call_app'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/railties-3.2.8/lib/rails/rack/logger.rb:16:in `call'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/quiet_assets-1.0.3/lib/quiet_assets.rb:23:in `call_with_quiet_assets'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_dispatch/middleware/request_id.rb:22:in `call'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/rack-1.4.5/lib/rack/methodoverride.rb:21:in `call'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/rack-1.4.5/lib/rack/runtime.rb:17:in `call'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/activesupport-3.2.8/lib/active_support/cache/strategy/local_cache.rb:72:in `call'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/rack-1.4.5/lib/rack/lock.rb:15:in `call'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_dispatch/middleware/static.rb:62:in `call'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/dragonfly-0.9.15/lib/dragonfly/middleware.rb:13:in `call'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/rack-cache-1.2/lib/rack/cache/context.rb:136:in `forward'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/rack-cache-1.2/lib/rack/cache/context.rb:245:in `fetch'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/rack-cache-1.2/lib/rack/cache/context.rb:185:in `lookup'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/rack-cache-1.2/lib/rack/cache/context.rb:66:in `call!'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/rack-cache-1.2/lib/rack/cache/context.rb:51:in `call'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/railties-3.2.8/lib/rails/engine.rb:479:in `call'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/railties-3.2.8/lib/rails/application.rb:223:in `call'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/rack-1.4.5/lib/rack/content_length.rb:14:in `call'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/railties-3.2.8/lib/rails/rack/log_tailer.rb:17:in `call'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/rack-1.4.5/lib/rack/handler/webrick.rb:59:in `service'
/Users/kevinmuller/.rvm/rubies/ruby-2.2.4/lib/ruby/2.2.0/webrick/httpserver.rb:138:in `service'
/Users/kevinmuller/.rvm/rubies/ruby-2.2.4/lib/ruby/2.2.0/webrick/httpserver.rb:94:in `run'
/Users/kevinmuller/.rvm/rubies/ruby-2.2.4/lib/ruby/2.2.0/webrick/server.rb:294:in `block in start_thread'
  Rendered collections/index.erb within layouts/admin (1.0ms)
Completed 500 Internal Server Error in 6ms

ActionView::Template::Error (/Users/kevinmuller/halalgems_backend/app/views/collections/index.erb:38: syntax error, unexpected ':', expecting '}'
...'</span>', {:action=>'delete' :id => collection.id}, class: ...
...                               ^
/Users/kevinmuller/halalgems_backend/app/views/collections/index.erb:38: syntax error, unexpected '}', expecting ')'
...>'delete' :id => collection.id}, class: "btn btn-default fa ...
...                               ^
/Users/kevinmuller/halalgems_backend/app/views/collections/index.erb:38: syntax error, unexpected ',', expecting ')'
..."btn btn-default fa fa-remove", title: 'Delete') );@output_b...
...                               ^
/Users/kevinmuller/halalgems_backend/app/views/collections/index.erb:38: syntax error, unexpected ')', expecting keyword_end
... fa-remove", title: 'Delete') );@output_buffer.safe_concat('
...                               ^):
    35:             <%= link_to edit_collection_path(collection.id), class: "btn btn-default fa fa-edit", title: 'Edit' do %>
    36:                 <span class="open-san"><%= t('collections.edit') %></span>
    37:             <% end %>
    38:             <%= link_to('<span class="open-san">' + t('collections.delete') + '</span>', {:action=>'delete' :id => collection.id}, class: "btn btn-default fa fa-remove", title: 'Delete') %>
    39:           </div>
    40:         </td>
    41:       </tr>
  app/controllers/collections_controller.rb:20:in `index'


  Rendered /Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_dispatch/middleware/templates/rescues/_trace.erb (1.1ms)
  Rendered /Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_dispatch/middleware/templates/rescues/_request_and_response.erb (0.9ms)
  Rendered /Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_dispatch/middleware/templates/rescues/template_error.erb within rescues/layout (42.3ms)


Started GET "/admin/collections" for 127.0.0.1 at 2016-01-17 06:06:25 +0100
Processing by CollectionsController#index as HTML
  Rendered shared/_restaurant_manage_tabs.html.erb (1.3ms)
  [1m[36mCollection Load (0.6ms)[0m  [1mSELECT `collections`.* FROM `collections` ORDER BY name ASC, created_at DESC LIMIT 12 OFFSET 0[0m
  [1m[35mCollectionImage Load (0.4ms)[0m  SELECT `collection_images`.* FROM `collection_images` WHERE (collection_id = 28) LIMIT 1
  Rendered collections/index.erb within layouts/admin (13.5ms)
Completed 500 Internal Server Error in 19ms

ActionController::RoutingError (No route matches {:action=>"delete", :id=>28, :controller=>"collections"}):
  app/views/collections/index.erb:38:in `block in _app_views_collections_index_erb___1182846876568079597_70101217100120'
  app/views/collections/index.erb:26:in `_app_views_collections_index_erb___1182846876568079597_70101217100120'
  app/controllers/collections_controller.rb:20:in `index'


  Rendered /Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_dispatch/middleware/templates/rescues/routing_error.erb within rescues/layout (0.7ms)


Started GET "/admin/collections" for 127.0.0.1 at 2016-01-17 06:07:51 +0100
Processing by CollectionsController#index as HTML
  Rendered shared/_restaurant_manage_tabs.html.erb (0.7ms)
  [1m[36mCollection Load (0.2ms)[0m  [1mSELECT `collections`.* FROM `collections` ORDER BY name ASC, created_at DESC LIMIT 12 OFFSET 0[0m
  [1m[35mCollectionImage Load (0.2ms)[0m  SELECT `collection_images`.* FROM `collection_images` WHERE (collection_id = 28) LIMIT 1
  Rendered collections/index.erb within layouts/admin (31.8ms)
Completed 500 Internal Server Error in 40ms

ActionController::RoutingError (No route matches {:action=>"delete", :id=>28, :controller=>"collections"}):
  app/views/collections/index.erb:38:in `block in _app_views_collections_index_erb___1182846876568079597_70101217100120'
  app/views/collections/index.erb:26:in `_app_views_collections_index_erb___1182846876568079597_70101217100120'
  app/controllers/collections_controller.rb:20:in `index'


  Rendered /Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_dispatch/middleware/templates/rescues/routing_error.erb within rescues/layout (0.7ms)


Started GET "/admin/collections" for 127.0.0.1 at 2016-01-17 06:07:55 +0100
Processing by CollectionsController#index as HTML
  Rendered shared/_restaurant_manage_tabs.html.erb (0.8ms)
  [1m[36mCollection Load (0.4ms)[0m  [1mSELECT `collections`.* FROM `collections` ORDER BY name ASC, created_at DESC LIMIT 12 OFFSET 0[0m
  [1m[35mCollectionImage Load (0.2ms)[0m  SELECT `collection_images`.* FROM `collection_images` WHERE (collection_id = 28) LIMIT 1
  Rendered collections/index.erb within layouts/admin (8.3ms)
Completed 500 Internal Server Error in 14ms

ActionController::RoutingError (No route matches {:action=>"delete", :id=>28, :controller=>"collections"}):
  app/views/collections/index.erb:38:in `block in _app_views_collections_index_erb___1182846876568079597_70101217100120'
  app/views/collections/index.erb:26:in `_app_views_collections_index_erb___1182846876568079597_70101217100120'
  app/controllers/collections_controller.rb:20:in `index'


  Rendered /Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_dispatch/middleware/templates/rescues/routing_error.erb within rescues/layout (0.6ms)


Started GET "/admin/collections" for 127.0.0.1 at 2016-01-17 06:10:04 +0100
Processing by CollectionsController#index as HTML
  Rendered shared/_restaurant_manage_tabs.html.erb (1.1ms)
  [1m[36mCollection Load (0.6ms)[0m  [1mSELECT `collections`.* FROM `collections` ORDER BY name ASC, created_at DESC LIMIT 12 OFFSET 0[0m
  [1m[35mCollectionImage Load (0.4ms)[0m  SELECT `collection_images`.* FROM `collection_images` WHERE (collection_id = 28) LIMIT 1
  [1m[36mCollectionImage Load (0.2ms)[0m  [1mSELECT `collection_images`.* FROM `collection_images` WHERE (collection_id = 16) LIMIT 1[0m
  [1m[35mCollectionImage Load (0.2ms)[0m  SELECT `collection_images`.* FROM `collection_images` WHERE (collection_id = 17) LIMIT 1
  [1m[36mCollectionImage Load (0.2ms)[0m  [1mSELECT `collection_images`.* FROM `collection_images` WHERE (collection_id = 18) LIMIT 1[0m
  [1m[35mCollectionImage Load (0.2ms)[0m  SELECT `collection_images`.* FROM `collection_images` WHERE (collection_id = 15) LIMIT 1
  [1m[36mCollectionImage Load (0.2ms)[0m  [1mSELECT `collection_images`.* FROM `collection_images` WHERE (collection_id = 25) LIMIT 1[0m
  [1m[35mCollectionImage Load (0.2ms)[0m  SELECT `collection_images`.* FROM `collection_images` WHERE (collection_id = 26) LIMIT 1
  [1m[36mCollectionImage Load (0.2ms)[0m  [1mSELECT `collection_images`.* FROM `collection_images` WHERE (collection_id = 27) LIMIT 1[0m
  [1m[35mCollectionImage Load (0.2ms)[0m  SELECT `collection_images`.* FROM `collection_images` WHERE (collection_id = 19) LIMIT 1
  [1m[36mCollectionImage Load (0.2ms)[0m  [1mSELECT `collection_images`.* FROM `collection_images` WHERE (collection_id = 21) LIMIT 1[0m
  [1m[35mCollectionImage Load (0.2ms)[0m  SELECT `collection_images`.* FROM `collection_images` WHERE (collection_id = 22) LIMIT 1
  [1m[36mCollectionImage Load (0.2ms)[0m  [1mSELECT `collection_images`.* FROM `collection_images` WHERE (collection_id = 20) LIMIT 1[0m
  [1m[35m (0.2ms)[0m  SELECT COUNT(*) FROM `collections` 
  Rendered collections/index.erb within layouts/admin (110.6ms)
  [1m[36mUser Load (0.3ms)[0m  [1mSELECT `users`.* FROM `users` WHERE `users`.`id` = 1 LIMIT 1[0m
Completed 200 OK in 199ms (Views: 193.2ms | ActiveRecord: 4.5ms)


Started GET "/admin/collections" for 127.0.0.1 at 2016-01-17 06:17:58 +0100
Processing by CollectionsController#index as HTML
ERROR: compiling _app_views_collections_index_erb___1182846876568079597_70101213498120 RAISED /Users/kevinmuller/halalgems_backend/app/views/collections/index.erb:38: syntax error, unexpected =>, expecting '}'
... ( link_to(content_tag{:span => ' ' + t('collections.delete'...
...                               ^
/Users/kevinmuller/halalgems_backend/app/views/collections/index.erb:38: syntax error, unexpected ':', expecting '}'
...' ' + t('collections.delete') :class='open-san'}, {:action=>...
...                               ^
Function body:           def _app_views_collections_index_erb___1182846876568079597_70101213498120(local_assigns, output_buffer)
            _old_virtual_path, @virtual_path = @virtual_path, "collections/index";_old_output_buffer = @output_buffer;;@output_buffer = output_buffer || ActionView::OutputBuffer.new;@output_buffer.append= ( render 'shared/restaurant_manage_tabs' );@output_buffer.safe_concat('
');@output_buffer.safe_concat('
<div class="row">
  <div class="col-lg-12">
    <h3 id="restaurant_collections" class="title">');@output_buffer.append= (t 'collections.title' );@output_buffer.safe_concat('</h3>

    <span class=\'new-restaurant-button\'>
      ');@output_buffer.append=  link_to new_collection_collections_path, class: "btn btn-success fa fa-plus-circle" do @output_buffer.safe_concat('
');@output_buffer.safe_concat('        <span class="open-san">');@output_buffer.append= ( t('collections.new') );@output_buffer.safe_concat('</span>
');       end 
@output_buffer.safe_concat('    </span>

  </div>
</div>

<table class="table table-condensed table-striped">
  <thead>
  <tr>
    <th style="width: 20%">');@output_buffer.append= ( sort_link @search, :name, "Collection name" );@output_buffer.safe_concat('</th>
    <th style="width: 170px">Image</th>
    <th>');@output_buffer.append= ( sort_link @search, :description, "Description" );@output_buffer.safe_concat('</th>
    <th style="width: 25%">Actions</th>
  </tr>
  </thead>
  <tbody>
');   @collections.each_with_index do |collection, index| 
@output_buffer.safe_concat('      <tr>
        <td>');@output_buffer.append= ( collection.name );@output_buffer.safe_concat('</td>
        <td class="collection_image_column" >
          <img src="');@output_buffer.append= ( collection.image_url );@output_buffer.safe_concat('" alt="');@output_buffer.append= ( collection.name );@output_buffer.safe_concat('" class="jtooltip" title="');@output_buffer.append= ( collection.name );@output_buffer.safe_concat('" />
        </td>
        <td>');@output_buffer.append= ( collection.description );@output_buffer.safe_concat('</td>
        <td>
          <div class="btn-group btn-group-xs">
            ');@output_buffer.append=  link_to edit_collection_path(collection.id), class: "btn btn-default fa fa-edit", title: 'Edit' do @output_buffer.safe_concat('
');@output_buffer.safe_concat('                <span class="open-san">');@output_buffer.append= ( t('collections.edit') );@output_buffer.safe_concat('</span>
');             end 
@output_buffer.safe_concat('            ');@output_buffer.append= ( link_to(content_tag{:span => ' ' + t('collections.delete') :class='open-san'}, {:action=>'destroy', :id => collection.id}, class: "btn btn-default fa fa-minus-circle", title: 'Delete') );@output_buffer.safe_concat('
');@output_buffer.safe_concat('          </div>
        </td>
      </tr>
');   end 
@output_buffer.safe_concat('  </tbody>
</table>
<p>
  ');@output_buffer.append= ( paginate @collections, :theme => "twitter-bootstrap-3");@output_buffer.safe_concat('
');@output_buffer.safe_concat('</p>

<script>
  $(\'.carousel\').carousel({
    interval: false
  })
</script>');@output_buffer.to_s
          ensure
            @virtual_path, @output_buffer = _old_virtual_path, _old_output_buffer
          end

Backtrace: /Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_view/template.rb:297:in `module_eval'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_view/template.rb:297:in `compile'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_view/template.rb:244:in `block in compile!'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_view/template.rb:232:in `synchronize'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_view/template.rb:232:in `compile!'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_view/template.rb:144:in `block in render'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/activesupport-3.2.8/lib/active_support/notifications.rb:125:in `instrument'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_view/template.rb:143:in `render'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_view/renderer/template_renderer.rb:47:in `block (2 levels) in render_template'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_view/renderer/abstract_renderer.rb:38:in `block in instrument'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/activesupport-3.2.8/lib/active_support/notifications.rb:123:in `block in instrument'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/activesupport-3.2.8/lib/active_support/notifications/instrumenter.rb:20:in `instrument'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/activesupport-3.2.8/lib/active_support/notifications.rb:123:in `instrument'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_view/renderer/abstract_renderer.rb:38:in `instrument'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_view/renderer/template_renderer.rb:46:in `block in render_template'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_view/renderer/template_renderer.rb:54:in `render_with_layout'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_view/renderer/template_renderer.rb:45:in `render_template'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_view/renderer/template_renderer.rb:18:in `render'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/newrelic_rpm-3.7.3.204/lib/new_relic/agent/instrumentation/rails3/action_controller.rb:160:in `block in render_with_newrelic'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/newrelic_rpm-3.7.3.204/lib/new_relic/agent/method_tracer.rb:281:in `trace_execution_scoped'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/newrelic_rpm-3.7.3.204/lib/new_relic/agent/instrumentation/rails3/action_controller.rb:159:in `render_with_newrelic'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_view/renderer/renderer.rb:36:in `render_template'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_view/renderer/renderer.rb:17:in `render'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/abstract_controller/rendering.rb:110:in `_render_template'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_controller/metal/streaming.rb:225:in `_render_template'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/abstract_controller/rendering.rb:103:in `render_to_body'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_controller/metal/renderers.rb:28:in `render_to_body'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_controller/metal/compatibility.rb:50:in `render_to_body'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/abstract_controller/rendering.rb:88:in `render'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_controller/metal/rendering.rb:16:in `render'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_controller/metal/instrumentation.rb:40:in `block (2 levels) in render'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/activesupport-3.2.8/lib/active_support/core_ext/benchmark.rb:5:in `block in ms'
/Users/kevinmuller/.rvm/rubies/ruby-2.2.4/lib/ruby/2.2.0/benchmark.rb:303:in `realtime'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/activesupport-3.2.8/lib/active_support/core_ext/benchmark.rb:5:in `ms'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_controller/metal/instrumentation.rb:40:in `block in render'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_controller/metal/instrumentation.rb:83:in `cleanup_view_runtime'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/activerecord-3.2.8/lib/active_record/railties/controller_runtime.rb:24:in `cleanup_view_runtime'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_controller/metal/instrumentation.rb:39:in `render'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/bundler/gems/remotipart-aadc29e996c3/lib/remotipart/render_overrides.rb:14:in `render_with_remotipart'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_controller/metal/implicit_render.rb:10:in `default_render'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_controller/metal/mime_responds.rb:196:in `respond_to'
/Users/kevinmuller/halalgems_backend/app/controllers/collections_controller.rb:20:in `index'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_controller/metal/implicit_render.rb:4:in `send_action'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/abstract_controller/base.rb:167:in `process_action'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_controller/metal/rendering.rb:10:in `process_action'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/abstract_controller/callbacks.rb:18:in `block in process_action'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/activesupport-3.2.8/lib/active_support/callbacks.rb:436:in `_run__4154829590817395004__process_action__2909530600737073017__callbacks'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/activesupport-3.2.8/lib/active_support/callbacks.rb:405:in `__run_callback'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/activesupport-3.2.8/lib/active_support/callbacks.rb:385:in `_run_process_action_callbacks'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/activesupport-3.2.8/lib/active_support/callbacks.rb:81:in `run_callbacks'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/abstract_controller/callbacks.rb:17:in `process_action'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_controller/metal/rescue.rb:29:in `process_action'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_controller/metal/instrumentation.rb:30:in `block in process_action'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/activesupport-3.2.8/lib/active_support/notifications.rb:123:in `block in instrument'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/activesupport-3.2.8/lib/active_support/notifications/instrumenter.rb:20:in `instrument'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/activesupport-3.2.8/lib/active_support/notifications.rb:123:in `instrument'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_controller/metal/instrumentation.rb:29:in `process_action'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_controller/metal/params_wrapper.rb:207:in `process_action'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/activerecord-3.2.8/lib/active_record/railties/controller_runtime.rb:18:in `process_action'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/newrelic_rpm-3.7.3.204/lib/new_relic/agent/instrumentation/rails3/action_controller.rb:38:in `block in process_action'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/newrelic_rpm-3.7.3.204/lib/new_relic/agent/instrumentation/controller_instrumentation.rb:335:in `perform_action_with_newrelic_trace'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/newrelic_rpm-3.7.3.204/lib/new_relic/agent/instrumentation/rails3/action_controller.rb:37:in `process_action'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/abstract_controller/base.rb:121:in `process'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/abstract_controller/rendering.rb:45:in `process'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_controller/metal.rb:203:in `dispatch'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_controller/metal/rack_delegation.rb:14:in `dispatch'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_controller/metal.rb:246:in `block in action'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_dispatch/routing/route_set.rb:73:in `call'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_dispatch/routing/route_set.rb:73:in `dispatch'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_dispatch/routing/route_set.rb:36:in `call'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/journey-1.0.4/lib/journey/router.rb:68:in `block in call'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/journey-1.0.4/lib/journey/router.rb:56:in `each'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/journey-1.0.4/lib/journey/router.rb:56:in `call'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_dispatch/routing/route_set.rb:600:in `call'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/omniauth-1.1.4/lib/omniauth/strategy.rb:184:in `call!'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/omniauth-1.1.4/lib/omniauth/strategy.rb:164:in `call'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/newrelic_rpm-3.7.3.204/lib/new_relic/rack/error_collector.rb:55:in `call'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/newrelic_rpm-3.7.3.204/lib/new_relic/rack/agent_hooks.rb:32:in `call'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/newrelic_rpm-3.7.3.204/lib/new_relic/rack/browser_monitoring.rb:27:in `call'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/newrelic_rpm-3.7.3.204/lib/new_relic/rack/developer_mode.rb:45:in `call'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/galetahub-simple_captcha-0.1.5/lib/simple_captcha/middleware.rb:20:in `call'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/bundler/gems/client_side_validations-a6a515504520/lib/client_side_validations/middleware.rb:21:in `call'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/warden-1.1.1/lib/warden/manager.rb:35:in `block in call'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/warden-1.1.1/lib/warden/manager.rb:34:in `catch'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/warden-1.1.1/lib/warden/manager.rb:34:in `call'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_dispatch/middleware/best_standards_support.rb:17:in `call'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/rack-1.4.5/lib/rack/etag.rb:23:in `call'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/rack-1.4.5/lib/rack/conditionalget.rb:25:in `call'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_dispatch/middleware/head.rb:14:in `call'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/bundler/gems/remotipart-aadc29e996c3/lib/remotipart/middleware.rb:27:in `call'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_dispatch/middleware/params_parser.rb:21:in `call'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_dispatch/middleware/flash.rb:242:in `call'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/rack-1.4.5/lib/rack/session/abstract/id.rb:210:in `context'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/rack-1.4.5/lib/rack/session/abstract/id.rb:205:in `call'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_dispatch/middleware/cookies.rb:339:in `call'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/dragonfly-0.9.15/lib/dragonfly/cookie_monster.rb:9:in `call'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/activerecord-3.2.8/lib/active_record/query_cache.rb:64:in `call'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/activerecord-3.2.8/lib/active_record/connection_adapters/abstract/connection_pool.rb:473:in `call'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_dispatch/middleware/callbacks.rb:28:in `block in call'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/activesupport-3.2.8/lib/active_support/callbacks.rb:405:in `_run__664777706266228461__call__3878498479493024392__callbacks'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/activesupport-3.2.8/lib/active_support/callbacks.rb:405:in `__run_callback'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/activesupport-3.2.8/lib/active_support/callbacks.rb:385:in `_run_call_callbacks'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/activesupport-3.2.8/lib/active_support/callbacks.rb:81:in `run_callbacks'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_dispatch/middleware/callbacks.rb:27:in `call'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_dispatch/middleware/reloader.rb:65:in `call'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_dispatch/middleware/remote_ip.rb:31:in `call'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_dispatch/middleware/debug_exceptions.rb:16:in `call'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_dispatch/middleware/show_exceptions.rb:56:in `call'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/railties-3.2.8/lib/rails/rack/logger.rb:26:in `call_app'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/railties-3.2.8/lib/rails/rack/logger.rb:16:in `call'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/quiet_assets-1.0.3/lib/quiet_assets.rb:23:in `call_with_quiet_assets'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_dispatch/middleware/request_id.rb:22:in `call'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/rack-1.4.5/lib/rack/methodoverride.rb:21:in `call'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/rack-1.4.5/lib/rack/runtime.rb:17:in `call'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/activesupport-3.2.8/lib/active_support/cache/strategy/local_cache.rb:72:in `call'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/rack-1.4.5/lib/rack/lock.rb:15:in `call'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_dispatch/middleware/static.rb:62:in `call'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/dragonfly-0.9.15/lib/dragonfly/middleware.rb:13:in `call'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/rack-cache-1.2/lib/rack/cache/context.rb:136:in `forward'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/rack-cache-1.2/lib/rack/cache/context.rb:245:in `fetch'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/rack-cache-1.2/lib/rack/cache/context.rb:185:in `lookup'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/rack-cache-1.2/lib/rack/cache/context.rb:66:in `call!'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/rack-cache-1.2/lib/rack/cache/context.rb:51:in `call'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/railties-3.2.8/lib/rails/engine.rb:479:in `call'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/railties-3.2.8/lib/rails/application.rb:223:in `call'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/rack-1.4.5/lib/rack/content_length.rb:14:in `call'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/railties-3.2.8/lib/rails/rack/log_tailer.rb:17:in `call'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/rack-1.4.5/lib/rack/handler/webrick.rb:59:in `service'
/Users/kevinmuller/.rvm/rubies/ruby-2.2.4/lib/ruby/2.2.0/webrick/httpserver.rb:138:in `service'
/Users/kevinmuller/.rvm/rubies/ruby-2.2.4/lib/ruby/2.2.0/webrick/httpserver.rb:94:in `run'
/Users/kevinmuller/.rvm/rubies/ruby-2.2.4/lib/ruby/2.2.0/webrick/server.rb:294:in `block in start_thread'
  Rendered collections/index.erb within layouts/admin (2.1ms)
Completed 500 Internal Server Error in 7ms

ActionView::Template::Error (/Users/kevinmuller/halalgems_backend/app/views/collections/index.erb:38: syntax error, unexpected =>, expecting '}'
... ( link_to(content_tag{:span => ' ' + t('collections.delete'...
...                               ^
/Users/kevinmuller/halalgems_backend/app/views/collections/index.erb:38: syntax error, unexpected ':', expecting '}'
...' ' + t('collections.delete') :class='open-san'}, {:action=>...
...                               ^):
    35:             <%= link_to edit_collection_path(collection.id), class: "btn btn-default fa fa-edit", title: 'Edit' do %>
    36:                 <span class="open-san"><%= t('collections.edit') %></span>
    37:             <% end %>
    38:             <%= link_to(content_tag{:span => ' ' + t('collections.delete') :class='open-san'}, {:action=>'destroy', :id => collection.id}, class: "btn btn-default fa fa-minus-circle", title: 'Delete') %>
    39:           </div>
    40:         </td>
    41:       </tr>
  app/controllers/collections_controller.rb:20:in `index'


  Rendered /Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_dispatch/middleware/templates/rescues/_trace.erb (2.6ms)
  Rendered /Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_dispatch/middleware/templates/rescues/_request_and_response.erb (1.5ms)
  Rendered /Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_dispatch/middleware/templates/rescues/template_error.erb within rescues/layout (56.0ms)


Started GET "/admin/collections" for 127.0.0.1 at 2016-01-17 06:18:19 +0100
Processing by CollectionsController#index as HTML
ERROR: compiling _app_views_collections_index_erb___1182846876568079597_70101224149440 RAISED /Users/kevinmuller/halalgems_backend/app/views/collections/index.erb:38: syntax error, unexpected =>, expecting '}'
... ( link_to(content_tag{:span => t('collections.delete') :cla...
...                               ^
/Users/kevinmuller/halalgems_backend/app/views/collections/index.erb:38: syntax error, unexpected ':', expecting '}'
...an => t('collections.delete') :class => 'open-san'}, {:actio...
...                               ^
Function body:           def _app_views_collections_index_erb___1182846876568079597_70101224149440(local_assigns, output_buffer)
            _old_virtual_path, @virtual_path = @virtual_path, "collections/index";_old_output_buffer = @output_buffer;;@output_buffer = output_buffer || ActionView::OutputBuffer.new;@output_buffer.append= ( render 'shared/restaurant_manage_tabs' );@output_buffer.safe_concat('
');@output_buffer.safe_concat('
<div class="row">
  <div class="col-lg-12">
    <h3 id="restaurant_collections" class="title">');@output_buffer.append= (t 'collections.title' );@output_buffer.safe_concat('</h3>

    <span class=\'new-restaurant-button\'>
      ');@output_buffer.append=  link_to new_collection_collections_path, class: "btn btn-success fa fa-plus-circle" do @output_buffer.safe_concat('
');@output_buffer.safe_concat('        <span class="open-san">');@output_buffer.append= ( t('collections.new') );@output_buffer.safe_concat('</span>
');       end 
@output_buffer.safe_concat('    </span>

  </div>
</div>

<table class="table table-condensed table-striped">
  <thead>
  <tr>
    <th style="width: 20%">');@output_buffer.append= ( sort_link @search, :name, "Collection name" );@output_buffer.safe_concat('</th>
    <th style="width: 170px">Image</th>
    <th>');@output_buffer.append= ( sort_link @search, :description, "Description" );@output_buffer.safe_concat('</th>
    <th style="width: 25%">Actions</th>
  </tr>
  </thead>
  <tbody>
');   @collections.each_with_index do |collection, index| 
@output_buffer.safe_concat('      <tr>
        <td>');@output_buffer.append= ( collection.name );@output_buffer.safe_concat('</td>
        <td class="collection_image_column" >
          <img src="');@output_buffer.append= ( collection.image_url );@output_buffer.safe_concat('" alt="');@output_buffer.append= ( collection.name );@output_buffer.safe_concat('" class="jtooltip" title="');@output_buffer.append= ( collection.name );@output_buffer.safe_concat('" />
        </td>
        <td>');@output_buffer.append= ( collection.description );@output_buffer.safe_concat('</td>
        <td>
          <div class="btn-group btn-group-xs">
            ');@output_buffer.append=  link_to edit_collection_path(collection.id), class: "btn btn-default fa fa-edit", title: 'Edit' do @output_buffer.safe_concat('
');@output_buffer.safe_concat('                <span class="open-san">');@output_buffer.append= ( t('collections.edit') );@output_buffer.safe_concat('</span>
');             end 
@output_buffer.safe_concat('            ');@output_buffer.append= ( link_to(content_tag{:span => t('collections.delete') :class => 'open-san'}, {:action=>'destroy', :id => collection.id}, class: "btn btn-default fa fa-minus-circle", title: 'Delete') );@output_buffer.safe_concat('
');@output_buffer.safe_concat('          </div>
        </td>
      </tr>
');   end 
@output_buffer.safe_concat('  </tbody>
</table>
<p>
  ');@output_buffer.append= ( paginate @collections, :theme => "twitter-bootstrap-3");@output_buffer.safe_concat('
');@output_buffer.safe_concat('</p>

<script>
  $(\'.carousel\').carousel({
    interval: false
  })
</script>');@output_buffer.to_s
          ensure
            @virtual_path, @output_buffer = _old_virtual_path, _old_output_buffer
          end

Backtrace: /Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_view/template.rb:297:in `module_eval'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_view/template.rb:297:in `compile'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_view/template.rb:244:in `block in compile!'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_view/template.rb:232:in `synchronize'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_view/template.rb:232:in `compile!'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_view/template.rb:144:in `block in render'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/activesupport-3.2.8/lib/active_support/notifications.rb:125:in `instrument'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_view/template.rb:143:in `render'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_view/renderer/template_renderer.rb:47:in `block (2 levels) in render_template'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_view/renderer/abstract_renderer.rb:38:in `block in instrument'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/activesupport-3.2.8/lib/active_support/notifications.rb:123:in `block in instrument'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/activesupport-3.2.8/lib/active_support/notifications/instrumenter.rb:20:in `instrument'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/activesupport-3.2.8/lib/active_support/notifications.rb:123:in `instrument'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_view/renderer/abstract_renderer.rb:38:in `instrument'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_view/renderer/template_renderer.rb:46:in `block in render_template'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_view/renderer/template_renderer.rb:54:in `render_with_layout'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_view/renderer/template_renderer.rb:45:in `render_template'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_view/renderer/template_renderer.rb:18:in `render'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/newrelic_rpm-3.7.3.204/lib/new_relic/agent/instrumentation/rails3/action_controller.rb:160:in `block in render_with_newrelic'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/newrelic_rpm-3.7.3.204/lib/new_relic/agent/method_tracer.rb:281:in `trace_execution_scoped'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/newrelic_rpm-3.7.3.204/lib/new_relic/agent/instrumentation/rails3/action_controller.rb:159:in `render_with_newrelic'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_view/renderer/renderer.rb:36:in `render_template'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_view/renderer/renderer.rb:17:in `render'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/abstract_controller/rendering.rb:110:in `_render_template'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_controller/metal/streaming.rb:225:in `_render_template'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/abstract_controller/rendering.rb:103:in `render_to_body'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_controller/metal/renderers.rb:28:in `render_to_body'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_controller/metal/compatibility.rb:50:in `render_to_body'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/abstract_controller/rendering.rb:88:in `render'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_controller/metal/rendering.rb:16:in `render'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_controller/metal/instrumentation.rb:40:in `block (2 levels) in render'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/activesupport-3.2.8/lib/active_support/core_ext/benchmark.rb:5:in `block in ms'
/Users/kevinmuller/.rvm/rubies/ruby-2.2.4/lib/ruby/2.2.0/benchmark.rb:303:in `realtime'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/activesupport-3.2.8/lib/active_support/core_ext/benchmark.rb:5:in `ms'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_controller/metal/instrumentation.rb:40:in `block in render'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_controller/metal/instrumentation.rb:83:in `cleanup_view_runtime'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/activerecord-3.2.8/lib/active_record/railties/controller_runtime.rb:24:in `cleanup_view_runtime'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_controller/metal/instrumentation.rb:39:in `render'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/bundler/gems/remotipart-aadc29e996c3/lib/remotipart/render_overrides.rb:14:in `render_with_remotipart'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_controller/metal/implicit_render.rb:10:in `default_render'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_controller/metal/mime_responds.rb:196:in `respond_to'
/Users/kevinmuller/halalgems_backend/app/controllers/collections_controller.rb:20:in `index'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_controller/metal/implicit_render.rb:4:in `send_action'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/abstract_controller/base.rb:167:in `process_action'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_controller/metal/rendering.rb:10:in `process_action'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/abstract_controller/callbacks.rb:18:in `block in process_action'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/activesupport-3.2.8/lib/active_support/callbacks.rb:436:in `_run__4154829590817395004__process_action__2909530600737073017__callbacks'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/activesupport-3.2.8/lib/active_support/callbacks.rb:405:in `__run_callback'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/activesupport-3.2.8/lib/active_support/callbacks.rb:385:in `_run_process_action_callbacks'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/activesupport-3.2.8/lib/active_support/callbacks.rb:81:in `run_callbacks'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/abstract_controller/callbacks.rb:17:in `process_action'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_controller/metal/rescue.rb:29:in `process_action'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_controller/metal/instrumentation.rb:30:in `block in process_action'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/activesupport-3.2.8/lib/active_support/notifications.rb:123:in `block in instrument'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/activesupport-3.2.8/lib/active_support/notifications/instrumenter.rb:20:in `instrument'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/activesupport-3.2.8/lib/active_support/notifications.rb:123:in `instrument'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_controller/metal/instrumentation.rb:29:in `process_action'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_controller/metal/params_wrapper.rb:207:in `process_action'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/activerecord-3.2.8/lib/active_record/railties/controller_runtime.rb:18:in `process_action'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/newrelic_rpm-3.7.3.204/lib/new_relic/agent/instrumentation/rails3/action_controller.rb:38:in `block in process_action'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/newrelic_rpm-3.7.3.204/lib/new_relic/agent/instrumentation/controller_instrumentation.rb:335:in `perform_action_with_newrelic_trace'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/newrelic_rpm-3.7.3.204/lib/new_relic/agent/instrumentation/rails3/action_controller.rb:37:in `process_action'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/abstract_controller/base.rb:121:in `process'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/abstract_controller/rendering.rb:45:in `process'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_controller/metal.rb:203:in `dispatch'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_controller/metal/rack_delegation.rb:14:in `dispatch'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_controller/metal.rb:246:in `block in action'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_dispatch/routing/route_set.rb:73:in `call'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_dispatch/routing/route_set.rb:73:in `dispatch'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_dispatch/routing/route_set.rb:36:in `call'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/journey-1.0.4/lib/journey/router.rb:68:in `block in call'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/journey-1.0.4/lib/journey/router.rb:56:in `each'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/journey-1.0.4/lib/journey/router.rb:56:in `call'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_dispatch/routing/route_set.rb:600:in `call'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/omniauth-1.1.4/lib/omniauth/strategy.rb:184:in `call!'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/omniauth-1.1.4/lib/omniauth/strategy.rb:164:in `call'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/newrelic_rpm-3.7.3.204/lib/new_relic/rack/error_collector.rb:55:in `call'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/newrelic_rpm-3.7.3.204/lib/new_relic/rack/agent_hooks.rb:32:in `call'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/newrelic_rpm-3.7.3.204/lib/new_relic/rack/browser_monitoring.rb:27:in `call'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/newrelic_rpm-3.7.3.204/lib/new_relic/rack/developer_mode.rb:45:in `call'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/galetahub-simple_captcha-0.1.5/lib/simple_captcha/middleware.rb:20:in `call'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/bundler/gems/client_side_validations-a6a515504520/lib/client_side_validations/middleware.rb:21:in `call'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/warden-1.1.1/lib/warden/manager.rb:35:in `block in call'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/warden-1.1.1/lib/warden/manager.rb:34:in `catch'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/warden-1.1.1/lib/warden/manager.rb:34:in `call'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_dispatch/middleware/best_standards_support.rb:17:in `call'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/rack-1.4.5/lib/rack/etag.rb:23:in `call'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/rack-1.4.5/lib/rack/conditionalget.rb:25:in `call'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_dispatch/middleware/head.rb:14:in `call'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/bundler/gems/remotipart-aadc29e996c3/lib/remotipart/middleware.rb:27:in `call'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_dispatch/middleware/params_parser.rb:21:in `call'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_dispatch/middleware/flash.rb:242:in `call'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/rack-1.4.5/lib/rack/session/abstract/id.rb:210:in `context'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/rack-1.4.5/lib/rack/session/abstract/id.rb:205:in `call'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_dispatch/middleware/cookies.rb:339:in `call'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/dragonfly-0.9.15/lib/dragonfly/cookie_monster.rb:9:in `call'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/activerecord-3.2.8/lib/active_record/query_cache.rb:64:in `call'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/activerecord-3.2.8/lib/active_record/connection_adapters/abstract/connection_pool.rb:473:in `call'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_dispatch/middleware/callbacks.rb:28:in `block in call'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/activesupport-3.2.8/lib/active_support/callbacks.rb:405:in `_run__664777706266228461__call__3878498479493024392__callbacks'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/activesupport-3.2.8/lib/active_support/callbacks.rb:405:in `__run_callback'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/activesupport-3.2.8/lib/active_support/callbacks.rb:385:in `_run_call_callbacks'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/activesupport-3.2.8/lib/active_support/callbacks.rb:81:in `run_callbacks'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_dispatch/middleware/callbacks.rb:27:in `call'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_dispatch/middleware/reloader.rb:65:in `call'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_dispatch/middleware/remote_ip.rb:31:in `call'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_dispatch/middleware/debug_exceptions.rb:16:in `call'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_dispatch/middleware/show_exceptions.rb:56:in `call'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/railties-3.2.8/lib/rails/rack/logger.rb:26:in `call_app'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/railties-3.2.8/lib/rails/rack/logger.rb:16:in `call'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/quiet_assets-1.0.3/lib/quiet_assets.rb:23:in `call_with_quiet_assets'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_dispatch/middleware/request_id.rb:22:in `call'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/rack-1.4.5/lib/rack/methodoverride.rb:21:in `call'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/rack-1.4.5/lib/rack/runtime.rb:17:in `call'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/activesupport-3.2.8/lib/active_support/cache/strategy/local_cache.rb:72:in `call'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/rack-1.4.5/lib/rack/lock.rb:15:in `call'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_dispatch/middleware/static.rb:62:in `call'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/dragonfly-0.9.15/lib/dragonfly/middleware.rb:13:in `call'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/rack-cache-1.2/lib/rack/cache/context.rb:136:in `forward'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/rack-cache-1.2/lib/rack/cache/context.rb:245:in `fetch'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/rack-cache-1.2/lib/rack/cache/context.rb:185:in `lookup'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/rack-cache-1.2/lib/rack/cache/context.rb:66:in `call!'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/rack-cache-1.2/lib/rack/cache/context.rb:51:in `call'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/railties-3.2.8/lib/rails/engine.rb:479:in `call'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/railties-3.2.8/lib/rails/application.rb:223:in `call'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/rack-1.4.5/lib/rack/content_length.rb:14:in `call'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/railties-3.2.8/lib/rails/rack/log_tailer.rb:17:in `call'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/rack-1.4.5/lib/rack/handler/webrick.rb:59:in `service'
/Users/kevinmuller/.rvm/rubies/ruby-2.2.4/lib/ruby/2.2.0/webrick/httpserver.rb:138:in `service'
/Users/kevinmuller/.rvm/rubies/ruby-2.2.4/lib/ruby/2.2.0/webrick/httpserver.rb:94:in `run'
/Users/kevinmuller/.rvm/rubies/ruby-2.2.4/lib/ruby/2.2.0/webrick/server.rb:294:in `block in start_thread'
  Rendered collections/index.erb within layouts/admin (3.0ms)
Completed 500 Internal Server Error in 10ms

ActionView::Template::Error (/Users/kevinmuller/halalgems_backend/app/views/collections/index.erb:38: syntax error, unexpected =>, expecting '}'
... ( link_to(content_tag{:span => t('collections.delete') :cla...
...                               ^
/Users/kevinmuller/halalgems_backend/app/views/collections/index.erb:38: syntax error, unexpected ':', expecting '}'
...an => t('collections.delete') :class => 'open-san'}, {:actio...
...                               ^):
    35:             <%= link_to edit_collection_path(collection.id), class: "btn btn-default fa fa-edit", title: 'Edit' do %>
    36:                 <span class="open-san"><%= t('collections.edit') %></span>
    37:             <% end %>
    38:             <%= link_to(content_tag{:span => t('collections.delete') :class => 'open-san'}, {:action=>'destroy', :id => collection.id}, class: "btn btn-default fa fa-minus-circle", title: 'Delete') %>
    39:           </div>
    40:         </td>
    41:       </tr>
  app/controllers/collections_controller.rb:20:in `index'


  Rendered /Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_dispatch/middleware/templates/rescues/_trace.erb (1.6ms)
  Rendered /Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_dispatch/middleware/templates/rescues/_request_and_response.erb (0.9ms)
  Rendered /Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_dispatch/middleware/templates/rescues/template_error.erb within rescues/layout (43.4ms)


Started GET "/admin/collections" for 127.0.0.1 at 2016-01-17 06:19:32 +0100
Processing by CollectionsController#index as HTML
ERROR: compiling _app_views_collections_index_erb___1182846876568079597_70101218176920 RAISED /Users/kevinmuller/halalgems_backend/app/views/collections/index.erb:38: syntax error, unexpected =>, expecting '}'
...fer.append=  link_to {:action=>'destroy', :id => collection....
...                               ^
/Users/kevinmuller/halalgems_backend/app/views/collections/index.erb:38: syntax error, unexpected ',', expecting '}'
...=  link_to {:action=>'destroy', :id => collection.id}, class...
...                               ^
/Users/kevinmuller/halalgems_backend/app/views/collections/index.erb:38: syntax error, unexpected tLABEL
..., :id => collection.id}, class: "btn btn-default fa fa-remov...
...                               ^
/Users/kevinmuller/halalgems_backend/app/views/collections/index.erb:38: syntax error, unexpected ',', expecting keyword_end
..."btn btn-default fa fa-remove", title: 'Delete' do @output_b...
...                               ^
/Users/kevinmuller/halalgems_backend/app/views/collections/index.erb:38: syntax error, unexpected keyword_do, expecting keyword_end
... fa-remove", title: 'Delete' do @output_buffer.safe_concat('
...                               ^
/Users/kevinmuller/halalgems_backend/app/views/collections/index.erb:56: syntax error, unexpected keyword_ensure, expecting end-of-input
Function body:           def _app_views_collections_index_erb___1182846876568079597_70101218176920(local_assigns, output_buffer)
            _old_virtual_path, @virtual_path = @virtual_path, "collections/index";_old_output_buffer = @output_buffer;;@output_buffer = output_buffer || ActionView::OutputBuffer.new;@output_buffer.append= ( render 'shared/restaurant_manage_tabs' );@output_buffer.safe_concat('
');@output_buffer.safe_concat('
<div class="row">
  <div class="col-lg-12">
    <h3 id="restaurant_collections" class="title">');@output_buffer.append= (t 'collections.title' );@output_buffer.safe_concat('</h3>

    <span class=\'new-restaurant-button\'>
      ');@output_buffer.append=  link_to new_collection_collections_path, class: "btn btn-success fa fa-plus-circle" do @output_buffer.safe_concat('
');@output_buffer.safe_concat('        <span class="open-san">');@output_buffer.append= ( t('collections.new') );@output_buffer.safe_concat('</span>
');       end 
@output_buffer.safe_concat('    </span>

  </div>
</div>

<table class="table table-condensed table-striped">
  <thead>
  <tr>
    <th style="width: 20%">');@output_buffer.append= ( sort_link @search, :name, "Collection name" );@output_buffer.safe_concat('</th>
    <th style="width: 170px">Image</th>
    <th>');@output_buffer.append= ( sort_link @search, :description, "Description" );@output_buffer.safe_concat('</th>
    <th style="width: 25%">Actions</th>
  </tr>
  </thead>
  <tbody>
');   @collections.each_with_index do |collection, index| 
@output_buffer.safe_concat('      <tr>
        <td>');@output_buffer.append= ( collection.name );@output_buffer.safe_concat('</td>
        <td class="collection_image_column" >
          <img src="');@output_buffer.append= ( collection.image_url );@output_buffer.safe_concat('" alt="');@output_buffer.append= ( collection.name );@output_buffer.safe_concat('" class="jtooltip" title="');@output_buffer.append= ( collection.name );@output_buffer.safe_concat('" />
        </td>
        <td>');@output_buffer.append= ( collection.description );@output_buffer.safe_concat('</td>
        <td>
          <div class="btn-group btn-group-xs">
            ');@output_buffer.append=  link_to edit_collection_path(collection.id), class: "btn btn-default fa fa-edit", title: 'Edit' do @output_buffer.safe_concat('
');@output_buffer.safe_concat('                <span class="open-san">');@output_buffer.append= ( t('collections.edit') );@output_buffer.safe_concat('</span>
');             end 
@output_buffer.safe_concat('            ');@output_buffer.append=  link_to {:action=>'destroy', :id => collection.id}, class: "btn btn-default fa fa-remove", title: 'Delete' do @output_buffer.safe_concat('
');@output_buffer.safe_concat('                <span class="open-san">');@output_buffer.append= ( t('collections.delete') );@output_buffer.safe_concat('</span>
');             end 
@output_buffer.safe_concat('          </div>
        </td>
      </tr>
');   end 
@output_buffer.safe_concat('  </tbody>
</table>
<p>
  ');@output_buffer.append= ( paginate @collections, :theme => "twitter-bootstrap-3");@output_buffer.safe_concat('
');@output_buffer.safe_concat('</p>

<script>
  $(\'.carousel\').carousel({
    interval: false
  })
</script>');@output_buffer.to_s
          ensure
            @virtual_path, @output_buffer = _old_virtual_path, _old_output_buffer
          end

Backtrace: /Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_view/template.rb:297:in `module_eval'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_view/template.rb:297:in `compile'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_view/template.rb:244:in `block in compile!'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_view/template.rb:232:in `synchronize'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_view/template.rb:232:in `compile!'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_view/template.rb:144:in `block in render'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/activesupport-3.2.8/lib/active_support/notifications.rb:125:in `instrument'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_view/template.rb:143:in `render'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_view/renderer/template_renderer.rb:47:in `block (2 levels) in render_template'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_view/renderer/abstract_renderer.rb:38:in `block in instrument'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/activesupport-3.2.8/lib/active_support/notifications.rb:123:in `block in instrument'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/activesupport-3.2.8/lib/active_support/notifications/instrumenter.rb:20:in `instrument'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/activesupport-3.2.8/lib/active_support/notifications.rb:123:in `instrument'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_view/renderer/abstract_renderer.rb:38:in `instrument'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_view/renderer/template_renderer.rb:46:in `block in render_template'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_view/renderer/template_renderer.rb:54:in `render_with_layout'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_view/renderer/template_renderer.rb:45:in `render_template'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_view/renderer/template_renderer.rb:18:in `render'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/newrelic_rpm-3.7.3.204/lib/new_relic/agent/instrumentation/rails3/action_controller.rb:160:in `block in render_with_newrelic'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/newrelic_rpm-3.7.3.204/lib/new_relic/agent/method_tracer.rb:281:in `trace_execution_scoped'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/newrelic_rpm-3.7.3.204/lib/new_relic/agent/instrumentation/rails3/action_controller.rb:159:in `render_with_newrelic'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_view/renderer/renderer.rb:36:in `render_template'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_view/renderer/renderer.rb:17:in `render'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/abstract_controller/rendering.rb:110:in `_render_template'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_controller/metal/streaming.rb:225:in `_render_template'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/abstract_controller/rendering.rb:103:in `render_to_body'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_controller/metal/renderers.rb:28:in `render_to_body'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_controller/metal/compatibility.rb:50:in `render_to_body'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/abstract_controller/rendering.rb:88:in `render'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_controller/metal/rendering.rb:16:in `render'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_controller/metal/instrumentation.rb:40:in `block (2 levels) in render'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/activesupport-3.2.8/lib/active_support/core_ext/benchmark.rb:5:in `block in ms'
/Users/kevinmuller/.rvm/rubies/ruby-2.2.4/lib/ruby/2.2.0/benchmark.rb:303:in `realtime'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/activesupport-3.2.8/lib/active_support/core_ext/benchmark.rb:5:in `ms'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_controller/metal/instrumentation.rb:40:in `block in render'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_controller/metal/instrumentation.rb:83:in `cleanup_view_runtime'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/activerecord-3.2.8/lib/active_record/railties/controller_runtime.rb:24:in `cleanup_view_runtime'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_controller/metal/instrumentation.rb:39:in `render'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/bundler/gems/remotipart-aadc29e996c3/lib/remotipart/render_overrides.rb:14:in `render_with_remotipart'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_controller/metal/implicit_render.rb:10:in `default_render'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_controller/metal/mime_responds.rb:196:in `respond_to'
/Users/kevinmuller/halalgems_backend/app/controllers/collections_controller.rb:20:in `index'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_controller/metal/implicit_render.rb:4:in `send_action'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/abstract_controller/base.rb:167:in `process_action'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_controller/metal/rendering.rb:10:in `process_action'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/abstract_controller/callbacks.rb:18:in `block in process_action'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/activesupport-3.2.8/lib/active_support/callbacks.rb:436:in `_run__4154829590817395004__process_action__2909530600737073017__callbacks'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/activesupport-3.2.8/lib/active_support/callbacks.rb:405:in `__run_callback'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/activesupport-3.2.8/lib/active_support/callbacks.rb:385:in `_run_process_action_callbacks'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/activesupport-3.2.8/lib/active_support/callbacks.rb:81:in `run_callbacks'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/abstract_controller/callbacks.rb:17:in `process_action'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_controller/metal/rescue.rb:29:in `process_action'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_controller/metal/instrumentation.rb:30:in `block in process_action'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/activesupport-3.2.8/lib/active_support/notifications.rb:123:in `block in instrument'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/activesupport-3.2.8/lib/active_support/notifications/instrumenter.rb:20:in `instrument'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/activesupport-3.2.8/lib/active_support/notifications.rb:123:in `instrument'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_controller/metal/instrumentation.rb:29:in `process_action'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_controller/metal/params_wrapper.rb:207:in `process_action'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/activerecord-3.2.8/lib/active_record/railties/controller_runtime.rb:18:in `process_action'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/newrelic_rpm-3.7.3.204/lib/new_relic/agent/instrumentation/rails3/action_controller.rb:38:in `block in process_action'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/newrelic_rpm-3.7.3.204/lib/new_relic/agent/instrumentation/controller_instrumentation.rb:335:in `perform_action_with_newrelic_trace'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/newrelic_rpm-3.7.3.204/lib/new_relic/agent/instrumentation/rails3/action_controller.rb:37:in `process_action'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/abstract_controller/base.rb:121:in `process'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/abstract_controller/rendering.rb:45:in `process'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_controller/metal.rb:203:in `dispatch'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_controller/metal/rack_delegation.rb:14:in `dispatch'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_controller/metal.rb:246:in `block in action'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_dispatch/routing/route_set.rb:73:in `call'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_dispatch/routing/route_set.rb:73:in `dispatch'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_dispatch/routing/route_set.rb:36:in `call'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/journey-1.0.4/lib/journey/router.rb:68:in `block in call'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/journey-1.0.4/lib/journey/router.rb:56:in `each'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/journey-1.0.4/lib/journey/router.rb:56:in `call'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_dispatch/routing/route_set.rb:600:in `call'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/omniauth-1.1.4/lib/omniauth/strategy.rb:184:in `call!'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/omniauth-1.1.4/lib/omniauth/strategy.rb:164:in `call'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/newrelic_rpm-3.7.3.204/lib/new_relic/rack/error_collector.rb:55:in `call'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/newrelic_rpm-3.7.3.204/lib/new_relic/rack/agent_hooks.rb:32:in `call'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/newrelic_rpm-3.7.3.204/lib/new_relic/rack/browser_monitoring.rb:27:in `call'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/newrelic_rpm-3.7.3.204/lib/new_relic/rack/developer_mode.rb:45:in `call'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/galetahub-simple_captcha-0.1.5/lib/simple_captcha/middleware.rb:20:in `call'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/bundler/gems/client_side_validations-a6a515504520/lib/client_side_validations/middleware.rb:21:in `call'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/warden-1.1.1/lib/warden/manager.rb:35:in `block in call'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/warden-1.1.1/lib/warden/manager.rb:34:in `catch'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/warden-1.1.1/lib/warden/manager.rb:34:in `call'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_dispatch/middleware/best_standards_support.rb:17:in `call'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/rack-1.4.5/lib/rack/etag.rb:23:in `call'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/rack-1.4.5/lib/rack/conditionalget.rb:25:in `call'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_dispatch/middleware/head.rb:14:in `call'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/bundler/gems/remotipart-aadc29e996c3/lib/remotipart/middleware.rb:27:in `call'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_dispatch/middleware/params_parser.rb:21:in `call'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_dispatch/middleware/flash.rb:242:in `call'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/rack-1.4.5/lib/rack/session/abstract/id.rb:210:in `context'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/rack-1.4.5/lib/rack/session/abstract/id.rb:205:in `call'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_dispatch/middleware/cookies.rb:339:in `call'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/dragonfly-0.9.15/lib/dragonfly/cookie_monster.rb:9:in `call'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/activerecord-3.2.8/lib/active_record/query_cache.rb:64:in `call'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/activerecord-3.2.8/lib/active_record/connection_adapters/abstract/connection_pool.rb:473:in `call'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_dispatch/middleware/callbacks.rb:28:in `block in call'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/activesupport-3.2.8/lib/active_support/callbacks.rb:405:in `_run__664777706266228461__call__3878498479493024392__callbacks'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/activesupport-3.2.8/lib/active_support/callbacks.rb:405:in `__run_callback'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/activesupport-3.2.8/lib/active_support/callbacks.rb:385:in `_run_call_callbacks'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/activesupport-3.2.8/lib/active_support/callbacks.rb:81:in `run_callbacks'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_dispatch/middleware/callbacks.rb:27:in `call'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_dispatch/middleware/reloader.rb:65:in `call'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_dispatch/middleware/remote_ip.rb:31:in `call'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_dispatch/middleware/debug_exceptions.rb:16:in `call'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_dispatch/middleware/show_exceptions.rb:56:in `call'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/railties-3.2.8/lib/rails/rack/logger.rb:26:in `call_app'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/railties-3.2.8/lib/rails/rack/logger.rb:16:in `call'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/quiet_assets-1.0.3/lib/quiet_assets.rb:23:in `call_with_quiet_assets'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_dispatch/middleware/request_id.rb:22:in `call'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/rack-1.4.5/lib/rack/methodoverride.rb:21:in `call'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/rack-1.4.5/lib/rack/runtime.rb:17:in `call'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/activesupport-3.2.8/lib/active_support/cache/strategy/local_cache.rb:72:in `call'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/rack-1.4.5/lib/rack/lock.rb:15:in `call'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_dispatch/middleware/static.rb:62:in `call'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/dragonfly-0.9.15/lib/dragonfly/middleware.rb:13:in `call'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/rack-cache-1.2/lib/rack/cache/context.rb:136:in `forward'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/rack-cache-1.2/lib/rack/cache/context.rb:245:in `fetch'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/rack-cache-1.2/lib/rack/cache/context.rb:185:in `lookup'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/rack-cache-1.2/lib/rack/cache/context.rb:66:in `call!'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/rack-cache-1.2/lib/rack/cache/context.rb:51:in `call'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/railties-3.2.8/lib/rails/engine.rb:479:in `call'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/railties-3.2.8/lib/rails/application.rb:223:in `call'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/rack-1.4.5/lib/rack/content_length.rb:14:in `call'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/railties-3.2.8/lib/rails/rack/log_tailer.rb:17:in `call'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/rack-1.4.5/lib/rack/handler/webrick.rb:59:in `service'
/Users/kevinmuller/.rvm/rubies/ruby-2.2.4/lib/ruby/2.2.0/webrick/httpserver.rb:138:in `service'
/Users/kevinmuller/.rvm/rubies/ruby-2.2.4/lib/ruby/2.2.0/webrick/httpserver.rb:94:in `run'
/Users/kevinmuller/.rvm/rubies/ruby-2.2.4/lib/ruby/2.2.0/webrick/server.rb:294:in `block in start_thread'
  Rendered collections/index.erb within layouts/admin (2.6ms)
Completed 500 Internal Server Error in 9ms

ActionView::Template::Error (/Users/kevinmuller/halalgems_backend/app/views/collections/index.erb:38: syntax error, unexpected =>, expecting '}'
...fer.append=  link_to {:action=>'destroy', :id => collection....
...                               ^
/Users/kevinmuller/halalgems_backend/app/views/collections/index.erb:38: syntax error, unexpected ',', expecting '}'
...=  link_to {:action=>'destroy', :id => collection.id}, class...
...                               ^
/Users/kevinmuller/halalgems_backend/app/views/collections/index.erb:38: syntax error, unexpected tLABEL
..., :id => collection.id}, class: "btn btn-default fa fa-remov...
...                               ^
/Users/kevinmuller/halalgems_backend/app/views/collections/index.erb:38: syntax error, unexpected ',', expecting keyword_end
..."btn btn-default fa fa-remove", title: 'Delete' do @output_b...
...                               ^
/Users/kevinmuller/halalgems_backend/app/views/collections/index.erb:38: syntax error, unexpected keyword_do, expecting keyword_end
... fa-remove", title: 'Delete' do @output_buffer.safe_concat('
...                               ^
/Users/kevinmuller/halalgems_backend/app/views/collections/index.erb:56: syntax error, unexpected keyword_ensure, expecting end-of-input):
    35:             <%= link_to edit_collection_path(collection.id), class: "btn btn-default fa fa-edit", title: 'Edit' do %>
    36:                 <span class="open-san"><%= t('collections.edit') %></span>
    37:             <% end %>
    38:             <%= link_to {:action=>'destroy', :id => collection.id}, class: "btn btn-default fa fa-remove", title: 'Delete' do %>
    39:                 <span class="open-san"><%= t('collections.delete') %></span>
    40:             <% end %>
    41:           </div>
  app/controllers/collections_controller.rb:20:in `index'


  Rendered /Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_dispatch/middleware/templates/rescues/_trace.erb (1.5ms)
  Rendered /Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_dispatch/middleware/templates/rescues/_request_and_response.erb (1.1ms)
  Rendered /Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_dispatch/middleware/templates/rescues/template_error.erb within rescues/layout (42.8ms)


Started GET "/admin/collections" for 127.0.0.1 at 2016-01-17 06:23:20 +0100
Processing by CollectionsController#index as HTML
  Rendered shared/_restaurant_manage_tabs.html.erb (1.3ms)
  [1m[35mCollection Load (0.4ms)[0m  SELECT `collections`.* FROM `collections` ORDER BY name ASC, created_at DESC LIMIT 12 OFFSET 0
  [1m[36mCollectionImage Load (0.3ms)[0m  [1mSELECT `collection_images`.* FROM `collection_images` WHERE (collection_id = 28) LIMIT 1[0m
  Rendered collections/index.erb within layouts/admin (36.9ms)
Completed 500 Internal Server Error in 41ms

ActionView::Template::Error (undefined method `destroy_collection_path' for #<#<Class:0x007f836c653988>:0x007f83692c9f90>):
    35:             <%= link_to edit_collection_path(collection.id), class: "btn btn-default fa fa-edit", title: 'Edit' do %>
    36:                 <span class="open-san"><%= t('collections.edit') %></span>
    37:             <% end %>
    38:             <%= link_to destroy_collection_path(collection.id), class: "btn btn-default fa fa-remove", title: 'Delete' do %>
    39:                 <span class="open-san"><%= t('collections.delete') %></span>
    40:             <% end %>
    41:           </div>
  app/views/collections/index.erb:38:in `block in _app_views_collections_index_erb___1182846876568079597_70101190983740'
  app/views/collections/index.erb:26:in `_app_views_collections_index_erb___1182846876568079597_70101190983740'
  app/controllers/collections_controller.rb:20:in `index'


  Rendered /Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_dispatch/middleware/templates/rescues/_trace.erb (1.4ms)
  Rendered /Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_dispatch/middleware/templates/rescues/_request_and_response.erb (0.9ms)
  Rendered /Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_dispatch/middleware/templates/rescues/template_error.erb within rescues/layout (45.8ms)


Started GET "/admin/collections" for 127.0.0.1 at 2016-01-17 06:30:01 +0100
Processing by CollectionsController#index as HTML
ERROR: compiling _app_views_collections_index_erb___1182846876568079597_70101187073360 RAISED /Users/kevinmuller/halalgems_backend/app/views/collections/index.erb:38: syntax error, unexpected tIDENTIFIER, expecting ')'
... ( link_to( content_tag(:span t('collections.delete'), class...
...                               ^
/Users/kevinmuller/halalgems_backend/app/views/collections/index.erb:38: syntax error, unexpected ',', expecting ')'
...(:span t('collections.delete'), class: 'open-san'), {:action...
...                               ^
/Users/kevinmuller/halalgems_backend/app/views/collections/index.erb:38: syntax error, unexpected tLABEL
...y', :id=>collection.id}, class: "btn btn-default fa fa-minus...
...                               ^
/Users/kevinmuller/halalgems_backend/app/views/collections/index.erb:38: syntax error, unexpected ')', expecting keyword_end
...tn-default fa fa-minus-circle") );@output_buffer.safe_concat...
...                               ^
Function body:           def _app_views_collections_index_erb___1182846876568079597_70101187073360(local_assigns, output_buffer)
            _old_virtual_path, @virtual_path = @virtual_path, "collections/index";_old_output_buffer = @output_buffer;;@output_buffer = output_buffer || ActionView::OutputBuffer.new;@output_buffer.append= ( render 'shared/restaurant_manage_tabs' );@output_buffer.safe_concat('
');@output_buffer.safe_concat('
<div class="row">
  <div class="col-lg-12">
    <h3 id="restaurant_collections" class="title">');@output_buffer.append= (t 'collections.title' );@output_buffer.safe_concat('</h3>

    <span class=\'new-restaurant-button\'>
      ');@output_buffer.append=  link_to new_collection_collections_path, class: "btn btn-success fa fa-plus-circle" do @output_buffer.safe_concat('
');@output_buffer.safe_concat('        <span class="open-san">');@output_buffer.append= ( t('collections.new') );@output_buffer.safe_concat('</span>
');       end 
@output_buffer.safe_concat('    </span>

  </div>
</div>

<table class="table table-condensed table-striped">
  <thead>
  <tr>
    <th style="width: 20%">');@output_buffer.append= ( sort_link @search, :name, "Collection name" );@output_buffer.safe_concat('</th>
    <th style="width: 170px">Image</th>
    <th>');@output_buffer.append= ( sort_link @search, :description, "Description" );@output_buffer.safe_concat('</th>
    <th style="width: 25%">Actions</th>
  </tr>
  </thead>
  <tbody>
');   @collections.each_with_index do |collection, index| 
@output_buffer.safe_concat('      <tr>
        <td>');@output_buffer.append= ( collection.name );@output_buffer.safe_concat('</td>
        <td class="collection_image_column" >
          <img src="');@output_buffer.append= ( collection.image_url );@output_buffer.safe_concat('" alt="');@output_buffer.append= ( collection.name );@output_buffer.safe_concat('" class="jtooltip" title="');@output_buffer.append= ( collection.name );@output_buffer.safe_concat('" />
        </td>
        <td>');@output_buffer.append= ( collection.description );@output_buffer.safe_concat('</td>
        <td>
          <div class="btn-group btn-group-xs">
            ');@output_buffer.append=  link_to edit_collection_path(collection.id), class: "btn btn-default fa fa-edit", title: 'Edit' do @output_buffer.safe_concat('
');@output_buffer.safe_concat('                <span class="open-san">');@output_buffer.append= ( t('collections.edit') );@output_buffer.safe_concat('</span>
');             end 
@output_buffer.safe_concat('            ');@output_buffer.append= ( link_to( content_tag(:span t('collections.delete'), class: 'open-san'), {:action => 'destroy', :id=>collection.id}, class: "btn btn-default fa fa-minus-circle") );@output_buffer.safe_concat('
');@output_buffer.safe_concat('          </div>
        </td>
      </tr>
');   end 
@output_buffer.safe_concat('  </tbody>
</table>
<p>
  ');@output_buffer.append= ( paginate @collections, :theme => "twitter-bootstrap-3");@output_buffer.safe_concat('
');@output_buffer.safe_concat('</p>

<script>
  $(\'.carousel\').carousel({
    interval: false
  })
</script>');@output_buffer.to_s
          ensure
            @virtual_path, @output_buffer = _old_virtual_path, _old_output_buffer
          end

Backtrace: /Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_view/template.rb:297:in `module_eval'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_view/template.rb:297:in `compile'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_view/template.rb:244:in `block in compile!'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_view/template.rb:232:in `synchronize'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_view/template.rb:232:in `compile!'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_view/template.rb:144:in `block in render'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/activesupport-3.2.8/lib/active_support/notifications.rb:125:in `instrument'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_view/template.rb:143:in `render'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_view/renderer/template_renderer.rb:47:in `block (2 levels) in render_template'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_view/renderer/abstract_renderer.rb:38:in `block in instrument'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/activesupport-3.2.8/lib/active_support/notifications.rb:123:in `block in instrument'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/activesupport-3.2.8/lib/active_support/notifications/instrumenter.rb:20:in `instrument'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/activesupport-3.2.8/lib/active_support/notifications.rb:123:in `instrument'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_view/renderer/abstract_renderer.rb:38:in `instrument'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_view/renderer/template_renderer.rb:46:in `block in render_template'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_view/renderer/template_renderer.rb:54:in `render_with_layout'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_view/renderer/template_renderer.rb:45:in `render_template'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_view/renderer/template_renderer.rb:18:in `render'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/newrelic_rpm-3.7.3.204/lib/new_relic/agent/instrumentation/rails3/action_controller.rb:160:in `block in render_with_newrelic'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/newrelic_rpm-3.7.3.204/lib/new_relic/agent/method_tracer.rb:281:in `trace_execution_scoped'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/newrelic_rpm-3.7.3.204/lib/new_relic/agent/instrumentation/rails3/action_controller.rb:159:in `render_with_newrelic'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_view/renderer/renderer.rb:36:in `render_template'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_view/renderer/renderer.rb:17:in `render'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/abstract_controller/rendering.rb:110:in `_render_template'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_controller/metal/streaming.rb:225:in `_render_template'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/abstract_controller/rendering.rb:103:in `render_to_body'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_controller/metal/renderers.rb:28:in `render_to_body'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_controller/metal/compatibility.rb:50:in `render_to_body'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/abstract_controller/rendering.rb:88:in `render'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_controller/metal/rendering.rb:16:in `render'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_controller/metal/instrumentation.rb:40:in `block (2 levels) in render'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/activesupport-3.2.8/lib/active_support/core_ext/benchmark.rb:5:in `block in ms'
/Users/kevinmuller/.rvm/rubies/ruby-2.2.4/lib/ruby/2.2.0/benchmark.rb:303:in `realtime'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/activesupport-3.2.8/lib/active_support/core_ext/benchmark.rb:5:in `ms'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_controller/metal/instrumentation.rb:40:in `block in render'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_controller/metal/instrumentation.rb:83:in `cleanup_view_runtime'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/activerecord-3.2.8/lib/active_record/railties/controller_runtime.rb:24:in `cleanup_view_runtime'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_controller/metal/instrumentation.rb:39:in `render'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/bundler/gems/remotipart-aadc29e996c3/lib/remotipart/render_overrides.rb:14:in `render_with_remotipart'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_controller/metal/implicit_render.rb:10:in `default_render'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_controller/metal/mime_responds.rb:196:in `respond_to'
/Users/kevinmuller/halalgems_backend/app/controllers/collections_controller.rb:20:in `index'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_controller/metal/implicit_render.rb:4:in `send_action'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/abstract_controller/base.rb:167:in `process_action'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_controller/metal/rendering.rb:10:in `process_action'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/abstract_controller/callbacks.rb:18:in `block in process_action'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/activesupport-3.2.8/lib/active_support/callbacks.rb:436:in `_run__4154829590817395004__process_action__2909530600737073017__callbacks'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/activesupport-3.2.8/lib/active_support/callbacks.rb:405:in `__run_callback'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/activesupport-3.2.8/lib/active_support/callbacks.rb:385:in `_run_process_action_callbacks'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/activesupport-3.2.8/lib/active_support/callbacks.rb:81:in `run_callbacks'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/abstract_controller/callbacks.rb:17:in `process_action'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_controller/metal/rescue.rb:29:in `process_action'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_controller/metal/instrumentation.rb:30:in `block in process_action'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/activesupport-3.2.8/lib/active_support/notifications.rb:123:in `block in instrument'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/activesupport-3.2.8/lib/active_support/notifications/instrumenter.rb:20:in `instrument'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/activesupport-3.2.8/lib/active_support/notifications.rb:123:in `instrument'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_controller/metal/instrumentation.rb:29:in `process_action'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_controller/metal/params_wrapper.rb:207:in `process_action'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/activerecord-3.2.8/lib/active_record/railties/controller_runtime.rb:18:in `process_action'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/newrelic_rpm-3.7.3.204/lib/new_relic/agent/instrumentation/rails3/action_controller.rb:38:in `block in process_action'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/newrelic_rpm-3.7.3.204/lib/new_relic/agent/instrumentation/controller_instrumentation.rb:335:in `perform_action_with_newrelic_trace'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/newrelic_rpm-3.7.3.204/lib/new_relic/agent/instrumentation/rails3/action_controller.rb:37:in `process_action'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/abstract_controller/base.rb:121:in `process'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/abstract_controller/rendering.rb:45:in `process'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_controller/metal.rb:203:in `dispatch'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_controller/metal/rack_delegation.rb:14:in `dispatch'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_controller/metal.rb:246:in `block in action'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_dispatch/routing/route_set.rb:73:in `call'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_dispatch/routing/route_set.rb:73:in `dispatch'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_dispatch/routing/route_set.rb:36:in `call'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/journey-1.0.4/lib/journey/router.rb:68:in `block in call'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/journey-1.0.4/lib/journey/router.rb:56:in `each'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/journey-1.0.4/lib/journey/router.rb:56:in `call'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_dispatch/routing/route_set.rb:600:in `call'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/omniauth-1.1.4/lib/omniauth/strategy.rb:184:in `call!'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/omniauth-1.1.4/lib/omniauth/strategy.rb:164:in `call'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/newrelic_rpm-3.7.3.204/lib/new_relic/rack/error_collector.rb:55:in `call'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/newrelic_rpm-3.7.3.204/lib/new_relic/rack/agent_hooks.rb:32:in `call'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/newrelic_rpm-3.7.3.204/lib/new_relic/rack/browser_monitoring.rb:27:in `call'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/newrelic_rpm-3.7.3.204/lib/new_relic/rack/developer_mode.rb:45:in `call'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/galetahub-simple_captcha-0.1.5/lib/simple_captcha/middleware.rb:20:in `call'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/bundler/gems/client_side_validations-a6a515504520/lib/client_side_validations/middleware.rb:21:in `call'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/warden-1.1.1/lib/warden/manager.rb:35:in `block in call'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/warden-1.1.1/lib/warden/manager.rb:34:in `catch'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/warden-1.1.1/lib/warden/manager.rb:34:in `call'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_dispatch/middleware/best_standards_support.rb:17:in `call'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/rack-1.4.5/lib/rack/etag.rb:23:in `call'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/rack-1.4.5/lib/rack/conditionalget.rb:25:in `call'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_dispatch/middleware/head.rb:14:in `call'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/bundler/gems/remotipart-aadc29e996c3/lib/remotipart/middleware.rb:27:in `call'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_dispatch/middleware/params_parser.rb:21:in `call'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_dispatch/middleware/flash.rb:242:in `call'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/rack-1.4.5/lib/rack/session/abstract/id.rb:210:in `context'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/rack-1.4.5/lib/rack/session/abstract/id.rb:205:in `call'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_dispatch/middleware/cookies.rb:339:in `call'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/dragonfly-0.9.15/lib/dragonfly/cookie_monster.rb:9:in `call'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/activerecord-3.2.8/lib/active_record/query_cache.rb:64:in `call'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/activerecord-3.2.8/lib/active_record/connection_adapters/abstract/connection_pool.rb:473:in `call'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_dispatch/middleware/callbacks.rb:28:in `block in call'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/activesupport-3.2.8/lib/active_support/callbacks.rb:405:in `_run__664777706266228461__call__3878498479493024392__callbacks'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/activesupport-3.2.8/lib/active_support/callbacks.rb:405:in `__run_callback'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/activesupport-3.2.8/lib/active_support/callbacks.rb:385:in `_run_call_callbacks'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/activesupport-3.2.8/lib/active_support/callbacks.rb:81:in `run_callbacks'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_dispatch/middleware/callbacks.rb:27:in `call'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_dispatch/middleware/reloader.rb:65:in `call'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_dispatch/middleware/remote_ip.rb:31:in `call'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_dispatch/middleware/debug_exceptions.rb:16:in `call'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_dispatch/middleware/show_exceptions.rb:56:in `call'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/railties-3.2.8/lib/rails/rack/logger.rb:26:in `call_app'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/railties-3.2.8/lib/rails/rack/logger.rb:16:in `call'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/quiet_assets-1.0.3/lib/quiet_assets.rb:23:in `call_with_quiet_assets'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_dispatch/middleware/request_id.rb:22:in `call'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/rack-1.4.5/lib/rack/methodoverride.rb:21:in `call'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/rack-1.4.5/lib/rack/runtime.rb:17:in `call'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/activesupport-3.2.8/lib/active_support/cache/strategy/local_cache.rb:72:in `call'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/rack-1.4.5/lib/rack/lock.rb:15:in `call'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_dispatch/middleware/static.rb:62:in `call'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/dragonfly-0.9.15/lib/dragonfly/middleware.rb:13:in `call'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/rack-cache-1.2/lib/rack/cache/context.rb:136:in `forward'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/rack-cache-1.2/lib/rack/cache/context.rb:245:in `fetch'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/rack-cache-1.2/lib/rack/cache/context.rb:185:in `lookup'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/rack-cache-1.2/lib/rack/cache/context.rb:66:in `call!'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/rack-cache-1.2/lib/rack/cache/context.rb:51:in `call'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/railties-3.2.8/lib/rails/engine.rb:479:in `call'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/railties-3.2.8/lib/rails/application.rb:223:in `call'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/rack-1.4.5/lib/rack/content_length.rb:14:in `call'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/railties-3.2.8/lib/rails/rack/log_tailer.rb:17:in `call'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/rack-1.4.5/lib/rack/handler/webrick.rb:59:in `service'
/Users/kevinmuller/.rvm/rubies/ruby-2.2.4/lib/ruby/2.2.0/webrick/httpserver.rb:138:in `service'
/Users/kevinmuller/.rvm/rubies/ruby-2.2.4/lib/ruby/2.2.0/webrick/httpserver.rb:94:in `run'
/Users/kevinmuller/.rvm/rubies/ruby-2.2.4/lib/ruby/2.2.0/webrick/server.rb:294:in `block in start_thread'
  Rendered collections/index.erb within layouts/admin (1.4ms)
Completed 500 Internal Server Error in 7ms

ActionView::Template::Error (/Users/kevinmuller/halalgems_backend/app/views/collections/index.erb:38: syntax error, unexpected tIDENTIFIER, expecting ')'
... ( link_to( content_tag(:span t('collections.delete'), class...
...                               ^
/Users/kevinmuller/halalgems_backend/app/views/collections/index.erb:38: syntax error, unexpected ',', expecting ')'
...(:span t('collections.delete'), class: 'open-san'), {:action...
...                               ^
/Users/kevinmuller/halalgems_backend/app/views/collections/index.erb:38: syntax error, unexpected tLABEL
...y', :id=>collection.id}, class: "btn btn-default fa fa-minus...
...                               ^
/Users/kevinmuller/halalgems_backend/app/views/collections/index.erb:38: syntax error, unexpected ')', expecting keyword_end
...tn-default fa fa-minus-circle") );@output_buffer.safe_concat...
...                               ^):
    35:             <%= link_to edit_collection_path(collection.id), class: "btn btn-default fa fa-edit", title: 'Edit' do %>
    36:                 <span class="open-san"><%= t('collections.edit') %></span>
    37:             <% end %>
    38:             <%= link_to( content_tag(:span t('collections.delete'), class: 'open-san'), {:action => 'destroy', :id=>collection.id}, class: "btn btn-default fa fa-minus-circle") %>
    39:           </div>
    40:         </td>
    41:       </tr>
  app/controllers/collections_controller.rb:20:in `index'


  Rendered /Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_dispatch/middleware/templates/rescues/_trace.erb (1.4ms)
  Rendered /Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_dispatch/middleware/templates/rescues/_request_and_response.erb (1.1ms)
  Rendered /Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_dispatch/middleware/templates/rescues/template_error.erb within rescues/layout (43.1ms)


Started GET "/admin/collections" for 127.0.0.1 at 2016-01-17 06:31:18 +0100
Processing by CollectionsController#index as HTML
ERROR: compiling _app_views_collections_index_erb___1182846876568079597_70101192102520 RAISED /Users/kevinmuller/halalgems_backend/app/views/collections/index.erb:38: syntax error, unexpected tSTRING_BEG, expecting ')'
... ( link_to( content_tag(:span 'Delete', class: 'open-san'), ...
...                               ^
/Users/kevinmuller/halalgems_backend/app/views/collections/index.erb:38: syntax error, unexpected ',', expecting ')'
...to( content_tag(:span 'Delete', class: 'open-san'), {:action...
...                               ^
/Users/kevinmuller/halalgems_backend/app/views/collections/index.erb:38: syntax error, unexpected tLABEL
...y', :id=>collection.id}, class: "btn btn-default fa fa-minus...
...                               ^
/Users/kevinmuller/halalgems_backend/app/views/collections/index.erb:38: syntax error, unexpected ')', expecting keyword_end
...tn-default fa fa-minus-circle") );@output_buffer.safe_concat...
...                               ^
Function body:           def _app_views_collections_index_erb___1182846876568079597_70101192102520(local_assigns, output_buffer)
            _old_virtual_path, @virtual_path = @virtual_path, "collections/index";_old_output_buffer = @output_buffer;;@output_buffer = output_buffer || ActionView::OutputBuffer.new;@output_buffer.append= ( render 'shared/restaurant_manage_tabs' );@output_buffer.safe_concat('
');@output_buffer.safe_concat('
<div class="row">
  <div class="col-lg-12">
    <h3 id="restaurant_collections" class="title">');@output_buffer.append= (t 'collections.title' );@output_buffer.safe_concat('</h3>

    <span class=\'new-restaurant-button\'>
      ');@output_buffer.append=  link_to new_collection_collections_path, class: "btn btn-success fa fa-plus-circle" do @output_buffer.safe_concat('
');@output_buffer.safe_concat('        <span class="open-san">');@output_buffer.append= ( t('collections.new') );@output_buffer.safe_concat('</span>
');       end 
@output_buffer.safe_concat('    </span>

  </div>
</div>

<table class="table table-condensed table-striped">
  <thead>
  <tr>
    <th style="width: 20%">');@output_buffer.append= ( sort_link @search, :name, "Collection name" );@output_buffer.safe_concat('</th>
    <th style="width: 170px">Image</th>
    <th>');@output_buffer.append= ( sort_link @search, :description, "Description" );@output_buffer.safe_concat('</th>
    <th style="width: 25%">Actions</th>
  </tr>
  </thead>
  <tbody>
');   @collections.each_with_index do |collection, index| 
@output_buffer.safe_concat('      <tr>
        <td>');@output_buffer.append= ( collection.name );@output_buffer.safe_concat('</td>
        <td class="collection_image_column" >
          <img src="');@output_buffer.append= ( collection.image_url );@output_buffer.safe_concat('" alt="');@output_buffer.append= ( collection.name );@output_buffer.safe_concat('" class="jtooltip" title="');@output_buffer.append= ( collection.name );@output_buffer.safe_concat('" />
        </td>
        <td>');@output_buffer.append= ( collection.description );@output_buffer.safe_concat('</td>
        <td>
          <div class="btn-group btn-group-xs">
            ');@output_buffer.append=  link_to edit_collection_path(collection.id), class: "btn btn-default fa fa-edit", title: 'Edit' do @output_buffer.safe_concat('
');@output_buffer.safe_concat('                <span class="open-san">');@output_buffer.append= ( t('collections.edit') );@output_buffer.safe_concat('</span>
');             end 
@output_buffer.safe_concat('            ');@output_buffer.append= ( link_to( content_tag(:span 'Delete', class: 'open-san'), {:action => 'destroy', :id=>collection.id}, class: "btn btn-default fa fa-minus-circle") );@output_buffer.safe_concat('
');@output_buffer.safe_concat('          </div>
        </td>
      </tr>
');   end 
@output_buffer.safe_concat('  </tbody>
</table>
<p>
  ');@output_buffer.append= ( paginate @collections, :theme => "twitter-bootstrap-3");@output_buffer.safe_concat('
');@output_buffer.safe_concat('</p>

<script>
  $(\'.carousel\').carousel({
    interval: false
  })
</script>');@output_buffer.to_s
          ensure
            @virtual_path, @output_buffer = _old_virtual_path, _old_output_buffer
          end

Backtrace: /Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_view/template.rb:297:in `module_eval'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_view/template.rb:297:in `compile'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_view/template.rb:244:in `block in compile!'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_view/template.rb:232:in `synchronize'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_view/template.rb:232:in `compile!'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_view/template.rb:144:in `block in render'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/activesupport-3.2.8/lib/active_support/notifications.rb:125:in `instrument'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_view/template.rb:143:in `render'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_view/renderer/template_renderer.rb:47:in `block (2 levels) in render_template'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_view/renderer/abstract_renderer.rb:38:in `block in instrument'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/activesupport-3.2.8/lib/active_support/notifications.rb:123:in `block in instrument'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/activesupport-3.2.8/lib/active_support/notifications/instrumenter.rb:20:in `instrument'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/activesupport-3.2.8/lib/active_support/notifications.rb:123:in `instrument'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_view/renderer/abstract_renderer.rb:38:in `instrument'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_view/renderer/template_renderer.rb:46:in `block in render_template'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_view/renderer/template_renderer.rb:54:in `render_with_layout'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_view/renderer/template_renderer.rb:45:in `render_template'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_view/renderer/template_renderer.rb:18:in `render'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/newrelic_rpm-3.7.3.204/lib/new_relic/agent/instrumentation/rails3/action_controller.rb:160:in `block in render_with_newrelic'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/newrelic_rpm-3.7.3.204/lib/new_relic/agent/method_tracer.rb:281:in `trace_execution_scoped'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/newrelic_rpm-3.7.3.204/lib/new_relic/agent/instrumentation/rails3/action_controller.rb:159:in `render_with_newrelic'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_view/renderer/renderer.rb:36:in `render_template'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_view/renderer/renderer.rb:17:in `render'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/abstract_controller/rendering.rb:110:in `_render_template'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_controller/metal/streaming.rb:225:in `_render_template'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/abstract_controller/rendering.rb:103:in `render_to_body'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_controller/metal/renderers.rb:28:in `render_to_body'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_controller/metal/compatibility.rb:50:in `render_to_body'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/abstract_controller/rendering.rb:88:in `render'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_controller/metal/rendering.rb:16:in `render'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_controller/metal/instrumentation.rb:40:in `block (2 levels) in render'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/activesupport-3.2.8/lib/active_support/core_ext/benchmark.rb:5:in `block in ms'
/Users/kevinmuller/.rvm/rubies/ruby-2.2.4/lib/ruby/2.2.0/benchmark.rb:303:in `realtime'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/activesupport-3.2.8/lib/active_support/core_ext/benchmark.rb:5:in `ms'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_controller/metal/instrumentation.rb:40:in `block in render'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_controller/metal/instrumentation.rb:83:in `cleanup_view_runtime'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/activerecord-3.2.8/lib/active_record/railties/controller_runtime.rb:24:in `cleanup_view_runtime'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_controller/metal/instrumentation.rb:39:in `render'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/bundler/gems/remotipart-aadc29e996c3/lib/remotipart/render_overrides.rb:14:in `render_with_remotipart'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_controller/metal/implicit_render.rb:10:in `default_render'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_controller/metal/mime_responds.rb:196:in `respond_to'
/Users/kevinmuller/halalgems_backend/app/controllers/collections_controller.rb:20:in `index'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_controller/metal/implicit_render.rb:4:in `send_action'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/abstract_controller/base.rb:167:in `process_action'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_controller/metal/rendering.rb:10:in `process_action'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/abstract_controller/callbacks.rb:18:in `block in process_action'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/activesupport-3.2.8/lib/active_support/callbacks.rb:436:in `_run__4154829590817395004__process_action__2909530600737073017__callbacks'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/activesupport-3.2.8/lib/active_support/callbacks.rb:405:in `__run_callback'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/activesupport-3.2.8/lib/active_support/callbacks.rb:385:in `_run_process_action_callbacks'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/activesupport-3.2.8/lib/active_support/callbacks.rb:81:in `run_callbacks'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/abstract_controller/callbacks.rb:17:in `process_action'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_controller/metal/rescue.rb:29:in `process_action'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_controller/metal/instrumentation.rb:30:in `block in process_action'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/activesupport-3.2.8/lib/active_support/notifications.rb:123:in `block in instrument'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/activesupport-3.2.8/lib/active_support/notifications/instrumenter.rb:20:in `instrument'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/activesupport-3.2.8/lib/active_support/notifications.rb:123:in `instrument'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_controller/metal/instrumentation.rb:29:in `process_action'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_controller/metal/params_wrapper.rb:207:in `process_action'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/activerecord-3.2.8/lib/active_record/railties/controller_runtime.rb:18:in `process_action'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/newrelic_rpm-3.7.3.204/lib/new_relic/agent/instrumentation/rails3/action_controller.rb:38:in `block in process_action'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/newrelic_rpm-3.7.3.204/lib/new_relic/agent/instrumentation/controller_instrumentation.rb:335:in `perform_action_with_newrelic_trace'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/newrelic_rpm-3.7.3.204/lib/new_relic/agent/instrumentation/rails3/action_controller.rb:37:in `process_action'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/abstract_controller/base.rb:121:in `process'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/abstract_controller/rendering.rb:45:in `process'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_controller/metal.rb:203:in `dispatch'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_controller/metal/rack_delegation.rb:14:in `dispatch'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_controller/metal.rb:246:in `block in action'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_dispatch/routing/route_set.rb:73:in `call'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_dispatch/routing/route_set.rb:73:in `dispatch'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_dispatch/routing/route_set.rb:36:in `call'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/journey-1.0.4/lib/journey/router.rb:68:in `block in call'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/journey-1.0.4/lib/journey/router.rb:56:in `each'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/journey-1.0.4/lib/journey/router.rb:56:in `call'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_dispatch/routing/route_set.rb:600:in `call'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/omniauth-1.1.4/lib/omniauth/strategy.rb:184:in `call!'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/omniauth-1.1.4/lib/omniauth/strategy.rb:164:in `call'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/newrelic_rpm-3.7.3.204/lib/new_relic/rack/error_collector.rb:55:in `call'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/newrelic_rpm-3.7.3.204/lib/new_relic/rack/agent_hooks.rb:32:in `call'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/newrelic_rpm-3.7.3.204/lib/new_relic/rack/browser_monitoring.rb:27:in `call'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/newrelic_rpm-3.7.3.204/lib/new_relic/rack/developer_mode.rb:45:in `call'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/galetahub-simple_captcha-0.1.5/lib/simple_captcha/middleware.rb:20:in `call'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/bundler/gems/client_side_validations-a6a515504520/lib/client_side_validations/middleware.rb:21:in `call'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/warden-1.1.1/lib/warden/manager.rb:35:in `block in call'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/warden-1.1.1/lib/warden/manager.rb:34:in `catch'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/warden-1.1.1/lib/warden/manager.rb:34:in `call'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_dispatch/middleware/best_standards_support.rb:17:in `call'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/rack-1.4.5/lib/rack/etag.rb:23:in `call'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/rack-1.4.5/lib/rack/conditionalget.rb:25:in `call'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_dispatch/middleware/head.rb:14:in `call'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/bundler/gems/remotipart-aadc29e996c3/lib/remotipart/middleware.rb:27:in `call'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_dispatch/middleware/params_parser.rb:21:in `call'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_dispatch/middleware/flash.rb:242:in `call'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/rack-1.4.5/lib/rack/session/abstract/id.rb:210:in `context'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/rack-1.4.5/lib/rack/session/abstract/id.rb:205:in `call'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_dispatch/middleware/cookies.rb:339:in `call'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/dragonfly-0.9.15/lib/dragonfly/cookie_monster.rb:9:in `call'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/activerecord-3.2.8/lib/active_record/query_cache.rb:64:in `call'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/activerecord-3.2.8/lib/active_record/connection_adapters/abstract/connection_pool.rb:473:in `call'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_dispatch/middleware/callbacks.rb:28:in `block in call'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/activesupport-3.2.8/lib/active_support/callbacks.rb:405:in `_run__664777706266228461__call__3878498479493024392__callbacks'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/activesupport-3.2.8/lib/active_support/callbacks.rb:405:in `__run_callback'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/activesupport-3.2.8/lib/active_support/callbacks.rb:385:in `_run_call_callbacks'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/activesupport-3.2.8/lib/active_support/callbacks.rb:81:in `run_callbacks'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_dispatch/middleware/callbacks.rb:27:in `call'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_dispatch/middleware/reloader.rb:65:in `call'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_dispatch/middleware/remote_ip.rb:31:in `call'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_dispatch/middleware/debug_exceptions.rb:16:in `call'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_dispatch/middleware/show_exceptions.rb:56:in `call'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/railties-3.2.8/lib/rails/rack/logger.rb:26:in `call_app'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/railties-3.2.8/lib/rails/rack/logger.rb:16:in `call'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/quiet_assets-1.0.3/lib/quiet_assets.rb:23:in `call_with_quiet_assets'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_dispatch/middleware/request_id.rb:22:in `call'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/rack-1.4.5/lib/rack/methodoverride.rb:21:in `call'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/rack-1.4.5/lib/rack/runtime.rb:17:in `call'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/activesupport-3.2.8/lib/active_support/cache/strategy/local_cache.rb:72:in `call'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/rack-1.4.5/lib/rack/lock.rb:15:in `call'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_dispatch/middleware/static.rb:62:in `call'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/dragonfly-0.9.15/lib/dragonfly/middleware.rb:13:in `call'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/rack-cache-1.2/lib/rack/cache/context.rb:136:in `forward'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/rack-cache-1.2/lib/rack/cache/context.rb:245:in `fetch'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/rack-cache-1.2/lib/rack/cache/context.rb:185:in `lookup'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/rack-cache-1.2/lib/rack/cache/context.rb:66:in `call!'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/rack-cache-1.2/lib/rack/cache/context.rb:51:in `call'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/railties-3.2.8/lib/rails/engine.rb:479:in `call'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/railties-3.2.8/lib/rails/application.rb:223:in `call'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/rack-1.4.5/lib/rack/content_length.rb:14:in `call'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/railties-3.2.8/lib/rails/rack/log_tailer.rb:17:in `call'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/rack-1.4.5/lib/rack/handler/webrick.rb:59:in `service'
/Users/kevinmuller/.rvm/rubies/ruby-2.2.4/lib/ruby/2.2.0/webrick/httpserver.rb:138:in `service'
/Users/kevinmuller/.rvm/rubies/ruby-2.2.4/lib/ruby/2.2.0/webrick/httpserver.rb:94:in `run'
/Users/kevinmuller/.rvm/rubies/ruby-2.2.4/lib/ruby/2.2.0/webrick/server.rb:294:in `block in start_thread'
  Rendered collections/index.erb within layouts/admin (1.5ms)
Completed 500 Internal Server Error in 6ms

ActionView::Template::Error (/Users/kevinmuller/halalgems_backend/app/views/collections/index.erb:38: syntax error, unexpected tSTRING_BEG, expecting ')'
... ( link_to( content_tag(:span 'Delete', class: 'open-san'), ...
...                               ^
/Users/kevinmuller/halalgems_backend/app/views/collections/index.erb:38: syntax error, unexpected ',', expecting ')'
...to( content_tag(:span 'Delete', class: 'open-san'), {:action...
...                               ^
/Users/kevinmuller/halalgems_backend/app/views/collections/index.erb:38: syntax error, unexpected tLABEL
...y', :id=>collection.id}, class: "btn btn-default fa fa-minus...
...                               ^
/Users/kevinmuller/halalgems_backend/app/views/collections/index.erb:38: syntax error, unexpected ')', expecting keyword_end
...tn-default fa fa-minus-circle") );@output_buffer.safe_concat...
...                               ^):
    35:             <%= link_to edit_collection_path(collection.id), class: "btn btn-default fa fa-edit", title: 'Edit' do %>
    36:                 <span class="open-san"><%= t('collections.edit') %></span>
    37:             <% end %>
    38:             <%= link_to( content_tag(:span 'Delete', class: 'open-san'), {:action => 'destroy', :id=>collection.id}, class: "btn btn-default fa fa-minus-circle") %>
    39:           </div>
    40:         </td>
    41:       </tr>
  app/controllers/collections_controller.rb:20:in `index'


  Rendered /Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_dispatch/middleware/templates/rescues/_trace.erb (1.2ms)
  Rendered /Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_dispatch/middleware/templates/rescues/_request_and_response.erb (1.1ms)
  Rendered /Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_dispatch/middleware/templates/rescues/template_error.erb within rescues/layout (42.5ms)


Started GET "/admin/collections" for 127.0.0.1 at 2016-01-17 06:33:21 +0100
Processing by CollectionsController#index as HTML
  Rendered shared/_restaurant_manage_tabs.html.erb (1.0ms)
  [1m[35mCollection Load (0.4ms)[0m  SELECT `collections`.* FROM `collections` ORDER BY name ASC, created_at DESC LIMIT 12 OFFSET 0
  [1m[36mCollectionImage Load (0.2ms)[0m  [1mSELECT `collection_images`.* FROM `collection_images` WHERE (collection_id = 28) LIMIT 1[0m
  [1m[35mCollectionImage Load (0.1ms)[0m  SELECT `collection_images`.* FROM `collection_images` WHERE (collection_id = 16) LIMIT 1
  [1m[36mCollectionImage Load (0.1ms)[0m  [1mSELECT `collection_images`.* FROM `collection_images` WHERE (collection_id = 17) LIMIT 1[0m
  [1m[35mCollectionImage Load (0.1ms)[0m  SELECT `collection_images`.* FROM `collection_images` WHERE (collection_id = 18) LIMIT 1
  [1m[36mCollectionImage Load (0.2ms)[0m  [1mSELECT `collection_images`.* FROM `collection_images` WHERE (collection_id = 15) LIMIT 1[0m
  [1m[35mCollectionImage Load (0.3ms)[0m  SELECT `collection_images`.* FROM `collection_images` WHERE (collection_id = 25) LIMIT 1
  [1m[36mCollectionImage Load (0.2ms)[0m  [1mSELECT `collection_images`.* FROM `collection_images` WHERE (collection_id = 26) LIMIT 1[0m
  [1m[35mCollectionImage Load (0.1ms)[0m  SELECT `collection_images`.* FROM `collection_images` WHERE (collection_id = 27) LIMIT 1
  [1m[36mCollectionImage Load (0.1ms)[0m  [1mSELECT `collection_images`.* FROM `collection_images` WHERE (collection_id = 19) LIMIT 1[0m
  [1m[35mCollectionImage Load (0.4ms)[0m  SELECT `collection_images`.* FROM `collection_images` WHERE (collection_id = 21) LIMIT 1
  [1m[36mCollectionImage Load (0.1ms)[0m  [1mSELECT `collection_images`.* FROM `collection_images` WHERE (collection_id = 22) LIMIT 1[0m
  [1m[35mCollectionImage Load (0.1ms)[0m  SELECT `collection_images`.* FROM `collection_images` WHERE (collection_id = 20) LIMIT 1
  [1m[36m (0.2ms)[0m  [1mSELECT COUNT(*) FROM `collections` [0m
  Rendered collections/index.erb within layouts/admin (49.6ms)
  [1m[35mUser Load (0.4ms)[0m  SELECT `users`.* FROM `users` WHERE `users`.`id` = 1 LIMIT 1
Completed 200 OK in 60ms (Views: 56.7ms | ActiveRecord: 3.1ms)


Started GET "/admin/collections/28" for 127.0.0.1 at 2016-01-17 06:33:44 +0100

AbstractController::ActionNotFound (The action 'show' could not be found for CollectionsController):
  actionpack (3.2.8) lib/abstract_controller/base.rb:116:in `process'
  actionpack (3.2.8) lib/abstract_controller/rendering.rb:45:in `process'
  actionpack (3.2.8) lib/action_controller/metal.rb:203:in `dispatch'
  actionpack (3.2.8) lib/action_controller/metal/rack_delegation.rb:14:in `dispatch'
  actionpack (3.2.8) lib/action_controller/metal.rb:246:in `block in action'
  actionpack (3.2.8) lib/action_dispatch/routing/route_set.rb:73:in `call'
  actionpack (3.2.8) lib/action_dispatch/routing/route_set.rb:73:in `dispatch'
  actionpack (3.2.8) lib/action_dispatch/routing/route_set.rb:36:in `call'
  journey (1.0.4) lib/journey/router.rb:68:in `block in call'
  journey (1.0.4) lib/journey/router.rb:56:in `each'
  journey (1.0.4) lib/journey/router.rb:56:in `call'
  actionpack (3.2.8) lib/action_dispatch/routing/route_set.rb:600:in `call'
  omniauth (1.1.4) lib/omniauth/strategy.rb:184:in `call!'
  omniauth (1.1.4) lib/omniauth/strategy.rb:164:in `call'
  newrelic_rpm (3.7.3.204) lib/new_relic/rack/error_collector.rb:55:in `call'
  newrelic_rpm (3.7.3.204) lib/new_relic/rack/agent_hooks.rb:32:in `call'
  newrelic_rpm (3.7.3.204) lib/new_relic/rack/browser_monitoring.rb:27:in `call'
  newrelic_rpm (3.7.3.204) lib/new_relic/rack/developer_mode.rb:45:in `call'
  galetahub-simple_captcha (0.1.5) lib/simple_captcha/middleware.rb:20:in `call'
  /Users/kevinmuller/.rvm/gems/ruby-2.2.4/bundler/gems/client_side_validations-a6a515504520/lib/client_side_validations/middleware.rb:21:in `call'
  warden (1.1.1) lib/warden/manager.rb:35:in `block in call'
  warden (1.1.1) lib/warden/manager.rb:34:in `catch'
  warden (1.1.1) lib/warden/manager.rb:34:in `call'
  actionpack (3.2.8) lib/action_dispatch/middleware/best_standards_support.rb:17:in `call'
  rack (1.4.5) lib/rack/etag.rb:23:in `call'
  rack (1.4.5) lib/rack/conditionalget.rb:25:in `call'
  actionpack (3.2.8) lib/action_dispatch/middleware/head.rb:14:in `call'
  /Users/kevinmuller/.rvm/gems/ruby-2.2.4/bundler/gems/remotipart-aadc29e996c3/lib/remotipart/middleware.rb:27:in `call'
  actionpack (3.2.8) lib/action_dispatch/middleware/params_parser.rb:21:in `call'
  actionpack (3.2.8) lib/action_dispatch/middleware/flash.rb:242:in `call'
  rack (1.4.5) lib/rack/session/abstract/id.rb:210:in `context'
  rack (1.4.5) lib/rack/session/abstract/id.rb:205:in `call'
  actionpack (3.2.8) lib/action_dispatch/middleware/cookies.rb:339:in `call'
  dragonfly (0.9.15) lib/dragonfly/cookie_monster.rb:9:in `call'
  activerecord (3.2.8) lib/active_record/query_cache.rb:64:in `call'
  activerecord (3.2.8) lib/active_record/connection_adapters/abstract/connection_pool.rb:473:in `call'
  actionpack (3.2.8) lib/action_dispatch/middleware/callbacks.rb:28:in `block in call'
  activesupport (3.2.8) lib/active_support/callbacks.rb:405:in `_run__664777706266228461__call__3878498479493024392__callbacks'
  activesupport (3.2.8) lib/active_support/callbacks.rb:405:in `__run_callback'
  activesupport (3.2.8) lib/active_support/callbacks.rb:385:in `_run_call_callbacks'
  activesupport (3.2.8) lib/active_support/callbacks.rb:81:in `run_callbacks'
  actionpack (3.2.8) lib/action_dispatch/middleware/callbacks.rb:27:in `call'
  actionpack (3.2.8) lib/action_dispatch/middleware/reloader.rb:65:in `call'
  actionpack (3.2.8) lib/action_dispatch/middleware/remote_ip.rb:31:in `call'
  actionpack (3.2.8) lib/action_dispatch/middleware/debug_exceptions.rb:16:in `call'
  actionpack (3.2.8) lib/action_dispatch/middleware/show_exceptions.rb:56:in `call'
  railties (3.2.8) lib/rails/rack/logger.rb:26:in `call_app'
  railties (3.2.8) lib/rails/rack/logger.rb:16:in `call'
  quiet_assets (1.0.3) lib/quiet_assets.rb:23:in `call_with_quiet_assets'
  actionpack (3.2.8) lib/action_dispatch/middleware/request_id.rb:22:in `call'
  rack (1.4.5) lib/rack/methodoverride.rb:21:in `call'
  rack (1.4.5) lib/rack/runtime.rb:17:in `call'
  activesupport (3.2.8) lib/active_support/cache/strategy/local_cache.rb:72:in `call'
  rack (1.4.5) lib/rack/lock.rb:15:in `call'
  actionpack (3.2.8) lib/action_dispatch/middleware/static.rb:62:in `call'
  dragonfly (0.9.15) lib/dragonfly/middleware.rb:13:in `call'
  rack-cache (1.2) lib/rack/cache/context.rb:136:in `forward'
  rack-cache (1.2) lib/rack/cache/context.rb:245:in `fetch'
  rack-cache (1.2) lib/rack/cache/context.rb:185:in `lookup'
  rack-cache (1.2) lib/rack/cache/context.rb:66:in `call!'
  rack-cache (1.2) lib/rack/cache/context.rb:51:in `call'
  railties (3.2.8) lib/rails/engine.rb:479:in `call'
  railties (3.2.8) lib/rails/application.rb:223:in `call'
  rack (1.4.5) lib/rack/content_length.rb:14:in `call'
  railties (3.2.8) lib/rails/rack/log_tailer.rb:17:in `call'
  rack (1.4.5) lib/rack/handler/webrick.rb:59:in `service'
  /Users/kevinmuller/.rvm/rubies/ruby-2.2.4/lib/ruby/2.2.0/webrick/httpserver.rb:138:in `service'
  /Users/kevinmuller/.rvm/rubies/ruby-2.2.4/lib/ruby/2.2.0/webrick/httpserver.rb:94:in `run'
  /Users/kevinmuller/.rvm/rubies/ruby-2.2.4/lib/ruby/2.2.0/webrick/server.rb:294:in `block in start_thread'


  Rendered /Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_dispatch/middleware/templates/rescues/unknown_action.erb within rescues/layout (0.8ms)


Started GET "/admin/collections" for 127.0.0.1 at 2016-01-17 06:38:51 +0100
Processing by CollectionsController#index as HTML
  Rendered shared/_restaurant_manage_tabs.html.erb (0.8ms)
  [1m[36mCollection Load (0.2ms)[0m  [1mSELECT `collections`.* FROM `collections` ORDER BY name ASC, created_at DESC LIMIT 12 OFFSET 0[0m
  [1m[35mCollectionImage Load (0.3ms)[0m  SELECT `collection_images`.* FROM `collection_images` WHERE (collection_id = 28) LIMIT 1
  Rendered collections/index.erb within layouts/admin (53.4ms)
Completed 500 Internal Server Error in 60ms

ActionView::Template::Error (undefined method `destroy_collection_path' for #<#<Class:0x007f83697ecbd0>:0x007f83697cb9a8>):
    35:             <%= link_to edit_collection_path(collection.id), class: "btn btn-default fa fa-edit", title: 'Edit' do %>
    36:                 <span class="open-san"><%= t('collections.edit') %></span>
    37:             <% end %>
    38:             <%= link_to destroy_collection_path(collection.id), class: "btn btn-default fa fa-remove", title: 'Delete' do %>
    39:                 <span class="open-san"><%= t('collections.delete') %></span>
    40:             <% end %>
    41:           </div>
  app/views/collections/index.erb:38:in `block in _app_views_collections_index_erb___1182846876568079597_70101193609820'
  app/views/collections/index.erb:26:in `_app_views_collections_index_erb___1182846876568079597_70101193609820'
  app/controllers/collections_controller.rb:20:in `index'


  Rendered /Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_dispatch/middleware/templates/rescues/_trace.erb (1.1ms)
  Rendered /Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_dispatch/middleware/templates/rescues/_request_and_response.erb (0.9ms)
  Rendered /Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_dispatch/middleware/templates/rescues/template_error.erb within rescues/layout (43.5ms)


Started GET "/admin/collections" for 127.0.0.1 at 2016-01-17 06:40:58 +0100
Processing by CollectionsController#index as HTML
  Rendered shared/_restaurant_manage_tabs.html.erb (0.8ms)
  [1m[36mCollection Load (0.4ms)[0m  [1mSELECT `collections`.* FROM `collections` ORDER BY name ASC, created_at DESC LIMIT 12 OFFSET 0[0m
  [1m[35mCollectionImage Load (0.2ms)[0m  SELECT `collection_images`.* FROM `collection_images` WHERE (collection_id = 28) LIMIT 1
  [1m[36mCollectionImage Load (0.2ms)[0m  [1mSELECT `collection_images`.* FROM `collection_images` WHERE (collection_id = 16) LIMIT 1[0m
  [1m[35mCollectionImage Load (0.2ms)[0m  SELECT `collection_images`.* FROM `collection_images` WHERE (collection_id = 17) LIMIT 1
  [1m[36mCollectionImage Load (0.2ms)[0m  [1mSELECT `collection_images`.* FROM `collection_images` WHERE (collection_id = 18) LIMIT 1[0m
  [1m[35mCollectionImage Load (0.2ms)[0m  SELECT `collection_images`.* FROM `collection_images` WHERE (collection_id = 15) LIMIT 1
  [1m[36mCollectionImage Load (0.2ms)[0m  [1mSELECT `collection_images`.* FROM `collection_images` WHERE (collection_id = 25) LIMIT 1[0m
  [1m[35mCollectionImage Load (0.2ms)[0m  SELECT `collection_images`.* FROM `collection_images` WHERE (collection_id = 26) LIMIT 1
  [1m[36mCollectionImage Load (0.2ms)[0m  [1mSELECT `collection_images`.* FROM `collection_images` WHERE (collection_id = 27) LIMIT 1[0m
  [1m[35mCollectionImage Load (0.2ms)[0m  SELECT `collection_images`.* FROM `collection_images` WHERE (collection_id = 19) LIMIT 1
  [1m[36mCollectionImage Load (0.2ms)[0m  [1mSELECT `collection_images`.* FROM `collection_images` WHERE (collection_id = 21) LIMIT 1[0m
  [1m[35mCollectionImage Load (0.2ms)[0m  SELECT `collection_images`.* FROM `collection_images` WHERE (collection_id = 22) LIMIT 1
  [1m[36mCollectionImage Load (0.2ms)[0m  [1mSELECT `collection_images`.* FROM `collection_images` WHERE (collection_id = 20) LIMIT 1[0m
  [1m[35m (0.1ms)[0m  SELECT COUNT(*) FROM `collections` 
  Rendered collections/index.erb within layouts/admin (40.5ms)
  [1m[36mUser Load (0.2ms)[0m  [1mSELECT `users`.* FROM `users` WHERE `users`.`id` = 1 LIMIT 1[0m
Completed 200 OK in 80ms (Views: 74.9ms | ActiveRecord: 3.8ms)


Started GET "/admin/collections" for 127.0.0.1 at 2016-01-17 06:42:01 +0100
Processing by CollectionsController#index as HTML
  Rendered shared/_restaurant_manage_tabs.html.erb (0.7ms)
  [1m[35mCollection Load (0.2ms)[0m  SELECT `collections`.* FROM `collections` ORDER BY name ASC, created_at DESC LIMIT 12 OFFSET 0
  [1m[36mCollectionImage Load (0.2ms)[0m  [1mSELECT `collection_images`.* FROM `collection_images` WHERE (collection_id = 28) LIMIT 1[0m
  [1m[35mCollectionImage Load (0.2ms)[0m  SELECT `collection_images`.* FROM `collection_images` WHERE (collection_id = 16) LIMIT 1
  [1m[36mCollectionImage Load (0.2ms)[0m  [1mSELECT `collection_images`.* FROM `collection_images` WHERE (collection_id = 17) LIMIT 1[0m
  [1m[35mCollectionImage Load (0.2ms)[0m  SELECT `collection_images`.* FROM `collection_images` WHERE (collection_id = 18) LIMIT 1
  [1m[36mCollectionImage Load (0.2ms)[0m  [1mSELECT `collection_images`.* FROM `collection_images` WHERE (collection_id = 15) LIMIT 1[0m
  [1m[35mCollectionImage Load (0.2ms)[0m  SELECT `collection_images`.* FROM `collection_images` WHERE (collection_id = 25) LIMIT 1
  [1m[36mCollectionImage Load (0.2ms)[0m  [1mSELECT `collection_images`.* FROM `collection_images` WHERE (collection_id = 26) LIMIT 1[0m
  [1m[35mCollectionImage Load (0.2ms)[0m  SELECT `collection_images`.* FROM `collection_images` WHERE (collection_id = 27) LIMIT 1
  [1m[36mCollectionImage Load (0.1ms)[0m  [1mSELECT `collection_images`.* FROM `collection_images` WHERE (collection_id = 19) LIMIT 1[0m
  [1m[35mCollectionImage Load (0.2ms)[0m  SELECT `collection_images`.* FROM `collection_images` WHERE (collection_id = 21) LIMIT 1
  [1m[36mCollectionImage Load (0.2ms)[0m  [1mSELECT `collection_images`.* FROM `collection_images` WHERE (collection_id = 22) LIMIT 1[0m
  [1m[35mCollectionImage Load (0.2ms)[0m  SELECT `collection_images`.* FROM `collection_images` WHERE (collection_id = 20) LIMIT 1
  [1m[36m (0.2ms)[0m  [1mSELECT COUNT(*) FROM `collections` [0m
  Rendered collections/index.erb within layouts/admin (61.8ms)
  [1m[35mUser Load (0.2ms)[0m  SELECT `users`.* FROM `users` WHERE `users`.`id` = 1 LIMIT 1
Completed 200 OK in 96ms (Views: 89.4ms | ActiveRecord: 5.2ms)


Started GET "/admin/collections/destroy/28" for 127.0.0.1 at 2016-01-17 06:42:07 +0100
Processing by CollectionsController#destroy as HTML
  Parameters: {"id"=>"28"}
  [1m[36mCollection Load (0.3ms)[0m  [1mSELECT `collections`.* FROM `collections` WHERE `collections`.`id` = 28 LIMIT 1[0m
  [1m[35m (0.1ms)[0m  BEGIN
  [1m[36mCollectionRestaurant Load (15.2ms)[0m  [1mSELECT `collection_restaurants`.* FROM `collection_restaurants` WHERE `collection_restaurants`.`collection_id` = 28[0m
  [1m[35mCollectionImage Load (0.3ms)[0m  SELECT `collection_images`.* FROM `collection_images` WHERE `collection_images`.`collection_id` = 28 LIMIT 1
  [1m[36mSQL (0.5ms)[0m  [1mDELETE FROM `collection_images` WHERE `collection_images`.`id` = 7[0m
  [1m[35mSQL (0.2ms)[0m  DELETE FROM `collections` WHERE `collections`.`id` = 28
  [1m[36m (0.4ms)[0m  [1mCOMMIT[0m
Redirected to http://localhost:3000/admin/collections
Completed 302 Found in 78ms (ActiveRecord: 18.0ms)


Started GET "/admin/collections" for 127.0.0.1 at 2016-01-17 06:42:07 +0100
Processing by CollectionsController#index as HTML
  Rendered shared/_restaurant_manage_tabs.html.erb (0.7ms)
  [1m[35mCollection Load (0.4ms)[0m  SELECT `collections`.* FROM `collections` ORDER BY name ASC, created_at DESC LIMIT 12 OFFSET 0
  [1m[36mCollectionImage Load (0.2ms)[0m  [1mSELECT `collection_images`.* FROM `collection_images` WHERE (collection_id = 16) LIMIT 1[0m
  [1m[35mCollectionImage Load (0.2ms)[0m  SELECT `collection_images`.* FROM `collection_images` WHERE (collection_id = 17) LIMIT 1
  [1m[36mCollectionImage Load (0.1ms)[0m  [1mSELECT `collection_images`.* FROM `collection_images` WHERE (collection_id = 18) LIMIT 1[0m
  [1m[35mCollectionImage Load (0.1ms)[0m  SELECT `collection_images`.* FROM `collection_images` WHERE (collection_id = 15) LIMIT 1
  [1m[36mCollectionImage Load (0.2ms)[0m  [1mSELECT `collection_images`.* FROM `collection_images` WHERE (collection_id = 25) LIMIT 1[0m
  [1m[35mCollectionImage Load (0.2ms)[0m  SELECT `collection_images`.* FROM `collection_images` WHERE (collection_id = 26) LIMIT 1
  [1m[36mCollectionImage Load (0.2ms)[0m  [1mSELECT `collection_images`.* FROM `collection_images` WHERE (collection_id = 27) LIMIT 1[0m
  [1m[35mCollectionImage Load (0.2ms)[0m  SELECT `collection_images`.* FROM `collection_images` WHERE (collection_id = 19) LIMIT 1
  [1m[36mCollectionImage Load (0.2ms)[0m  [1mSELECT `collection_images`.* FROM `collection_images` WHERE (collection_id = 21) LIMIT 1[0m
  [1m[35mCollectionImage Load (0.2ms)[0m  SELECT `collection_images`.* FROM `collection_images` WHERE (collection_id = 22) LIMIT 1
  [1m[36mCollectionImage Load (0.2ms)[0m  [1mSELECT `collection_images`.* FROM `collection_images` WHERE (collection_id = 20) LIMIT 1[0m
  [1m[35mCollectionImage Load (0.2ms)[0m  SELECT `collection_images`.* FROM `collection_images` WHERE (collection_id = 23) LIMIT 1
  [1m[36m (0.1ms)[0m  [1mSELECT COUNT(*) FROM `collections` [0m
  Rendered collections/index.erb within layouts/admin (39.7ms)
  [1m[35mUser Load (0.4ms)[0m  SELECT `users`.* FROM `users` WHERE `users`.`id` = 1 LIMIT 1
Completed 200 OK in 49ms (Views: 45.2ms | ActiveRecord: 2.8ms)


Started GET "/admin/collections/destroy/16" for 127.0.0.1 at 2016-01-17 06:42:09 +0100
Processing by CollectionsController#destroy as HTML
  Parameters: {"id"=>"16"}
  [1m[36mCollection Load (0.2ms)[0m  [1mSELECT `collections`.* FROM `collections` WHERE `collections`.`id` = 16 LIMIT 1[0m
  [1m[35m (0.1ms)[0m  BEGIN
  [1m[36mCollectionRestaurant Load (0.2ms)[0m  [1mSELECT `collection_restaurants`.* FROM `collection_restaurants` WHERE `collection_restaurants`.`collection_id` = 16[0m
  [1m[35mCollectionImage Load (0.2ms)[0m  SELECT `collection_images`.* FROM `collection_images` WHERE `collection_images`.`collection_id` = 16 LIMIT 1
  [1m[36mSQL (0.3ms)[0m  [1mDELETE FROM `collection_images` WHERE `collection_images`.`id` = 1[0m
  [1m[35mSQL (0.2ms)[0m  DELETE FROM `collections` WHERE `collections`.`id` = 16
  [1m[36m (0.9ms)[0m  [1mCOMMIT[0m
Redirected to http://localhost:3000/admin/collections
Completed 302 Found in 11ms (ActiveRecord: 2.1ms)


Started GET "/admin/collections" for 127.0.0.1 at 2016-01-17 06:42:09 +0100
Processing by CollectionsController#index as HTML
  Rendered shared/_restaurant_manage_tabs.html.erb (0.6ms)
  [1m[35mCollection Load (0.3ms)[0m  SELECT `collections`.* FROM `collections` ORDER BY name ASC, created_at DESC LIMIT 12 OFFSET 0
  [1m[36mCollectionImage Load (0.2ms)[0m  [1mSELECT `collection_images`.* FROM `collection_images` WHERE (collection_id = 17) LIMIT 1[0m
  [1m[35mCollectionImage Load (0.2ms)[0m  SELECT `collection_images`.* FROM `collection_images` WHERE (collection_id = 18) LIMIT 1
  [1m[36mCollectionImage Load (0.2ms)[0m  [1mSELECT `collection_images`.* FROM `collection_images` WHERE (collection_id = 15) LIMIT 1[0m
  [1m[35mCollectionImage Load (0.2ms)[0m  SELECT `collection_images`.* FROM `collection_images` WHERE (collection_id = 25) LIMIT 1
  [1m[36mCollectionImage Load (0.2ms)[0m  [1mSELECT `collection_images`.* FROM `collection_images` WHERE (collection_id = 26) LIMIT 1[0m
  [1m[35mCollectionImage Load (0.3ms)[0m  SELECT `collection_images`.* FROM `collection_images` WHERE (collection_id = 27) LIMIT 1
  [1m[36mCollectionImage Load (0.2ms)[0m  [1mSELECT `collection_images`.* FROM `collection_images` WHERE (collection_id = 19) LIMIT 1[0m
  [1m[35mCollectionImage Load (0.2ms)[0m  SELECT `collection_images`.* FROM `collection_images` WHERE (collection_id = 21) LIMIT 1
  [1m[36mCollectionImage Load (0.2ms)[0m  [1mSELECT `collection_images`.* FROM `collection_images` WHERE (collection_id = 22) LIMIT 1[0m
  [1m[35mCollectionImage Load (0.2ms)[0m  SELECT `collection_images`.* FROM `collection_images` WHERE (collection_id = 20) LIMIT 1
  [1m[36mCollectionImage Load (0.2ms)[0m  [1mSELECT `collection_images`.* FROM `collection_images` WHERE (collection_id = 23) LIMIT 1[0m
  [1m[35mCollectionImage Load (0.2ms)[0m  SELECT `collection_images`.* FROM `collection_images` WHERE (collection_id = 24) LIMIT 1
  [1m[36m (0.2ms)[0m  [1mSELECT COUNT(*) FROM `collections` [0m
  Rendered collections/index.erb within layouts/admin (28.8ms)
  [1m[35mUser Load (0.2ms)[0m  SELECT `users`.* FROM `users` WHERE `users`.`id` = 1 LIMIT 1
Completed 200 OK in 37ms (Views: 33.5ms | ActiveRecord: 2.9ms)


Started GET "/admin/collections/destroy/17" for 127.0.0.1 at 2016-01-17 06:42:19 +0100
Processing by CollectionsController#destroy as HTML
  Parameters: {"id"=>"17"}
  [1m[36mCollection Load (0.4ms)[0m  [1mSELECT `collections`.* FROM `collections` WHERE `collections`.`id` = 17 LIMIT 1[0m
  [1m[35m (0.3ms)[0m  BEGIN
  [1m[36mCollectionRestaurant Load (0.2ms)[0m  [1mSELECT `collection_restaurants`.* FROM `collection_restaurants` WHERE `collection_restaurants`.`collection_id` = 17[0m
  [1m[35mCollectionImage Load (0.2ms)[0m  SELECT `collection_images`.* FROM `collection_images` WHERE `collection_images`.`collection_id` = 17 LIMIT 1
  [1m[36mSQL (0.2ms)[0m  [1mDELETE FROM `collections` WHERE `collections`.`id` = 17[0m
  [1m[35m (34.0ms)[0m  COMMIT
Redirected to http://localhost:3000/admin/collections
Completed 302 Found in 41ms (ActiveRecord: 35.3ms)


Started GET "/admin/collections" for 127.0.0.1 at 2016-01-17 06:42:19 +0100
Processing by CollectionsController#index as HTML
  Rendered shared/_restaurant_manage_tabs.html.erb (0.7ms)
  [1m[36mCollection Load (0.3ms)[0m  [1mSELECT `collections`.* FROM `collections` ORDER BY name ASC, created_at DESC LIMIT 12 OFFSET 0[0m
  [1m[35mCollectionImage Load (0.3ms)[0m  SELECT `collection_images`.* FROM `collection_images` WHERE (collection_id = 18) LIMIT 1
  [1m[36mCollectionImage Load (0.2ms)[0m  [1mSELECT `collection_images`.* FROM `collection_images` WHERE (collection_id = 15) LIMIT 1[0m
  [1m[35mCollectionImage Load (0.2ms)[0m  SELECT `collection_images`.* FROM `collection_images` WHERE (collection_id = 25) LIMIT 1
  [1m[36mCollectionImage Load (0.2ms)[0m  [1mSELECT `collection_images`.* FROM `collection_images` WHERE (collection_id = 26) LIMIT 1[0m
  [1m[35mCollectionImage Load (0.2ms)[0m  SELECT `collection_images`.* FROM `collection_images` WHERE (collection_id = 27) LIMIT 1
  [1m[36mCollectionImage Load (0.2ms)[0m  [1mSELECT `collection_images`.* FROM `collection_images` WHERE (collection_id = 19) LIMIT 1[0m
  [1m[35mCollectionImage Load (0.2ms)[0m  SELECT `collection_images`.* FROM `collection_images` WHERE (collection_id = 21) LIMIT 1
  [1m[36mCollectionImage Load (0.2ms)[0m  [1mSELECT `collection_images`.* FROM `collection_images` WHERE (collection_id = 22) LIMIT 1[0m
  [1m[35mCollectionImage Load (0.2ms)[0m  SELECT `collection_images`.* FROM `collection_images` WHERE (collection_id = 20) LIMIT 1
  [1m[36mCollectionImage Load (0.2ms)[0m  [1mSELECT `collection_images`.* FROM `collection_images` WHERE (collection_id = 23) LIMIT 1[0m
  [1m[35mCollectionImage Load (0.2ms)[0m  SELECT `collection_images`.* FROM `collection_images` WHERE (collection_id = 24) LIMIT 1
  [1m[36m (0.1ms)[0m  [1mSELECT COUNT(*) FROM `collections` [0m
  Rendered collections/index.erb within layouts/admin (25.3ms)
  [1m[35mUser Load (0.3ms)[0m  SELECT `users`.* FROM `users` WHERE `users`.`id` = 1 LIMIT 1
Completed 200 OK in 33ms (Views: 30.1ms | ActiveRecord: 2.6ms)


Started GET "/admin/collections/destroy/18" for 127.0.0.1 at 2016-01-17 06:42:21 +0100
Processing by CollectionsController#destroy as HTML
  Parameters: {"id"=>"18"}
  [1m[36mCollection Load (0.6ms)[0m  [1mSELECT `collections`.* FROM `collections` WHERE `collections`.`id` = 18 LIMIT 1[0m
  [1m[35m (0.1ms)[0m  BEGIN
  [1m[36mCollectionRestaurant Load (0.2ms)[0m  [1mSELECT `collection_restaurants`.* FROM `collection_restaurants` WHERE `collection_restaurants`.`collection_id` = 18[0m
  [1m[35mCollectionImage Load (0.2ms)[0m  SELECT `collection_images`.* FROM `collection_images` WHERE `collection_images`.`collection_id` = 18 LIMIT 1
  [1m[36mSQL (0.3ms)[0m  [1mDELETE FROM `collection_images` WHERE `collection_images`.`id` = 2[0m
  [1m[35mSQL (0.2ms)[0m  DELETE FROM `collections` WHERE `collections`.`id` = 18
  [1m[36m (0.5ms)[0m  [1mCOMMIT[0m
Redirected to http://localhost:3000/admin/collections
Completed 302 Found in 11ms (ActiveRecord: 2.1ms)


Started GET "/admin/collections" for 127.0.0.1 at 2016-01-17 06:42:21 +0100
Processing by CollectionsController#index as HTML
  Rendered shared/_restaurant_manage_tabs.html.erb (0.6ms)
  [1m[35mCollection Load (0.3ms)[0m  SELECT `collections`.* FROM `collections` ORDER BY name ASC, created_at DESC LIMIT 12 OFFSET 0
  [1m[36mCollectionImage Load (0.2ms)[0m  [1mSELECT `collection_images`.* FROM `collection_images` WHERE (collection_id = 15) LIMIT 1[0m
  [1m[35mCollectionImage Load (0.2ms)[0m  SELECT `collection_images`.* FROM `collection_images` WHERE (collection_id = 25) LIMIT 1
  [1m[36mCollectionImage Load (0.2ms)[0m  [1mSELECT `collection_images`.* FROM `collection_images` WHERE (collection_id = 26) LIMIT 1[0m
  [1m[35mCollectionImage Load (0.2ms)[0m  SELECT `collection_images`.* FROM `collection_images` WHERE (collection_id = 27) LIMIT 1
  [1m[36mCollectionImage Load (0.2ms)[0m  [1mSELECT `collection_images`.* FROM `collection_images` WHERE (collection_id = 19) LIMIT 1[0m
  [1m[35mCollectionImage Load (0.2ms)[0m  SELECT `collection_images`.* FROM `collection_images` WHERE (collection_id = 21) LIMIT 1
  [1m[36mCollectionImage Load (0.1ms)[0m  [1mSELECT `collection_images`.* FROM `collection_images` WHERE (collection_id = 22) LIMIT 1[0m
  [1m[35mCollectionImage Load (0.2ms)[0m  SELECT `collection_images`.* FROM `collection_images` WHERE (collection_id = 20) LIMIT 1
  [1m[36mCollectionImage Load (0.2ms)[0m  [1mSELECT `collection_images`.* FROM `collection_images` WHERE (collection_id = 23) LIMIT 1[0m
  [1m[35mCollectionImage Load (0.2ms)[0m  SELECT `collection_images`.* FROM `collection_images` WHERE (collection_id = 24) LIMIT 1
  [1m[36m (0.1ms)[0m  [1mSELECT COUNT(*) FROM `collections` [0m
  Rendered collections/index.erb within layouts/admin (23.1ms)
  [1m[35mUser Load (0.3ms)[0m  SELECT `users`.* FROM `users` WHERE `users`.`id` = 1 LIMIT 1
Completed 200 OK in 31ms (Views: 27.9ms | ActiveRecord: 2.4ms)


Started GET "/admin/collections/destroy/15" for 127.0.0.1 at 2016-01-17 06:42:22 +0100
Processing by CollectionsController#destroy as HTML
  Parameters: {"id"=>"15"}
  [1m[36mCollection Load (0.3ms)[0m  [1mSELECT `collections`.* FROM `collections` WHERE `collections`.`id` = 15 LIMIT 1[0m
  [1m[35m (0.1ms)[0m  BEGIN
  [1m[36mCollectionRestaurant Load (0.2ms)[0m  [1mSELECT `collection_restaurants`.* FROM `collection_restaurants` WHERE `collection_restaurants`.`collection_id` = 15[0m
  [1m[35mCollectionImage Load (0.2ms)[0m  SELECT `collection_images`.* FROM `collection_images` WHERE `collection_images`.`collection_id` = 15 LIMIT 1
  [1m[36mSQL (0.3ms)[0m  [1mDELETE FROM `collections` WHERE `collections`.`id` = 15[0m
  [1m[35m (0.7ms)[0m  COMMIT
Redirected to http://localhost:3000/admin/collections
Completed 302 Found in 7ms (ActiveRecord: 1.7ms)


Started GET "/admin/collections" for 127.0.0.1 at 2016-01-17 06:42:22 +0100
Processing by CollectionsController#index as HTML
  Rendered shared/_restaurant_manage_tabs.html.erb (0.8ms)
  [1m[36mCollection Load (0.4ms)[0m  [1mSELECT `collections`.* FROM `collections` ORDER BY name ASC, created_at DESC LIMIT 12 OFFSET 0[0m
  [1m[35mCollectionImage Load (0.2ms)[0m  SELECT `collection_images`.* FROM `collection_images` WHERE (collection_id = 25) LIMIT 1
  [1m[36mCollectionImage Load (0.2ms)[0m  [1mSELECT `collection_images`.* FROM `collection_images` WHERE (collection_id = 26) LIMIT 1[0m
  [1m[35mCollectionImage Load (0.2ms)[0m  SELECT `collection_images`.* FROM `collection_images` WHERE (collection_id = 27) LIMIT 1
  [1m[36mCollectionImage Load (0.2ms)[0m  [1mSELECT `collection_images`.* FROM `collection_images` WHERE (collection_id = 19) LIMIT 1[0m
  [1m[35mCollectionImage Load (0.2ms)[0m  SELECT `collection_images`.* FROM `collection_images` WHERE (collection_id = 21) LIMIT 1
  [1m[36mCollectionImage Load (0.2ms)[0m  [1mSELECT `collection_images`.* FROM `collection_images` WHERE (collection_id = 22) LIMIT 1[0m
  [1m[35mCollectionImage Load (0.2ms)[0m  SELECT `collection_images`.* FROM `collection_images` WHERE (collection_id = 20) LIMIT 1
  [1m[36mCollectionImage Load (0.2ms)[0m  [1mSELECT `collection_images`.* FROM `collection_images` WHERE (collection_id = 23) LIMIT 1[0m
  [1m[35mCollectionImage Load (0.1ms)[0m  SELECT `collection_images`.* FROM `collection_images` WHERE (collection_id = 24) LIMIT 1
  [1m[36m (0.2ms)[0m  [1mSELECT COUNT(*) FROM `collections` [0m
  Rendered collections/index.erb within layouts/admin (22.3ms)
  [1m[35mUser Load (0.4ms)[0m  SELECT `users`.* FROM `users` WHERE `users`.`id` = 1 LIMIT 1
Completed 200 OK in 31ms (Views: 27.7ms | ActiveRecord: 2.4ms)


Started GET "/admin/collections/destroy/25" for 127.0.0.1 at 2016-01-17 06:42:23 +0100
Processing by CollectionsController#destroy as HTML
  Parameters: {"id"=>"25"}
  [1m[36mCollection Load (0.2ms)[0m  [1mSELECT `collections`.* FROM `collections` WHERE `collections`.`id` = 25 LIMIT 1[0m
  [1m[35m (0.1ms)[0m  BEGIN
  [1m[36mCollectionRestaurant Load (0.2ms)[0m  [1mSELECT `collection_restaurants`.* FROM `collection_restaurants` WHERE `collection_restaurants`.`collection_id` = 25[0m
  [1m[35mCollectionImage Load (0.6ms)[0m  SELECT `collection_images`.* FROM `collection_images` WHERE `collection_images`.`collection_id` = 25 LIMIT 1
  [1m[36mSQL (0.4ms)[0m  [1mDELETE FROM `collection_images` WHERE `collection_images`.`id` = 6[0m
  [1m[35mSQL (0.4ms)[0m  DELETE FROM `collections` WHERE `collections`.`id` = 25
  [1m[36m (0.7ms)[0m  [1mCOMMIT[0m
Redirected to http://localhost:3000/admin/collections
Completed 302 Found in 11ms (ActiveRecord: 2.5ms)


Started GET "/admin/collections" for 127.0.0.1 at 2016-01-17 06:42:23 +0100
Processing by CollectionsController#index as HTML
  Rendered shared/_restaurant_manage_tabs.html.erb (0.7ms)
  [1m[35mCollection Load (0.4ms)[0m  SELECT `collections`.* FROM `collections` ORDER BY name ASC, created_at DESC LIMIT 12 OFFSET 0
  [1m[36mCollectionImage Load (0.2ms)[0m  [1mSELECT `collection_images`.* FROM `collection_images` WHERE (collection_id = 26) LIMIT 1[0m
  [1m[35mCollectionImage Load (0.2ms)[0m  SELECT `collection_images`.* FROM `collection_images` WHERE (collection_id = 27) LIMIT 1
  [1m[36mCollectionImage Load (0.2ms)[0m  [1mSELECT `collection_images`.* FROM `collection_images` WHERE (collection_id = 19) LIMIT 1[0m
  [1m[35mCollectionImage Load (0.2ms)[0m  SELECT `collection_images`.* FROM `collection_images` WHERE (collection_id = 21) LIMIT 1
  [1m[36mCollectionImage Load (0.4ms)[0m  [1mSELECT `collection_images`.* FROM `collection_images` WHERE (collection_id = 22) LIMIT 1[0m
  [1m[35mCollectionImage Load (0.3ms)[0m  SELECT `collection_images`.* FROM `collection_images` WHERE (collection_id = 20) LIMIT 1
  [1m[36mCollectionImage Load (0.2ms)[0m  [1mSELECT `collection_images`.* FROM `collection_images` WHERE (collection_id = 23) LIMIT 1[0m
  [1m[35mCollectionImage Load (0.2ms)[0m  SELECT `collection_images`.* FROM `collection_images` WHERE (collection_id = 24) LIMIT 1
  [1m[36m (0.1ms)[0m  [1mSELECT COUNT(*) FROM `collections` [0m
  Rendered collections/index.erb within layouts/admin (23.0ms)
  [1m[35mUser Load (0.3ms)[0m  SELECT `users`.* FROM `users` WHERE `users`.`id` = 1 LIMIT 1
Completed 200 OK in 31ms (Views: 28.3ms | ActiveRecord: 2.5ms)


Started GET "/admin/collections" for 127.0.0.1 at 2016-01-17 06:43:34 +0100
Processing by CollectionsController#index as HTML
  Rendered shared/_restaurant_manage_tabs.html.erb (1.0ms)
  [1m[36mCollection Load (3.8ms)[0m  [1mSELECT `collections`.* FROM `collections` ORDER BY name ASC, created_at DESC LIMIT 12 OFFSET 0[0m
  [1m[35mCollectionImage Load (0.4ms)[0m  SELECT `collection_images`.* FROM `collection_images` WHERE (collection_id = 26) LIMIT 1
  [1m[36mCollectionImage Load (0.9ms)[0m  [1mSELECT `collection_images`.* FROM `collection_images` WHERE (collection_id = 27) LIMIT 1[0m
  [1m[35mCollectionImage Load (8.7ms)[0m  SELECT `collection_images`.* FROM `collection_images` WHERE (collection_id = 19) LIMIT 1
  [1m[36mCollectionImage Load (31.3ms)[0m  [1mSELECT `collection_images`.* FROM `collection_images` WHERE (collection_id = 21) LIMIT 1[0m
  [1m[35mCollectionImage Load (11.3ms)[0m  SELECT `collection_images`.* FROM `collection_images` WHERE (collection_id = 22) LIMIT 1
  [1m[36mCollectionImage Load (0.3ms)[0m  [1mSELECT `collection_images`.* FROM `collection_images` WHERE (collection_id = 20) LIMIT 1[0m
  [1m[35mCollectionImage Load (0.3ms)[0m  SELECT `collection_images`.* FROM `collection_images` WHERE (collection_id = 23) LIMIT 1
  [1m[36mCollectionImage Load (0.2ms)[0m  [1mSELECT `collection_images`.* FROM `collection_images` WHERE (collection_id = 24) LIMIT 1[0m
  [1m[35m (0.2ms)[0m  SELECT COUNT(*) FROM `collections` 
  Rendered collections/index.erb within layouts/admin (105.1ms)
  [1m[36mUser Load (0.4ms)[0m  [1mSELECT `users`.* FROM `users` WHERE `users`.`id` = 1 LIMIT 1[0m
Completed 200 OK in 115ms (Views: 56.7ms | ActiveRecord: 57.6ms)


Started GET "/admin/collections/destroy/26" for 127.0.0.1 at 2016-01-17 06:43:37 +0100
Processing by CollectionsController#destroy as HTML
  Parameters: {"id"=>"26"}
  [1m[35mCollection Load (0.2ms)[0m  SELECT `collections`.* FROM `collections` WHERE `collections`.`id` = 26 LIMIT 1
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35mCollectionRestaurant Load (0.2ms)[0m  SELECT `collection_restaurants`.* FROM `collection_restaurants` WHERE `collection_restaurants`.`collection_id` = 26
  [1m[36mCollectionImage Load (0.7ms)[0m  [1mSELECT `collection_images`.* FROM `collection_images` WHERE `collection_images`.`collection_id` = 26 LIMIT 1[0m
  [1m[35mSQL (0.2ms)[0m  DELETE FROM `collections` WHERE `collections`.`id` = 26
  [1m[36m (0.7ms)[0m  [1mCOMMIT[0m
Redirected to http://localhost:3000/admin/collections
Completed 302 Found in 7ms (ActiveRecord: 2.1ms)


Started GET "/admin/collections" for 127.0.0.1 at 2016-01-17 06:43:37 +0100
Processing by CollectionsController#index as HTML
  Rendered shared/_restaurant_manage_tabs.html.erb (0.6ms)
  [1m[35mCollection Load (0.3ms)[0m  SELECT `collections`.* FROM `collections` ORDER BY name ASC, created_at DESC LIMIT 12 OFFSET 0
  [1m[36mCollectionImage Load (0.2ms)[0m  [1mSELECT `collection_images`.* FROM `collection_images` WHERE (collection_id = 27) LIMIT 1[0m
  [1m[35mCollectionImage Load (0.2ms)[0m  SELECT `collection_images`.* FROM `collection_images` WHERE (collection_id = 19) LIMIT 1
  [1m[36mCollectionImage Load (0.1ms)[0m  [1mSELECT `collection_images`.* FROM `collection_images` WHERE (collection_id = 21) LIMIT 1[0m
  [1m[35mCollectionImage Load (0.1ms)[0m  SELECT `collection_images`.* FROM `collection_images` WHERE (collection_id = 22) LIMIT 1
  [1m[36mCollectionImage Load (0.2ms)[0m  [1mSELECT `collection_images`.* FROM `collection_images` WHERE (collection_id = 20) LIMIT 1[0m
  [1m[35mCollectionImage Load (0.2ms)[0m  SELECT `collection_images`.* FROM `collection_images` WHERE (collection_id = 23) LIMIT 1
  [1m[36mCollectionImage Load (0.2ms)[0m  [1mSELECT `collection_images`.* FROM `collection_images` WHERE (collection_id = 24) LIMIT 1[0m
  [1m[35m (0.2ms)[0m  SELECT COUNT(*) FROM `collections` 
  Rendered collections/index.erb within layouts/admin (17.7ms)
  [1m[36mUser Load (0.2ms)[0m  [1mSELECT `users`.* FROM `users` WHERE `users`.`id` = 1 LIMIT 1[0m
Completed 200 OK in 25ms (Views: 22.9ms | ActiveRecord: 1.8ms)


Started GET "/admin/collections/destroy/27" for 127.0.0.1 at 2016-01-17 06:43:39 +0100
Processing by CollectionsController#destroy as HTML
  Parameters: {"id"=>"27"}
  [1m[35mCollection Load (0.2ms)[0m  SELECT `collections`.* FROM `collections` WHERE `collections`.`id` = 27 LIMIT 1
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35mCollectionRestaurant Load (0.2ms)[0m  SELECT `collection_restaurants`.* FROM `collection_restaurants` WHERE `collection_restaurants`.`collection_id` = 27
  [1m[36mCollectionImage Load (0.2ms)[0m  [1mSELECT `collection_images`.* FROM `collection_images` WHERE `collection_images`.`collection_id` = 27 LIMIT 1[0m
  [1m[35mSQL (0.2ms)[0m  DELETE FROM `collections` WHERE `collections`.`id` = 27
  [1m[36m (0.7ms)[0m  [1mCOMMIT[0m
Redirected to http://localhost:3000/admin/collections
Completed 302 Found in 6ms (ActiveRecord: 1.5ms)


Started GET "/admin/collections" for 127.0.0.1 at 2016-01-17 06:43:39 +0100
Processing by CollectionsController#index as HTML
  Rendered shared/_restaurant_manage_tabs.html.erb (0.6ms)
  [1m[35mCollection Load (0.3ms)[0m  SELECT `collections`.* FROM `collections` ORDER BY name ASC, created_at DESC LIMIT 12 OFFSET 0
  [1m[36mCollectionImage Load (0.2ms)[0m  [1mSELECT `collection_images`.* FROM `collection_images` WHERE (collection_id = 19) LIMIT 1[0m
  [1m[35mCollectionImage Load (0.2ms)[0m  SELECT `collection_images`.* FROM `collection_images` WHERE (collection_id = 21) LIMIT 1
  [1m[36mCollectionImage Load (0.2ms)[0m  [1mSELECT `collection_images`.* FROM `collection_images` WHERE (collection_id = 22) LIMIT 1[0m
  [1m[35mCollectionImage Load (0.2ms)[0m  SELECT `collection_images`.* FROM `collection_images` WHERE (collection_id = 20) LIMIT 1
  [1m[36mCollectionImage Load (0.2ms)[0m  [1mSELECT `collection_images`.* FROM `collection_images` WHERE (collection_id = 23) LIMIT 1[0m
  [1m[35mCollectionImage Load (0.3ms)[0m  SELECT `collection_images`.* FROM `collection_images` WHERE (collection_id = 24) LIMIT 1
  [1m[36m (0.3ms)[0m  [1mSELECT COUNT(*) FROM `collections` [0m
  Rendered collections/index.erb within layouts/admin (17.2ms)
  [1m[35mUser Load (0.3ms)[0m  SELECT `users`.* FROM `users` WHERE `users`.`id` = 1 LIMIT 1
Completed 200 OK in 26ms (Views: 23.0ms | ActiveRecord: 2.0ms)


Started GET "/admin/collections/destroy/19" for 127.0.0.1 at 2016-01-17 06:43:40 +0100
Processing by CollectionsController#destroy as HTML
  Parameters: {"id"=>"19"}
  [1m[36mCollection Load (0.3ms)[0m  [1mSELECT `collections`.* FROM `collections` WHERE `collections`.`id` = 19 LIMIT 1[0m
  [1m[35m (0.1ms)[0m  BEGIN
  [1m[36mCollectionRestaurant Load (0.5ms)[0m  [1mSELECT `collection_restaurants`.* FROM `collection_restaurants` WHERE `collection_restaurants`.`collection_id` = 19[0m
  [1m[35mCollectionImage Load (0.2ms)[0m  SELECT `collection_images`.* FROM `collection_images` WHERE `collection_images`.`collection_id` = 19 LIMIT 1
  [1m[36mSQL (0.2ms)[0m  [1mDELETE FROM `collections` WHERE `collections`.`id` = 19[0m
  [1m[35m (0.6ms)[0m  COMMIT
Redirected to http://localhost:3000/admin/collections
Completed 302 Found in 18ms (ActiveRecord: 1.7ms)


Started GET "/admin/collections" for 127.0.0.1 at 2016-01-17 06:43:40 +0100
Processing by CollectionsController#index as HTML
  Rendered shared/_restaurant_manage_tabs.html.erb (0.6ms)
  [1m[36mCollection Load (0.2ms)[0m  [1mSELECT `collections`.* FROM `collections` ORDER BY name ASC, created_at DESC LIMIT 12 OFFSET 0[0m
  [1m[35mCollectionImage Load (0.2ms)[0m  SELECT `collection_images`.* FROM `collection_images` WHERE (collection_id = 21) LIMIT 1
  [1m[36mCollectionImage Load (1.3ms)[0m  [1mSELECT `collection_images`.* FROM `collection_images` WHERE (collection_id = 22) LIMIT 1[0m
  [1m[35mCollectionImage Load (1.0ms)[0m  SELECT `collection_images`.* FROM `collection_images` WHERE (collection_id = 20) LIMIT 1
  [1m[36mCollectionImage Load (0.2ms)[0m  [1mSELECT `collection_images`.* FROM `collection_images` WHERE (collection_id = 23) LIMIT 1[0m
  [1m[35mCollectionImage Load (0.3ms)[0m  SELECT `collection_images`.* FROM `collection_images` WHERE (collection_id = 24) LIMIT 1
  [1m[36m (0.3ms)[0m  [1mSELECT COUNT(*) FROM `collections` [0m
  Rendered collections/index.erb within layouts/admin (48.9ms)
  [1m[35mUser Load (0.4ms)[0m  SELECT `users`.* FROM `users` WHERE `users`.`id` = 1 LIMIT 1
Completed 200 OK in 58ms (Views: 53.3ms | ActiveRecord: 4.0ms)


Started GET "/admin/collections/destroy/22" for 127.0.0.1 at 2016-01-17 06:44:03 +0100
Processing by CollectionsController#destroy as HTML
  Parameters: {"id"=>"22"}
  [1m[36mCollection Load (0.2ms)[0m  [1mSELECT `collections`.* FROM `collections` WHERE `collections`.`id` = 22 LIMIT 1[0m
  [1m[35m (0.1ms)[0m  BEGIN
  [1m[36mCollectionRestaurant Load (0.3ms)[0m  [1mSELECT `collection_restaurants`.* FROM `collection_restaurants` WHERE `collection_restaurants`.`collection_id` = 22[0m
  [1m[35mCollectionImage Load (0.2ms)[0m  SELECT `collection_images`.* FROM `collection_images` WHERE `collection_images`.`collection_id` = 22 LIMIT 1
  [1m[36mSQL (0.2ms)[0m  [1mDELETE FROM `collection_images` WHERE `collection_images`.`id` = 3[0m
  [1m[35mSQL (0.2ms)[0m  DELETE FROM `collections` WHERE `collections`.`id` = 22
  [1m[36m (0.4ms)[0m  [1mCOMMIT[0m
Redirected to http://localhost:3000/admin/collections
Completed 302 Found in 13ms (ActiveRecord: 1.6ms)


Started GET "/admin/collections" for 127.0.0.1 at 2016-01-17 06:44:03 +0100
Processing by CollectionsController#index as HTML
  Rendered shared/_restaurant_manage_tabs.html.erb (1.4ms)
  [1m[35mCollection Load (0.3ms)[0m  SELECT `collections`.* FROM `collections` ORDER BY name ASC, created_at DESC LIMIT 12 OFFSET 0
  [1m[36mCollectionImage Load (0.2ms)[0m  [1mSELECT `collection_images`.* FROM `collection_images` WHERE (collection_id = 21) LIMIT 1[0m
  [1m[35mCollectionImage Load (0.2ms)[0m  SELECT `collection_images`.* FROM `collection_images` WHERE (collection_id = 20) LIMIT 1
  [1m[36mCollectionImage Load (0.2ms)[0m  [1mSELECT `collection_images`.* FROM `collection_images` WHERE (collection_id = 23) LIMIT 1[0m
  [1m[35mCollectionImage Load (0.2ms)[0m  SELECT `collection_images`.* FROM `collection_images` WHERE (collection_id = 24) LIMIT 1
  [1m[36m (0.1ms)[0m  [1mSELECT COUNT(*) FROM `collections` [0m
  Rendered collections/index.erb within layouts/admin (21.7ms)
  [1m[35mUser Load (0.3ms)[0m  SELECT `users`.* FROM `users` WHERE `users`.`id` = 1 LIMIT 1
Completed 200 OK in 35ms (Views: 31.6ms | ActiveRecord: 1.5ms)


Started GET "/admin/collections/destroy/23" for 127.0.0.1 at 2016-01-17 06:44:10 +0100
Processing by CollectionsController#destroy as HTML
  Parameters: {"id"=>"23"}
  [1m[36mCollection Load (0.3ms)[0m  [1mSELECT `collections`.* FROM `collections` WHERE `collections`.`id` = 23 LIMIT 1[0m
  [1m[35m (0.1ms)[0m  BEGIN
  [1m[36mCollectionRestaurant Load (0.2ms)[0m  [1mSELECT `collection_restaurants`.* FROM `collection_restaurants` WHERE `collection_restaurants`.`collection_id` = 23[0m
  [1m[35mCollectionImage Load (0.2ms)[0m  SELECT `collection_images`.* FROM `collection_images` WHERE `collection_images`.`collection_id` = 23 LIMIT 1
  [1m[36mSQL (0.3ms)[0m  [1mDELETE FROM `collection_images` WHERE `collection_images`.`id` = 4[0m
  [1m[35mSQL (1.1ms)[0m  DELETE FROM `collections` WHERE `collections`.`id` = 23
  [1m[36m (0.6ms)[0m  [1mCOMMIT[0m
Redirected to http://localhost:3000/admin/collections
Completed 302 Found in 15ms (ActiveRecord: 2.7ms)


Started GET "/admin/collections" for 127.0.0.1 at 2016-01-17 06:44:10 +0100
Processing by CollectionsController#index as HTML
  Rendered shared/_restaurant_manage_tabs.html.erb (1.1ms)
  [1m[35mCollection Load (0.4ms)[0m  SELECT `collections`.* FROM `collections` ORDER BY name ASC, created_at DESC LIMIT 12 OFFSET 0
  [1m[36mCollectionImage Load (0.2ms)[0m  [1mSELECT `collection_images`.* FROM `collection_images` WHERE (collection_id = 21) LIMIT 1[0m
  [1m[35mCollectionImage Load (0.2ms)[0m  SELECT `collection_images`.* FROM `collection_images` WHERE (collection_id = 20) LIMIT 1
  [1m[36mCollectionImage Load (0.2ms)[0m  [1mSELECT `collection_images`.* FROM `collection_images` WHERE (collection_id = 24) LIMIT 1[0m
  [1m[35m (0.2ms)[0m  SELECT COUNT(*) FROM `collections` 
  Rendered collections/index.erb within layouts/admin (20.3ms)
  [1m[36mUser Load (0.3ms)[0m  [1mSELECT `users`.* FROM `users` WHERE `users`.`id` = 1 LIMIT 1[0m
Completed 200 OK in 32ms (Views: 29.6ms | ActiveRecord: 1.5ms)


Started GET "/restaurants" for 127.0.0.1 at 2016-01-17 06:46:14 +0100
  [1m[35m (0.2ms)[0m  SELECT COUNT(*) FROM `filter_types` WHERE (code = 'features')
  [1m[36m (0.2ms)[0m  [1mSELECT COUNT(*) FROM `filters` WHERE (code = 'offer')[0m
  [1m[35mFilter Load (0.2ms)[0m  SELECT `filters`.* FROM `filters` WHERE (code = 'offer') LIMIT 1
  [1m[36mFilterType Load (0.2ms)[0m  [1mSELECT `filter_types`.* FROM `filter_types` WHERE (code = 'features') LIMIT 1[0m
  [1m[35mCACHE (0.0ms)[0m  SELECT `filters`.* FROM `filters` WHERE (code = 'offer') LIMIT 1
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT `filter_types`.* FROM `filter_types` WHERE (code = 'features') LIMIT 1[0m
Processing by RestaurantsController#index as HTML
  [1m[35mUser Load (0.2ms)[0m  SELECT `users`.* FROM `users` WHERE `users`.`id` = 1 LIMIT 1
  Rendered shared/_restaurant_manage_tabs.html.erb (0.9ms)
  Rendered restaurants/_condition_fields.html.erb (19.1ms)
  [1m[36mRestaurant Load (0.9ms)[0m  [1mSELECT `restaurants`.* FROM `restaurants` ORDER BY disabled ASC,created_at DESC LIMIT 12 OFFSET 0[0m
  [1m[35mPhoto Load (0.5ms)[0m  SELECT `photos`.* FROM `photos` WHERE (restaurant_id = 1057 and cover = true and status = 1) LIMIT 1
  [1m[36mPhoto Load (0.4ms)[0m  [1mSELECT `photos`.* FROM `photos` WHERE `photos`.`restaurant_id` = 1057 AND `photos`.`status` = 1 ORDER BY restaurant_id ASC, created_at DESC LIMIT 1[0m
  [1m[35mCACHE (0.0ms)[0m  SELECT `photos`.* FROM `photos` WHERE (restaurant_id = 1057 and cover = true and status = 1) LIMIT 1
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT `photos`.* FROM `photos` WHERE `photos`.`restaurant_id` = 1057 AND `photos`.`status` = 1 ORDER BY restaurant_id ASC, created_at DESC LIMIT 1[0m
  [1m[35mPhoto Load (0.5ms)[0m  SELECT `photos`.* FROM `photos` WHERE (restaurant_id = 903 and cover = true and status = 1) LIMIT 1
  [1m[36mPhoto Load (0.3ms)[0m  [1mSELECT `photos`.* FROM `photos` WHERE `photos`.`restaurant_id` = 903 AND `photos`.`status` = 1 ORDER BY restaurant_id ASC, created_at DESC LIMIT 1[0m
  [1m[35mPhoto Load (0.3ms)[0m  SELECT `photos`.* FROM `photos` WHERE (restaurant_id = 876 and cover = true and status = 1) LIMIT 1
  [1m[36mPhoto Load (0.3ms)[0m  [1mSELECT `photos`.* FROM `photos` WHERE `photos`.`restaurant_id` = 876 AND `photos`.`status` = 1 ORDER BY restaurant_id ASC, created_at DESC LIMIT 1[0m
  [1m[35mPhoto Load (0.4ms)[0m  SELECT `photos`.* FROM `photos` WHERE (restaurant_id = 851 and cover = true and status = 1) LIMIT 1
  [1m[36mPhoto Load (0.3ms)[0m  [1mSELECT `photos`.* FROM `photos` WHERE `photos`.`restaurant_id` = 851 AND `photos`.`status` = 1 ORDER BY restaurant_id ASC, created_at DESC LIMIT 1[0m
  [1m[35mPhoto Load (0.4ms)[0m  SELECT `photos`.* FROM `photos` WHERE (restaurant_id = 693 and cover = true and status = 1) LIMIT 1
  [1m[36mPhoto Load (0.3ms)[0m  [1mSELECT `photos`.* FROM `photos` WHERE `photos`.`restaurant_id` = 693 AND `photos`.`status` = 1 ORDER BY restaurant_id ASC, created_at DESC LIMIT 1[0m
  [1m[35mPhoto Load (0.7ms)[0m  SELECT `photos`.* FROM `photos` WHERE (restaurant_id = 686 and cover = true and status = 1) LIMIT 1
  [1m[36mPhoto Load (0.3ms)[0m  [1mSELECT `photos`.* FROM `photos` WHERE `photos`.`restaurant_id` = 686 AND `photos`.`status` = 1 ORDER BY restaurant_id ASC, created_at DESC LIMIT 1[0m
  [1m[35mPhoto Load (0.4ms)[0m  SELECT `photos`.* FROM `photos` WHERE (restaurant_id = 669 and cover = true and status = 1) LIMIT 1
  [1m[36mPhoto Load (0.3ms)[0m  [1mSELECT `photos`.* FROM `photos` WHERE `photos`.`restaurant_id` = 669 AND `photos`.`status` = 1 ORDER BY restaurant_id ASC, created_at DESC LIMIT 1[0m
  [1m[35mPhoto Load (0.3ms)[0m  SELECT `photos`.* FROM `photos` WHERE (restaurant_id = 251 and cover = true and status = 1) LIMIT 1
  [1m[36mPhoto Load (0.3ms)[0m  [1mSELECT `photos`.* FROM `photos` WHERE `photos`.`restaurant_id` = 251 AND `photos`.`status` = 1 ORDER BY restaurant_id ASC, created_at DESC LIMIT 1[0m
  [1m[35mPhoto Load (0.4ms)[0m  SELECT `photos`.* FROM `photos` WHERE (restaurant_id = 250 and cover = true and status = 1) LIMIT 1
  [1m[36mPhoto Load (0.4ms)[0m  [1mSELECT `photos`.* FROM `photos` WHERE `photos`.`restaurant_id` = 250 AND `photos`.`status` = 1 ORDER BY restaurant_id ASC, created_at DESC LIMIT 1[0m
  [1m[35mPhoto Load (0.4ms)[0m  SELECT `photos`.* FROM `photos` WHERE (restaurant_id = 237 and cover = true and status = 1) LIMIT 1
  [1m[36mPhoto Load (0.3ms)[0m  [1mSELECT `photos`.* FROM `photos` WHERE `photos`.`restaurant_id` = 237 AND `photos`.`status` = 1 ORDER BY restaurant_id ASC, created_at DESC LIMIT 1[0m
  [1m[35mPhoto Load (0.4ms)[0m  SELECT `photos`.* FROM `photos` WHERE (restaurant_id = 231 and cover = true and status = 1) LIMIT 1
  [1m[36mPhoto Load (0.3ms)[0m  [1mSELECT `photos`.* FROM `photos` WHERE `photos`.`restaurant_id` = 231 AND `photos`.`status` = 1 ORDER BY restaurant_id ASC, created_at DESC LIMIT 1[0m
  [1m[35mPhoto Load (0.5ms)[0m  SELECT `photos`.* FROM `photos` WHERE (restaurant_id = 222 and cover = true and status = 1) LIMIT 1
  [1m[36mPhoto Load (0.3ms)[0m  [1mSELECT `photos`.* FROM `photos` WHERE `photos`.`restaurant_id` = 222 AND `photos`.`status` = 1 ORDER BY restaurant_id ASC, created_at DESC LIMIT 1[0m
  [1m[35m (0.3ms)[0m  SELECT COUNT(*) FROM `restaurants` 
  Rendered restaurants/index.html.erb within layouts/admin (186.7ms)
Completed 200 OK in 283ms (Views: 193.8ms | ActiveRecord: 13.6ms)


Started GET "/admin/collections" for 127.0.0.1 at 2016-01-17 06:54:06 +0100
Processing by CollectionsController#index as HTML
  Rendered shared/_restaurant_manage_tabs.html.erb (1.0ms)
  [1m[36mCollection Load (0.2ms)[0m  [1mSELECT `collections`.* FROM `collections` ORDER BY name ASC, created_at DESC LIMIT 12 OFFSET 0[0m
  [1m[35mCollectionImage Load (0.2ms)[0m  SELECT `collection_images`.* FROM `collection_images` WHERE (collection_id = 21) LIMIT 1
  [1m[36mCollectionImage Load (0.1ms)[0m  [1mSELECT `collection_images`.* FROM `collection_images` WHERE (collection_id = 20) LIMIT 1[0m
  [1m[35mCollectionImage Load (0.3ms)[0m  SELECT `collection_images`.* FROM `collection_images` WHERE (collection_id = 24) LIMIT 1
  [1m[36m (0.2ms)[0m  [1mSELECT COUNT(*) FROM `collections` [0m
  Rendered collections/index.erb within layouts/admin (59.1ms)
  [1m[35mUser Load (0.4ms)[0m  SELECT `users`.* FROM `users` WHERE `users`.`id` = 1 LIMIT 1
Completed 200 OK in 147ms (Views: 141.5ms | ActiveRecord: 4.2ms)


Started GET "/admin/collections/destroy/21" for 127.0.0.1 at 2016-01-17 06:54:09 +0100

ActionController::RoutingError (No route matches [GET] "/admin/collections/destroy/21"):
  actionpack (3.2.8) lib/action_dispatch/middleware/debug_exceptions.rb:21:in `call'
  actionpack (3.2.8) lib/action_dispatch/middleware/show_exceptions.rb:56:in `call'
  railties (3.2.8) lib/rails/rack/logger.rb:26:in `call_app'
  railties (3.2.8) lib/rails/rack/logger.rb:16:in `call'
  quiet_assets (1.0.3) lib/quiet_assets.rb:23:in `call_with_quiet_assets'
  actionpack (3.2.8) lib/action_dispatch/middleware/request_id.rb:22:in `call'
  rack (1.4.5) lib/rack/methodoverride.rb:21:in `call'
  rack (1.4.5) lib/rack/runtime.rb:17:in `call'
  activesupport (3.2.8) lib/active_support/cache/strategy/local_cache.rb:72:in `call'
  rack (1.4.5) lib/rack/lock.rb:15:in `call'
  actionpack (3.2.8) lib/action_dispatch/middleware/static.rb:62:in `call'
  dragonfly (0.9.15) lib/dragonfly/middleware.rb:13:in `call'
  rack-cache (1.2) lib/rack/cache/context.rb:136:in `forward'
  rack-cache (1.2) lib/rack/cache/context.rb:245:in `fetch'
  rack-cache (1.2) lib/rack/cache/context.rb:185:in `lookup'
  rack-cache (1.2) lib/rack/cache/context.rb:66:in `call!'
  rack-cache (1.2) lib/rack/cache/context.rb:51:in `call'
  railties (3.2.8) lib/rails/engine.rb:479:in `call'
  railties (3.2.8) lib/rails/application.rb:223:in `call'
  rack (1.4.5) lib/rack/content_length.rb:14:in `call'
  railties (3.2.8) lib/rails/rack/log_tailer.rb:17:in `call'
  rack (1.4.5) lib/rack/handler/webrick.rb:59:in `service'
  /Users/kevinmuller/.rvm/rubies/ruby-2.2.4/lib/ruby/2.2.0/webrick/httpserver.rb:138:in `service'
  /Users/kevinmuller/.rvm/rubies/ruby-2.2.4/lib/ruby/2.2.0/webrick/httpserver.rb:94:in `run'
  /Users/kevinmuller/.rvm/rubies/ruby-2.2.4/lib/ruby/2.2.0/webrick/server.rb:294:in `block in start_thread'


  Rendered /Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_dispatch/middleware/templates/rescues/routing_error.erb within rescues/layout (0.9ms)


Started GET "/restaurants" for 127.0.0.1 at 2016-01-17 06:56:01 +0100
  [1m[36m (0.2ms)[0m  [1mSELECT COUNT(*) FROM `filter_types` WHERE (code = 'features')[0m
  [1m[35m (0.2ms)[0m  SELECT COUNT(*) FROM `filters` WHERE (code = 'offer')
  [1m[36mFilter Load (0.2ms)[0m  [1mSELECT `filters`.* FROM `filters` WHERE (code = 'offer') LIMIT 1[0m
  [1m[35mFilterType Load (0.3ms)[0m  SELECT `filter_types`.* FROM `filter_types` WHERE (code = 'features') LIMIT 1
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT `filters`.* FROM `filters` WHERE (code = 'offer') LIMIT 1[0m
  [1m[35mCACHE (0.0ms)[0m  SELECT `filter_types`.* FROM `filter_types` WHERE (code = 'features') LIMIT 1
Processing by RestaurantsController#index as HTML
  [1m[36mUser Load (0.3ms)[0m  [1mSELECT `users`.* FROM `users` WHERE `users`.`id` = 1 LIMIT 1[0m
  Rendered shared/_restaurant_manage_tabs.html.erb (0.9ms)
  Rendered restaurants/_condition_fields.html.erb (16.5ms)
  [1m[35mRestaurant Load (1.0ms)[0m  SELECT `restaurants`.* FROM `restaurants` ORDER BY disabled ASC,created_at DESC LIMIT 12 OFFSET 0
  [1m[36mPhoto Load (0.4ms)[0m  [1mSELECT `photos`.* FROM `photos` WHERE (restaurant_id = 1057 and cover = true and status = 1) LIMIT 1[0m
  [1m[35mPhoto Load (0.3ms)[0m  SELECT `photos`.* FROM `photos` WHERE `photos`.`restaurant_id` = 1057 AND `photos`.`status` = 1 ORDER BY restaurant_id ASC, created_at DESC LIMIT 1
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT `photos`.* FROM `photos` WHERE (restaurant_id = 1057 and cover = true and status = 1) LIMIT 1[0m
  [1m[35mCACHE (0.0ms)[0m  SELECT `photos`.* FROM `photos` WHERE `photos`.`restaurant_id` = 1057 AND `photos`.`status` = 1 ORDER BY restaurant_id ASC, created_at DESC LIMIT 1
  [1m[36mPhoto Load (0.5ms)[0m  [1mSELECT `photos`.* FROM `photos` WHERE (restaurant_id = 903 and cover = true and status = 1) LIMIT 1[0m
  [1m[35mPhoto Load (0.3ms)[0m  SELECT `photos`.* FROM `photos` WHERE `photos`.`restaurant_id` = 903 AND `photos`.`status` = 1 ORDER BY restaurant_id ASC, created_at DESC LIMIT 1
  [1m[36mPhoto Load (0.4ms)[0m  [1mSELECT `photos`.* FROM `photos` WHERE (restaurant_id = 876 and cover = true and status = 1) LIMIT 1[0m
  [1m[35mPhoto Load (0.3ms)[0m  SELECT `photos`.* FROM `photos` WHERE `photos`.`restaurant_id` = 876 AND `photos`.`status` = 1 ORDER BY restaurant_id ASC, created_at DESC LIMIT 1
  [1m[36mPhoto Load (0.3ms)[0m  [1mSELECT `photos`.* FROM `photos` WHERE (restaurant_id = 851 and cover = true and status = 1) LIMIT 1[0m
  [1m[35mPhoto Load (0.3ms)[0m  SELECT `photos`.* FROM `photos` WHERE `photos`.`restaurant_id` = 851 AND `photos`.`status` = 1 ORDER BY restaurant_id ASC, created_at DESC LIMIT 1
  [1m[36mPhoto Load (0.4ms)[0m  [1mSELECT `photos`.* FROM `photos` WHERE (restaurant_id = 693 and cover = true and status = 1) LIMIT 1[0m
  [1m[35mPhoto Load (0.3ms)[0m  SELECT `photos`.* FROM `photos` WHERE `photos`.`restaurant_id` = 693 AND `photos`.`status` = 1 ORDER BY restaurant_id ASC, created_at DESC LIMIT 1
  [1m[36mPhoto Load (0.3ms)[0m  [1mSELECT `photos`.* FROM `photos` WHERE (restaurant_id = 686 and cover = true and status = 1) LIMIT 1[0m
  [1m[35mPhoto Load (0.2ms)[0m  SELECT `photos`.* FROM `photos` WHERE `photos`.`restaurant_id` = 686 AND `photos`.`status` = 1 ORDER BY restaurant_id ASC, created_at DESC LIMIT 1
  [1m[36mPhoto Load (0.3ms)[0m  [1mSELECT `photos`.* FROM `photos` WHERE (restaurant_id = 669 and cover = true and status = 1) LIMIT 1[0m
  [1m[35mPhoto Load (0.3ms)[0m  SELECT `photos`.* FROM `photos` WHERE `photos`.`restaurant_id` = 669 AND `photos`.`status` = 1 ORDER BY restaurant_id ASC, created_at DESC LIMIT 1
  [1m[36mPhoto Load (0.4ms)[0m  [1mSELECT `photos`.* FROM `photos` WHERE (restaurant_id = 251 and cover = true and status = 1) LIMIT 1[0m
  [1m[35mPhoto Load (0.4ms)[0m  SELECT `photos`.* FROM `photos` WHERE `photos`.`restaurant_id` = 251 AND `photos`.`status` = 1 ORDER BY restaurant_id ASC, created_at DESC LIMIT 1
  [1m[36mPhoto Load (0.3ms)[0m  [1mSELECT `photos`.* FROM `photos` WHERE (restaurant_id = 250 and cover = true and status = 1) LIMIT 1[0m
  [1m[35mPhoto Load (0.3ms)[0m  SELECT `photos`.* FROM `photos` WHERE `photos`.`restaurant_id` = 250 AND `photos`.`status` = 1 ORDER BY restaurant_id ASC, created_at DESC LIMIT 1
  [1m[36mPhoto Load (0.4ms)[0m  [1mSELECT `photos`.* FROM `photos` WHERE (restaurant_id = 237 and cover = true and status = 1) LIMIT 1[0m
  [1m[35mPhoto Load (0.3ms)[0m  SELECT `photos`.* FROM `photos` WHERE `photos`.`restaurant_id` = 237 AND `photos`.`status` = 1 ORDER BY restaurant_id ASC, created_at DESC LIMIT 1
  [1m[36mPhoto Load (0.4ms)[0m  [1mSELECT `photos`.* FROM `photos` WHERE (restaurant_id = 231 and cover = true and status = 1) LIMIT 1[0m
  [1m[35mPhoto Load (0.3ms)[0m  SELECT `photos`.* FROM `photos` WHERE `photos`.`restaurant_id` = 231 AND `photos`.`status` = 1 ORDER BY restaurant_id ASC, created_at DESC LIMIT 1
  [1m[36mPhoto Load (0.3ms)[0m  [1mSELECT `photos`.* FROM `photos` WHERE (restaurant_id = 222 and cover = true and status = 1) LIMIT 1[0m
  [1m[35mPhoto Load (0.3ms)[0m  SELECT `photos`.* FROM `photos` WHERE `photos`.`restaurant_id` = 222 AND `photos`.`status` = 1 ORDER BY restaurant_id ASC, created_at DESC LIMIT 1
  [1m[36m (0.3ms)[0m  [1mSELECT COUNT(*) FROM `restaurants` [0m
  Rendered restaurants/index.html.erb within layouts/admin (167.5ms)
Completed 200 OK in 245ms (Views: 178.8ms | ActiveRecord: 12.5ms)


Started GET "/admin/collections" for 127.0.0.1 at 2016-01-17 06:56:29 +0100
Processing by CollectionsController#index as HTML
  Rendered shared/_restaurant_manage_tabs.html.erb (1.3ms)
  [1m[35mCollection Load (0.2ms)[0m  SELECT `collections`.* FROM `collections` ORDER BY name ASC, created_at DESC LIMIT 12 OFFSET 0
  [1m[36mCollectionImage Load (0.2ms)[0m  [1mSELECT `collection_images`.* FROM `collection_images` WHERE (collection_id = 21) LIMIT 1[0m
  [1m[35mCollectionImage Load (0.2ms)[0m  SELECT `collection_images`.* FROM `collection_images` WHERE (collection_id = 20) LIMIT 1
  [1m[36mCollectionImage Load (0.2ms)[0m  [1mSELECT `collection_images`.* FROM `collection_images` WHERE (collection_id = 24) LIMIT 1[0m
  [1m[35m (0.3ms)[0m  SELECT COUNT(*) FROM `collections` 
  Rendered collections/index.erb within layouts/admin (50.7ms)
  [1m[36mUser Load (0.3ms)[0m  [1mSELECT `users`.* FROM `users` WHERE `users`.`id` = 1 LIMIT 1[0m
Completed 200 OK in 65ms (Views: 60.0ms | ActiveRecord: 3.1ms)


Started GET "/restaurants" for 127.0.0.1 at 2016-01-17 06:56:36 +0100
Processing by RestaurantsController#index as HTML
  [1m[35mUser Load (0.4ms)[0m  SELECT `users`.* FROM `users` WHERE `users`.`id` = 1 LIMIT 1
  Rendered shared/_restaurant_manage_tabs.html.erb (1.2ms)
  Rendered restaurants/_condition_fields.html.erb (18.8ms)
  [1m[36mRestaurant Load (0.9ms)[0m  [1mSELECT `restaurants`.* FROM `restaurants` ORDER BY disabled ASC,created_at DESC LIMIT 12 OFFSET 0[0m
  [1m[35mPhoto Load (0.5ms)[0m  SELECT `photos`.* FROM `photos` WHERE (restaurant_id = 1057 and cover = true and status = 1) LIMIT 1
  [1m[36mPhoto Load (0.3ms)[0m  [1mSELECT `photos`.* FROM `photos` WHERE `photos`.`restaurant_id` = 1057 AND `photos`.`status` = 1 ORDER BY restaurant_id ASC, created_at DESC LIMIT 1[0m
  [1m[35mCACHE (0.0ms)[0m  SELECT `photos`.* FROM `photos` WHERE (restaurant_id = 1057 and cover = true and status = 1) LIMIT 1
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT `photos`.* FROM `photos` WHERE `photos`.`restaurant_id` = 1057 AND `photos`.`status` = 1 ORDER BY restaurant_id ASC, created_at DESC LIMIT 1[0m
  [1m[35mPhoto Load (0.4ms)[0m  SELECT `photos`.* FROM `photos` WHERE (restaurant_id = 903 and cover = true and status = 1) LIMIT 1
  [1m[36mPhoto Load (0.3ms)[0m  [1mSELECT `photos`.* FROM `photos` WHERE `photos`.`restaurant_id` = 903 AND `photos`.`status` = 1 ORDER BY restaurant_id ASC, created_at DESC LIMIT 1[0m
  [1m[35mPhoto Load (0.4ms)[0m  SELECT `photos`.* FROM `photos` WHERE (restaurant_id = 876 and cover = true and status = 1) LIMIT 1
  [1m[36mPhoto Load (0.4ms)[0m  [1mSELECT `photos`.* FROM `photos` WHERE `photos`.`restaurant_id` = 876 AND `photos`.`status` = 1 ORDER BY restaurant_id ASC, created_at DESC LIMIT 1[0m
  [1m[35mPhoto Load (0.4ms)[0m  SELECT `photos`.* FROM `photos` WHERE (restaurant_id = 851 and cover = true and status = 1) LIMIT 1
  [1m[36mPhoto Load (0.3ms)[0m  [1mSELECT `photos`.* FROM `photos` WHERE `photos`.`restaurant_id` = 851 AND `photos`.`status` = 1 ORDER BY restaurant_id ASC, created_at DESC LIMIT 1[0m
  [1m[35mPhoto Load (0.5ms)[0m  SELECT `photos`.* FROM `photos` WHERE (restaurant_id = 693 and cover = true and status = 1) LIMIT 1
  [1m[36mPhoto Load (0.3ms)[0m  [1mSELECT `photos`.* FROM `photos` WHERE `photos`.`restaurant_id` = 693 AND `photos`.`status` = 1 ORDER BY restaurant_id ASC, created_at DESC LIMIT 1[0m
  [1m[35mPhoto Load (0.4ms)[0m  SELECT `photos`.* FROM `photos` WHERE (restaurant_id = 686 and cover = true and status = 1) LIMIT 1
  [1m[36mPhoto Load (0.3ms)[0m  [1mSELECT `photos`.* FROM `photos` WHERE `photos`.`restaurant_id` = 686 AND `photos`.`status` = 1 ORDER BY restaurant_id ASC, created_at DESC LIMIT 1[0m
  [1m[35mPhoto Load (0.4ms)[0m  SELECT `photos`.* FROM `photos` WHERE (restaurant_id = 669 and cover = true and status = 1) LIMIT 1
  [1m[36mPhoto Load (0.3ms)[0m  [1mSELECT `photos`.* FROM `photos` WHERE `photos`.`restaurant_id` = 669 AND `photos`.`status` = 1 ORDER BY restaurant_id ASC, created_at DESC LIMIT 1[0m
  [1m[35mPhoto Load (0.5ms)[0m  SELECT `photos`.* FROM `photos` WHERE (restaurant_id = 251 and cover = true and status = 1) LIMIT 1
  [1m[36mPhoto Load (0.3ms)[0m  [1mSELECT `photos`.* FROM `photos` WHERE `photos`.`restaurant_id` = 251 AND `photos`.`status` = 1 ORDER BY restaurant_id ASC, created_at DESC LIMIT 1[0m
  [1m[35mPhoto Load (0.4ms)[0m  SELECT `photos`.* FROM `photos` WHERE (restaurant_id = 250 and cover = true and status = 1) LIMIT 1
  [1m[36mPhoto Load (0.4ms)[0m  [1mSELECT `photos`.* FROM `photos` WHERE `photos`.`restaurant_id` = 250 AND `photos`.`status` = 1 ORDER BY restaurant_id ASC, created_at DESC LIMIT 1[0m
  [1m[35mPhoto Load (0.4ms)[0m  SELECT `photos`.* FROM `photos` WHERE (restaurant_id = 237 and cover = true and status = 1) LIMIT 1
  [1m[36mPhoto Load (0.3ms)[0m  [1mSELECT `photos`.* FROM `photos` WHERE `photos`.`restaurant_id` = 237 AND `photos`.`status` = 1 ORDER BY restaurant_id ASC, created_at DESC LIMIT 1[0m
  [1m[35mPhoto Load (0.3ms)[0m  SELECT `photos`.* FROM `photos` WHERE (restaurant_id = 231 and cover = true and status = 1) LIMIT 1
  [1m[36mPhoto Load (0.3ms)[0m  [1mSELECT `photos`.* FROM `photos` WHERE `photos`.`restaurant_id` = 231 AND `photos`.`status` = 1 ORDER BY restaurant_id ASC, created_at DESC LIMIT 1[0m
  [1m[35mPhoto Load (0.3ms)[0m  SELECT `photos`.* FROM `photos` WHERE (restaurant_id = 222 and cover = true and status = 1) LIMIT 1
  [1m[36mPhoto Load (0.3ms)[0m  [1mSELECT `photos`.* FROM `photos` WHERE `photos`.`restaurant_id` = 222 AND `photos`.`status` = 1 ORDER BY restaurant_id ASC, created_at DESC LIMIT 1[0m
  [1m[35m (0.4ms)[0m  SELECT COUNT(*) FROM `restaurants` 
  Rendered restaurants/index.html.erb within layouts/admin (146.4ms)
Completed 200 OK in 171ms (Views: 156.8ms | ActiveRecord: 10.2ms)


Started GET "/admin/collections" for 127.0.0.1 at 2016-01-17 07:00:23 +0100
Processing by CollectionsController#index as HTML
  Rendered shared/_restaurant_manage_tabs.html.erb (0.9ms)
  [1m[36mCollection Load (0.3ms)[0m  [1mSELECT `collections`.* FROM `collections` ORDER BY name ASC, created_at DESC LIMIT 12 OFFSET 0[0m
  [1m[35mCollectionImage Load (0.2ms)[0m  SELECT `collection_images`.* FROM `collection_images` WHERE (collection_id = 21) LIMIT 1
  Rendered collections/index.erb within layouts/admin (8.7ms)
Completed 500 Internal Server Error in 24ms

ActionView::Template::Error (undefined method `disabled' for #<Collection:0x007f8353a6b070>):
    35:             <%= link_to edit_collection_path(collection.id), class: "btn btn-default fa fa-edit", title: 'Edit' do %>
    36:                 <span class="open-san"><%= t('collections.edit') %></span>
    37:             <% end %>
    38:             <%= disable_collection_button collection %>
    39:             <%= link_to destroy_collection_collections_path(collection.id), class: "btn btn-default fa fa-minus-circle", title: 'Delete' do %>
    40:                 <span class="open-san"><%= t('collections.delete') %></span>
    41:             <% end %>
  app/helpers/collections_helper.rb:3:in `disable_collection_button'
  app/views/collections/index.erb:38:in `block in _app_views_collections_index_erb___1182846876568079597_70101010631740'
  app/views/collections/index.erb:26:in `_app_views_collections_index_erb___1182846876568079597_70101010631740'
  app/controllers/collections_controller.rb:20:in `index'


  Rendered /Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_dispatch/middleware/templates/rescues/_trace.erb (1.2ms)
  Rendered /Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_dispatch/middleware/templates/rescues/_request_and_response.erb (1.2ms)
  Rendered /Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_dispatch/middleware/templates/rescues/template_error.erb within rescues/layout (43.3ms)
Connecting to database specified by database.yml
DEPRECATION WARNING: Passing :tag, :class and others to use is deprecated. Please invoke b.use :label, :wrap_with => {:class=>"simple_label"} instead. (called from block (2 levels) in <top (required)> at /Users/kevinmuller/halalgems_backend/config/initializers/simple_form.rb:67)
Connecting to database specified by database.yml
DEPRECATION WARNING: Passing :tag, :class and others to use is deprecated. Please invoke b.use :label, :wrap_with => {:class=>"simple_label"} instead. (called from block (2 levels) in <top (required)> at /Users/kevinmuller/halalgems_backend/config/initializers/simple_form.rb:67)
Connecting to database specified by database.yml
DEPRECATION WARNING: Passing :tag, :class and others to use is deprecated. Please invoke b.use :label, :wrap_with => {:class=>"simple_label"} instead. (called from block (2 levels) in <top (required)> at /Users/kevinmuller/halalgems_backend/config/initializers/simple_form.rb:67)
  [1m[36m (13.6ms)[0m  [1mSELECT `schema_migrations`.`version` FROM `schema_migrations` [0m
Migrating to CreateUsers (20120822030811)
Migrating to AddDeviseToUsers (20120822030947)
Migrating to AddRoleToUsers (20120822035539)
Migrating to AddColumnsToUsers (20120822040907)
Migrating to AddNameToUsers (20120822064044)
Migrating to AddSessionsTable (20120822072201)
Migrating to AddJoinMailingListToUsers (20120822163135)
Migrating to CreateRestaurants (20120823045735)
Migrating to CreatePhotos (20120823082051)
Migrating to CreateReviews (20120824034307)
Migrating to CreateFavourites (20120824034907)
Migrating to AddAttributesToRestaurant (20120824092649)
Migrating to AddDirectionToRestaurant (20120828032047)
Migrating to CreateAdminPhotos (20120828033854)
Migrating to AddRatingToRestaurant (20120828083737)
Migrating to CreateFilters (20120829090608)
Migrating to CreateFiltersRestaurants (20120830045136)
Migrating to CreateSchedules (20120830101034)
Migrating to AddPriceToRestaurant (20120904103954)
Migrating to AddAvatarUidToUsers (20120904110732)
Migrating to AddAvatarNameToUsers (20120904110804)
Migrating to RemoveAvatarFromUsers (20120905071514)
Migrating to CreateSimpleCaptchaData (20120906132419)
Migrating to ChangeDataTypeForRatingReviews (20120909104219)
Migrating to AddMenuToRestaurant (20120910073101)
Migrating to CreateBasicsPages (20120910092737)
Migrating to CreateFilterTypes (20120910104054)
Migrating to CreateFilterTypesRestaurant (20120910104249)
Migrating to CreateMenus (20120910114555)
Migrating to AddNameToMenu (20120913093300)
Migrating to AddVisitedDateToReviews (20120913160959)
Migrating to ChangeDefaultDisableRestaurant (20120914085347)
Migrating to AddImageTypeToAdminPhotos (20120916171915)
Migrating to AddWebsiteToRestaurant (20120919064355)
Migrating to AddIsSubscribedToUser (20120925092845)
Migrating to AddShortAddressToRestaurant (20120927043121)
Migrating to CreateFriendlyIdSlugs (20121030042736)
Migrating to AddSlugToRestaurants (20121030042759)
Migrating to AddSpecialDealToRestaurant (20130710100004)
Migrating to AddFeatureReviewToReview (20131211090826)
Migrating to AddSocialMediaLinkToRestaurant (20131213035001)
Migrating to CreateRestaurantTemps (20131223030922)
Migrating to CreateFiltersRestaurantTemps (20131223083429)
Migrating to AddRestaurantTempIdToSchedule (20131223083845)
Migrating to AddWaitingForApproveChangeToRestaurant (20131223090222)
Migrating to AddReplyContentUserReplyToReview (20131224024320)
Migrating to CreateOffers (20131226042850)
Migrating to AddStartdayEnddayStarttimeEndtimeToOffer (20131230094314)
Migrating to AddRestaurantTempIdToPhoto (20140106034924)
Migrating to AddScheduleTypeToSchedules (20140109030030)
Migrating to AddSuggesterInfoToRestaurant (20140111080001)
Migrating to AddTimePublishToOffers (20140115043151)
Migrating to ChangeFormatInOffer (20140115061637)
Migrating to AddApproveToOffer (20140116070841)
Migrating to AddApproveReplyToReview (20140117061635)
Migrating to CreateSubscriptions (20140118040432)
Migrating to CreatePlans (20140118041153)
Migrating to CreatePlanTypes (20140118041428)
Migrating to AddCardNumberAndCardVerificationToSubscription (20140118073636)
Migrating to AddExpressTokenToSubscription (20140118080228)
Migrating to AddPlanIdToSubscription (20140118104008)
Migrating to AddTextToPhoto (20140118104051)
Migrating to AddRestaurantOwnerRoleToUser (20140120045737)
Migrating to AddSugguestEmailToRestaurantTemp (20140121023319)
Migrating to AddCodeToFilterType (20140121061831)
Migrating to AddIndexToFilterType (20140123042213)
Migrating to AddExpireTimeToSubscription (20140123080601)
Migrating to AddDescriptionToPlan (20140124025648)
Migrating to AddHyperlinkToPhoto (20140210034922)
Migrating to AddRecurringStatusToSubscription (20140222061611)
Migrating to AddStatusToPhoto (20140224063855)
Migrating to AddMoreToSubscription (20140225064855)
Migrating to AddReplyTimeToReview (20140226020308)
Migrating to AddPaypalStatusToSubcription (20140303094950)
Migrating to AddPostcodeToUser (20140305085528)
Migrating to AddRequestToRestaurant (20140318105804)
Migrating to CreateTransactions (20140414073113)
Migrating to AddInstagramToRestaurant (20140618093534)
Migrating to AddImageToOffer (20140620064831)
Migrating to AddIntegramLinkToRestaurantTemp (20141016072850)
Migrating to AddGemHunterToUsers (20141027023853)
Migrating to AddIndexOrderToFilters (20141029143508)
Migrating to AddDeviceTypeToUser (20141113080758)
Migrating to AddPageUidToBasicPage (20141114090841)
Migrating to AddGemHunterUrlToUser (20141118091319)
Migrating to CreateGiftcards (20150702214222)
Migrating to CreateGiftcardRedemptions (20150702214247)
Migrating to CreateGiftcardRestaurantMemberships (20150707173045)
Migrating to CreateCheckins (20150723184603)
  [1m[35m (11.7ms)[0m  CREATE TABLE `checkins` (`id` int(11) DEFAULT NULL auto_increment PRIMARY KEY, `user_id` int(11), `restaurant_id` int(11), `created_at` datetime NOT NULL, `updated_at` datetime NOT NULL) ENGINE=InnoDB
Mysql2::Error: All parts of a PRIMARY KEY must be NOT NULL; if you need NULL in a key, use UNIQUE instead: CREATE TABLE `checkins` (`id` int(11) DEFAULT NULL auto_increment PRIMARY KEY, `user_id` int(11), `restaurant_id` int(11), `created_at` datetime NOT NULL, `updated_at` datetime NOT NULL) ENGINE=InnoDB
Connecting to database specified by database.yml
DEPRECATION WARNING: Passing :tag, :class and others to use is deprecated. Please invoke b.use :label, :wrap_with => {:class=>"simple_label"} instead. (called from block (2 levels) in <top (required)> at /Users/kevinmuller/halalgems_backend/config/initializers/simple_form.rb:67)
  [1m[36m (0.2ms)[0m  [1mSELECT `schema_migrations`.`version` FROM `schema_migrations` [0m
Migrating to CreateUsers (20120822030811)
Migrating to AddDeviseToUsers (20120822030947)
Migrating to AddRoleToUsers (20120822035539)
Migrating to AddColumnsToUsers (20120822040907)
Migrating to AddNameToUsers (20120822064044)
Migrating to AddSessionsTable (20120822072201)
Migrating to AddJoinMailingListToUsers (20120822163135)
Migrating to CreateRestaurants (20120823045735)
Migrating to CreatePhotos (20120823082051)
Migrating to CreateReviews (20120824034307)
Migrating to CreateFavourites (20120824034907)
Migrating to AddAttributesToRestaurant (20120824092649)
Migrating to AddDirectionToRestaurant (20120828032047)
Migrating to CreateAdminPhotos (20120828033854)
Migrating to AddRatingToRestaurant (20120828083737)
Migrating to CreateFilters (20120829090608)
Migrating to CreateFiltersRestaurants (20120830045136)
Migrating to CreateSchedules (20120830101034)
Migrating to AddPriceToRestaurant (20120904103954)
Migrating to AddAvatarUidToUsers (20120904110732)
Migrating to AddAvatarNameToUsers (20120904110804)
Migrating to RemoveAvatarFromUsers (20120905071514)
Migrating to CreateSimpleCaptchaData (20120906132419)
Migrating to ChangeDataTypeForRatingReviews (20120909104219)
Migrating to AddMenuToRestaurant (20120910073101)
Migrating to CreateBasicsPages (20120910092737)
Migrating to CreateFilterTypes (20120910104054)
Migrating to CreateFilterTypesRestaurant (20120910104249)
Migrating to CreateMenus (20120910114555)
Migrating to AddNameToMenu (20120913093300)
Migrating to AddVisitedDateToReviews (20120913160959)
Migrating to ChangeDefaultDisableRestaurant (20120914085347)
Migrating to AddImageTypeToAdminPhotos (20120916171915)
Migrating to AddWebsiteToRestaurant (20120919064355)
Migrating to AddIsSubscribedToUser (20120925092845)
Migrating to AddShortAddressToRestaurant (20120927043121)
Migrating to CreateFriendlyIdSlugs (20121030042736)
Migrating to AddSlugToRestaurants (20121030042759)
Migrating to AddSpecialDealToRestaurant (20130710100004)
Migrating to AddFeatureReviewToReview (20131211090826)
Migrating to AddSocialMediaLinkToRestaurant (20131213035001)
Migrating to CreateRestaurantTemps (20131223030922)
Migrating to CreateFiltersRestaurantTemps (20131223083429)
Migrating to AddRestaurantTempIdToSchedule (20131223083845)
Migrating to AddWaitingForApproveChangeToRestaurant (20131223090222)
Migrating to AddReplyContentUserReplyToReview (20131224024320)
Migrating to CreateOffers (20131226042850)
Migrating to AddStartdayEnddayStarttimeEndtimeToOffer (20131230094314)
Migrating to AddRestaurantTempIdToPhoto (20140106034924)
Migrating to AddScheduleTypeToSchedules (20140109030030)
Migrating to AddSuggesterInfoToRestaurant (20140111080001)
Migrating to AddTimePublishToOffers (20140115043151)
Migrating to ChangeFormatInOffer (20140115061637)
Migrating to AddApproveToOffer (20140116070841)
Migrating to AddApproveReplyToReview (20140117061635)
Migrating to CreateSubscriptions (20140118040432)
Migrating to CreatePlans (20140118041153)
Migrating to CreatePlanTypes (20140118041428)
Migrating to AddCardNumberAndCardVerificationToSubscription (20140118073636)
Migrating to AddExpressTokenToSubscription (20140118080228)
Migrating to AddPlanIdToSubscription (20140118104008)
Migrating to AddTextToPhoto (20140118104051)
Migrating to AddRestaurantOwnerRoleToUser (20140120045737)
Migrating to AddSugguestEmailToRestaurantTemp (20140121023319)
Migrating to AddCodeToFilterType (20140121061831)
Migrating to AddIndexToFilterType (20140123042213)
Migrating to AddExpireTimeToSubscription (20140123080601)
Migrating to AddDescriptionToPlan (20140124025648)
Migrating to AddHyperlinkToPhoto (20140210034922)
Migrating to AddRecurringStatusToSubscription (20140222061611)
Migrating to AddStatusToPhoto (20140224063855)
Migrating to AddMoreToSubscription (20140225064855)
Migrating to AddReplyTimeToReview (20140226020308)
Migrating to AddPaypalStatusToSubcription (20140303094950)
Migrating to AddPostcodeToUser (20140305085528)
Migrating to AddRequestToRestaurant (20140318105804)
Migrating to CreateTransactions (20140414073113)
Migrating to AddInstagramToRestaurant (20140618093534)
Migrating to AddImageToOffer (20140620064831)
Migrating to AddIntegramLinkToRestaurantTemp (20141016072850)
Migrating to AddGemHunterToUsers (20141027023853)
Migrating to AddIndexOrderToFilters (20141029143508)
Migrating to AddDeviceTypeToUser (20141113080758)
Migrating to AddPageUidToBasicPage (20141114090841)
Migrating to AddGemHunterUrlToUser (20141118091319)
Migrating to CreateGiftcards (20150702214222)
Migrating to CreateGiftcardRedemptions (20150702214247)
Migrating to CreateGiftcardRestaurantMemberships (20150707173045)
Migrating to CreateCheckins (20150723184603)
  [1m[35m (0.3ms)[0m  CREATE TABLE `checkins` (`id` int(11) DEFAULT NULL auto_increment PRIMARY KEY, `user_id` int(11), `restaurant_id` int(11), `created_at` datetime NOT NULL, `updated_at` datetime NOT NULL) ENGINE=InnoDB
Mysql2::Error: All parts of a PRIMARY KEY must be NOT NULL; if you need NULL in a key, use UNIQUE instead: CREATE TABLE `checkins` (`id` int(11) DEFAULT NULL auto_increment PRIMARY KEY, `user_id` int(11), `restaurant_id` int(11), `created_at` datetime NOT NULL, `updated_at` datetime NOT NULL) ENGINE=InnoDB
Connecting to database specified by database.yml
DEPRECATION WARNING: Passing :tag, :class and others to use is deprecated. Please invoke b.use :label, :wrap_with => {:class=>"simple_label"} instead. (called from block (2 levels) in <top (required)> at /Users/kevinmuller/halalgems_backend/config/initializers/simple_form.rb:67)
  [1m[36m (0.3ms)[0m  [1mSELECT `schema_migrations`.`version` FROM `schema_migrations` [0m
Migrating to CreateUsers (20120822030811)
Migrating to AddDeviseToUsers (20120822030947)
Migrating to AddRoleToUsers (20120822035539)
Migrating to AddColumnsToUsers (20120822040907)
Migrating to AddNameToUsers (20120822064044)
Migrating to AddSessionsTable (20120822072201)
Migrating to AddJoinMailingListToUsers (20120822163135)
Migrating to CreateRestaurants (20120823045735)
Migrating to CreatePhotos (20120823082051)
Migrating to CreateReviews (20120824034307)
Migrating to CreateFavourites (20120824034907)
Migrating to AddAttributesToRestaurant (20120824092649)
Migrating to AddDirectionToRestaurant (20120828032047)
Migrating to CreateAdminPhotos (20120828033854)
Migrating to AddRatingToRestaurant (20120828083737)
Migrating to CreateFilters (20120829090608)
Migrating to CreateFiltersRestaurants (20120830045136)
Migrating to CreateSchedules (20120830101034)
Migrating to AddPriceToRestaurant (20120904103954)
Migrating to AddAvatarUidToUsers (20120904110732)
Migrating to AddAvatarNameToUsers (20120904110804)
Migrating to RemoveAvatarFromUsers (20120905071514)
Migrating to CreateSimpleCaptchaData (20120906132419)
Migrating to ChangeDataTypeForRatingReviews (20120909104219)
Migrating to AddMenuToRestaurant (20120910073101)
Migrating to CreateBasicsPages (20120910092737)
Migrating to CreateFilterTypes (20120910104054)
Migrating to CreateFilterTypesRestaurant (20120910104249)
Migrating to CreateMenus (20120910114555)
Migrating to AddNameToMenu (20120913093300)
Migrating to AddVisitedDateToReviews (20120913160959)
Migrating to ChangeDefaultDisableRestaurant (20120914085347)
Migrating to AddImageTypeToAdminPhotos (20120916171915)
Migrating to AddWebsiteToRestaurant (20120919064355)
Migrating to AddIsSubscribedToUser (20120925092845)
Migrating to AddShortAddressToRestaurant (20120927043121)
Migrating to CreateFriendlyIdSlugs (20121030042736)
Migrating to AddSlugToRestaurants (20121030042759)
Migrating to AddSpecialDealToRestaurant (20130710100004)
Migrating to AddFeatureReviewToReview (20131211090826)
Migrating to AddSocialMediaLinkToRestaurant (20131213035001)
Migrating to CreateRestaurantTemps (20131223030922)
Migrating to CreateFiltersRestaurantTemps (20131223083429)
Migrating to AddRestaurantTempIdToSchedule (20131223083845)
Migrating to AddWaitingForApproveChangeToRestaurant (20131223090222)
Migrating to AddReplyContentUserReplyToReview (20131224024320)
Migrating to CreateOffers (20131226042850)
Migrating to AddStartdayEnddayStarttimeEndtimeToOffer (20131230094314)
Migrating to AddRestaurantTempIdToPhoto (20140106034924)
Migrating to AddScheduleTypeToSchedules (20140109030030)
Migrating to AddSuggesterInfoToRestaurant (20140111080001)
Migrating to AddTimePublishToOffers (20140115043151)
Migrating to ChangeFormatInOffer (20140115061637)
Migrating to AddApproveToOffer (20140116070841)
Migrating to AddApproveReplyToReview (20140117061635)
Migrating to CreateSubscriptions (20140118040432)
Migrating to CreatePlans (20140118041153)
Migrating to CreatePlanTypes (20140118041428)
Migrating to AddCardNumberAndCardVerificationToSubscription (20140118073636)
Migrating to AddExpressTokenToSubscription (20140118080228)
Migrating to AddPlanIdToSubscription (20140118104008)
Migrating to AddTextToPhoto (20140118104051)
Migrating to AddRestaurantOwnerRoleToUser (20140120045737)
Migrating to AddSugguestEmailToRestaurantTemp (20140121023319)
Migrating to AddCodeToFilterType (20140121061831)
Migrating to AddIndexToFilterType (20140123042213)
Migrating to AddExpireTimeToSubscription (20140123080601)
Migrating to AddDescriptionToPlan (20140124025648)
Migrating to AddHyperlinkToPhoto (20140210034922)
Migrating to AddRecurringStatusToSubscription (20140222061611)
Migrating to AddStatusToPhoto (20140224063855)
Migrating to AddMoreToSubscription (20140225064855)
Migrating to AddReplyTimeToReview (20140226020308)
Migrating to AddPaypalStatusToSubcription (20140303094950)
Migrating to AddPostcodeToUser (20140305085528)
Migrating to AddRequestToRestaurant (20140318105804)
Migrating to CreateTransactions (20140414073113)
Migrating to AddInstagramToRestaurant (20140618093534)
Migrating to AddImageToOffer (20140620064831)
Migrating to AddIntegramLinkToRestaurantTemp (20141016072850)
Migrating to AddGemHunterToUsers (20141027023853)
Migrating to AddIndexOrderToFilters (20141029143508)
Migrating to AddDeviceTypeToUser (20141113080758)
Migrating to AddPageUidToBasicPage (20141114090841)
Migrating to AddGemHunterUrlToUser (20141118091319)
Migrating to CreateGiftcards (20150702214222)
Migrating to CreateGiftcardRedemptions (20150702214247)
Migrating to CreateGiftcardRestaurantMemberships (20150707173045)
Migrating to CreateCheckins (20150723184603)
  [1m[35m (0.3ms)[0m  CREATE TABLE `checkins` (`id` int(11) DEFAULT NULL auto_increment PRIMARY KEY, `user_id` int(11), `restaurant_id` int(11), `created_at` datetime NOT NULL, `updated_at` datetime NOT NULL) ENGINE=InnoDB
Mysql2::Error: All parts of a PRIMARY KEY must be NOT NULL; if you need NULL in a key, use UNIQUE instead: CREATE TABLE `checkins` (`id` int(11) DEFAULT NULL auto_increment PRIMARY KEY, `user_id` int(11), `restaurant_id` int(11), `created_at` datetime NOT NULL, `updated_at` datetime NOT NULL) ENGINE=InnoDB
Connecting to database specified by database.yml
DEPRECATION WARNING: Passing :tag, :class and others to use is deprecated. Please invoke b.use :label, :wrap_with => {:class=>"simple_label"} instead. (called from block (2 levels) in <top (required)> at /Users/kevinmuller/halalgems_backend/config/initializers/simple_form.rb:67)
  [1m[36m (0.2ms)[0m  [1mSELECT `schema_migrations`.`version` FROM `schema_migrations` [0m
  [1m[35m (0.1ms)[0m  SELECT `schema_migrations`.`version` FROM `schema_migrations` 
  [1m[36m (0.2ms)[0m  [1mSELECT `schema_migrations`.`version` FROM `schema_migrations` [0m
Connecting to database specified by database.yml
DEPRECATION WARNING: Passing :tag, :class and others to use is deprecated. Please invoke b.use :label, :wrap_with => {:class=>"simple_label"} instead. (called from block (2 levels) in <top (required)> at /Users/kevinmuller/halalgems_backend/config/initializers/simple_form.rb:67)
  [1m[36m (0.2ms)[0m  [1mSELECT `schema_migrations`.`version` FROM `schema_migrations` [0m
  [1m[35m (0.2ms)[0m  SELECT `schema_migrations`.`version` FROM `schema_migrations` 
  [1m[36m (0.1ms)[0m  [1mSELECT `schema_migrations`.`version` FROM `schema_migrations` [0m
Connecting to database specified by database.yml
DEPRECATION WARNING: Passing :tag, :class and others to use is deprecated. Please invoke b.use :label, :wrap_with => {:class=>"simple_label"} instead. (called from block (2 levels) in <top (required)> at /Users/kevinmuller/halalgems_backend/config/initializers/simple_form.rb:67)
  [1m[36m (0.2ms)[0m  [1mSELECT `schema_migrations`.`version` FROM `schema_migrations` [0m
Migrating to CreateUsers (20120822030811)
Migrating to AddDeviseToUsers (20120822030947)
Migrating to AddRoleToUsers (20120822035539)
Migrating to AddColumnsToUsers (20120822040907)
Migrating to AddNameToUsers (20120822064044)
Migrating to AddSessionsTable (20120822072201)
Migrating to AddJoinMailingListToUsers (20120822163135)
Migrating to CreateRestaurants (20120823045735)
Migrating to CreatePhotos (20120823082051)
Migrating to CreateReviews (20120824034307)
Migrating to CreateFavourites (20120824034907)
Migrating to AddAttributesToRestaurant (20120824092649)
Migrating to AddDirectionToRestaurant (20120828032047)
Migrating to CreateAdminPhotos (20120828033854)
Migrating to AddRatingToRestaurant (20120828083737)
Migrating to CreateFilters (20120829090608)
Migrating to CreateFiltersRestaurants (20120830045136)
Migrating to CreateSchedules (20120830101034)
Migrating to AddPriceToRestaurant (20120904103954)
Migrating to AddAvatarUidToUsers (20120904110732)
Migrating to AddAvatarNameToUsers (20120904110804)
Migrating to RemoveAvatarFromUsers (20120905071514)
Migrating to CreateSimpleCaptchaData (20120906132419)
Migrating to ChangeDataTypeForRatingReviews (20120909104219)
Migrating to AddMenuToRestaurant (20120910073101)
Migrating to CreateBasicsPages (20120910092737)
Migrating to CreateFilterTypes (20120910104054)
Migrating to CreateFilterTypesRestaurant (20120910104249)
Migrating to CreateMenus (20120910114555)
Migrating to AddNameToMenu (20120913093300)
Migrating to AddVisitedDateToReviews (20120913160959)
Migrating to ChangeDefaultDisableRestaurant (20120914085347)
Migrating to AddImageTypeToAdminPhotos (20120916171915)
Migrating to AddWebsiteToRestaurant (20120919064355)
Migrating to AddIsSubscribedToUser (20120925092845)
Migrating to AddShortAddressToRestaurant (20120927043121)
Migrating to CreateFriendlyIdSlugs (20121030042736)
Migrating to AddSlugToRestaurants (20121030042759)
Migrating to AddSpecialDealToRestaurant (20130710100004)
Migrating to AddFeatureReviewToReview (20131211090826)
Migrating to AddSocialMediaLinkToRestaurant (20131213035001)
Migrating to CreateRestaurantTemps (20131223030922)
Migrating to CreateFiltersRestaurantTemps (20131223083429)
Migrating to AddRestaurantTempIdToSchedule (20131223083845)
Migrating to AddWaitingForApproveChangeToRestaurant (20131223090222)
Migrating to AddReplyContentUserReplyToReview (20131224024320)
Migrating to CreateOffers (20131226042850)
Migrating to AddStartdayEnddayStarttimeEndtimeToOffer (20131230094314)
Migrating to AddRestaurantTempIdToPhoto (20140106034924)
Migrating to AddScheduleTypeToSchedules (20140109030030)
Migrating to AddSuggesterInfoToRestaurant (20140111080001)
Migrating to AddTimePublishToOffers (20140115043151)
Migrating to ChangeFormatInOffer (20140115061637)
Migrating to AddApproveToOffer (20140116070841)
Migrating to AddApproveReplyToReview (20140117061635)
Migrating to CreateSubscriptions (20140118040432)
Migrating to CreatePlans (20140118041153)
Migrating to CreatePlanTypes (20140118041428)
Migrating to AddCardNumberAndCardVerificationToSubscription (20140118073636)
Migrating to AddExpressTokenToSubscription (20140118080228)
Migrating to AddPlanIdToSubscription (20140118104008)
Migrating to AddTextToPhoto (20140118104051)
Migrating to AddRestaurantOwnerRoleToUser (20140120045737)
Migrating to AddSugguestEmailToRestaurantTemp (20140121023319)
Migrating to AddCodeToFilterType (20140121061831)
Migrating to AddIndexToFilterType (20140123042213)
Migrating to AddExpireTimeToSubscription (20140123080601)
Migrating to AddDescriptionToPlan (20140124025648)
Migrating to AddHyperlinkToPhoto (20140210034922)
Migrating to AddRecurringStatusToSubscription (20140222061611)
Migrating to AddStatusToPhoto (20140224063855)
Migrating to AddMoreToSubscription (20140225064855)
Migrating to AddReplyTimeToReview (20140226020308)
Migrating to AddPaypalStatusToSubcription (20140303094950)
Migrating to AddPostcodeToUser (20140305085528)
Migrating to AddRequestToRestaurant (20140318105804)
Migrating to CreateTransactions (20140414073113)
Migrating to AddInstagramToRestaurant (20140618093534)
Migrating to AddImageToOffer (20140620064831)
Migrating to AddIntegramLinkToRestaurantTemp (20141016072850)
Migrating to AddGemHunterToUsers (20141027023853)
Migrating to AddIndexOrderToFilters (20141029143508)
Migrating to AddDeviceTypeToUser (20141113080758)
Migrating to AddPageUidToBasicPage (20141114090841)
Migrating to AddGemHunterUrlToUser (20141118091319)
Migrating to CreateGiftcards (20150702214222)
Migrating to CreateGiftcardRedemptions (20150702214247)
Migrating to CreateGiftcardRestaurantMemberships (20150707173045)
Migrating to CreateCheckins (20150723184603)
  [1m[35m (0.2ms)[0m  CREATE TABLE `checkins` (`id` int(11) DEFAULT NULL auto_increment PRIMARY KEY, `user_id` int(11), `restaurant_id` int(11), `created_at` datetime NOT NULL, `updated_at` datetime NOT NULL) ENGINE=InnoDB
Mysql2::Error: All parts of a PRIMARY KEY must be NOT NULL; if you need NULL in a key, use UNIQUE instead: CREATE TABLE `checkins` (`id` int(11) DEFAULT NULL auto_increment PRIMARY KEY, `user_id` int(11), `restaurant_id` int(11), `created_at` datetime NOT NULL, `updated_at` datetime NOT NULL) ENGINE=InnoDB
Connecting to database specified by database.yml
DEPRECATION WARNING: Passing :tag, :class and others to use is deprecated. Please invoke b.use :label, :wrap_with => {:class=>"simple_label"} instead. (called from block (2 levels) in <top (required)> at /Users/kevinmuller/halalgems_backend/config/initializers/simple_form.rb:67)
  [1m[36m (0.2ms)[0m  [1mSELECT `schema_migrations`.`version` FROM `schema_migrations` [0m
Migrating to CreateUsers (20120822030811)
Migrating to AddDeviseToUsers (20120822030947)
Migrating to AddRoleToUsers (20120822035539)
Migrating to AddColumnsToUsers (20120822040907)
Migrating to AddNameToUsers (20120822064044)
Migrating to AddSessionsTable (20120822072201)
Migrating to AddJoinMailingListToUsers (20120822163135)
Migrating to CreateRestaurants (20120823045735)
Migrating to CreatePhotos (20120823082051)
Migrating to CreateReviews (20120824034307)
Migrating to CreateFavourites (20120824034907)
Migrating to AddAttributesToRestaurant (20120824092649)
Migrating to AddDirectionToRestaurant (20120828032047)
Migrating to CreateAdminPhotos (20120828033854)
Migrating to AddRatingToRestaurant (20120828083737)
Migrating to CreateFilters (20120829090608)
Migrating to CreateFiltersRestaurants (20120830045136)
Migrating to CreateSchedules (20120830101034)
Migrating to AddPriceToRestaurant (20120904103954)
Migrating to AddAvatarUidToUsers (20120904110732)
Migrating to AddAvatarNameToUsers (20120904110804)
Migrating to RemoveAvatarFromUsers (20120905071514)
Migrating to CreateSimpleCaptchaData (20120906132419)
Migrating to ChangeDataTypeForRatingReviews (20120909104219)
Migrating to AddMenuToRestaurant (20120910073101)
Migrating to CreateBasicsPages (20120910092737)
Migrating to CreateFilterTypes (20120910104054)
Migrating to CreateFilterTypesRestaurant (20120910104249)
Migrating to CreateMenus (20120910114555)
Migrating to AddNameToMenu (20120913093300)
Migrating to AddVisitedDateToReviews (20120913160959)
Migrating to ChangeDefaultDisableRestaurant (20120914085347)
Migrating to AddImageTypeToAdminPhotos (20120916171915)
Migrating to AddWebsiteToRestaurant (20120919064355)
Migrating to AddIsSubscribedToUser (20120925092845)
Migrating to AddShortAddressToRestaurant (20120927043121)
Migrating to CreateFriendlyIdSlugs (20121030042736)
Migrating to AddSlugToRestaurants (20121030042759)
Migrating to AddSpecialDealToRestaurant (20130710100004)
Migrating to AddFeatureReviewToReview (20131211090826)
Migrating to AddSocialMediaLinkToRestaurant (20131213035001)
Migrating to CreateRestaurantTemps (20131223030922)
Migrating to CreateFiltersRestaurantTemps (20131223083429)
Migrating to AddRestaurantTempIdToSchedule (20131223083845)
Migrating to AddWaitingForApproveChangeToRestaurant (20131223090222)
Migrating to AddReplyContentUserReplyToReview (20131224024320)
Migrating to CreateOffers (20131226042850)
Migrating to AddStartdayEnddayStarttimeEndtimeToOffer (20131230094314)
Migrating to AddRestaurantTempIdToPhoto (20140106034924)
Migrating to AddScheduleTypeToSchedules (20140109030030)
Migrating to AddSuggesterInfoToRestaurant (20140111080001)
Migrating to AddTimePublishToOffers (20140115043151)
Migrating to ChangeFormatInOffer (20140115061637)
Migrating to AddApproveToOffer (20140116070841)
Migrating to AddApproveReplyToReview (20140117061635)
Migrating to CreateSubscriptions (20140118040432)
Migrating to CreatePlans (20140118041153)
Migrating to CreatePlanTypes (20140118041428)
Migrating to AddCardNumberAndCardVerificationToSubscription (20140118073636)
Migrating to AddExpressTokenToSubscription (20140118080228)
Migrating to AddPlanIdToSubscription (20140118104008)
Migrating to AddTextToPhoto (20140118104051)
Migrating to AddRestaurantOwnerRoleToUser (20140120045737)
Migrating to AddSugguestEmailToRestaurantTemp (20140121023319)
Migrating to AddCodeToFilterType (20140121061831)
Migrating to AddIndexToFilterType (20140123042213)
Migrating to AddExpireTimeToSubscription (20140123080601)
Migrating to AddDescriptionToPlan (20140124025648)
Migrating to AddHyperlinkToPhoto (20140210034922)
Migrating to AddRecurringStatusToSubscription (20140222061611)
Migrating to AddStatusToPhoto (20140224063855)
Migrating to AddMoreToSubscription (20140225064855)
Migrating to AddReplyTimeToReview (20140226020308)
Migrating to AddPaypalStatusToSubcription (20140303094950)
Migrating to AddPostcodeToUser (20140305085528)
Migrating to AddRequestToRestaurant (20140318105804)
Migrating to CreateTransactions (20140414073113)
Migrating to AddInstagramToRestaurant (20140618093534)
Migrating to AddImageToOffer (20140620064831)
Migrating to AddIntegramLinkToRestaurantTemp (20141016072850)
Migrating to AddGemHunterToUsers (20141027023853)
Migrating to AddIndexOrderToFilters (20141029143508)
Migrating to AddDeviceTypeToUser (20141113080758)
Migrating to AddPageUidToBasicPage (20141114090841)
Migrating to AddGemHunterUrlToUser (20141118091319)
Migrating to CreateGiftcards (20150702214222)
Migrating to CreateGiftcardRedemptions (20150702214247)
Migrating to CreateGiftcardRestaurantMemberships (20150707173045)
Migrating to CreateCheckins (20150723184603)
  [1m[35m (0.3ms)[0m  CREATE TABLE `checkins` (`id` int(11) DEFAULT NULL auto_increment PRIMARY KEY, `user_id` int(11), `restaurant_id` int(11), `created_at` datetime NOT NULL, `updated_at` datetime NOT NULL) ENGINE=InnoDB
Mysql2::Error: All parts of a PRIMARY KEY must be NOT NULL; if you need NULL in a key, use UNIQUE instead: CREATE TABLE `checkins` (`id` int(11) DEFAULT NULL auto_increment PRIMARY KEY, `user_id` int(11), `restaurant_id` int(11), `created_at` datetime NOT NULL, `updated_at` datetime NOT NULL) ENGINE=InnoDB
Connecting to database specified by database.yml
DEPRECATION WARNING: Passing :tag, :class and others to use is deprecated. Please invoke b.use :label, :wrap_with => {:class=>"simple_label"} instead. (called from block (2 levels) in <top (required)> at /Users/kevinmuller/halalgems_backend/config/initializers/simple_form.rb:67)
  [1m[36m (0.3ms)[0m  [1mSELECT `schema_migrations`.`version` FROM `schema_migrations` [0m
Migrating to CreateUsers (20120822030811)
Migrating to AddDeviseToUsers (20120822030947)
Migrating to AddRoleToUsers (20120822035539)
Migrating to AddColumnsToUsers (20120822040907)
Migrating to AddNameToUsers (20120822064044)
Migrating to AddSessionsTable (20120822072201)
Migrating to AddJoinMailingListToUsers (20120822163135)
Migrating to CreateRestaurants (20120823045735)
Migrating to CreatePhotos (20120823082051)
Migrating to CreateReviews (20120824034307)
Migrating to CreateFavourites (20120824034907)
Migrating to AddAttributesToRestaurant (20120824092649)
Migrating to AddDirectionToRestaurant (20120828032047)
Migrating to CreateAdminPhotos (20120828033854)
Migrating to AddRatingToRestaurant (20120828083737)
Migrating to CreateFilters (20120829090608)
Migrating to CreateFiltersRestaurants (20120830045136)
Migrating to CreateSchedules (20120830101034)
Migrating to AddPriceToRestaurant (20120904103954)
Migrating to AddAvatarUidToUsers (20120904110732)
Migrating to AddAvatarNameToUsers (20120904110804)
Migrating to RemoveAvatarFromUsers (20120905071514)
Migrating to CreateSimpleCaptchaData (20120906132419)
Migrating to ChangeDataTypeForRatingReviews (20120909104219)
Migrating to AddMenuToRestaurant (20120910073101)
Migrating to CreateBasicsPages (20120910092737)
Migrating to CreateFilterTypes (20120910104054)
Migrating to CreateFilterTypesRestaurant (20120910104249)
Migrating to CreateMenus (20120910114555)
Migrating to AddNameToMenu (20120913093300)
Migrating to AddVisitedDateToReviews (20120913160959)
Migrating to ChangeDefaultDisableRestaurant (20120914085347)
Migrating to AddImageTypeToAdminPhotos (20120916171915)
Migrating to AddWebsiteToRestaurant (20120919064355)
Migrating to AddIsSubscribedToUser (20120925092845)
Migrating to AddShortAddressToRestaurant (20120927043121)
Migrating to CreateFriendlyIdSlugs (20121030042736)
Migrating to AddSlugToRestaurants (20121030042759)
Migrating to AddSpecialDealToRestaurant (20130710100004)
Migrating to AddFeatureReviewToReview (20131211090826)
Migrating to AddSocialMediaLinkToRestaurant (20131213035001)
Migrating to CreateRestaurantTemps (20131223030922)
Migrating to CreateFiltersRestaurantTemps (20131223083429)
Migrating to AddRestaurantTempIdToSchedule (20131223083845)
Migrating to AddWaitingForApproveChangeToRestaurant (20131223090222)
Migrating to AddReplyContentUserReplyToReview (20131224024320)
Migrating to CreateOffers (20131226042850)
Migrating to AddStartdayEnddayStarttimeEndtimeToOffer (20131230094314)
Migrating to AddRestaurantTempIdToPhoto (20140106034924)
Migrating to AddScheduleTypeToSchedules (20140109030030)
Migrating to AddSuggesterInfoToRestaurant (20140111080001)
Migrating to AddTimePublishToOffers (20140115043151)
Migrating to ChangeFormatInOffer (20140115061637)
Migrating to AddApproveToOffer (20140116070841)
Migrating to AddApproveReplyToReview (20140117061635)
Migrating to CreateSubscriptions (20140118040432)
Migrating to CreatePlans (20140118041153)
Migrating to CreatePlanTypes (20140118041428)
Migrating to AddCardNumberAndCardVerificationToSubscription (20140118073636)
Migrating to AddExpressTokenToSubscription (20140118080228)
Migrating to AddPlanIdToSubscription (20140118104008)
Migrating to AddTextToPhoto (20140118104051)
Migrating to AddRestaurantOwnerRoleToUser (20140120045737)
Migrating to AddSugguestEmailToRestaurantTemp (20140121023319)
Migrating to AddCodeToFilterType (20140121061831)
Migrating to AddIndexToFilterType (20140123042213)
Migrating to AddExpireTimeToSubscription (20140123080601)
Migrating to AddDescriptionToPlan (20140124025648)
Migrating to AddHyperlinkToPhoto (20140210034922)
Migrating to AddRecurringStatusToSubscription (20140222061611)
Migrating to AddStatusToPhoto (20140224063855)
Migrating to AddMoreToSubscription (20140225064855)
Migrating to AddReplyTimeToReview (20140226020308)
Migrating to AddPaypalStatusToSubcription (20140303094950)
Migrating to AddPostcodeToUser (20140305085528)
Migrating to AddRequestToRestaurant (20140318105804)
Migrating to CreateTransactions (20140414073113)
Migrating to AddInstagramToRestaurant (20140618093534)
Migrating to AddImageToOffer (20140620064831)
Migrating to AddIntegramLinkToRestaurantTemp (20141016072850)
Migrating to AddGemHunterToUsers (20141027023853)
Migrating to AddIndexOrderToFilters (20141029143508)
Migrating to AddDeviceTypeToUser (20141113080758)
Migrating to AddPageUidToBasicPage (20141114090841)
Migrating to AddGemHunterUrlToUser (20141118091319)
Migrating to CreateGiftcards (20150702214222)
Migrating to CreateGiftcardRedemptions (20150702214247)
Migrating to CreateGiftcardRestaurantMemberships (20150707173045)
Migrating to CreateCheckins (20150723184603)
  [1m[35m (0.3ms)[0m  CREATE TABLE `checkins` (`id` int(11) DEFAULT NULL auto_increment PRIMARY KEY, `user_id` int(11), `restaurant_id` int(11), `created_at` datetime NOT NULL, `updated_at` datetime NOT NULL) ENGINE=InnoDB
Mysql2::Error: All parts of a PRIMARY KEY must be NOT NULL; if you need NULL in a key, use UNIQUE instead: CREATE TABLE `checkins` (`id` int(11) DEFAULT NULL auto_increment PRIMARY KEY, `user_id` int(11), `restaurant_id` int(11), `created_at` datetime NOT NULL, `updated_at` datetime NOT NULL) ENGINE=InnoDB
Connecting to database specified by database.yml
DEPRECATION WARNING: Passing :tag, :class and others to use is deprecated. Please invoke b.use :label, :wrap_with => {:class=>"simple_label"} instead. (called from block (2 levels) in <top (required)> at /Users/kevinmuller/halalgems_backend/config/initializers/simple_form.rb:67)
  [1m[36m (0.3ms)[0m  [1mSELECT `schema_migrations`.`version` FROM `schema_migrations` [0m
  [1m[35m (0.2ms)[0m  SELECT `schema_migrations`.`version` FROM `schema_migrations` 
  [1m[36m (0.2ms)[0m  [1mSELECT `schema_migrations`.`version` FROM `schema_migrations` [0m
Migrating to CreateGiftcardRestaurantMemberships (20150707173045)
  [1m[35m (76.1ms)[0m  DROP TABLE `giftcard_restaurant_memberships`
  [1m[36m (0.8ms)[0m  [1mDELETE FROM `schema_migrations` WHERE `schema_migrations`.`version` = '20150707173045'[0m
Migrating to CreateGiftcardRedemptions (20150702214247)
  [1m[35m (32.4ms)[0m  DROP TABLE `giftcard_redemptions`
  [1m[36m (0.6ms)[0m  [1mDELETE FROM `schema_migrations` WHERE `schema_migrations`.`version` = '20150702214247'[0m
Migrating to CreateGiftcards (20150702214222)
  [1m[35m (3.4ms)[0m  DROP TABLE `giftcards`
  [1m[36m (0.6ms)[0m  [1mDELETE FROM `schema_migrations` WHERE `schema_migrations`.`version` = '20150702214222'[0m
Migrating to AddGemHunterUrlToUser (20141118091319)
  [1m[35m (140.9ms)[0m  ALTER TABLE `users` DROP `gem_hunter_wordpress_url`
  [1m[36m (0.7ms)[0m  [1mDELETE FROM `schema_migrations` WHERE `schema_migrations`.`version` = '20141118091319'[0m
Migrating to AddPageUidToBasicPage (20141114090841)
  [1m[35m (63.6ms)[0m  ALTER TABLE `basics_pages` DROP `page_uid`
  [1m[36m (0.6ms)[0m  [1mDELETE FROM `schema_migrations` WHERE `schema_migrations`.`version` = '20141114090841'[0m
Migrating to AddDeviceTypeToUser (20141113080758)
  [1m[35m (40.2ms)[0m  ALTER TABLE `users` DROP `device_token`
  [1m[36m (40.2ms)[0m  [1mALTER TABLE `users` DROP `device_type`[0m
  [1m[35m (43.0ms)[0m  ALTER TABLE `users` DROP `fb_access_token`
  [1m[36m (41.0ms)[0m  [1mALTER TABLE `users` DROP `avatar_fb_url`[0m
  [1m[35m (0.7ms)[0m  DELETE FROM `schema_migrations` WHERE `schema_migrations`.`version` = '20141113080758'
Migrating to AddIndexOrderToFilters (20141029143508)
  [1m[36m (43.2ms)[0m  [1mALTER TABLE `filters` DROP `index_order`[0m
  [1m[35m (0.5ms)[0m  DELETE FROM `schema_migrations` WHERE `schema_migrations`.`version` = '20141029143508'
Migrating to AddGemHunterToUsers (20141027023853)
  [1m[36m (44.1ms)[0m  [1mALTER TABLE `users` DROP `gem_hunter`[0m
  [1m[35m (0.6ms)[0m  DELETE FROM `schema_migrations` WHERE `schema_migrations`.`version` = '20141027023853'
Migrating to AddIntegramLinkToRestaurantTemp (20141016072850)
  [1m[36m (20.0ms)[0m  [1mALTER TABLE `restaurant_temps` DROP `instagram_link`[0m
  [1m[35m (0.6ms)[0m  DELETE FROM `schema_migrations` WHERE `schema_migrations`.`version` = '20141016072850'
Migrating to AddImageToOffer (20140620064831)
  [1m[36m (39.3ms)[0m  [1mALTER TABLE `offers` DROP `image_name`[0m
  [1m[35m (39.2ms)[0m  ALTER TABLE `offers` DROP `image_uid`
  [1m[36m (0.6ms)[0m  [1mDELETE FROM `schema_migrations` WHERE `schema_migrations`.`version` = '20140620064831'[0m
Migrating to AddInstagramToRestaurant (20140618093534)
  [1m[35m (61.5ms)[0m  ALTER TABLE `restaurants` DROP `instagram_link`
  [1m[36m (0.6ms)[0m  [1mDELETE FROM `schema_migrations` WHERE `schema_migrations`.`version` = '20140618093534'[0m
Migrating to CreateTransactions (20140414073113)
  [1m[35m (45.7ms)[0m  DROP TABLE `transactions`
  [1m[36m (0.6ms)[0m  [1mDELETE FROM `schema_migrations` WHERE `schema_migrations`.`version` = '20140414073113'[0m
Migrating to AddRequestToRestaurant (20140318105804)
  [1m[35m (55.1ms)[0m  ALTER TABLE `restaurants` DROP `request_approve_photo`
  [1m[36m (0.7ms)[0m  [1mDELETE FROM `schema_migrations` WHERE `schema_migrations`.`version` = '20140318105804'[0m
Migrating to AddPostcodeToUser (20140305085528)
  [1m[35m (41.2ms)[0m  ALTER TABLE `users` DROP `postcode`
  [1m[36m (0.5ms)[0m  [1mDELETE FROM `schema_migrations` WHERE `schema_migrations`.`version` = '20140305085528'[0m
Migrating to AddPaypalStatusToSubcription (20140303094950)
  [1m[35m (52.5ms)[0m  ALTER TABLE `subscriptions` DROP `paypal_status`
  [1m[36m (0.8ms)[0m  [1mDELETE FROM `schema_migrations` WHERE `schema_migrations`.`version` = '20140303094950'[0m
Migrating to AddReplyTimeToReview (20140226020308)
  [1m[35m (65.7ms)[0m  ALTER TABLE `reviews` DROP `reply_time`
  [1m[36m (0.6ms)[0m  [1mDELETE FROM `schema_migrations` WHERE `schema_migrations`.`version` = '20140226020308'[0m
Migrating to AddMoreToSubscription (20140225064855)
  [1m[35m (34.1ms)[0m  ALTER TABLE `subscriptions` DROP `profile_id`
  [1m[36m (38.9ms)[0m  [1mALTER TABLE `subscriptions` DROP `transaction_id`[0m
  [1m[35m (0.7ms)[0m  DELETE FROM `schema_migrations` WHERE `schema_migrations`.`version` = '20140225064855'
Migrating to AddStatusToPhoto (20140224063855)
  [1m[36m (48.9ms)[0m  [1mALTER TABLE `photos` DROP `status`[0m
  [1m[35m (0.8ms)[0m  DELETE FROM `schema_migrations` WHERE `schema_migrations`.`version` = '20140224063855'
Migrating to AddRecurringStatusToSubscription (20140222061611)
  [1m[36m (86.8ms)[0m  [1mALTER TABLE `subscriptions` DROP `account_id`[0m
  [1m[35m (48.8ms)[0m  ALTER TABLE `subscriptions` DROP `recurring_status`
  [1m[36m (1.2ms)[0m  [1mDELETE FROM `schema_migrations` WHERE `schema_migrations`.`version` = '20140222061611'[0m
Migrating to AddHyperlinkToPhoto (20140210034922)
  [1m[35m (45.8ms)[0m  ALTER TABLE `admin_photos` DROP `text_hyperlink`
  [1m[36m (39.2ms)[0m  [1mALTER TABLE `photos` DROP `text_hyperlink`[0m
  [1m[35m (0.6ms)[0m  DELETE FROM `schema_migrations` WHERE `schema_migrations`.`version` = '20140210034922'
Migrating to AddDescriptionToPlan (20140124025648)
  [1m[36m (41.0ms)[0m  [1mALTER TABLE `plans` DROP `description`[0m
  [1m[35m (0.6ms)[0m  DELETE FROM `schema_migrations` WHERE `schema_migrations`.`version` = '20140124025648'
Migrating to AddExpireTimeToSubscription (20140123080601)
  [1m[36m (37.7ms)[0m  [1mALTER TABLE `subscriptions` DROP `expire_time`[0m
  [1m[35m (1.8ms)[0m  DELETE FROM `schema_migrations` WHERE `schema_migrations`.`version` = '20140123080601'
Migrating to AddIndexToFilterType (20140123042213)
  [1m[36m (46.0ms)[0m  [1mALTER TABLE `filter_types` DROP `index_order`[0m
  [1m[35m (0.6ms)[0m  DELETE FROM `schema_migrations` WHERE `schema_migrations`.`version` = '20140123042213'
Migrating to AddCodeToFilterType (20140121061831)
  [1m[36m (37.5ms)[0m  [1mALTER TABLE `filter_types` DROP `code`[0m
  [1m[35m (0.5ms)[0m  DELETE FROM `schema_migrations` WHERE `schema_migrations`.`version` = '20140121061831'
Migrating to AddSugguestEmailToRestaurantTemp (20140121023319)
  [1m[36m (9.3ms)[0m  [1mALTER TABLE `restaurant_temps` DROP `suggester_phone`[0m
  [1m[35m (20.6ms)[0m  ALTER TABLE `restaurant_temps` DROP `suggester_email`
  [1m[36m (0.7ms)[0m  [1mDELETE FROM `schema_migrations` WHERE `schema_migrations`.`version` = '20140121023319'[0m
Migrating to AddRestaurantOwnerRoleToUser (20140120045737)
  [1m[35m (51.3ms)[0m  ALTER TABLE `users` DROP `restaurant_owner_role`
  [1m[36m (0.6ms)[0m  [1mDELETE FROM `schema_migrations` WHERE `schema_migrations`.`version` = '20140120045737'[0m
Migrating to AddTextToPhoto (20140118104051)
  [1m[35m (37.8ms)[0m  ALTER TABLE `admin_photos` DROP `text_content`
  [1m[36m (42.4ms)[0m  [1mALTER TABLE `admin_photos` DROP `text_title`[0m
  [1m[35m (41.9ms)[0m  ALTER TABLE `photos` DROP `text_content`
  [1m[36m (39.3ms)[0m  [1mALTER TABLE `photos` DROP `text_title`[0m
  [1m[35m (0.7ms)[0m  DELETE FROM `schema_migrations` WHERE `schema_migrations`.`version` = '20140118104051'
Migrating to AddPlanIdToSubscription (20140118104008)
  [1m[36m (39.4ms)[0m  [1mALTER TABLE `subscriptions` DROP `plan_id`[0m
  [1m[35m (0.6ms)[0m  DELETE FROM `schema_migrations` WHERE `schema_migrations`.`version` = '20140118104008'
Migrating to AddExpressTokenToSubscription (20140118080228)
  [1m[36m (37.0ms)[0m  [1mALTER TABLE `subscriptions` DROP `express_payer_id`[0m
  [1m[35m (36.2ms)[0m  ALTER TABLE `subscriptions` DROP `express_token`
  [1m[36m (1.8ms)[0m  [1mDELETE FROM `schema_migrations` WHERE `schema_migrations`.`version` = '20140118080228'[0m
Migrating to AddCardNumberAndCardVerificationToSubscription (20140118073636)
  [1m[35m (49.0ms)[0m  ALTER TABLE `subscriptions` DROP `card_verification`
  [1m[36m (37.9ms)[0m  [1mALTER TABLE `subscriptions` DROP `card_number`[0m
  [1m[35m (0.6ms)[0m  DELETE FROM `schema_migrations` WHERE `schema_migrations`.`version` = '20140118073636'
Migrating to CreatePlanTypes (20140118041428)
  [1m[36m (3.9ms)[0m  [1mDROP TABLE `plan_types`[0m
  [1m[35m (0.4ms)[0m  DELETE FROM `schema_migrations` WHERE `schema_migrations`.`version` = '20140118041428'
Migrating to CreatePlans (20140118041153)
  [1m[36m (1.9ms)[0m  [1mDROP TABLE `plans`[0m
  [1m[35m (0.6ms)[0m  DELETE FROM `schema_migrations` WHERE `schema_migrations`.`version` = '20140118041153'
Migrating to CreateSubscriptions (20140118040432)
  [1m[36m (1.9ms)[0m  [1mDROP TABLE `subscriptions`[0m
  [1m[35m (1.0ms)[0m  DELETE FROM `schema_migrations` WHERE `schema_migrations`.`version` = '20140118040432'
Migrating to AddApproveReplyToReview (20140117061635)
  [1m[36m (44.9ms)[0m  [1mALTER TABLE `reviews` DROP `approve_reply`[0m
  [1m[35m (0.8ms)[0m  DELETE FROM `schema_migrations` WHERE `schema_migrations`.`version` = '20140117061635'
Migrating to AddApproveToOffer (20140116070841)
  [1m[36m (0.5ms)[0m  [1mDELETE FROM `schema_migrations` WHERE `schema_migrations`.`version` = '20140116070841'[0m
Migrating to ChangeFormatInOffer (20140115061637)
  [1m[35m (0.6ms)[0m  DELETE FROM `schema_migrations` WHERE `schema_migrations`.`version` = '20140115061637'
Migrating to AddTimePublishToOffers (20140115043151)
  [1m[36m (33.9ms)[0m  [1mALTER TABLE `offers` DROP `time_publish`[0m
  [1m[35m (51.5ms)[0m  ALTER TABLE `offers` DROP `date_publish`
  [1m[36m (0.6ms)[0m  [1mDELETE FROM `schema_migrations` WHERE `schema_migrations`.`version` = '20140115043151'[0m
Migrating to AddSuggesterInfoToRestaurant (20140111080001)
  [1m[35m (61.2ms)[0m  ALTER TABLE `restaurants` DROP `suggester_phone`
  [1m[36m (57.1ms)[0m  [1mALTER TABLE `restaurants` DROP `suggester_email`[0m
  [1m[35m (0.6ms)[0m  DELETE FROM `schema_migrations` WHERE `schema_migrations`.`version` = '20140111080001'
Migrating to AddScheduleTypeToSchedules (20140109030030)
  [1m[36m (136.2ms)[0m  [1mALTER TABLE `schedules` DROP `schedule_type`[0m
  [1m[35m (0.9ms)[0m  DELETE FROM `schema_migrations` WHERE `schema_migrations`.`version` = '20140109030030'
Migrating to AddRestaurantTempIdToPhoto (20140106034924)
  [1m[36m (68.3ms)[0m  [1mALTER TABLE `photos` DROP `restaurant_temp_id`[0m
  [1m[35m (0.6ms)[0m  DELETE FROM `schema_migrations` WHERE `schema_migrations`.`version` = '20140106034924'
Migrating to AddStartdayEnddayStarttimeEndtimeToOffer (20131230094314)
  [1m[36m (36.0ms)[0m  [1mALTER TABLE `offers` DROP `end_time`[0m
  [1m[35m (40.6ms)[0m  ALTER TABLE `offers` DROP `start_time`
  [1m[36m (0.4ms)[0m  [1mALTER TABLE `offers` DROP `end_day`[0m
Mysql2::Error: Can't DROP 'end_day'; check that column/key exists: ALTER TABLE `offers` DROP `end_day`
Connecting to database specified by database.yml
DEPRECATION WARNING: Passing :tag, :class and others to use is deprecated. Please invoke b.use :label, :wrap_with => {:class=>"simple_label"} instead. (called from block (2 levels) in <top (required)> at /Users/kevinmuller/halalgems_backend/config/initializers/simple_form.rb:67)


Started GET "/admin/collections" for 127.0.0.1 at 2016-01-17 07:21:12 +0100
Processing by CollectionsController#index as HTML
  Rendered shared/_restaurant_manage_tabs.html.erb (1.7ms)
  [1m[36mCollection Load (0.4ms)[0m  [1mSELECT `collections`.* FROM `collections` ORDER BY name ASC, created_at DESC LIMIT 12 OFFSET 0[0m
  [1m[35mCollectionImage Load (0.4ms)[0m  SELECT `collection_images`.* FROM `collection_images` WHERE (collection_id = 21) LIMIT 1
  Rendered collections/index.erb within layouts/admin (64.7ms)
Completed 500 Internal Server Error in 92ms

ActionView::Template::Error (undefined method `disable_toggle_collection_path' for #<#<Class:0x007fb48ee1e890>:0x007fb48ee1d530>):
    35:             <%= link_to edit_collection_path(collection.id), class: "btn btn-default fa fa-edit", title: 'Edit' do %>
    36:                 <span class="open-san"><%= t('collections.edit') %></span>
    37:             <% end %>
    38:             <%= disable_collection_button collection %>
    39:             <%= link_to destroy_collection_collections_path(collection.id), class: "btn btn-default fa fa-minus-circle", title: 'Delete' do %>
    40:                 <span class="open-san"><%= t('collections.delete') %></span>
    41:             <% end %>
  app/helpers/collections_helper.rb:11:in `disable_collection_button'
  app/views/collections/index.erb:38:in `block in _app_views_collections_index_erb___3842952119129110947_70206733972260'
  app/views/collections/index.erb:26:in `_app_views_collections_index_erb___3842952119129110947_70206733972260'
  app/controllers/collections_controller.rb:20:in `index'


  Rendered /Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_dispatch/middleware/templates/rescues/_trace.erb (1.0ms)
  Rendered /Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_dispatch/middleware/templates/rescues/_request_and_response.erb (0.8ms)
  Rendered /Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_dispatch/middleware/templates/rescues/template_error.erb within rescues/layout (46.2ms)


Started GET "/admin/collections" for 127.0.0.1 at 2016-01-17 07:21:14 +0100
Processing by CollectionsController#index as HTML
  Rendered shared/_restaurant_manage_tabs.html.erb (1.0ms)
  [1m[36mCollection Load (0.5ms)[0m  [1mSELECT `collections`.* FROM `collections` ORDER BY name ASC, created_at DESC LIMIT 12 OFFSET 0[0m
  [1m[35mCollectionImage Load (0.4ms)[0m  SELECT `collection_images`.* FROM `collection_images` WHERE (collection_id = 21) LIMIT 1
  Rendered collections/index.erb within layouts/admin (18.3ms)
Completed 500 Internal Server Error in 24ms

ActionView::Template::Error (undefined method `disable_toggle_collection_path' for #<#<Class:0x007fb48ee1e890>:0x007fb48cf8bdd8>):
    35:             <%= link_to edit_collection_path(collection.id), class: "btn btn-default fa fa-edit", title: 'Edit' do %>
    36:                 <span class="open-san"><%= t('collections.edit') %></span>
    37:             <% end %>
    38:             <%= disable_collection_button collection %>
    39:             <%= link_to destroy_collection_collections_path(collection.id), class: "btn btn-default fa fa-minus-circle", title: 'Delete' do %>
    40:                 <span class="open-san"><%= t('collections.delete') %></span>
    41:             <% end %>
  app/helpers/collections_helper.rb:11:in `disable_collection_button'
  app/views/collections/index.erb:38:in `block in _app_views_collections_index_erb___3842952119129110947_70206733972260'
  app/views/collections/index.erb:26:in `_app_views_collections_index_erb___3842952119129110947_70206733972260'
  app/controllers/collections_controller.rb:20:in `index'


  Rendered /Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_dispatch/middleware/templates/rescues/_trace.erb (1.1ms)
  Rendered /Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_dispatch/middleware/templates/rescues/_request_and_response.erb (0.7ms)
  Rendered /Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_dispatch/middleware/templates/rescues/template_error.erb within rescues/layout (39.1ms)


Started GET "/admin/collections" for 127.0.0.1 at 2016-01-17 07:23:54 +0100
Processing by CollectionsController#index as HTML
  Rendered shared/_restaurant_manage_tabs.html.erb (0.6ms)
  [1m[36mCollection Load (0.2ms)[0m  [1mSELECT `collections`.* FROM `collections` ORDER BY name ASC, created_at DESC LIMIT 12 OFFSET 0[0m
  [1m[35mCollectionImage Load (0.2ms)[0m  SELECT `collection_images`.* FROM `collection_images` WHERE (collection_id = 21) LIMIT 1
  Rendered collections/index.erb within layouts/admin (31.4ms)
Completed 500 Internal Server Error in 36ms

ActionView::Template::Error (undefined method `disable_toggle_collection_path' for #<#<Class:0x007fb48cddfe30>:0x007fb48cdde440>):
    35:             <%= link_to edit_collection_path(collection.id), class: "btn btn-default fa fa-edit", title: 'Edit' do %>
    36:                 <span class="open-san"><%= t('collections.edit') %></span>
    37:             <% end %>
    38:             <%= disable_collection_button collection %>
    39:             <%= link_to destroy_collection_collections_path(collection.id), class: "btn btn-default fa fa-minus-circle", title: 'Delete' do %>
    40:                 <span class="open-san"><%= t('collections.delete') %></span>
    41:             <% end %>
  app/helpers/collections_helper.rb:11:in `disable_collection_button'
  app/views/collections/index.erb:38:in `block in _app_views_collections_index_erb___3842952119129110947_70206733972260'
  app/views/collections/index.erb:26:in `_app_views_collections_index_erb___3842952119129110947_70206733972260'
  app/controllers/collections_controller.rb:20:in `index'


  Rendered /Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_dispatch/middleware/templates/rescues/_trace.erb (1.1ms)
  Rendered /Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_dispatch/middleware/templates/rescues/_request_and_response.erb (0.8ms)
  Rendered /Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_dispatch/middleware/templates/rescues/template_error.erb within rescues/layout (42.0ms)


Started GET "/admin/collections" for 127.0.0.1 at 2016-01-17 07:24:03 +0100
Processing by CollectionsController#index as HTML
  Rendered shared/_restaurant_manage_tabs.html.erb (0.7ms)
  [1m[36mCollection Load (0.2ms)[0m  [1mSELECT `collections`.* FROM `collections` ORDER BY name ASC, created_at DESC LIMIT 12 OFFSET 0[0m
  [1m[35mCollectionImage Load (0.2ms)[0m  SELECT `collection_images`.* FROM `collection_images` WHERE (collection_id = 21) LIMIT 1
  Rendered collections/index.erb within layouts/admin (33.1ms)
Completed 500 Internal Server Error in 38ms

ActionView::Template::Error (undefined method `disable_toggle_collection_path' for #<#<Class:0x007fb48f4b1ef0>:0x007fb48f4b0758>):
    35:             <%= link_to edit_collection_path(collection.id), class: "btn btn-default fa fa-edit", title: 'Edit' do %>
    36:                 <span class="open-san"><%= t('collections.edit') %></span>
    37:             <% end %>
    38:             <%= disable_collection_button collection %>
    39:             <%= link_to destroy_collection_collections_path(collection.id), class: "btn btn-default fa fa-minus-circle", title: 'Delete' do %>
    40:                 <span class="open-san"><%= t('collections.delete') %></span>
    41:             <% end %>
  app/helpers/collections_helper.rb:11:in `disable_collection_button'
  app/views/collections/index.erb:38:in `block in _app_views_collections_index_erb___3842952119129110947_70206733972260'
  app/views/collections/index.erb:26:in `_app_views_collections_index_erb___3842952119129110947_70206733972260'
  app/controllers/collections_controller.rb:20:in `index'


  Rendered /Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_dispatch/middleware/templates/rescues/_trace.erb (1.1ms)
  Rendered /Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_dispatch/middleware/templates/rescues/_request_and_response.erb (0.9ms)
  Rendered /Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_dispatch/middleware/templates/rescues/template_error.erb within rescues/layout (42.0ms)


Started GET "/admin/collections" for 127.0.0.1 at 2016-01-17 07:25:08 +0100

SyntaxError (/Users/kevinmuller/halalgems_backend/config/routes.rb:224: syntax error, unexpected tIDENTIFIER, expecting keyword_end
...'collections#disable_toggle' as: 'disable_toggle'
...                               ^):
  activesupport (3.2.8) lib/active_support/dependencies.rb:245:in `load'
  activesupport (3.2.8) lib/active_support/dependencies.rb:245:in `block in load'
  activesupport (3.2.8) lib/active_support/dependencies.rb:236:in `load_dependency'
  activesupport (3.2.8) lib/active_support/dependencies.rb:245:in `load'
  railties (3.2.8) lib/rails/application/routes_reloader.rb:40:in `block in load_paths'
  railties (3.2.8) lib/rails/application/routes_reloader.rb:40:in `each'
  railties (3.2.8) lib/rails/application/routes_reloader.rb:40:in `load_paths'
  railties (3.2.8) lib/rails/application/routes_reloader.rb:16:in `reload!'
  railties (3.2.8) lib/rails/application/routes_reloader.rb:26:in `block in updater'
  activesupport (3.2.8) lib/active_support/file_update_checker.rb:78:in `call'
  activesupport (3.2.8) lib/active_support/file_update_checker.rb:78:in `execute'
  activesupport (3.2.8) lib/active_support/file_update_checker.rb:86:in `execute_if_updated'
  railties (3.2.8) lib/rails/application/routes_reloader.rb:7:in `execute_if_updated'
  railties (3.2.8) lib/rails/application/finisher.rb:68:in `block (2 levels) in <module:Finisher>'
  activesupport (3.2.8) lib/active_support/callbacks.rb:451:in `_run__3347522327091175057__prepare__4585849345284969528__callbacks'
  activesupport (3.2.8) lib/active_support/callbacks.rb:405:in `__run_callback'
  activesupport (3.2.8) lib/active_support/callbacks.rb:385:in `_run_prepare_callbacks'
  activesupport (3.2.8) lib/active_support/callbacks.rb:81:in `run_callbacks'
  actionpack (3.2.8) lib/action_dispatch/middleware/reloader.rb:74:in `prepare!'
  actionpack (3.2.8) lib/action_dispatch/middleware/reloader.rb:64:in `call'
  actionpack (3.2.8) lib/action_dispatch/middleware/remote_ip.rb:31:in `call'
  actionpack (3.2.8) lib/action_dispatch/middleware/debug_exceptions.rb:16:in `call'
  actionpack (3.2.8) lib/action_dispatch/middleware/show_exceptions.rb:56:in `call'
  railties (3.2.8) lib/rails/rack/logger.rb:26:in `call_app'
  railties (3.2.8) lib/rails/rack/logger.rb:16:in `call'
  quiet_assets (1.0.3) lib/quiet_assets.rb:23:in `call_with_quiet_assets'
  actionpack (3.2.8) lib/action_dispatch/middleware/request_id.rb:22:in `call'
  rack (1.4.5) lib/rack/methodoverride.rb:21:in `call'
  rack (1.4.5) lib/rack/runtime.rb:17:in `call'
  activesupport (3.2.8) lib/active_support/cache/strategy/local_cache.rb:72:in `call'
  rack (1.4.5) lib/rack/lock.rb:15:in `call'
  actionpack (3.2.8) lib/action_dispatch/middleware/static.rb:62:in `call'
  dragonfly (0.9.15) lib/dragonfly/middleware.rb:13:in `call'
  rack-cache (1.2) lib/rack/cache/context.rb:136:in `forward'
  rack-cache (1.2) lib/rack/cache/context.rb:245:in `fetch'
  rack-cache (1.2) lib/rack/cache/context.rb:185:in `lookup'
  rack-cache (1.2) lib/rack/cache/context.rb:66:in `call!'
  rack-cache (1.2) lib/rack/cache/context.rb:51:in `call'
  railties (3.2.8) lib/rails/engine.rb:479:in `call'
  railties (3.2.8) lib/rails/application.rb:223:in `call'
  rack (1.4.5) lib/rack/content_length.rb:14:in `call'
  railties (3.2.8) lib/rails/rack/log_tailer.rb:17:in `call'
  rack (1.4.5) lib/rack/handler/webrick.rb:59:in `service'
  /Users/kevinmuller/.rvm/rubies/ruby-2.2.4/lib/ruby/2.2.0/webrick/httpserver.rb:138:in `service'
  /Users/kevinmuller/.rvm/rubies/ruby-2.2.4/lib/ruby/2.2.0/webrick/httpserver.rb:94:in `run'
  /Users/kevinmuller/.rvm/rubies/ruby-2.2.4/lib/ruby/2.2.0/webrick/server.rb:294:in `block in start_thread'


  Rendered /Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_dispatch/middleware/templates/rescues/_trace.erb (1.0ms)
  Rendered /Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_dispatch/middleware/templates/rescues/_request_and_response.erb (0.7ms)
  Rendered /Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_dispatch/middleware/templates/rescues/diagnostics.erb within rescues/layout (39.6ms)


Started GET "/admin/collections" for 127.0.0.1 at 2016-01-17 07:25:31 +0100
Processing by CollectionsController#index as HTML
  Rendered shared/_restaurant_manage_tabs.html.erb (0.7ms)
  [1m[36mCollection Load (0.2ms)[0m  [1mSELECT `collections`.* FROM `collections` ORDER BY name ASC, created_at DESC LIMIT 12 OFFSET 0[0m
  [1m[35mCollectionImage Load (0.2ms)[0m  SELECT `collection_images`.* FROM `collection_images` WHERE (collection_id = 21) LIMIT 1
  Rendered collections/index.erb within layouts/admin (43.9ms)
Completed 500 Internal Server Error in 49ms

ActionView::Template::Error (undefined method `disable_toggle_collection_path' for #<#<Class:0x007fb489dd1720>:0x007fb489dcadf8>):
    35:             <%= link_to edit_collection_path(collection.id), class: "btn btn-default fa fa-edit", title: 'Edit' do %>
    36:                 <span class="open-san"><%= t('collections.edit') %></span>
    37:             <% end %>
    38:             <%= disable_collection_button collection %>
    39:             <%= link_to destroy_collection_collections_path(collection.id), class: "btn btn-default fa fa-minus-circle", title: 'Delete' do %>
    40:                 <span class="open-san"><%= t('collections.delete') %></span>
    41:             <% end %>
  app/helpers/collections_helper.rb:11:in `disable_collection_button'
  app/views/collections/index.erb:38:in `block in _app_views_collections_index_erb___3842952119129110947_70206733972260'
  app/views/collections/index.erb:26:in `_app_views_collections_index_erb___3842952119129110947_70206733972260'
  app/controllers/collections_controller.rb:20:in `index'


  Rendered /Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_dispatch/middleware/templates/rescues/_trace.erb (1.2ms)
  Rendered /Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_dispatch/middleware/templates/rescues/_request_and_response.erb (0.7ms)
  Rendered /Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_dispatch/middleware/templates/rescues/template_error.erb within rescues/layout (43.0ms)


Started GET "/admin/collections" for 127.0.0.1 at 2016-01-17 07:25:58 +0100
Processing by CollectionsController#index as HTML
  Rendered shared/_restaurant_manage_tabs.html.erb (0.7ms)
  [1m[36mCollection Load (0.2ms)[0m  [1mSELECT `collections`.* FROM `collections` ORDER BY name ASC, created_at DESC LIMIT 12 OFFSET 0[0m
  [1m[35mCollectionImage Load (0.3ms)[0m  SELECT `collection_images`.* FROM `collection_images` WHERE (collection_id = 21) LIMIT 1
  Rendered collections/index.erb within layouts/admin (45.2ms)
Completed 500 Internal Server Error in 52ms

ActionView::Template::Error (undefined method `disable_toggle_collection_path' for #<#<Class:0x007fb48b1440c8>:0x007fb48b13da48>):
    35:             <%= link_to edit_collection_path(collection.id), class: "btn btn-default fa fa-edit", title: 'Edit' do %>
    36:                 <span class="open-san"><%= t('collections.edit') %></span>
    37:             <% end %>
    38:             <%= disable_collection_button collection %>
    39:             <%= link_to destroy_collection_collections_path(collection.id), class: "btn btn-default fa fa-minus-circle", title: 'Delete' do %>
    40:                 <span class="open-san"><%= t('collections.delete') %></span>
    41:             <% end %>
  app/helpers/collections_helper.rb:11:in `disable_collection_button'
  app/views/collections/index.erb:38:in `block in _app_views_collections_index_erb___3842952119129110947_70206733972260'
  app/views/collections/index.erb:26:in `_app_views_collections_index_erb___3842952119129110947_70206733972260'
  app/controllers/collections_controller.rb:20:in `index'


  Rendered /Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_dispatch/middleware/templates/rescues/_trace.erb (1.2ms)
  Rendered /Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_dispatch/middleware/templates/rescues/_request_and_response.erb (1.1ms)
  Rendered /Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_dispatch/middleware/templates/rescues/template_error.erb within rescues/layout (60.6ms)


Started GET "/admin/collections" for 127.0.0.1 at 2016-01-17 07:27:28 +0100
Processing by CollectionsController#index as HTML
  Rendered shared/_restaurant_manage_tabs.html.erb (0.7ms)
  [1m[36mCollection Load (0.2ms)[0m  [1mSELECT `collections`.* FROM `collections` ORDER BY name ASC, created_at DESC LIMIT 12 OFFSET 0[0m
  [1m[35mCollectionImage Load (0.2ms)[0m  SELECT `collection_images`.* FROM `collection_images` WHERE (collection_id = 21) LIMIT 1
  [1m[36mCollectionImage Load (0.2ms)[0m  [1mSELECT `collection_images`.* FROM `collection_images` WHERE (collection_id = 20) LIMIT 1[0m
  [1m[35mCollectionImage Load (0.2ms)[0m  SELECT `collection_images`.* FROM `collection_images` WHERE (collection_id = 24) LIMIT 1
  [1m[36m (0.2ms)[0m  [1mSELECT COUNT(*) FROM `collections` [0m
  Rendered collections/index.erb within layouts/admin (99.6ms)
  [1m[35mUser Load (0.3ms)[0m  SELECT `users`.* FROM `users` WHERE `users`.`id` = 1 LIMIT 1
  [1m[36m (0.2ms)[0m  [1mBEGIN[0m
  [1m[35m (0.1ms)[0m  COMMIT
Completed 401 Unauthorized in 174ms


Started GET "/admin/collections" for 127.0.0.1 at 2016-01-17 07:27:28 +0100
Processing by CollectionsController#index as HTML
  Rendered shared/_restaurant_manage_tabs.html.erb (0.6ms)
  [1m[36mCollection Load (0.3ms)[0m  [1mSELECT `collections`.* FROM `collections` ORDER BY name ASC, created_at DESC LIMIT 12 OFFSET 0[0m
  [1m[35mCollectionImage Load (0.2ms)[0m  SELECT `collection_images`.* FROM `collection_images` WHERE (collection_id = 21) LIMIT 1
  [1m[36mCollectionImage Load (0.2ms)[0m  [1mSELECT `collection_images`.* FROM `collection_images` WHERE (collection_id = 20) LIMIT 1[0m
  [1m[35mCollectionImage Load (0.2ms)[0m  SELECT `collection_images`.* FROM `collection_images` WHERE (collection_id = 24) LIMIT 1
  [1m[36m (0.2ms)[0m  [1mSELECT COUNT(*) FROM `collections` [0m
  Rendered collections/index.erb within layouts/admin (14.6ms)
Completed 500 Internal Server Error in 57ms

ActionView::Template::Error (undefined method `username' for nil:NilClass):
    76:                 <!--<li class="divider-vertical"></li>-->
    77:                 <li class="dropdown">
    78:                   <%#= image_tag(backend_avatar_url(current_user))%>
    79:                   <a data-toggle="dropdown" class="dropdown-toggle" href="#"><%= (current_user.username.blank?)?(current_user.email):(current_user.username) %><b class="caret"></b></a>
    80:                   <ul class="dropdown-menu">
    81:                     <li><a href="#"><%= link_to "My Account",personal_information_path %></a></li>
    82:                     <li><a href="#"><%= link_to "Change password", change_password_user_registration_path %></a></li>
  app/views/layouts/admin.html.erb:79:in `_app_views_layouts_admin_html_erb___4138218723241668377_70206733951920'
  app/controllers/collections_controller.rb:20:in `index'


  Rendered /Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_dispatch/middleware/templates/rescues/_trace.erb (1.1ms)
  Rendered /Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_dispatch/middleware/templates/rescues/_request_and_response.erb (0.9ms)
  Rendered /Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_dispatch/middleware/templates/rescues/template_error.erb within rescues/layout (41.0ms)


Started GET "/admin/" for 127.0.0.1 at 2016-01-17 07:27:56 +0100
  [1m[35m (0.3ms)[0m  SELECT COUNT(*) FROM `filter_types` WHERE (code = 'features')
Mysql2::Error: Unknown column 'code' in 'where clause': SELECT COUNT(*) FROM `filter_types`  WHERE (code = 'features')

ActiveRecord::StatementInvalid (Mysql2::Error: Unknown column 'code' in 'where clause': SELECT COUNT(*) FROM `filter_types`  WHERE (code = 'features')):
  app/models/restaurant.rb:97:in `<class:Restaurant>'
  app/models/restaurant.rb:1:in `<top (required)>'
  app/controllers/restaurants_controller.rb:1:in `<top (required)>'


  Rendered /Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_dispatch/middleware/templates/rescues/_trace.erb (1.1ms)
  Rendered /Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_dispatch/middleware/templates/rescues/_request_and_response.erb (0.8ms)
  Rendered /Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_dispatch/middleware/templates/rescues/diagnostics.erb within rescues/layout (40.5ms)
Connecting to database specified by database.yml
DEPRECATION WARNING: Passing :tag, :class and others to use is deprecated. Please invoke b.use :label, :wrap_with => {:class=>"simple_label"} instead. (called from block (2 levels) in <top (required)> at /Users/kevinmuller/halalgems_backend/config/initializers/simple_form.rb:67)
  [1m[36m (0.2ms)[0m  [1mSELECT `schema_migrations`.`version` FROM `schema_migrations` [0m
  [1m[35m (0.2ms)[0m  SELECT `schema_migrations`.`version` FROM `schema_migrations` 
  [1m[36m (0.2ms)[0m  [1mSELECT `schema_migrations`.`version` FROM `schema_migrations` [0m
Migrating to AddStartdayEnddayStarttimeEndtimeToOffer (20131230094314)
  [1m[35m (0.3ms)[0m  ALTER TABLE `offers` DROP `end_time`
Mysql2::Error: Can't DROP 'end_time'; check that column/key exists: ALTER TABLE `offers` DROP `end_time`
Connecting to database specified by database.yml
DEPRECATION WARNING: Passing :tag, :class and others to use is deprecated. Please invoke b.use :label, :wrap_with => {:class=>"simple_label"} instead. (called from block (2 levels) in <top (required)> at /Users/kevinmuller/halalgems_backend/config/initializers/simple_form.rb:67)
  [1m[36m (0.2ms)[0m  [1mSELECT `schema_migrations`.`version` FROM `schema_migrations` [0m
Migrating to CreateUsers (20120822030811)
Migrating to AddDeviseToUsers (20120822030947)
Migrating to AddRoleToUsers (20120822035539)
Migrating to AddColumnsToUsers (20120822040907)
Migrating to AddNameToUsers (20120822064044)
Migrating to AddSessionsTable (20120822072201)
Migrating to AddJoinMailingListToUsers (20120822163135)
Migrating to CreateRestaurants (20120823045735)
Migrating to CreatePhotos (20120823082051)
Migrating to CreateReviews (20120824034307)
Migrating to CreateFavourites (20120824034907)
Migrating to AddAttributesToRestaurant (20120824092649)
Migrating to AddDirectionToRestaurant (20120828032047)
Migrating to CreateAdminPhotos (20120828033854)
Migrating to AddRatingToRestaurant (20120828083737)
Migrating to CreateFilters (20120829090608)
Migrating to CreateFiltersRestaurants (20120830045136)
Migrating to CreateSchedules (20120830101034)
Migrating to AddPriceToRestaurant (20120904103954)
Migrating to AddAvatarUidToUsers (20120904110732)
Migrating to AddAvatarNameToUsers (20120904110804)
Migrating to RemoveAvatarFromUsers (20120905071514)
Migrating to CreateSimpleCaptchaData (20120906132419)
Migrating to ChangeDataTypeForRatingReviews (20120909104219)
Migrating to AddMenuToRestaurant (20120910073101)
Migrating to CreateBasicsPages (20120910092737)
Migrating to CreateFilterTypes (20120910104054)
Migrating to CreateFilterTypesRestaurant (20120910104249)
Migrating to CreateMenus (20120910114555)
Migrating to AddNameToMenu (20120913093300)
Migrating to AddVisitedDateToReviews (20120913160959)
Migrating to ChangeDefaultDisableRestaurant (20120914085347)
Migrating to AddImageTypeToAdminPhotos (20120916171915)
Migrating to AddWebsiteToRestaurant (20120919064355)
Migrating to AddIsSubscribedToUser (20120925092845)
Migrating to AddShortAddressToRestaurant (20120927043121)
Migrating to CreateFriendlyIdSlugs (20121030042736)
Migrating to AddSlugToRestaurants (20121030042759)
Migrating to AddSpecialDealToRestaurant (20130710100004)
Migrating to AddFeatureReviewToReview (20131211090826)
Migrating to AddSocialMediaLinkToRestaurant (20131213035001)
Migrating to CreateRestaurantTemps (20131223030922)
Migrating to CreateFiltersRestaurantTemps (20131223083429)
Migrating to AddRestaurantTempIdToSchedule (20131223083845)
Migrating to AddWaitingForApproveChangeToRestaurant (20131223090222)
Migrating to AddReplyContentUserReplyToReview (20131224024320)
Migrating to CreateOffers (20131226042850)
Migrating to AddStartdayEnddayStarttimeEndtimeToOffer (20131230094314)
Migrating to AddRestaurantTempIdToPhoto (20140106034924)
  [1m[35m (37.5ms)[0m  ALTER TABLE `photos` ADD `restaurant_temp_id` int(11)
  [1m[36m (0.6ms)[0m  [1mINSERT INTO `schema_migrations` (`version`) VALUES ('20140106034924')[0m
Migrating to AddScheduleTypeToSchedules (20140109030030)
  [1m[35m (170.2ms)[0m  ALTER TABLE `schedules` ADD `schedule_type` varchar(255) DEFAULT 'daily'
  [1m[36m (0.5ms)[0m  [1mINSERT INTO `schema_migrations` (`version`) VALUES ('20140109030030')[0m
Migrating to AddSuggesterInfoToRestaurant (20140111080001)
  [1m[35m (54.0ms)[0m  ALTER TABLE `restaurants` ADD `suggester_email` varchar(255)
  [1m[36m (342.7ms)[0m  [1mALTER TABLE `restaurants` ADD `suggester_phone` varchar(255)[0m
  [1m[35m (1.7ms)[0m  INSERT INTO `schema_migrations` (`version`) VALUES ('20140111080001')
Migrating to AddTimePublishToOffers (20140115043151)
  [1m[36m (47.6ms)[0m  [1mALTER TABLE `offers` ADD `date_publish` varchar(255)[0m
  [1m[35m (45.9ms)[0m  ALTER TABLE `offers` ADD `time_publish` int(11)
  [1m[36m (2.0ms)[0m  [1mINSERT INTO `schema_migrations` (`version`) VALUES ('20140115043151')[0m
Migrating to ChangeFormatInOffer (20140115061637)
  [1m[35m (6.5ms)[0m  ALTER TABLE `offers` CHANGE `time_available` `time_available` varchar(255) DEFAULT NULL
  [1m[36m (4.6ms)[0m  [1mALTER TABLE `offers` CHANGE `time_start_offer` `time_start_offer` varchar(255) DEFAULT NULL[0m
  [1m[35m (0.6ms)[0m  ALTER TABLE `offers` DROP `start_day`
Mysql2::Error: Can't DROP 'start_day'; check that column/key exists: ALTER TABLE `offers` DROP `start_day`
Connecting to database specified by database.yml
DEPRECATION WARNING: Passing :tag, :class and others to use is deprecated. Please invoke b.use :label, :wrap_with => {:class=>"simple_label"} instead. (called from block (2 levels) in <top (required)> at /Users/kevinmuller/halalgems_backend/config/initializers/simple_form.rb:67)


Started GET "/admin/collections" for 127.0.0.1 at 2016-01-17 07:29:20 +0100
Processing by CollectionsController#index as HTML
  Rendered shared/_restaurant_manage_tabs.html.erb (1.2ms)
  [1m[36mCollection Load (0.2ms)[0m  [1mSELECT `collections`.* FROM `collections` ORDER BY name ASC, created_at DESC LIMIT 12 OFFSET 0[0m
  [1m[35mCollectionImage Load (0.2ms)[0m  SELECT `collection_images`.* FROM `collection_images` WHERE (collection_id = 21) LIMIT 1
  [1m[36mCollectionImage Load (0.2ms)[0m  [1mSELECT `collection_images`.* FROM `collection_images` WHERE (collection_id = 20) LIMIT 1[0m
  [1m[35mCollectionImage Load (0.2ms)[0m  SELECT `collection_images`.* FROM `collection_images` WHERE (collection_id = 24) LIMIT 1
  [1m[36m (0.2ms)[0m  [1mSELECT COUNT(*) FROM `collections` [0m
  Rendered collections/index.erb within layouts/admin (43.9ms)
Completed 500 Internal Server Error in 64ms

ActionView::Template::Error (undefined method `username' for nil:NilClass):
    76:                 <!--<li class="divider-vertical"></li>-->
    77:                 <li class="dropdown">
    78:                   <%#= image_tag(backend_avatar_url(current_user))%>
    79:                   <a data-toggle="dropdown" class="dropdown-toggle" href="#"><%= (current_user.username.blank?)?(current_user.email):(current_user.username) %><b class="caret"></b></a>
    80:                   <ul class="dropdown-menu">
    81:                     <li><a href="#"><%= link_to "My Account",personal_information_path %></a></li>
    82:                     <li><a href="#"><%= link_to "Change password", change_password_user_registration_path %></a></li>
  app/views/layouts/admin.html.erb:79:in `_app_views_layouts_admin_html_erb___767280707518276134_70171457065200'
  app/controllers/collections_controller.rb:20:in `index'


  Rendered /Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_dispatch/middleware/templates/rescues/_trace.erb (1.1ms)
  Rendered /Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_dispatch/middleware/templates/rescues/_request_and_response.erb (0.9ms)
  Rendered /Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_dispatch/middleware/templates/rescues/template_error.erb within rescues/layout (43.6ms)


Started GET "/admin/collections" for 127.0.0.1 at 2016-01-17 07:29:20 +0100
Processing by CollectionsController#index as HTML
  Rendered shared/_restaurant_manage_tabs.html.erb (0.6ms)
  [1m[35mCollection Load (0.3ms)[0m  SELECT `collections`.* FROM `collections` ORDER BY name ASC, created_at DESC LIMIT 12 OFFSET 0
  [1m[36mCollectionImage Load (0.2ms)[0m  [1mSELECT `collection_images`.* FROM `collection_images` WHERE (collection_id = 21) LIMIT 1[0m
  [1m[35mCollectionImage Load (0.1ms)[0m  SELECT `collection_images`.* FROM `collection_images` WHERE (collection_id = 20) LIMIT 1
  [1m[36mCollectionImage Load (0.2ms)[0m  [1mSELECT `collection_images`.* FROM `collection_images` WHERE (collection_id = 24) LIMIT 1[0m
  [1m[35m (0.1ms)[0m  SELECT COUNT(*) FROM `collections` 
  Rendered collections/index.erb within layouts/admin (12.3ms)
Completed 500 Internal Server Error in 18ms

ActionView::Template::Error (undefined method `username' for nil:NilClass):
    76:                 <!--<li class="divider-vertical"></li>-->
    77:                 <li class="dropdown">
    78:                   <%#= image_tag(backend_avatar_url(current_user))%>
    79:                   <a data-toggle="dropdown" class="dropdown-toggle" href="#"><%= (current_user.username.blank?)?(current_user.email):(current_user.username) %><b class="caret"></b></a>
    80:                   <ul class="dropdown-menu">
    81:                     <li><a href="#"><%= link_to "My Account",personal_information_path %></a></li>
    82:                     <li><a href="#"><%= link_to "Change password", change_password_user_registration_path %></a></li>
  app/views/layouts/admin.html.erb:79:in `_app_views_layouts_admin_html_erb___767280707518276134_70171457065200'
  app/controllers/collections_controller.rb:20:in `index'


  Rendered /Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_dispatch/middleware/templates/rescues/_trace.erb (0.8ms)
  Rendered /Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_dispatch/middleware/templates/rescues/_request_and_response.erb (0.7ms)
  Rendered /Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_dispatch/middleware/templates/rescues/template_error.erb within rescues/layout (38.9ms)


Started GET "/admin/collections" for 127.0.0.1 at 2016-01-17 07:29:21 +0100
Processing by CollectionsController#index as HTML
  Rendered shared/_restaurant_manage_tabs.html.erb (2.4ms)
  [1m[36mCollection Load (0.5ms)[0m  [1mSELECT `collections`.* FROM `collections` ORDER BY name ASC, created_at DESC LIMIT 12 OFFSET 0[0m
  [1m[35mCollectionImage Load (0.4ms)[0m  SELECT `collection_images`.* FROM `collection_images` WHERE (collection_id = 21) LIMIT 1
  [1m[36mCollectionImage Load (0.2ms)[0m  [1mSELECT `collection_images`.* FROM `collection_images` WHERE (collection_id = 20) LIMIT 1[0m
  [1m[35mCollectionImage Load (0.2ms)[0m  SELECT `collection_images`.* FROM `collection_images` WHERE (collection_id = 24) LIMIT 1
  [1m[36m (0.1ms)[0m  [1mSELECT COUNT(*) FROM `collections` [0m
  Rendered collections/index.erb within layouts/admin (19.2ms)
Completed 500 Internal Server Error in 28ms

ActionView::Template::Error (undefined method `username' for nil:NilClass):
    76:                 <!--<li class="divider-vertical"></li>-->
    77:                 <li class="dropdown">
    78:                   <%#= image_tag(backend_avatar_url(current_user))%>
    79:                   <a data-toggle="dropdown" class="dropdown-toggle" href="#"><%= (current_user.username.blank?)?(current_user.email):(current_user.username) %><b class="caret"></b></a>
    80:                   <ul class="dropdown-menu">
    81:                     <li><a href="#"><%= link_to "My Account",personal_information_path %></a></li>
    82:                     <li><a href="#"><%= link_to "Change password", change_password_user_registration_path %></a></li>
  app/views/layouts/admin.html.erb:79:in `_app_views_layouts_admin_html_erb___767280707518276134_70171457065200'
  app/controllers/collections_controller.rb:20:in `index'


  Rendered /Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_dispatch/middleware/templates/rescues/_trace.erb (1.0ms)
  Rendered /Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_dispatch/middleware/templates/rescues/_request_and_response.erb (0.7ms)
  Rendered /Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_dispatch/middleware/templates/rescues/template_error.erb within rescues/layout (40.8ms)


Started GET "/admin/collections" for 127.0.0.1 at 2016-01-17 07:29:42 +0100
Processing by CollectionsController#index as HTML
  Rendered shared/_restaurant_manage_tabs.html.erb (1.6ms)
  [1m[35mCollection Load (0.4ms)[0m  SELECT `collections`.* FROM `collections` ORDER BY name ASC, created_at DESC LIMIT 12 OFFSET 0
  [1m[36mCollectionImage Load (0.3ms)[0m  [1mSELECT `collection_images`.* FROM `collection_images` WHERE (collection_id = 21) LIMIT 1[0m
  [1m[35mCollectionImage Load (0.3ms)[0m  SELECT `collection_images`.* FROM `collection_images` WHERE (collection_id = 20) LIMIT 1
  [1m[36mCollectionImage Load (0.3ms)[0m  [1mSELECT `collection_images`.* FROM `collection_images` WHERE (collection_id = 24) LIMIT 1[0m
  [1m[35m (0.3ms)[0m  SELECT COUNT(*) FROM `collections` 
  Rendered collections/index.erb within layouts/admin (20.7ms)
Completed 500 Internal Server Error in 29ms

ActionView::Template::Error (undefined method `username' for nil:NilClass):
    76:                 <!--<li class="divider-vertical"></li>-->
    77:                 <li class="dropdown">
    78:                   <%#= image_tag(backend_avatar_url(current_user))%>
    79:                   <a data-toggle="dropdown" class="dropdown-toggle" href="#"><%= (current_user.username.blank?)?(current_user.email):(current_user.username) %><b class="caret"></b></a>
    80:                   <ul class="dropdown-menu">
    81:                     <li><a href="#"><%= link_to "My Account",personal_information_path %></a></li>
    82:                     <li><a href="#"><%= link_to "Change password", change_password_user_registration_path %></a></li>
  app/views/layouts/admin.html.erb:79:in `_app_views_layouts_admin_html_erb___767280707518276134_70171457065200'
  app/controllers/collections_controller.rb:20:in `index'


  Rendered /Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_dispatch/middleware/templates/rescues/_trace.erb (0.9ms)
  Rendered /Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_dispatch/middleware/templates/rescues/_request_and_response.erb (0.7ms)
  Rendered /Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_dispatch/middleware/templates/rescues/template_error.erb within rescues/layout (39.6ms)


Started GET "/admin/collections" for 127.0.0.1 at 2016-01-17 07:29:43 +0100
Processing by CollectionsController#index as HTML
  Rendered shared/_restaurant_manage_tabs.html.erb (1.2ms)
  [1m[36mCollection Load (0.8ms)[0m  [1mSELECT `collections`.* FROM `collections` ORDER BY name ASC, created_at DESC LIMIT 12 OFFSET 0[0m
  [1m[35mCollectionImage Load (0.2ms)[0m  SELECT `collection_images`.* FROM `collection_images` WHERE (collection_id = 21) LIMIT 1
  [1m[36mCollectionImage Load (0.3ms)[0m  [1mSELECT `collection_images`.* FROM `collection_images` WHERE (collection_id = 20) LIMIT 1[0m
  [1m[35mCollectionImage Load (0.2ms)[0m  SELECT `collection_images`.* FROM `collection_images` WHERE (collection_id = 24) LIMIT 1
  [1m[36m (0.1ms)[0m  [1mSELECT COUNT(*) FROM `collections` [0m
  Rendered collections/index.erb within layouts/admin (15.6ms)
Completed 500 Internal Server Error in 25ms

ActionView::Template::Error (undefined method `username' for nil:NilClass):
    76:                 <!--<li class="divider-vertical"></li>-->
    77:                 <li class="dropdown">
    78:                   <%#= image_tag(backend_avatar_url(current_user))%>
    79:                   <a data-toggle="dropdown" class="dropdown-toggle" href="#"><%= (current_user.username.blank?)?(current_user.email):(current_user.username) %><b class="caret"></b></a>
    80:                   <ul class="dropdown-menu">
    81:                     <li><a href="#"><%= link_to "My Account",personal_information_path %></a></li>
    82:                     <li><a href="#"><%= link_to "Change password", change_password_user_registration_path %></a></li>
  app/views/layouts/admin.html.erb:79:in `_app_views_layouts_admin_html_erb___767280707518276134_70171457065200'
  app/controllers/collections_controller.rb:20:in `index'


  Rendered /Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_dispatch/middleware/templates/rescues/_trace.erb (0.9ms)
  Rendered /Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_dispatch/middleware/templates/rescues/_request_and_response.erb (0.8ms)
  Rendered /Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_dispatch/middleware/templates/rescues/template_error.erb within rescues/layout (39.6ms)


Started GET "/admin/collections" for 127.0.0.1 at 2016-01-17 07:30:05 +0100
Processing by CollectionsController#index as HTML
  Rendered shared/_restaurant_manage_tabs.html.erb (0.6ms)
  [1m[35mCollection Load (0.2ms)[0m  SELECT `collections`.* FROM `collections` ORDER BY name ASC, created_at DESC LIMIT 12 OFFSET 0
  [1m[36mCollectionImage Load (0.2ms)[0m  [1mSELECT `collection_images`.* FROM `collection_images` WHERE (collection_id = 21) LIMIT 1[0m
  [1m[35mCollectionImage Load (0.2ms)[0m  SELECT `collection_images`.* FROM `collection_images` WHERE (collection_id = 20) LIMIT 1
  [1m[36mCollectionImage Load (0.2ms)[0m  [1mSELECT `collection_images`.* FROM `collection_images` WHERE (collection_id = 24) LIMIT 1[0m
  [1m[35m (0.2ms)[0m  SELECT COUNT(*) FROM `collections` 
  Rendered collections/index.erb within layouts/admin (32.7ms)
Completed 500 Internal Server Error in 72ms

ActionView::Template::Error (undefined method `username' for nil:NilClass):
    76:                 <!--<li class="divider-vertical"></li>-->
    77:                 <li class="dropdown">
    78:                   <%#= image_tag(backend_avatar_url(current_user))%>
    79:                   <a data-toggle="dropdown" class="dropdown-toggle" href="#"><%= (current_user.username.blank?)?(current_user.email):(current_user.username) %><b class="caret"></b></a>
    80:                   <ul class="dropdown-menu">
    81:                     <li><a href="#"><%= link_to "My Account",personal_information_path %></a></li>
    82:                     <li><a href="#"><%= link_to "Change password", change_password_user_registration_path %></a></li>
  app/views/layouts/admin.html.erb:79:in `_app_views_layouts_admin_html_erb___767280707518276134_70171457065200'
  app/controllers/collections_controller.rb:20:in `index'


  Rendered /Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_dispatch/middleware/templates/rescues/_trace.erb (0.8ms)
  Rendered /Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_dispatch/middleware/templates/rescues/_request_and_response.erb (0.7ms)
  Rendered /Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_dispatch/middleware/templates/rescues/template_error.erb within rescues/layout (39.5ms)
Connecting to database specified by database.yml
DEPRECATION WARNING: Passing :tag, :class and others to use is deprecated. Please invoke b.use :label, :wrap_with => {:class=>"simple_label"} instead. (called from block (2 levels) in <top (required)> at /Users/kevinmuller/halalgems_backend/config/initializers/simple_form.rb:67)
  [1m[36m (0.2ms)[0m  [1mSELECT `schema_migrations`.`version` FROM `schema_migrations` [0m
Migrating to CreateUsers (20120822030811)
Migrating to AddDeviseToUsers (20120822030947)
Migrating to AddRoleToUsers (20120822035539)
Migrating to AddColumnsToUsers (20120822040907)
Migrating to AddNameToUsers (20120822064044)
Migrating to AddSessionsTable (20120822072201)
Migrating to AddJoinMailingListToUsers (20120822163135)
Migrating to CreateRestaurants (20120823045735)
Migrating to CreatePhotos (20120823082051)
Migrating to CreateReviews (20120824034307)
Migrating to CreateFavourites (20120824034907)
Migrating to AddAttributesToRestaurant (20120824092649)
Migrating to AddDirectionToRestaurant (20120828032047)
Migrating to CreateAdminPhotos (20120828033854)
Migrating to AddRatingToRestaurant (20120828083737)
Migrating to CreateFilters (20120829090608)
Migrating to CreateFiltersRestaurants (20120830045136)
Migrating to CreateSchedules (20120830101034)
Migrating to AddPriceToRestaurant (20120904103954)
Migrating to AddAvatarUidToUsers (20120904110732)
Migrating to AddAvatarNameToUsers (20120904110804)
Migrating to RemoveAvatarFromUsers (20120905071514)
Migrating to CreateSimpleCaptchaData (20120906132419)
Migrating to ChangeDataTypeForRatingReviews (20120909104219)
Migrating to AddMenuToRestaurant (20120910073101)
Migrating to CreateBasicsPages (20120910092737)
Migrating to CreateFilterTypes (20120910104054)
Migrating to CreateFilterTypesRestaurant (20120910104249)
Migrating to CreateMenus (20120910114555)
Migrating to AddNameToMenu (20120913093300)
Migrating to AddVisitedDateToReviews (20120913160959)
Migrating to ChangeDefaultDisableRestaurant (20120914085347)
Migrating to AddImageTypeToAdminPhotos (20120916171915)
Migrating to AddWebsiteToRestaurant (20120919064355)
Migrating to AddIsSubscribedToUser (20120925092845)
Migrating to AddShortAddressToRestaurant (20120927043121)
Migrating to CreateFriendlyIdSlugs (20121030042736)
Migrating to AddSlugToRestaurants (20121030042759)
Migrating to AddSpecialDealToRestaurant (20130710100004)
Migrating to AddFeatureReviewToReview (20131211090826)
Migrating to AddSocialMediaLinkToRestaurant (20131213035001)
Migrating to CreateRestaurantTemps (20131223030922)
Migrating to CreateFiltersRestaurantTemps (20131223083429)
Migrating to AddRestaurantTempIdToSchedule (20131223083845)
Migrating to AddWaitingForApproveChangeToRestaurant (20131223090222)
Migrating to AddReplyContentUserReplyToReview (20131224024320)
Migrating to CreateOffers (20131226042850)
Migrating to AddStartdayEnddayStarttimeEndtimeToOffer (20131230094314)
Migrating to AddRestaurantTempIdToPhoto (20140106034924)
Migrating to AddScheduleTypeToSchedules (20140109030030)
Migrating to AddSuggesterInfoToRestaurant (20140111080001)
Migrating to AddTimePublishToOffers (20140115043151)
Migrating to ChangeFormatInOffer (20140115061637)
  [1m[35m (5.4ms)[0m  ALTER TABLE `offers` CHANGE `time_available` `time_available` varchar(255) DEFAULT NULL
  [1m[36m (2.5ms)[0m  [1mALTER TABLE `offers` CHANGE `time_start_offer` `time_start_offer` varchar(255) DEFAULT NULL[0m
  [1m[35m (0.6ms)[0m  ALTER TABLE `offers` DROP `start_day`
Mysql2::Error: Can't DROP 'start_day'; check that column/key exists: ALTER TABLE `offers` DROP `start_day`
Connecting to database specified by database.yml
DEPRECATION WARNING: Passing :tag, :class and others to use is deprecated. Please invoke b.use :label, :wrap_with => {:class=>"simple_label"} instead. (called from block (2 levels) in <top (required)> at /Users/kevinmuller/halalgems_backend/config/initializers/simple_form.rb:67)
  [1m[36m (0.3ms)[0m  [1mSELECT `schema_migrations`.`version` FROM `schema_migrations` [0m
Migrating to CreateUsers (20120822030811)
Migrating to AddDeviseToUsers (20120822030947)
Migrating to AddRoleToUsers (20120822035539)
Migrating to AddColumnsToUsers (20120822040907)
Migrating to AddNameToUsers (20120822064044)
Migrating to AddSessionsTable (20120822072201)
Migrating to AddJoinMailingListToUsers (20120822163135)
Migrating to CreateRestaurants (20120823045735)
Migrating to CreatePhotos (20120823082051)
Migrating to CreateReviews (20120824034307)
Migrating to CreateFavourites (20120824034907)
Migrating to AddAttributesToRestaurant (20120824092649)
Migrating to AddDirectionToRestaurant (20120828032047)
Migrating to CreateAdminPhotos (20120828033854)
Migrating to AddRatingToRestaurant (20120828083737)
Migrating to CreateFilters (20120829090608)
Migrating to CreateFiltersRestaurants (20120830045136)
Migrating to CreateSchedules (20120830101034)
Migrating to AddPriceToRestaurant (20120904103954)
Migrating to AddAvatarUidToUsers (20120904110732)
Migrating to AddAvatarNameToUsers (20120904110804)
Migrating to RemoveAvatarFromUsers (20120905071514)
Migrating to CreateSimpleCaptchaData (20120906132419)
Migrating to ChangeDataTypeForRatingReviews (20120909104219)
Migrating to AddMenuToRestaurant (20120910073101)
Migrating to CreateBasicsPages (20120910092737)
Migrating to CreateFilterTypes (20120910104054)
Migrating to CreateFilterTypesRestaurant (20120910104249)
Migrating to CreateMenus (20120910114555)
Migrating to AddNameToMenu (20120913093300)
Migrating to AddVisitedDateToReviews (20120913160959)
Migrating to ChangeDefaultDisableRestaurant (20120914085347)
Migrating to AddImageTypeToAdminPhotos (20120916171915)
Migrating to AddWebsiteToRestaurant (20120919064355)
Migrating to AddIsSubscribedToUser (20120925092845)
Migrating to AddShortAddressToRestaurant (20120927043121)
Migrating to CreateFriendlyIdSlugs (20121030042736)
Migrating to AddSlugToRestaurants (20121030042759)
Migrating to AddSpecialDealToRestaurant (20130710100004)
Migrating to AddFeatureReviewToReview (20131211090826)
Migrating to AddSocialMediaLinkToRestaurant (20131213035001)
Migrating to CreateRestaurantTemps (20131223030922)
Migrating to CreateFiltersRestaurantTemps (20131223083429)
Migrating to AddRestaurantTempIdToSchedule (20131223083845)
Migrating to AddWaitingForApproveChangeToRestaurant (20131223090222)
Migrating to AddReplyContentUserReplyToReview (20131224024320)
Migrating to CreateOffers (20131226042850)
Migrating to AddStartdayEnddayStarttimeEndtimeToOffer (20131230094314)
Migrating to AddRestaurantTempIdToPhoto (20140106034924)
Migrating to AddScheduleTypeToSchedules (20140109030030)
Migrating to AddSuggesterInfoToRestaurant (20140111080001)
Migrating to AddTimePublishToOffers (20140115043151)
Migrating to ChangeFormatInOffer (20140115061637)
  [1m[35m (3.5ms)[0m  ALTER TABLE `offers` CHANGE `time_available` `time_available` varchar(255) DEFAULT NULL
  [1m[36m (3.1ms)[0m  [1mALTER TABLE `offers` CHANGE `time_start_offer` `time_start_offer` varchar(255) DEFAULT NULL[0m
  [1m[35m (0.4ms)[0m  ALTER TABLE `offers` DROP `start_day`
Mysql2::Error: Can't DROP 'start_day'; check that column/key exists: ALTER TABLE `offers` DROP `start_day`
Connecting to database specified by database.yml
DEPRECATION WARNING: Passing :tag, :class and others to use is deprecated. Please invoke b.use :label, :wrap_with => {:class=>"simple_label"} instead. (called from block (2 levels) in <top (required)> at /Users/kevinmuller/halalgems_backend/config/initializers/simple_form.rb:67)


Started GET "/admin/collections" for 127.0.0.1 at 2016-01-17 07:34:47 +0100
Processing by CollectionsController#index as HTML
  Rendered shared/_restaurant_manage_tabs.html.erb (1.4ms)
  [1m[36mCollection Load (0.2ms)[0m  [1mSELECT `collections`.* FROM `collections` ORDER BY name ASC, created_at DESC LIMIT 12 OFFSET 0[0m
  [1m[35mCollectionImage Load (0.2ms)[0m  SELECT `collection_images`.* FROM `collection_images` WHERE (collection_id = 21) LIMIT 1
  [1m[36mCollectionImage Load (0.2ms)[0m  [1mSELECT `collection_images`.* FROM `collection_images` WHERE (collection_id = 20) LIMIT 1[0m
  [1m[35mCollectionImage Load (0.2ms)[0m  SELECT `collection_images`.* FROM `collection_images` WHERE (collection_id = 24) LIMIT 1
  [1m[36m (0.2ms)[0m  [1mSELECT COUNT(*) FROM `collections` [0m
  Rendered collections/index.erb within layouts/admin (58.5ms)
Completed 500 Internal Server Error in 142ms

ActionView::Template::Error (undefined method `username' for nil:NilClass):
    76:                 <!--<li class="divider-vertical"></li>-->
    77:                 <li class="dropdown">
    78:                   <%#= image_tag(backend_avatar_url(current_user))%>
    79:                   <a data-toggle="dropdown" class="dropdown-toggle" href="#"><%= (current_user.username.blank?)?(current_user.email):(current_user.username) %><b class="caret"></b></a>
    80:                   <ul class="dropdown-menu">
    81:                     <li><a href="#"><%= link_to "My Account",personal_information_path %></a></li>
    82:                     <li><a href="#"><%= link_to "Change password", change_password_user_registration_path %></a></li>
  app/views/layouts/admin.html.erb:79:in `_app_views_layouts_admin_html_erb___1763276373835473681_70193272427200'
  app/controllers/collections_controller.rb:20:in `index'


  Rendered /Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_dispatch/middleware/templates/rescues/_trace.erb (1.1ms)
  Rendered /Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_dispatch/middleware/templates/rescues/_request_and_response.erb (0.8ms)
  Rendered /Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_dispatch/middleware/templates/rescues/template_error.erb within rescues/layout (43.2ms)


Started GET "/" for 127.0.0.1 at 2016-01-17 07:35:09 +0100
Processing by PagesController#home as HTML
  [1m[35mAdminPhoto Load (0.5ms)[0m  SELECT `admin_photos`.* FROM `admin_photos` WHERE `admin_photos`.`image_type` = 1 ORDER BY RAND() LIMIT 1
  [1m[36mFilter Load (0.5ms)[0m  [1mSELECT `filters`.* FROM `filters` WHERE (code = 'cuisine') ORDER BY name ASC[0m
  [1m[35mUser Load (0.3ms)[0m  SELECT `users`.* FROM `users` WHERE `users`.`gem_hunter` = 1 LIMIT 3
Mysql2::Error: Unknown column 'users.gem_hunter' in 'where clause': SELECT  `users`.* FROM `users`  WHERE `users`.`gem_hunter` = 1 LIMIT 3
Completed 500 Internal Server Error in 82ms

ActiveRecord::StatementInvalid (Mysql2::Error: Unknown column 'users.gem_hunter' in 'where clause': SELECT  `users`.* FROM `users`  WHERE `users`.`gem_hunter` = 1 LIMIT 3):
  app/models/review.rb:124:in `get_lastest_gem_hunter'
  app/controllers/pages_controller.rb:21:in `home'


  Rendered /Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_dispatch/middleware/templates/rescues/_trace.erb (0.9ms)
  Rendered /Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_dispatch/middleware/templates/rescues/_request_and_response.erb (0.7ms)
  Rendered /Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_dispatch/middleware/templates/rescues/diagnostics.erb within rescues/layout (42.2ms)
Connecting to database specified by database.yml
DEPRECATION WARNING: Passing :tag, :class and others to use is deprecated. Please invoke b.use :label, :wrap_with => {:class=>"simple_label"} instead. (called from block (2 levels) in <top (required)> at /Users/kevinmuller/halalgems_backend/config/initializers/simple_form.rb:67)
Connecting to database specified by database.yml
DEPRECATION WARNING: Passing :tag, :class and others to use is deprecated. Please invoke b.use :label, :wrap_with => {:class=>"simple_label"} instead. (called from block (2 levels) in <top (required)> at /Users/kevinmuller/halalgems_backend/config/initializers/simple_form.rb:67)
Connecting to database specified by database.yml
DEPRECATION WARNING: Passing :tag, :class and others to use is deprecated. Please invoke b.use :label, :wrap_with => {:class=>"simple_label"} instead. (called from block (2 levels) in <top (required)> at /Users/kevinmuller/halalgems_backend/config/initializers/simple_form.rb:67)
Connecting to database specified by database.yml
DEPRECATION WARNING: Passing :tag, :class and others to use is deprecated. Please invoke b.use :label, :wrap_with => {:class=>"simple_label"} instead. (called from block (2 levels) in <top (required)> at /Users/kevinmuller/halalgems_backend/config/initializers/simple_form.rb:67)
  [1m[36m (32.2ms)[0m  [1mCREATE TABLE `schema_migrations` (`version` varchar(255) NOT NULL) ENGINE=InnoDB[0m
  [1m[35m (65.5ms)[0m  CREATE UNIQUE INDEX `unique_schema_migrations` ON `schema_migrations` (`version`)
  [1m[36m (24.0ms)[0m  [1mSELECT `schema_migrations`.`version` FROM `schema_migrations` [0m
Migrating to CreateUsers (20120822030811)
  [1m[35m (7.7ms)[0m  CREATE TABLE `users` (`id` int(11) DEFAULT NULL auto_increment PRIMARY KEY, `email` varchar(255) DEFAULT '' NOT NULL, `username` varchar(255), `first_name` varchar(255), `last_name` varchar(255), `middle_name` varchar(255), `phone` varchar(255), `address` varchar(255), `avatar` varchar(255), `im` varchar(255), `status` varchar(255) DEFAULT 'unverified', `created_at` datetime NOT NULL, `updated_at` datetime NOT NULL) ENGINE=InnoDB
  [1m[36m (0.5ms)[0m  [1mINSERT INTO `schema_migrations` (`version`) VALUES ('20120822030811')[0m
Migrating to AddDeviseToUsers (20120822030947)
  [1m[35m (24.4ms)[0m  ALTER TABLE `users` ADD `encrypted_password` varchar(255) DEFAULT '' NOT NULL
  [1m[36m (20.3ms)[0m  [1mALTER TABLE `users` ADD `reset_password_token` varchar(255)[0m
  [1m[35m (27.4ms)[0m  ALTER TABLE `users` ADD `reset_password_sent_at` datetime
  [1m[36m (14.2ms)[0m  [1mALTER TABLE `users` ADD `remember_created_at` datetime[0m
  [1m[35m (13.2ms)[0m  ALTER TABLE `users` ADD `sign_in_count` int(11) DEFAULT 0
  [1m[36m (12.2ms)[0m  [1mALTER TABLE `users` ADD `current_sign_in_at` datetime[0m
  [1m[35m (14.0ms)[0m  ALTER TABLE `users` ADD `last_sign_in_at` datetime
  [1m[36m (95.7ms)[0m  [1mALTER TABLE `users` ADD `current_sign_in_ip` varchar(255)[0m
  [1m[35m (34.2ms)[0m  ALTER TABLE `users` ADD `last_sign_in_ip` varchar(255)
  [1m[36m (27.2ms)[0m  [1mALTER TABLE `users` ADD `confirmation_token` varchar(255)[0m
  [1m[35m (20.2ms)[0m  ALTER TABLE `users` ADD `confirmed_at` datetime
  [1m[36m (418.2ms)[0m  [1mALTER TABLE `users` ADD `confirmation_sent_at` datetime[0m
  [1m[35m (41.2ms)[0m  ALTER TABLE `users` ADD `unconfirmed_email` varchar(255)
  [1m[36m (23.1ms)[0m  [1mALTER TABLE `users` ADD `failed_attempts` int(11) DEFAULT 0[0m
  [1m[35m (22.4ms)[0m  ALTER TABLE `users` ADD `unlock_token` varchar(255)
  [1m[36m (24.6ms)[0m  [1mALTER TABLE `users` ADD `locked_at` datetime[0m
  [1m[35m (24.6ms)[0m  ALTER TABLE `users` ADD `authentication_token` varchar(255)
  [1m[36m (16.4ms)[0m  [1mCREATE UNIQUE INDEX `index_users_on_email` ON `users` (`email`)[0m
  [1m[35m (668.4ms)[0m  CREATE UNIQUE INDEX `index_users_on_reset_password_token` ON `users` (`reset_password_token`)
  [1m[36m (10.1ms)[0m  [1mCREATE UNIQUE INDEX `index_users_on_confirmation_token` ON `users` (`confirmation_token`)[0m
  [1m[35m (10.7ms)[0m  CREATE UNIQUE INDEX `index_users_on_unlock_token` ON `users` (`unlock_token`)
  [1m[36m (10.1ms)[0m  [1mCREATE UNIQUE INDEX `index_users_on_authentication_token` ON `users` (`authentication_token`)[0m
  [1m[35m (0.4ms)[0m  INSERT INTO `schema_migrations` (`version`) VALUES ('20120822030947')
Migrating to AddRoleToUsers (20120822035539)
  [1m[36m (81.3ms)[0m  [1mALTER TABLE `users` ADD `admin_role` tinyint(1)[0m
  [1m[35m (0.4ms)[0m  INSERT INTO `schema_migrations` (`version`) VALUES ('20120822035539')
Migrating to AddColumnsToUsers (20120822040907)
  [1m[36m (54.1ms)[0m  [1mALTER TABLE `users` ADD `provider` varchar(255)[0m
  [1m[35m (58.8ms)[0m  ALTER TABLE `users` ADD `uid` varchar(255)
  [1m[36m (0.9ms)[0m  [1mINSERT INTO `schema_migrations` (`version`) VALUES ('20120822040907')[0m
Migrating to AddNameToUsers (20120822064044)
  [1m[35m (65.4ms)[0m  ALTER TABLE `users` ADD `name` varchar(255)
  [1m[36m (0.5ms)[0m  [1mINSERT INTO `schema_migrations` (`version`) VALUES ('20120822064044')[0m
Migrating to AddSessionsTable (20120822072201)
  [1m[35m (7.6ms)[0m  CREATE TABLE `sessions` (`id` int(11) DEFAULT NULL auto_increment PRIMARY KEY, `session_id` varchar(255) NOT NULL, `data` text, `created_at` datetime NOT NULL, `updated_at` datetime NOT NULL) ENGINE=InnoDB
  [1m[36m (8.4ms)[0m  [1mCREATE INDEX `index_sessions_on_session_id` ON `sessions` (`session_id`)[0m
  [1m[35m (11.4ms)[0m  CREATE INDEX `index_sessions_on_updated_at` ON `sessions` (`updated_at`)
  [1m[36m (1.1ms)[0m  [1mINSERT INTO `schema_migrations` (`version`) VALUES ('20120822072201')[0m
Migrating to AddJoinMailingListToUsers (20120822163135)
  [1m[35m (65.0ms)[0m  ALTER TABLE `users` ADD `join_mailing_list` tinyint(1)
  [1m[36m (0.5ms)[0m  [1mINSERT INTO `schema_migrations` (`version`) VALUES ('20120822163135')[0m
Migrating to CreateRestaurants (20120823045735)
  [1m[35m (7.0ms)[0m  CREATE TABLE `restaurants` (`id` int(11) DEFAULT NULL auto_increment PRIMARY KEY, `name` varchar(255), `address` varchar(255), `description` text, `phone` varchar(255), `email` varchar(255), `user_id` int(11), `deliverable` tinyint(1), `shisha_allow` tinyint(1), `disabled` tinyint(1) DEFAULT 0, `created_at` datetime NOT NULL, `updated_at` datetime NOT NULL) ENGINE=InnoDB
  [1m[36m (0.4ms)[0m  [1mINSERT INTO `schema_migrations` (`version`) VALUES ('20120823045735')[0m
Migrating to CreatePhotos (20120823082051)
  [1m[35m (19.7ms)[0m  CREATE TABLE `photos` (`id` int(11) DEFAULT NULL auto_increment PRIMARY KEY, `restaurant_id` int(11), `user_id` int(11), `cover` tinyint(1) DEFAULT 0, `image_uid` varchar(255), `image_name` varchar(255), `created_at` datetime NOT NULL, `updated_at` datetime NOT NULL) ENGINE=InnoDB
  [1m[36m (1.0ms)[0m  [1mINSERT INTO `schema_migrations` (`version`) VALUES ('20120823082051')[0m
Migrating to CreateReviews (20120824034307)
  [1m[35m (9.1ms)[0m  CREATE TABLE `reviews` (`id` int(11) DEFAULT NULL auto_increment PRIMARY KEY, `user_id` int(11), `restaurant_id` int(11), `title` varchar(255), `content` text, `service` int(11), `quality` int(11), `value` int(11), `status` tinyint(1), `rating` int(11), `created_at` datetime NOT NULL, `updated_at` datetime NOT NULL) ENGINE=InnoDB
  [1m[36m (1.2ms)[0m  [1mINSERT INTO `schema_migrations` (`version`) VALUES ('20120824034307')[0m
Migrating to CreateFavourites (20120824034907)
  [1m[35m (11.8ms)[0m  CREATE TABLE `favourites` (`id` int(11) DEFAULT NULL auto_increment PRIMARY KEY, `user_id` int(11), `restaurant_id` int(11), `created_at` datetime NOT NULL, `updated_at` datetime NOT NULL) ENGINE=InnoDB
  [1m[36m (0.5ms)[0m  [1mINSERT INTO `schema_migrations` (`version`) VALUES ('20120824034907')[0m
Migrating to AddAttributesToRestaurant (20120824092649)
  [1m[35m (33.2ms)[0m  ALTER TABLE `restaurants` ADD `lat` decimal(16,13)
  [1m[36m (16.5ms)[0m  [1mALTER TABLE `restaurants` ADD `lng` decimal(16,13)[0m
  [1m[35m (21.1ms)[0m  ALTER TABLE `restaurants` ADD `district` varchar(255)
  [1m[36m (13.8ms)[0m  [1mALTER TABLE `restaurants` ADD `city` varchar(255)[0m
  [1m[35m (12.5ms)[0m  ALTER TABLE `restaurants` ADD `postcode` varchar(255)
  [1m[36m (15.5ms)[0m  [1mALTER TABLE `restaurants` ADD `country` varchar(255)[0m
  [1m[35m (0.4ms)[0m  INSERT INTO `schema_migrations` (`version`) VALUES ('20120824092649')
Migrating to AddDirectionToRestaurant (20120828032047)
  [1m[36m (19.3ms)[0m  [1mALTER TABLE `restaurants` ADD `direction` text[0m
  [1m[35m (0.5ms)[0m  INSERT INTO `schema_migrations` (`version`) VALUES ('20120828032047')
Migrating to CreateAdminPhotos (20120828033854)
  [1m[36m (13.7ms)[0m  [1mCREATE TABLE `admin_photos` (`id` int(11) DEFAULT NULL auto_increment PRIMARY KEY, `user_id` int(11), `cover` tinyint(1) DEFAULT 0, `image_uid` varchar(255), `image_name` varchar(255), `created_at` datetime NOT NULL, `updated_at` datetime NOT NULL) ENGINE=InnoDB[0m
  [1m[35m (0.7ms)[0m  INSERT INTO `schema_migrations` (`version`) VALUES ('20120828033854')
Migrating to AddRatingToRestaurant (20120828083737)
  [1m[36m (12.6ms)[0m  [1mALTER TABLE `restaurants` ADD `service_avg` float DEFAULT 0[0m
  [1m[35m (12.0ms)[0m  ALTER TABLE `restaurants` ADD `quality_avg` float DEFAULT 0
  [1m[36m (16.6ms)[0m  [1mALTER TABLE `restaurants` ADD `value_avg` float DEFAULT 0[0m
  [1m[35m (13.2ms)[0m  ALTER TABLE `restaurants` ADD `rating_avg` float DEFAULT 0
  [1m[36m (0.5ms)[0m  [1mINSERT INTO `schema_migrations` (`version`) VALUES ('20120828083737')[0m
Migrating to CreateFilters (20120829090608)
  [1m[35m (8.5ms)[0m  CREATE TABLE `filters` (`id` int(11) DEFAULT NULL auto_increment PRIMARY KEY, `code` varchar(255), `name` varchar(255), `description` text, `status` tinyint(1) DEFAULT 1, `created_at` datetime NOT NULL, `updated_at` datetime NOT NULL) ENGINE=InnoDB
  [1m[36m (0.4ms)[0m  [1mINSERT INTO `schema_migrations` (`version`) VALUES ('20120829090608')[0m
Migrating to CreateFiltersRestaurants (20120830045136)
  [1m[35m (5.4ms)[0m  CREATE TABLE `filters_restaurants` (`filter_id` int(11), `restaurant_id` int(11), `created_at` datetime NOT NULL, `updated_at` datetime NOT NULL) ENGINE=InnoDB
  [1m[36m (0.4ms)[0m  [1mINSERT INTO `schema_migrations` (`version`) VALUES ('20120830045136')[0m
Migrating to CreateSchedules (20120830101034)
  [1m[35m (5.1ms)[0m  CREATE TABLE `schedules` (`id` int(11) DEFAULT NULL auto_increment PRIMARY KEY, `restaurant_id` int(11), `day_of_week` int(11), `time_open` int(11), `time_closed` int(11), `created_at` datetime NOT NULL, `updated_at` datetime NOT NULL) ENGINE=InnoDB
  [1m[36m (0.4ms)[0m  [1mINSERT INTO `schema_migrations` (`version`) VALUES ('20120830101034')[0m
Migrating to AddPriceToRestaurant (20120904103954)
  [1m[35m (13.9ms)[0m  ALTER TABLE `restaurants` ADD `price` decimal DEFAULT 0
  [1m[36m (0.5ms)[0m  [1mINSERT INTO `schema_migrations` (`version`) VALUES ('20120904103954')[0m
Migrating to AddAvatarUidToUsers (20120904110732)
  [1m[35m (93.2ms)[0m  ALTER TABLE `users` ADD `avatar_uid` varchar(255)
  [1m[36m (0.9ms)[0m  [1mINSERT INTO `schema_migrations` (`version`) VALUES ('20120904110732')[0m
Migrating to AddAvatarNameToUsers (20120904110804)
  [1m[35m (67.7ms)[0m  ALTER TABLE `users` ADD `avatar_name` varchar(255)
  [1m[36m (0.4ms)[0m  [1mINSERT INTO `schema_migrations` (`version`) VALUES ('20120904110804')[0m
Migrating to RemoveAvatarFromUsers (20120905071514)
  [1m[35m (114.5ms)[0m  ALTER TABLE `users` DROP `avatar`
  [1m[36m (11.8ms)[0m  [1mINSERT INTO `schema_migrations` (`version`) VALUES ('20120905071514')[0m
Migrating to CreateSimpleCaptchaData (20120906132419)
  [1m[35m (17.7ms)[0m  CREATE TABLE `simple_captcha_data` (`id` int(11) DEFAULT NULL auto_increment PRIMARY KEY, `key` varchar(40), `value` varchar(6), `created_at` datetime NOT NULL, `updated_at` datetime NOT NULL) ENGINE=InnoDB
  [1m[36m (8.4ms)[0m  [1mCREATE INDEX `idx_key` ON `simple_captcha_data` (`key`)[0m
  [1m[35m (0.8ms)[0m  INSERT INTO `schema_migrations` (`version`) VALUES ('20120906132419')
Migrating to ChangeDataTypeForRatingReviews (20120909104219)
  [1m[36m (45.9ms)[0m  [1mALTER TABLE `reviews` CHANGE `rating` `rating` float DEFAULT NULL[0m
  [1m[35m (0.6ms)[0m  INSERT INTO `schema_migrations` (`version`) VALUES ('20120909104219')
Migrating to AddMenuToRestaurant (20120910073101)
  [1m[36m (24.8ms)[0m  [1mALTER TABLE `restaurants` ADD `menu_uid` varchar(255)[0m
  [1m[35m (51.0ms)[0m  ALTER TABLE `restaurants` ADD `menu_name` varchar(255)
  [1m[36m (1.4ms)[0m  [1mINSERT INTO `schema_migrations` (`version`) VALUES ('20120910073101')[0m
Migrating to CreateBasicsPages (20120910092737)
  [1m[35m (17.9ms)[0m  CREATE TABLE `basics_pages` (`id` int(11) DEFAULT NULL auto_increment PRIMARY KEY, `page_name` varchar(255), `page_content` text, `created_at` datetime NOT NULL, `updated_at` datetime NOT NULL) ENGINE=InnoDB
  [1m[36m (2.9ms)[0m  [1mINSERT INTO `schema_migrations` (`version`) VALUES ('20120910092737')[0m
Migrating to CreateFilterTypes (20120910104054)
  [1m[35m (21.9ms)[0m  CREATE TABLE `filter_types` (`id` int(11) DEFAULT NULL auto_increment PRIMARY KEY, `name` varchar(255), `created_at` datetime NOT NULL, `updated_at` datetime NOT NULL) ENGINE=InnoDB
  [1m[36m (2.8ms)[0m  [1mINSERT INTO `schema_migrations` (`version`) VALUES ('20120910104054')[0m
Migrating to CreateFilterTypesRestaurant (20120910104249)
  [1m[35m (9.3ms)[0m  CREATE TABLE `filter_types_restaurants` (`filter_type_id` int(11), `restaurant_id` int(11), `created_at` datetime NOT NULL, `updated_at` datetime NOT NULL) ENGINE=InnoDB
  [1m[36m (17.2ms)[0m  [1mALTER TABLE `filters` ADD `filter_type_id` int(11)[0m
  [1m[35m (0.6ms)[0m  INSERT INTO `schema_migrations` (`version`) VALUES ('20120910104249')
Migrating to CreateMenus (20120910114555)
  [1m[36m (7.6ms)[0m  [1mCREATE TABLE `menus` (`id` int(11) DEFAULT NULL auto_increment PRIMARY KEY, `user_id` int(11), `restaurant_id` int(11), `menu_uid` varchar(255), `menu_name` varchar(255), `created_at` datetime NOT NULL, `updated_at` datetime NOT NULL) ENGINE=InnoDB[0m
  [1m[35m (0.6ms)[0m  INSERT INTO `schema_migrations` (`version`) VALUES ('20120910114555')
Migrating to AddNameToMenu (20120913093300)
  [1m[36m (14.0ms)[0m  [1mALTER TABLE `menus` ADD `name` varchar(255)[0m
  [1m[35m (0.9ms)[0m  INSERT INTO `schema_migrations` (`version`) VALUES ('20120913093300')
Migrating to AddVisitedDateToReviews (20120913160959)
  [1m[36m (14.3ms)[0m  [1mALTER TABLE `reviews` ADD `visited_date` date[0m
  [1m[35m (13.6ms)[0m  ALTER TABLE `reviews` ADD `terms_conditions` tinyint(1)
  [1m[36m (0.8ms)[0m  [1mINSERT INTO `schema_migrations` (`version`) VALUES ('20120913160959')[0m
Migrating to ChangeDefaultDisableRestaurant (20120914085347)
  [1m[35m (2.9ms)[0m  ALTER TABLE `restaurants` CHANGE `disabled` `disabled` tinyint(1) DEFAULT NULL
  [1m[36m (25.7ms)[0m  [1mALTER TABLE `restaurants` ADD `is_owner` tinyint(1)[0m
  [1m[35m (15.9ms)[0m  ALTER TABLE `restaurants` ADD `contact_note` varchar(255)
  [1m[36m (14.4ms)[0m  [1mALTER TABLE `restaurants` ADD `suggester_name` varchar(255)[0m
  [1m[35m (0.8ms)[0m  INSERT INTO `schema_migrations` (`version`) VALUES ('20120914085347')
Migrating to AddImageTypeToAdminPhotos (20120916171915)
  [1m[36m (12.7ms)[0m  [1mALTER TABLE `admin_photos` ADD `image_type` tinyint(1) DEFAULT 1[0m
  [1m[35m (1.1ms)[0m  INSERT INTO `schema_migrations` (`version`) VALUES ('20120916171915')
Migrating to AddWebsiteToRestaurant (20120919064355)
  [1m[36m (12.7ms)[0m  [1mALTER TABLE `restaurants` ADD `website` varchar(255)[0m
  [1m[35m (19.5ms)[0m  ALTER TABLE `restaurants` ADD `halal_status` text
  [1m[36m (0.6ms)[0m  [1mINSERT INTO `schema_migrations` (`version`) VALUES ('20120919064355')[0m
Migrating to AddIsSubscribedToUser (20120925092845)
  [1m[35m (101.7ms)[0m  ALTER TABLE `users` ADD `is_subscribed` tinyint(1) DEFAULT 1
  [1m[36m (11.5ms)[0m  [1mINSERT INTO `schema_migrations` (`version`) VALUES ('20120925092845')[0m
Migrating to AddShortAddressToRestaurant (20120927043121)
  [1m[35m (26.5ms)[0m  ALTER TABLE `restaurants` ADD `short_address` varchar(255)
  [1m[36m (1.8ms)[0m  [1mINSERT INTO `schema_migrations` (`version`) VALUES ('20120927043121')[0m
Migrating to CreateFriendlyIdSlugs (20121030042736)
  [1m[35m (7.3ms)[0m  CREATE TABLE `friendly_id_slugs` (`id` int(11) DEFAULT NULL auto_increment PRIMARY KEY, `slug` varchar(255) NOT NULL, `sluggable_id` int(11) NOT NULL, `sluggable_type` varchar(40), `created_at` datetime) ENGINE=InnoDB
  [1m[36m (9.8ms)[0m  [1mCREATE INDEX `index_friendly_id_slugs_on_sluggable_id` ON `friendly_id_slugs` (`sluggable_id`)[0m
  [1m[35m (13.4ms)[0m  CREATE UNIQUE INDEX `index_friendly_id_slugs_on_slug_and_sluggable_type` ON `friendly_id_slugs` (`slug`, `sluggable_type`)
  [1m[36m (14.2ms)[0m  [1mCREATE INDEX `index_friendly_id_slugs_on_sluggable_type` ON `friendly_id_slugs` (`sluggable_type`)[0m
  [1m[35m (0.4ms)[0m  INSERT INTO `schema_migrations` (`version`) VALUES ('20121030042736')
Migrating to AddSlugToRestaurants (20121030042759)
  [1m[36m (15.4ms)[0m  [1mALTER TABLE `restaurants` ADD `slug` varchar(255)[0m
  [1m[35m (0.8ms)[0m  INSERT INTO `schema_migrations` (`version`) VALUES ('20121030042759')
Migrating to AddSpecialDealToRestaurant (20130710100004)
  [1m[36m (14.7ms)[0m  [1mALTER TABLE `restaurants` ADD `special_deal` text[0m
  [1m[35m (0.9ms)[0m  INSERT INTO `schema_migrations` (`version`) VALUES ('20130710100004')
Migrating to AddFeatureReviewToReview (20131211090826)
  [1m[36m (13.1ms)[0m  [1mALTER TABLE `reviews` ADD `feature_review` tinyint(1) DEFAULT 0[0m
  [1m[35m (16.1ms)[0m  ALTER TABLE `reviews` ADD `feature_review_set_at` date
  [1m[36m (0.7ms)[0m  [1mINSERT INTO `schema_migrations` (`version`) VALUES ('20131211090826')[0m
Migrating to AddSocialMediaLinkToRestaurant (20131213035001)
  [1m[35m (22.4ms)[0m  ALTER TABLE `restaurants` ADD `facebook_link` varchar(255)
  [1m[36m (13.9ms)[0m  [1mALTER TABLE `restaurants` ADD `twitter_link` varchar(255)[0m
  [1m[35m (12.6ms)[0m  ALTER TABLE `restaurants` ADD `pinterest_link` varchar(255)
  [1m[36m (1.0ms)[0m  [1mINSERT INTO `schema_migrations` (`version`) VALUES ('20131213035001')[0m
Migrating to CreateRestaurantTemps (20131223030922)
  [1m[35m (7.2ms)[0m  CREATE TABLE `restaurant_temps` (`id` int(11) DEFAULT NULL auto_increment PRIMARY KEY, `name` varchar(255), `address` varchar(255), `description` text, `phone` varchar(255), `email` varchar(255), `user_id` int(11), `deliverable` tinyint(1), `shisha_allow` tinyint(1), `disabled` tinyint(1) DEFAULT 0, `price` decimal DEFAULT 0, `website` varchar(255), `halal_status` text, `special_deal` text, `lat` decimal(16,13), `lng` decimal(16,13), `district` varchar(255), `city` varchar(255), `postcode` varchar(255), `country` varchar(255), `short_address` varchar(255), `contact_note` varchar(255), `suggester_name` varchar(255), `is_owner` tinyint(1), `facebook_link` varchar(255), `twitter_link` varchar(255), `pinterest_link` varchar(255), `restaurant_id` int(11), `slug` varchar(255), `direction` varchar(255), `created_at` datetime NOT NULL, `updated_at` datetime NOT NULL) ENGINE=InnoDB
  [1m[36m (0.4ms)[0m  [1mINSERT INTO `schema_migrations` (`version`) VALUES ('20131223030922')[0m
Migrating to CreateFiltersRestaurantTemps (20131223083429)
  [1m[35m (6.0ms)[0m  CREATE TABLE `filters_restaurant_temps` (`filter_id` int(11), `restaurant_temp_id` int(11), `created_at` datetime NOT NULL, `updated_at` datetime NOT NULL) ENGINE=InnoDB
  [1m[36m (0.4ms)[0m  [1mINSERT INTO `schema_migrations` (`version`) VALUES ('20131223083429')[0m
Migrating to AddRestaurantTempIdToSchedule (20131223083845)
  [1m[35m (11.9ms)[0m  ALTER TABLE `schedules` ADD `restaurant_temp_id` int(11)
  [1m[36m (0.4ms)[0m  [1mINSERT INTO `schema_migrations` (`version`) VALUES ('20131223083845')[0m
Migrating to AddWaitingForApproveChangeToRestaurant (20131223090222)
  [1m[35m (31.3ms)[0m  ALTER TABLE `restaurants` ADD `waiting_for_approve_change` tinyint(1) DEFAULT 0
  [1m[36m (0.4ms)[0m  [1mINSERT INTO `schema_migrations` (`version`) VALUES ('20131223090222')[0m
Migrating to AddReplyContentUserReplyToReview (20131224024320)
  [1m[35m (29.1ms)[0m  ALTER TABLE `reviews` ADD `reply_content` text
  [1m[36m (46.0ms)[0m  [1mALTER TABLE `reviews` ADD `user_reply` int(11)[0m
  [1m[35m (0.5ms)[0m  INSERT INTO `schema_migrations` (`version`) VALUES ('20131224024320')
Migrating to CreateOffers (20131226042850)
  [1m[36m (15.2ms)[0m  [1mCREATE TABLE `offers` (`id` int(11) DEFAULT NULL auto_increment PRIMARY KEY, `offer_content` text, `restaurant_id` int(11), `time_available` int(11), `time_start_offer` int(11), `created_at` datetime NOT NULL, `updated_at` datetime NOT NULL) ENGINE=InnoDB[0m
  [1m[35m (0.5ms)[0m  INSERT INTO `schema_migrations` (`version`) VALUES ('20131226042850')
Migrating to AddStartdayEnddayStarttimeEndtimeToOffer (20131230094314)
  [1m[36m (15.6ms)[0m  [1mALTER TABLE `offers` ADD `start_day` text[0m
  [1m[35m (18.6ms)[0m  ALTER TABLE `offers` ADD `end_day` text
  [1m[36m (15.7ms)[0m  [1mALTER TABLE `offers` ADD `start_time` varchar(255)[0m
  [1m[35m (25.2ms)[0m  ALTER TABLE `offers` ADD `end_time` varchar(255)
  [1m[36m (0.5ms)[0m  [1mINSERT INTO `schema_migrations` (`version`) VALUES ('20131230094314')[0m
Migrating to AddRestaurantTempIdToPhoto (20140106034924)
  [1m[35m (50.1ms)[0m  ALTER TABLE `photos` ADD `restaurant_temp_id` int(11)
  [1m[36m (0.5ms)[0m  [1mINSERT INTO `schema_migrations` (`version`) VALUES ('20140106034924')[0m
Migrating to AddScheduleTypeToSchedules (20140109030030)
  [1m[35m (39.2ms)[0m  ALTER TABLE `schedules` ADD `schedule_type` varchar(255) DEFAULT 'daily'
  [1m[36m (0.5ms)[0m  [1mINSERT INTO `schema_migrations` (`version`) VALUES ('20140109030030')[0m
Migrating to AddSuggesterInfoToRestaurant (20140111080001)
  [1m[35m (40.8ms)[0m  ALTER TABLE `restaurants` ADD `suggester_email` varchar(255)
  [1m[36m (44.9ms)[0m  [1mALTER TABLE `restaurants` ADD `suggester_phone` varchar(255)[0m
  [1m[35m (0.5ms)[0m  INSERT INTO `schema_migrations` (`version`) VALUES ('20140111080001')
Migrating to AddTimePublishToOffers (20140115043151)
  [1m[36m (61.5ms)[0m  [1mALTER TABLE `offers` ADD `date_publish` varchar(255)[0m
  [1m[35m (40.1ms)[0m  ALTER TABLE `offers` ADD `time_publish` int(11)
  [1m[36m (0.6ms)[0m  [1mINSERT INTO `schema_migrations` (`version`) VALUES ('20140115043151')[0m
Migrating to ChangeFormatInOffer (20140115061637)
  [1m[35m (38.3ms)[0m  ALTER TABLE `offers` CHANGE `time_available` `time_available` varchar(255) DEFAULT NULL
  [1m[36m (10.0ms)[0m  [1mALTER TABLE `offers` CHANGE `time_start_offer` `time_start_offer` varchar(255) DEFAULT NULL[0m
  [1m[35m (11.1ms)[0m  ALTER TABLE `offers` DROP `start_day`
  [1m[36m (12.6ms)[0m  [1mALTER TABLE `offers` ADD `start_date` int(11)[0m
  [1m[35m (13.0ms)[0m  ALTER TABLE `offers` DROP `end_day`
  [1m[36m (14.4ms)[0m  [1mALTER TABLE `offers` ADD `end_date` int(11)[0m
  [1m[35m (12.4ms)[0m  ALTER TABLE `offers` CHANGE `start_time` `start_time` int(11) DEFAULT NULL
  [1m[36m (10.5ms)[0m  [1mALTER TABLE `offers` CHANGE `end_time` `end_time` int(11) DEFAULT NULL[0m
  [1m[35m (0.4ms)[0m  INSERT INTO `schema_migrations` (`version`) VALUES ('20140115061637')
Migrating to AddApproveToOffer (20140116070841)
  [1m[36m (13.4ms)[0m  [1mALTER TABLE `offers` ADD `approve` tinyint(1) DEFAULT 0[0m
  [1m[35m (19.3ms)[0m  ALTER TABLE `offers` ADD `reject` tinyint(1) DEFAULT 0
  [1m[36m (0.6ms)[0m  [1mINSERT INTO `schema_migrations` (`version`) VALUES ('20140116070841')[0m
Migrating to AddApproveReplyToReview (20140117061635)
  [1m[35m (40.9ms)[0m  ALTER TABLE `reviews` ADD `approve_reply` tinyint(1)
  [1m[36m (0.6ms)[0m  [1mINSERT INTO `schema_migrations` (`version`) VALUES ('20140117061635')[0m
Migrating to CreateSubscriptions (20140118040432)
  [1m[35m (22.7ms)[0m  CREATE TABLE `subscriptions` (`id` int(11) DEFAULT NULL auto_increment PRIMARY KEY, `user_id` int(11), `ip_address` varchar(255), `first_name` varchar(255), `last_name` varchar(255), `card_type` varchar(255), `card_expires_on` date, `action` varchar(255), `amount` int(11), `success` tinyint(1), `authorization` varchar(255), `message` varchar(255), `params` text, `created_at` datetime NOT NULL, `updated_at` datetime NOT NULL) ENGINE=InnoDB
  [1m[36m (0.5ms)[0m  [1mINSERT INTO `schema_migrations` (`version`) VALUES ('20140118040432')[0m
Migrating to CreatePlans (20140118041153)
  [1m[35m (5.8ms)[0m  CREATE TABLE `plans` (`id` int(11) DEFAULT NULL auto_increment PRIMARY KEY, `name` varchar(255), `amount` int(11), `plan_type_id` int(11), `created_at` datetime NOT NULL, `updated_at` datetime NOT NULL) ENGINE=InnoDB
  [1m[36m (0.8ms)[0m  [1mINSERT INTO `schema_migrations` (`version`) VALUES ('20140118041153')[0m
Migrating to CreatePlanTypes (20140118041428)
  [1m[35m (5.8ms)[0m  CREATE TABLE `plan_types` (`id` int(11) DEFAULT NULL auto_increment PRIMARY KEY, `name` varchar(255), `number_of_months` int(11), `created_at` datetime NOT NULL, `updated_at` datetime NOT NULL) ENGINE=InnoDB
  [1m[36m (1.1ms)[0m  [1mINSERT INTO `schema_migrations` (`version`) VALUES ('20140118041428')[0m
Migrating to AddCardNumberAndCardVerificationToSubscription (20140118073636)
  [1m[35m (18.7ms)[0m  ALTER TABLE `subscriptions` ADD `card_number` int(11)
  [1m[36m (121.3ms)[0m  [1mALTER TABLE `subscriptions` ADD `card_verification` int(11)[0m
  [1m[35m (4.4ms)[0m  INSERT INTO `schema_migrations` (`version`) VALUES ('20140118073636')
Migrating to AddExpressTokenToSubscription (20140118080228)
  [1m[36m (155.9ms)[0m  [1mALTER TABLE `subscriptions` ADD `express_token` varchar(255)[0m
  [1m[35m (116.1ms)[0m  ALTER TABLE `subscriptions` ADD `express_payer_id` varchar(255)
  [1m[36m (0.9ms)[0m  [1mINSERT INTO `schema_migrations` (`version`) VALUES ('20140118080228')[0m
Migrating to AddPlanIdToSubscription (20140118104008)
  [1m[35m (29.5ms)[0m  ALTER TABLE `subscriptions` ADD `plan_id` int(11)
  [1m[36m (1.0ms)[0m  [1mINSERT INTO `schema_migrations` (`version`) VALUES ('20140118104008')[0m
Migrating to AddTextToPhoto (20140118104051)
  [1m[35m (67.0ms)[0m  ALTER TABLE `photos` ADD `text_title` varchar(255)
  [1m[36m (30.4ms)[0m  [1mALTER TABLE `photos` ADD `text_content` text[0m
  [1m[35m (22.1ms)[0m  ALTER TABLE `admin_photos` ADD `text_title` varchar(255)
  [1m[36m (27.3ms)[0m  [1mALTER TABLE `admin_photos` ADD `text_content` text[0m
  [1m[35m (0.7ms)[0m  INSERT INTO `schema_migrations` (`version`) VALUES ('20140118104051')
Migrating to AddRestaurantOwnerRoleToUser (20140120045737)
  [1m[36m (124.9ms)[0m  [1mALTER TABLE `users` ADD `restaurant_owner_role` tinyint(1) DEFAULT 0[0m
  [1m[35m (0.7ms)[0m  INSERT INTO `schema_migrations` (`version`) VALUES ('20140120045737')
Migrating to AddSugguestEmailToRestaurantTemp (20140121023319)
  [1m[36m (78.3ms)[0m  [1mALTER TABLE `restaurant_temps` ADD `suggester_email` varchar(255)[0m
  [1m[35m (19.5ms)[0m  ALTER TABLE `restaurant_temps` ADD `suggester_phone` varchar(255)
  [1m[36m (4.5ms)[0m  [1mINSERT INTO `schema_migrations` (`version`) VALUES ('20140121023319')[0m
Migrating to AddCodeToFilterType (20140121061831)
  [1m[35m (48.9ms)[0m  ALTER TABLE `filter_types` ADD `code` varchar(255)
  [1m[36m (0.7ms)[0m  [1mINSERT INTO `schema_migrations` (`version`) VALUES ('20140121061831')[0m
Migrating to AddIndexToFilterType (20140123042213)
  [1m[35m (63.2ms)[0m  ALTER TABLE `filter_types` ADD `index_order` int(11)
  [1m[36m (1.1ms)[0m  [1mINSERT INTO `schema_migrations` (`version`) VALUES ('20140123042213')[0m
Migrating to AddExpireTimeToSubscription (20140123080601)
  [1m[35m (22.5ms)[0m  ALTER TABLE `subscriptions` ADD `expire_time` datetime
  [1m[36m (0.6ms)[0m  [1mINSERT INTO `schema_migrations` (`version`) VALUES ('20140123080601')[0m
Migrating to AddDescriptionToPlan (20140124025648)
  [1m[35m (23.2ms)[0m  ALTER TABLE `plans` ADD `description` text
  [1m[36m (1.2ms)[0m  [1mINSERT INTO `schema_migrations` (`version`) VALUES ('20140124025648')[0m
Migrating to AddHyperlinkToPhoto (20140210034922)
  [1m[35m (30.8ms)[0m  ALTER TABLE `photos` ADD `text_hyperlink` varchar(255)
  [1m[36m (36.3ms)[0m  [1mALTER TABLE `admin_photos` ADD `text_hyperlink` varchar(255)[0m
  [1m[35m (0.5ms)[0m  INSERT INTO `schema_migrations` (`version`) VALUES ('20140210034922')
Migrating to AddRecurringStatusToSubscription (20140222061611)
  [1m[36m (29.3ms)[0m  [1mALTER TABLE `subscriptions` ADD `recurring_status` tinyint(1) DEFAULT 1[0m
  [1m[35m (57.0ms)[0m  ALTER TABLE `subscriptions` ADD `account_id` varchar(255)
  [1m[36m (0.9ms)[0m  [1mINSERT INTO `schema_migrations` (`version`) VALUES ('20140222061611')[0m
Migrating to AddStatusToPhoto (20140224063855)
  [1m[35m (43.3ms)[0m  ALTER TABLE `photos` ADD `status` int(11) DEFAULT 0
  [1m[36m (0.5ms)[0m  [1mINSERT INTO `schema_migrations` (`version`) VALUES ('20140224063855')[0m
Migrating to AddMoreToSubscription (20140225064855)
  [1m[35m (20.8ms)[0m  ALTER TABLE `subscriptions` ADD `transaction_id` varchar(255)
  [1m[36m (11.9ms)[0m  [1mALTER TABLE `subscriptions` ADD `profile_id` varchar(255)[0m
  [1m[35m (0.6ms)[0m  INSERT INTO `schema_migrations` (`version`) VALUES ('20140225064855')
Migrating to AddReplyTimeToReview (20140226020308)
  [1m[36m (32.0ms)[0m  [1mALTER TABLE `reviews` ADD `reply_time` datetime[0m
  [1m[35m (0.5ms)[0m  INSERT INTO `schema_migrations` (`version`) VALUES ('20140226020308')
Migrating to AddPaypalStatusToSubcription (20140303094950)
  [1m[36m (137.2ms)[0m  [1mALTER TABLE `subscriptions` ADD `paypal_status` int(11)[0m
  [1m[35m (3.2ms)[0m  INSERT INTO `schema_migrations` (`version`) VALUES ('20140303094950')
Migrating to AddPostcodeToUser (20140305085528)
  [1m[36m (120.8ms)[0m  [1mALTER TABLE `users` ADD `postcode` varchar(255)[0m
  [1m[35m (0.5ms)[0m  INSERT INTO `schema_migrations` (`version`) VALUES ('20140305085528')
Migrating to AddRequestToRestaurant (20140318105804)
  [1m[36m (63.1ms)[0m  [1mALTER TABLE `restaurants` ADD `request_approve_photo` tinyint(1) DEFAULT 0[0m
  [1m[35m (1.0ms)[0m  INSERT INTO `schema_migrations` (`version`) VALUES ('20140318105804')
Migrating to CreateTransactions (20140414073113)
  [1m[36m (8.8ms)[0m  [1mCREATE TABLE `transactions` (`id` int(11) DEFAULT NULL auto_increment PRIMARY KEY, `subscription_id` int(11), `transaction_id` varchar(255), `transaction_data` text, `amount` varchar(255), `next_billing_cycle` datetime, `transaction_status` int(11), `created_at` datetime NOT NULL, `updated_at` datetime NOT NULL) ENGINE=InnoDB[0m
  [1m[35m (0.5ms)[0m  INSERT INTO `schema_migrations` (`version`) VALUES ('20140414073113')
Migrating to AddInstagramToRestaurant (20140618093534)
  [1m[36m (14.5ms)[0m  [1mALTER TABLE `restaurants` ADD `instagram_link` varchar(255)[0m
  [1m[35m (0.5ms)[0m  INSERT INTO `schema_migrations` (`version`) VALUES ('20140618093534')
Migrating to AddImageToOffer (20140620064831)
  [1m[36m (17.2ms)[0m  [1mALTER TABLE `offers` ADD `image_uid` varchar(255)[0m
  [1m[35m (18.3ms)[0m  ALTER TABLE `offers` ADD `image_name` varchar(255)
  [1m[36m (0.6ms)[0m  [1mINSERT INTO `schema_migrations` (`version`) VALUES ('20140620064831')[0m
Migrating to AddIntegramLinkToRestaurantTemp (20141016072850)
  [1m[35m (17.9ms)[0m  ALTER TABLE `restaurant_temps` ADD `instagram_link` varchar(255)
  [1m[36m (0.6ms)[0m  [1mINSERT INTO `schema_migrations` (`version`) VALUES ('20141016072850')[0m
Migrating to AddGemHunterToUsers (20141027023853)
  [1m[35m (85.6ms)[0m  ALTER TABLE `users` ADD `gem_hunter` tinyint(1) DEFAULT 0
  [1m[36m (0.4ms)[0m  [1mINSERT INTO `schema_migrations` (`version`) VALUES ('20141027023853')[0m
Migrating to AddIndexOrderToFilters (20141029143508)
  [1m[35m (16.2ms)[0m  ALTER TABLE `filters` ADD `index_order` int(11) DEFAULT 99
  [1m[36m (1.2ms)[0m  [1mINSERT INTO `schema_migrations` (`version`) VALUES ('20141029143508')[0m
Migrating to AddDeviceTypeToUser (20141113080758)
  [1m[35m (24.6ms)[0m  ALTER TABLE `users` ADD `device_token` varchar(255)
  [1m[36m (22.0ms)[0m  [1mALTER TABLE `users` ADD `device_type` int(11)[0m
  [1m[35m (62.4ms)[0m  ALTER TABLE `users` ADD `fb_access_token` varchar(255)
  [1m[36m (108.4ms)[0m  [1mALTER TABLE `users` ADD `avatar_fb_url` varchar(255)[0m
  [1m[35m (0.9ms)[0m  INSERT INTO `schema_migrations` (`version`) VALUES ('20141113080758')
Migrating to AddPageUidToBasicPage (20141114090841)
  [1m[36m (31.1ms)[0m  [1mALTER TABLE `basics_pages` ADD `page_uid` varchar(255)[0m
  [1m[35m (1.7ms)[0m  INSERT INTO `schema_migrations` (`version`) VALUES ('20141114090841')
Migrating to AddGemHunterUrlToUser (20141118091319)
  [1m[36m (93.0ms)[0m  [1mALTER TABLE `users` ADD `gem_hunter_wordpress_url` varchar(255)[0m
  [1m[35m (12.6ms)[0m  INSERT INTO `schema_migrations` (`version`) VALUES ('20141118091319')
Migrating to CreateGiftcards (20150702214222)
  [1m[36m (16.8ms)[0m  [1mCREATE TABLE `giftcards` (`id` int(11) DEFAULT NULL auto_increment PRIMARY KEY, `code` varchar(255), `pounds` int(11), `pence` int(11), `created_at` datetime NOT NULL, `updated_at` datetime NOT NULL) ENGINE=InnoDB[0m
  [1m[35m (0.5ms)[0m  INSERT INTO `schema_migrations` (`version`) VALUES ('20150702214222')
Migrating to CreateGiftcardRedemptions (20150702214247)
  [1m[36m (7.1ms)[0m  [1mCREATE TABLE `giftcard_redemptions` (`id` int(11) DEFAULT NULL auto_increment PRIMARY KEY, `restaurant_id` int(11), `giftcard_id` int(11), `pounds` int(11), `pence` int(11), `deleted` tinyint(1), `created_at` datetime NOT NULL, `updated_at` datetime NOT NULL) ENGINE=InnoDB[0m
  [1m[35m (0.5ms)[0m  INSERT INTO `schema_migrations` (`version`) VALUES ('20150702214247')
Migrating to CreateGiftcardRestaurantMemberships (20150707173045)
  [1m[36m (7.1ms)[0m  [1mCREATE TABLE `giftcard_restaurant_memberships` (`id` int(11) DEFAULT NULL auto_increment PRIMARY KEY, `restaurant_id` int(11)) ENGINE=InnoDB[0m
  [1m[35m (0.5ms)[0m  INSERT INTO `schema_migrations` (`version`) VALUES ('20150707173045')
Migrating to CreateCheckins (20150723184603)
  [1m[36m (7.0ms)[0m  [1mCREATE TABLE `checkins` (`id` int(11) DEFAULT NULL auto_increment PRIMARY KEY, `user_id` int(11), `restaurant_id` int(11), `created_at` datetime NOT NULL, `updated_at` datetime NOT NULL) ENGINE=InnoDB[0m
  [1m[35m (0.5ms)[0m  INSERT INTO `schema_migrations` (`version`) VALUES ('20150723184603')
Migrating to AddSatisfiedToReviews (20150723184750)
  [1m[36m (23.5ms)[0m  [1mALTER TABLE `reviews` ADD `satisfied` tinyint(1)[0m
  [1m[35m (0.5ms)[0m  INSERT INTO `schema_migrations` (`version`) VALUES ('20150723184750')
Migrating to CreateCollections (20150903122620)
  [1m[36m (16.3ms)[0m  [1mCREATE TABLE `collections` (`id` int(11) DEFAULT NULL auto_increment PRIMARY KEY, `name` varchar(255), `description` text, `image_url` varchar(255), `created_at` datetime NOT NULL, `updated_at` datetime NOT NULL) ENGINE=InnoDB[0m
  [1m[35m (0.6ms)[0m  INSERT INTO `schema_migrations` (`version`) VALUES ('20150903122620')
Migrating to CreateCollectionRestaurants (20150903132633)
  [1m[36m (9.2ms)[0m  [1mCREATE TABLE `collection_restaurants` (`id` int(11) DEFAULT NULL auto_increment PRIMARY KEY, `collection_id` int(11), `restaurant_id` int(11), `order` int(11)) ENGINE=InnoDB[0m
  [1m[35m (0.6ms)[0m  INSERT INTO `schema_migrations` (`version`) VALUES ('20150903132633')
Migrating to AddOwnerHasReadToReviews (20150904145931)
  [1m[36m (15.8ms)[0m  [1mALTER TABLE `reviews` ADD `owner_has_read` tinyint(1) DEFAULT 0[0m
  [1m[35m (1.5ms)[0m  INSERT INTO `schema_migrations` (`version`) VALUES ('20150904145931')
Migrating to AddRecurringOffers (20150914220200)
  [1m[36m (15.7ms)[0m  [1mALTER TABLE `offers` ADD `is_onetime` tinyint(1) DEFAULT 0[0m
  [1m[35m (1.5ms)[0m  INSERT INTO `schema_migrations` (`version`) VALUES ('20150914220200')
Migrating to CreateCollectionImages (20160115132621)
  [1m[36m (14.9ms)[0m  [1mCREATE TABLE `collection_images` (`id` int(11) DEFAULT NULL auto_increment PRIMARY KEY, `collection_id` int(11), `image_uid` varchar(255), `image_name` varchar(255), `text_hyperlink` varchar(255), `text_title` varchar(255), `text_content` text, `created_at` datetime NOT NULL, `updated_at` datetime NOT NULL) ENGINE=InnoDB[0m
  [1m[35m (0.5ms)[0m  INSERT INTO `schema_migrations` (`version`) VALUES ('20160115132621')
Migrating to AddDisabledToCollections (20160117060649)
  [1m[36m (13.3ms)[0m  [1mALTER TABLE `collections` ADD `disabled` tinyint(1) DEFAULT 0[0m
  [1m[35m (0.7ms)[0m  INSERT INTO `schema_migrations` (`version`) VALUES ('20160117060649')
  [1m[36m (0.2ms)[0m  [1mSELECT `schema_migrations`.`version` FROM `schema_migrations` [0m
Connecting to database specified by database.yml
DEPRECATION WARNING: Passing :tag, :class and others to use is deprecated. Please invoke b.use :label, :wrap_with => {:class=>"simple_label"} instead. (called from block (2 levels) in <top (required)> at /Users/kevinmuller/halalgems_backend/config/initializers/simple_form.rb:67)
  [1m[36m (0.2ms)[0m  [1mSELECT `schema_migrations`.`version` FROM `schema_migrations` [0m
Migrating to CreateUsers (20120822030811)
Migrating to AddDeviseToUsers (20120822030947)
Migrating to AddRoleToUsers (20120822035539)
Migrating to AddColumnsToUsers (20120822040907)
Migrating to AddNameToUsers (20120822064044)
Migrating to AddSessionsTable (20120822072201)
Migrating to AddJoinMailingListToUsers (20120822163135)
Migrating to CreateRestaurants (20120823045735)
Migrating to CreatePhotos (20120823082051)
Migrating to CreateReviews (20120824034307)
Migrating to CreateFavourites (20120824034907)
Migrating to AddAttributesToRestaurant (20120824092649)
Migrating to AddDirectionToRestaurant (20120828032047)
Migrating to CreateAdminPhotos (20120828033854)
Migrating to AddRatingToRestaurant (20120828083737)
Migrating to CreateFilters (20120829090608)
Migrating to CreateFiltersRestaurants (20120830045136)
Migrating to CreateSchedules (20120830101034)
Migrating to AddPriceToRestaurant (20120904103954)
Migrating to AddAvatarUidToUsers (20120904110732)
Migrating to AddAvatarNameToUsers (20120904110804)
Migrating to RemoveAvatarFromUsers (20120905071514)
Migrating to CreateSimpleCaptchaData (20120906132419)
Migrating to ChangeDataTypeForRatingReviews (20120909104219)
Migrating to AddMenuToRestaurant (20120910073101)
Migrating to CreateBasicsPages (20120910092737)
Migrating to CreateFilterTypes (20120910104054)
Migrating to CreateFilterTypesRestaurant (20120910104249)
Migrating to CreateMenus (20120910114555)
Migrating to AddNameToMenu (20120913093300)
Migrating to AddVisitedDateToReviews (20120913160959)
Migrating to ChangeDefaultDisableRestaurant (20120914085347)
Migrating to AddImageTypeToAdminPhotos (20120916171915)
Migrating to AddWebsiteToRestaurant (20120919064355)
Migrating to AddIsSubscribedToUser (20120925092845)
Migrating to AddShortAddressToRestaurant (20120927043121)
Migrating to CreateFriendlyIdSlugs (20121030042736)
Migrating to AddSlugToRestaurants (20121030042759)
Migrating to AddSpecialDealToRestaurant (20130710100004)
Migrating to AddFeatureReviewToReview (20131211090826)
Migrating to AddSocialMediaLinkToRestaurant (20131213035001)
Migrating to CreateRestaurantTemps (20131223030922)
Migrating to CreateFiltersRestaurantTemps (20131223083429)
Migrating to AddRestaurantTempIdToSchedule (20131223083845)
Migrating to AddWaitingForApproveChangeToRestaurant (20131223090222)
Migrating to AddReplyContentUserReplyToReview (20131224024320)
Migrating to CreateOffers (20131226042850)
Migrating to AddStartdayEnddayStarttimeEndtimeToOffer (20131230094314)
Migrating to AddRestaurantTempIdToPhoto (20140106034924)
Migrating to AddScheduleTypeToSchedules (20140109030030)
Migrating to AddSuggesterInfoToRestaurant (20140111080001)
Migrating to AddTimePublishToOffers (20140115043151)
Migrating to ChangeFormatInOffer (20140115061637)
Migrating to AddApproveToOffer (20140116070841)
Migrating to AddApproveReplyToReview (20140117061635)
Migrating to CreateSubscriptions (20140118040432)
Migrating to CreatePlans (20140118041153)
Migrating to CreatePlanTypes (20140118041428)
Migrating to AddCardNumberAndCardVerificationToSubscription (20140118073636)
Migrating to AddExpressTokenToSubscription (20140118080228)
Migrating to AddPlanIdToSubscription (20140118104008)
Migrating to AddTextToPhoto (20140118104051)
Migrating to AddRestaurantOwnerRoleToUser (20140120045737)
Migrating to AddSugguestEmailToRestaurantTemp (20140121023319)
Migrating to AddCodeToFilterType (20140121061831)
Migrating to AddIndexToFilterType (20140123042213)
Migrating to AddExpireTimeToSubscription (20140123080601)
Migrating to AddDescriptionToPlan (20140124025648)
Migrating to AddHyperlinkToPhoto (20140210034922)
Migrating to AddRecurringStatusToSubscription (20140222061611)
Migrating to AddStatusToPhoto (20140224063855)
Migrating to AddMoreToSubscription (20140225064855)
Migrating to AddReplyTimeToReview (20140226020308)
Migrating to AddPaypalStatusToSubcription (20140303094950)
Migrating to AddPostcodeToUser (20140305085528)
Migrating to AddRequestToRestaurant (20140318105804)
Migrating to CreateTransactions (20140414073113)
Migrating to AddInstagramToRestaurant (20140618093534)
Migrating to AddImageToOffer (20140620064831)
Migrating to AddIntegramLinkToRestaurantTemp (20141016072850)
Migrating to AddGemHunterToUsers (20141027023853)
Migrating to AddIndexOrderToFilters (20141029143508)
Migrating to AddDeviceTypeToUser (20141113080758)
Migrating to AddPageUidToBasicPage (20141114090841)
Migrating to AddGemHunterUrlToUser (20141118091319)
Migrating to CreateGiftcards (20150702214222)
Migrating to CreateGiftcardRedemptions (20150702214247)
Migrating to CreateGiftcardRestaurantMemberships (20150707173045)
Migrating to CreateCheckins (20150723184603)
  [1m[35m (0.3ms)[0m  CREATE TABLE `checkins` (`id` int(11) DEFAULT NULL auto_increment PRIMARY KEY, `user_id` int(11), `restaurant_id` int(11), `created_at` datetime NOT NULL, `updated_at` datetime NOT NULL) ENGINE=InnoDB
Mysql2::Error: Table 'checkins' already exists: CREATE TABLE `checkins` (`id` int(11) DEFAULT NULL auto_increment PRIMARY KEY, `user_id` int(11), `restaurant_id` int(11), `created_at` datetime NOT NULL, `updated_at` datetime NOT NULL) ENGINE=InnoDB
Connecting to database specified by database.yml
DEPRECATION WARNING: Passing :tag, :class and others to use is deprecated. Please invoke b.use :label, :wrap_with => {:class=>"simple_label"} instead. (called from block (2 levels) in <top (required)> at /Users/kevinmuller/halalgems_backend/config/initializers/simple_form.rb:67)
Connecting to database specified by database.yml
DEPRECATION WARNING: Passing :tag, :class and others to use is deprecated. Please invoke b.use :label, :wrap_with => {:class=>"simple_label"} instead. (called from block (2 levels) in <top (required)> at /Users/kevinmuller/halalgems_backend/config/initializers/simple_form.rb:67)
Connecting to database specified by database.yml
DEPRECATION WARNING: Passing :tag, :class and others to use is deprecated. Please invoke b.use :label, :wrap_with => {:class=>"simple_label"} instead. (called from block (2 levels) in <top (required)> at /Users/kevinmuller/halalgems_backend/config/initializers/simple_form.rb:67)
Connecting to database specified by database.yml
DEPRECATION WARNING: Passing :tag, :class and others to use is deprecated. Please invoke b.use :label, :wrap_with => {:class=>"simple_label"} instead. (called from block (2 levels) in <top (required)> at /Users/kevinmuller/halalgems_backend/config/initializers/simple_form.rb:67)
Connecting to database specified by database.yml
DEPRECATION WARNING: Passing :tag, :class and others to use is deprecated. Please invoke b.use :label, :wrap_with => {:class=>"simple_label"} instead. (called from block (2 levels) in <top (required)> at /Users/kevinmuller/halalgems_backend/config/initializers/simple_form.rb:67)
Connecting to database specified by database.yml
DEPRECATION WARNING: Passing :tag, :class and others to use is deprecated. Please invoke b.use :label, :wrap_with => {:class=>"simple_label"} instead. (called from block (2 levels) in <top (required)> at /Users/kevinmuller/halalgems_backend/config/initializers/simple_form.rb:67)


Started GET "/admin/" for 127.0.0.1 at 2016-01-18 01:59:20 +0100
  [1m[36m (0.3ms)[0m  [1mSELECT COUNT(*) FROM `filter_types` WHERE (code = 'features')[0m
  [1m[35m (0.2ms)[0m  SELECT COUNT(*) FROM `filters` WHERE (code = 'offer')
  [1m[36mFilter Load (0.3ms)[0m  [1mSELECT `filters`.* FROM `filters` WHERE (code = 'offer') LIMIT 1[0m
  [1m[35mFilterType Load (0.2ms)[0m  SELECT `filter_types`.* FROM `filter_types` WHERE (code = 'features') LIMIT 1
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT `filters`.* FROM `filters` WHERE (code = 'offer') LIMIT 1[0m
  [1m[35mCACHE (0.0ms)[0m  SELECT `filter_types`.* FROM `filter_types` WHERE (code = 'features') LIMIT 1
Processing by RestaurantsController#index as HTML
Redirected to http://localhost:3000/users/sign_in
Filter chain halted as :required_user_login rendered or redirected
Completed 302 Found in 18ms (ActiveRecord: 1.9ms)


Started GET "/users/sign_in" for 127.0.0.1 at 2016-01-18 01:59:21 +0100
Processing by SessionsController#new as HTML
  Rendered sessions/new.html.slim within layouts/application (37.4ms)
  Rendered layouts/_header.html.erb (2.6ms)
  Rendered layouts/_main_menu.html.slim (7.7ms)
  Rendered layouts/_sub_main_menu.html.slim (3.9ms)
  Rendered layouts/_flash_messages.html.erb (0.4ms)
  [1m[36mBasicsPage Load (0.2ms)[0m  [1mSELECT `basics_pages`.* FROM `basics_pages` WHERE `basics_pages`.`page_name` = 'Footer' LIMIT 1[0m
  Rendered layouts/_footer.html.slim (21.0ms)
Completed 200 OK in 311ms (Views: 286.8ms | ActiveRecord: 4.4ms)


Started POST "/users/sign_in" for 127.0.0.1 at 2016-01-18 01:59:26 +0100
Processing by SessionsController#create as HTML
  Parameters: {"utf8"=>"âœ“", "authenticity_token"=>"Z/RAQo++w8osERIMRkJtNKDicMpXCHc2iaWIfoxK+0M=", "user"=>{"email"=>"kevin.muller1220@gmail.com", "password"=>"[FILTERED]"}, "button"=>""}
  [1m[35mUser Load (0.3ms)[0m  SELECT `users`.* FROM `users` WHERE `users`.`email` = 'kevin.muller1220@gmail.com' LIMIT 1
Completed 500 Internal Server Error in 24ms

BCrypt::Errors::InvalidHash (invalid hash):
  app/controllers/sessions_controller.rb:21:in `create'


  Rendered /Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_dispatch/middleware/templates/rescues/_trace.erb (0.9ms)
  Rendered /Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_dispatch/middleware/templates/rescues/_request_and_response.erb (0.8ms)
  Rendered /Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_dispatch/middleware/templates/rescues/diagnostics.erb within rescues/layout (41.6ms)


Started POST "/users/sign_in" for 127.0.0.1 at 2016-01-18 02:02:53 +0100
Processing by SessionsController#create as HTML
  Parameters: {"utf8"=>"âœ“", "authenticity_token"=>"Z/RAQo++w8osERIMRkJtNKDicMpXCHc2iaWIfoxK+0M=", "user"=>{"email"=>"kevin.muller1220@gmail.com", "password"=>"[FILTERED]"}, "button"=>""}
  [1m[36mUser Load (0.2ms)[0m  [1mSELECT `users`.* FROM `users` WHERE `users`.`email` = 'kevin.muller1220@gmail.com' LIMIT 1[0m
Completed 500 Internal Server Error in 2ms

BCrypt::Errors::InvalidHash (invalid hash):
  app/controllers/sessions_controller.rb:21:in `create'


  Rendered /Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_dispatch/middleware/templates/rescues/_trace.erb (0.9ms)
  Rendered /Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_dispatch/middleware/templates/rescues/_request_and_response.erb (0.7ms)
  Rendered /Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_dispatch/middleware/templates/rescues/diagnostics.erb within rescues/layout (40.4ms)


Started GET "/users/sign_in" for 127.0.0.1 at 2016-01-18 02:02:54 +0100
Processing by SessionsController#new as HTML
  Rendered sessions/new.html.slim within layouts/application (1.7ms)
  Rendered layouts/_header.html.erb (1.4ms)
  Rendered layouts/_main_menu.html.slim (0.3ms)
  Rendered layouts/_sub_main_menu.html.slim (0.0ms)
  Rendered layouts/_flash_messages.html.erb (0.0ms)
  [1m[35mBasicsPage Load (0.3ms)[0m  SELECT `basics_pages`.* FROM `basics_pages` WHERE `basics_pages`.`page_name` = 'Footer' LIMIT 1
  Rendered layouts/_footer.html.slim (2.8ms)
Completed 200 OK in 58ms (Views: 57.2ms | ActiveRecord: 0.3ms)


Started POST "/users/sign_in" for 127.0.0.1 at 2016-01-18 02:02:57 +0100
Processing by SessionsController#create as HTML
  Parameters: {"utf8"=>"âœ“", "authenticity_token"=>"Z/RAQo++w8osERIMRkJtNKDicMpXCHc2iaWIfoxK+0M=", "user"=>{"email"=>"kevin.muller1220@gmail.com", "password"=>"[FILTERED]"}, "button"=>""}
  [1m[36mUser Load (0.3ms)[0m  [1mSELECT `users`.* FROM `users` WHERE `users`.`email` = 'kevin.muller1220@gmail.com' LIMIT 1[0m
Completed 500 Internal Server Error in 2ms

BCrypt::Errors::InvalidHash (invalid hash):
  app/controllers/sessions_controller.rb:21:in `create'


  Rendered /Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_dispatch/middleware/templates/rescues/_trace.erb (0.9ms)
  Rendered /Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_dispatch/middleware/templates/rescues/_request_and_response.erb (0.8ms)
  Rendered /Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_dispatch/middleware/templates/rescues/diagnostics.erb within rescues/layout (39.1ms)
Connecting to database specified by database.yml
DEPRECATION WARNING: Passing :tag, :class and others to use is deprecated. Please invoke b.use :label, :wrap_with => {:class=>"simple_label"} instead. (called from block (2 levels) in <top (required)> at /Users/kevinmuller/halalgems_backend/config/initializers/simple_form.rb:67)
  [1m[36m (11.1ms)[0m  [1mDROP TABLE `admin_photos`[0m
  [1m[35m (7.6ms)[0m  CREATE TABLE `admin_photos` (`id` int(11) DEFAULT NULL auto_increment PRIMARY KEY, `user_id` int(11), `cover` tinyint(1) DEFAULT 0, `image_uid` varchar(255), `image_name` varchar(255), `created_at` datetime NOT NULL, `updated_at` datetime NOT NULL, `image_type` tinyint(1) DEFAULT 1, `text_title` varchar(255), `text_content` text, `text_hyperlink` varchar(255)) ENGINE=InnoDB
  [1m[36m (1.9ms)[0m  [1mDROP TABLE `basics_pages`[0m
  [1m[35m (4.7ms)[0m  CREATE TABLE `basics_pages` (`id` int(11) DEFAULT NULL auto_increment PRIMARY KEY, `page_name` varchar(255), `page_content` text, `created_at` datetime NOT NULL, `updated_at` datetime NOT NULL, `page_uid` varchar(255)) ENGINE=InnoDB
  [1m[36m (20.1ms)[0m  [1mDROP TABLE `checkins`[0m
  [1m[35m (6.1ms)[0m  CREATE TABLE `checkins` (`id` int(11) DEFAULT NULL auto_increment PRIMARY KEY, `user_id` int(11), `restaurant_id` int(11), `created_at` datetime NOT NULL, `updated_at` datetime NOT NULL) ENGINE=InnoDB
  [1m[36m (18.2ms)[0m  [1mDROP TABLE `collection_images`[0m
  [1m[35m (5.3ms)[0m  CREATE TABLE `collection_images` (`id` int(11) DEFAULT NULL auto_increment PRIMARY KEY, `collection_id` int(11), `image_uid` varchar(255), `image_name` varchar(255), `text_hyperlink` varchar(255), `text_title` varchar(255), `text_content` text, `created_at` datetime NOT NULL, `updated_at` datetime NOT NULL) ENGINE=InnoDB
  [1m[36m (26.9ms)[0m  [1mDROP TABLE `collection_restaurants`[0m
  [1m[35m (6.2ms)[0m  CREATE TABLE `collection_restaurants` (`id` int(11) DEFAULT NULL auto_increment PRIMARY KEY, `collection_id` int(11), `restaurant_id` int(11), `order` int(11)) ENGINE=InnoDB
  [1m[36m (1.6ms)[0m  [1mDROP TABLE `collections`[0m
  [1m[35m (4.8ms)[0m  CREATE TABLE `collections` (`id` int(11) DEFAULT NULL auto_increment PRIMARY KEY, `name` varchar(255), `description` text, `image_url` varchar(255), `created_at` datetime NOT NULL, `updated_at` datetime NOT NULL, `disabled` tinyint(1) DEFAULT 0) ENGINE=InnoDB
  [1m[36m (1.5ms)[0m  [1mDROP TABLE `favourites`[0m
  [1m[35m (5.3ms)[0m  CREATE TABLE `favourites` (`id` int(11) DEFAULT NULL auto_increment PRIMARY KEY, `user_id` int(11), `restaurant_id` int(11), `created_at` datetime NOT NULL, `updated_at` datetime NOT NULL) ENGINE=InnoDB
  [1m[36m (1.8ms)[0m  [1mDROP TABLE `filter_types`[0m
  [1m[35m (6.2ms)[0m  CREATE TABLE `filter_types` (`id` int(11) DEFAULT NULL auto_increment PRIMARY KEY, `name` varchar(255), `created_at` datetime NOT NULL, `updated_at` datetime NOT NULL, `code` varchar(255), `index_order` int(11)) ENGINE=InnoDB
  [1m[36m (12.5ms)[0m  [1mDROP TABLE `filter_types_restaurants`[0m
  [1m[35m (6.3ms)[0m  CREATE TABLE `filter_types_restaurants` (`filter_type_id` int(11), `restaurant_id` int(11), `created_at` datetime NOT NULL, `updated_at` datetime NOT NULL) ENGINE=InnoDB
  [1m[36m (11.0ms)[0m  [1mDROP TABLE `filters`[0m
  [1m[35m (6.7ms)[0m  CREATE TABLE `filters` (`id` int(11) DEFAULT NULL auto_increment PRIMARY KEY, `code` varchar(255), `name` varchar(255), `description` text, `status` tinyint(1) DEFAULT 1, `created_at` datetime NOT NULL, `updated_at` datetime NOT NULL, `filter_type_id` int(11), `index_order` int(11) DEFAULT 99) ENGINE=InnoDB
  [1m[36m (1.6ms)[0m  [1mDROP TABLE `filters_restaurant_temps`[0m
  [1m[35m (11.5ms)[0m  CREATE TABLE `filters_restaurant_temps` (`filter_id` int(11), `restaurant_temp_id` int(11), `created_at` datetime NOT NULL, `updated_at` datetime NOT NULL) ENGINE=InnoDB
  [1m[36m (2.3ms)[0m  [1mDROP TABLE `filters_restaurants`[0m
  [1m[35m (6.6ms)[0m  CREATE TABLE `filters_restaurants` (`filter_id` int(11), `restaurant_id` int(11), `created_at` datetime NOT NULL, `updated_at` datetime NOT NULL) ENGINE=InnoDB
  [1m[36m (2.1ms)[0m  [1mDROP TABLE `friendly_id_slugs`[0m
  [1m[35m (5.9ms)[0m  CREATE TABLE `friendly_id_slugs` (`id` int(11) DEFAULT NULL auto_increment PRIMARY KEY, `slug` varchar(255) NOT NULL, `sluggable_id` int(11) NOT NULL, `sluggable_type` varchar(40), `created_at` datetime) ENGINE=InnoDB
  [1m[36m (9.2ms)[0m  [1mCREATE UNIQUE INDEX `index_friendly_id_slugs_on_slug_and_sluggable_type` ON `friendly_id_slugs` (`slug`, `sluggable_type`)[0m
  [1m[35m (10.0ms)[0m  CREATE INDEX `index_friendly_id_slugs_on_sluggable_id` ON `friendly_id_slugs` (`sluggable_id`)
  [1m[36m (12.0ms)[0m  [1mCREATE INDEX `index_friendly_id_slugs_on_sluggable_type` ON `friendly_id_slugs` (`sluggable_type`)[0m
  [1m[35m (11.8ms)[0m  DROP TABLE `giftcard_redemptions`
  [1m[36m (7.4ms)[0m  [1mCREATE TABLE `giftcard_redemptions` (`id` int(11) DEFAULT NULL auto_increment PRIMARY KEY, `restaurant_id` int(11), `giftcard_id` int(11), `pounds` int(11), `pence` int(11), `deleted` tinyint(1), `created_at` datetime NOT NULL, `updated_at` datetime NOT NULL) ENGINE=InnoDB[0m
  [1m[35m (1.8ms)[0m  DROP TABLE `giftcard_restaurant_memberships`
  [1m[36m (5.6ms)[0m  [1mCREATE TABLE `giftcard_restaurant_memberships` (`id` int(11) DEFAULT NULL auto_increment PRIMARY KEY, `restaurant_id` int(11)) ENGINE=InnoDB[0m
  [1m[35m (1.6ms)[0m  DROP TABLE `giftcards`
  [1m[36m (6.7ms)[0m  [1mCREATE TABLE `giftcards` (`id` int(11) DEFAULT NULL auto_increment PRIMARY KEY, `code` varchar(255), `pounds` int(11), `pence` int(11), `created_at` datetime NOT NULL, `updated_at` datetime NOT NULL) ENGINE=InnoDB[0m
  [1m[35m (2.9ms)[0m  DROP TABLE `menus`
  [1m[36m (6.3ms)[0m  [1mCREATE TABLE `menus` (`id` int(11) DEFAULT NULL auto_increment PRIMARY KEY, `user_id` int(11), `restaurant_id` int(11), `menu_uid` varchar(255), `menu_name` varchar(255), `created_at` datetime NOT NULL, `updated_at` datetime NOT NULL, `name` varchar(255)) ENGINE=InnoDB[0m
  [1m[35m (1.8ms)[0m  DROP TABLE `offers`
  [1m[36m (6.0ms)[0m  [1mCREATE TABLE `offers` (`id` int(11) DEFAULT NULL auto_increment PRIMARY KEY, `offer_content` text, `restaurant_id` int(11), `time_available` varchar(255), `time_start_offer` varchar(255), `created_at` datetime NOT NULL, `updated_at` datetime NOT NULL, `start_time` int(11), `end_time` int(11), `date_publish` varchar(255), `time_publish` int(11), `start_date` int(11), `end_date` int(11), `approve` tinyint(1) DEFAULT 0, `reject` tinyint(1) DEFAULT 0, `image_uid` varchar(255), `image_name` varchar(255), `is_onetime` tinyint(1) DEFAULT 0) ENGINE=InnoDB[0m
  [1m[35m (1.6ms)[0m  DROP TABLE `photos`
  [1m[36m (5.3ms)[0m  [1mCREATE TABLE `photos` (`id` int(11) DEFAULT NULL auto_increment PRIMARY KEY, `restaurant_id` int(11), `user_id` int(11), `cover` tinyint(1) DEFAULT 0, `image_uid` varchar(255), `image_name` varchar(255), `created_at` datetime NOT NULL, `updated_at` datetime NOT NULL, `restaurant_temp_id` int(11), `text_title` varchar(255), `text_content` text, `text_hyperlink` varchar(255), `status` int(11) DEFAULT 0) ENGINE=InnoDB[0m
  [1m[35m (11.0ms)[0m  DROP TABLE `plan_types`
  [1m[36m (6.7ms)[0m  [1mCREATE TABLE `plan_types` (`id` int(11) DEFAULT NULL auto_increment PRIMARY KEY, `name` varchar(255), `number_of_months` int(11), `created_at` datetime NOT NULL, `updated_at` datetime NOT NULL) ENGINE=InnoDB[0m
  [1m[35m (18.6ms)[0m  DROP TABLE `plans`
  [1m[36m (5.5ms)[0m  [1mCREATE TABLE `plans` (`id` int(11) DEFAULT NULL auto_increment PRIMARY KEY, `name` varchar(255), `amount` int(11), `plan_type_id` int(11), `created_at` datetime NOT NULL, `updated_at` datetime NOT NULL, `description` text) ENGINE=InnoDB[0m
  [1m[35m (16.8ms)[0m  DROP TABLE `restaurant_temps`
  [1m[36m (6.7ms)[0m  [1mCREATE TABLE `restaurant_temps` (`id` int(11) DEFAULT NULL auto_increment PRIMARY KEY, `name` varchar(255), `address` varchar(255), `description` text, `phone` varchar(255), `email` varchar(255), `user_id` int(11), `deliverable` tinyint(1), `shisha_allow` tinyint(1), `disabled` tinyint(1) DEFAULT 0, `price` decimal(10,0) DEFAULT 0, `website` varchar(255), `halal_status` text, `special_deal` text, `lat` decimal(16,13), `lng` decimal(16,13), `district` varchar(255), `city` varchar(255), `postcode` varchar(255), `country` varchar(255), `short_address` varchar(255), `contact_note` varchar(255), `suggester_name` varchar(255), `is_owner` tinyint(1), `facebook_link` varchar(255), `twitter_link` varchar(255), `pinterest_link` varchar(255), `restaurant_id` int(11), `slug` varchar(255), `direction` varchar(255), `created_at` datetime NOT NULL, `updated_at` datetime NOT NULL, `suggester_email` varchar(255), `suggester_phone` varchar(255), `instagram_link` varchar(255)) ENGINE=InnoDB[0m
  [1m[35m (1.8ms)[0m  DROP TABLE `restaurants`
  [1m[36m (15.9ms)[0m  [1mCREATE TABLE `restaurants` (`id` int(11) DEFAULT NULL auto_increment PRIMARY KEY, `name` varchar(255), `address` varchar(255), `description` text, `phone` varchar(255), `email` varchar(255), `user_id` int(11), `deliverable` tinyint(1), `shisha_allow` tinyint(1), `disabled` tinyint(1), `created_at` datetime NOT NULL, `updated_at` datetime NOT NULL, `lat` decimal(16,13), `lng` decimal(16,13), `district` varchar(255), `city` varchar(255), `postcode` varchar(255), `country` varchar(255), `direction` text, `service_avg` float DEFAULT 0.0, `quality_avg` float DEFAULT 0.0, `value_avg` float DEFAULT 0.0, `rating_avg` float DEFAULT 0.0, `price` decimal(10,0) DEFAULT 0, `menu_uid` varchar(255), `menu_name` varchar(255), `is_owner` tinyint(1), `contact_note` varchar(255), `suggester_name` varchar(255), `website` varchar(255), `halal_status` text, `short_address` varchar(255), `slug` varchar(255), `special_deal` text, `facebook_link` varchar(255), `twitter_link` varchar(255), `pinterest_link` varchar(255), `waiting_for_approve_change` tinyint(1) DEFAULT 0, `suggester_email` varchar(255), `suggester_phone` varchar(255), `request_approve_photo` tinyint(1) DEFAULT 0, `instagram_link` varchar(255)) ENGINE=InnoDB[0m
  [1m[35m (6.7ms)[0m  DROP TABLE `reviews`
  [1m[36m (6.6ms)[0m  [1mCREATE TABLE `reviews` (`id` int(11) DEFAULT NULL auto_increment PRIMARY KEY, `user_id` int(11), `restaurant_id` int(11), `title` varchar(255), `content` text, `service` int(11), `quality` int(11), `value` int(11), `status` tinyint(1), `rating` float, `created_at` datetime NOT NULL, `updated_at` datetime NOT NULL, `visited_date` date, `terms_conditions` tinyint(1), `feature_review` tinyint(1) DEFAULT 0, `feature_review_set_at` date, `reply_content` text, `user_reply` int(11), `approve_reply` tinyint(1), `reply_time` datetime, `satisfied` tinyint(1), `owner_has_read` tinyint(1) DEFAULT 0) ENGINE=InnoDB[0m
  [1m[35m (2.7ms)[0m  DROP TABLE `schedules`
  [1m[36m (6.3ms)[0m  [1mCREATE TABLE `schedules` (`id` int(11) DEFAULT NULL auto_increment PRIMARY KEY, `restaurant_id` int(11), `day_of_week` int(11), `time_open` int(11), `time_closed` int(11), `created_at` datetime NOT NULL, `updated_at` datetime NOT NULL, `restaurant_temp_id` int(11), `schedule_type` varchar(255) DEFAULT 'daily') ENGINE=InnoDB[0m
  [1m[35m (23.5ms)[0m  DROP TABLE `sessions`
  [1m[36m (7.1ms)[0m  [1mCREATE TABLE `sessions` (`id` int(11) DEFAULT NULL auto_increment PRIMARY KEY, `session_id` varchar(255) NOT NULL, `data` text, `created_at` datetime NOT NULL, `updated_at` datetime NOT NULL) ENGINE=InnoDB[0m
  [1m[35m (10.1ms)[0m  CREATE INDEX `index_sessions_on_session_id` ON `sessions` (`session_id`)
  [1m[36m (10.5ms)[0m  [1mCREATE INDEX `index_sessions_on_updated_at` ON `sessions` (`updated_at`)[0m
  [1m[35m (4.6ms)[0m  DROP TABLE `simple_captcha_data`
  [1m[36m (6.2ms)[0m  [1mCREATE TABLE `simple_captcha_data` (`id` int(11) DEFAULT NULL auto_increment PRIMARY KEY, `key` varchar(40), `value` varchar(6), `created_at` datetime NOT NULL, `updated_at` datetime NOT NULL) ENGINE=InnoDB[0m
  [1m[35m (8.2ms)[0m  CREATE INDEX `idx_key` ON `simple_captcha_data` (`key`)
  [1m[36m (2.2ms)[0m  [1mDROP TABLE `subscriptions`[0m
  [1m[35m (6.5ms)[0m  CREATE TABLE `subscriptions` (`id` int(11) DEFAULT NULL auto_increment PRIMARY KEY, `user_id` int(11), `ip_address` varchar(255), `first_name` varchar(255), `last_name` varchar(255), `card_type` varchar(255), `card_expires_on` date, `action` varchar(255), `amount` int(11), `success` tinyint(1), `authorization` varchar(255), `message` varchar(255), `params` text, `created_at` datetime NOT NULL, `updated_at` datetime NOT NULL, `card_number` int(11), `card_verification` int(11), `express_token` varchar(255), `express_payer_id` varchar(255), `plan_id` int(11), `expire_time` datetime, `recurring_status` tinyint(1) DEFAULT 1, `account_id` varchar(255), `transaction_id` varchar(255), `profile_id` varchar(255), `paypal_status` int(11)) ENGINE=InnoDB
  [1m[36m (2.6ms)[0m  [1mDROP TABLE `transactions`[0m
  [1m[35m (6.0ms)[0m  CREATE TABLE `transactions` (`id` int(11) DEFAULT NULL auto_increment PRIMARY KEY, `subscription_id` int(11), `transaction_id` varchar(255), `transaction_data` text, `amount` varchar(255), `next_billing_cycle` datetime, `transaction_status` int(11), `created_at` datetime NOT NULL, `updated_at` datetime NOT NULL) ENGINE=InnoDB
  [1m[36m (24.9ms)[0m  [1mDROP TABLE `users`[0m
  [1m[35m (6.3ms)[0m  CREATE TABLE `users` (`id` int(11) DEFAULT NULL auto_increment PRIMARY KEY, `email` varchar(255) DEFAULT '' NOT NULL, `username` varchar(255), `first_name` varchar(255), `last_name` varchar(255), `middle_name` varchar(255), `phone` varchar(255), `address` varchar(255), `im` varchar(255), `status` varchar(255) DEFAULT 'unverified', `created_at` datetime NOT NULL, `updated_at` datetime NOT NULL, `encrypted_password` varchar(255) DEFAULT '' NOT NULL, `reset_password_token` varchar(255), `reset_password_sent_at` datetime, `remember_created_at` datetime, `sign_in_count` int(11) DEFAULT 0, `current_sign_in_at` datetime, `last_sign_in_at` datetime, `current_sign_in_ip` varchar(255), `last_sign_in_ip` varchar(255), `confirmation_token` varchar(255), `confirmed_at` datetime, `confirmation_sent_at` datetime, `unconfirmed_email` varchar(255), `failed_attempts` int(11) DEFAULT 0, `unlock_token` varchar(255), `locked_at` datetime, `authentication_token` varchar(255), `admin_role` tinyint(1), `provider` varchar(255), `uid` varchar(255), `name` varchar(255), `join_mailing_list` tinyint(1), `avatar_uid` varchar(255), `avatar_name` varchar(255), `is_subscribed` tinyint(1) DEFAULT 1, `restaurant_owner_role` tinyint(1) DEFAULT 0, `postcode` varchar(255), `gem_hunter` tinyint(1) DEFAULT 0, `device_token` varchar(255), `device_type` int(11), `fb_access_token` varchar(255), `avatar_fb_url` varchar(255), `gem_hunter_wordpress_url` varchar(255)) ENGINE=InnoDB
  [1m[36m (9.3ms)[0m  [1mCREATE UNIQUE INDEX `index_users_on_authentication_token` ON `users` (`authentication_token`)[0m
  [1m[35m (11.2ms)[0m  CREATE UNIQUE INDEX `index_users_on_confirmation_token` ON `users` (`confirmation_token`)
  [1m[36m (10.2ms)[0m  [1mCREATE UNIQUE INDEX `index_users_on_email` ON `users` (`email`)[0m
  [1m[35m (10.9ms)[0m  CREATE UNIQUE INDEX `index_users_on_reset_password_token` ON `users` (`reset_password_token`)
  [1m[36m (12.7ms)[0m  [1mCREATE UNIQUE INDEX `index_users_on_unlock_token` ON `users` (`unlock_token`)[0m
  [1m[35m (0.2ms)[0m  SELECT version FROM `schema_migrations`
  [1m[36m (0.6ms)[0m  [1mINSERT INTO `schema_migrations` (version) VALUES ('20160117060649')[0m
  [1m[35m (0.6ms)[0m  INSERT INTO `schema_migrations` (version) VALUES ('20150723184603')
  [1m[36m (0.5ms)[0m  [1mINSERT INTO `schema_migrations` (version) VALUES ('20150723184750')[0m
  [1m[35m (0.7ms)[0m  INSERT INTO `schema_migrations` (version) VALUES ('20150903122620')
  [1m[36m (0.6ms)[0m  [1mINSERT INTO `schema_migrations` (version) VALUES ('20150903132633')[0m
  [1m[35m (0.5ms)[0m  INSERT INTO `schema_migrations` (version) VALUES ('20150904145931')
  [1m[36m (0.4ms)[0m  [1mINSERT INTO `schema_migrations` (version) VALUES ('20150914220200')[0m
  [1m[35m (0.4ms)[0m  INSERT INTO `schema_migrations` (version) VALUES ('20160115132621')
  [1m[36m (0.2ms)[0m  [1mSELECT `schema_migrations`.`version` FROM `schema_migrations` [0m
  [1m[35mFilterType Load (0.2ms)[0m  SELECT `filter_types`.* FROM `filter_types` WHERE `filter_types`.`name` = 'Cuisine' AND `filter_types`.`code` = 'cuisine' LIMIT 1
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO `filter_types` (`code`, `created_at`, `index_order`, `name`, `updated_at`) VALUES ('cuisine', '2016-01-18 01:06:26', NULL, 'Cuisine', '2016-01-18 01:06:26')
  [1m[36m (6.6ms)[0m  [1mCOMMIT[0m
  [1m[35mFilterType Load (0.3ms)[0m  SELECT `filter_types`.* FROM `filter_types` WHERE `filter_types`.`name` = 'Opening hours' AND `filter_types`.`code` = 'open_hour' LIMIT 1
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO `filter_types` (`code`, `created_at`, `index_order`, `name`, `updated_at`) VALUES ('open_hour', '2016-01-18 01:06:26', NULL, 'Opening hours', '2016-01-18 01:06:26')
  [1m[36m (0.7ms)[0m  [1mCOMMIT[0m
  [1m[35mFilterType Load (0.2ms)[0m  SELECT `filter_types`.* FROM `filter_types` WHERE `filter_types`.`name` = 'Alcohol' AND `filter_types`.`code` = 'alcohol' LIMIT 1
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO `filter_types` (`code`, `created_at`, `index_order`, `name`, `updated_at`) VALUES ('alcohol', '2016-01-18 01:06:26', NULL, 'Alcohol', '2016-01-18 01:06:26')
  [1m[36m (0.4ms)[0m  [1mCOMMIT[0m
  [1m[35mFilterType Load (0.2ms)[0m  SELECT `filter_types`.* FROM `filter_types` WHERE `filter_types`.`name` = 'Shisha' AND `filter_types`.`code` = 'shisha' LIMIT 1
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO `filter_types` (`code`, `created_at`, `index_order`, `name`, `updated_at`) VALUES ('shisha', '2016-01-18 01:06:26', NULL, 'Shisha', '2016-01-18 01:06:26')
  [1m[36m (0.5ms)[0m  [1mCOMMIT[0m
  [1m[35mFilterType Load (0.1ms)[0m  SELECT `filter_types`.* FROM `filter_types` WHERE `filter_types`.`name` = 'Price' AND `filter_types`.`code` = 'price' LIMIT 1
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO `filter_types` (`code`, `created_at`, `index_order`, `name`, `updated_at`) VALUES ('price', '2016-01-18 01:06:26', NULL, 'Price', '2016-01-18 01:06:26')
  [1m[36m (0.4ms)[0m  [1mCOMMIT[0m
  [1m[35mFilterType Load (0.2ms)[0m  SELECT `filter_types`.* FROM `filter_types` WHERE `filter_types`.`name` = 'Facilities' AND `filter_types`.`code` = 'facility' LIMIT 1
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO `filter_types` (`code`, `created_at`, `index_order`, `name`, `updated_at`) VALUES ('facility', '2016-01-18 01:06:26', NULL, 'Facilities', '2016-01-18 01:06:26')
  [1m[36m (0.5ms)[0m  [1mCOMMIT[0m
  [1m[35mFilterType Load (0.2ms)[0m  SELECT `filter_types`.* FROM `filter_types` WHERE `filter_types`.`name` = 'Halal status' AND `filter_types`.`code` = 'hal_status' LIMIT 1
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO `filter_types` (`code`, `created_at`, `index_order`, `name`, `updated_at`) VALUES ('hal_status', '2016-01-18 01:06:26', NULL, 'Halal status', '2016-01-18 01:06:26')
  [1m[36m (0.5ms)[0m  [1mCOMMIT[0m
  [1m[35mFilterType Load (0.2ms)[0m  SELECT `filter_types`.* FROM `filter_types` WHERE `filter_types`.`name` = 'Offers' AND `filter_types`.`code` = 'offer' LIMIT 1
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO `filter_types` (`code`, `created_at`, `index_order`, `name`, `updated_at`) VALUES ('offer', '2016-01-18 01:06:26', NULL, 'Offers', '2016-01-18 01:06:26')
  [1m[36m (1.2ms)[0m  [1mCOMMIT[0m
  [1m[35mFilterType Load (0.2ms)[0m  SELECT `filter_types`.* FROM `filter_types` WHERE `filter_types`.`name` = 'Organic' AND `filter_types`.`code` = 'organic' LIMIT 1
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO `filter_types` (`code`, `created_at`, `index_order`, `name`, `updated_at`) VALUES ('organic', '2016-01-18 01:06:26', NULL, 'Organic', '2016-01-18 01:06:26')
  [1m[36m (0.3ms)[0m  [1mCOMMIT[0m
  [1m[35mFilter Load (0.2ms)[0m  SELECT `filters`.* FROM `filters` WHERE `filters`.`code` = 'cuisine' AND `filters`.`name` = 'Lenanese' AND `filters`.`description` = 'Lenanese' AND `filters`.`filter_type_id` = 1 LIMIT 1
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35mFilter Exists (0.3ms)[0m  SELECT 1 AS one FROM `filters` WHERE (`filters`.`name` = BINARY 'Lenanese' AND `filters`.`filter_type_id` = 1) LIMIT 1
  [1m[36mFilterType Load (0.2ms)[0m  [1mSELECT `filter_types`.* FROM `filter_types` WHERE `filter_types`.`code` = 'cuisine' LIMIT 1[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO `filters` (`code`, `created_at`, `description`, `filter_type_id`, `index_order`, `name`, `status`, `updated_at`) VALUES ('cuisine', '2016-01-18 01:06:26', 'Lenanese', 1, 99, 'Lenanese', 1, '2016-01-18 01:06:26')
  [1m[36m (0.5ms)[0m  [1mCOMMIT[0m
  [1m[35mFilter Load (0.2ms)[0m  SELECT `filters`.* FROM `filters` WHERE `filters`.`code` = 'cuisine' AND `filters`.`name` = 'Meze' AND `filters`.`description` = 'Meze' AND `filters`.`filter_type_id` = 1 LIMIT 1
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35mFilter Exists (0.2ms)[0m  SELECT 1 AS one FROM `filters` WHERE (`filters`.`name` = BINARY 'Meze' AND `filters`.`filter_type_id` = 1) LIMIT 1
  [1m[36mFilterType Load (0.1ms)[0m  [1mSELECT `filter_types`.* FROM `filter_types` WHERE `filter_types`.`code` = 'cuisine' LIMIT 1[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO `filters` (`code`, `created_at`, `description`, `filter_type_id`, `index_order`, `name`, `status`, `updated_at`) VALUES ('cuisine', '2016-01-18 01:06:26', 'Meze', 1, 99, 'Meze', 1, '2016-01-18 01:06:26')
  [1m[36m (0.5ms)[0m  [1mCOMMIT[0m
  [1m[35mFilter Load (0.2ms)[0m  SELECT `filters`.* FROM `filters` WHERE `filters`.`code` = 'cuisine' AND `filters`.`name` = 'Turkish' AND `filters`.`description` = 'Turkish' AND `filters`.`filter_type_id` = 1 LIMIT 1
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35mFilter Exists (0.1ms)[0m  SELECT 1 AS one FROM `filters` WHERE (`filters`.`name` = BINARY 'Turkish' AND `filters`.`filter_type_id` = 1) LIMIT 1
  [1m[36mFilterType Load (0.2ms)[0m  [1mSELECT `filter_types`.* FROM `filter_types` WHERE `filter_types`.`code` = 'cuisine' LIMIT 1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO `filters` (`code`, `created_at`, `description`, `filter_type_id`, `index_order`, `name`, `status`, `updated_at`) VALUES ('cuisine', '2016-01-18 01:06:26', 'Turkish', 1, 99, 'Turkish', 1, '2016-01-18 01:06:26')
  [1m[36m (0.4ms)[0m  [1mCOMMIT[0m
  [1m[35mFilter Load (0.2ms)[0m  SELECT `filters`.* FROM `filters` WHERE `filters`.`code` = 'cuisine' AND `filters`.`name` = 'Maroccan' AND `filters`.`description` = 'Maroccan' AND `filters`.`filter_type_id` = 1 LIMIT 1
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35mFilter Exists (0.1ms)[0m  SELECT 1 AS one FROM `filters` WHERE (`filters`.`name` = BINARY 'Maroccan' AND `filters`.`filter_type_id` = 1) LIMIT 1
  [1m[36mFilterType Load (0.1ms)[0m  [1mSELECT `filter_types`.* FROM `filter_types` WHERE `filter_types`.`code` = 'cuisine' LIMIT 1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO `filters` (`code`, `created_at`, `description`, `filter_type_id`, `index_order`, `name`, `status`, `updated_at`) VALUES ('cuisine', '2016-01-18 01:06:26', 'Maroccan', 1, 99, 'Maroccan', 1, '2016-01-18 01:06:26')
  [1m[36m (0.5ms)[0m  [1mCOMMIT[0m
  [1m[35mFilter Load (0.2ms)[0m  SELECT `filters`.* FROM `filters` WHERE `filters`.`code` = 'cuisine' AND `filters`.`name` = 'Italian' AND `filters`.`description` = 'Italian' AND `filters`.`filter_type_id` = 1 LIMIT 1
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35mFilter Exists (0.2ms)[0m  SELECT 1 AS one FROM `filters` WHERE (`filters`.`name` = BINARY 'Italian' AND `filters`.`filter_type_id` = 1) LIMIT 1
  [1m[36mFilterType Load (0.1ms)[0m  [1mSELECT `filter_types`.* FROM `filter_types` WHERE `filter_types`.`code` = 'cuisine' LIMIT 1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO `filters` (`code`, `created_at`, `description`, `filter_type_id`, `index_order`, `name`, `status`, `updated_at`) VALUES ('cuisine', '2016-01-18 01:06:26', 'Italian', 1, 99, 'Italian', 1, '2016-01-18 01:06:26')
  [1m[36m (0.5ms)[0m  [1mCOMMIT[0m
  [1m[35mFilter Load (0.2ms)[0m  SELECT `filters`.* FROM `filters` WHERE `filters`.`code` = 'cuisine' AND `filters`.`name` = 'Vietnamese' AND `filters`.`description` = 'Vietnamese' AND `filters`.`filter_type_id` = 1 LIMIT 1
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35mFilter Exists (0.2ms)[0m  SELECT 1 AS one FROM `filters` WHERE (`filters`.`name` = BINARY 'Vietnamese' AND `filters`.`filter_type_id` = 1) LIMIT 1
  [1m[36mFilterType Load (0.1ms)[0m  [1mSELECT `filter_types`.* FROM `filter_types` WHERE `filter_types`.`code` = 'cuisine' LIMIT 1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO `filters` (`code`, `created_at`, `description`, `filter_type_id`, `index_order`, `name`, `status`, `updated_at`) VALUES ('cuisine', '2016-01-18 01:06:26', 'Vietnamese', 1, 99, 'Vietnamese', 1, '2016-01-18 01:06:26')
  [1m[36m (1.0ms)[0m  [1mCOMMIT[0m
  [1m[35mFilter Load (0.2ms)[0m  SELECT `filters`.* FROM `filters` WHERE `filters`.`code` = 'cuisine' AND `filters`.`name` = 'Thai' AND `filters`.`description` = 'Thailand' AND `filters`.`filter_type_id` = 1 LIMIT 1
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35mFilter Exists (0.2ms)[0m  SELECT 1 AS one FROM `filters` WHERE (`filters`.`name` = BINARY 'Thai' AND `filters`.`filter_type_id` = 1) LIMIT 1
  [1m[36mFilterType Load (0.1ms)[0m  [1mSELECT `filter_types`.* FROM `filter_types` WHERE `filter_types`.`code` = 'cuisine' LIMIT 1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO `filters` (`code`, `created_at`, `description`, `filter_type_id`, `index_order`, `name`, `status`, `updated_at`) VALUES ('cuisine', '2016-01-18 01:06:27', 'Thailand', 1, 99, 'Thai', 1, '2016-01-18 01:06:27')
  [1m[36m (0.5ms)[0m  [1mCOMMIT[0m
  [1m[35mFilter Load (0.2ms)[0m  SELECT `filters`.* FROM `filters` WHERE `filters`.`code` = 'cuisine' AND `filters`.`name` = 'Indian' AND `filters`.`description` = 'Indian' AND `filters`.`filter_type_id` = 1 LIMIT 1
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35mFilter Exists (0.1ms)[0m  SELECT 1 AS one FROM `filters` WHERE (`filters`.`name` = BINARY 'Indian' AND `filters`.`filter_type_id` = 1) LIMIT 1
  [1m[36mFilterType Load (0.2ms)[0m  [1mSELECT `filter_types`.* FROM `filter_types` WHERE `filter_types`.`code` = 'cuisine' LIMIT 1[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO `filters` (`code`, `created_at`, `description`, `filter_type_id`, `index_order`, `name`, `status`, `updated_at`) VALUES ('cuisine', '2016-01-18 01:06:27', 'Indian', 1, 99, 'Indian', 1, '2016-01-18 01:06:27')
  [1m[36m (1.4ms)[0m  [1mCOMMIT[0m
  [1m[35mFilter Load (0.2ms)[0m  SELECT `filters`.* FROM `filters` WHERE `filters`.`code` = 'open_hour' AND `filters`.`name` = 'Open Now' AND `filters`.`description` = 'Open Now' AND `filters`.`filter_type_id` = 2 LIMIT 1
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35mFilter Exists (0.2ms)[0m  SELECT 1 AS one FROM `filters` WHERE (`filters`.`name` = BINARY 'Open Now' AND `filters`.`filter_type_id` = 2) LIMIT 1
  [1m[36mFilterType Load (0.1ms)[0m  [1mSELECT `filter_types`.* FROM `filter_types` WHERE `filter_types`.`code` = 'cuisine' LIMIT 1[0m
  [1m[35mFilterType Load (0.1ms)[0m  SELECT `filter_types`.* FROM `filter_types` WHERE `filter_types`.`code` = 'price' LIMIT 1
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO `filters` (`code`, `created_at`, `description`, `filter_type_id`, `index_order`, `name`, `status`, `updated_at`) VALUES ('open_now', '2016-01-18 01:06:27', 'Open Now', 2, 99, 'Open Now', 1, '2016-01-18 01:06:27')[0m
  [1m[35m (0.8ms)[0m  COMMIT
  [1m[36m (0.3ms)[0m  [1mSELECT COUNT(*) FROM `filters` WHERE (code = 'available' OR code = 'alcohol_served')[0m
  [1m[35m (0.2ms)[0m  SELECT COUNT(*) FROM `filters` WHERE `filters`.`code` = 'available' AND `filters`.`name` = 'Available' AND `filters`.`description` = 'Alcohol served here' AND `filters`.`filter_type_id` = 3
  [1m[36m (0.2ms)[0m  [1mSELECT COUNT(*) FROM `filters` WHERE `filters`.`code` = 'alcohol_served' AND `filters`.`name` = 'Available' AND `filters`.`description` = 'Alcohol served here' AND `filters`.`filter_type_id` = 3[0m
  [1m[35m (0.1ms)[0m  BEGIN
  [1m[36mFilter Exists (0.2ms)[0m  [1mSELECT 1 AS one FROM `filters` WHERE (`filters`.`name` = BINARY 'Available' AND `filters`.`filter_type_id` = 3) LIMIT 1[0m
  [1m[35mFilterType Load (0.2ms)[0m  SELECT `filter_types`.* FROM `filter_types` WHERE `filter_types`.`code` = 'cuisine' LIMIT 1
  [1m[36mFilterType Load (0.1ms)[0m  [1mSELECT `filter_types`.* FROM `filter_types` WHERE `filter_types`.`code` = 'price' LIMIT 1[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO `filters` (`code`, `created_at`, `description`, `filter_type_id`, `index_order`, `name`, `status`, `updated_at`) VALUES ('available', '2016-01-18 01:06:27', 'Alcohol served here', 3, 99, 'Available', 1, '2016-01-18 01:06:27')
  [1m[36m (0.4ms)[0m  [1mCOMMIT[0m
  [1m[35m (0.3ms)[0m  SELECT COUNT(*) FROM `filters` WHERE `filters`.`code` = 'bring_your_own'
  [1m[36mFilter Load (0.2ms)[0m  [1mSELECT `filters`.* FROM `filters` WHERE `filters`.`code` = 'bring_your_own' AND `filters`.`name` = 'Bring your own bottle' AND `filters`.`description` = 'Bring your own bottle' AND `filters`.`filter_type_id` = 3 LIMIT 1[0m
  [1m[35m (0.1ms)[0m  BEGIN
  [1m[36mFilter Exists (0.2ms)[0m  [1mSELECT 1 AS one FROM `filters` WHERE (`filters`.`name` = BINARY 'Bring your own bottle' AND `filters`.`filter_type_id` = 3) LIMIT 1[0m
  [1m[35mFilterType Load (0.1ms)[0m  SELECT `filter_types`.* FROM `filter_types` WHERE `filter_types`.`code` = 'cuisine' LIMIT 1
  [1m[36mFilterType Load (0.1ms)[0m  [1mSELECT `filter_types`.* FROM `filter_types` WHERE `filter_types`.`code` = 'price' LIMIT 1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO `filters` (`code`, `created_at`, `description`, `filter_type_id`, `index_order`, `name`, `status`, `updated_at`) VALUES ('bring_your_own_bottle', '2016-01-18 01:06:27', 'Bring your own bottle', 3, 99, 'Bring your own bottle', 1, '2016-01-18 01:06:27')
  [1m[36m (0.5ms)[0m  [1mCOMMIT[0m
  [1m[35m (0.2ms)[0m  SELECT COUNT(*) FROM `filters` WHERE (code = 'not_allow' OR code = 'alcohol_not_allowed')
  [1m[36m (0.2ms)[0m  [1mSELECT COUNT(*) FROM `filters` WHERE `filters`.`code` = 'not_allow' AND `filters`.`name` = 'Not allowed' AND `filters`.`description` = 'Not allowed on the premises' AND `filters`.`filter_type_id` = 3[0m
  [1m[35m (0.2ms)[0m  SELECT COUNT(*) FROM `filters` WHERE `filters`.`code` = 'alcohol_not_allowed' AND `filters`.`name` = 'Not allowed' AND `filters`.`description` = 'Not allowed on the premises' AND `filters`.`filter_type_id` = 3
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35mFilter Exists (0.2ms)[0m  SELECT 1 AS one FROM `filters` WHERE (`filters`.`name` = BINARY 'Not allowed' AND `filters`.`filter_type_id` = 3) LIMIT 1
  [1m[36mFilterType Load (0.1ms)[0m  [1mSELECT `filter_types`.* FROM `filter_types` WHERE `filter_types`.`code` = 'cuisine' LIMIT 1[0m
  [1m[35mFilterType Load (0.1ms)[0m  SELECT `filter_types`.* FROM `filter_types` WHERE `filter_types`.`code` = 'price' LIMIT 1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO `filters` (`code`, `created_at`, `description`, `filter_type_id`, `index_order`, `name`, `status`, `updated_at`) VALUES ('not_allowed', '2016-01-18 01:06:27', 'Not allowed on the premises', 3, 99, 'Not allowed', 1, '2016-01-18 01:06:27')[0m
  [1m[35m (0.4ms)[0m  COMMIT
  [1m[36m (0.2ms)[0m  [1mSELECT COUNT(*) FROM `filters` WHERE (code = 'available' OR code = 'shisha_allowed')[0m
  [1m[35m (0.2ms)[0m  SELECT COUNT(*) FROM `filters` WHERE (code = 'not_allow' OR code = 'shisha_not_allowed')
  [1m[36m (0.2ms)[0m  [1mSELECT COUNT(*) FROM `filters` WHERE `filters`.`code` = 'not_allow' AND `filters`.`name` = 'Not allowed' AND `filters`.`description` = 'Not allowed on premises' AND `filters`.`filter_type_id` = 4[0m
  [1m[35m (0.2ms)[0m  SELECT COUNT(*) FROM `filters` WHERE `filters`.`code` = 'shisha_not_allowed' AND `filters`.`name` = 'Not allowed' AND `filters`.`description` = 'Not allowed on premises' AND `filters`.`filter_type_id` = 4
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35mFilter Exists (0.2ms)[0m  SELECT 1 AS one FROM `filters` WHERE (`filters`.`name` = BINARY 'Not allowed' AND `filters`.`filter_type_id` = 4) LIMIT 1
  [1m[36mFilterType Load (0.1ms)[0m  [1mSELECT `filter_types`.* FROM `filter_types` WHERE `filter_types`.`code` = 'cuisine' LIMIT 1[0m
  [1m[35mFilterType Load (0.1ms)[0m  SELECT `filter_types`.* FROM `filter_types` WHERE `filter_types`.`code` = 'price' LIMIT 1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO `filters` (`code`, `created_at`, `description`, `filter_type_id`, `index_order`, `name`, `status`, `updated_at`) VALUES ('not_allowed', '2016-01-18 01:06:27', 'Not allowed on premises', 4, 99, 'Not allowed', 1, '2016-01-18 01:06:27')[0m
  [1m[35m (0.4ms)[0m  COMMIT
  [1m[36m (0.2ms)[0m  [1mSELECT COUNT(*) FROM `filters` WHERE `filters`.`code` = 'price' AND `filters`.`name` = 'Â£ (Under Â£10)'[0m
  [1m[35m (0.2ms)[0m  SELECT COUNT(*) FROM `filters` WHERE `filters`.`code` = 'price' AND `filters`.`name` = 'Under Â£15'
  [1m[36mFilter Load (0.2ms)[0m  [1mSELECT `filters`.* FROM `filters` WHERE `filters`.`code` = 'price' AND `filters`.`name` = 'Â£ (Under Â£10)' AND `filters`.`description` = 'Â£' AND `filters`.`filter_type_id` = 5 LIMIT 1[0m
  [1m[35m (0.1ms)[0m  BEGIN
  [1m[36mFilter Exists (0.2ms)[0m  [1mSELECT 1 AS one FROM `filters` WHERE (`filters`.`name` = BINARY 'Â£ (Under Â£10)' AND `filters`.`filter_type_id` = 5) LIMIT 1[0m
  [1m[35mFilterType Load (0.1ms)[0m  SELECT `filter_types`.* FROM `filter_types` WHERE `filter_types`.`code` = 'cuisine' LIMIT 1
  [1m[36mFilterType Load (0.1ms)[0m  [1mSELECT `filter_types`.* FROM `filter_types` WHERE `filter_types`.`code` = 'price' LIMIT 1[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO `filters` (`code`, `created_at`, `description`, `filter_type_id`, `index_order`, `name`, `status`, `updated_at`) VALUES ('price', '2016-01-18 01:06:27', 'Â£', 5, 99, 'Â£ (Under Â£10)', 1, '2016-01-18 01:06:27')
  [1m[36m (0.4ms)[0m  [1mCOMMIT[0m
  [1m[35m (8.3ms)[0m  SELECT COUNT(*) FROM `filters` WHERE `filters`.`code` = 'price' AND `filters`.`name` = 'Â£Â£ (Â£10 to Â£30)'
  [1m[36m (0.2ms)[0m  [1mSELECT COUNT(*) FROM `filters` WHERE `filters`.`code` = 'price' AND `filters`.`name` = 'Â£15-30'[0m
  [1m[35mFilter Load (0.2ms)[0m  SELECT `filters`.* FROM `filters` WHERE `filters`.`code` = 'price' AND `filters`.`name` = 'Â£Â£ (Â£10 to Â£30)' AND `filters`.`description` = 'Â£Â£' AND `filters`.`filter_type_id` = 5 LIMIT 1
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35mFilter Exists (0.1ms)[0m  SELECT 1 AS one FROM `filters` WHERE (`filters`.`name` = BINARY 'Â£Â£ (Â£10 to Â£30)' AND `filters`.`filter_type_id` = 5) LIMIT 1
  [1m[36mFilterType Load (0.2ms)[0m  [1mSELECT `filter_types`.* FROM `filter_types` WHERE `filter_types`.`code` = 'cuisine' LIMIT 1[0m
  [1m[35mFilterType Load (0.1ms)[0m  SELECT `filter_types`.* FROM `filter_types` WHERE `filter_types`.`code` = 'price' LIMIT 1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO `filters` (`code`, `created_at`, `description`, `filter_type_id`, `index_order`, `name`, `status`, `updated_at`) VALUES ('price', '2016-01-18 01:06:27', 'Â£Â£', 5, 99, 'Â£Â£ (Â£10 to Â£30)', 1, '2016-01-18 01:06:27')[0m
  [1m[35m (0.5ms)[0m  COMMIT
  [1m[36m (0.2ms)[0m  [1mSELECT COUNT(*) FROM `filters` WHERE `filters`.`code` = 'price' AND `filters`.`name` = 'Â£Â£Â£ (Over Â£30)'[0m
  [1m[35m (0.2ms)[0m  SELECT COUNT(*) FROM `filters` WHERE `filters`.`code` = 'price' AND `filters`.`name` = 'Â£30-50'
  [1m[36mFilter Load (0.2ms)[0m  [1mSELECT `filters`.* FROM `filters` WHERE `filters`.`code` = 'price' AND `filters`.`name` = 'Â£Â£Â£ (Over Â£30)' AND `filters`.`description` = 'Â£Â£Â£' AND `filters`.`filter_type_id` = 5 LIMIT 1[0m
  [1m[35m (0.1ms)[0m  BEGIN
  [1m[36mFilter Exists (0.1ms)[0m  [1mSELECT 1 AS one FROM `filters` WHERE (`filters`.`name` = BINARY 'Â£Â£Â£ (Over Â£30)' AND `filters`.`filter_type_id` = 5) LIMIT 1[0m
  [1m[35mFilterType Load (0.1ms)[0m  SELECT `filter_types`.* FROM `filter_types` WHERE `filter_types`.`code` = 'cuisine' LIMIT 1
  [1m[36mFilterType Load (0.2ms)[0m  [1mSELECT `filter_types`.* FROM `filter_types` WHERE `filter_types`.`code` = 'price' LIMIT 1[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO `filters` (`code`, `created_at`, `description`, `filter_type_id`, `index_order`, `name`, `status`, `updated_at`) VALUES ('price', '2016-01-18 01:06:27', 'Â£Â£Â£', 5, 99, 'Â£Â£Â£ (Over Â£30)', 1, '2016-01-18 01:06:27')
  [1m[36m (0.4ms)[0m  [1mCOMMIT[0m
  [1m[35m (0.2ms)[0m  SELECT COUNT(*) FROM `filters` WHERE `filters`.`code` = 'wifi_available'
  [1m[36mFilter Load (0.2ms)[0m  [1mSELECT `filters`.* FROM `filters` WHERE `filters`.`code` = 'wifi_available' AND `filters`.`name` = 'Wifi available' AND `filters`.`description` = 'Wifi Available' AND `filters`.`filter_type_id` = 6 LIMIT 1[0m
  [1m[35m (0.1ms)[0m  BEGIN
  [1m[36mFilter Exists (0.2ms)[0m  [1mSELECT 1 AS one FROM `filters` WHERE (`filters`.`name` = BINARY 'Wifi available' AND `filters`.`filter_type_id` = 6) LIMIT 1[0m
  [1m[35mFilterType Load (0.1ms)[0m  SELECT `filter_types`.* FROM `filter_types` WHERE `filter_types`.`code` = 'cuisine' LIMIT 1
  [1m[36mFilterType Load (0.1ms)[0m  [1mSELECT `filter_types`.* FROM `filter_types` WHERE `filter_types`.`code` = 'price' LIMIT 1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO `filters` (`code`, `created_at`, `description`, `filter_type_id`, `index_order`, `name`, `status`, `updated_at`) VALUES ('wifi_available', '2016-01-18 01:06:27', 'Wifi Available', 6, 99, 'Wifi available', 1, '2016-01-18 01:06:27')
  [1m[36m (0.4ms)[0m  [1mCOMMIT[0m
  [1m[35m (0.3ms)[0m  SELECT COUNT(*) FROM `filters` WHERE `filters`.`code` = 'wheelchair_accessible'
  [1m[36mFilter Load (0.2ms)[0m  [1mSELECT `filters`.* FROM `filters` WHERE `filters`.`code` = 'wheelchair_accessible' AND `filters`.`name` = 'Wheelchair accessible' AND `filters`.`description` = 'Wheelchair Accessible' AND `filters`.`filter_type_id` = 6 LIMIT 1[0m
  [1m[35m (0.1ms)[0m  BEGIN
  [1m[36mFilter Exists (0.2ms)[0m  [1mSELECT 1 AS one FROM `filters` WHERE (`filters`.`name` = BINARY 'Wheelchair accessible' AND `filters`.`filter_type_id` = 6) LIMIT 1[0m
  [1m[35mFilterType Load (0.2ms)[0m  SELECT `filter_types`.* FROM `filter_types` WHERE `filter_types`.`code` = 'cuisine' LIMIT 1
  [1m[36mFilterType Load (0.1ms)[0m  [1mSELECT `filter_types`.* FROM `filter_types` WHERE `filter_types`.`code` = 'price' LIMIT 1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO `filters` (`code`, `created_at`, `description`, `filter_type_id`, `index_order`, `name`, `status`, `updated_at`) VALUES ('wheelchair_accessible', '2016-01-18 01:06:27', 'Wheelchair Accessible', 6, 99, 'Wheelchair accessible', 1, '2016-01-18 01:06:27')
  [1m[36m (0.4ms)[0m  [1mCOMMIT[0m
  [1m[35m (0.2ms)[0m  SELECT COUNT(*) FROM `filters` WHERE `filters`.`code` = 'delivery_available'
  [1m[36mFilter Load (0.2ms)[0m  [1mSELECT `filters`.* FROM `filters` WHERE `filters`.`code` = 'delivery_available' AND `filters`.`name` = 'Delivery available' AND `filters`.`description` = 'Delivery available' AND `filters`.`filter_type_id` = 6 LIMIT 1[0m
  [1m[35m (0.1ms)[0m  BEGIN
  [1m[36mFilter Exists (0.2ms)[0m  [1mSELECT 1 AS one FROM `filters` WHERE (`filters`.`name` = BINARY 'Delivery available' AND `filters`.`filter_type_id` = 6) LIMIT 1[0m
  [1m[35mFilterType Load (0.1ms)[0m  SELECT `filter_types`.* FROM `filter_types` WHERE `filter_types`.`code` = 'cuisine' LIMIT 1
  [1m[36mFilterType Load (0.1ms)[0m  [1mSELECT `filter_types`.* FROM `filter_types` WHERE `filter_types`.`code` = 'price' LIMIT 1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO `filters` (`code`, `created_at`, `description`, `filter_type_id`, `index_order`, `name`, `status`, `updated_at`) VALUES ('delivery_available', '2016-01-18 01:06:27', 'Delivery available', 6, 99, 'Delivery available', 1, '2016-01-18 01:06:27')
  [1m[36m (0.3ms)[0m  [1mCOMMIT[0m
  [1m[35m (0.2ms)[0m  SELECT COUNT(*) FROM `filters` WHERE `filters`.`code` = 'staff_confirmation'
  [1m[36mFilter Load (0.2ms)[0m  [1mSELECT `filters`.* FROM `filters` WHERE `filters`.`code` = 'staff_confirmation' AND `filters`.`name` = 'Staff confirmation' AND `filters`.`description` = 'Staff confirmation' AND `filters`.`filter_type_id` = 7 LIMIT 1[0m
  [1m[35m (0.1ms)[0m  BEGIN
  [1m[36mFilter Exists (0.1ms)[0m  [1mSELECT 1 AS one FROM `filters` WHERE (`filters`.`name` = BINARY 'Staff confirmation' AND `filters`.`filter_type_id` = 7) LIMIT 1[0m
  [1m[35mFilterType Load (0.1ms)[0m  SELECT `filter_types`.* FROM `filter_types` WHERE `filter_types`.`code` = 'cuisine' LIMIT 1
  [1m[36mFilterType Load (0.2ms)[0m  [1mSELECT `filter_types`.* FROM `filter_types` WHERE `filter_types`.`code` = 'price' LIMIT 1[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO `filters` (`code`, `created_at`, `description`, `filter_type_id`, `index_order`, `name`, `status`, `updated_at`) VALUES ('staff_confirmation', '2016-01-18 01:06:27', 'Staff confirmation', 7, 99, 'Staff confirmation', 1, '2016-01-18 01:06:27')
  [1m[36m (0.3ms)[0m  [1mCOMMIT[0m
  [1m[35m (0.2ms)[0m  SELECT COUNT(*) FROM `filters` WHERE `filters`.`code` = 'sign_in_window'
  [1m[36mFilter Load (0.2ms)[0m  [1mSELECT `filters`.* FROM `filters` WHERE `filters`.`code` = 'sign_in_window' AND `filters`.`name` = 'Sign in window' AND `filters`.`description` = 'Sign in window' AND `filters`.`filter_type_id` = 7 LIMIT 1[0m
  [1m[35m (0.1ms)[0m  BEGIN
  [1m[36mFilter Exists (0.2ms)[0m  [1mSELECT 1 AS one FROM `filters` WHERE (`filters`.`name` = BINARY 'Sign in window' AND `filters`.`filter_type_id` = 7) LIMIT 1[0m
  [1m[35mFilterType Load (0.2ms)[0m  SELECT `filter_types`.* FROM `filter_types` WHERE `filter_types`.`code` = 'cuisine' LIMIT 1
  [1m[36mFilterType Load (0.1ms)[0m  [1mSELECT `filter_types`.* FROM `filter_types` WHERE `filter_types`.`code` = 'price' LIMIT 1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO `filters` (`code`, `created_at`, `description`, `filter_type_id`, `index_order`, `name`, `status`, `updated_at`) VALUES ('sign_in_window', '2016-01-18 01:06:27', 'Sign in window', 7, 99, 'Sign in window', 1, '2016-01-18 01:06:27')
  [1m[36m (0.4ms)[0m  [1mCOMMIT[0m
  [1m[35m (0.2ms)[0m  SELECT COUNT(*) FROM `filters` WHERE `filters`.`code` = 'certificate'
  [1m[36mFilter Load (0.2ms)[0m  [1mSELECT `filters`.* FROM `filters` WHERE `filters`.`code` = 'certificate' AND `filters`.`name` = 'Certificate available' AND `filters`.`description` = 'Certificate available' AND `filters`.`filter_type_id` = 7 LIMIT 1[0m
  [1m[35m (0.1ms)[0m  BEGIN
  [1m[36mFilter Exists (0.2ms)[0m  [1mSELECT 1 AS one FROM `filters` WHERE (`filters`.`name` = BINARY 'Certificate available' AND `filters`.`filter_type_id` = 7) LIMIT 1[0m
  [1m[35mFilterType Load (0.1ms)[0m  SELECT `filter_types`.* FROM `filter_types` WHERE `filter_types`.`code` = 'cuisine' LIMIT 1
  [1m[36mFilterType Load (0.2ms)[0m  [1mSELECT `filter_types`.* FROM `filter_types` WHERE `filter_types`.`code` = 'price' LIMIT 1[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO `filters` (`code`, `created_at`, `description`, `filter_type_id`, `index_order`, `name`, `status`, `updated_at`) VALUES ('certificate_available', '2016-01-18 01:06:27', 'Certificate available', 7, 99, 'Certificate available', 1, '2016-01-18 01:06:27')
  [1m[36m (0.4ms)[0m  [1mCOMMIT[0m
  [1m[35m (0.2ms)[0m  SELECT COUNT(*) FROM `filters` WHERE `filters`.`code` = 'offer'
  [1m[36mFilter Load (0.2ms)[0m  [1mSELECT `filters`.* FROM `filters` WHERE `filters`.`code` = 'offer' AND `filters`.`name` = 'Restaurant with offers' AND `filters`.`description` = 'Restaurant with offers' AND `filters`.`filter_type_id` = 8 LIMIT 1[0m
  [1m[35m (0.1ms)[0m  BEGIN
  [1m[36mFilter Exists (0.2ms)[0m  [1mSELECT 1 AS one FROM `filters` WHERE (`filters`.`name` = BINARY 'Restaurant with offers' AND `filters`.`filter_type_id` = 8) LIMIT 1[0m
  [1m[35mFilterType Load (0.1ms)[0m  SELECT `filter_types`.* FROM `filter_types` WHERE `filter_types`.`code` = 'cuisine' LIMIT 1
  [1m[36mFilterType Load (0.1ms)[0m  [1mSELECT `filter_types`.* FROM `filter_types` WHERE `filter_types`.`code` = 'price' LIMIT 1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO `filters` (`code`, `created_at`, `description`, `filter_type_id`, `index_order`, `name`, `status`, `updated_at`) VALUES ('restaurant_with_offers', '2016-01-18 01:06:27', 'Restaurant with offers', 8, 99, 'Restaurant with offers', 1, '2016-01-18 01:06:27')
  [1m[36m (0.4ms)[0m  [1mCOMMIT[0m
  [1m[35m (0.2ms)[0m  SELECT COUNT(*) FROM `filters` WHERE `filters`.`code` = 'organic'
  [1m[36mFilter Load (0.2ms)[0m  [1mSELECT `filters`.* FROM `filters` WHERE `filters`.`code` = 'organic' AND `filters`.`name` = 'Organic Available' AND `filters`.`description` = 'Organic available' AND `filters`.`filter_type_id` = 9 LIMIT 1[0m
  [1m[35m (0.1ms)[0m  BEGIN
  [1m[36mFilter Exists (0.2ms)[0m  [1mSELECT 1 AS one FROM `filters` WHERE (`filters`.`name` = BINARY 'Organic Available' AND `filters`.`filter_type_id` = 9) LIMIT 1[0m
  [1m[35mFilterType Load (0.2ms)[0m  SELECT `filter_types`.* FROM `filter_types` WHERE `filter_types`.`code` = 'cuisine' LIMIT 1
  [1m[36mFilterType Load (0.1ms)[0m  [1mSELECT `filter_types`.* FROM `filter_types` WHERE `filter_types`.`code` = 'price' LIMIT 1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO `filters` (`code`, `created_at`, `description`, `filter_type_id`, `index_order`, `name`, `status`, `updated_at`) VALUES ('organic_available', '2016-01-18 01:06:27', 'Organic available', 9, 99, 'Organic Available', 1, '2016-01-18 01:06:27')
  [1m[36m (0.4ms)[0m  [1mCOMMIT[0m
  [1m[35mFilterType Load (0.2ms)[0m  SELECT `filter_types`.* FROM `filter_types` 
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35m (0.2ms)[0m  UPDATE `filter_types` SET `index_order` = 4, `updated_at` = '2016-01-18 01:06:27' WHERE `filter_types`.`id` = 1
  [1m[36m (0.4ms)[0m  [1mCOMMIT[0m
  [1m[35m (0.1ms)[0m  BEGIN
  [1m[36m (0.2ms)[0m  [1mUPDATE `filter_types` SET `index_order` = 6, `updated_at` = '2016-01-18 01:06:27' WHERE `filter_types`.`id` = 2[0m
  [1m[35m (0.3ms)[0m  COMMIT
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35m (0.2ms)[0m  UPDATE `filter_types` SET `index_order` = 2, `updated_at` = '2016-01-18 01:06:27' WHERE `filter_types`.`id` = 3
  [1m[36m (0.4ms)[0m  [1mCOMMIT[0m
  [1m[35m (0.1ms)[0m  BEGIN
  [1m[36m (0.1ms)[0m  [1mUPDATE `filter_types` SET `index_order` = 5, `updated_at` = '2016-01-18 01:06:27' WHERE `filter_types`.`id` = 4[0m
  [1m[35m (0.4ms)[0m  COMMIT
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35m (0.1ms)[0m  UPDATE `filter_types` SET `index_order` = 3, `updated_at` = '2016-01-18 01:06:27' WHERE `filter_types`.`id` = 5
  [1m[36m (0.3ms)[0m  [1mCOMMIT[0m
  [1m[35m (0.1ms)[0m  BEGIN
  [1m[36m (0.1ms)[0m  [1mUPDATE `filter_types` SET `index_order` = 5, `updated_at` = '2016-01-18 01:06:27' WHERE `filter_types`.`id` = 6[0m
  [1m[35m (0.3ms)[0m  COMMIT
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35m (0.1ms)[0m  UPDATE `filter_types` SET `index_order` = 1, `updated_at` = '2016-01-18 01:06:27' WHERE `filter_types`.`id` = 7
  [1m[36m (0.3ms)[0m  [1mCOMMIT[0m
  [1m[35m (0.1ms)[0m  BEGIN
  [1m[36m (0.1ms)[0m  [1mUPDATE `filter_types` SET `index_order` = 5, `updated_at` = '2016-01-18 01:06:27' WHERE `filter_types`.`id` = 8[0m
  [1m[35m (0.3ms)[0m  COMMIT
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35m (0.1ms)[0m  UPDATE `filter_types` SET `index_order` = 5, `updated_at` = '2016-01-18 01:06:27' WHERE `filter_types`.`id` = 9
  [1m[36m (0.4ms)[0m  [1mCOMMIT[0m
  [1m[35mBasicsPage Load (0.2ms)[0m  SELECT `basics_pages`.* FROM `basics_pages` WHERE `basics_pages`.`page_name` = 'About us' LIMIT 1
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO `basics_pages` (`created_at`, `page_content`, `page_name`, `page_uid`, `updated_at`) VALUES ('2016-01-18 01:06:27', NULL, 'About us', NULL, '2016-01-18 01:06:27')
  [1m[36m (0.4ms)[0m  [1mCOMMIT[0m
  [1m[35mBasicsPage Load (0.2ms)[0m  SELECT `basics_pages`.* FROM `basics_pages` WHERE `basics_pages`.`page_name` = 'Contact us' LIMIT 1
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO `basics_pages` (`created_at`, `page_content`, `page_name`, `page_uid`, `updated_at`) VALUES ('2016-01-18 01:06:27', NULL, 'Contact us', NULL, '2016-01-18 01:06:27')
  [1m[36m (0.6ms)[0m  [1mCOMMIT[0m
  [1m[35mBasicsPage Load (0.1ms)[0m  SELECT `basics_pages`.* FROM `basics_pages` WHERE `basics_pages`.`page_name` = 'How it works' LIMIT 1
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO `basics_pages` (`created_at`, `page_content`, `page_name`, `page_uid`, `updated_at`) VALUES ('2016-01-18 01:06:27', NULL, 'How it works', NULL, '2016-01-18 01:06:27')
  [1m[36m (0.4ms)[0m  [1mCOMMIT[0m
  [1m[35mBasicsPage Load (0.2ms)[0m  SELECT `basics_pages`.* FROM `basics_pages` WHERE `basics_pages`.`page_name` = 'FAQ\'s' LIMIT 1
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO `basics_pages` (`created_at`, `page_content`, `page_name`, `page_uid`, `updated_at`) VALUES ('2016-01-18 01:06:27', NULL, 'FAQ\'s', NULL, '2016-01-18 01:06:27')
  [1m[36m (0.4ms)[0m  [1mCOMMIT[0m
  [1m[35mBasicsPage Load (0.2ms)[0m  SELECT `basics_pages`.* FROM `basics_pages` WHERE `basics_pages`.`page_name` = 'Terms & Conditions' LIMIT 1
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO `basics_pages` (`created_at`, `page_content`, `page_name`, `page_uid`, `updated_at`) VALUES ('2016-01-18 01:06:27', NULL, 'Terms & Conditions', NULL, '2016-01-18 01:06:27')
  [1m[36m (0.4ms)[0m  [1mCOMMIT[0m
  [1m[35mBasicsPage Load (0.2ms)[0m  SELECT `basics_pages`.* FROM `basics_pages` WHERE `basics_pages`.`page_name` = 'Footer' LIMIT 1
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO `basics_pages` (`created_at`, `page_content`, `page_name`, `page_uid`, `updated_at`) VALUES ('2016-01-18 01:06:27', NULL, 'Footer', NULL, '2016-01-18 01:06:27')
  [1m[36m (0.4ms)[0m  [1mCOMMIT[0m
  [1m[35mUser Load (0.2ms)[0m  SELECT `users`.* FROM `users` WHERE `users`.`email` = 'admin@nexlesoft.com' LIMIT 1
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35mUser Exists (0.3ms)[0m  SELECT 1 AS one FROM `users` WHERE `users`.`email` = BINARY 'admin@nexlesoft.com' LIMIT 1
  [1m[36mUser Exists (0.1ms)[0m  [1mSELECT 1 AS one FROM `users` WHERE `users`.`username` = BINARY 'adminnexle' LIMIT 1[0m
  [1m[35mUser Load (0.2ms)[0m  SELECT `users`.* FROM `users` WHERE `users`.`confirmation_token` = 'JCkqM3rnoVqLysgDBiNT' LIMIT 1
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO `users` (`address`, `admin_role`, `authentication_token`, `avatar_fb_url`, `avatar_name`, `avatar_uid`, `confirmation_sent_at`, `confirmation_token`, `confirmed_at`, `created_at`, `current_sign_in_at`, `current_sign_in_ip`, `device_token`, `device_type`, `email`, `encrypted_password`, `failed_attempts`, `fb_access_token`, `first_name`, `gem_hunter`, `gem_hunter_wordpress_url`, `im`, `is_subscribed`, `join_mailing_list`, `last_name`, `last_sign_in_at`, `last_sign_in_ip`, `locked_at`, `middle_name`, `name`, `phone`, `postcode`, `provider`, `remember_created_at`, `reset_password_sent_at`, `reset_password_token`, `restaurant_owner_role`, `sign_in_count`, `status`, `uid`, `unconfirmed_email`, `unlock_token`, `updated_at`, `username`) VALUES (NULL, 1, NULL, NULL, NULL, NULL, '2016-01-18 01:06:27', 'JCkqM3rnoVqLysgDBiNT', NULL, '2016-01-18 01:06:27', NULL, NULL, NULL, NULL, 'admin@nexlesoft.com', '$2a$10$LJ9nSyxugjUfBrczBmq/juAigXOxx3OdonTMiZIfLvw19sMZ79jmy', 0, NULL, 'Admin', 0, NULL, NULL, 1, NULL, 'Nexle', NULL, NULL, NULL, NULL, NULL, NULL, NULL, NULL, NULL, NULL, NULL, 0, 0, 'verified', NULL, NULL, NULL, '2016-01-18 01:06:27', 'adminnexle')[0m
  Rendered halalgem_mail/confirmation_instructions.html.erb (9.1ms)

Sent mail to admin@nexlesoft.com (1755ms)
Date: Mon, 18 Jan 2016 02:06:30 +0100
From: info@halalgems.com
Reply-To: info@halalgems.com
To: admin@nexlesoft.com
Message-ID: <569c3a963a0b8_4ad73ffa0185a1fc92a9@Kevins-Mac.local.mail>
Subject: Confirmation instructions
Mime-Version: 1.0
Content-Type: text/html;
 charset=UTF-8
Content-Transfer-Encoding: 7bit

<p>Dear adminnexle, You're almost there!</p>
<p>
Please click on this link so that we know you're real. <a href="http://localhost:3000/users/confirmation?confirmation_token=JCkqM3rnoVqLysgDBiNT">Confirm my account</a> Once you do this you'll be able to write reviews, save your favourite restaurants and receive special offers and exclusive news.</p>

<p>We're excited to have you join us!</p>
<p>Yours,<br>
<span>Sara</span> halalgems admin team</p>

  [1m[35m (1.7ms)[0m  COMMIT
  [1m[36mPlanType Load (0.3ms)[0m  [1mSELECT `plan_types`.* FROM `plan_types` WHERE `plan_types`.`name` = 'Annual' AND `plan_types`.`number_of_months` = 12 LIMIT 1[0m
  [1m[35m (0.2ms)[0m  BEGIN
  [1m[36mSQL (0.5ms)[0m  [1mINSERT INTO `plan_types` (`created_at`, `name`, `number_of_months`, `updated_at`) VALUES ('2016-01-18 01:06:32', 'Annual', 12, '2016-01-18 01:06:32')[0m
  [1m[35m (0.8ms)[0m  COMMIT
  [1m[36mPlanType Load (0.3ms)[0m  [1mSELECT `plan_types`.* FROM `plan_types` WHERE `plan_types`.`name` = 'Monthly' AND `plan_types`.`number_of_months` = 1 LIMIT 1[0m
  [1m[35m (0.2ms)[0m  BEGIN
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO `plan_types` (`created_at`, `name`, `number_of_months`, `updated_at`) VALUES ('2016-01-18 01:06:32', 'Monthly', 1, '2016-01-18 01:06:32')[0m
  [1m[35m (0.7ms)[0m  COMMIT
  [1m[36mPlan Load (0.3ms)[0m  [1mSELECT `plans`.* FROM `plans` WHERE `plans`.`name` = 'Annual' AND `plans`.`amount` = 20 AND `plans`.`plan_type_id` = 1 AND `plans`.`description` = 'When you sign up for 1 year' LIMIT 1[0m
  [1m[35m (0.3ms)[0m  BEGIN
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO `plans` (`amount`, `created_at`, `description`, `name`, `plan_type_id`, `updated_at`) VALUES (20, '2016-01-18 01:06:32', 'When you sign up for 1 year', 'Annual', 1, '2016-01-18 01:06:32')[0m
  [1m[35m (0.8ms)[0m  COMMIT
  [1m[36mPlan Load (0.3ms)[0m  [1mSELECT `plans`.* FROM `plans` WHERE `plans`.`name` = 'Monthly' AND `plans`.`amount` = 30 AND `plans`.`plan_type_id` = 2 AND `plans`.`description` = 'Lorem ipsum' LIMIT 1[0m
  [1m[35m (0.2ms)[0m  BEGIN
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO `plans` (`amount`, `created_at`, `description`, `name`, `plan_type_id`, `updated_at`) VALUES (30, '2016-01-18 01:06:32', 'Lorem ipsum', 'Monthly', 2, '2016-01-18 01:06:32')[0m
  [1m[35m (0.8ms)[0m  COMMIT
Connecting to database specified by database.yml
DEPRECATION WARNING: Passing :tag, :class and others to use is deprecated. Please invoke b.use :label, :wrap_with => {:class=>"simple_label"} instead. (called from block (2 levels) in <top (required)> at /Users/kevinmuller/halalgems_backend/config/initializers/simple_form.rb:67)


Started GET "/users/sign_in" for 127.0.0.1 at 2016-01-18 02:07:46 +0100
Processing by SessionsController#new as HTML
  Rendered sessions/new.html.slim within layouts/application (23.0ms)
  Rendered layouts/_header.html.erb (2.7ms)
  Rendered layouts/_main_menu.html.slim (7.3ms)
  Rendered layouts/_sub_main_menu.html.slim (3.4ms)
  Rendered layouts/_flash_messages.html.erb (0.5ms)
  [1m[36mBasicsPage Load (0.2ms)[0m  [1mSELECT `basics_pages`.* FROM `basics_pages` WHERE `basics_pages`.`page_name` = 'Footer' LIMIT 1[0m
  Rendered layouts/_footer.html.slim (20.7ms)
Completed 200 OK in 173ms (Views: 138.3ms | ActiveRecord: 4.3ms)


Started POST "/users/sign_in" for 127.0.0.1 at 2016-01-18 02:07:48 +0100
Processing by SessionsController#create as HTML
  Parameters: {"utf8"=>"âœ“", "authenticity_token"=>"Izf8UbDsiwXC7BlcjwDbXYW5w4d6gXlx2b0iJtHCBu4=", "user"=>{"email"=>"kevin.muller1220@gmail.com", "password"=>"[FILTERED]"}, "button"=>""}
  [1m[35mUser Load (0.3ms)[0m  SELECT `users`.* FROM `users` WHERE `users`.`email` = 'kevin.muller1220@gmail.com' LIMIT 1
Completed 401 Unauthorized in 3ms
Processing by SessionsController#new as HTML
  Parameters: {"utf8"=>"âœ“", "authenticity_token"=>"Izf8UbDsiwXC7BlcjwDbXYW5w4d6gXlx2b0iJtHCBu4=", "user"=>{"email"=>"kevin.muller1220@gmail.com", "password"=>"[FILTERED]"}, "button"=>""}
  Rendered sessions/new.html.slim within layouts/application (1.2ms)
  Rendered layouts/_header.html.erb (1.2ms)
  Rendered layouts/_main_menu.html.slim (0.3ms)
  Rendered layouts/_sub_main_menu.html.slim (0.0ms)
  Rendered layouts/_flash_messages.html.erb (0.1ms)
  [1m[36mBasicsPage Load (0.3ms)[0m  [1mSELECT `basics_pages`.* FROM `basics_pages` WHERE `basics_pages`.`page_name` = 'Footer' LIMIT 1[0m
  Rendered layouts/_footer.html.slim (2.4ms)
Completed 200 OK in 76ms (Views: 21.3ms | ActiveRecord: 0.3ms)


Started POST "/users/sign_in" for 127.0.0.1 at 2016-01-18 02:07:58 +0100
Processing by SessionsController#create as HTML
  Parameters: {"utf8"=>"âœ“", "authenticity_token"=>"Izf8UbDsiwXC7BlcjwDbXYW5w4d6gXlx2b0iJtHCBu4=", "user"=>{"email"=>"kevin.muller1220@gmail.com", "password"=>"[FILTERED]"}, "button"=>""}
  [1m[35mUser Load (0.3ms)[0m  SELECT `users`.* FROM `users` WHERE `users`.`email` = 'kevin.muller1220@gmail.com' LIMIT 1
Completed 401 Unauthorized in 2ms
Processing by SessionsController#new as HTML
  Parameters: {"utf8"=>"âœ“", "authenticity_token"=>"Izf8UbDsiwXC7BlcjwDbXYW5w4d6gXlx2b0iJtHCBu4=", "user"=>{"email"=>"kevin.muller1220@gmail.com", "password"=>"[FILTERED]"}, "button"=>""}
  Rendered sessions/new.html.slim within layouts/application (1.4ms)
  Rendered layouts/_header.html.erb (1.1ms)
  Rendered layouts/_main_menu.html.slim (0.3ms)
  Rendered layouts/_sub_main_menu.html.slim (0.0ms)
  Rendered layouts/_flash_messages.html.erb (0.0ms)
  [1m[36mBasicsPage Load (0.3ms)[0m  [1mSELECT `basics_pages`.* FROM `basics_pages` WHERE `basics_pages`.`page_name` = 'Footer' LIMIT 1[0m
  Rendered layouts/_footer.html.slim (2.6ms)
Completed 200 OK in 77ms (Views: 22.5ms | ActiveRecord: 0.3ms)


Started POST "/users/sign_in" for 127.0.0.1 at 2016-01-18 02:09:15 +0100
Processing by SessionsController#create as HTML
  Parameters: {"utf8"=>"âœ“", "authenticity_token"=>"Izf8UbDsiwXC7BlcjwDbXYW5w4d6gXlx2b0iJtHCBu4=", "user"=>{"email"=>"kevin.muller1220@gmail.com", "password"=>"[FILTERED]"}, "button"=>""}
  [1m[35mUser Load (0.3ms)[0m  SELECT `users`.* FROM `users` WHERE `users`.`email` = 'kevin.muller1220@gmail.com' LIMIT 1
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35m (0.1ms)[0m  COMMIT
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35m (0.3ms)[0m  UPDATE `users` SET `last_sign_in_at` = '2016-01-18 01:09:15', `current_sign_in_at` = '2016-01-18 01:09:15', `last_sign_in_ip` = '127.0.0.1', `current_sign_in_ip` = '127.0.0.1', `sign_in_count` = 1, `updated_at` = '2016-01-18 01:09:15' WHERE `users`.`id` = 1
  [1m[36m (0.5ms)[0m  [1mCOMMIT[0m
Redirected to http://localhost:3000/admin
Completed 302 Found in 81ms (ActiveRecord: 1.4ms)


Started GET "/admin" for 127.0.0.1 at 2016-01-18 02:09:15 +0100
  [1m[35m (0.2ms)[0m  SELECT COUNT(*) FROM `filter_types` WHERE (code = 'features')
Processing by RestaurantsController#index as HTML
  [1m[36mUser Load (0.4ms)[0m  [1mSELECT `users`.* FROM `users` WHERE `users`.`id` = 1 LIMIT 1[0m
  Rendered shared/_restaurant_manage_tabs.html.erb (1.3ms)
  Rendered restaurants/_condition_fields.html.erb (13.3ms)
  [1m[35mRestaurant Load (0.3ms)[0m  SELECT `restaurants`.* FROM `restaurants` ORDER BY disabled ASC,created_at DESC LIMIT 12 OFFSET 0
  [1m[36m (0.2ms)[0m  [1mSELECT COUNT(*) FROM `restaurants` [0m
  Rendered restaurants/index.html.erb within layouts/admin (42.7ms)
Completed 200 OK in 99ms (Views: 92.1ms | ActiveRecord: 2.9ms)


Started GET "/admin/collections" for 127.0.0.1 at 2016-01-18 02:09:17 +0100
Processing by CollectionsController#index as HTML
  Rendered shared/_restaurant_manage_tabs.html.erb (1.0ms)
  [1m[35mCollection Load (0.2ms)[0m  SELECT `collections`.* FROM `collections` ORDER BY name ASC, created_at DESC LIMIT 12 OFFSET 0
  [1m[36m (0.2ms)[0m  [1mSELECT COUNT(*) FROM `collections` [0m
  Rendered collections/index.erb within layouts/admin (11.7ms)
  [1m[35mUser Load (0.3ms)[0m  SELECT `users`.* FROM `users` WHERE `users`.`id` = 1 LIMIT 1
Completed 200 OK in 31ms (Views: 27.1ms | ActiveRecord: 2.7ms)


Started GET "/admin/collections/admin_new_collection" for 127.0.0.1 at 2016-01-18 02:09:19 +0100
Processing by CollectionsController#admin_new_collection as HTML
  [1m[36mUser Load (0.2ms)[0m  [1mSELECT `users`.* FROM `users` WHERE `users`.`id` = 1 LIMIT 1[0m
  Rendered collections/_collection_form.html.erb (6.4ms)
  Rendered collections/_collection_restaurants_form.html.erb (0.6ms)
  Rendered collections/admin_new_collection.html.erb within layouts/admin (44.0ms)
Completed 200 OK in 62ms (Views: 57.7ms | ActiveRecord: 0.2ms)


Started POST "/admin/collections" for 127.0.0.1 at 2016-01-18 02:09:31 +0100
Processing by CollectionsController#create as HTML
  Parameters: {"utf8"=>"âœ“", "authenticity_token"=>"Izf8UbDsiwXC7BlcjwDbXYW5w4d6gXlx2b0iJtHCBu4=", "admin"=>"true", "collection"=>{"name"=>"test", "description"=>"testsadf"}, "collection_image"=>{"image"=>#<ActionDispatch::Http::UploadedFile:0x007fc258845d10 @original_filename="sunday_roast.png", @content_type="image/png", @headers="Content-Disposition: form-data; name=\"collection_image[image]\"; filename=\"sunday_roast.png\"\r\nContent-Type: image/png\r\n", @tempfile=#<Tempfile:/var/folders/rf/q4l8n5k56pnbjgkdtzrhq_w00000gn/T/RackMultipart20160118-19170-vx0x2s>>}}
  [1m[35mCollection Load (0.6ms)[0m  SELECT `collections`.* FROM `collections` WHERE `collections`.`name` = 'test' LIMIT 1
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35m (0.1ms)[0m  COMMIT
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO `collections` (`created_at`, `description`, `disabled`, `image_url`, `name`, `updated_at`) VALUES ('2016-01-18 01:09:31', 'testsadf', 0, NULL, 'test', '2016-01-18 01:09:31')
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO `collection_images` (`collection_id`, `created_at`, `image_name`, `image_uid`, `text_content`, `text_hyperlink`, `text_title`, `updated_at`) VALUES (1, '2016-01-18 01:09:31', 'sunday_roast.png', '2016/01/18/02_09_31_540_sunday_roast.png', NULL, NULL, NULL, '2016-01-18 01:09:31')[0m
  [1m[35m (0.5ms)[0m  COMMIT
Redirected to http://localhost:3000/collection/1/edit
Completed 302 Found in 86ms (ActiveRecord: 4.3ms)


Started GET "/collection/1/edit" for 127.0.0.1 at 2016-01-18 02:09:31 +0100
Processing by CollectionsController#edit_collection as HTML
  Parameters: {"id"=>"1"}
  [1m[36mUser Load (0.3ms)[0m  [1mSELECT `users`.* FROM `users` WHERE `users`.`id` = 1 LIMIT 1[0m
  [1m[35mCollection Load (0.2ms)[0m  SELECT `collections`.* FROM `collections` WHERE `collections`.`id` = 1 LIMIT 1
  [1m[36mCollectionImage Load (0.3ms)[0m  [1mSELECT `collection_images`.* FROM `collection_images` WHERE (collection_id = 1) LIMIT 1[0m
  Rendered collections/_collection_form.html.erb (26.0ms)
  Rendered collections/_collection_restaurants_form.html.erb (0.5ms)
  Rendered collections/edit_collection.html.erb within layouts/admin (53.2ms)
Completed 200 OK in 69ms (Views: 65.8ms | ActiveRecord: 0.7ms)


Started GET "/admin/restaurants" for 127.0.0.1 at 2016-01-18 02:09:35 +0100
Processing by RestaurantsController#index as HTML
  [1m[35mUser Load (0.3ms)[0m  SELECT `users`.* FROM `users` WHERE `users`.`id` = 1 LIMIT 1
  Rendered shared/_restaurant_manage_tabs.html.erb (0.8ms)
  Rendered restaurants/_condition_fields.html.erb (9.5ms)
  [1m[36mRestaurant Load (0.3ms)[0m  [1mSELECT `restaurants`.* FROM `restaurants` ORDER BY disabled ASC,created_at DESC LIMIT 12 OFFSET 0[0m
  [1m[35m (0.1ms)[0m  SELECT COUNT(*) FROM `restaurants` 
  Rendered restaurants/index.html.erb within layouts/admin (33.6ms)
Completed 200 OK in 44ms (Views: 40.4ms | ActiveRecord: 0.7ms)


Started GET "/admin/collections" for 127.0.0.1 at 2016-01-18 02:09:37 +0100
Processing by CollectionsController#index as HTML
  Rendered shared/_restaurant_manage_tabs.html.erb (0.9ms)
  [1m[36mCollection Load (0.4ms)[0m  [1mSELECT `collections`.* FROM `collections` ORDER BY name ASC, created_at DESC LIMIT 12 OFFSET 0[0m
  [1m[35mCollectionImage Load (0.3ms)[0m  SELECT `collection_images`.* FROM `collection_images` WHERE (collection_id = 1) LIMIT 1
  [1m[36m (0.1ms)[0m  [1mSELECT COUNT(*) FROM `collections` [0m
  Rendered collections/index.erb within layouts/admin (11.3ms)
  [1m[35mUser Load (0.2ms)[0m  SELECT `users`.* FROM `users` WHERE `users`.`id` = 1 LIMIT 1
Completed 200 OK in 33ms (Views: 30.9ms | ActiveRecord: 1.0ms)


Started GET "/admin/collections/destroy/1" for 127.0.0.1 at 2016-01-18 02:13:32 +0100
Processing by CollectionsController#destroy as HTML
  Parameters: {"id"=>"1"}
  [1m[36mCollection Load (0.8ms)[0m  [1mSELECT `collections`.* FROM `collections` WHERE `collections`.`id` = 1 LIMIT 1[0m
  [1m[35m (0.1ms)[0m  BEGIN
  [1m[36mCollectionRestaurant Load (0.2ms)[0m  [1mSELECT `collection_restaurants`.* FROM `collection_restaurants` WHERE `collection_restaurants`.`collection_id` = 1[0m
  [1m[35mCollectionImage Load (0.2ms)[0m  SELECT `collection_images`.* FROM `collection_images` WHERE `collection_images`.`collection_id` = 1 LIMIT 1
  [1m[36mSQL (0.2ms)[0m  [1mDELETE FROM `collection_images` WHERE `collection_images`.`id` = 1[0m
  [1m[35mSQL (0.2ms)[0m  DELETE FROM `collections` WHERE `collections`.`id` = 1
  [1m[36m (12.3ms)[0m  [1mCOMMIT[0m
Redirected to http://localhost:3000/admin/collections
Completed 302 Found in 292ms (ActiveRecord: 246.5ms)


Started GET "/admin/collections" for 127.0.0.1 at 2016-01-18 02:13:33 +0100
Processing by CollectionsController#index as HTML
  Rendered shared/_restaurant_manage_tabs.html.erb (0.8ms)
  [1m[35mCollection Load (0.3ms)[0m  SELECT `collections`.* FROM `collections` ORDER BY name ASC, created_at DESC LIMIT 12 OFFSET 0
  [1m[36m (0.1ms)[0m  [1mSELECT COUNT(*) FROM `collections` [0m
  Rendered collections/index.erb within layouts/admin (25.8ms)
  [1m[35mUser Load (0.4ms)[0m  SELECT `users`.* FROM `users` WHERE `users`.`id` = 1 LIMIT 1
Completed 200 OK in 51ms (Views: 49.2ms | ActiveRecord: 0.8ms)


Started GET "/admin/collections" for 127.0.0.1 at 2016-01-18 02:14:22 +0100
Processing by CollectionsController#index as HTML
  Rendered shared/_restaurant_manage_tabs.html.erb (73.8ms)
  [1m[36mCollection Load (0.2ms)[0m  [1mSELECT `collections`.* FROM `collections` ORDER BY name ASC, created_at DESC LIMIT 12 OFFSET 0[0m
  [1m[35m (0.2ms)[0m  SELECT COUNT(*) FROM `collections` 
  Rendered collections/index.erb within layouts/admin (85.0ms)
  [1m[36mUser Load (0.2ms)[0m  [1mSELECT `users`.* FROM `users` WHERE `users`.`id` = 1 LIMIT 1[0m
Completed 200 OK in 153ms (Views: 139.5ms | ActiveRecord: 11.2ms)


Started GET "/admin/collections" for 127.0.0.1 at 2016-01-18 02:14:26 +0100
Processing by CollectionsController#index as HTML
  Rendered shared/_restaurant_manage_tabs.html.erb (1.0ms)
  [1m[35mCollection Load (0.3ms)[0m  SELECT `collections`.* FROM `collections` ORDER BY name ASC, created_at DESC LIMIT 12 OFFSET 0
  [1m[36m (0.1ms)[0m  [1mSELECT COUNT(*) FROM `collections` [0m
  Rendered collections/index.erb within layouts/admin (9.8ms)
  [1m[35mUser Load (0.3ms)[0m  SELECT `users`.* FROM `users` WHERE `users`.`id` = 1 LIMIT 1
Completed 200 OK in 21ms (Views: 19.7ms | ActiveRecord: 0.7ms)


Started GET "/admin/collections?q%5Bs%5D=name+asc" for 127.0.0.1 at 2016-01-18 02:14:28 +0100
Processing by CollectionsController#index as HTML
  Parameters: {"q"=>{"s"=>"name asc"}}
  Rendered shared/_restaurant_manage_tabs.html.erb (0.6ms)
  [1m[36mCollection Load (0.3ms)[0m  [1mSELECT `collections`.* FROM `collections` ORDER BY `collections`.`name` ASC, name ASC, created_at DESC LIMIT 12 OFFSET 0[0m
  [1m[35m (0.2ms)[0m  SELECT COUNT(*) FROM `collections` 
  Rendered collections/index.erb within layouts/admin (7.3ms)
  [1m[36mUser Load (0.3ms)[0m  [1mSELECT `users`.* FROM `users` WHERE `users`.`id` = 1 LIMIT 1[0m
Completed 200 OK in 16ms (Views: 14.1ms | ActiveRecord: 0.8ms)


Started GET "/admin/collections?q%5Bs%5D=name+desc" for 127.0.0.1 at 2016-01-18 02:14:30 +0100
Processing by CollectionsController#index as HTML
  Parameters: {"q"=>{"s"=>"name desc"}}
  Rendered shared/_restaurant_manage_tabs.html.erb (0.5ms)
  [1m[35mCollection Load (0.3ms)[0m  SELECT `collections`.* FROM `collections` ORDER BY `collections`.`name` DESC, name ASC, created_at DESC LIMIT 12 OFFSET 0
  [1m[36m (0.2ms)[0m  [1mSELECT COUNT(*) FROM `collections` [0m
  Rendered collections/index.erb within layouts/admin (7.2ms)
  [1m[35mUser Load (0.3ms)[0m  SELECT `users`.* FROM `users` WHERE `users`.`id` = 1 LIMIT 1
Completed 200 OK in 15ms (Views: 13.5ms | ActiveRecord: 0.7ms)


Started GET "/admin/collections/admin_new_collection" for 127.0.0.1 at 2016-01-18 02:14:33 +0100
Processing by CollectionsController#admin_new_collection as HTML
  [1m[36mUser Load (0.3ms)[0m  [1mSELECT `users`.* FROM `users` WHERE `users`.`id` = 1 LIMIT 1[0m
  Rendered collections/_collection_form.html.erb (5.8ms)
  Rendered collections/_collection_restaurants_form.html.erb (0.3ms)
  Rendered collections/admin_new_collection.html.erb within layouts/admin (18.2ms)
Completed 200 OK in 56ms (Views: 28.6ms | ActiveRecord: 0.3ms)


Started POST "/admin/collections" for 127.0.0.1 at 2016-01-18 02:14:43 +0100
Processing by CollectionsController#create as HTML
  Parameters: {"utf8"=>"âœ“", "authenticity_token"=>"Izf8UbDsiwXC7BlcjwDbXYW5w4d6gXlx2b0iJtHCBu4=", "admin"=>"true", "collection"=>{"name"=>"test", "description"=>"tests"}, "collection_image"=>{"image"=>#<ActionDispatch::Http::UploadedFile:0x007fc25889b490 @original_filename="sunday_roast.png", @content_type="image/png", @headers="Content-Disposition: form-data; name=\"collection_image[image]\"; filename=\"sunday_roast.png\"\r\nContent-Type: image/png\r\n", @tempfile=#<Tempfile:/var/folders/rf/q4l8n5k56pnbjgkdtzrhq_w00000gn/T/RackMultipart20160118-19170-lldhnp>>}}
  [1m[35mCollection Load (0.4ms)[0m  SELECT `collections`.* FROM `collections` WHERE `collections`.`name` = 'test' LIMIT 1
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35m (0.1ms)[0m  COMMIT
  [1m[36m (0.3ms)[0m  [1mBEGIN[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO `collections` (`created_at`, `description`, `disabled`, `image_url`, `name`, `updated_at`) VALUES ('2016-01-18 01:14:43', 'tests', 0, NULL, 'test', '2016-01-18 01:14:43')
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO `collection_images` (`collection_id`, `created_at`, `image_name`, `image_uid`, `text_content`, `text_hyperlink`, `text_title`, `updated_at`) VALUES (2, '2016-01-18 01:14:43', 'sunday_roast.png', '2016/01/18/02_14_43_360_sunday_roast.png', NULL, NULL, NULL, '2016-01-18 01:14:43')[0m
  [1m[35m (0.4ms)[0m  COMMIT
Redirected to http://localhost:3000/collection/2/edit
Completed 302 Found in 65ms (ActiveRecord: 3.5ms)


Started GET "/collection/2/edit" for 127.0.0.1 at 2016-01-18 02:14:43 +0100
Processing by CollectionsController#edit_collection as HTML
  Parameters: {"id"=>"2"}
  [1m[36mUser Load (0.3ms)[0m  [1mSELECT `users`.* FROM `users` WHERE `users`.`id` = 1 LIMIT 1[0m
  [1m[35mCollection Load (0.1ms)[0m  SELECT `collections`.* FROM `collections` WHERE `collections`.`id` = 2 LIMIT 1
  [1m[36mCollectionImage Load (0.3ms)[0m  [1mSELECT `collection_images`.* FROM `collection_images` WHERE (collection_id = 2) LIMIT 1[0m
  Rendered collections/_collection_form.html.erb (6.7ms)
  Rendered collections/_collection_restaurants_form.html.erb (0.3ms)
  Rendered collections/edit_collection.html.erb within layouts/admin (28.4ms)
Completed 200 OK in 50ms (Views: 45.9ms | ActiveRecord: 0.7ms)


Started GET "/admin/restaurants" for 127.0.0.1 at 2016-01-18 02:14:45 +0100
  [1m[35m (0.2ms)[0m  SELECT COUNT(*) FROM `filter_types` WHERE (code = 'features')
Processing by RestaurantsController#index as HTML
  [1m[36mUser Load (0.4ms)[0m  [1mSELECT `users`.* FROM `users` WHERE `users`.`id` = 1 LIMIT 1[0m
  Rendered shared/_restaurant_manage_tabs.html.erb (0.8ms)
  Rendered restaurants/_condition_fields.html.erb (15.0ms)
  [1m[35mRestaurant Load (0.4ms)[0m  SELECT `restaurants`.* FROM `restaurants` ORDER BY disabled ASC,created_at DESC LIMIT 12 OFFSET 0
  [1m[36m (0.2ms)[0m  [1mSELECT COUNT(*) FROM `restaurants` [0m
  Rendered restaurants/index.html.erb within layouts/admin (38.0ms)
Completed 200 OK in 61ms (Views: 53.4ms | ActiveRecord: 4.4ms)


Started GET "/admin/collections" for 127.0.0.1 at 2016-01-18 02:14:47 +0100
Processing by CollectionsController#index as HTML
  Rendered shared/_restaurant_manage_tabs.html.erb (0.6ms)
  [1m[35mCollection Load (0.3ms)[0m  SELECT `collections`.* FROM `collections` ORDER BY name ASC, created_at DESC LIMIT 12 OFFSET 0
  [1m[36mCollectionImage Load (0.2ms)[0m  [1mSELECT `collection_images`.* FROM `collection_images` WHERE (collection_id = 2) LIMIT 1[0m
  [1m[35m (0.2ms)[0m  SELECT COUNT(*) FROM `collections` 
  Rendered collections/index.erb within layouts/admin (10.2ms)
  [1m[36mUser Load (0.3ms)[0m  [1mSELECT `users`.* FROM `users` WHERE `users`.`id` = 1 LIMIT 1[0m
Completed 200 OK in 24ms (Views: 22.0ms | ActiveRecord: 0.9ms)


Started GET "/admin/collections" for 127.0.0.1 at 2016-01-18 02:15:39 +0100
Processing by CollectionsController#index as HTML
  Rendered shared/_restaurant_manage_tabs.html.erb (0.8ms)
  [1m[35mCollection Load (0.2ms)[0m  SELECT `collections`.* FROM `collections` ORDER BY name ASC, created_at DESC LIMIT 12 OFFSET 0
  [1m[36mCollectionImage Load (0.2ms)[0m  [1mSELECT `collection_images`.* FROM `collection_images` WHERE (collection_id = 2) LIMIT 1[0m
  [1m[35m (0.3ms)[0m  SELECT COUNT(*) FROM `collections` 
  Rendered collections/index.erb within layouts/admin (37.1ms)
  [1m[36mUser Load (0.2ms)[0m  [1mSELECT `users`.* FROM `users` WHERE `users`.`id` = 1 LIMIT 1[0m
Completed 200 OK in 81ms (Views: 72.0ms | ActiveRecord: 7.2ms)


Started POST "/admin/collections/disable_toggle/2" for 127.0.0.1 at 2016-01-18 02:17:07 +0100
Processing by CollectionsController#disable_toggle as JS
  Parameters: {"id"=>"2"}
  [1m[35mCollection Load (0.6ms)[0m  SELECT `collections`.* FROM `collections` WHERE `collections`.`id` = 2 LIMIT 1
Completed 500 Internal Server Error in 3ms

NoMethodError (undefined method `disable_toggle' for #<Collection:0x007fc258ca97f8>):
  app/controllers/collections_controller.rb:171:in `disable_toggle'


  Rendered /Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_dispatch/middleware/templates/rescues/_trace.erb (1.0ms)
  Rendered /Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_dispatch/middleware/templates/rescues/_request_and_response.erb (1.1ms)
  Rendered /Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_dispatch/middleware/templates/rescues/diagnostics.erb within rescues/layout (43.0ms)


Started GET "/admin/collections" for 127.0.0.1 at 2016-01-18 02:17:10 +0100
Processing by CollectionsController#index as HTML
  Rendered shared/_restaurant_manage_tabs.html.erb (1.1ms)
  [1m[36mCollection Load (0.4ms)[0m  [1mSELECT `collections`.* FROM `collections` ORDER BY name ASC, created_at DESC LIMIT 12 OFFSET 0[0m
  [1m[35mCollectionImage Load (0.2ms)[0m  SELECT `collection_images`.* FROM `collection_images` WHERE (collection_id = 2) LIMIT 1
  [1m[36m (0.2ms)[0m  [1mSELECT COUNT(*) FROM `collections` [0m
  Rendered collections/index.erb within layouts/admin (24.9ms)
  [1m[35mUser Load (0.4ms)[0m  SELECT `users`.* FROM `users` WHERE `users`.`id` = 1 LIMIT 1
Completed 200 OK in 58ms (Views: 55.9ms | ActiveRecord: 1.2ms)


Started GET "/admin/collections" for 127.0.0.1 at 2016-01-18 02:17:59 +0100
Processing by CollectionsController#index as HTML
  Rendered shared/_restaurant_manage_tabs.html.erb (0.8ms)
  [1m[36mCollection Load (0.2ms)[0m  [1mSELECT `collections`.* FROM `collections` ORDER BY name ASC, created_at DESC LIMIT 12 OFFSET 0[0m
  [1m[35mCollectionImage Load (0.3ms)[0m  SELECT `collection_images`.* FROM `collection_images` WHERE (collection_id = 2) LIMIT 1
  [1m[36m (0.2ms)[0m  [1mSELECT COUNT(*) FROM `collections` [0m
  Rendered collections/index.erb within layouts/admin (43.5ms)
  [1m[35mUser Load (0.2ms)[0m  SELECT `users`.* FROM `users` WHERE `users`.`id` = 1 LIMIT 1
Completed 200 OK in 126ms (Views: 116.5ms | ActiveRecord: 7.2ms)


Started GET "/restaurants" for 127.0.0.1 at 2016-01-18 02:25:00 +0100
  [1m[36m (0.2ms)[0m  [1mSELECT COUNT(*) FROM `filter_types` WHERE (code = 'features')[0m
Processing by RestaurantsController#index as HTML
  [1m[35mUser Load (0.3ms)[0m  SELECT `users`.* FROM `users` WHERE `users`.`id` = 1 LIMIT 1
  Rendered shared/_restaurant_manage_tabs.html.erb (0.8ms)
  Rendered restaurants/_condition_fields.html.erb (17.7ms)
  [1m[36mRestaurant Load (0.8ms)[0m  [1mSELECT `restaurants`.* FROM `restaurants` ORDER BY disabled ASC,created_at DESC LIMIT 12 OFFSET 0[0m
  [1m[35mPhoto Load (0.4ms)[0m  SELECT `photos`.* FROM `photos` WHERE (restaurant_id = 903 and cover = true and status = 1) LIMIT 1
  [1m[36mPhoto Load (0.3ms)[0m  [1mSELECT `photos`.* FROM `photos` WHERE `photos`.`restaurant_id` = 903 AND `photos`.`status` = 1 ORDER BY restaurant_id ASC, created_at DESC LIMIT 1[0m
  [1m[35mPhoto Load (0.5ms)[0m  SELECT `photos`.* FROM `photos` WHERE (restaurant_id = 876 and cover = true and status = 1) LIMIT 1
  [1m[36mPhoto Load (0.3ms)[0m  [1mSELECT `photos`.* FROM `photos` WHERE `photos`.`restaurant_id` = 876 AND `photos`.`status` = 1 ORDER BY restaurant_id ASC, created_at DESC LIMIT 1[0m
  [1m[35mPhoto Load (0.3ms)[0m  SELECT `photos`.* FROM `photos` WHERE (restaurant_id = 851 and cover = true and status = 1) LIMIT 1
  [1m[36mPhoto Load (0.3ms)[0m  [1mSELECT `photos`.* FROM `photos` WHERE `photos`.`restaurant_id` = 851 AND `photos`.`status` = 1 ORDER BY restaurant_id ASC, created_at DESC LIMIT 1[0m
  [1m[35mPhoto Load (0.3ms)[0m  SELECT `photos`.* FROM `photos` WHERE (restaurant_id = 693 and cover = true and status = 1) LIMIT 1
  [1m[36mPhoto Load (0.3ms)[0m  [1mSELECT `photos`.* FROM `photos` WHERE `photos`.`restaurant_id` = 693 AND `photos`.`status` = 1 ORDER BY restaurant_id ASC, created_at DESC LIMIT 1[0m
  [1m[35mPhoto Load (0.3ms)[0m  SELECT `photos`.* FROM `photos` WHERE (restaurant_id = 686 and cover = true and status = 1) LIMIT 1
  [1m[36mPhoto Load (0.3ms)[0m  [1mSELECT `photos`.* FROM `photos` WHERE `photos`.`restaurant_id` = 686 AND `photos`.`status` = 1 ORDER BY restaurant_id ASC, created_at DESC LIMIT 1[0m
  [1m[35mPhoto Load (0.3ms)[0m  SELECT `photos`.* FROM `photos` WHERE (restaurant_id = 669 and cover = true and status = 1) LIMIT 1
  [1m[36mPhoto Load (0.3ms)[0m  [1mSELECT `photos`.* FROM `photos` WHERE `photos`.`restaurant_id` = 669 AND `photos`.`status` = 1 ORDER BY restaurant_id ASC, created_at DESC LIMIT 1[0m
  [1m[35mPhoto Load (0.3ms)[0m  SELECT `photos`.* FROM `photos` WHERE (restaurant_id = 251 and cover = true and status = 1) LIMIT 1
  [1m[36mPhoto Load (0.3ms)[0m  [1mSELECT `photos`.* FROM `photos` WHERE `photos`.`restaurant_id` = 251 AND `photos`.`status` = 1 ORDER BY restaurant_id ASC, created_at DESC LIMIT 1[0m
  [1m[35mPhoto Load (0.3ms)[0m  SELECT `photos`.* FROM `photos` WHERE (restaurant_id = 250 and cover = true and status = 1) LIMIT 1
  [1m[36mPhoto Load (0.3ms)[0m  [1mSELECT `photos`.* FROM `photos` WHERE `photos`.`restaurant_id` = 250 AND `photos`.`status` = 1 ORDER BY restaurant_id ASC, created_at DESC LIMIT 1[0m
  [1m[35mPhoto Load (0.3ms)[0m  SELECT `photos`.* FROM `photos` WHERE (restaurant_id = 237 and cover = true and status = 1) LIMIT 1
  [1m[36mPhoto Load (0.3ms)[0m  [1mSELECT `photos`.* FROM `photos` WHERE `photos`.`restaurant_id` = 237 AND `photos`.`status` = 1 ORDER BY restaurant_id ASC, created_at DESC LIMIT 1[0m
  [1m[35mPhoto Load (0.3ms)[0m  SELECT `photos`.* FROM `photos` WHERE (restaurant_id = 231 and cover = true and status = 1) LIMIT 1
  [1m[36mPhoto Load (0.3ms)[0m  [1mSELECT `photos`.* FROM `photos` WHERE `photos`.`restaurant_id` = 231 AND `photos`.`status` = 1 ORDER BY restaurant_id ASC, created_at DESC LIMIT 1[0m
  [1m[35mPhoto Load (0.3ms)[0m  SELECT `photos`.* FROM `photos` WHERE (restaurant_id = 222 and cover = true and status = 1) LIMIT 1
  [1m[36mPhoto Load (0.3ms)[0m  [1mSELECT `photos`.* FROM `photos` WHERE `photos`.`restaurant_id` = 222 AND `photos`.`status` = 1 ORDER BY restaurant_id ASC, created_at DESC LIMIT 1[0m
  [1m[35mPhoto Load (0.3ms)[0m  SELECT `photos`.* FROM `photos` WHERE (restaurant_id = 221 and cover = true and status = 1) LIMIT 1
  [1m[36mPhoto Load (0.3ms)[0m  [1mSELECT `photos`.* FROM `photos` WHERE `photos`.`restaurant_id` = 221 AND `photos`.`status` = 1 ORDER BY restaurant_id ASC, created_at DESC LIMIT 1[0m
  [1m[35m (0.4ms)[0m  SELECT COUNT(*) FROM `restaurants` 
  Rendered restaurants/index.html.erb within layouts/admin (178.9ms)
Completed 200 OK in 215ms (Views: 183.5ms | ActiveRecord: 13.1ms)


Started POST "/admin/restaurants/saras-halal-foods/disable_toggle" for 127.0.0.1 at 2016-01-18 02:25:15 +0100
Processing by RestaurantsController#disable_toggle as JS
  Parameters: {"id"=>"saras-halal-foods"}
  [1m[36mUser Load (0.3ms)[0m  [1mSELECT `users`.* FROM `users` WHERE `users`.`id` = 1 LIMIT 1[0m
  [1m[35mRestaurant Load (1.4ms)[0m  SELECT `restaurants`.* FROM `restaurants` WHERE `restaurants`.`slug` = 'saras-halal-foods' LIMIT 1
  [1m[36m (0.4ms)[0m  [1mBEGIN[0m
  [1m[35mRestaurant Exists (2.4ms)[0m  SELECT 1 AS one FROM `restaurants` WHERE (`restaurants`.`slug` = BINARY 'saras-halal-foods' AND `restaurants`.`id` != 903) LIMIT 1
  [1m[36mFilter Load (0.5ms)[0m  [1mSELECT `filters`.* FROM `filters` INNER JOIN `filters_restaurants` ON `filters`.`id` = `filters_restaurants`.`filter_id` WHERE `filters_restaurants`.`restaurant_id` = 903[0m
  [1m[35mFilterType Load (0.2ms)[0m  SELECT `filter_types`.* FROM `filter_types` INNER JOIN `filter_types_restaurants` ON `filter_types`.`id` = `filter_types_restaurants`.`filter_type_id` WHERE `filter_types_restaurants`.`restaurant_id` = 903
  [1m[36m (0.2ms)[0m  [1mUPDATE `restaurants` SET `disabled` = 0, `updated_at` = '2016-01-18 01:25:15' WHERE `restaurants`.`id` = 903[0m
  [1m[35m (0.4ms)[0m  COMMIT
  Rendered restaurants/disable_toggle.js.erb (0.6ms)
Completed 200 OK in 126ms (Views: 52.2ms | ActiveRecord: 11.2ms)


Started POST "/admin/restaurants/saras-halal-foods/disable_toggle" for 127.0.0.1 at 2016-01-18 02:25:18 +0100
Processing by RestaurantsController#disable_toggle as JS
  Parameters: {"id"=>"saras-halal-foods"}
  [1m[36mUser Load (0.2ms)[0m  [1mSELECT `users`.* FROM `users` WHERE `users`.`id` = 1 LIMIT 1[0m
  [1m[35mRestaurant Load (1.5ms)[0m  SELECT `restaurants`.* FROM `restaurants` WHERE `restaurants`.`slug` = 'saras-halal-foods' LIMIT 1
  [1m[36m (0.4ms)[0m  [1mBEGIN[0m
  [1m[35mRestaurant Exists (3.0ms)[0m  SELECT 1 AS one FROM `restaurants` WHERE (`restaurants`.`slug` = BINARY 'saras-halal-foods' AND `restaurants`.`id` != 903) LIMIT 1
  [1m[36mFilter Load (1.7ms)[0m  [1mSELECT `filters`.* FROM `filters` INNER JOIN `filters_restaurants` ON `filters`.`id` = `filters_restaurants`.`filter_id` WHERE `filters_restaurants`.`restaurant_id` = 903[0m
  [1m[35mFilterType Load (0.3ms)[0m  SELECT `filter_types`.* FROM `filter_types` INNER JOIN `filter_types_restaurants` ON `filter_types`.`id` = `filter_types_restaurants`.`filter_type_id` WHERE `filter_types_restaurants`.`restaurant_id` = 903
  [1m[36m (0.9ms)[0m  [1mUPDATE `restaurants` SET `disabled` = 1, `updated_at` = '2016-01-18 01:25:18' WHERE `restaurants`.`id` = 903[0m
  [1m[35m (2.3ms)[0m  COMMIT
  Rendered restaurants/disable_toggle.js.erb (0.2ms)
Completed 200 OK in 42ms (Views: 18.9ms | ActiveRecord: 10.4ms)


Started POST "/admin/restaurants/saras-halal-foods/disable_toggle" for 127.0.0.1 at 2016-01-18 02:25:27 +0100
Processing by RestaurantsController#disable_toggle as JS
  Parameters: {"id"=>"saras-halal-foods"}
  [1m[36mUser Load (0.4ms)[0m  [1mSELECT `users`.* FROM `users` WHERE `users`.`id` = 1 LIMIT 1[0m
  [1m[35mRestaurant Load (1.3ms)[0m  SELECT `restaurants`.* FROM `restaurants` WHERE `restaurants`.`slug` = 'saras-halal-foods' LIMIT 1
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35mRestaurant Exists (0.9ms)[0m  SELECT 1 AS one FROM `restaurants` WHERE (`restaurants`.`slug` = BINARY 'saras-halal-foods' AND `restaurants`.`id` != 903) LIMIT 1
  [1m[36mFilter Load (0.2ms)[0m  [1mSELECT `filters`.* FROM `filters` INNER JOIN `filters_restaurants` ON `filters`.`id` = `filters_restaurants`.`filter_id` WHERE `filters_restaurants`.`restaurant_id` = 903[0m
  [1m[35mFilterType Load (0.2ms)[0m  SELECT `filter_types`.* FROM `filter_types` INNER JOIN `filter_types_restaurants` ON `filter_types`.`id` = `filter_types_restaurants`.`filter_type_id` WHERE `filter_types_restaurants`.`restaurant_id` = 903
  [1m[36m (0.3ms)[0m  [1mUPDATE `restaurants` SET `disabled` = 0, `updated_at` = '2016-01-18 01:25:27' WHERE `restaurants`.`id` = 903[0m
  [1m[35m (0.8ms)[0m  COMMIT
  Rendered restaurants/disable_toggle.js.erb (0.2ms)
Completed 200 OK in 36ms (Views: 21.9ms | ActiveRecord: 4.2ms)


Started GET "/admin?q%5Bs%5D=description+asc" for 127.0.0.1 at 2016-01-18 02:27:20 +0100
Processing by RestaurantsController#index as HTML
  Parameters: {"q"=>{"s"=>"description asc"}}
  [1m[36mUser Load (0.4ms)[0m  [1mSELECT `users`.* FROM `users` WHERE `users`.`id` = 1 LIMIT 1[0m
  Rendered shared/_restaurant_manage_tabs.html.erb (0.8ms)
  Rendered restaurants/_condition_fields.html.erb (9.7ms)
  [1m[35mRestaurant Load (12.4ms)[0m  SELECT `restaurants`.* FROM `restaurants` ORDER BY `restaurants`.`description` ASC, disabled ASC,created_at DESC LIMIT 12 OFFSET 0
  [1m[36mPhoto Load (0.4ms)[0m  [1mSELECT `photos`.* FROM `photos` WHERE (restaurant_id = 876 and cover = true and status = 1) LIMIT 1[0m
  [1m[35mPhoto Load (0.3ms)[0m  SELECT `photos`.* FROM `photos` WHERE `photos`.`restaurant_id` = 876 AND `photos`.`status` = 1 ORDER BY restaurant_id ASC, created_at DESC LIMIT 1
  [1m[36mPhoto Load (0.3ms)[0m  [1mSELECT `photos`.* FROM `photos` WHERE (restaurant_id = 851 and cover = true and status = 1) LIMIT 1[0m
  [1m[35mPhoto Load (0.3ms)[0m  SELECT `photos`.* FROM `photos` WHERE `photos`.`restaurant_id` = 851 AND `photos`.`status` = 1 ORDER BY restaurant_id ASC, created_at DESC LIMIT 1
  [1m[36mPhoto Load (0.3ms)[0m  [1mSELECT `photos`.* FROM `photos` WHERE (restaurant_id = 693 and cover = true and status = 1) LIMIT 1[0m
  [1m[35mPhoto Load (0.3ms)[0m  SELECT `photos`.* FROM `photos` WHERE `photos`.`restaurant_id` = 693 AND `photos`.`status` = 1 ORDER BY restaurant_id ASC, created_at DESC LIMIT 1
  [1m[36mPhoto Load (0.3ms)[0m  [1mSELECT `photos`.* FROM `photos` WHERE (restaurant_id = 686 and cover = true and status = 1) LIMIT 1[0m
  [1m[35mPhoto Load (0.3ms)[0m  SELECT `photos`.* FROM `photos` WHERE `photos`.`restaurant_id` = 686 AND `photos`.`status` = 1 ORDER BY restaurant_id ASC, created_at DESC LIMIT 1
  [1m[36mPhoto Load (0.3ms)[0m  [1mSELECT `photos`.* FROM `photos` WHERE (restaurant_id = 669 and cover = true and status = 1) LIMIT 1[0m
  [1m[35mPhoto Load (0.3ms)[0m  SELECT `photos`.* FROM `photos` WHERE `photos`.`restaurant_id` = 669 AND `photos`.`status` = 1 ORDER BY restaurant_id ASC, created_at DESC LIMIT 1
  [1m[36mPhoto Load (0.3ms)[0m  [1mSELECT `photos`.* FROM `photos` WHERE (restaurant_id = 903 and cover = true and status = 1) LIMIT 1[0m
  [1m[35mPhoto Load (0.3ms)[0m  SELECT `photos`.* FROM `photos` WHERE `photos`.`restaurant_id` = 903 AND `photos`.`status` = 1 ORDER BY restaurant_id ASC, created_at DESC LIMIT 1
  [1m[36mPhoto Load (0.4ms)[0m  [1mSELECT `photos`.* FROM `photos` WHERE (restaurant_id = 624 and cover = true and status = 1) LIMIT 1[0m
  [1m[35mPhoto Load (0.3ms)[0m  SELECT `photos`.* FROM `photos` WHERE `photos`.`restaurant_id` = 624 AND `photos`.`status` = 1 ORDER BY restaurant_id ASC, created_at DESC LIMIT 1
  [1m[36mPhoto Load (0.3ms)[0m  [1mSELECT `photos`.* FROM `photos` WHERE (restaurant_id = 609 and cover = true and status = 1) LIMIT 1[0m
  [1m[35mPhoto Load (0.3ms)[0m  SELECT `photos`.* FROM `photos` WHERE `photos`.`restaurant_id` = 609 AND `photos`.`status` = 1 ORDER BY restaurant_id ASC, created_at DESC LIMIT 1
  [1m[36mPhoto Load (0.3ms)[0m  [1mSELECT `photos`.* FROM `photos` WHERE (restaurant_id = 389 and cover = true and status = 1) LIMIT 1[0m
  [1m[35mPhoto Load (0.3ms)[0m  SELECT `photos`.* FROM `photos` WHERE `photos`.`restaurant_id` = 389 AND `photos`.`status` = 1 ORDER BY restaurant_id ASC, created_at DESC LIMIT 1
  [1m[36mPhoto Load (0.3ms)[0m  [1mSELECT `photos`.* FROM `photos` WHERE (restaurant_id = 372 and cover = true and status = 1) LIMIT 1[0m
  [1m[35mPhoto Load (0.3ms)[0m  SELECT `photos`.* FROM `photos` WHERE `photos`.`restaurant_id` = 372 AND `photos`.`status` = 1 ORDER BY restaurant_id ASC, created_at DESC LIMIT 1
  [1m[36mPhoto Load (0.3ms)[0m  [1mSELECT `photos`.* FROM `photos` WHERE (restaurant_id = 368 and cover = true and status = 1) LIMIT 1[0m
  [1m[35mPhoto Load (0.3ms)[0m  SELECT `photos`.* FROM `photos` WHERE `photos`.`restaurant_id` = 368 AND `photos`.`status` = 1 ORDER BY restaurant_id ASC, created_at DESC LIMIT 1
  [1m[36mPhoto Load (0.3ms)[0m  [1mSELECT `photos`.* FROM `photos` WHERE (restaurant_id = 251 and cover = true and status = 1) LIMIT 1[0m
  [1m[35mPhoto Load (0.3ms)[0m  SELECT `photos`.* FROM `photos` WHERE `photos`.`restaurant_id` = 251 AND `photos`.`status` = 1 ORDER BY restaurant_id ASC, created_at DESC LIMIT 1
  [1m[36m (0.4ms)[0m  [1mSELECT COUNT(*) FROM `restaurants` [0m
  Rendered restaurants/index.html.erb within layouts/admin (139.9ms)
Completed 200 OK in 150ms (Views: 126.2ms | ActiveRecord: 20.3ms)


Started GET "/admin?q%5Bs%5D=email+asc" for 127.0.0.1 at 2016-01-18 02:27:22 +0100
Processing by RestaurantsController#index as HTML
  Parameters: {"q"=>{"s"=>"email asc"}}
  [1m[35mUser Load (1.0ms)[0m  SELECT `users`.* FROM `users` WHERE `users`.`id` = 1 LIMIT 1
  Rendered shared/_restaurant_manage_tabs.html.erb (0.5ms)
  Rendered restaurants/_condition_fields.html.erb (12.4ms)
  [1m[36mRestaurant Load (2.0ms)[0m  [1mSELECT `restaurants`.* FROM `restaurants` ORDER BY `restaurants`.`email` ASC, disabled ASC,created_at DESC LIMIT 12 OFFSET 0[0m
  [1m[35mPhoto Load (0.4ms)[0m  SELECT `photos`.* FROM `photos` WHERE (restaurant_id = 187 and cover = true and status = 1) LIMIT 1
  [1m[36mPhoto Load (0.3ms)[0m  [1mSELECT `photos`.* FROM `photos` WHERE `photos`.`restaurant_id` = 187 AND `photos`.`status` = 1 ORDER BY restaurant_id ASC, created_at DESC LIMIT 1[0m
  [1m[35mPhoto Load (0.3ms)[0m  SELECT `photos`.* FROM `photos` WHERE (restaurant_id = 225 and cover = true and status = 1) LIMIT 1
  [1m[36mPhoto Load (0.3ms)[0m  [1mSELECT `photos`.* FROM `photos` WHERE `photos`.`restaurant_id` = 225 AND `photos`.`status` = 1 ORDER BY restaurant_id ASC, created_at DESC LIMIT 1[0m
  [1m[35mPhoto Load (0.3ms)[0m  SELECT `photos`.* FROM `photos` WHERE (restaurant_id = 176 and cover = true and status = 1) LIMIT 1
  [1m[36mPhoto Load (0.4ms)[0m  [1mSELECT `photos`.* FROM `photos` WHERE `photos`.`restaurant_id` = 176 AND `photos`.`status` = 1 ORDER BY restaurant_id ASC, created_at DESC LIMIT 1[0m
  [1m[35mPhoto Load (0.3ms)[0m  SELECT `photos`.* FROM `photos` WHERE (restaurant_id = 693 and cover = true and status = 1) LIMIT 1
  [1m[36mPhoto Load (0.3ms)[0m  [1mSELECT `photos`.* FROM `photos` WHERE `photos`.`restaurant_id` = 693 AND `photos`.`status` = 1 ORDER BY restaurant_id ASC, created_at DESC LIMIT 1[0m
  [1m[35mPhoto Load (0.3ms)[0m  SELECT `photos`.* FROM `photos` WHERE (restaurant_id = 686 and cover = true and status = 1) LIMIT 1
  [1m[36mPhoto Load (0.3ms)[0m  [1mSELECT `photos`.* FROM `photos` WHERE `photos`.`restaurant_id` = 686 AND `photos`.`status` = 1 ORDER BY restaurant_id ASC, created_at DESC LIMIT 1[0m
  [1m[35mPhoto Load (0.3ms)[0m  SELECT `photos`.* FROM `photos` WHERE (restaurant_id = 251 and cover = true and status = 1) LIMIT 1
  [1m[36mPhoto Load (0.3ms)[0m  [1mSELECT `photos`.* FROM `photos` WHERE `photos`.`restaurant_id` = 251 AND `photos`.`status` = 1 ORDER BY restaurant_id ASC, created_at DESC LIMIT 1[0m
  [1m[35mPhoto Load (0.3ms)[0m  SELECT `photos`.* FROM `photos` WHERE (restaurant_id = 250 and cover = true and status = 1) LIMIT 1
  [1m[36mPhoto Load (0.3ms)[0m  [1mSELECT `photos`.* FROM `photos` WHERE `photos`.`restaurant_id` = 250 AND `photos`.`status` = 1 ORDER BY restaurant_id ASC, created_at DESC LIMIT 1[0m
  [1m[35mPhoto Load (0.3ms)[0m  SELECT `photos`.* FROM `photos` WHERE (restaurant_id = 237 and cover = true and status = 1) LIMIT 1
  [1m[36mPhoto Load (0.3ms)[0m  [1mSELECT `photos`.* FROM `photos` WHERE `photos`.`restaurant_id` = 237 AND `photos`.`status` = 1 ORDER BY restaurant_id ASC, created_at DESC LIMIT 1[0m
  [1m[35mPhoto Load (0.3ms)[0m  SELECT `photos`.* FROM `photos` WHERE (restaurant_id = 231 and cover = true and status = 1) LIMIT 1
  [1m[36mPhoto Load (0.3ms)[0m  [1mSELECT `photos`.* FROM `photos` WHERE `photos`.`restaurant_id` = 231 AND `photos`.`status` = 1 ORDER BY restaurant_id ASC, created_at DESC LIMIT 1[0m
  [1m[35mPhoto Load (0.3ms)[0m  SELECT `photos`.* FROM `photos` WHERE (restaurant_id = 222 and cover = true and status = 1) LIMIT 1
  [1m[36mPhoto Load (0.4ms)[0m  [1mSELECT `photos`.* FROM `photos` WHERE `photos`.`restaurant_id` = 222 AND `photos`.`status` = 1 ORDER BY restaurant_id ASC, created_at DESC LIMIT 1[0m
  [1m[35mPhoto Load (0.3ms)[0m  SELECT `photos`.* FROM `photos` WHERE (restaurant_id = 221 and cover = true and status = 1) LIMIT 1
  [1m[36mPhoto Load (0.3ms)[0m  [1mSELECT `photos`.* FROM `photos` WHERE `photos`.`restaurant_id` = 221 AND `photos`.`status` = 1 ORDER BY restaurant_id ASC, created_at DESC LIMIT 1[0m
  [1m[35mPhoto Load (0.3ms)[0m  SELECT `photos`.* FROM `photos` WHERE (restaurant_id = 216 and cover = true and status = 1) LIMIT 1
  [1m[36mPhoto Load (0.3ms)[0m  [1mSELECT `photos`.* FROM `photos` WHERE `photos`.`restaurant_id` = 216 AND `photos`.`status` = 1 ORDER BY restaurant_id ASC, created_at DESC LIMIT 1[0m
  [1m[35m (0.4ms)[0m  SELECT COUNT(*) FROM `restaurants` 
  Rendered restaurants/index.html.erb within layouts/admin (93.0ms)
Completed 200 OK in 103ms (Views: 88.8ms | ActiveRecord: 10.8ms)


Started GET "/admin?q%5Bs%5D=name+asc" for 127.0.0.1 at 2016-01-18 02:27:23 +0100
Processing by RestaurantsController#index as HTML
  Parameters: {"q"=>{"s"=>"name asc"}}
  [1m[36mUser Load (0.3ms)[0m  [1mSELECT `users`.* FROM `users` WHERE `users`.`id` = 1 LIMIT 1[0m
  Rendered shared/_restaurant_manage_tabs.html.erb (0.8ms)
  Rendered restaurants/_condition_fields.html.erb (10.0ms)
  [1m[35mRestaurant Load (1.3ms)[0m  SELECT `restaurants`.* FROM `restaurants` ORDER BY `restaurants`.`name` ASC, disabled ASC,created_at DESC LIMIT 12 OFFSET 0
  [1m[36mPhoto Load (0.4ms)[0m  [1mSELECT `photos`.* FROM `photos` WHERE (restaurant_id = 879 and cover = true and status = 1) LIMIT 1[0m
  [1m[35mPhoto Load (0.3ms)[0m  SELECT `photos`.* FROM `photos` WHERE `photos`.`restaurant_id` = 879 AND `photos`.`status` = 1 ORDER BY restaurant_id ASC, created_at DESC LIMIT 1
  [1m[36mPhoto Load (0.3ms)[0m  [1mSELECT `photos`.* FROM `photos` WHERE (restaurant_id = 881 and cover = true and status = 1) LIMIT 1[0m
  [1m[35mPhoto Load (0.4ms)[0m  SELECT `photos`.* FROM `photos` WHERE `photos`.`restaurant_id` = 881 AND `photos`.`status` = 1 ORDER BY restaurant_id ASC, created_at DESC LIMIT 1
  [1m[36mPhoto Load (0.3ms)[0m  [1mSELECT `photos`.* FROM `photos` WHERE (restaurant_id = 946 and cover = true and status = 1) LIMIT 1[0m
  [1m[35mPhoto Load (0.3ms)[0m  SELECT `photos`.* FROM `photos` WHERE `photos`.`restaurant_id` = 946 AND `photos`.`status` = 1 ORDER BY restaurant_id ASC, created_at DESC LIMIT 1
  [1m[36mPhoto Load (0.4ms)[0m  [1mSELECT `photos`.* FROM `photos` WHERE (restaurant_id = 1006 and cover = true and status = 1) LIMIT 1[0m
  [1m[35mPhoto Load (0.3ms)[0m  SELECT `photos`.* FROM `photos` WHERE `photos`.`restaurant_id` = 1006 AND `photos`.`status` = 1 ORDER BY restaurant_id ASC, created_at DESC LIMIT 1
  [1m[36mPhoto Load (0.3ms)[0m  [1mSELECT `photos`.* FROM `photos` WHERE (restaurant_id = 895 and cover = true and status = 1) LIMIT 1[0m
  [1m[35mPhoto Load (0.3ms)[0m  SELECT `photos`.* FROM `photos` WHERE `photos`.`restaurant_id` = 895 AND `photos`.`status` = 1 ORDER BY restaurant_id ASC, created_at DESC LIMIT 1
  [1m[36mPhoto Load (0.3ms)[0m  [1mSELECT `photos`.* FROM `photos` WHERE (restaurant_id = 226 and cover = true and status = 1) LIMIT 1[0m
  [1m[35mPhoto Load (0.3ms)[0m  SELECT `photos`.* FROM `photos` WHERE `photos`.`restaurant_id` = 226 AND `photos`.`status` = 1 ORDER BY restaurant_id ASC, created_at DESC LIMIT 1
  [1m[36mPhoto Load (0.5ms)[0m  [1mSELECT `photos`.* FROM `photos` WHERE (restaurant_id = 703 and cover = true and status = 1) LIMIT 1[0m
  [1m[35mPhoto Load (0.3ms)[0m  SELECT `photos`.* FROM `photos` WHERE `photos`.`restaurant_id` = 703 AND `photos`.`status` = 1 ORDER BY restaurant_id ASC, created_at DESC LIMIT 1
  [1m[36mPhoto Load (0.3ms)[0m  [1mSELECT `photos`.* FROM `photos` WHERE (restaurant_id = 105 and cover = true and status = 1) LIMIT 1[0m
  [1m[35mCACHE (0.0ms)[0m  SELECT `photos`.* FROM `photos` WHERE (restaurant_id = 105 and cover = true and status = 1) LIMIT 1
  [1m[36mPhoto Load (0.5ms)[0m  [1mSELECT `photos`.* FROM `photos` WHERE (restaurant_id = 104 and cover = true and status = 1) LIMIT 1[0m
  [1m[35mPhoto Load (0.3ms)[0m  SELECT `photos`.* FROM `photos` WHERE `photos`.`restaurant_id` = 104 AND `photos`.`status` = 1 ORDER BY restaurant_id ASC, created_at DESC LIMIT 1
  [1m[36mPhoto Load (0.4ms)[0m  [1mSELECT `photos`.* FROM `photos` WHERE (restaurant_id = 736 and cover = true and status = 1) LIMIT 1[0m
  [1m[35mPhoto Load (0.3ms)[0m  SELECT `photos`.* FROM `photos` WHERE `photos`.`restaurant_id` = 736 AND `photos`.`status` = 1 ORDER BY restaurant_id ASC, created_at DESC LIMIT 1
  [1m[36mPhoto Load (0.3ms)[0m  [1mSELECT `photos`.* FROM `photos` WHERE (restaurant_id = 149 and cover = true and status = 1) LIMIT 1[0m
  [1m[35mPhoto Load (0.3ms)[0m  SELECT `photos`.* FROM `photos` WHERE `photos`.`restaurant_id` = 149 AND `photos`.`status` = 1 ORDER BY restaurant_id ASC, created_at DESC LIMIT 1
  [1m[36mPhoto Load (0.3ms)[0m  [1mSELECT `photos`.* FROM `photos` WHERE (restaurant_id = 632 and cover = true and status = 1) LIMIT 1[0m
  [1m[35mPhoto Load (0.3ms)[0m  SELECT `photos`.* FROM `photos` WHERE `photos`.`restaurant_id` = 632 AND `photos`.`status` = 1 ORDER BY restaurant_id ASC, created_at DESC LIMIT 1
  [1m[36m (0.4ms)[0m  [1mSELECT COUNT(*) FROM `restaurants` [0m
  Rendered restaurants/index.html.erb within layouts/admin (106.1ms)
Completed 200 OK in 115ms (Views: 102.4ms | ActiveRecord: 9.3ms)
couldn't find file /Users/kevinmuller/halalgems_backend/public/system/dragonfly/development/2014/06/18/09_38_53_768_abu_zaad.jpg


Started GET "/admin?q%5Bs%5D=name+desc" for 127.0.0.1 at 2016-01-18 02:27:24 +0100
Processing by RestaurantsController#index as HTML
  Parameters: {"q"=>{"s"=>"name desc"}}
  [1m[35mUser Load (0.2ms)[0m  SELECT `users`.* FROM `users` WHERE `users`.`id` = 1 LIMIT 1
  Rendered shared/_restaurant_manage_tabs.html.erb (0.7ms)
  Rendered restaurants/_condition_fields.html.erb (8.7ms)
  [1m[36mRestaurant Load (1.5ms)[0m  [1mSELECT `restaurants`.* FROM `restaurants` ORDER BY `restaurants`.`name` DESC, disabled ASC,created_at DESC LIMIT 12 OFFSET 0[0m
  [1m[35mPhoto Load (0.4ms)[0m  SELECT `photos`.* FROM `photos` WHERE (restaurant_id = 952 and cover = true and status = 1) LIMIT 1
  [1m[36mPhoto Load (0.3ms)[0m  [1mSELECT `photos`.* FROM `photos` WHERE `photos`.`restaurant_id` = 952 AND `photos`.`status` = 1 ORDER BY restaurant_id ASC, created_at DESC LIMIT 1[0m
  [1m[35mPhoto Load (0.3ms)[0m  SELECT `photos`.* FROM `photos` WHERE (restaurant_id = 401 and cover = true and status = 1) LIMIT 1
  [1m[36mPhoto Load (0.3ms)[0m  [1mSELECT `photos`.* FROM `photos` WHERE `photos`.`restaurant_id` = 401 AND `photos`.`status` = 1 ORDER BY restaurant_id ASC, created_at DESC LIMIT 1[0m
  [1m[35mPhoto Load (0.3ms)[0m  SELECT `photos`.* FROM `photos` WHERE (restaurant_id = 884 and cover = true and status = 1) LIMIT 1
  [1m[36mPhoto Load (0.3ms)[0m  [1mSELECT `photos`.* FROM `photos` WHERE `photos`.`restaurant_id` = 884 AND `photos`.`status` = 1 ORDER BY restaurant_id ASC, created_at DESC LIMIT 1[0m
  [1m[35mPhoto Load (0.4ms)[0m  SELECT `photos`.* FROM `photos` WHERE (restaurant_id = 526 and cover = true and status = 1) LIMIT 1
  [1m[36mPhoto Load (0.3ms)[0m  [1mSELECT `photos`.* FROM `photos` WHERE `photos`.`restaurant_id` = 526 AND `photos`.`status` = 1 ORDER BY restaurant_id ASC, created_at DESC LIMIT 1[0m
  [1m[35mPhoto Load (0.3ms)[0m  SELECT `photos`.* FROM `photos` WHERE (restaurant_id = 73 and cover = true and status = 1) LIMIT 1
  [1m[36mPhoto Load (0.3ms)[0m  [1mSELECT `photos`.* FROM `photos` WHERE `photos`.`restaurant_id` = 73 AND `photos`.`status` = 1 ORDER BY restaurant_id ASC, created_at DESC LIMIT 1[0m
  [1m[35mCACHE (0.0ms)[0m  SELECT `photos`.* FROM `photos` WHERE (restaurant_id = 73 and cover = true and status = 1) LIMIT 1
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT `photos`.* FROM `photos` WHERE `photos`.`restaurant_id` = 73 AND `photos`.`status` = 1 ORDER BY restaurant_id ASC, created_at DESC LIMIT 1[0m
  [1m[35mPhoto Load (0.4ms)[0m  SELECT `photos`.* FROM `photos` WHERE (restaurant_id = 604 and cover = true and status = 1) LIMIT 1
  [1m[36mPhoto Load (0.3ms)[0m  [1mSELECT `photos`.* FROM `photos` WHERE `photos`.`restaurant_id` = 604 AND `photos`.`status` = 1 ORDER BY restaurant_id ASC, created_at DESC LIMIT 1[0m
  [1m[35mPhoto Load (0.3ms)[0m  SELECT `photos`.* FROM `photos` WHERE (restaurant_id = 704 and cover = true and status = 1) LIMIT 1
  [1m[36mPhoto Load (0.3ms)[0m  [1mSELECT `photos`.* FROM `photos` WHERE `photos`.`restaurant_id` = 704 AND `photos`.`status` = 1 ORDER BY restaurant_id ASC, created_at DESC LIMIT 1[0m
  [1m[35mPhoto Load (0.3ms)[0m  SELECT `photos`.* FROM `photos` WHERE (restaurant_id = 264 and cover = true and status = 1) LIMIT 1
  [1m[36mPhoto Load (0.5ms)[0m  [1mSELECT `photos`.* FROM `photos` WHERE `photos`.`restaurant_id` = 264 AND `photos`.`status` = 1 ORDER BY restaurant_id ASC, created_at DESC LIMIT 1[0m
  [1m[35mPhoto Load (0.3ms)[0m  SELECT `photos`.* FROM `photos` WHERE (restaurant_id = 500 and cover = true and status = 1) LIMIT 1
  [1m[36mPhoto Load (0.3ms)[0m  [1mSELECT `photos`.* FROM `photos` WHERE `photos`.`restaurant_id` = 500 AND `photos`.`status` = 1 ORDER BY restaurant_id ASC, created_at DESC LIMIT 1[0m
  [1m[35mPhoto Load (0.3ms)[0m  SELECT `photos`.* FROM `photos` WHERE (restaurant_id = 902 and cover = true and status = 1) LIMIT 1
  [1m[36mPhoto Load (0.3ms)[0m  [1mSELECT `photos`.* FROM `photos` WHERE `photos`.`restaurant_id` = 902 AND `photos`.`status` = 1 ORDER BY restaurant_id ASC, created_at DESC LIMIT 1[0m
  [1m[35mPhoto Load (0.3ms)[0m  SELECT `photos`.* FROM `photos` WHERE (restaurant_id = 637 and cover = true and status = 1) LIMIT 1
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT `photos`.* FROM `photos` WHERE (restaurant_id = 637 and cover = true and status = 1) LIMIT 1[0m
  [1m[35mPhoto Load (0.4ms)[0m  SELECT `photos`.* FROM `photos` WHERE (restaurant_id = 430 and cover = true and status = 1) LIMIT 1
  [1m[36mPhoto Load (0.3ms)[0m  [1mSELECT `photos`.* FROM `photos` WHERE `photos`.`restaurant_id` = 430 AND `photos`.`status` = 1 ORDER BY restaurant_id ASC, created_at DESC LIMIT 1[0m
  [1m[35m (0.4ms)[0m  SELECT COUNT(*) FROM `restaurants` 
  Rendered restaurants/index.html.erb within layouts/admin (89.8ms)
Completed 200 OK in 98ms (Views: 86.0ms | ActiveRecord: 9.6ms)
couldn't find file /Users/kevinmuller/halalgems_backend/public/system/dragonfly/development/2015/02/18/10_54_23_460_IMG_5464.JPG
couldn't find file /Users/kevinmuller/halalgems_backend/public/system/dragonfly/development/2014/06/18/15_10_12_773_zaza.jpg


Started GET "/admin?q%5Bs%5D=name+asc" for 127.0.0.1 at 2016-01-18 02:27:25 +0100
Processing by RestaurantsController#index as HTML
  Parameters: {"q"=>{"s"=>"name asc"}}
  [1m[36mUser Load (0.3ms)[0m  [1mSELECT `users`.* FROM `users` WHERE `users`.`id` = 1 LIMIT 1[0m
  Rendered shared/_restaurant_manage_tabs.html.erb (0.6ms)
  Rendered restaurants/_condition_fields.html.erb (10.1ms)
  [1m[35mRestaurant Load (1.3ms)[0m  SELECT `restaurants`.* FROM `restaurants` ORDER BY `restaurants`.`name` ASC, disabled ASC,created_at DESC LIMIT 12 OFFSET 0
  [1m[36mPhoto Load (0.3ms)[0m  [1mSELECT `photos`.* FROM `photos` WHERE (restaurant_id = 879 and cover = true and status = 1) LIMIT 1[0m
  [1m[35mPhoto Load (0.3ms)[0m  SELECT `photos`.* FROM `photos` WHERE `photos`.`restaurant_id` = 879 AND `photos`.`status` = 1 ORDER BY restaurant_id ASC, created_at DESC LIMIT 1
  [1m[36mPhoto Load (0.3ms)[0m  [1mSELECT `photos`.* FROM `photos` WHERE (restaurant_id = 881 and cover = true and status = 1) LIMIT 1[0m
  [1m[35mPhoto Load (0.3ms)[0m  SELECT `photos`.* FROM `photos` WHERE `photos`.`restaurant_id` = 881 AND `photos`.`status` = 1 ORDER BY restaurant_id ASC, created_at DESC LIMIT 1
  [1m[36mPhoto Load (0.5ms)[0m  [1mSELECT `photos`.* FROM `photos` WHERE (restaurant_id = 946 and cover = true and status = 1) LIMIT 1[0m
  [1m[35mPhoto Load (0.3ms)[0m  SELECT `photos`.* FROM `photos` WHERE `photos`.`restaurant_id` = 946 AND `photos`.`status` = 1 ORDER BY restaurant_id ASC, created_at DESC LIMIT 1
  [1m[36mPhoto Load (0.3ms)[0m  [1mSELECT `photos`.* FROM `photos` WHERE (restaurant_id = 1006 and cover = true and status = 1) LIMIT 1[0m
  [1m[35mPhoto Load (0.6ms)[0m  SELECT `photos`.* FROM `photos` WHERE `photos`.`restaurant_id` = 1006 AND `photos`.`status` = 1 ORDER BY restaurant_id ASC, created_at DESC LIMIT 1
  [1m[36mPhoto Load (0.4ms)[0m  [1mSELECT `photos`.* FROM `photos` WHERE (restaurant_id = 895 and cover = true and status = 1) LIMIT 1[0m
  [1m[35mPhoto Load (0.4ms)[0m  SELECT `photos`.* FROM `photos` WHERE `photos`.`restaurant_id` = 895 AND `photos`.`status` = 1 ORDER BY restaurant_id ASC, created_at DESC LIMIT 1
  [1m[36mPhoto Load (0.5ms)[0m  [1mSELECT `photos`.* FROM `photos` WHERE (restaurant_id = 226 and cover = true and status = 1) LIMIT 1[0m
  [1m[35mPhoto Load (0.3ms)[0m  SELECT `photos`.* FROM `photos` WHERE `photos`.`restaurant_id` = 226 AND `photos`.`status` = 1 ORDER BY restaurant_id ASC, created_at DESC LIMIT 1
  [1m[36mPhoto Load (0.3ms)[0m  [1mSELECT `photos`.* FROM `photos` WHERE (restaurant_id = 703 and cover = true and status = 1) LIMIT 1[0m
  [1m[35mPhoto Load (0.3ms)[0m  SELECT `photos`.* FROM `photos` WHERE `photos`.`restaurant_id` = 703 AND `photos`.`status` = 1 ORDER BY restaurant_id ASC, created_at DESC LIMIT 1
  [1m[36mPhoto Load (0.2ms)[0m  [1mSELECT `photos`.* FROM `photos` WHERE (restaurant_id = 105 and cover = true and status = 1) LIMIT 1[0m
  [1m[35mCACHE (0.0ms)[0m  SELECT `photos`.* FROM `photos` WHERE (restaurant_id = 105 and cover = true and status = 1) LIMIT 1
  [1m[36mPhoto Load (0.3ms)[0m  [1mSELECT `photos`.* FROM `photos` WHERE (restaurant_id = 104 and cover = true and status = 1) LIMIT 1[0m
  [1m[35mPhoto Load (0.3ms)[0m  SELECT `photos`.* FROM `photos` WHERE `photos`.`restaurant_id` = 104 AND `photos`.`status` = 1 ORDER BY restaurant_id ASC, created_at DESC LIMIT 1
  [1m[36mPhoto Load (0.4ms)[0m  [1mSELECT `photos`.* FROM `photos` WHERE (restaurant_id = 736 and cover = true and status = 1) LIMIT 1[0m
  [1m[35mPhoto Load (0.3ms)[0m  SELECT `photos`.* FROM `photos` WHERE `photos`.`restaurant_id` = 736 AND `photos`.`status` = 1 ORDER BY restaurant_id ASC, created_at DESC LIMIT 1
  [1m[36mPhoto Load (0.4ms)[0m  [1mSELECT `photos`.* FROM `photos` WHERE (restaurant_id = 149 and cover = true and status = 1) LIMIT 1[0m
  [1m[35mPhoto Load (0.3ms)[0m  SELECT `photos`.* FROM `photos` WHERE `photos`.`restaurant_id` = 149 AND `photos`.`status` = 1 ORDER BY restaurant_id ASC, created_at DESC LIMIT 1
  [1m[36mPhoto Load (0.3ms)[0m  [1mSELECT `photos`.* FROM `photos` WHERE (restaurant_id = 632 and cover = true and status = 1) LIMIT 1[0m
  [1m[35mPhoto Load (0.3ms)[0m  SELECT `photos`.* FROM `photos` WHERE `photos`.`restaurant_id` = 632 AND `photos`.`status` = 1 ORDER BY restaurant_id ASC, created_at DESC LIMIT 1
  [1m[36m (0.4ms)[0m  [1mSELECT COUNT(*) FROM `restaurants` [0m
  Rendered restaurants/index.html.erb within layouts/admin (89.4ms)
Completed 200 OK in 97ms (Views: 84.7ms | ActiveRecord: 9.6ms)
couldn't find file /Users/kevinmuller/halalgems_backend/public/system/dragonfly/development/2014/06/18/09_38_53_768_abu_zaad.jpg


Started GET "/admin/collections" for 127.0.0.1 at 2016-01-18 02:28:04 +0100
Processing by CollectionsController#index as HTML
  Rendered shared/_restaurant_manage_tabs.html.erb (0.6ms)
  [1m[35mCollection Load (0.3ms)[0m  SELECT `collections`.* FROM `collections` ORDER BY name ASC, created_at DESC LIMIT 12 OFFSET 0
  [1m[36mCollectionImage Load (0.2ms)[0m  [1mSELECT `collection_images`.* FROM `collection_images` WHERE (collection_id = 2) LIMIT 1[0m
  [1m[35m (0.3ms)[0m  SELECT COUNT(*) FROM `collections` 
  Rendered collections/index.erb within layouts/admin (11.1ms)
  [1m[36mUser Load (0.3ms)[0m  [1mSELECT `users`.* FROM `users` WHERE `users`.`id` = 1 LIMIT 1[0m
Completed 200 OK in 19ms (Views: 17.4ms | ActiveRecord: 1.1ms)


Started GET "/admin/collections?q%5Bs%5D=name+asc" for 127.0.0.1 at 2016-01-18 02:28:06 +0100
Processing by CollectionsController#index as HTML
  Parameters: {"q"=>{"s"=>"name asc"}}
  Rendered shared/_restaurant_manage_tabs.html.erb (0.8ms)
  [1m[35mCollection Load (0.3ms)[0m  SELECT `collections`.* FROM `collections` ORDER BY `collections`.`name` ASC, name ASC, created_at DESC LIMIT 12 OFFSET 0
  [1m[36mCollectionImage Load (0.2ms)[0m  [1mSELECT `collection_images`.* FROM `collection_images` WHERE (collection_id = 2) LIMIT 1[0m
  [1m[35m (0.3ms)[0m  SELECT COUNT(*) FROM `collections` 
  Rendered collections/index.erb within layouts/admin (11.6ms)
  [1m[36mUser Load (0.3ms)[0m  [1mSELECT `users`.* FROM `users` WHERE `users`.`id` = 1 LIMIT 1[0m
Completed 200 OK in 21ms (Views: 18.4ms | ActiveRecord: 1.1ms)


Started GET "/admin/collections?q%5Bs%5D=name+desc" for 127.0.0.1 at 2016-01-18 02:28:07 +0100
Processing by CollectionsController#index as HTML
  Parameters: {"q"=>{"s"=>"name desc"}}
  Rendered shared/_restaurant_manage_tabs.html.erb (0.7ms)
  [1m[35mCollection Load (0.3ms)[0m  SELECT `collections`.* FROM `collections` ORDER BY `collections`.`name` DESC, name ASC, created_at DESC LIMIT 12 OFFSET 0
  [1m[36mCollectionImage Load (0.2ms)[0m  [1mSELECT `collection_images`.* FROM `collection_images` WHERE (collection_id = 2) LIMIT 1[0m
  [1m[35m (0.2ms)[0m  SELECT COUNT(*) FROM `collections` 
  Rendered collections/index.erb within layouts/admin (10.8ms)
  [1m[36mUser Load (0.3ms)[0m  [1mSELECT `users`.* FROM `users` WHERE `users`.`id` = 1 LIMIT 1[0m
Completed 200 OK in 20ms (Views: 18.1ms | ActiveRecord: 1.0ms)


Started GET "/admin/collections?q%5Bs%5D=name+asc" for 127.0.0.1 at 2016-01-18 02:28:08 +0100
Processing by CollectionsController#index as HTML
  Parameters: {"q"=>{"s"=>"name asc"}}
  Rendered shared/_restaurant_manage_tabs.html.erb (0.7ms)
  [1m[35mCollection Load (0.3ms)[0m  SELECT `collections`.* FROM `collections` ORDER BY `collections`.`name` ASC, name ASC, created_at DESC LIMIT 12 OFFSET 0
  [1m[36mCollectionImage Load (0.2ms)[0m  [1mSELECT `collection_images`.* FROM `collection_images` WHERE (collection_id = 2) LIMIT 1[0m
  [1m[35m (0.2ms)[0m  SELECT COUNT(*) FROM `collections` 
  Rendered collections/index.erb within layouts/admin (11.1ms)
  [1m[36mUser Load (0.3ms)[0m  [1mSELECT `users`.* FROM `users` WHERE `users`.`id` = 1 LIMIT 1[0m
Completed 200 OK in 20ms (Views: 17.4ms | ActiveRecord: 1.1ms)


Started GET "/admin/collections?q%5Bs%5D=name+desc" for 127.0.0.1 at 2016-01-18 02:28:09 +0100
Processing by CollectionsController#index as HTML
  Parameters: {"q"=>{"s"=>"name desc"}}
  Rendered shared/_restaurant_manage_tabs.html.erb (0.6ms)
  [1m[35mCollection Load (0.6ms)[0m  SELECT `collections`.* FROM `collections` ORDER BY `collections`.`name` DESC, name ASC, created_at DESC LIMIT 12 OFFSET 0
  [1m[36mCollectionImage Load (0.2ms)[0m  [1mSELECT `collection_images`.* FROM `collection_images` WHERE (collection_id = 2) LIMIT 1[0m
  [1m[35m (0.1ms)[0m  SELECT COUNT(*) FROM `collections` 
  Rendered collections/index.erb within layouts/admin (12.4ms)
  [1m[36mUser Load (0.3ms)[0m  [1mSELECT `users`.* FROM `users` WHERE `users`.`id` = 1 LIMIT 1[0m
Completed 200 OK in 21ms (Views: 19.2ms | ActiveRecord: 1.3ms)


Started GET "/admin/collections?q%5Bs%5D=name+asc" for 127.0.0.1 at 2016-01-18 02:28:10 +0100
Processing by CollectionsController#index as HTML
  Parameters: {"q"=>{"s"=>"name asc"}}
  Rendered shared/_restaurant_manage_tabs.html.erb (0.6ms)
  [1m[35mCollection Load (0.3ms)[0m  SELECT `collections`.* FROM `collections` ORDER BY `collections`.`name` ASC, name ASC, created_at DESC LIMIT 12 OFFSET 0
  [1m[36mCollectionImage Load (0.2ms)[0m  [1mSELECT `collection_images`.* FROM `collection_images` WHERE (collection_id = 2) LIMIT 1[0m
  [1m[35m (0.3ms)[0m  SELECT COUNT(*) FROM `collections` 
  Rendered collections/index.erb within layouts/admin (13.3ms)
  [1m[36mUser Load (0.4ms)[0m  [1mSELECT `users`.* FROM `users` WHERE `users`.`id` = 1 LIMIT 1[0m
Completed 200 OK in 23ms (Views: 20.5ms | ActiveRecord: 1.2ms)


Started GET "/admin/collections/admin_new_collection" for 127.0.0.1 at 2016-01-18 02:28:12 +0100
Processing by CollectionsController#admin_new_collection as HTML
  [1m[35mUser Load (0.3ms)[0m  SELECT `users`.* FROM `users` WHERE `users`.`id` = 1 LIMIT 1
  Rendered collections/_collection_form.html.erb (6.9ms)
  Rendered collections/_collection_restaurants_form.html.erb (0.5ms)
  Rendered collections/admin_new_collection.html.erb within layouts/admin (31.2ms)
Completed 200 OK in 53ms (Views: 49.9ms | ActiveRecord: 0.3ms)


Started POST "/admin/collections" for 127.0.0.1 at 2016-01-18 02:28:20 +0100
Processing by CollectionsController#create as HTML
  Parameters: {"utf8"=>"âœ“", "authenticity_token"=>"Izf8UbDsiwXC7BlcjwDbXYW5w4d6gXlx2b0iJtHCBu4=", "admin"=>"true", "collection"=>{"name"=>"abc", "description"=>"asdfsadf"}, "collection_image"=>{"image"=>#<ActionDispatch::Http::UploadedFile:0x007fc258c49f10 @original_filename="michelin.png", @content_type="image/png", @headers="Content-Disposition: form-data; name=\"collection_image[image]\"; filename=\"michelin.png\"\r\nContent-Type: image/png\r\n", @tempfile=#<Tempfile:/var/folders/rf/q4l8n5k56pnbjgkdtzrhq_w00000gn/T/RackMultipart20160118-19170-14g6ut1>>}}
  [1m[36mCollection Load (0.2ms)[0m  [1mSELECT `collections`.* FROM `collections` WHERE `collections`.`name` = 'abc' LIMIT 1[0m
  [1m[35m (0.1ms)[0m  BEGIN
  [1m[36m (0.1ms)[0m  [1mCOMMIT[0m
  [1m[35m (0.1ms)[0m  BEGIN
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO `collections` (`created_at`, `description`, `disabled`, `image_url`, `name`, `updated_at`) VALUES ('2016-01-18 01:28:20', 'asdfsadf', 0, NULL, 'abc', '2016-01-18 01:28:20')[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO `collection_images` (`collection_id`, `created_at`, `image_name`, `image_uid`, `text_content`, `text_hyperlink`, `text_title`, `updated_at`) VALUES (3, '2016-01-18 01:28:20', 'michelin.png', '2016/01/18/02_28_20_338_michelin.png', NULL, NULL, NULL, '2016-01-18 01:28:20')
  [1m[36m (0.5ms)[0m  [1mCOMMIT[0m
Redirected to http://localhost:3000/collection/3/edit
Completed 302 Found in 14ms (ActiveRecord: 1.6ms)


Started GET "/collection/3/edit" for 127.0.0.1 at 2016-01-18 02:28:20 +0100
Processing by CollectionsController#edit_collection as HTML
  Parameters: {"id"=>"3"}
  [1m[35mUser Load (0.3ms)[0m  SELECT `users`.* FROM `users` WHERE `users`.`id` = 1 LIMIT 1
  [1m[36mCollection Load (0.2ms)[0m  [1mSELECT `collections`.* FROM `collections` WHERE `collections`.`id` = 3 LIMIT 1[0m
  [1m[35mCollectionImage Load (0.3ms)[0m  SELECT `collection_images`.* FROM `collection_images` WHERE (collection_id = 3) LIMIT 1
  Rendered collections/_collection_form.html.erb (8.9ms)
  Rendered collections/_collection_restaurants_form.html.erb (0.3ms)
  Rendered collections/edit_collection.html.erb within layouts/admin (10.9ms)
Completed 200 OK in 35ms (Views: 31.9ms | ActiveRecord: 0.7ms)


Started GET "/admin/restaurants" for 127.0.0.1 at 2016-01-18 02:28:23 +0100
Processing by RestaurantsController#index as HTML
  [1m[36mUser Load (0.4ms)[0m  [1mSELECT `users`.* FROM `users` WHERE `users`.`id` = 1 LIMIT 1[0m
  Rendered shared/_restaurant_manage_tabs.html.erb (0.7ms)
  Rendered restaurants/_condition_fields.html.erb (9.7ms)
  [1m[35mRestaurant Load (0.7ms)[0m  SELECT `restaurants`.* FROM `restaurants` ORDER BY disabled ASC,created_at DESC LIMIT 12 OFFSET 0
  [1m[36mPhoto Load (0.3ms)[0m  [1mSELECT `photos`.* FROM `photos` WHERE (restaurant_id = 876 and cover = true and status = 1) LIMIT 1[0m
  [1m[35mPhoto Load (0.3ms)[0m  SELECT `photos`.* FROM `photos` WHERE `photos`.`restaurant_id` = 876 AND `photos`.`status` = 1 ORDER BY restaurant_id ASC, created_at DESC LIMIT 1
  [1m[36mPhoto Load (0.4ms)[0m  [1mSELECT `photos`.* FROM `photos` WHERE (restaurant_id = 851 and cover = true and status = 1) LIMIT 1[0m
  [1m[35mPhoto Load (0.3ms)[0m  SELECT `photos`.* FROM `photos` WHERE `photos`.`restaurant_id` = 851 AND `photos`.`status` = 1 ORDER BY restaurant_id ASC, created_at DESC LIMIT 1
  [1m[36mPhoto Load (0.3ms)[0m  [1mSELECT `photos`.* FROM `photos` WHERE (restaurant_id = 693 and cover = true and status = 1) LIMIT 1[0m
  [1m[35mPhoto Load (0.3ms)[0m  SELECT `photos`.* FROM `photos` WHERE `photos`.`restaurant_id` = 693 AND `photos`.`status` = 1 ORDER BY restaurant_id ASC, created_at DESC LIMIT 1
  [1m[36mPhoto Load (0.3ms)[0m  [1mSELECT `photos`.* FROM `photos` WHERE (restaurant_id = 686 and cover = true and status = 1) LIMIT 1[0m
  [1m[35mPhoto Load (0.3ms)[0m  SELECT `photos`.* FROM `photos` WHERE `photos`.`restaurant_id` = 686 AND `photos`.`status` = 1 ORDER BY restaurant_id ASC, created_at DESC LIMIT 1
  [1m[36mPhoto Load (0.3ms)[0m  [1mSELECT `photos`.* FROM `photos` WHERE (restaurant_id = 669 and cover = true and status = 1) LIMIT 1[0m
  [1m[35mPhoto Load (0.3ms)[0m  SELECT `photos`.* FROM `photos` WHERE `photos`.`restaurant_id` = 669 AND `photos`.`status` = 1 ORDER BY restaurant_id ASC, created_at DESC LIMIT 1
  [1m[36mPhoto Load (0.3ms)[0m  [1mSELECT `photos`.* FROM `photos` WHERE (restaurant_id = 251 and cover = true and status = 1) LIMIT 1[0m
  [1m[35mPhoto Load (0.3ms)[0m  SELECT `photos`.* FROM `photos` WHERE `photos`.`restaurant_id` = 251 AND `photos`.`status` = 1 ORDER BY restaurant_id ASC, created_at DESC LIMIT 1
  [1m[36mPhoto Load (0.4ms)[0m  [1mSELECT `photos`.* FROM `photos` WHERE (restaurant_id = 250 and cover = true and status = 1) LIMIT 1[0m
  [1m[35mPhoto Load (0.3ms)[0m  SELECT `photos`.* FROM `photos` WHERE `photos`.`restaurant_id` = 250 AND `photos`.`status` = 1 ORDER BY restaurant_id ASC, created_at DESC LIMIT 1
  [1m[36mPhoto Load (0.3ms)[0m  [1mSELECT `photos`.* FROM `photos` WHERE (restaurant_id = 237 and cover = true and status = 1) LIMIT 1[0m
  [1m[35mPhoto Load (0.3ms)[0m  SELECT `photos`.* FROM `photos` WHERE `photos`.`restaurant_id` = 237 AND `photos`.`status` = 1 ORDER BY restaurant_id ASC, created_at DESC LIMIT 1
  [1m[36mPhoto Load (0.3ms)[0m  [1mSELECT `photos`.* FROM `photos` WHERE (restaurant_id = 231 and cover = true and status = 1) LIMIT 1[0m
  [1m[35mPhoto Load (0.3ms)[0m  SELECT `photos`.* FROM `photos` WHERE `photos`.`restaurant_id` = 231 AND `photos`.`status` = 1 ORDER BY restaurant_id ASC, created_at DESC LIMIT 1
  [1m[36mPhoto Load (0.3ms)[0m  [1mSELECT `photos`.* FROM `photos` WHERE (restaurant_id = 222 and cover = true and status = 1) LIMIT 1[0m
  [1m[35mPhoto Load (0.3ms)[0m  SELECT `photos`.* FROM `photos` WHERE `photos`.`restaurant_id` = 222 AND `photos`.`status` = 1 ORDER BY restaurant_id ASC, created_at DESC LIMIT 1
  [1m[36mPhoto Load (0.3ms)[0m  [1mSELECT `photos`.* FROM `photos` WHERE (restaurant_id = 221 and cover = true and status = 1) LIMIT 1[0m
  [1m[35mPhoto Load (0.3ms)[0m  SELECT `photos`.* FROM `photos` WHERE `photos`.`restaurant_id` = 221 AND `photos`.`status` = 1 ORDER BY restaurant_id ASC, created_at DESC LIMIT 1
  [1m[36mPhoto Load (0.3ms)[0m  [1mSELECT `photos`.* FROM `photos` WHERE (restaurant_id = 216 and cover = true and status = 1) LIMIT 1[0m
  [1m[35mPhoto Load (0.3ms)[0m  SELECT `photos`.* FROM `photos` WHERE `photos`.`restaurant_id` = 216 AND `photos`.`status` = 1 ORDER BY restaurant_id ASC, created_at DESC LIMIT 1
  [1m[36m (0.4ms)[0m  [1mSELECT COUNT(*) FROM `restaurants` [0m
  Rendered restaurants/index.html.erb within layouts/admin (85.0ms)
Completed 200 OK in 93ms (Views: 82.3ms | ActiveRecord: 8.7ms)


Started GET "/admin/collections" for 127.0.0.1 at 2016-01-18 02:28:24 +0100
Processing by CollectionsController#index as HTML
  Rendered shared/_restaurant_manage_tabs.html.erb (0.6ms)
  [1m[35mCollection Load (0.6ms)[0m  SELECT `collections`.* FROM `collections` ORDER BY name ASC, created_at DESC LIMIT 12 OFFSET 0
  [1m[36mCollectionImage Load (0.2ms)[0m  [1mSELECT `collection_images`.* FROM `collection_images` WHERE (collection_id = 3) LIMIT 1[0m
  [1m[35mCollectionImage Load (0.2ms)[0m  SELECT `collection_images`.* FROM `collection_images` WHERE (collection_id = 2) LIMIT 1
  [1m[36m (0.2ms)[0m  [1mSELECT COUNT(*) FROM `collections` [0m
  Rendered collections/index.erb within layouts/admin (13.0ms)
  [1m[35mUser Load (0.3ms)[0m  SELECT `users`.* FROM `users` WHERE `users`.`id` = 1 LIMIT 1
Completed 200 OK in 21ms (Views: 19.1ms | ActiveRecord: 1.4ms)


Started GET "/admin/collections?q%5Bs%5D=name+asc" for 127.0.0.1 at 2016-01-18 02:28:26 +0100
Processing by CollectionsController#index as HTML
  Parameters: {"q"=>{"s"=>"name asc"}}
  Rendered shared/_restaurant_manage_tabs.html.erb (0.7ms)
  [1m[36mCollection Load (0.3ms)[0m  [1mSELECT `collections`.* FROM `collections` ORDER BY `collections`.`name` ASC, name ASC, created_at DESC LIMIT 12 OFFSET 0[0m
  [1m[35mCollectionImage Load (0.2ms)[0m  SELECT `collection_images`.* FROM `collection_images` WHERE (collection_id = 3) LIMIT 1
  [1m[36mCollectionImage Load (0.2ms)[0m  [1mSELECT `collection_images`.* FROM `collection_images` WHERE (collection_id = 2) LIMIT 1[0m
  [1m[35m (0.2ms)[0m  SELECT COUNT(*) FROM `collections` 
  Rendered collections/index.erb within layouts/admin (12.6ms)
  [1m[36mUser Load (0.3ms)[0m  [1mSELECT `users`.* FROM `users` WHERE `users`.`id` = 1 LIMIT 1[0m
Completed 200 OK in 21ms (Views: 18.9ms | ActiveRecord: 1.2ms)


Started GET "/admin/collections?q%5Bs%5D=name+desc" for 127.0.0.1 at 2016-01-18 02:28:27 +0100
Processing by CollectionsController#index as HTML
  Parameters: {"q"=>{"s"=>"name desc"}}
  Rendered shared/_restaurant_manage_tabs.html.erb (0.5ms)
  [1m[35mCollection Load (0.3ms)[0m  SELECT `collections`.* FROM `collections` ORDER BY `collections`.`name` DESC, name ASC, created_at DESC LIMIT 12 OFFSET 0
  [1m[36mCollectionImage Load (0.2ms)[0m  [1mSELECT `collection_images`.* FROM `collection_images` WHERE (collection_id = 2) LIMIT 1[0m
  [1m[35mCollectionImage Load (0.2ms)[0m  SELECT `collection_images`.* FROM `collection_images` WHERE (collection_id = 3) LIMIT 1
  [1m[36m (0.2ms)[0m  [1mSELECT COUNT(*) FROM `collections` [0m
  Rendered collections/index.erb within layouts/admin (13.5ms)
  [1m[35mUser Load (0.3ms)[0m  SELECT `users`.* FROM `users` WHERE `users`.`id` = 1 LIMIT 1
Completed 200 OK in 22ms (Views: 19.9ms | ActiveRecord: 1.1ms)


Started GET "/admin/collections?q%5Bs%5D=name+asc" for 127.0.0.1 at 2016-01-18 02:28:28 +0100
Processing by CollectionsController#index as HTML
  Parameters: {"q"=>{"s"=>"name asc"}}
  Rendered shared/_restaurant_manage_tabs.html.erb (0.6ms)
  [1m[36mCollection Load (0.5ms)[0m  [1mSELECT `collections`.* FROM `collections` ORDER BY `collections`.`name` ASC, name ASC, created_at DESC LIMIT 12 OFFSET 0[0m
  [1m[35mCollectionImage Load (0.2ms)[0m  SELECT `collection_images`.* FROM `collection_images` WHERE (collection_id = 3) LIMIT 1
  [1m[36mCollectionImage Load (0.3ms)[0m  [1mSELECT `collection_images`.* FROM `collection_images` WHERE (collection_id = 2) LIMIT 1[0m
  [1m[35m (0.1ms)[0m  SELECT COUNT(*) FROM `collections` 
  Rendered collections/index.erb within layouts/admin (13.9ms)
  [1m[36mUser Load (0.3ms)[0m  [1mSELECT `users`.* FROM `users` WHERE `users`.`id` = 1 LIMIT 1[0m
Completed 200 OK in 23ms (Views: 20.3ms | ActiveRecord: 1.5ms)


Started GET "/admin/collections?q%5Bs%5D=name+desc" for 127.0.0.1 at 2016-01-18 02:28:29 +0100
Processing by CollectionsController#index as HTML
  Parameters: {"q"=>{"s"=>"name desc"}}
  Rendered shared/_restaurant_manage_tabs.html.erb (0.9ms)
  [1m[35mCollection Load (0.3ms)[0m  SELECT `collections`.* FROM `collections` ORDER BY `collections`.`name` DESC, name ASC, created_at DESC LIMIT 12 OFFSET 0
  [1m[36mCollectionImage Load (0.2ms)[0m  [1mSELECT `collection_images`.* FROM `collection_images` WHERE (collection_id = 2) LIMIT 1[0m
  [1m[35mCollectionImage Load (0.2ms)[0m  SELECT `collection_images`.* FROM `collection_images` WHERE (collection_id = 3) LIMIT 1
  [1m[36m (0.2ms)[0m  [1mSELECT COUNT(*) FROM `collections` [0m
  Rendered collections/index.erb within layouts/admin (14.9ms)
  [1m[35mUser Load (0.6ms)[0m  SELECT `users`.* FROM `users` WHERE `users`.`id` = 1 LIMIT 1
Completed 200 OK in 23ms (Views: 21.0ms | ActiveRecord: 1.5ms)


Started GET "/admin/collections?q%5Bs%5D=name+asc" for 127.0.0.1 at 2016-01-18 02:28:30 +0100
Processing by CollectionsController#index as HTML
  Parameters: {"q"=>{"s"=>"name asc"}}
  Rendered shared/_restaurant_manage_tabs.html.erb (1.0ms)
  [1m[36mCollection Load (0.4ms)[0m  [1mSELECT `collections`.* FROM `collections` ORDER BY `collections`.`name` ASC, name ASC, created_at DESC LIMIT 12 OFFSET 0[0m
  [1m[35mCollectionImage Load (0.2ms)[0m  SELECT `collection_images`.* FROM `collection_images` WHERE (collection_id = 3) LIMIT 1
  [1m[36mCollectionImage Load (0.2ms)[0m  [1mSELECT `collection_images`.* FROM `collection_images` WHERE (collection_id = 2) LIMIT 1[0m
  [1m[35m (0.2ms)[0m  SELECT COUNT(*) FROM `collections` 
  Rendered collections/index.erb within layouts/admin (13.6ms)
  [1m[36mUser Load (0.2ms)[0m  [1mSELECT `users`.* FROM `users` WHERE `users`.`id` = 1 LIMIT 1[0m
Completed 200 OK in 22ms (Views: 19.7ms | ActiveRecord: 1.2ms)


Started GET "/admin/collections?q%5Bs%5D=name+asc" for 127.0.0.1 at 2016-01-18 02:28:55 +0100
Processing by CollectionsController#index as HTML
  Parameters: {"q"=>{"s"=>"name asc"}}
  Rendered shared/_restaurant_manage_tabs.html.erb (0.7ms)
  [1m[35mCollection Load (0.4ms)[0m  SELECT `collections`.* FROM `collections` ORDER BY `collections`.`name` ASC, name ASC, created_at DESC LIMIT 12 OFFSET 0
  [1m[36mCollectionImage Load (0.2ms)[0m  [1mSELECT `collection_images`.* FROM `collection_images` WHERE (collection_id = 3) LIMIT 1[0m
  [1m[35mCollectionImage Load (0.3ms)[0m  SELECT `collection_images`.* FROM `collection_images` WHERE (collection_id = 2) LIMIT 1
  [1m[36m (0.2ms)[0m  [1mSELECT COUNT(*) FROM `collections` [0m
  Rendered collections/index.erb within layouts/admin (41.6ms)
  [1m[35mUser Load (0.3ms)[0m  SELECT `users`.* FROM `users` WHERE `users`.`id` = 1 LIMIT 1
Completed 200 OK in 143ms (Views: 115.8ms | ActiveRecord: 8.1ms)


Started GET "/admin/collections?q%5Bs%5D=name+asc" for 127.0.0.1 at 2016-01-18 02:29:11 +0100
Processing by CollectionsController#index as HTML
  Parameters: {"q"=>{"s"=>"name asc"}}
  Rendered shared/_restaurant_manage_tabs.html.erb (1.1ms)
  [1m[36mCollection Load (0.3ms)[0m  [1mSELECT `collections`.* FROM `collections` ORDER BY `collections`.`name` ASC, name ASC, created_at DESC LIMIT 12 OFFSET 0[0m
  [1m[35mCollectionImage Load (0.2ms)[0m  SELECT `collection_images`.* FROM `collection_images` WHERE (collection_id = 3) LIMIT 1
  [1m[36mCollectionImage Load (0.3ms)[0m  [1mSELECT `collection_images`.* FROM `collection_images` WHERE (collection_id = 2) LIMIT 1[0m
  [1m[35m (0.2ms)[0m  SELECT COUNT(*) FROM `collections` 
  Rendered collections/index.erb within layouts/admin (34.7ms)
  [1m[36mUser Load (0.2ms)[0m  [1mSELECT `users`.* FROM `users` WHERE `users`.`id` = 1 LIMIT 1[0m
Completed 200 OK in 104ms (Views: 93.4ms | ActiveRecord: 7.3ms)


Started GET "/admin/collections?q%5Bs%5D=name+asc" for 127.0.0.1 at 2016-01-18 02:29:23 +0100
Processing by CollectionsController#index as HTML
  Parameters: {"q"=>{"s"=>"name asc"}}
  Rendered shared/_restaurant_manage_tabs.html.erb (0.9ms)
  [1m[35mCollection Load (0.3ms)[0m  SELECT `collections`.* FROM `collections` ORDER BY `collections`.`name` ASC, name ASC, created_at DESC LIMIT 12 OFFSET 0
  [1m[36mCollectionImage Load (0.2ms)[0m  [1mSELECT `collection_images`.* FROM `collection_images` WHERE (collection_id = 3) LIMIT 1[0m
  [1m[35mCollectionImage Load (0.4ms)[0m  SELECT `collection_images`.* FROM `collection_images` WHERE (collection_id = 2) LIMIT 1
  [1m[36m (0.2ms)[0m  [1mSELECT COUNT(*) FROM `collections` [0m
  Rendered collections/index.erb within layouts/admin (35.7ms)
  [1m[35mUser Load (0.3ms)[0m  SELECT `users`.* FROM `users` WHERE `users`.`id` = 1 LIMIT 1
Completed 200 OK in 107ms (Views: 96.3ms | ActiveRecord: 7.5ms)
Connecting to database specified by database.yml
DEPRECATION WARNING: Passing :tag, :class and others to use is deprecated. Please invoke b.use :label, :wrap_with => {:class=>"simple_label"} instead. (called from block (2 levels) in <top (required)> at /Users/kevinmuller/halalgems_backend/config/initializers/simple_form.rb:67)
  [1m[36m (0.5ms)[0m  [1mSELECT `schema_migrations`.`version` FROM `schema_migrations` [0m
  [1m[35m (89.5ms)[0m  ALTER TABLE `collections` DROP `disabled`
  [1m[36m (10.7ms)[0m  [1mDELETE FROM `schema_migrations` WHERE `schema_migrations`.`version` = '20160117060649'[0m
  [1m[35m (0.5ms)[0m  SELECT `schema_migrations`.`version` FROM `schema_migrations` 
Connecting to database specified by database.yml
DEPRECATION WARNING: Passing :tag, :class and others to use is deprecated. Please invoke b.use :label, :wrap_with => {:class=>"simple_label"} instead. (called from block (2 levels) in <top (required)> at /Users/kevinmuller/halalgems_backend/config/initializers/simple_form.rb:67)
  [1m[36m (0.2ms)[0m  [1mSELECT `schema_migrations`.`version` FROM `schema_migrations` [0m
  [1m[35m (23.4ms)[0m  ALTER TABLE `collections` ADD `disabled` tinyint(1)
  [1m[36m (0.8ms)[0m  [1mINSERT INTO `schema_migrations` (`version`) VALUES ('20160117060649')[0m
  [1m[35m (0.2ms)[0m  SELECT `schema_migrations`.`version` FROM `schema_migrations` 


Started GET "/admin/collections?q%5Bs%5D=name+asc" for 127.0.0.1 at 2016-01-18 02:35:52 +0100
Processing by CollectionsController#index as HTML
  Parameters: {"q"=>{"s"=>"name asc"}}
  Rendered shared/_restaurant_manage_tabs.html.erb (1.0ms)
  [1m[36mCollection Load (0.3ms)[0m  [1mSELECT `collections`.* FROM `collections` ORDER BY `collections`.`name` ASC, name ASC, created_at DESC LIMIT 12 OFFSET 0[0m
  [1m[35mCollectionImage Load (0.2ms)[0m  SELECT `collection_images`.* FROM `collection_images` WHERE (collection_id = 3) LIMIT 1
  [1m[36mCollectionImage Load (0.3ms)[0m  [1mSELECT `collection_images`.* FROM `collection_images` WHERE (collection_id = 2) LIMIT 1[0m
  [1m[35m (0.1ms)[0m  SELECT COUNT(*) FROM `collections` 
  Rendered collections/index.erb within layouts/admin (58.5ms)
  [1m[36mUser Load (0.3ms)[0m  [1mSELECT `users`.* FROM `users` WHERE `users`.`id` = 1 LIMIT 1[0m
Completed 200 OK in 195ms (Views: 184.0ms | ActiveRecord: 7.8ms)


Started GET "/restaurants" for 127.0.0.1 at 2016-01-18 02:36:35 +0100
  [1m[35m (0.1ms)[0m  SELECT COUNT(*) FROM `filter_types` WHERE (code = 'features')
Processing by RestaurantsController#index as HTML
  [1m[36mUser Load (0.3ms)[0m  [1mSELECT `users`.* FROM `users` WHERE `users`.`id` = 1 LIMIT 1[0m
  Rendered shared/_restaurant_manage_tabs.html.erb (1.1ms)
  Rendered restaurants/_condition_fields.html.erb (16.6ms)
  [1m[35mRestaurant Load (0.9ms)[0m  SELECT `restaurants`.* FROM `restaurants` ORDER BY disabled ASC,created_at DESC LIMIT 12 OFFSET 0
  [1m[36mPhoto Load (0.3ms)[0m  [1mSELECT `photos`.* FROM `photos` WHERE (restaurant_id = 876 and cover = true and status = 1) LIMIT 1[0m
  [1m[35mPhoto Load (0.5ms)[0m  SELECT `photos`.* FROM `photos` WHERE `photos`.`restaurant_id` = 876 AND `photos`.`status` = 1 ORDER BY restaurant_id ASC, created_at DESC LIMIT 1
  [1m[36mPhoto Load (0.5ms)[0m  [1mSELECT `photos`.* FROM `photos` WHERE (restaurant_id = 851 and cover = true and status = 1) LIMIT 1[0m
  [1m[35mPhoto Load (0.4ms)[0m  SELECT `photos`.* FROM `photos` WHERE `photos`.`restaurant_id` = 851 AND `photos`.`status` = 1 ORDER BY restaurant_id ASC, created_at DESC LIMIT 1
  [1m[36mPhoto Load (0.6ms)[0m  [1mSELECT `photos`.* FROM `photos` WHERE (restaurant_id = 693 and cover = true and status = 1) LIMIT 1[0m
  [1m[35mPhoto Load (0.3ms)[0m  SELECT `photos`.* FROM `photos` WHERE `photos`.`restaurant_id` = 693 AND `photos`.`status` = 1 ORDER BY restaurant_id ASC, created_at DESC LIMIT 1
  [1m[36mPhoto Load (0.5ms)[0m  [1mSELECT `photos`.* FROM `photos` WHERE (restaurant_id = 686 and cover = true and status = 1) LIMIT 1[0m
  [1m[35mPhoto Load (1.3ms)[0m  SELECT `photos`.* FROM `photos` WHERE `photos`.`restaurant_id` = 686 AND `photos`.`status` = 1 ORDER BY restaurant_id ASC, created_at DESC LIMIT 1
  [1m[36mPhoto Load (0.9ms)[0m  [1mSELECT `photos`.* FROM `photos` WHERE (restaurant_id = 669 and cover = true and status = 1) LIMIT 1[0m
  [1m[35mPhoto Load (0.4ms)[0m  SELECT `photos`.* FROM `photos` WHERE `photos`.`restaurant_id` = 669 AND `photos`.`status` = 1 ORDER BY restaurant_id ASC, created_at DESC LIMIT 1
  [1m[36mPhoto Load (0.4ms)[0m  [1mSELECT `photos`.* FROM `photos` WHERE (restaurant_id = 251 and cover = true and status = 1) LIMIT 1[0m
  [1m[35mPhoto Load (0.3ms)[0m  SELECT `photos`.* FROM `photos` WHERE `photos`.`restaurant_id` = 251 AND `photos`.`status` = 1 ORDER BY restaurant_id ASC, created_at DESC LIMIT 1
  [1m[36mPhoto Load (0.5ms)[0m  [1mSELECT `photos`.* FROM `photos` WHERE (restaurant_id = 250 and cover = true and status = 1) LIMIT 1[0m
  [1m[35mPhoto Load (0.3ms)[0m  SELECT `photos`.* FROM `photos` WHERE `photos`.`restaurant_id` = 250 AND `photos`.`status` = 1 ORDER BY restaurant_id ASC, created_at DESC LIMIT 1
  [1m[36mPhoto Load (0.3ms)[0m  [1mSELECT `photos`.* FROM `photos` WHERE (restaurant_id = 237 and cover = true and status = 1) LIMIT 1[0m
  [1m[35mPhoto Load (0.2ms)[0m  SELECT `photos`.* FROM `photos` WHERE `photos`.`restaurant_id` = 237 AND `photos`.`status` = 1 ORDER BY restaurant_id ASC, created_at DESC LIMIT 1
  [1m[36mPhoto Load (0.5ms)[0m  [1mSELECT `photos`.* FROM `photos` WHERE (restaurant_id = 231 and cover = true and status = 1) LIMIT 1[0m
  [1m[35mPhoto Load (0.2ms)[0m  SELECT `photos`.* FROM `photos` WHERE `photos`.`restaurant_id` = 231 AND `photos`.`status` = 1 ORDER BY restaurant_id ASC, created_at DESC LIMIT 1
  [1m[36mPhoto Load (2.8ms)[0m  [1mSELECT `photos`.* FROM `photos` WHERE (restaurant_id = 222 and cover = true and status = 1) LIMIT 1[0m
  [1m[35mPhoto Load (0.3ms)[0m  SELECT `photos`.* FROM `photos` WHERE `photos`.`restaurant_id` = 222 AND `photos`.`status` = 1 ORDER BY restaurant_id ASC, created_at DESC LIMIT 1
  [1m[36mPhoto Load (0.5ms)[0m  [1mSELECT `photos`.* FROM `photos` WHERE (restaurant_id = 221 and cover = true and status = 1) LIMIT 1[0m
  [1m[35mPhoto Load (0.3ms)[0m  SELECT `photos`.* FROM `photos` WHERE `photos`.`restaurant_id` = 221 AND `photos`.`status` = 1 ORDER BY restaurant_id ASC, created_at DESC LIMIT 1
  [1m[36mPhoto Load (0.3ms)[0m  [1mSELECT `photos`.* FROM `photos` WHERE (restaurant_id = 216 and cover = true and status = 1) LIMIT 1[0m
  [1m[35mPhoto Load (0.2ms)[0m  SELECT `photos`.* FROM `photos` WHERE `photos`.`restaurant_id` = 216 AND `photos`.`status` = 1 ORDER BY restaurant_id ASC, created_at DESC LIMIT 1
  [1m[36m (0.4ms)[0m  [1mSELECT COUNT(*) FROM `restaurants` [0m
  Rendered restaurants/index.html.erb within layouts/admin (190.6ms)
Completed 200 OK in 233ms (Views: 186.6ms | ActiveRecord: 23.8ms)


Started GET "/admin/collections?q%5Bs%5D=name+asc" for 127.0.0.1 at 2016-01-18 02:40:46 +0100
Processing by CollectionsController#index as HTML
  Parameters: {"q"=>{"s"=>"name asc"}}
  Rendered shared/_restaurant_manage_tabs.html.erb (0.8ms)
  [1m[35mCollection Load (0.3ms)[0m  SELECT `collections`.* FROM `collections` ORDER BY `collections`.`name` ASC, name ASC, created_at DESC LIMIT 12 OFFSET 0
  [1m[36mCollectionImage Load (0.2ms)[0m  [1mSELECT `collection_images`.* FROM `collection_images` WHERE (collection_id = 3) LIMIT 1[0m
  [1m[35mCollectionImage Load (0.3ms)[0m  SELECT `collection_images`.* FROM `collection_images` WHERE (collection_id = 2) LIMIT 1
  [1m[36m (0.2ms)[0m  [1mSELECT COUNT(*) FROM `collections` [0m
  Rendered collections/index.erb within layouts/admin (60.5ms)
  [1m[35mUser Load (0.2ms)[0m  SELECT `users`.* FROM `users` WHERE `users`.`id` = 1 LIMIT 1
Completed 200 OK in 182ms (Views: 156.5ms | ActiveRecord: 22.9ms)


Started GET "/admin/collections?q%5Bs%5D=name+asc" for 127.0.0.1 at 2016-01-18 02:43:15 +0100

ArgumentError (can't use member outside resource(s) scope):
  config/routes.rb:224:in `block (4 levels) in <top (required)>'
  config/routes.rb:221:in `block (3 levels) in <top (required)>'
  config/routes.rb:220:in `block (2 levels) in <top (required)>'
  config/routes.rb:194:in `block in <top (required)>'
  config/routes.rb:1:in `<top (required)>'


  Rendered /Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_dispatch/middleware/templates/rescues/_trace.erb (1.2ms)
  Rendered /Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_dispatch/middleware/templates/rescues/_request_and_response.erb (1.1ms)
  Rendered /Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_dispatch/middleware/templates/rescues/diagnostics.erb within rescues/layout (49.0ms)


Started GET "/admin/collections?q%5Bs%5D=name+asc" for 127.0.0.1 at 2016-01-18 02:43:52 +0100
Processing by CollectionsController#index as HTML
  Parameters: {"q"=>{"s"=>"name asc"}}
  Rendered shared/_restaurant_manage_tabs.html.erb (2.4ms)
  [1m[36mCollection Load (0.7ms)[0m  [1mSELECT `collections`.* FROM `collections` ORDER BY `collections`.`name` ASC, name ASC, created_at DESC LIMIT 12 OFFSET 0[0m
  [1m[35mCollectionImage Load (0.2ms)[0m  SELECT `collection_images`.* FROM `collection_images` WHERE (collection_id = 3) LIMIT 1
  [1m[36mCollectionImage Load (0.3ms)[0m  [1mSELECT `collection_images`.* FROM `collection_images` WHERE (collection_id = 2) LIMIT 1[0m
  [1m[35m (0.1ms)[0m  SELECT COUNT(*) FROM `collections` 
  Rendered collections/index.erb within layouts/admin (97.0ms)
  [1m[36mUser Load (0.3ms)[0m  [1mSELECT `users`.* FROM `users` WHERE `users`.`id` = 1 LIMIT 1[0m
Completed 200 OK in 166ms (Views: 154.7ms | ActiveRecord: 8.5ms)


Started POST "/admin/collections/disable_toggle/3" for 127.0.0.1 at 2016-01-18 02:46:14 +0100

ActionController::RoutingError (No route matches [POST] "/admin/collections/disable_toggle/3"):
  actionpack (3.2.8) lib/action_dispatch/middleware/debug_exceptions.rb:21:in `call'
  actionpack (3.2.8) lib/action_dispatch/middleware/show_exceptions.rb:56:in `call'
  railties (3.2.8) lib/rails/rack/logger.rb:26:in `call_app'
  railties (3.2.8) lib/rails/rack/logger.rb:16:in `call'
  quiet_assets (1.0.3) lib/quiet_assets.rb:23:in `call_with_quiet_assets'
  actionpack (3.2.8) lib/action_dispatch/middleware/request_id.rb:22:in `call'
  rack (1.4.5) lib/rack/methodoverride.rb:21:in `call'
  rack (1.4.5) lib/rack/runtime.rb:17:in `call'
  activesupport (3.2.8) lib/active_support/cache/strategy/local_cache.rb:72:in `call'
  rack (1.4.5) lib/rack/lock.rb:15:in `call'
  actionpack (3.2.8) lib/action_dispatch/middleware/static.rb:62:in `call'
  dragonfly (0.9.15) lib/dragonfly/middleware.rb:13:in `call'
  rack-cache (1.2) lib/rack/cache/context.rb:136:in `forward'
  rack-cache (1.2) lib/rack/cache/context.rb:143:in `pass'
  rack-cache (1.2) lib/rack/cache/context.rb:155:in `invalidate'
  rack-cache (1.2) lib/rack/cache/context.rb:71:in `call!'
  rack-cache (1.2) lib/rack/cache/context.rb:51:in `call'
  railties (3.2.8) lib/rails/engine.rb:479:in `call'
  railties (3.2.8) lib/rails/application.rb:223:in `call'
  rack (1.4.5) lib/rack/content_length.rb:14:in `call'
  railties (3.2.8) lib/rails/rack/log_tailer.rb:17:in `call'
  rack (1.4.5) lib/rack/handler/webrick.rb:59:in `service'
  /Users/kevinmuller/.rvm/rubies/ruby-2.2.4/lib/ruby/2.2.0/webrick/httpserver.rb:138:in `service'
  /Users/kevinmuller/.rvm/rubies/ruby-2.2.4/lib/ruby/2.2.0/webrick/httpserver.rb:94:in `run'
  /Users/kevinmuller/.rvm/rubies/ruby-2.2.4/lib/ruby/2.2.0/webrick/server.rb:294:in `block in start_thread'


  Rendered /Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_dispatch/middleware/templates/rescues/routing_error.erb within rescues/layout (1.1ms)


Started POST "/admin/collections/disable_toggle/3" for 127.0.0.1 at 2016-01-18 02:46:54 +0100

ActionController::RoutingError (No route matches [POST] "/admin/collections/disable_toggle/3"):
  actionpack (3.2.8) lib/action_dispatch/middleware/debug_exceptions.rb:21:in `call'
  actionpack (3.2.8) lib/action_dispatch/middleware/show_exceptions.rb:56:in `call'
  railties (3.2.8) lib/rails/rack/logger.rb:26:in `call_app'
  railties (3.2.8) lib/rails/rack/logger.rb:16:in `call'
  quiet_assets (1.0.3) lib/quiet_assets.rb:23:in `call_with_quiet_assets'
  actionpack (3.2.8) lib/action_dispatch/middleware/request_id.rb:22:in `call'
  rack (1.4.5) lib/rack/methodoverride.rb:21:in `call'
  rack (1.4.5) lib/rack/runtime.rb:17:in `call'
  activesupport (3.2.8) lib/active_support/cache/strategy/local_cache.rb:72:in `call'
  rack (1.4.5) lib/rack/lock.rb:15:in `call'
  actionpack (3.2.8) lib/action_dispatch/middleware/static.rb:62:in `call'
  dragonfly (0.9.15) lib/dragonfly/middleware.rb:13:in `call'
  rack-cache (1.2) lib/rack/cache/context.rb:136:in `forward'
  rack-cache (1.2) lib/rack/cache/context.rb:143:in `pass'
  rack-cache (1.2) lib/rack/cache/context.rb:155:in `invalidate'
  rack-cache (1.2) lib/rack/cache/context.rb:71:in `call!'
  rack-cache (1.2) lib/rack/cache/context.rb:51:in `call'
  railties (3.2.8) lib/rails/engine.rb:479:in `call'
  railties (3.2.8) lib/rails/application.rb:223:in `call'
  rack (1.4.5) lib/rack/content_length.rb:14:in `call'
  railties (3.2.8) lib/rails/rack/log_tailer.rb:17:in `call'
  rack (1.4.5) lib/rack/handler/webrick.rb:59:in `service'
  /Users/kevinmuller/.rvm/rubies/ruby-2.2.4/lib/ruby/2.2.0/webrick/httpserver.rb:138:in `service'
  /Users/kevinmuller/.rvm/rubies/ruby-2.2.4/lib/ruby/2.2.0/webrick/httpserver.rb:94:in `run'
  /Users/kevinmuller/.rvm/rubies/ruby-2.2.4/lib/ruby/2.2.0/webrick/server.rb:294:in `block in start_thread'


  Rendered /Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_dispatch/middleware/templates/rescues/routing_error.erb within rescues/layout (0.8ms)


Started GET "/admin/collections?q%5Bs%5D=name+asc" for 127.0.0.1 at 2016-01-18 02:54:30 +0100
Processing by CollectionsController#index as HTML
  Parameters: {"q"=>{"s"=>"name asc"}}
  Rendered shared/_restaurant_manage_tabs.html.erb (0.9ms)
  [1m[35mCollection Load (0.3ms)[0m  SELECT `collections`.* FROM `collections` ORDER BY `collections`.`name` ASC, name ASC, created_at DESC LIMIT 12 OFFSET 0
  [1m[36mCollectionImage Load (0.2ms)[0m  [1mSELECT `collection_images`.* FROM `collection_images` WHERE (collection_id = 3) LIMIT 1[0m
  [1m[35mCollectionImage Load (0.3ms)[0m  SELECT `collection_images`.* FROM `collection_images` WHERE (collection_id = 2) LIMIT 1
  [1m[36m (0.2ms)[0m  [1mSELECT COUNT(*) FROM `collections` [0m
  Rendered collections/index.erb within layouts/admin (40.4ms)
  [1m[35mUser Load (0.2ms)[0m  SELECT `users`.* FROM `users` WHERE `users`.`id` = 1 LIMIT 1
Completed 200 OK in 114ms (Views: 103.3ms | ActiveRecord: 7.7ms)


Started POST "/admin/collections/disable_toggle/3" for 127.0.0.1 at 2016-01-18 02:54:37 +0100

ActionController::RoutingError (No route matches [POST] "/admin/collections/disable_toggle/3"):
  actionpack (3.2.8) lib/action_dispatch/middleware/debug_exceptions.rb:21:in `call'
  actionpack (3.2.8) lib/action_dispatch/middleware/show_exceptions.rb:56:in `call'
  railties (3.2.8) lib/rails/rack/logger.rb:26:in `call_app'
  railties (3.2.8) lib/rails/rack/logger.rb:16:in `call'
  quiet_assets (1.0.3) lib/quiet_assets.rb:23:in `call_with_quiet_assets'
  actionpack (3.2.8) lib/action_dispatch/middleware/request_id.rb:22:in `call'
  rack (1.4.5) lib/rack/methodoverride.rb:21:in `call'
  rack (1.4.5) lib/rack/runtime.rb:17:in `call'
  activesupport (3.2.8) lib/active_support/cache/strategy/local_cache.rb:72:in `call'
  rack (1.4.5) lib/rack/lock.rb:15:in `call'
  actionpack (3.2.8) lib/action_dispatch/middleware/static.rb:62:in `call'
  dragonfly (0.9.15) lib/dragonfly/middleware.rb:13:in `call'
  rack-cache (1.2) lib/rack/cache/context.rb:136:in `forward'
  rack-cache (1.2) lib/rack/cache/context.rb:143:in `pass'
  rack-cache (1.2) lib/rack/cache/context.rb:155:in `invalidate'
  rack-cache (1.2) lib/rack/cache/context.rb:71:in `call!'
  rack-cache (1.2) lib/rack/cache/context.rb:51:in `call'
  railties (3.2.8) lib/rails/engine.rb:479:in `call'
  railties (3.2.8) lib/rails/application.rb:223:in `call'
  rack (1.4.5) lib/rack/content_length.rb:14:in `call'
  railties (3.2.8) lib/rails/rack/log_tailer.rb:17:in `call'
  rack (1.4.5) lib/rack/handler/webrick.rb:59:in `service'
  /Users/kevinmuller/.rvm/rubies/ruby-2.2.4/lib/ruby/2.2.0/webrick/httpserver.rb:138:in `service'
  /Users/kevinmuller/.rvm/rubies/ruby-2.2.4/lib/ruby/2.2.0/webrick/httpserver.rb:94:in `run'
  /Users/kevinmuller/.rvm/rubies/ruby-2.2.4/lib/ruby/2.2.0/webrick/server.rb:294:in `block in start_thread'


  Rendered /Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_dispatch/middleware/templates/rescues/routing_error.erb within rescues/layout (1.0ms)


Started GET "/admin/collections?q%5Bs%5D=name+asc" for 127.0.0.1 at 2016-01-18 02:55:15 +0100
Processing by CollectionsController#index as HTML
  Parameters: {"q"=>{"s"=>"name asc"}}
  Rendered shared/_restaurant_manage_tabs.html.erb (1.2ms)
  [1m[36mCollection Load (0.3ms)[0m  [1mSELECT `collections`.* FROM `collections` ORDER BY `collections`.`name` ASC, name ASC, created_at DESC LIMIT 12 OFFSET 0[0m
  [1m[35mCollectionImage Load (0.2ms)[0m  SELECT `collection_images`.* FROM `collection_images` WHERE (collection_id = 3) LIMIT 1
  [1m[36mCollectionImage Load (0.3ms)[0m  [1mSELECT `collection_images`.* FROM `collection_images` WHERE (collection_id = 2) LIMIT 1[0m
  [1m[35m (0.2ms)[0m  SELECT COUNT(*) FROM `collections` 
  Rendered collections/index.erb within layouts/admin (42.5ms)
  [1m[36mUser Load (0.2ms)[0m  [1mSELECT `users`.* FROM `users` WHERE `users`.`id` = 1 LIMIT 1[0m
Completed 200 OK in 101ms (Views: 89.5ms | ActiveRecord: 8.2ms)


Started POST "/admin/collections/disable_toggle/2" for 127.0.0.1 at 2016-01-18 02:55:19 +0100

ActionController::RoutingError (No route matches [POST] "/admin/collections/disable_toggle/2"):
  actionpack (3.2.8) lib/action_dispatch/middleware/debug_exceptions.rb:21:in `call'
  actionpack (3.2.8) lib/action_dispatch/middleware/show_exceptions.rb:56:in `call'
  railties (3.2.8) lib/rails/rack/logger.rb:26:in `call_app'
  railties (3.2.8) lib/rails/rack/logger.rb:16:in `call'
  quiet_assets (1.0.3) lib/quiet_assets.rb:23:in `call_with_quiet_assets'
  actionpack (3.2.8) lib/action_dispatch/middleware/request_id.rb:22:in `call'
  rack (1.4.5) lib/rack/methodoverride.rb:21:in `call'
  rack (1.4.5) lib/rack/runtime.rb:17:in `call'
  activesupport (3.2.8) lib/active_support/cache/strategy/local_cache.rb:72:in `call'
  rack (1.4.5) lib/rack/lock.rb:15:in `call'
  actionpack (3.2.8) lib/action_dispatch/middleware/static.rb:62:in `call'
  dragonfly (0.9.15) lib/dragonfly/middleware.rb:13:in `call'
  rack-cache (1.2) lib/rack/cache/context.rb:136:in `forward'
  rack-cache (1.2) lib/rack/cache/context.rb:143:in `pass'
  rack-cache (1.2) lib/rack/cache/context.rb:155:in `invalidate'
  rack-cache (1.2) lib/rack/cache/context.rb:71:in `call!'
  rack-cache (1.2) lib/rack/cache/context.rb:51:in `call'
  railties (3.2.8) lib/rails/engine.rb:479:in `call'
  railties (3.2.8) lib/rails/application.rb:223:in `call'
  rack (1.4.5) lib/rack/content_length.rb:14:in `call'
  railties (3.2.8) lib/rails/rack/log_tailer.rb:17:in `call'
  rack (1.4.5) lib/rack/handler/webrick.rb:59:in `service'
  /Users/kevinmuller/.rvm/rubies/ruby-2.2.4/lib/ruby/2.2.0/webrick/httpserver.rb:138:in `service'
  /Users/kevinmuller/.rvm/rubies/ruby-2.2.4/lib/ruby/2.2.0/webrick/httpserver.rb:94:in `run'
  /Users/kevinmuller/.rvm/rubies/ruby-2.2.4/lib/ruby/2.2.0/webrick/server.rb:294:in `block in start_thread'


  Rendered /Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_dispatch/middleware/templates/rescues/routing_error.erb within rescues/layout (1.0ms)


Started GET "/admin/collections?q%5Bs%5D=name+asc" for 127.0.0.1 at 2016-01-18 02:55:45 +0100
Processing by CollectionsController#index as HTML
  Parameters: {"q"=>{"s"=>"name asc"}}
  Rendered shared/_restaurant_manage_tabs.html.erb (0.9ms)
  [1m[35mCollection Load (0.3ms)[0m  SELECT `collections`.* FROM `collections` ORDER BY `collections`.`name` ASC, name ASC, created_at DESC LIMIT 12 OFFSET 0
  [1m[36mCollectionImage Load (0.4ms)[0m  [1mSELECT `collection_images`.* FROM `collection_images` WHERE (collection_id = 3) LIMIT 1[0m
  [1m[35mCollectionImage Load (0.3ms)[0m  SELECT `collection_images`.* FROM `collection_images` WHERE (collection_id = 2) LIMIT 1
  [1m[36m (0.1ms)[0m  [1mSELECT COUNT(*) FROM `collections` [0m
  Rendered collections/index.erb within layouts/admin (49.2ms)
  [1m[35mUser Load (0.2ms)[0m  SELECT `users`.* FROM `users` WHERE `users`.`id` = 1 LIMIT 1
Completed 200 OK in 100ms (Views: 83.1ms | ActiveRecord: 9.5ms)


Started POST "/admin/collections/disable_toggle/3" for 127.0.0.1 at 2016-01-18 02:55:49 +0100

ActionController::RoutingError (No route matches [POST] "/admin/collections/disable_toggle/3"):
  actionpack (3.2.8) lib/action_dispatch/middleware/debug_exceptions.rb:21:in `call'
  actionpack (3.2.8) lib/action_dispatch/middleware/show_exceptions.rb:56:in `call'
  railties (3.2.8) lib/rails/rack/logger.rb:26:in `call_app'
  railties (3.2.8) lib/rails/rack/logger.rb:16:in `call'
  quiet_assets (1.0.3) lib/quiet_assets.rb:23:in `call_with_quiet_assets'
  actionpack (3.2.8) lib/action_dispatch/middleware/request_id.rb:22:in `call'
  rack (1.4.5) lib/rack/methodoverride.rb:21:in `call'
  rack (1.4.5) lib/rack/runtime.rb:17:in `call'
  activesupport (3.2.8) lib/active_support/cache/strategy/local_cache.rb:72:in `call'
  rack (1.4.5) lib/rack/lock.rb:15:in `call'
  actionpack (3.2.8) lib/action_dispatch/middleware/static.rb:62:in `call'
  dragonfly (0.9.15) lib/dragonfly/middleware.rb:13:in `call'
  rack-cache (1.2) lib/rack/cache/context.rb:136:in `forward'
  rack-cache (1.2) lib/rack/cache/context.rb:143:in `pass'
  rack-cache (1.2) lib/rack/cache/context.rb:155:in `invalidate'
  rack-cache (1.2) lib/rack/cache/context.rb:71:in `call!'
  rack-cache (1.2) lib/rack/cache/context.rb:51:in `call'
  railties (3.2.8) lib/rails/engine.rb:479:in `call'
  railties (3.2.8) lib/rails/application.rb:223:in `call'
  rack (1.4.5) lib/rack/content_length.rb:14:in `call'
  railties (3.2.8) lib/rails/rack/log_tailer.rb:17:in `call'
  rack (1.4.5) lib/rack/handler/webrick.rb:59:in `service'
  /Users/kevinmuller/.rvm/rubies/ruby-2.2.4/lib/ruby/2.2.0/webrick/httpserver.rb:138:in `service'
  /Users/kevinmuller/.rvm/rubies/ruby-2.2.4/lib/ruby/2.2.0/webrick/httpserver.rb:94:in `run'
  /Users/kevinmuller/.rvm/rubies/ruby-2.2.4/lib/ruby/2.2.0/webrick/server.rb:294:in `block in start_thread'


  Rendered /Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_dispatch/middleware/templates/rescues/routing_error.erb within rescues/layout (1.4ms)


Started GET "/admin/collections?q%5Bs%5D=name+asc" for 127.0.0.1 at 2016-01-18 02:58:23 +0100
Processing by CollectionsController#index as HTML
  Parameters: {"q"=>{"s"=>"name asc"}}
  Rendered shared/_restaurant_manage_tabs.html.erb (0.9ms)
  [1m[36mCollection Load (0.9ms)[0m  [1mSELECT `collections`.* FROM `collections` ORDER BY `collections`.`name` ASC, name ASC, created_at DESC LIMIT 12 OFFSET 0[0m
  [1m[35mCollectionImage Load (0.6ms)[0m  SELECT `collection_images`.* FROM `collection_images` WHERE (collection_id = 3) LIMIT 1
  [1m[36mCollectionImage Load (0.4ms)[0m  [1mSELECT `collection_images`.* FROM `collection_images` WHERE (collection_id = 2) LIMIT 1[0m
  [1m[35m (0.2ms)[0m  SELECT COUNT(*) FROM `collections` 
  Rendered collections/index.erb within layouts/admin (38.8ms)
  [1m[36mUser Load (0.3ms)[0m  [1mSELECT `users`.* FROM `users` WHERE `users`.`id` = 1 LIMIT 1[0m
Completed 200 OK in 95ms (Views: 83.0ms | ActiveRecord: 9.0ms)


Started GET "/admin/collections?q%5Bs%5D=name+asc" for 127.0.0.1 at 2016-01-18 02:58:50 +0100
Processing by CollectionsController#index as HTML
  Parameters: {"q"=>{"s"=>"name asc"}}
  Rendered shared/_restaurant_manage_tabs.html.erb (1.6ms)
  [1m[35mCollection Load (0.5ms)[0m  SELECT `collections`.* FROM `collections` ORDER BY `collections`.`name` ASC, name ASC, created_at DESC LIMIT 12 OFFSET 0
  [1m[36mCollectionImage Load (0.2ms)[0m  [1mSELECT `collection_images`.* FROM `collection_images` WHERE (collection_id = 3) LIMIT 1[0m
  [1m[35mCollectionImage Load (0.4ms)[0m  SELECT `collection_images`.* FROM `collection_images` WHERE (collection_id = 2) LIMIT 1
  [1m[36m (0.3ms)[0m  [1mSELECT COUNT(*) FROM `collections` [0m
  Rendered collections/index.erb within layouts/admin (48.5ms)
  [1m[35mUser Load (0.2ms)[0m  SELECT `users`.* FROM `users` WHERE `users`.`id` = 1 LIMIT 1
Completed 200 OK in 97ms (Views: 84.5ms | ActiveRecord: 8.4ms)


Started POST "/admin/collections/2/disable_toggle" for 127.0.0.1 at 2016-01-18 02:58:55 +0100
Processing by CollectionsController#disable_toggle as JS
  Parameters: {"id"=>"2"}
  [1m[36mCollection Load (0.3ms)[0m  [1mSELECT `collections`.* FROM `collections` WHERE `collections`.`id` = 2 LIMIT 1[0m
  [1m[35m (0.1ms)[0m  BEGIN
  [1m[36m (0.4ms)[0m  [1mUPDATE `collections` SET `disabled` = 0, `updated_at` = '2016-01-18 01:58:55' WHERE `collections`.`id` = 2[0m
  [1m[35m (0.8ms)[0m  COMMIT
Completed 500 Internal Server Error in 74ms

ActionView::MissingTemplate (Missing template collection/disable_toggle with {:locale=>[:en], :formats=>[:js, "application/ecmascript", "application/x-ecmascript", :html, :text, :js, :css, :ics, :csv, :png, :jpeg, :gif, :bmp, :tiff, :mpeg, :xml, :rss, :atom, :yaml, :multipart_form, :url_encoded_form, :json, :pdf, :zip], :handlers=>[:erb, :builder, :coffee, :slim]}. Searched in:
  * "/Users/kevinmuller/halalgems_backend/app/views"
  * "/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/ckeditor-3.7.3/app/views"
  * "/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/devise_mailchimp-0.0.4/app/views"
  * "/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/kaminari-bootstrap-3.0.1/app/views"
  * "/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/bootstrap-kaminari-views-0.0.3/app/views"
  * "/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/kaminari-0.14.1/app/views"
  * "/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/devise-2.0.4/app/views"
):
  app/controllers/collections_controller.rb:172:in `disable_toggle'


  Rendered /Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_dispatch/middleware/templates/rescues/missing_template.erb within rescues/layout (0.8ms)


Started GET "/admin/collections?q%5Bs%5D=name+asc" for 127.0.0.1 at 2016-01-18 02:59:31 +0100
Processing by CollectionsController#index as HTML
  Parameters: {"q"=>{"s"=>"name asc"}}
  Rendered shared/_restaurant_manage_tabs.html.erb (0.9ms)
  [1m[36mCollection Load (0.3ms)[0m  [1mSELECT `collections`.* FROM `collections` ORDER BY `collections`.`name` ASC, name ASC, created_at DESC LIMIT 12 OFFSET 0[0m
  [1m[35mCollectionImage Load (0.2ms)[0m  SELECT `collection_images`.* FROM `collection_images` WHERE (collection_id = 3) LIMIT 1
  [1m[36mCollectionImage Load (0.2ms)[0m  [1mSELECT `collection_images`.* FROM `collection_images` WHERE (collection_id = 2) LIMIT 1[0m
  [1m[35m (0.2ms)[0m  SELECT COUNT(*) FROM `collections` 
  Rendered collections/index.erb within layouts/admin (16.2ms)
  [1m[36mUser Load (0.3ms)[0m  [1mSELECT `users`.* FROM `users` WHERE `users`.`id` = 1 LIMIT 1[0m
Completed 200 OK in 28ms (Views: 25.8ms | ActiveRecord: 1.2ms)


Started POST "/admin/collections/2/disable_toggle" for 127.0.0.1 at 2016-01-18 02:59:34 +0100
Processing by CollectionsController#disable_toggle as JS
  Parameters: {"id"=>"2"}
  [1m[35mCollection Load (1.4ms)[0m  SELECT `collections`.* FROM `collections` WHERE `collections`.`id` = 2 LIMIT 1
  [1m[36m (0.7ms)[0m  [1mBEGIN[0m
  [1m[35m (0.3ms)[0m  UPDATE `collections` SET `disabled` = 1, `updated_at` = '2016-01-18 01:59:34' WHERE `collections`.`id` = 2
  [1m[36m (0.7ms)[0m  [1mCOMMIT[0m
Completed 500 Internal Server Error in 54ms

ActionView::MissingTemplate (Missing template collection/disable_toggle with {:locale=>[:en], :formats=>[:js, "application/ecmascript", "application/x-ecmascript", :html, :text, :js, :css, :ics, :csv, :png, :jpeg, :gif, :bmp, :tiff, :mpeg, :xml, :rss, :atom, :yaml, :multipart_form, :url_encoded_form, :json, :pdf, :zip], :handlers=>[:erb, :builder, :coffee, :slim]}. Searched in:
  * "/Users/kevinmuller/halalgems_backend/app/views"
  * "/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/ckeditor-3.7.3/app/views"
  * "/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/devise_mailchimp-0.0.4/app/views"
  * "/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/kaminari-bootstrap-3.0.1/app/views"
  * "/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/bootstrap-kaminari-views-0.0.3/app/views"
  * "/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/kaminari-0.14.1/app/views"
  * "/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/devise-2.0.4/app/views"
):
  app/controllers/collections_controller.rb:172:in `disable_toggle'


  Rendered /Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_dispatch/middleware/templates/rescues/missing_template.erb within rescues/layout (0.9ms)


Started GET "/admin/collections?q%5Bs%5D=name+asc" for 127.0.0.1 at 2016-01-18 02:59:35 +0100
Processing by CollectionsController#index as HTML
  Parameters: {"q"=>{"s"=>"name asc"}}
  Rendered shared/_restaurant_manage_tabs.html.erb (0.9ms)
  [1m[35mCollection Load (0.4ms)[0m  SELECT `collections`.* FROM `collections` ORDER BY `collections`.`name` ASC, name ASC, created_at DESC LIMIT 12 OFFSET 0
  [1m[36mCollectionImage Load (1.0ms)[0m  [1mSELECT `collection_images`.* FROM `collection_images` WHERE (collection_id = 3) LIMIT 1[0m
  [1m[35mCollectionImage Load (0.8ms)[0m  SELECT `collection_images`.* FROM `collection_images` WHERE (collection_id = 2) LIMIT 1
  [1m[36m (0.3ms)[0m  [1mSELECT COUNT(*) FROM `collections` [0m
  Rendered collections/index.erb within layouts/admin (22.7ms)
  [1m[35mUser Load (1.3ms)[0m  SELECT `users`.* FROM `users` WHERE `users`.`id` = 1 LIMIT 1
Completed 200 OK in 37ms (Views: 32.0ms | ActiveRecord: 3.7ms)


Started GET "/admin/collections?q%5Bs%5D=name+asc" for 127.0.0.1 at 2016-01-18 03:04:18 +0100
Processing by CollectionsController#index as HTML
  Parameters: {"q"=>{"s"=>"name asc"}}
  Rendered shared/_restaurant_manage_tabs.html.erb (1.3ms)
  [1m[36mCollection Load (0.4ms)[0m  [1mSELECT `collections`.* FROM `collections` ORDER BY `collections`.`name` ASC, name ASC, created_at DESC LIMIT 12 OFFSET 0[0m
  [1m[35mCollectionImage Load (0.5ms)[0m  SELECT `collection_images`.* FROM `collection_images` WHERE (collection_id = 3) LIMIT 1
  [1m[36mCollectionImage Load (0.9ms)[0m  [1mSELECT `collection_images`.* FROM `collection_images` WHERE (collection_id = 2) LIMIT 1[0m
  [1m[35m (0.2ms)[0m  SELECT COUNT(*) FROM `collections` 
  Rendered collections/index.erb within layouts/admin (33.0ms)
  [1m[36mUser Load (0.4ms)[0m  [1mSELECT `users`.* FROM `users` WHERE `users`.`id` = 1 LIMIT 1[0m
Completed 200 OK in 75ms (Views: 69.9ms | ActiveRecord: 2.4ms)


Started POST "/admin/collections/2/disable_toggle" for 127.0.0.1 at 2016-01-18 03:04:21 +0100
Processing by CollectionsController#disable_toggle as JS
  Parameters: {"id"=>"2"}
  [1m[35mCollection Load (0.3ms)[0m  SELECT `collections`.* FROM `collections` WHERE `collections`.`id` = 2 LIMIT 1
  [1m[36m (0.7ms)[0m  [1mBEGIN[0m
  [1m[35m (0.3ms)[0m  UPDATE `collections` SET `disabled` = 0, `updated_at` = '2016-01-18 02:04:21' WHERE `collections`.`id` = 2
  [1m[36m (0.4ms)[0m  [1mCOMMIT[0m
Completed 500 Internal Server Error in 54ms

ActionView::MissingTemplate (Missing template collection/disable_toggle with {:locale=>[:en], :formats=>[:js, "application/ecmascript", "application/x-ecmascript", :html, :text, :js, :css, :ics, :csv, :png, :jpeg, :gif, :bmp, :tiff, :mpeg, :xml, :rss, :atom, :yaml, :multipart_form, :url_encoded_form, :json, :pdf, :zip], :handlers=>[:erb, :builder, :coffee, :slim]}. Searched in:
  * "/Users/kevinmuller/halalgems_backend/app/views"
  * "/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/ckeditor-3.7.3/app/views"
  * "/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/devise_mailchimp-0.0.4/app/views"
  * "/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/kaminari-bootstrap-3.0.1/app/views"
  * "/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/bootstrap-kaminari-views-0.0.3/app/views"
  * "/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/kaminari-0.14.1/app/views"
  * "/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/devise-2.0.4/app/views"
):
  app/controllers/collections_controller.rb:172:in `disable_toggle'


  Rendered /Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_dispatch/middleware/templates/rescues/missing_template.erb within rescues/layout (0.9ms)


Started GET "/admin/collections?q%5Bs%5D=name+asc" for 127.0.0.1 at 2016-01-18 03:06:15 +0100
Processing by CollectionsController#index as HTML
  Parameters: {"q"=>{"s"=>"name asc"}}
  Rendered shared/_restaurant_manage_tabs.html.erb (0.9ms)
  [1m[35mCollection Load (0.5ms)[0m  SELECT `collections`.* FROM `collections` ORDER BY `collections`.`name` ASC, name ASC, created_at DESC LIMIT 12 OFFSET 0
  [1m[36mCollectionImage Load (1.5ms)[0m  [1mSELECT `collection_images`.* FROM `collection_images` WHERE (collection_id = 3) LIMIT 1[0m
  [1m[35mCollectionImage Load (0.3ms)[0m  SELECT `collection_images`.* FROM `collection_images` WHERE (collection_id = 2) LIMIT 1
  [1m[36m (0.2ms)[0m  [1mSELECT COUNT(*) FROM `collections` [0m
  Rendered collections/index.erb within layouts/admin (60.5ms)
  [1m[35mUser Load (0.5ms)[0m  SELECT `users`.* FROM `users` WHERE `users`.`id` = 1 LIMIT 1
Completed 200 OK in 143ms (Views: 129.0ms | ActiveRecord: 10.8ms)


Started POST "/admin/collections/2/disable_toggle" for 127.0.0.1 at 2016-01-18 03:06:18 +0100
Processing by CollectionsController#disable_toggle as JS
  Parameters: {"id"=>"2"}
  [1m[36mCollection Load (0.5ms)[0m  [1mSELECT `collections`.* FROM `collections` WHERE `collections`.`id` = 2 LIMIT 1[0m
  [1m[35m (2.7ms)[0m  BEGIN
  [1m[36m (1.3ms)[0m  [1mUPDATE `collections` SET `disabled` = 1, `updated_at` = '2016-01-18 02:06:18' WHERE `collections`.`id` = 2[0m
  [1m[35m (1.1ms)[0m  COMMIT
  Rendered collections/disable_toggle.js.erb (1.1ms)
Completed 200 OK in 81ms (Views: 66.7ms | ActiveRecord: 5.7ms)


Started GET "/" for 127.0.0.1 at 2016-01-18 03:29:44 +0100
Processing by PagesController#home as HTML
  [1m[36mAdminPhoto Load (1.3ms)[0m  [1mSELECT `admin_photos`.* FROM `admin_photos` WHERE `admin_photos`.`image_type` = 1 ORDER BY RAND() LIMIT 1[0m
  [1m[35mFilter Load (0.3ms)[0m  SELECT `filters`.* FROM `filters` WHERE (code = 'cuisine') ORDER BY name ASC
  [1m[36mUser Load (0.2ms)[0m  [1mSELECT `users`.* FROM `users` WHERE `users`.`gem_hunter` = 1 LIMIT 3[0m
  [1m[35mAdminPhoto Load (0.3ms)[0m  SELECT `admin_photos`.* FROM `admin_photos` WHERE `admin_photos`.`image_type` = 1 ORDER BY `admin_photos`.`id` DESC LIMIT 1
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT `admin_photos`.* FROM `admin_photos` WHERE `admin_photos`.`image_type` = 1 ORDER BY `admin_photos`.`id` DESC LIMIT 1[0m
  Rendered pages/home.html.slim within layouts/application_home (26.3ms)
Completed 500 Internal Server Error in 125ms

ActionView::Template::Error (undefined method `text_title' for nil:NilClass):
    3:     = image_tag homepage_bg_photo, :width => "100%" , class: "random-background"
    4:     .hyperlinked_text
    5:       span.title_text_hypelink 
    6:         = link_to home_page_text[0], format_hyperlink(home_page_text[2]) if home_page_text
    7:       - if home_page_text[1].present?
    8:         span.content_text_hypelink 
    9:           | - 
  app/helpers/admin_photos_helper.rb:28:in `home_page_text'
  app/views/pages/home.html.slim:6:in `_app_views_pages_home_html_slim___3291055431736903596_70236320938720'
  app/controllers/pages_controller.rb:23:in `home'


  Rendered /Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_dispatch/middleware/templates/rescues/_trace.erb (3.3ms)
  Rendered /Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_dispatch/middleware/templates/rescues/_request_and_response.erb (1.0ms)
  Rendered /Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_dispatch/middleware/templates/rescues/template_error.erb within rescues/layout (67.9ms)


Started GET "/admin/" for 127.0.0.1 at 2016-01-18 03:32:02 +0100
  [1m[35m (0.2ms)[0m  SELECT COUNT(*) FROM `filter_types` WHERE (code = 'features')
Processing by RestaurantsController#index as HTML
Redirected to http://localhost:3000/users/sign_in
Filter chain halted as :required_user_login rendered or redirected
Completed 302 Found in 2ms (ActiveRecord: 0.0ms)


Started GET "/users/sign_in" for 127.0.0.1 at 2016-01-18 03:32:02 +0100
Processing by SessionsController#new as HTML
  Rendered sessions/new.html.slim within layouts/application (1.9ms)
  Rendered layouts/_header.html.erb (1.7ms)
  Rendered layouts/_main_menu.html.slim (0.6ms)
  Rendered layouts/_sub_main_menu.html.slim (0.0ms)
  Rendered layouts/_flash_messages.html.erb (0.1ms)
  [1m[36mBasicsPage Load (0.2ms)[0m  [1mSELECT `basics_pages`.* FROM `basics_pages` WHERE `basics_pages`.`page_name` = 'Footer' LIMIT 1[0m
  Rendered layouts/_footer.html.slim (20.2ms)
Completed 200 OK in 76ms (Views: 72.5ms | ActiveRecord: 2.9ms)


Started POST "/users/sign_in" for 127.0.0.1 at 2016-01-18 03:32:24 +0100
Processing by SessionsController#create as HTML
  Parameters: {"utf8"=>"âœ“", "authenticity_token"=>"cajmPApKUoLTDgL4nYG/B3GUhj8fezKDJZWxee28cyM=", "user"=>{"email"=>"kevin.muller1220@gmail.com", "password"=>"[FILTERED]"}, "button"=>""}
  [1m[35mUser Load (0.3ms)[0m  SELECT `users`.* FROM `users` WHERE `users`.`email` = 'kevin.muller1220@gmail.com' LIMIT 1
  [1m[36m (0.2ms)[0m  [1mBEGIN[0m
  [1m[35m (0.1ms)[0m  COMMIT
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35m (0.5ms)[0m  UPDATE `users` SET `current_sign_in_at` = '2016-01-18 02:32:24', `sign_in_count` = 2, `updated_at` = '2016-01-18 02:32:24' WHERE `users`.`id` = 1
  [1m[36m (0.6ms)[0m  [1mCOMMIT[0m
Redirected to http://localhost:3000/admin
Completed 302 Found in 65ms (ActiveRecord: 1.7ms)


Started GET "/admin" for 127.0.0.1 at 2016-01-18 03:32:24 +0100
Processing by RestaurantsController#index as HTML
  [1m[35mUser Load (0.4ms)[0m  SELECT `users`.* FROM `users` WHERE `users`.`id` = 1 LIMIT 1
  Rendered shared/_restaurant_manage_tabs.html.erb (0.7ms)
  Rendered restaurants/_condition_fields.html.erb (13.8ms)
  [1m[36mRestaurant Load (1.0ms)[0m  [1mSELECT `restaurants`.* FROM `restaurants` ORDER BY disabled ASC,created_at DESC LIMIT 12 OFFSET 0[0m
  [1m[35mPhoto Load (0.4ms)[0m  SELECT `photos`.* FROM `photos` WHERE (restaurant_id = 876 and cover = true and status = 1) LIMIT 1
  [1m[36mPhoto Load (0.3ms)[0m  [1mSELECT `photos`.* FROM `photos` WHERE `photos`.`restaurant_id` = 876 AND `photos`.`status` = 1 ORDER BY restaurant_id ASC, created_at DESC LIMIT 1[0m
  [1m[35mPhoto Load (0.4ms)[0m  SELECT `photos`.* FROM `photos` WHERE (restaurant_id = 851 and cover = true and status = 1) LIMIT 1
  [1m[36mPhoto Load (0.3ms)[0m  [1mSELECT `photos`.* FROM `photos` WHERE `photos`.`restaurant_id` = 851 AND `photos`.`status` = 1 ORDER BY restaurant_id ASC, created_at DESC LIMIT 1[0m
  [1m[35mPhoto Load (0.4ms)[0m  SELECT `photos`.* FROM `photos` WHERE (restaurant_id = 693 and cover = true and status = 1) LIMIT 1
  [1m[36mPhoto Load (0.3ms)[0m  [1mSELECT `photos`.* FROM `photos` WHERE `photos`.`restaurant_id` = 693 AND `photos`.`status` = 1 ORDER BY restaurant_id ASC, created_at DESC LIMIT 1[0m
  [1m[35mPhoto Load (0.3ms)[0m  SELECT `photos`.* FROM `photos` WHERE (restaurant_id = 686 and cover = true and status = 1) LIMIT 1
  [1m[36mPhoto Load (0.3ms)[0m  [1mSELECT `photos`.* FROM `photos` WHERE `photos`.`restaurant_id` = 686 AND `photos`.`status` = 1 ORDER BY restaurant_id ASC, created_at DESC LIMIT 1[0m
  [1m[35mPhoto Load (0.3ms)[0m  SELECT `photos`.* FROM `photos` WHERE (restaurant_id = 669 and cover = true and status = 1) LIMIT 1
  [1m[36mPhoto Load (0.5ms)[0m  [1mSELECT `photos`.* FROM `photos` WHERE `photos`.`restaurant_id` = 669 AND `photos`.`status` = 1 ORDER BY restaurant_id ASC, created_at DESC LIMIT 1[0m
  [1m[35mPhoto Load (0.3ms)[0m  SELECT `photos`.* FROM `photos` WHERE (restaurant_id = 251 and cover = true and status = 1) LIMIT 1
  [1m[36mPhoto Load (0.3ms)[0m  [1mSELECT `photos`.* FROM `photos` WHERE `photos`.`restaurant_id` = 251 AND `photos`.`status` = 1 ORDER BY restaurant_id ASC, created_at DESC LIMIT 1[0m
  [1m[35mPhoto Load (0.3ms)[0m  SELECT `photos`.* FROM `photos` WHERE (restaurant_id = 250 and cover = true and status = 1) LIMIT 1
  [1m[36mPhoto Load (0.3ms)[0m  [1mSELECT `photos`.* FROM `photos` WHERE `photos`.`restaurant_id` = 250 AND `photos`.`status` = 1 ORDER BY restaurant_id ASC, created_at DESC LIMIT 1[0m
  [1m[35mPhoto Load (0.3ms)[0m  SELECT `photos`.* FROM `photos` WHERE (restaurant_id = 237 and cover = true and status = 1) LIMIT 1
  [1m[36mPhoto Load (0.3ms)[0m  [1mSELECT `photos`.* FROM `photos` WHERE `photos`.`restaurant_id` = 237 AND `photos`.`status` = 1 ORDER BY restaurant_id ASC, created_at DESC LIMIT 1[0m
  [1m[35mPhoto Load (0.3ms)[0m  SELECT `photos`.* FROM `photos` WHERE (restaurant_id = 231 and cover = true and status = 1) LIMIT 1
  [1m[36mPhoto Load (0.3ms)[0m  [1mSELECT `photos`.* FROM `photos` WHERE `photos`.`restaurant_id` = 231 AND `photos`.`status` = 1 ORDER BY restaurant_id ASC, created_at DESC LIMIT 1[0m
  [1m[35mPhoto Load (0.3ms)[0m  SELECT `photos`.* FROM `photos` WHERE (restaurant_id = 222 and cover = true and status = 1) LIMIT 1
  [1m[36mPhoto Load (0.2ms)[0m  [1mSELECT `photos`.* FROM `photos` WHERE `photos`.`restaurant_id` = 222 AND `photos`.`status` = 1 ORDER BY restaurant_id ASC, created_at DESC LIMIT 1[0m
  [1m[35mPhoto Load (0.3ms)[0m  SELECT `photos`.* FROM `photos` WHERE (restaurant_id = 221 and cover = true and status = 1) LIMIT 1
  [1m[36mPhoto Load (0.3ms)[0m  [1mSELECT `photos`.* FROM `photos` WHERE `photos`.`restaurant_id` = 221 AND `photos`.`status` = 1 ORDER BY restaurant_id ASC, created_at DESC LIMIT 1[0m
  [1m[35mPhoto Load (0.3ms)[0m  SELECT `photos`.* FROM `photos` WHERE (restaurant_id = 216 and cover = true and status = 1) LIMIT 1
  [1m[36mPhoto Load (0.3ms)[0m  [1mSELECT `photos`.* FROM `photos` WHERE `photos`.`restaurant_id` = 216 AND `photos`.`status` = 1 ORDER BY restaurant_id ASC, created_at DESC LIMIT 1[0m
  [1m[35m (0.4ms)[0m  SELECT COUNT(*) FROM `restaurants` 
  Rendered restaurants/index.html.erb within layouts/admin (140.9ms)
Completed 200 OK in 161ms (Views: 143.5ms | ActiveRecord: 14.2ms)


Started GET "/admin/collections" for 127.0.0.1 at 2016-01-18 03:32:42 +0100
Processing by CollectionsController#index as HTML
  Rendered shared/_restaurant_manage_tabs.html.erb (0.8ms)
  [1m[36mCollection Load (0.3ms)[0m  [1mSELECT `collections`.* FROM `collections` ORDER BY name ASC, created_at DESC LIMIT 12 OFFSET 0[0m
  [1m[35mCollectionImage Load (0.2ms)[0m  SELECT `collection_images`.* FROM `collection_images` WHERE (collection_id = 3) LIMIT 1
  [1m[36mCollectionImage Load (0.2ms)[0m  [1mSELECT `collection_images`.* FROM `collection_images` WHERE (collection_id = 2) LIMIT 1[0m
  [1m[35m (0.1ms)[0m  SELECT COUNT(*) FROM `collections` 
  Rendered collections/index.erb within layouts/admin (12.4ms)
  [1m[36mUser Load (0.2ms)[0m  [1mSELECT `users`.* FROM `users` WHERE `users`.`id` = 1 LIMIT 1[0m
Completed 200 OK in 44ms (Views: 42.3ms | ActiveRecord: 1.0ms)


Started POST "/admin/collections/2/disable_toggle" for 127.0.0.1 at 2016-01-18 03:32:50 +0100
Processing by CollectionsController#disable_toggle as JS
  Parameters: {"id"=>"2"}
  [1m[35mCollection Load (0.3ms)[0m  SELECT `collections`.* FROM `collections` WHERE `collections`.`id` = 2 LIMIT 1
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35m (0.2ms)[0m  UPDATE `collections` SET `disabled` = 0, `updated_at` = '2016-01-18 02:32:50' WHERE `collections`.`id` = 2
  [1m[36m (0.7ms)[0m  [1mCOMMIT[0m
  Rendered collections/disable_toggle.js.erb (0.3ms)
Completed 200 OK in 44ms (Views: 38.7ms | ActiveRecord: 1.2ms)


Started POST "/admin/collections/3/disable_toggle" for 127.0.0.1 at 2016-01-18 03:32:52 +0100
Processing by CollectionsController#disable_toggle as JS
  Parameters: {"id"=>"3"}
  [1m[35mCollection Load (0.2ms)[0m  SELECT `collections`.* FROM `collections` WHERE `collections`.`id` = 3 LIMIT 1
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35m (0.2ms)[0m  UPDATE `collections` SET `disabled` = 0, `updated_at` = '2016-01-18 02:32:52' WHERE `collections`.`id` = 3
  [1m[36m (0.7ms)[0m  [1mCOMMIT[0m
  Rendered collections/disable_toggle.js.erb (0.4ms)
Completed 200 OK in 32ms (Views: 27.1ms | ActiveRecord: 1.2ms)


Started GET "/collection/3/edit" for 127.0.0.1 at 2016-01-18 03:32:56 +0100
Processing by CollectionsController#edit_collection as HTML
  Parameters: {"id"=>"3"}
  [1m[35mUser Load (0.2ms)[0m  SELECT `users`.* FROM `users` WHERE `users`.`id` = 1 LIMIT 1
  [1m[36mCollection Load (0.2ms)[0m  [1mSELECT `collections`.* FROM `collections` WHERE `collections`.`id` = 3 LIMIT 1[0m
  [1m[35mCollectionImage Load (0.4ms)[0m  SELECT `collection_images`.* FROM `collection_images` WHERE (collection_id = 3) LIMIT 1
  Rendered collections/_collection_form.html.erb (9.9ms)
  Rendered collections/_collection_restaurants_form.html.erb (1.5ms)
  Rendered collections/edit_collection.html.erb within layouts/admin (28.1ms)
Completed 200 OK in 51ms (Views: 46.0ms | ActiveRecord: 0.8ms)


Started GET "/admin/restaurants" for 127.0.0.1 at 2016-01-18 03:39:27 +0100
  [1m[36m (0.2ms)[0m  [1mSELECT COUNT(*) FROM `filter_types` WHERE (code = 'features')[0m
Processing by RestaurantsController#index as HTML
  [1m[35mUser Load (0.2ms)[0m  SELECT `users`.* FROM `users` WHERE `users`.`id` = 1 LIMIT 1
  Rendered shared/_restaurant_manage_tabs.html.erb (1.0ms)
  Rendered restaurants/_condition_fields.html.erb (17.7ms)
  [1m[36mRestaurant Load (0.8ms)[0m  [1mSELECT `restaurants`.* FROM `restaurants` ORDER BY disabled ASC,created_at DESC LIMIT 12 OFFSET 0[0m
  [1m[35mPhoto Load (0.4ms)[0m  SELECT `photos`.* FROM `photos` WHERE (restaurant_id = 876 and cover = true and status = 1) LIMIT 1
  [1m[36mPhoto Load (0.3ms)[0m  [1mSELECT `photos`.* FROM `photos` WHERE `photos`.`restaurant_id` = 876 AND `photos`.`status` = 1 ORDER BY restaurant_id ASC, created_at DESC LIMIT 1[0m
  [1m[35mPhoto Load (0.4ms)[0m  SELECT `photos`.* FROM `photos` WHERE (restaurant_id = 851 and cover = true and status = 1) LIMIT 1
  [1m[36mPhoto Load (0.3ms)[0m  [1mSELECT `photos`.* FROM `photos` WHERE `photos`.`restaurant_id` = 851 AND `photos`.`status` = 1 ORDER BY restaurant_id ASC, created_at DESC LIMIT 1[0m
  [1m[35mPhoto Load (0.4ms)[0m  SELECT `photos`.* FROM `photos` WHERE (restaurant_id = 693 and cover = true and status = 1) LIMIT 1
  [1m[36mPhoto Load (0.3ms)[0m  [1mSELECT `photos`.* FROM `photos` WHERE `photos`.`restaurant_id` = 693 AND `photos`.`status` = 1 ORDER BY restaurant_id ASC, created_at DESC LIMIT 1[0m
  [1m[35mPhoto Load (0.3ms)[0m  SELECT `photos`.* FROM `photos` WHERE (restaurant_id = 686 and cover = true and status = 1) LIMIT 1
  [1m[36mPhoto Load (0.3ms)[0m  [1mSELECT `photos`.* FROM `photos` WHERE `photos`.`restaurant_id` = 686 AND `photos`.`status` = 1 ORDER BY restaurant_id ASC, created_at DESC LIMIT 1[0m
  [1m[35mPhoto Load (0.3ms)[0m  SELECT `photos`.* FROM `photos` WHERE (restaurant_id = 669 and cover = true and status = 1) LIMIT 1
  [1m[36mPhoto Load (0.3ms)[0m  [1mSELECT `photos`.* FROM `photos` WHERE `photos`.`restaurant_id` = 669 AND `photos`.`status` = 1 ORDER BY restaurant_id ASC, created_at DESC LIMIT 1[0m
  [1m[35mPhoto Load (0.3ms)[0m  SELECT `photos`.* FROM `photos` WHERE (restaurant_id = 251 and cover = true and status = 1) LIMIT 1
  [1m[36mPhoto Load (0.3ms)[0m  [1mSELECT `photos`.* FROM `photos` WHERE `photos`.`restaurant_id` = 251 AND `photos`.`status` = 1 ORDER BY restaurant_id ASC, created_at DESC LIMIT 1[0m
  [1m[35mPhoto Load (0.4ms)[0m  SELECT `photos`.* FROM `photos` WHERE (restaurant_id = 250 and cover = true and status = 1) LIMIT 1
  [1m[36mPhoto Load (0.3ms)[0m  [1mSELECT `photos`.* FROM `photos` WHERE `photos`.`restaurant_id` = 250 AND `photos`.`status` = 1 ORDER BY restaurant_id ASC, created_at DESC LIMIT 1[0m
  [1m[35mPhoto Load (0.3ms)[0m  SELECT `photos`.* FROM `photos` WHERE (restaurant_id = 237 and cover = true and status = 1) LIMIT 1
  [1m[36mPhoto Load (0.3ms)[0m  [1mSELECT `photos`.* FROM `photos` WHERE `photos`.`restaurant_id` = 237 AND `photos`.`status` = 1 ORDER BY restaurant_id ASC, created_at DESC LIMIT 1[0m
  [1m[35mPhoto Load (0.3ms)[0m  SELECT `photos`.* FROM `photos` WHERE (restaurant_id = 231 and cover = true and status = 1) LIMIT 1
  [1m[36mPhoto Load (0.3ms)[0m  [1mSELECT `photos`.* FROM `photos` WHERE `photos`.`restaurant_id` = 231 AND `photos`.`status` = 1 ORDER BY restaurant_id ASC, created_at DESC LIMIT 1[0m
  [1m[35mPhoto Load (0.3ms)[0m  SELECT `photos`.* FROM `photos` WHERE (restaurant_id = 222 and cover = true and status = 1) LIMIT 1
  [1m[36mPhoto Load (0.3ms)[0m  [1mSELECT `photos`.* FROM `photos` WHERE `photos`.`restaurant_id` = 222 AND `photos`.`status` = 1 ORDER BY restaurant_id ASC, created_at DESC LIMIT 1[0m
  [1m[35mPhoto Load (0.4ms)[0m  SELECT `photos`.* FROM `photos` WHERE (restaurant_id = 221 and cover = true and status = 1) LIMIT 1
  [1m[36mPhoto Load (0.3ms)[0m  [1mSELECT `photos`.* FROM `photos` WHERE `photos`.`restaurant_id` = 221 AND `photos`.`status` = 1 ORDER BY restaurant_id ASC, created_at DESC LIMIT 1[0m
  [1m[35mPhoto Load (0.3ms)[0m  SELECT `photos`.* FROM `photos` WHERE (restaurant_id = 216 and cover = true and status = 1) LIMIT 1
  [1m[36mPhoto Load (0.3ms)[0m  [1mSELECT `photos`.* FROM `photos` WHERE `photos`.`restaurant_id` = 216 AND `photos`.`status` = 1 ORDER BY restaurant_id ASC, created_at DESC LIMIT 1[0m
  [1m[35m (0.4ms)[0m  SELECT COUNT(*) FROM `restaurants` 
  Rendered restaurants/index.html.erb within layouts/admin (151.3ms)
Completed 200 OK in 255ms (Views: 150.3ms | ActiveRecord: 15.2ms)


Started GET "/admin/users" for 127.0.0.1 at 2016-01-18 03:39:40 +0100
Processing by UsersController#index as HTML
  [1m[36mUser Load (0.3ms)[0m  [1mSELECT `users`.* FROM `users` WHERE `users`.`id` = 1 LIMIT 1[0m
  Rendered users/_condition_fields.html.erb (7.1ms)
  [1m[35mUser Load (0.3ms)[0m  SELECT `users`.* FROM `users` LIMIT 12 OFFSET 0
  [1m[36m (0.2ms)[0m  [1mSELECT COUNT(*) FROM `users` [0m
  Rendered users/index.html.erb within layouts/admin (19.2ms)
Completed 200 OK in 85ms (Views: 71.3ms | ActiveRecord: 0.8ms)


Started GET "/admin/restaurants" for 127.0.0.1 at 2016-01-18 03:39:42 +0100
Processing by RestaurantsController#index as HTML
  [1m[35mUser Load (0.3ms)[0m  SELECT `users`.* FROM `users` WHERE `users`.`id` = 1 LIMIT 1
  Rendered shared/_restaurant_manage_tabs.html.erb (0.7ms)
  Rendered restaurants/_condition_fields.html.erb (9.5ms)
  [1m[36mRestaurant Load (15.4ms)[0m  [1mSELECT `restaurants`.* FROM `restaurants` ORDER BY disabled ASC,created_at DESC LIMIT 12 OFFSET 0[0m
  [1m[35mPhoto Load (0.4ms)[0m  SELECT `photos`.* FROM `photos` WHERE (restaurant_id = 876 and cover = true and status = 1) LIMIT 1
  [1m[36mPhoto Load (0.3ms)[0m  [1mSELECT `photos`.* FROM `photos` WHERE `photos`.`restaurant_id` = 876 AND `photos`.`status` = 1 ORDER BY restaurant_id ASC, created_at DESC LIMIT 1[0m
  [1m[35mPhoto Load (0.3ms)[0m  SELECT `photos`.* FROM `photos` WHERE (restaurant_id = 851 and cover = true and status = 1) LIMIT 1
  [1m[36mPhoto Load (0.3ms)[0m  [1mSELECT `photos`.* FROM `photos` WHERE `photos`.`restaurant_id` = 851 AND `photos`.`status` = 1 ORDER BY restaurant_id ASC, created_at DESC LIMIT 1[0m
  [1m[35mPhoto Load (0.3ms)[0m  SELECT `photos`.* FROM `photos` WHERE (restaurant_id = 693 and cover = true and status = 1) LIMIT 1
  [1m[36mPhoto Load (0.3ms)[0m  [1mSELECT `photos`.* FROM `photos` WHERE `photos`.`restaurant_id` = 693 AND `photos`.`status` = 1 ORDER BY restaurant_id ASC, created_at DESC LIMIT 1[0m
  [1m[35mPhoto Load (0.4ms)[0m  SELECT `photos`.* FROM `photos` WHERE (restaurant_id = 686 and cover = true and status = 1) LIMIT 1
  [1m[36mPhoto Load (0.3ms)[0m  [1mSELECT `photos`.* FROM `photos` WHERE `photos`.`restaurant_id` = 686 AND `photos`.`status` = 1 ORDER BY restaurant_id ASC, created_at DESC LIMIT 1[0m
  [1m[35mPhoto Load (0.3ms)[0m  SELECT `photos`.* FROM `photos` WHERE (restaurant_id = 669 and cover = true and status = 1) LIMIT 1
  [1m[36mPhoto Load (0.3ms)[0m  [1mSELECT `photos`.* FROM `photos` WHERE `photos`.`restaurant_id` = 669 AND `photos`.`status` = 1 ORDER BY restaurant_id ASC, created_at DESC LIMIT 1[0m
  [1m[35mPhoto Load (0.3ms)[0m  SELECT `photos`.* FROM `photos` WHERE (restaurant_id = 251 and cover = true and status = 1) LIMIT 1
  [1m[36mPhoto Load (0.3ms)[0m  [1mSELECT `photos`.* FROM `photos` WHERE `photos`.`restaurant_id` = 251 AND `photos`.`status` = 1 ORDER BY restaurant_id ASC, created_at DESC LIMIT 1[0m
  [1m[35mPhoto Load (0.3ms)[0m  SELECT `photos`.* FROM `photos` WHERE (restaurant_id = 250 and cover = true and status = 1) LIMIT 1
  [1m[36mPhoto Load (0.4ms)[0m  [1mSELECT `photos`.* FROM `photos` WHERE `photos`.`restaurant_id` = 250 AND `photos`.`status` = 1 ORDER BY restaurant_id ASC, created_at DESC LIMIT 1[0m
  [1m[35mPhoto Load (0.3ms)[0m  SELECT `photos`.* FROM `photos` WHERE (restaurant_id = 237 and cover = true and status = 1) LIMIT 1
  [1m[36mPhoto Load (0.3ms)[0m  [1mSELECT `photos`.* FROM `photos` WHERE `photos`.`restaurant_id` = 237 AND `photos`.`status` = 1 ORDER BY restaurant_id ASC, created_at DESC LIMIT 1[0m
  [1m[35mPhoto Load (0.3ms)[0m  SELECT `photos`.* FROM `photos` WHERE (restaurant_id = 231 and cover = true and status = 1) LIMIT 1
  [1m[36mPhoto Load (0.3ms)[0m  [1mSELECT `photos`.* FROM `photos` WHERE `photos`.`restaurant_id` = 231 AND `photos`.`status` = 1 ORDER BY restaurant_id ASC, created_at DESC LIMIT 1[0m
  [1m[35mPhoto Load (0.3ms)[0m  SELECT `photos`.* FROM `photos` WHERE (restaurant_id = 222 and cover = true and status = 1) LIMIT 1
  [1m[36mPhoto Load (0.3ms)[0m  [1mSELECT `photos`.* FROM `photos` WHERE `photos`.`restaurant_id` = 222 AND `photos`.`status` = 1 ORDER BY restaurant_id ASC, created_at DESC LIMIT 1[0m
  [1m[35mPhoto Load (0.3ms)[0m  SELECT `photos`.* FROM `photos` WHERE (restaurant_id = 221 and cover = true and status = 1) LIMIT 1
  [1m[36mPhoto Load (0.3ms)[0m  [1mSELECT `photos`.* FROM `photos` WHERE `photos`.`restaurant_id` = 221 AND `photos`.`status` = 1 ORDER BY restaurant_id ASC, created_at DESC LIMIT 1[0m
  [1m[35mPhoto Load (0.4ms)[0m  SELECT `photos`.* FROM `photos` WHERE (restaurant_id = 216 and cover = true and status = 1) LIMIT 1
  [1m[36mPhoto Load (0.3ms)[0m  [1mSELECT `photos`.* FROM `photos` WHERE `photos`.`restaurant_id` = 216 AND `photos`.`status` = 1 ORDER BY restaurant_id ASC, created_at DESC LIMIT 1[0m
  [1m[35m (0.4ms)[0m  SELECT COUNT(*) FROM `restaurants` 
  Rendered restaurants/index.html.erb within layouts/admin (114.9ms)
Completed 200 OK in 125ms (Views: 99.5ms | ActiveRecord: 23.6ms)


Started GET "/admin/restaurants/admin_new" for 127.0.0.1 at 2016-01-18 03:39:48 +0100
Processing by RestaurantsController#admin_new as HTML
  [1m[36mUser Load (0.4ms)[0m  [1mSELECT `users`.* FROM `users` WHERE `users`.`id` = 1 LIMIT 1[0m
  [1m[35m (0.3ms)[0m  SELECT `filters`.id FROM `filters` INNER JOIN `filters_restaurants` ON `filters`.`id` = `filters_restaurants`.`filter_id` WHERE `filters_restaurants`.`restaurant_id` IS NULL
  [1m[36mFilterType Load (0.2ms)[0m  [1mSELECT `filter_types`.* FROM `filter_types` WHERE `filter_types`.`code` = 'hal_status' LIMIT 1[0m
  [1m[35mFilterType Load (0.2ms)[0m  SELECT `filter_types`.* FROM `filter_types` WHERE `filter_types`.`code` = 'price' LIMIT 1
  [1m[36mFilterType Load (0.2ms)[0m  [1mSELECT `filter_types`.* FROM `filter_types` WHERE `filter_types`.`code` = 'cuisine' LIMIT 1[0m
  [1m[35mFilterType Load (0.2ms)[0m  SELECT `filter_types`.* FROM `filter_types` WHERE `filter_types`.`code` = 'alcohol' LIMIT 1
  [1m[36mFilterType Load (0.1ms)[0m  [1mSELECT `filter_types`.* FROM `filter_types` WHERE `filter_types`.`code` = 'features' LIMIT 1[0m
  Rendered restaurants/_googlemap.html.erb (0.7ms)
  [1m[35mFilter Load (0.3ms)[0m  SELECT `filters`.* FROM `filters` WHERE `filters`.`filter_type_id` = 7
  [1m[36mFilter Load (0.3ms)[0m  [1mSELECT `filters`.* FROM `filters` WHERE `filters`.`filter_type_id` = 1 ORDER BY name ASC[0m
  [1m[35mFilter Load (0.2ms)[0m  SELECT `filters`.* FROM `filters` WHERE `filters`.`filter_type_id` = 3
  [1m[36mFilter Load (0.2ms)[0m  [1mSELECT `filters`.* FROM `filters` WHERE `filters`.`filter_type_id` = 5[0m
  Rendered restaurants/_admin_form.html.erb (45.4ms)
  Rendered restaurants/admin_new.html.erb within layouts/admin (51.5ms)
Completed 500 Internal Server Error in 206ms

ActionView::Template::Error (undefined method `each' for nil:NilClass):
    110:     </h4>
    111:     <div class="row">
    112:       <div class="col-lg-6 col-xs-12 col-sm-6 col-md-6">
    113:         <% @filter_features.each do |f_i| %>
    114:           <%= restaurant_filter_checkbox f_i, @filter_ids %>
    115:         <% end %>
    116:       </div>
  app/views/restaurants/_admin_form.html.erb:113:in `block in _app_views_restaurants__admin_form_html_erb__4256939505501945162_70236384825060'
  app/views/restaurants/_admin_form.html.erb:1:in `_app_views_restaurants__admin_form_html_erb__4256939505501945162_70236384825060'
  app/views/restaurants/admin_new.html.erb:15:in `_app_views_restaurants_admin_new_html_erb__4575001700179055944_70236393439540'


  Rendered /Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_dispatch/middleware/templates/rescues/_trace.erb (1.1ms)
  Rendered /Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_dispatch/middleware/templates/rescues/_request_and_response.erb (0.8ms)
  Rendered /Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_dispatch/middleware/templates/rescues/template_error.erb within rescues/layout (41.9ms)


Started GET "/admin/restaurants/admin_new" for 127.0.0.1 at 2016-01-18 03:40:26 +0100
Processing by RestaurantsController#admin_new as HTML
  [1m[35mUser Load (0.3ms)[0m  SELECT `users`.* FROM `users` WHERE `users`.`id` = 1 LIMIT 1
  [1m[36m (0.2ms)[0m  [1mSELECT `filters`.id FROM `filters` INNER JOIN `filters_restaurants` ON `filters`.`id` = `filters_restaurants`.`filter_id` WHERE `filters_restaurants`.`restaurant_id` IS NULL[0m
  [1m[35mFilterType Load (0.1ms)[0m  SELECT `filter_types`.* FROM `filter_types` WHERE `filter_types`.`code` = 'hal_status' LIMIT 1
  [1m[36mFilterType Load (0.2ms)[0m  [1mSELECT `filter_types`.* FROM `filter_types` WHERE `filter_types`.`code` = 'price' LIMIT 1[0m
  [1m[35mFilterType Load (0.1ms)[0m  SELECT `filter_types`.* FROM `filter_types` WHERE `filter_types`.`code` = 'cuisine' LIMIT 1
  [1m[36mFilterType Load (0.1ms)[0m  [1mSELECT `filter_types`.* FROM `filter_types` WHERE `filter_types`.`code` = 'alcohol' LIMIT 1[0m
  [1m[35mFilterType Load (0.2ms)[0m  SELECT `filter_types`.* FROM `filter_types` WHERE `filter_types`.`code` = 'features' LIMIT 1
  Rendered restaurants/_googlemap.html.erb (0.0ms)
  [1m[36mFilter Load (0.3ms)[0m  [1mSELECT `filters`.* FROM `filters` WHERE `filters`.`filter_type_id` = 7[0m
  [1m[35mFilter Load (0.2ms)[0m  SELECT `filters`.* FROM `filters` WHERE `filters`.`filter_type_id` = 1 ORDER BY name ASC
  [1m[36mFilter Load (0.2ms)[0m  [1mSELECT `filters`.* FROM `filters` WHERE `filters`.`filter_type_id` = 3[0m
  [1m[35mFilter Load (0.3ms)[0m  SELECT `filters`.* FROM `filters` WHERE `filters`.`filter_type_id` = 5
  Rendered restaurants/_admin_form.html.erb (20.2ms)
  Rendered restaurants/admin_new.html.erb within layouts/admin (21.0ms)
Completed 500 Internal Server Error in 34ms

ActionView::Template::Error (undefined method `each' for nil:NilClass):
    110:     </h4>
    111:     <div class="row">
    112:       <div class="col-lg-6 col-xs-12 col-sm-6 col-md-6">
    113:         <% @filter_features.each do |f_i| %>
    114:           <%= restaurant_filter_checkbox f_i, @filter_ids %>
    115:         <% end %>
    116:       </div>
  app/views/restaurants/_admin_form.html.erb:113:in `block in _app_views_restaurants__admin_form_html_erb__4256939505501945162_70236384825060'
  app/views/restaurants/_admin_form.html.erb:1:in `_app_views_restaurants__admin_form_html_erb__4256939505501945162_70236384825060'
  app/views/restaurants/admin_new.html.erb:15:in `_app_views_restaurants_admin_new_html_erb__4575001700179055944_70236393439540'


  Rendered /Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_dispatch/middleware/templates/rescues/_trace.erb (1.4ms)
  Rendered /Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_dispatch/middleware/templates/rescues/_request_and_response.erb (0.8ms)
  Rendered /Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_dispatch/middleware/templates/rescues/template_error.erb within rescues/layout (41.4ms)


Started GET "/admin/restaurants/admin_new" for 127.0.0.1 at 2016-01-18 03:45:04 +0100
Processing by RestaurantsController#admin_new as HTML
  [1m[36mUser Load (0.2ms)[0m  [1mSELECT `users`.* FROM `users` WHERE `users`.`id` = 1 LIMIT 1[0m
  [1m[35m (1.2ms)[0m  SELECT `filters`.id FROM `filters` INNER JOIN `filters_restaurants` ON `filters`.`id` = `filters_restaurants`.`filter_id` WHERE `filters_restaurants`.`restaurant_id` IS NULL
  [1m[36mFilterType Load (0.2ms)[0m  [1mSELECT `filter_types`.* FROM `filter_types` WHERE `filter_types`.`code` = 'hal_status' LIMIT 1[0m
  [1m[35mFilterType Load (0.2ms)[0m  SELECT `filter_types`.* FROM `filter_types` WHERE `filter_types`.`code` = 'price' LIMIT 1
  [1m[36mFilterType Load (0.2ms)[0m  [1mSELECT `filter_types`.* FROM `filter_types` WHERE `filter_types`.`code` = 'cuisine' LIMIT 1[0m
  [1m[35mFilterType Load (0.2ms)[0m  SELECT `filter_types`.* FROM `filter_types` WHERE `filter_types`.`code` = 'alcohol' LIMIT 1
  [1m[36mFilterType Load (0.2ms)[0m  [1mSELECT `filter_types`.* FROM `filter_types` WHERE `filter_types`.`code` = 'features' LIMIT 1[0m
  Rendered restaurants/_googlemap.html.erb (0.1ms)
  [1m[35mFilter Load (0.4ms)[0m  SELECT `filters`.* FROM `filters` WHERE `filters`.`filter_type_id` = 7
  [1m[36mFilter Load (0.2ms)[0m  [1mSELECT `filters`.* FROM `filters` WHERE `filters`.`filter_type_id` = 1 ORDER BY name ASC[0m
  [1m[35mFilter Load (0.2ms)[0m  SELECT `filters`.* FROM `filters` WHERE `filters`.`filter_type_id` = 3
  [1m[36mFilter Load (0.2ms)[0m  [1mSELECT `filters`.* FROM `filters` WHERE `filters`.`filter_type_id` = 5[0m
  Rendered restaurants/_admin_form.html.erb (22.1ms)
  Rendered restaurants/admin_new.html.erb within layouts/admin (23.8ms)
Completed 500 Internal Server Error in 39ms

ActionView::Template::Error (undefined method `each' for nil:NilClass):
    110:     </h4>
    111:     <div class="row">
    112:       <div class="col-lg-6 col-xs-12 col-sm-6 col-md-6">
    113:         <% @filter_features.each do |f_i| %>
    114:           <%= restaurant_filter_checkbox f_i, @filter_ids %>
    115:         <% end %>
    116:       </div>
  app/views/restaurants/_admin_form.html.erb:113:in `block in _app_views_restaurants__admin_form_html_erb__4256939505501945162_70236384825060'
  app/views/restaurants/_admin_form.html.erb:1:in `_app_views_restaurants__admin_form_html_erb__4256939505501945162_70236384825060'
  app/views/restaurants/admin_new.html.erb:15:in `_app_views_restaurants_admin_new_html_erb__4575001700179055944_70236393439540'


  Rendered /Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_dispatch/middleware/templates/rescues/_trace.erb (1.4ms)
  Rendered /Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_dispatch/middleware/templates/rescues/_request_and_response.erb (1.0ms)
  Rendered /Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_dispatch/middleware/templates/rescues/template_error.erb within rescues/layout (42.6ms)


Started GET "/admin/restaurants/admin_new" for 127.0.0.1 at 2016-01-18 03:45:07 +0100
Processing by RestaurantsController#admin_new as HTML
  [1m[35mUser Load (0.3ms)[0m  SELECT `users`.* FROM `users` WHERE `users`.`id` = 1 LIMIT 1
  [1m[36m (2.0ms)[0m  [1mSELECT `filters`.id FROM `filters` INNER JOIN `filters_restaurants` ON `filters`.`id` = `filters_restaurants`.`filter_id` WHERE `filters_restaurants`.`restaurant_id` IS NULL[0m
  [1m[35mFilterType Load (0.2ms)[0m  SELECT `filter_types`.* FROM `filter_types` WHERE `filter_types`.`code` = 'hal_status' LIMIT 1
  [1m[36mFilterType Load (0.4ms)[0m  [1mSELECT `filter_types`.* FROM `filter_types` WHERE `filter_types`.`code` = 'price' LIMIT 1[0m
  [1m[35mFilterType Load (0.3ms)[0m  SELECT `filter_types`.* FROM `filter_types` WHERE `filter_types`.`code` = 'cuisine' LIMIT 1
  [1m[36mFilterType Load (0.3ms)[0m  [1mSELECT `filter_types`.* FROM `filter_types` WHERE `filter_types`.`code` = 'alcohol' LIMIT 1[0m
  [1m[35mFilterType Load (0.3ms)[0m  SELECT `filter_types`.* FROM `filter_types` WHERE `filter_types`.`code` = 'features' LIMIT 1
  Rendered restaurants/_googlemap.html.erb (0.1ms)
  [1m[36mFilter Load (0.3ms)[0m  [1mSELECT `filters`.* FROM `filters` WHERE `filters`.`filter_type_id` = 7[0m
  [1m[35mFilter Load (0.2ms)[0m  SELECT `filters`.* FROM `filters` WHERE `filters`.`filter_type_id` = 1 ORDER BY name ASC
  [1m[36mFilter Load (0.2ms)[0m  [1mSELECT `filters`.* FROM `filters` WHERE `filters`.`filter_type_id` = 3[0m
  [1m[35mFilter Load (0.2ms)[0m  SELECT `filters`.* FROM `filters` WHERE `filters`.`filter_type_id` = 5
  Rendered restaurants/_admin_form.html.erb (20.5ms)
  Rendered restaurants/admin_new.html.erb within layouts/admin (21.3ms)
Completed 500 Internal Server Error in 44ms

ActionView::Template::Error (undefined method `each' for nil:NilClass):
    110:     </h4>
    111:     <div class="row">
    112:       <div class="col-lg-6 col-xs-12 col-sm-6 col-md-6">
    113:         <% @filter_features.each do |f_i| %>
    114:           <%= restaurant_filter_checkbox f_i, @filter_ids %>
    115:         <% end %>
    116:       </div>
  app/views/restaurants/_admin_form.html.erb:113:in `block in _app_views_restaurants__admin_form_html_erb__4256939505501945162_70236384825060'
  app/views/restaurants/_admin_form.html.erb:1:in `_app_views_restaurants__admin_form_html_erb__4256939505501945162_70236384825060'
  app/views/restaurants/admin_new.html.erb:15:in `_app_views_restaurants_admin_new_html_erb__4575001700179055944_70236393439540'


  Rendered /Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_dispatch/middleware/templates/rescues/_trace.erb (1.6ms)
  Rendered /Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_dispatch/middleware/templates/rescues/_request_and_response.erb (0.9ms)
  Rendered /Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_dispatch/middleware/templates/rescues/template_error.erb within rescues/layout (43.0ms)


Started GET "/admin/restaurants/admin_new" for 127.0.0.1 at 2016-01-18 03:47:56 +0100
Processing by RestaurantsController#admin_new as HTML
  [1m[36mUser Load (0.5ms)[0m  [1mSELECT `users`.* FROM `users` WHERE `users`.`id` = 1 LIMIT 1[0m
  [1m[35m (2.1ms)[0m  SELECT `filters`.id FROM `filters` INNER JOIN `filters_restaurants` ON `filters`.`id` = `filters_restaurants`.`filter_id` WHERE `filters_restaurants`.`restaurant_id` IS NULL
  [1m[36mFilterType Load (0.3ms)[0m  [1mSELECT `filter_types`.* FROM `filter_types` WHERE `filter_types`.`code` = 'hal_status' LIMIT 1[0m
  [1m[35mFilterType Load (0.3ms)[0m  SELECT `filter_types`.* FROM `filter_types` WHERE `filter_types`.`code` = 'price' LIMIT 1
  [1m[36mFilterType Load (0.2ms)[0m  [1mSELECT `filter_types`.* FROM `filter_types` WHERE `filter_types`.`code` = 'cuisine' LIMIT 1[0m
  [1m[35mFilterType Load (0.1ms)[0m  SELECT `filter_types`.* FROM `filter_types` WHERE `filter_types`.`code` = 'alcohol' LIMIT 1
  [1m[36mFilterType Load (0.1ms)[0m  [1mSELECT `filter_types`.* FROM `filter_types` WHERE `filter_types`.`code` = 'features' LIMIT 1[0m
  Rendered restaurants/_googlemap.html.erb (0.0ms)
  [1m[35mFilter Load (0.3ms)[0m  SELECT `filters`.* FROM `filters` WHERE `filters`.`filter_type_id` = 7
  [1m[36mFilter Load (0.2ms)[0m  [1mSELECT `filters`.* FROM `filters` WHERE `filters`.`filter_type_id` = 1 ORDER BY name ASC[0m
  [1m[35mFilter Load (0.2ms)[0m  SELECT `filters`.* FROM `filters` WHERE `filters`.`filter_type_id` = 3
  [1m[36mFilter Load (0.2ms)[0m  [1mSELECT `filters`.* FROM `filters` WHERE `filters`.`filter_type_id` = 5[0m
  Rendered restaurants/_admin_form.html.erb (19.2ms)
  Rendered restaurants/admin_new.html.erb within layouts/admin (20.0ms)
Completed 500 Internal Server Error in 40ms

ActionView::Template::Error (undefined method `each' for nil:NilClass):
    110:     </h4>
    111:     <div class="row">
    112:       <div class="col-lg-6 col-xs-12 col-sm-6 col-md-6">
    113:         <% @filter_features.each do |f_i| %>
    114:           <%= restaurant_filter_checkbox f_i, @filter_ids %>
    115:         <% end %>
    116:       </div>
  app/views/restaurants/_admin_form.html.erb:113:in `block in _app_views_restaurants__admin_form_html_erb__4256939505501945162_70236384825060'
  app/views/restaurants/_admin_form.html.erb:1:in `_app_views_restaurants__admin_form_html_erb__4256939505501945162_70236384825060'
  app/views/restaurants/admin_new.html.erb:15:in `_app_views_restaurants_admin_new_html_erb__4575001700179055944_70236393439540'


  Rendered /Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_dispatch/middleware/templates/rescues/_trace.erb (1.4ms)
  Rendered /Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_dispatch/middleware/templates/rescues/_request_and_response.erb (0.9ms)
  Rendered /Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_dispatch/middleware/templates/rescues/template_error.erb within rescues/layout (41.5ms)


Started GET "/admin/restaurants/admin_new" for 127.0.0.1 at 2016-01-18 03:47:58 +0100
Processing by RestaurantsController#admin_new as HTML
  [1m[35mUser Load (0.3ms)[0m  SELECT `users`.* FROM `users` WHERE `users`.`id` = 1 LIMIT 1
  [1m[36m (1.2ms)[0m  [1mSELECT `filters`.id FROM `filters` INNER JOIN `filters_restaurants` ON `filters`.`id` = `filters_restaurants`.`filter_id` WHERE `filters_restaurants`.`restaurant_id` IS NULL[0m
  [1m[35mFilterType Load (0.2ms)[0m  SELECT `filter_types`.* FROM `filter_types` WHERE `filter_types`.`code` = 'hal_status' LIMIT 1
  [1m[36mFilterType Load (0.2ms)[0m  [1mSELECT `filter_types`.* FROM `filter_types` WHERE `filter_types`.`code` = 'price' LIMIT 1[0m
  [1m[35mFilterType Load (0.5ms)[0m  SELECT `filter_types`.* FROM `filter_types` WHERE `filter_types`.`code` = 'cuisine' LIMIT 1
  [1m[36mFilterType Load (0.3ms)[0m  [1mSELECT `filter_types`.* FROM `filter_types` WHERE `filter_types`.`code` = 'alcohol' LIMIT 1[0m
  [1m[35mFilterType Load (0.2ms)[0m  SELECT `filter_types`.* FROM `filter_types` WHERE `filter_types`.`code` = 'features' LIMIT 1
  Rendered restaurants/_googlemap.html.erb (0.0ms)
  [1m[36mFilter Load (0.5ms)[0m  [1mSELECT `filters`.* FROM `filters` WHERE `filters`.`filter_type_id` = 7[0m
  [1m[35mFilter Load (0.4ms)[0m  SELECT `filters`.* FROM `filters` WHERE `filters`.`filter_type_id` = 1 ORDER BY name ASC
  [1m[36mFilter Load (0.2ms)[0m  [1mSELECT `filters`.* FROM `filters` WHERE `filters`.`filter_type_id` = 3[0m
  [1m[35mFilter Load (0.2ms)[0m  SELECT `filters`.* FROM `filters` WHERE `filters`.`filter_type_id` = 5
  Rendered restaurants/_admin_form.html.erb (22.8ms)
  Rendered restaurants/admin_new.html.erb within layouts/admin (24.1ms)
Completed 500 Internal Server Error in 42ms

ActionView::Template::Error (undefined method `each' for nil:NilClass):
    110:     </h4>
    111:     <div class="row">
    112:       <div class="col-lg-6 col-xs-12 col-sm-6 col-md-6">
    113:         <% @filter_features.each do |f_i| %>
    114:           <%= restaurant_filter_checkbox f_i, @filter_ids %>
    115:         <% end %>
    116:       </div>
  app/views/restaurants/_admin_form.html.erb:113:in `block in _app_views_restaurants__admin_form_html_erb__4256939505501945162_70236384825060'
  app/views/restaurants/_admin_form.html.erb:1:in `_app_views_restaurants__admin_form_html_erb__4256939505501945162_70236384825060'
  app/views/restaurants/admin_new.html.erb:15:in `_app_views_restaurants_admin_new_html_erb__4575001700179055944_70236393439540'


  Rendered /Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_dispatch/middleware/templates/rescues/_trace.erb (2.6ms)
  Rendered /Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_dispatch/middleware/templates/rescues/_request_and_response.erb (1.2ms)
  Rendered /Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_dispatch/middleware/templates/rescues/template_error.erb within rescues/layout (43.9ms)


Started GET "/admin/restaurants/admin_new" for 127.0.0.1 at 2016-01-18 04:03:03 +0100
Processing by RestaurantsController#admin_new as HTML
  [1m[36mUser Load (0.3ms)[0m  [1mSELECT `users`.* FROM `users` WHERE `users`.`id` = 1 LIMIT 1[0m
  [1m[35m (1.3ms)[0m  SELECT `filters`.id FROM `filters` INNER JOIN `filters_restaurants` ON `filters`.`id` = `filters_restaurants`.`filter_id` WHERE `filters_restaurants`.`restaurant_id` IS NULL
  [1m[36mFilterType Load (0.2ms)[0m  [1mSELECT `filter_types`.* FROM `filter_types` WHERE `filter_types`.`code` = 'hal_status' LIMIT 1[0m
  [1m[35mFilterType Load (0.2ms)[0m  SELECT `filter_types`.* FROM `filter_types` WHERE `filter_types`.`code` = 'price' LIMIT 1
  [1m[36mFilterType Load (0.1ms)[0m  [1mSELECT `filter_types`.* FROM `filter_types` WHERE `filter_types`.`code` = 'cuisine' LIMIT 1[0m
  [1m[35mFilterType Load (0.2ms)[0m  SELECT `filter_types`.* FROM `filter_types` WHERE `filter_types`.`code` = 'alcohol' LIMIT 1
  [1m[36mFilterType Load (0.2ms)[0m  [1mSELECT `filter_types`.* FROM `filter_types` WHERE `filter_types`.`code` = 'features' LIMIT 1[0m
  Rendered restaurants/_googlemap.html.erb (0.1ms)
  [1m[35mFilter Load (0.3ms)[0m  SELECT `filters`.* FROM `filters` WHERE `filters`.`filter_type_id` = 7
  [1m[36mFilter Load (0.2ms)[0m  [1mSELECT `filters`.* FROM `filters` WHERE `filters`.`filter_type_id` = 1 ORDER BY name ASC[0m
  [1m[35mFilter Load (0.2ms)[0m  SELECT `filters`.* FROM `filters` WHERE `filters`.`filter_type_id` = 3
  [1m[36mFilter Load (0.2ms)[0m  [1mSELECT `filters`.* FROM `filters` WHERE `filters`.`filter_type_id` = 5[0m
  Rendered restaurants/_admin_form.html.erb (18.0ms)
  Rendered restaurants/admin_new.html.erb within layouts/admin (19.5ms)
Completed 500 Internal Server Error in 50ms

ActionView::Template::Error (undefined method `each' for nil:NilClass):
    110:     </h4>
    111:     <div class="row">
    112:       <div class="col-lg-6 col-xs-12 col-sm-6 col-md-6">
    113:         <% @filter_features.each do |f_i| %>
    114:           <%= restaurant_filter_checkbox f_i, @filter_ids %>
    115:         <% end %>
    116:       </div>
  app/views/restaurants/_admin_form.html.erb:113:in `block in _app_views_restaurants__admin_form_html_erb__4256939505501945162_70236384825060'
  app/views/restaurants/_admin_form.html.erb:1:in `_app_views_restaurants__admin_form_html_erb__4256939505501945162_70236384825060'
  app/views/restaurants/admin_new.html.erb:15:in `_app_views_restaurants_admin_new_html_erb__4575001700179055944_70236393439540'


  Rendered /Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_dispatch/middleware/templates/rescues/_trace.erb (1.3ms)
  Rendered /Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_dispatch/middleware/templates/rescues/_request_and_response.erb (0.8ms)
  Rendered /Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_dispatch/middleware/templates/rescues/template_error.erb within rescues/layout (42.5ms)


Started GET "/oriental-kitchen/edit" for 127.0.0.1 at 2016-01-18 04:03:13 +0100
Processing by RestaurantsController#edit as HTML
  Parameters: {"id"=>"oriental-kitchen"}
  [1m[35mUser Load (0.4ms)[0m  SELECT `users`.* FROM `users` WHERE `users`.`id` = 1 LIMIT 1
  [1m[36mRestaurant Load (1.5ms)[0m  [1mSELECT `restaurants`.* FROM `restaurants` WHERE `restaurants`.`slug` = 'oriental-kitchen' LIMIT 1[0m
  [1m[35mSchedule Load (0.3ms)[0m  SELECT `schedules`.* FROM `schedules` WHERE `schedules`.`restaurant_id` = 876 ORDER BY day_of_week ASC
  [1m[36mPhoto Load (0.3ms)[0m  [1mSELECT `photos`.* FROM `photos` WHERE `photos`.`restaurant_id` = 876[0m
  [1m[35mFilter Load (1.1ms)[0m  SELECT `filters`.* FROM `filters` INNER JOIN `filters_restaurants` ON `filters`.`id` = `filters_restaurants`.`filter_id` WHERE `filters_restaurants`.`restaurant_id` = 876 AND `filters`.`code` = 'cuisine'
  [1m[36m (1.1ms)[0m  [1mSELECT `filters`.id FROM `filters` INNER JOIN `filters_restaurants` ON `filters`.`id` = `filters_restaurants`.`filter_id` WHERE `filters_restaurants`.`restaurant_id` = 876[0m
  [1m[35mFilterType Load (0.2ms)[0m  SELECT `filter_types`.* FROM `filter_types` WHERE `filter_types`.`code` = 'hal_status' LIMIT 1
  [1m[36mFilterType Load (0.2ms)[0m  [1mSELECT `filter_types`.* FROM `filter_types` WHERE `filter_types`.`code` = 'price' LIMIT 1[0m
  [1m[35mFilterType Load (0.2ms)[0m  SELECT `filter_types`.* FROM `filter_types` WHERE `filter_types`.`code` = 'cuisine' LIMIT 1
  [1m[36mFilterType Load (0.2ms)[0m  [1mSELECT `filter_types`.* FROM `filter_types` WHERE `filter_types`.`code` = 'alcohol' LIMIT 1[0m
  [1m[35mFilterType Load (0.2ms)[0m  SELECT `filter_types`.* FROM `filter_types` WHERE `filter_types`.`code` = 'features' LIMIT 1
  Rendered restaurants/_googlemap.html.erb (0.1ms)
  [1m[36mFilter Load (0.3ms)[0m  [1mSELECT `filters`.* FROM `filters` WHERE `filters`.`filter_type_id` = 7[0m
  [1m[35mFilter Load (0.2ms)[0m  SELECT `filters`.* FROM `filters` WHERE `filters`.`filter_type_id` = 1 ORDER BY name ASC
  [1m[36mFilter Load (0.2ms)[0m  [1mSELECT `filters`.* FROM `filters` WHERE `filters`.`filter_type_id` = 3[0m
  [1m[35mFilter Load (0.2ms)[0m  SELECT `filters`.* FROM `filters` WHERE `filters`.`filter_type_id` = 5
  Rendered restaurants/_admin_form.html.erb (20.6ms)
  Rendered restaurants/edit.html.erb within layouts/admin (22.0ms)
Completed 500 Internal Server Error in 44ms

ActionView::Template::Error (undefined method `each' for nil:NilClass):
    110:     </h4>
    111:     <div class="row">
    112:       <div class="col-lg-6 col-xs-12 col-sm-6 col-md-6">
    113:         <% @filter_features.each do |f_i| %>
    114:           <%= restaurant_filter_checkbox f_i, @filter_ids %>
    115:         <% end %>
    116:       </div>
  app/views/restaurants/_admin_form.html.erb:113:in `block in _app_views_restaurants__admin_form_html_erb__4256939505501945162_70236384825060'
  app/views/restaurants/_admin_form.html.erb:1:in `_app_views_restaurants__admin_form_html_erb__4256939505501945162_70236384825060'
  app/views/restaurants/edit.html.erb:15:in `_app_views_restaurants_edit_html_erb__3562842006097413351_70236384875560'


  Rendered /Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_dispatch/middleware/templates/rescues/_trace.erb (1.1ms)
  Rendered /Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_dispatch/middleware/templates/rescues/_request_and_response.erb (0.9ms)
  Rendered /Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_dispatch/middleware/templates/rescues/template_error.erb within rescues/layout (42.4ms)


Started GET "/admin/restaurants/admin_new" for 127.0.0.1 at 2016-01-18 04:11:32 +0100
Processing by RestaurantsController#admin_new as HTML
  [1m[36mUser Load (0.3ms)[0m  [1mSELECT `users`.* FROM `users` WHERE `users`.`id` = 1 LIMIT 1[0m
  [1m[35m (0.1ms)[0m  BEGIN
  [1m[36m (0.1ms)[0m  [1mCOMMIT[0m
Completed 401 Unauthorized in 96ms


Started GET "/admin/restaurants/admin_new" for 127.0.0.1 at 2016-01-18 04:11:32 +0100
Processing by RestaurantsController#admin_new as HTML
Redirected to http://localhost:3000/users/sign_in
Filter chain halted as :required_user_login rendered or redirected
Completed 302 Found in 1ms (ActiveRecord: 0.0ms)


Started GET "/users/sign_in" for 127.0.0.1 at 2016-01-18 04:11:32 +0100
Processing by SessionsController#new as HTML
  Rendered sessions/new.html.slim within layouts/application (1.8ms)
  Rendered layouts/_header.html.erb (1.7ms)
  Rendered layouts/_main_menu.html.slim (0.4ms)
  Rendered layouts/_sub_main_menu.html.slim (0.0ms)
  Rendered layouts/_flash_messages.html.erb (0.1ms)
  [1m[35mBasicsPage Load (0.2ms)[0m  SELECT `basics_pages`.* FROM `basics_pages` WHERE `basics_pages`.`page_name` = 'Footer' LIMIT 1
  Rendered layouts/_footer.html.slim (69.2ms)
Completed 200 OK in 106ms (Views: 54.3ms | ActiveRecord: 51.1ms)


Started POST "/users/sign_in" for 127.0.0.1 at 2016-01-18 04:11:37 +0100
Processing by SessionsController#create as HTML
  Parameters: {"utf8"=>"âœ“", "authenticity_token"=>"cajmPApKUoLTDgL4nYG/B3GUhj8fezKDJZWxee28cyM=", "user"=>{"email"=>"kevin.muller1220@gmail.com", "password"=>"[FILTERED]"}, "button"=>""}
  [1m[36mUser Load (0.3ms)[0m  [1mSELECT `users`.* FROM `users` WHERE `users`.`email` = 'kevin.muller1220@gmail.com' LIMIT 1[0m
  [1m[35m (0.1ms)[0m  BEGIN
  [1m[36m (0.1ms)[0m  [1mCOMMIT[0m
  [1m[35m (0.1ms)[0m  BEGIN
  [1m[36m (0.3ms)[0m  [1mUPDATE `users` SET `last_sign_in_at` = '2016-01-18 02:32:24', `current_sign_in_at` = '2016-01-18 03:11:37', `sign_in_count` = 3, `updated_at` = '2016-01-18 03:11:37' WHERE `users`.`id` = 1[0m
  [1m[35m (0.5ms)[0m  COMMIT
Redirected to http://localhost:3000/admin
Completed 302 Found in 61ms (ActiveRecord: 1.4ms)


Started GET "/admin" for 127.0.0.1 at 2016-01-18 04:11:37 +0100
Processing by RestaurantsController#index as HTML
  [1m[36mUser Load (0.2ms)[0m  [1mSELECT `users`.* FROM `users` WHERE `users`.`id` = 1 LIMIT 1[0m
  Rendered shared/_restaurant_manage_tabs.html.erb (0.7ms)
  Rendered restaurants/_condition_fields.html.erb (9.0ms)
  [1m[35mRestaurant Load (0.8ms)[0m  SELECT `restaurants`.* FROM `restaurants` ORDER BY disabled ASC,created_at DESC LIMIT 12 OFFSET 0
  [1m[36mPhoto Load (0.3ms)[0m  [1mSELECT `photos`.* FROM `photos` WHERE (restaurant_id = 876 and cover = true and status = 1) LIMIT 1[0m
  [1m[35mPhoto Load (0.3ms)[0m  SELECT `photos`.* FROM `photos` WHERE `photos`.`restaurant_id` = 876 AND `photos`.`status` = 1 ORDER BY restaurant_id ASC, created_at DESC LIMIT 1
  [1m[36mPhoto Load (0.3ms)[0m  [1mSELECT `photos`.* FROM `photos` WHERE (restaurant_id = 851 and cover = true and status = 1) LIMIT 1[0m
  [1m[35mPhoto Load (0.3ms)[0m  SELECT `photos`.* FROM `photos` WHERE `photos`.`restaurant_id` = 851 AND `photos`.`status` = 1 ORDER BY restaurant_id ASC, created_at DESC LIMIT 1
  [1m[36mPhoto Load (0.3ms)[0m  [1mSELECT `photos`.* FROM `photos` WHERE (restaurant_id = 693 and cover = true and status = 1) LIMIT 1[0m
  [1m[35mPhoto Load (0.3ms)[0m  SELECT `photos`.* FROM `photos` WHERE `photos`.`restaurant_id` = 693 AND `photos`.`status` = 1 ORDER BY restaurant_id ASC, created_at DESC LIMIT 1
  [1m[36mPhoto Load (0.3ms)[0m  [1mSELECT `photos`.* FROM `photos` WHERE (restaurant_id = 686 and cover = true and status = 1) LIMIT 1[0m
  [1m[35mPhoto Load (0.3ms)[0m  SELECT `photos`.* FROM `photos` WHERE `photos`.`restaurant_id` = 686 AND `photos`.`status` = 1 ORDER BY restaurant_id ASC, created_at DESC LIMIT 1
  [1m[36mPhoto Load (0.3ms)[0m  [1mSELECT `photos`.* FROM `photos` WHERE (restaurant_id = 669 and cover = true and status = 1) LIMIT 1[0m
  [1m[35mPhoto Load (0.3ms)[0m  SELECT `photos`.* FROM `photos` WHERE `photos`.`restaurant_id` = 669 AND `photos`.`status` = 1 ORDER BY restaurant_id ASC, created_at DESC LIMIT 1
  [1m[36mPhoto Load (0.3ms)[0m  [1mSELECT `photos`.* FROM `photos` WHERE (restaurant_id = 251 and cover = true and status = 1) LIMIT 1[0m
  [1m[35mPhoto Load (0.3ms)[0m  SELECT `photos`.* FROM `photos` WHERE `photos`.`restaurant_id` = 251 AND `photos`.`status` = 1 ORDER BY restaurant_id ASC, created_at DESC LIMIT 1
  [1m[36mPhoto Load (0.3ms)[0m  [1mSELECT `photos`.* FROM `photos` WHERE (restaurant_id = 250 and cover = true and status = 1) LIMIT 1[0m
  [1m[35mPhoto Load (0.3ms)[0m  SELECT `photos`.* FROM `photos` WHERE `photos`.`restaurant_id` = 250 AND `photos`.`status` = 1 ORDER BY restaurant_id ASC, created_at DESC LIMIT 1
  [1m[36mPhoto Load (0.3ms)[0m  [1mSELECT `photos`.* FROM `photos` WHERE (restaurant_id = 237 and cover = true and status = 1) LIMIT 1[0m
  [1m[35mPhoto Load (0.3ms)[0m  SELECT `photos`.* FROM `photos` WHERE `photos`.`restaurant_id` = 237 AND `photos`.`status` = 1 ORDER BY restaurant_id ASC, created_at DESC LIMIT 1
  [1m[36mPhoto Load (0.4ms)[0m  [1mSELECT `photos`.* FROM `photos` WHERE (restaurant_id = 231 and cover = true and status = 1) LIMIT 1[0m
  [1m[35mPhoto Load (0.3ms)[0m  SELECT `photos`.* FROM `photos` WHERE `photos`.`restaurant_id` = 231 AND `photos`.`status` = 1 ORDER BY restaurant_id ASC, created_at DESC LIMIT 1
  [1m[36mPhoto Load (0.3ms)[0m  [1mSELECT `photos`.* FROM `photos` WHERE (restaurant_id = 222 and cover = true and status = 1) LIMIT 1[0m
  [1m[35mPhoto Load (0.3ms)[0m  SELECT `photos`.* FROM `photos` WHERE `photos`.`restaurant_id` = 222 AND `photos`.`status` = 1 ORDER BY restaurant_id ASC, created_at DESC LIMIT 1
  [1m[36mPhoto Load (0.3ms)[0m  [1mSELECT `photos`.* FROM `photos` WHERE (restaurant_id = 221 and cover = true and status = 1) LIMIT 1[0m
  [1m[35mPhoto Load (0.3ms)[0m  SELECT `photos`.* FROM `photos` WHERE `photos`.`restaurant_id` = 221 AND `photos`.`status` = 1 ORDER BY restaurant_id ASC, created_at DESC LIMIT 1
  [1m[36mPhoto Load (0.3ms)[0m  [1mSELECT `photos`.* FROM `photos` WHERE (restaurant_id = 216 and cover = true and status = 1) LIMIT 1[0m
  [1m[35mPhoto Load (0.3ms)[0m  SELECT `photos`.* FROM `photos` WHERE `photos`.`restaurant_id` = 216 AND `photos`.`status` = 1 ORDER BY restaurant_id ASC, created_at DESC LIMIT 1
  [1m[36m (0.4ms)[0m  [1mSELECT COUNT(*) FROM `restaurants` [0m
  Rendered restaurants/index.html.erb within layouts/admin (106.0ms)
Completed 200 OK in 116ms (Views: 105.0ms | ActiveRecord: 8.4ms)


Started GET "/admin/restaurants/admin_new" for 127.0.0.1 at 2016-01-18 04:11:39 +0100
Processing by RestaurantsController#admin_new as HTML
  [1m[35mUser Load (0.4ms)[0m  SELECT `users`.* FROM `users` WHERE `users`.`id` = 1 LIMIT 1
  [1m[36m (1.1ms)[0m  [1mSELECT `filters`.id FROM `filters` INNER JOIN `filters_restaurants` ON `filters`.`id` = `filters_restaurants`.`filter_id` WHERE `filters_restaurants`.`restaurant_id` IS NULL[0m
  [1m[35mFilterType Load (0.2ms)[0m  SELECT `filter_types`.* FROM `filter_types` WHERE `filter_types`.`code` = 'hal_status' LIMIT 1
  [1m[36mFilterType Load (0.2ms)[0m  [1mSELECT `filter_types`.* FROM `filter_types` WHERE `filter_types`.`code` = 'price' LIMIT 1[0m
  [1m[35mFilterType Load (0.2ms)[0m  SELECT `filter_types`.* FROM `filter_types` WHERE `filter_types`.`code` = 'cuisine' LIMIT 1
  [1m[36mFilterType Load (0.2ms)[0m  [1mSELECT `filter_types`.* FROM `filter_types` WHERE `filter_types`.`code` = 'alcohol' LIMIT 1[0m
  [1m[35mFilterType Load (0.3ms)[0m  SELECT `filter_types`.* FROM `filter_types` WHERE `filter_types`.`code` = 'features' LIMIT 1
  Rendered restaurants/_googlemap.html.erb (0.1ms)
  [1m[36mFilter Load (0.3ms)[0m  [1mSELECT `filters`.* FROM `filters` WHERE `filters`.`filter_type_id` = 8[0m
  [1m[35mFilter Load (0.4ms)[0m  SELECT `filters`.* FROM `filters` WHERE `filters`.`filter_type_id` = 1 ORDER BY name ASC
  [1m[36mFilter Load (0.2ms)[0m  [1mSELECT `filters`.* FROM `filters` WHERE `filters`.`filter_type_id` = 4[0m
  [1m[35mFilter Load (0.2ms)[0m  SELECT `filters`.* FROM `filters` WHERE `filters`.`filter_type_id` = 6
  [1m[36mFilter Load (0.2ms)[0m  [1mSELECT `filters`.* FROM `filters` WHERE `filters`.`filter_type_id` = 11 AND (code != 'offer')[0m
  Rendered restaurants/_admin_form.html.erb (60.8ms)
  Rendered restaurants/_upload_menu.html.erb (3.5ms)
  Rendered restaurants/_upload_photos.html.erb (2.4ms)
  Rendered restaurants/admin_new.html.erb within layouts/admin (71.2ms)
Completed 200 OK in 90ms (Views: 76.1ms | ActiveRecord: 3.7ms)


Started GET "/photos?r_id=" for 127.0.0.1 at 2016-01-18 04:11:42 +0100
Processing by PhotosController#index as JSON
  Parameters: {"r_id"=>""}
  [1m[35mRestaurant Load (1.6ms)[0m  SELECT `restaurants`.* FROM `restaurants` WHERE `restaurants`.`slug` = '' LIMIT 1
  [1m[36mRestaurant Load (0.5ms)[0m  [1mSELECT `restaurants`.* FROM `restaurants` WHERE `restaurants`.`id` = 0 LIMIT 1[0m
Completed 500 Internal Server Error in 5ms

ActiveRecord::RecordNotFound (Couldn't find Restaurant with id=):
  app/controllers/photos_controller.rb:11:in `index'


  Rendered /Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_dispatch/middleware/templates/rescues/_trace.erb (1.2ms)
  Rendered /Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_dispatch/middleware/templates/rescues/_request_and_response.erb (0.9ms)
  Rendered /Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_dispatch/middleware/templates/rescues/diagnostics.erb within rescues/layout (55.8ms)


Started GET "/admin/reviews" for 127.0.0.1 at 2016-01-18 04:11:43 +0100
Processing by ReviewsController#index as HTML
  [1m[35mUser Load (0.3ms)[0m  SELECT `users`.* FROM `users` WHERE `users`.`id` = 1 LIMIT 1
  Rendered shared/_review_manage_tabs.html.erb (0.9ms)
  Rendered reviews/_condition_fields.html.erb (20.1ms)
  [1m[36mReview Load (0.6ms)[0m  [1mSELECT `reviews`.* FROM `reviews` ORDER BY created_at DESC LIMIT 30 OFFSET 0[0m
  [1m[35m (0.2ms)[0m  SELECT COUNT(*) FROM `reviews` 
  Rendered reviews/index.html.erb within layouts/admin (34.9ms)
Completed 200 OK in 52ms (Views: 48.1ms | ActiveRecord: 1.1ms)


Started GET "/admin/restaurants" for 127.0.0.1 at 2016-01-18 04:11:43 +0100
Processing by RestaurantsController#index as HTML
  [1m[36mUser Load (0.3ms)[0m  [1mSELECT `users`.* FROM `users` WHERE `users`.`id` = 1 LIMIT 1[0m
  Rendered shared/_restaurant_manage_tabs.html.erb (0.6ms)
  Rendered restaurants/_condition_fields.html.erb (10.0ms)
  [1m[35mRestaurant Load (0.8ms)[0m  SELECT `restaurants`.* FROM `restaurants` ORDER BY disabled ASC,created_at DESC LIMIT 12 OFFSET 0
  [1m[36mPhoto Load (0.4ms)[0m  [1mSELECT `photos`.* FROM `photos` WHERE (restaurant_id = 876 and cover = true and status = 1) LIMIT 1[0m
  [1m[35mPhoto Load (0.3ms)[0m  SELECT `photos`.* FROM `photos` WHERE `photos`.`restaurant_id` = 876 AND `photos`.`status` = 1 ORDER BY restaurant_id ASC, created_at DESC LIMIT 1
  [1m[36mPhoto Load (0.4ms)[0m  [1mSELECT `photos`.* FROM `photos` WHERE (restaurant_id = 851 and cover = true and status = 1) LIMIT 1[0m
  [1m[35mPhoto Load (0.3ms)[0m  SELECT `photos`.* FROM `photos` WHERE `photos`.`restaurant_id` = 851 AND `photos`.`status` = 1 ORDER BY restaurant_id ASC, created_at DESC LIMIT 1
  [1m[36mPhoto Load (0.4ms)[0m  [1mSELECT `photos`.* FROM `photos` WHERE (restaurant_id = 693 and cover = true and status = 1) LIMIT 1[0m
  [1m[35mPhoto Load (0.3ms)[0m  SELECT `photos`.* FROM `photos` WHERE `photos`.`restaurant_id` = 693 AND `photos`.`status` = 1 ORDER BY restaurant_id ASC, created_at DESC LIMIT 1
  [1m[36mPhoto Load (0.4ms)[0m  [1mSELECT `photos`.* FROM `photos` WHERE (restaurant_id = 686 and cover = true and status = 1) LIMIT 1[0m
  [1m[35mPhoto Load (0.3ms)[0m  SELECT `photos`.* FROM `photos` WHERE `photos`.`restaurant_id` = 686 AND `photos`.`status` = 1 ORDER BY restaurant_id ASC, created_at DESC LIMIT 1
  [1m[36mPhoto Load (0.3ms)[0m  [1mSELECT `photos`.* FROM `photos` WHERE (restaurant_id = 669 and cover = true and status = 1) LIMIT 1[0m
  [1m[35mPhoto Load (0.3ms)[0m  SELECT `photos`.* FROM `photos` WHERE `photos`.`restaurant_id` = 669 AND `photos`.`status` = 1 ORDER BY restaurant_id ASC, created_at DESC LIMIT 1
  [1m[36mPhoto Load (0.6ms)[0m  [1mSELECT `photos`.* FROM `photos` WHERE (restaurant_id = 251 and cover = true and status = 1) LIMIT 1[0m
  [1m[35mPhoto Load (0.3ms)[0m  SELECT `photos`.* FROM `photos` WHERE `photos`.`restaurant_id` = 251 AND `photos`.`status` = 1 ORDER BY restaurant_id ASC, created_at DESC LIMIT 1
  [1m[36mPhoto Load (0.3ms)[0m  [1mSELECT `photos`.* FROM `photos` WHERE (restaurant_id = 250 and cover = true and status = 1) LIMIT 1[0m
  [1m[35mPhoto Load (0.3ms)[0m  SELECT `photos`.* FROM `photos` WHERE `photos`.`restaurant_id` = 250 AND `photos`.`status` = 1 ORDER BY restaurant_id ASC, created_at DESC LIMIT 1
  [1m[36mPhoto Load (0.3ms)[0m  [1mSELECT `photos`.* FROM `photos` WHERE (restaurant_id = 237 and cover = true and status = 1) LIMIT 1[0m
  [1m[35mPhoto Load (0.3ms)[0m  SELECT `photos`.* FROM `photos` WHERE `photos`.`restaurant_id` = 237 AND `photos`.`status` = 1 ORDER BY restaurant_id ASC, created_at DESC LIMIT 1
  [1m[36mPhoto Load (0.3ms)[0m  [1mSELECT `photos`.* FROM `photos` WHERE (restaurant_id = 231 and cover = true and status = 1) LIMIT 1[0m
  [1m[35mPhoto Load (0.3ms)[0m  SELECT `photos`.* FROM `photos` WHERE `photos`.`restaurant_id` = 231 AND `photos`.`status` = 1 ORDER BY restaurant_id ASC, created_at DESC LIMIT 1
  [1m[36mPhoto Load (0.3ms)[0m  [1mSELECT `photos`.* FROM `photos` WHERE (restaurant_id = 222 and cover = true and status = 1) LIMIT 1[0m
  [1m[35mPhoto Load (0.3ms)[0m  SELECT `photos`.* FROM `photos` WHERE `photos`.`restaurant_id` = 222 AND `photos`.`status` = 1 ORDER BY restaurant_id ASC, created_at DESC LIMIT 1
  [1m[36mPhoto Load (0.3ms)[0m  [1mSELECT `photos`.* FROM `photos` WHERE (restaurant_id = 221 and cover = true and status = 1) LIMIT 1[0m
  [1m[35mPhoto Load (0.3ms)[0m  SELECT `photos`.* FROM `photos` WHERE `photos`.`restaurant_id` = 221 AND `photos`.`status` = 1 ORDER BY restaurant_id ASC, created_at DESC LIMIT 1
  [1m[36mPhoto Load (0.4ms)[0m  [1mSELECT `photos`.* FROM `photos` WHERE (restaurant_id = 216 and cover = true and status = 1) LIMIT 1[0m
  [1m[35mPhoto Load (0.3ms)[0m  SELECT `photos`.* FROM `photos` WHERE `photos`.`restaurant_id` = 216 AND `photos`.`status` = 1 ORDER BY restaurant_id ASC, created_at DESC LIMIT 1
  [1m[36m (0.4ms)[0m  [1mSELECT COUNT(*) FROM `restaurants` [0m
  Rendered restaurants/index.html.erb within layouts/admin (84.3ms)
Completed 200 OK in 92ms (Views: 80.3ms | ActiveRecord: 9.4ms)


Started GET "/admin/collections" for 127.0.0.1 at 2016-01-18 04:11:45 +0100
Processing by CollectionsController#index as HTML
  Rendered shared/_restaurant_manage_tabs.html.erb (0.6ms)
  [1m[35mCollection Load (0.2ms)[0m  SELECT `collections`.* FROM `collections` ORDER BY name ASC, created_at DESC LIMIT 12 OFFSET 0
  [1m[36mCollectionImage Load (0.6ms)[0m  [1mSELECT `collection_images`.* FROM `collection_images` WHERE (collection_id = 3) LIMIT 1[0m
  [1m[35mCollectionImage Load (0.7ms)[0m  SELECT `collection_images`.* FROM `collection_images` WHERE (collection_id = 2) LIMIT 1
  [1m[36m (0.2ms)[0m  [1mSELECT COUNT(*) FROM `collections` [0m
  Rendered collections/index.erb within layouts/admin (72.3ms)
  [1m[35mUser Load (0.6ms)[0m  SELECT `users`.* FROM `users` WHERE `users`.`id` = 1 LIMIT 1
Completed 200 OK in 94ms (Views: 85.1ms | ActiveRecord: 7.4ms)


Started GET "/restaurants" for 127.0.0.1 at 2016-01-18 04:11:46 +0100
Processing by RestaurantsController#index as HTML
  [1m[36mUser Load (0.2ms)[0m  [1mSELECT `users`.* FROM `users` WHERE `users`.`id` = 1 LIMIT 1[0m
  Rendered shared/_restaurant_manage_tabs.html.erb (0.7ms)
  Rendered restaurants/_condition_fields.html.erb (11.4ms)
  [1m[35mRestaurant Load (0.9ms)[0m  SELECT `restaurants`.* FROM `restaurants` ORDER BY disabled ASC,created_at DESC LIMIT 12 OFFSET 0
  [1m[36mPhoto Load (0.4ms)[0m  [1mSELECT `photos`.* FROM `photos` WHERE (restaurant_id = 876 and cover = true and status = 1) LIMIT 1[0m
  [1m[35mPhoto Load (0.3ms)[0m  SELECT `photos`.* FROM `photos` WHERE `photos`.`restaurant_id` = 876 AND `photos`.`status` = 1 ORDER BY restaurant_id ASC, created_at DESC LIMIT 1
  [1m[36mPhoto Load (0.3ms)[0m  [1mSELECT `photos`.* FROM `photos` WHERE (restaurant_id = 851 and cover = true and status = 1) LIMIT 1[0m
  [1m[35mPhoto Load (0.3ms)[0m  SELECT `photos`.* FROM `photos` WHERE `photos`.`restaurant_id` = 851 AND `photos`.`status` = 1 ORDER BY restaurant_id ASC, created_at DESC LIMIT 1
  [1m[36mPhoto Load (0.3ms)[0m  [1mSELECT `photos`.* FROM `photos` WHERE (restaurant_id = 693 and cover = true and status = 1) LIMIT 1[0m
  [1m[35mPhoto Load (0.2ms)[0m  SELECT `photos`.* FROM `photos` WHERE `photos`.`restaurant_id` = 693 AND `photos`.`status` = 1 ORDER BY restaurant_id ASC, created_at DESC LIMIT 1
  [1m[36mPhoto Load (0.3ms)[0m  [1mSELECT `photos`.* FROM `photos` WHERE (restaurant_id = 686 and cover = true and status = 1) LIMIT 1[0m
  [1m[35mPhoto Load (0.2ms)[0m  SELECT `photos`.* FROM `photos` WHERE `photos`.`restaurant_id` = 686 AND `photos`.`status` = 1 ORDER BY restaurant_id ASC, created_at DESC LIMIT 1
  [1m[36mPhoto Load (0.3ms)[0m  [1mSELECT `photos`.* FROM `photos` WHERE (restaurant_id = 669 and cover = true and status = 1) LIMIT 1[0m
  [1m[35mPhoto Load (0.3ms)[0m  SELECT `photos`.* FROM `photos` WHERE `photos`.`restaurant_id` = 669 AND `photos`.`status` = 1 ORDER BY restaurant_id ASC, created_at DESC LIMIT 1
  [1m[36mPhoto Load (0.3ms)[0m  [1mSELECT `photos`.* FROM `photos` WHERE (restaurant_id = 251 and cover = true and status = 1) LIMIT 1[0m
  [1m[35mPhoto Load (0.2ms)[0m  SELECT `photos`.* FROM `photos` WHERE `photos`.`restaurant_id` = 251 AND `photos`.`status` = 1 ORDER BY restaurant_id ASC, created_at DESC LIMIT 1
  [1m[36mPhoto Load (0.4ms)[0m  [1mSELECT `photos`.* FROM `photos` WHERE (restaurant_id = 250 and cover = true and status = 1) LIMIT 1[0m
  [1m[35mPhoto Load (0.4ms)[0m  SELECT `photos`.* FROM `photos` WHERE `photos`.`restaurant_id` = 250 AND `photos`.`status` = 1 ORDER BY restaurant_id ASC, created_at DESC LIMIT 1
  [1m[36mPhoto Load (0.3ms)[0m  [1mSELECT `photos`.* FROM `photos` WHERE (restaurant_id = 237 and cover = true and status = 1) LIMIT 1[0m
  [1m[35mPhoto Load (0.3ms)[0m  SELECT `photos`.* FROM `photos` WHERE `photos`.`restaurant_id` = 237 AND `photos`.`status` = 1 ORDER BY restaurant_id ASC, created_at DESC LIMIT 1
  [1m[36mPhoto Load (0.3ms)[0m  [1mSELECT `photos`.* FROM `photos` WHERE (restaurant_id = 231 and cover = true and status = 1) LIMIT 1[0m
  [1m[35mPhoto Load (0.2ms)[0m  SELECT `photos`.* FROM `photos` WHERE `photos`.`restaurant_id` = 231 AND `photos`.`status` = 1 ORDER BY restaurant_id ASC, created_at DESC LIMIT 1
  [1m[36mPhoto Load (0.3ms)[0m  [1mSELECT `photos`.* FROM `photos` WHERE (restaurant_id = 222 and cover = true and status = 1) LIMIT 1[0m
  [1m[35mPhoto Load (0.3ms)[0m  SELECT `photos`.* FROM `photos` WHERE `photos`.`restaurant_id` = 222 AND `photos`.`status` = 1 ORDER BY restaurant_id ASC, created_at DESC LIMIT 1
  [1m[36mPhoto Load (0.3ms)[0m  [1mSELECT `photos`.* FROM `photos` WHERE (restaurant_id = 221 and cover = true and status = 1) LIMIT 1[0m
  [1m[35mPhoto Load (0.3ms)[0m  SELECT `photos`.* FROM `photos` WHERE `photos`.`restaurant_id` = 221 AND `photos`.`status` = 1 ORDER BY restaurant_id ASC, created_at DESC LIMIT 1
  [1m[36mPhoto Load (0.4ms)[0m  [1mSELECT `photos`.* FROM `photos` WHERE (restaurant_id = 216 and cover = true and status = 1) LIMIT 1[0m
  [1m[35mPhoto Load (0.4ms)[0m  SELECT `photos`.* FROM `photos` WHERE `photos`.`restaurant_id` = 216 AND `photos`.`status` = 1 ORDER BY restaurant_id ASC, created_at DESC LIMIT 1
  [1m[36m (0.4ms)[0m  [1mSELECT COUNT(*) FROM `restaurants` [0m
  Rendered restaurants/index.html.erb within layouts/admin (89.3ms)
Completed 200 OK in 98ms (Views: 86.9ms | ActiveRecord: 8.7ms)


Started GET "/admin/restaurants/admin_new" for 127.0.0.1 at 2016-01-18 04:11:49 +0100
Processing by RestaurantsController#admin_new as HTML
  [1m[35mUser Load (0.3ms)[0m  SELECT `users`.* FROM `users` WHERE `users`.`id` = 1 LIMIT 1
  [1m[36m (1.1ms)[0m  [1mSELECT `filters`.id FROM `filters` INNER JOIN `filters_restaurants` ON `filters`.`id` = `filters_restaurants`.`filter_id` WHERE `filters_restaurants`.`restaurant_id` IS NULL[0m
  [1m[35mFilterType Load (0.2ms)[0m  SELECT `filter_types`.* FROM `filter_types` WHERE `filter_types`.`code` = 'hal_status' LIMIT 1
  [1m[36mFilterType Load (0.4ms)[0m  [1mSELECT `filter_types`.* FROM `filter_types` WHERE `filter_types`.`code` = 'price' LIMIT 1[0m
  [1m[35mFilterType Load (0.2ms)[0m  SELECT `filter_types`.* FROM `filter_types` WHERE `filter_types`.`code` = 'cuisine' LIMIT 1
  [1m[36mFilterType Load (0.2ms)[0m  [1mSELECT `filter_types`.* FROM `filter_types` WHERE `filter_types`.`code` = 'alcohol' LIMIT 1[0m
  [1m[35mFilterType Load (0.2ms)[0m  SELECT `filter_types`.* FROM `filter_types` WHERE `filter_types`.`code` = 'features' LIMIT 1
  Rendered restaurants/_googlemap.html.erb (0.1ms)
  [1m[36mFilter Load (0.3ms)[0m  [1mSELECT `filters`.* FROM `filters` WHERE `filters`.`filter_type_id` = 8[0m
  [1m[35mFilter Load (0.2ms)[0m  SELECT `filters`.* FROM `filters` WHERE `filters`.`filter_type_id` = 1 ORDER BY name ASC
  [1m[36mFilter Load (0.2ms)[0m  [1mSELECT `filters`.* FROM `filters` WHERE `filters`.`filter_type_id` = 4[0m
  [1m[35mFilter Load (0.2ms)[0m  SELECT `filters`.* FROM `filters` WHERE `filters`.`filter_type_id` = 6
  [1m[36mFilter Load (0.2ms)[0m  [1mSELECT `filters`.* FROM `filters` WHERE `filters`.`filter_type_id` = 11 AND (code != 'offer')[0m
  Rendered restaurants/_admin_form.html.erb (84.5ms)
  Rendered restaurants/_upload_menu.html.erb (1.5ms)
  Rendered restaurants/_upload_photos.html.erb (0.9ms)
  Rendered restaurants/admin_new.html.erb within layouts/admin (90.9ms)
Completed 200 OK in 109ms (Views: 95.6ms | ActiveRecord: 3.5ms)


Started GET "/photos?r_id=" for 127.0.0.1 at 2016-01-18 04:11:50 +0100
Processing by PhotosController#index as JSON
  Parameters: {"r_id"=>""}
  [1m[35mRestaurant Load (2.6ms)[0m  SELECT `restaurants`.* FROM `restaurants` WHERE `restaurants`.`slug` = '' LIMIT 1
  [1m[36mRestaurant Load (0.3ms)[0m  [1mSELECT `restaurants`.* FROM `restaurants` WHERE `restaurants`.`id` = 0 LIMIT 1[0m
Completed 500 Internal Server Error in 6ms

ActiveRecord::RecordNotFound (Couldn't find Restaurant with id=):
  app/controllers/photos_controller.rb:11:in `index'


  Rendered /Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_dispatch/middleware/templates/rescues/_trace.erb (1.1ms)
  Rendered /Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_dispatch/middleware/templates/rescues/_request_and_response.erb (1.0ms)
  Rendered /Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_dispatch/middleware/templates/rescues/diagnostics.erb within rescues/layout (50.1ms)


Started GET "/admin/restaurants" for 127.0.0.1 at 2016-01-18 04:12:54 +0100
Processing by RestaurantsController#index as HTML
  [1m[35mUser Load (0.3ms)[0m  SELECT `users`.* FROM `users` WHERE `users`.`id` = 1 LIMIT 1
  Rendered shared/_restaurant_manage_tabs.html.erb (0.7ms)
  Rendered restaurants/_condition_fields.html.erb (8.2ms)
  [1m[36mRestaurant Load (0.8ms)[0m  [1mSELECT `restaurants`.* FROM `restaurants` ORDER BY disabled ASC,created_at DESC LIMIT 12 OFFSET 0[0m
  [1m[35mPhoto Load (0.4ms)[0m  SELECT `photos`.* FROM `photos` WHERE (restaurant_id = 876 and cover = true and status = 1) LIMIT 1
  [1m[36mPhoto Load (0.3ms)[0m  [1mSELECT `photos`.* FROM `photos` WHERE `photos`.`restaurant_id` = 876 AND `photos`.`status` = 1 ORDER BY restaurant_id ASC, created_at DESC LIMIT 1[0m
  [1m[35mPhoto Load (0.4ms)[0m  SELECT `photos`.* FROM `photos` WHERE (restaurant_id = 851 and cover = true and status = 1) LIMIT 1
  [1m[36mPhoto Load (0.3ms)[0m  [1mSELECT `photos`.* FROM `photos` WHERE `photos`.`restaurant_id` = 851 AND `photos`.`status` = 1 ORDER BY restaurant_id ASC, created_at DESC LIMIT 1[0m
  [1m[35mPhoto Load (0.3ms)[0m  SELECT `photos`.* FROM `photos` WHERE (restaurant_id = 693 and cover = true and status = 1) LIMIT 1
  [1m[36mPhoto Load (0.3ms)[0m  [1mSELECT `photos`.* FROM `photos` WHERE `photos`.`restaurant_id` = 693 AND `photos`.`status` = 1 ORDER BY restaurant_id ASC, created_at DESC LIMIT 1[0m
  [1m[35mPhoto Load (0.3ms)[0m  SELECT `photos`.* FROM `photos` WHERE (restaurant_id = 686 and cover = true and status = 1) LIMIT 1
  [1m[36mPhoto Load (0.3ms)[0m  [1mSELECT `photos`.* FROM `photos` WHERE `photos`.`restaurant_id` = 686 AND `photos`.`status` = 1 ORDER BY restaurant_id ASC, created_at DESC LIMIT 1[0m
  [1m[35mPhoto Load (0.3ms)[0m  SELECT `photos`.* FROM `photos` WHERE (restaurant_id = 669 and cover = true and status = 1) LIMIT 1
  [1m[36mPhoto Load (0.3ms)[0m  [1mSELECT `photos`.* FROM `photos` WHERE `photos`.`restaurant_id` = 669 AND `photos`.`status` = 1 ORDER BY restaurant_id ASC, created_at DESC LIMIT 1[0m
  [1m[35mPhoto Load (0.3ms)[0m  SELECT `photos`.* FROM `photos` WHERE (restaurant_id = 251 and cover = true and status = 1) LIMIT 1
  [1m[36mPhoto Load (0.4ms)[0m  [1mSELECT `photos`.* FROM `photos` WHERE `photos`.`restaurant_id` = 251 AND `photos`.`status` = 1 ORDER BY restaurant_id ASC, created_at DESC LIMIT 1[0m
  [1m[35mPhoto Load (0.3ms)[0m  SELECT `photos`.* FROM `photos` WHERE (restaurant_id = 250 and cover = true and status = 1) LIMIT 1
  [1m[36mPhoto Load (0.4ms)[0m  [1mSELECT `photos`.* FROM `photos` WHERE `photos`.`restaurant_id` = 250 AND `photos`.`status` = 1 ORDER BY restaurant_id ASC, created_at DESC LIMIT 1[0m
  [1m[35mPhoto Load (0.3ms)[0m  SELECT `photos`.* FROM `photos` WHERE (restaurant_id = 237 and cover = true and status = 1) LIMIT 1
  [1m[36mPhoto Load (0.3ms)[0m  [1mSELECT `photos`.* FROM `photos` WHERE `photos`.`restaurant_id` = 237 AND `photos`.`status` = 1 ORDER BY restaurant_id ASC, created_at DESC LIMIT 1[0m
  [1m[35mPhoto Load (0.3ms)[0m  SELECT `photos`.* FROM `photos` WHERE (restaurant_id = 231 and cover = true and status = 1) LIMIT 1
  [1m[36mPhoto Load (0.3ms)[0m  [1mSELECT `photos`.* FROM `photos` WHERE `photos`.`restaurant_id` = 231 AND `photos`.`status` = 1 ORDER BY restaurant_id ASC, created_at DESC LIMIT 1[0m
  [1m[35mPhoto Load (0.3ms)[0m  SELECT `photos`.* FROM `photos` WHERE (restaurant_id = 222 and cover = true and status = 1) LIMIT 1
  [1m[36mPhoto Load (0.3ms)[0m  [1mSELECT `photos`.* FROM `photos` WHERE `photos`.`restaurant_id` = 222 AND `photos`.`status` = 1 ORDER BY restaurant_id ASC, created_at DESC LIMIT 1[0m
  [1m[35mPhoto Load (0.3ms)[0m  SELECT `photos`.* FROM `photos` WHERE (restaurant_id = 221 and cover = true and status = 1) LIMIT 1
  [1m[36mPhoto Load (0.3ms)[0m  [1mSELECT `photos`.* FROM `photos` WHERE `photos`.`restaurant_id` = 221 AND `photos`.`status` = 1 ORDER BY restaurant_id ASC, created_at DESC LIMIT 1[0m
  [1m[35mPhoto Load (0.3ms)[0m  SELECT `photos`.* FROM `photos` WHERE (restaurant_id = 216 and cover = true and status = 1) LIMIT 1
  [1m[36mPhoto Load (0.3ms)[0m  [1mSELECT `photos`.* FROM `photos` WHERE `photos`.`restaurant_id` = 216 AND `photos`.`status` = 1 ORDER BY restaurant_id ASC, created_at DESC LIMIT 1[0m
  [1m[35m (0.4ms)[0m  SELECT COUNT(*) FROM `restaurants` 
  Rendered restaurants/index.html.erb within layouts/admin (106.8ms)
Completed 200 OK in 141ms (Views: 130.4ms | ActiveRecord: 8.8ms)


Started GET "/admin/collections" for 127.0.0.1 at 2016-01-18 04:12:56 +0100
Processing by CollectionsController#index as HTML
  Rendered shared/_restaurant_manage_tabs.html.erb (0.7ms)
  [1m[36mCollection Load (0.3ms)[0m  [1mSELECT `collections`.* FROM `collections` ORDER BY name ASC, created_at DESC LIMIT 12 OFFSET 0[0m
  [1m[35mCollectionImage Load (0.2ms)[0m  SELECT `collection_images`.* FROM `collection_images` WHERE (collection_id = 3) LIMIT 1
  [1m[36mCollectionImage Load (0.2ms)[0m  [1mSELECT `collection_images`.* FROM `collection_images` WHERE (collection_id = 2) LIMIT 1[0m
  [1m[35m (0.2ms)[0m  SELECT COUNT(*) FROM `collections` 
  Rendered collections/index.erb within layouts/admin (13.6ms)
  [1m[36mUser Load (0.3ms)[0m  [1mSELECT `users`.* FROM `users` WHERE `users`.`id` = 1 LIMIT 1[0m
Completed 200 OK in 28ms (Views: 26.3ms | ActiveRecord: 1.2ms)


Started GET "/admin/collections/admin_new_collection" for 127.0.0.1 at 2016-01-18 04:13:02 +0100
Processing by CollectionsController#admin_new_collection as HTML
  [1m[35mUser Load (0.4ms)[0m  SELECT `users`.* FROM `users` WHERE `users`.`id` = 1 LIMIT 1
  Rendered collections/_collection_form.html.erb (7.7ms)
  Rendered collections/_collection_restaurants_form.html.erb (0.4ms)
  Rendered collections/admin_new_collection.html.erb within layouts/admin (30.0ms)
Completed 200 OK in 56ms (Views: 51.7ms | ActiveRecord: 0.4ms)


Started GET "/admin/collections/admin_new_collection" for 127.0.0.1 at 2016-01-18 04:13:31 +0100
Processing by CollectionsController#admin_new_collection as HTML
  [1m[36mUser Load (0.3ms)[0m  [1mSELECT `users`.* FROM `users` WHERE `users`.`id` = 1 LIMIT 1[0m
  Rendered collections/_collection_form.html.erb (6.3ms)
  Rendered collections/_collection_restaurants_form.html.erb (0.7ms)
  Rendered collections/admin_new_collection.html.erb within layouts/admin (8.9ms)
Completed 200 OK in 23ms (Views: 16.8ms | ActiveRecord: 0.3ms)


Started GET "/admin/collections/admin_new_collection" for 127.0.0.1 at 2016-01-18 04:22:08 +0100
Processing by CollectionsController#admin_new_collection as HTML
  [1m[35mUser Load (0.7ms)[0m  SELECT `users`.* FROM `users` WHERE `users`.`id` = 1 LIMIT 1
  Rendered collections/_collection_form.html.erb (5.1ms)
ERROR: compiling _app_views_collections__collection_restaurants_form_html_erb__241531618330134577_70236416168820 RAISED /Users/kevinmuller/halalgems_backend/app/views/collections/_collection_restaurants_form.html.erb:8: syntax error, unexpected keyword_end, expecting ']'
  	 end 
  	    ^
/Users/kevinmuller/halalgems_backend/app/views/collections/_collection_restaurants_form.html.erb:13: syntax error, unexpected keyword_ensure, expecting keyword_end
/Users/kevinmuller/halalgems_backend/app/views/collections/_collection_restaurants_form.html.erb:15: syntax error, unexpected end-of-input, expecting keyword_end
Function body:           def _app_views_collections__collection_restaurants_form_html_erb__241531618330134577_70236416168820(local_assigns, output_buffer)
            _old_virtual_path, @virtual_path = @virtual_path, "collections/_collection_restaurants_form";_old_output_buffer = @output_buffer;collection_restaurants_form = local_assigns[:collection_restaurants_form];;@output_buffer = output_buffer || ActionView::OutputBuffer.new;@output_buffer.safe_concat('
<div class="form_add_new_collection">
  ');@output_buffer.append=  form_for(@collection, url: '/restaurants' , html: { id: "collection_restaurants" }) do |f| @output_buffer.safe_concat('
');@output_buffer.safe_concat('    ');@output_buffer.append=  select_tag(:restaurant_id) do @output_buffer.safe_concat('
');       [@restaurants.each do |r| 
@output_buffer.safe_concat('        ');@output_buffer.append= ( content_tag(:option, r.name, value: r.id) );@output_buffer.safe_concat('
');       end 
  	 end 
   end 
@output_buffer.safe_concat('</div>

');@output_buffer.to_s
          ensure
            @virtual_path, @output_buffer = _old_virtual_path, _old_output_buffer
          end

Backtrace: /Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_view/template.rb:297:in `module_eval'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_view/template.rb:297:in `compile'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_view/template.rb:244:in `block in compile!'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_view/template.rb:232:in `synchronize'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_view/template.rb:232:in `compile!'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_view/template.rb:144:in `block in render'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/activesupport-3.2.8/lib/active_support/notifications.rb:125:in `instrument'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_view/template.rb:143:in `render'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_view/renderer/partial_renderer.rb:265:in `render_partial'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_view/renderer/partial_renderer.rb:238:in `block in render'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_view/renderer/abstract_renderer.rb:38:in `block in instrument'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/activesupport-3.2.8/lib/active_support/notifications.rb:123:in `block in instrument'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/activesupport-3.2.8/lib/active_support/notifications/instrumenter.rb:20:in `instrument'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/activesupport-3.2.8/lib/active_support/notifications.rb:123:in `instrument'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_view/renderer/abstract_renderer.rb:38:in `instrument'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/newrelic_rpm-3.7.3.204/lib/new_relic/agent/instrumentation/rails3/action_controller.rb:175:in `block in instrument_with_newrelic'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/newrelic_rpm-3.7.3.204/lib/new_relic/agent/method_tracer.rb:281:in `trace_execution_scoped'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/newrelic_rpm-3.7.3.204/lib/new_relic/agent/instrumentation/rails3/action_controller.rb:174:in `instrument_with_newrelic'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_view/renderer/partial_renderer.rb:237:in `render'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_view/renderer/renderer.rb:41:in `render_partial'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_view/helpers/rendering_helper.rb:27:in `render'
/Users/kevinmuller/halalgems_backend/app/views/collections/admin_new_collection.html.erb:17:in `_app_views_collections_admin_new_collection_html_erb___3023385902521735371_70236351584060'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_view/template.rb:145:in `block in render'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/activesupport-3.2.8/lib/active_support/notifications.rb:125:in `instrument'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_view/template.rb:143:in `render'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_view/renderer/template_renderer.rb:47:in `block (2 levels) in render_template'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_view/renderer/abstract_renderer.rb:38:in `block in instrument'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/activesupport-3.2.8/lib/active_support/notifications.rb:123:in `block in instrument'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/activesupport-3.2.8/lib/active_support/notifications/instrumenter.rb:20:in `instrument'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/activesupport-3.2.8/lib/active_support/notifications.rb:123:in `instrument'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_view/renderer/abstract_renderer.rb:38:in `instrument'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_view/renderer/template_renderer.rb:46:in `block in render_template'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_view/renderer/template_renderer.rb:54:in `render_with_layout'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_view/renderer/template_renderer.rb:45:in `render_template'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_view/renderer/template_renderer.rb:18:in `render'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/newrelic_rpm-3.7.3.204/lib/new_relic/agent/instrumentation/rails3/action_controller.rb:160:in `block in render_with_newrelic'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/newrelic_rpm-3.7.3.204/lib/new_relic/agent/method_tracer.rb:281:in `trace_execution_scoped'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/newrelic_rpm-3.7.3.204/lib/new_relic/agent/instrumentation/rails3/action_controller.rb:159:in `render_with_newrelic'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_view/renderer/renderer.rb:36:in `render_template'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_view/renderer/renderer.rb:17:in `render'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/abstract_controller/rendering.rb:110:in `_render_template'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_controller/metal/streaming.rb:225:in `_render_template'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/abstract_controller/rendering.rb:103:in `render_to_body'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_controller/metal/renderers.rb:28:in `render_to_body'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_controller/metal/compatibility.rb:50:in `render_to_body'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/abstract_controller/rendering.rb:88:in `render'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_controller/metal/rendering.rb:16:in `render'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_controller/metal/instrumentation.rb:40:in `block (2 levels) in render'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/activesupport-3.2.8/lib/active_support/core_ext/benchmark.rb:5:in `block in ms'
/Users/kevinmuller/.rvm/rubies/ruby-2.2.4/lib/ruby/2.2.0/benchmark.rb:303:in `realtime'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/activesupport-3.2.8/lib/active_support/core_ext/benchmark.rb:5:in `ms'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_controller/metal/instrumentation.rb:40:in `block in render'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_controller/metal/instrumentation.rb:83:in `cleanup_view_runtime'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/activerecord-3.2.8/lib/active_record/railties/controller_runtime.rb:24:in `cleanup_view_runtime'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_controller/metal/instrumentation.rb:39:in `render'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/bundler/gems/remotipart-aadc29e996c3/lib/remotipart/render_overrides.rb:14:in `render_with_remotipart'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_controller/metal/implicit_render.rb:10:in `default_render'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_controller/metal/mime_responds.rb:196:in `respond_to'
/Users/kevinmuller/halalgems_backend/app/controllers/collections_controller.rb:55:in `admin_new_collection'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_controller/metal/implicit_render.rb:4:in `send_action'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/abstract_controller/base.rb:167:in `process_action'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_controller/metal/rendering.rb:10:in `process_action'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/abstract_controller/callbacks.rb:18:in `block in process_action'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/activesupport-3.2.8/lib/active_support/callbacks.rb:458:in `_run__1878201843038484176__process_action__477167353515410138__callbacks'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/activesupport-3.2.8/lib/active_support/callbacks.rb:405:in `__run_callback'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/activesupport-3.2.8/lib/active_support/callbacks.rb:385:in `_run_process_action_callbacks'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/activesupport-3.2.8/lib/active_support/callbacks.rb:81:in `run_callbacks'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/abstract_controller/callbacks.rb:17:in `process_action'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_controller/metal/rescue.rb:29:in `process_action'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_controller/metal/instrumentation.rb:30:in `block in process_action'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/activesupport-3.2.8/lib/active_support/notifications.rb:123:in `block in instrument'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/activesupport-3.2.8/lib/active_support/notifications/instrumenter.rb:20:in `instrument'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/activesupport-3.2.8/lib/active_support/notifications.rb:123:in `instrument'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_controller/metal/instrumentation.rb:29:in `process_action'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_controller/metal/params_wrapper.rb:207:in `process_action'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/activerecord-3.2.8/lib/active_record/railties/controller_runtime.rb:18:in `process_action'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/newrelic_rpm-3.7.3.204/lib/new_relic/agent/instrumentation/rails3/action_controller.rb:38:in `block in process_action'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/newrelic_rpm-3.7.3.204/lib/new_relic/agent/instrumentation/controller_instrumentation.rb:335:in `perform_action_with_newrelic_trace'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/newrelic_rpm-3.7.3.204/lib/new_relic/agent/instrumentation/rails3/action_controller.rb:37:in `process_action'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/abstract_controller/base.rb:121:in `process'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/abstract_controller/rendering.rb:45:in `process'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_controller/metal.rb:203:in `dispatch'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_controller/metal/rack_delegation.rb:14:in `dispatch'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_controller/metal.rb:246:in `block in action'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_dispatch/routing/route_set.rb:73:in `call'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_dispatch/routing/route_set.rb:73:in `dispatch'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_dispatch/routing/route_set.rb:36:in `call'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/journey-1.0.4/lib/journey/router.rb:68:in `block in call'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/journey-1.0.4/lib/journey/router.rb:56:in `each'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/journey-1.0.4/lib/journey/router.rb:56:in `call'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_dispatch/routing/route_set.rb:600:in `call'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/omniauth-1.1.4/lib/omniauth/strategy.rb:184:in `call!'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/omniauth-1.1.4/lib/omniauth/strategy.rb:164:in `call'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/newrelic_rpm-3.7.3.204/lib/new_relic/rack/error_collector.rb:55:in `call'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/newrelic_rpm-3.7.3.204/lib/new_relic/rack/agent_hooks.rb:32:in `call'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/newrelic_rpm-3.7.3.204/lib/new_relic/rack/browser_monitoring.rb:27:in `call'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/newrelic_rpm-3.7.3.204/lib/new_relic/rack/developer_mode.rb:45:in `call'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/galetahub-simple_captcha-0.1.5/lib/simple_captcha/middleware.rb:20:in `call'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/bundler/gems/client_side_validations-a6a515504520/lib/client_side_validations/middleware.rb:21:in `call'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/warden-1.1.1/lib/warden/manager.rb:35:in `block in call'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/warden-1.1.1/lib/warden/manager.rb:34:in `catch'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/warden-1.1.1/lib/warden/manager.rb:34:in `call'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_dispatch/middleware/best_standards_support.rb:17:in `call'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/rack-1.4.5/lib/rack/etag.rb:23:in `call'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/rack-1.4.5/lib/rack/conditionalget.rb:25:in `call'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_dispatch/middleware/head.rb:14:in `call'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/bundler/gems/remotipart-aadc29e996c3/lib/remotipart/middleware.rb:27:in `call'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_dispatch/middleware/params_parser.rb:21:in `call'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_dispatch/middleware/flash.rb:242:in `call'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/rack-1.4.5/lib/rack/session/abstract/id.rb:210:in `context'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/rack-1.4.5/lib/rack/session/abstract/id.rb:205:in `call'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_dispatch/middleware/cookies.rb:339:in `call'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/dragonfly-0.9.15/lib/dragonfly/cookie_monster.rb:9:in `call'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/activerecord-3.2.8/lib/active_record/query_cache.rb:64:in `call'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/activerecord-3.2.8/lib/active_record/connection_adapters/abstract/connection_pool.rb:473:in `call'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_dispatch/middleware/callbacks.rb:28:in `block in call'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/activesupport-3.2.8/lib/active_support/callbacks.rb:405:in `_run__1871245027803988066__call__4207201468600934469__callbacks'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/activesupport-3.2.8/lib/active_support/callbacks.rb:405:in `__run_callback'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/activesupport-3.2.8/lib/active_support/callbacks.rb:385:in `_run_call_callbacks'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/activesupport-3.2.8/lib/active_support/callbacks.rb:81:in `run_callbacks'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_dispatch/middleware/callbacks.rb:27:in `call'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_dispatch/middleware/reloader.rb:65:in `call'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_dispatch/middleware/remote_ip.rb:31:in `call'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_dispatch/middleware/debug_exceptions.rb:16:in `call'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_dispatch/middleware/show_exceptions.rb:56:in `call'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/railties-3.2.8/lib/rails/rack/logger.rb:26:in `call_app'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/railties-3.2.8/lib/rails/rack/logger.rb:16:in `call'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/quiet_assets-1.0.3/lib/quiet_assets.rb:23:in `call_with_quiet_assets'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_dispatch/middleware/request_id.rb:22:in `call'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/rack-1.4.5/lib/rack/methodoverride.rb:21:in `call'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/rack-1.4.5/lib/rack/runtime.rb:17:in `call'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/activesupport-3.2.8/lib/active_support/cache/strategy/local_cache.rb:72:in `call'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/rack-1.4.5/lib/rack/lock.rb:15:in `call'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_dispatch/middleware/static.rb:62:in `call'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/dragonfly-0.9.15/lib/dragonfly/middleware.rb:13:in `call'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/rack-cache-1.2/lib/rack/cache/context.rb:136:in `forward'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/rack-cache-1.2/lib/rack/cache/context.rb:245:in `fetch'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/rack-cache-1.2/lib/rack/cache/context.rb:185:in `lookup'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/rack-cache-1.2/lib/rack/cache/context.rb:66:in `call!'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/rack-cache-1.2/lib/rack/cache/context.rb:51:in `call'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/railties-3.2.8/lib/rails/engine.rb:479:in `call'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/railties-3.2.8/lib/rails/application.rb:223:in `call'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/rack-1.4.5/lib/rack/content_length.rb:14:in `call'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/railties-3.2.8/lib/rails/rack/log_tailer.rb:17:in `call'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/rack-1.4.5/lib/rack/handler/webrick.rb:59:in `service'
/Users/kevinmuller/.rvm/rubies/ruby-2.2.4/lib/ruby/2.2.0/webrick/httpserver.rb:138:in `service'
/Users/kevinmuller/.rvm/rubies/ruby-2.2.4/lib/ruby/2.2.0/webrick/httpserver.rb:94:in `run'
/Users/kevinmuller/.rvm/rubies/ruby-2.2.4/lib/ruby/2.2.0/webrick/server.rb:294:in `block in start_thread'
  Rendered collections/_collection_restaurants_form.html.erb (0.8ms)
  Rendered collections/admin_new_collection.html.erb within layouts/admin (7.6ms)
Completed 500 Internal Server Error in 16ms

ActionView::Template::Error (/Users/kevinmuller/halalgems_backend/app/views/collections/_collection_restaurants_form.html.erb:8: syntax error, unexpected keyword_end, expecting ']'
  	 end 
  	    ^
/Users/kevinmuller/halalgems_backend/app/views/collections/_collection_restaurants_form.html.erb:13: syntax error, unexpected keyword_ensure, expecting keyword_end
/Users/kevinmuller/halalgems_backend/app/views/collections/_collection_restaurants_form.html.erb:15: syntax error, unexpected end-of-input, expecting keyword_end):
    5:       <% [@restaurants.each do |r| -%>
    6:         <%= content_tag(:option, r.name, value: r.id) %>
    7:       <% end %>
    8:   	<% end %>
    9:   <% end %>
    10: </div>
  app/views/collections/admin_new_collection.html.erb:17:in `_app_views_collections_admin_new_collection_html_erb___3023385902521735371_70236351584060'
  app/controllers/collections_controller.rb:55:in `admin_new_collection'


  Rendered /Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_dispatch/middleware/templates/rescues/_trace.erb (1.3ms)
  Rendered /Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_dispatch/middleware/templates/rescues/_request_and_response.erb (1.3ms)
  Rendered /Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_dispatch/middleware/templates/rescues/template_error.erb within rescues/layout (42.4ms)


Started GET "/admin/collections/admin_new_collection" for 127.0.0.1 at 2016-01-18 04:22:23 +0100
Processing by CollectionsController#admin_new_collection as HTML
  [1m[36mUser Load (0.3ms)[0m  [1mSELECT `users`.* FROM `users` WHERE `users`.`id` = 1 LIMIT 1[0m
  Rendered collections/_collection_form.html.erb (10.5ms)
  Rendered collections/_collection_restaurants_form.html.erb (1.9ms)
  Rendered collections/admin_new_collection.html.erb within layouts/admin (15.6ms)
Completed 200 OK in 26ms (Views: 23.4ms | ActiveRecord: 0.3ms)


Started GET "/admin/collections/admin_new_collection" for 127.0.0.1 at 2016-01-18 04:22:44 +0100
Processing by CollectionsController#admin_new_collection as HTML
  [1m[35mUser Load (0.6ms)[0m  SELECT `users`.* FROM `users` WHERE `users`.`id` = 1 LIMIT 1
  [1m[36m (0.2ms)[0m  [1mSELECT COUNT(*) FROM `filter_types` WHERE (code = 'features')[0m
  [1m[35m (0.2ms)[0m  SELECT COUNT(*) FROM `filters` WHERE (code = 'offer')
  [1m[36mRestaurant Load (4.6ms)[0m  [1mSELECT `restaurants`.* FROM `restaurants` [0m
  Rendered collections/_collection_form.html.erb (7.9ms)
  Rendered collections/_collection_restaurants_form.html.erb (0.6ms)
  Rendered collections/admin_new_collection.html.erb within layouts/admin (40.5ms)
Completed 200 OK in 391ms (Views: 68.1ms | ActiveRecord: 15.8ms)


Started GET "/admin/restaurants" for 127.0.0.1 at 2016-01-18 04:23:07 +0100
Processing by RestaurantsController#index as HTML
  [1m[35mUser Load (0.3ms)[0m  SELECT `users`.* FROM `users` WHERE `users`.`id` = 1 LIMIT 1
  Rendered shared/_restaurant_manage_tabs.html.erb (1.8ms)
  Rendered restaurants/_condition_fields.html.erb (13.9ms)
  [1m[36mRestaurant Load (1.1ms)[0m  [1mSELECT `restaurants`.* FROM `restaurants` ORDER BY disabled ASC,created_at DESC LIMIT 12 OFFSET 0[0m
  [1m[35mPhoto Load (0.4ms)[0m  SELECT `photos`.* FROM `photos` WHERE (restaurant_id = 876 and cover = true and status = 1) LIMIT 1
  [1m[36mPhoto Load (0.3ms)[0m  [1mSELECT `photos`.* FROM `photos` WHERE `photos`.`restaurant_id` = 876 AND `photos`.`status` = 1 ORDER BY restaurant_id ASC, created_at DESC LIMIT 1[0m
  [1m[35mPhoto Load (0.3ms)[0m  SELECT `photos`.* FROM `photos` WHERE (restaurant_id = 851 and cover = true and status = 1) LIMIT 1
  [1m[36mPhoto Load (0.3ms)[0m  [1mSELECT `photos`.* FROM `photos` WHERE `photos`.`restaurant_id` = 851 AND `photos`.`status` = 1 ORDER BY restaurant_id ASC, created_at DESC LIMIT 1[0m
  [1m[35mPhoto Load (0.4ms)[0m  SELECT `photos`.* FROM `photos` WHERE (restaurant_id = 693 and cover = true and status = 1) LIMIT 1
  [1m[36mPhoto Load (0.3ms)[0m  [1mSELECT `photos`.* FROM `photos` WHERE `photos`.`restaurant_id` = 693 AND `photos`.`status` = 1 ORDER BY restaurant_id ASC, created_at DESC LIMIT 1[0m
  [1m[35mPhoto Load (0.3ms)[0m  SELECT `photos`.* FROM `photos` WHERE (restaurant_id = 686 and cover = true and status = 1) LIMIT 1
  [1m[36mPhoto Load (0.3ms)[0m  [1mSELECT `photos`.* FROM `photos` WHERE `photos`.`restaurant_id` = 686 AND `photos`.`status` = 1 ORDER BY restaurant_id ASC, created_at DESC LIMIT 1[0m
  [1m[35mPhoto Load (0.3ms)[0m  SELECT `photos`.* FROM `photos` WHERE (restaurant_id = 669 and cover = true and status = 1) LIMIT 1
  [1m[36mPhoto Load (0.3ms)[0m  [1mSELECT `photos`.* FROM `photos` WHERE `photos`.`restaurant_id` = 669 AND `photos`.`status` = 1 ORDER BY restaurant_id ASC, created_at DESC LIMIT 1[0m
  [1m[35mPhoto Load (0.3ms)[0m  SELECT `photos`.* FROM `photos` WHERE (restaurant_id = 251 and cover = true and status = 1) LIMIT 1
  [1m[36mPhoto Load (0.3ms)[0m  [1mSELECT `photos`.* FROM `photos` WHERE `photos`.`restaurant_id` = 251 AND `photos`.`status` = 1 ORDER BY restaurant_id ASC, created_at DESC LIMIT 1[0m
  [1m[35mPhoto Load (0.3ms)[0m  SELECT `photos`.* FROM `photos` WHERE (restaurant_id = 250 and cover = true and status = 1) LIMIT 1
  [1m[36mPhoto Load (0.3ms)[0m  [1mSELECT `photos`.* FROM `photos` WHERE `photos`.`restaurant_id` = 250 AND `photos`.`status` = 1 ORDER BY restaurant_id ASC, created_at DESC LIMIT 1[0m
  [1m[35mPhoto Load (0.3ms)[0m  SELECT `photos`.* FROM `photos` WHERE (restaurant_id = 237 and cover = true and status = 1) LIMIT 1
  [1m[36mPhoto Load (0.3ms)[0m  [1mSELECT `photos`.* FROM `photos` WHERE `photos`.`restaurant_id` = 237 AND `photos`.`status` = 1 ORDER BY restaurant_id ASC, created_at DESC LIMIT 1[0m
  [1m[35mPhoto Load (0.3ms)[0m  SELECT `photos`.* FROM `photos` WHERE (restaurant_id = 231 and cover = true and status = 1) LIMIT 1
  [1m[36mPhoto Load (0.3ms)[0m  [1mSELECT `photos`.* FROM `photos` WHERE `photos`.`restaurant_id` = 231 AND `photos`.`status` = 1 ORDER BY restaurant_id ASC, created_at DESC LIMIT 1[0m
  [1m[35mPhoto Load (0.3ms)[0m  SELECT `photos`.* FROM `photos` WHERE (restaurant_id = 222 and cover = true and status = 1) LIMIT 1
  [1m[36mPhoto Load (0.3ms)[0m  [1mSELECT `photos`.* FROM `photos` WHERE `photos`.`restaurant_id` = 222 AND `photos`.`status` = 1 ORDER BY restaurant_id ASC, created_at DESC LIMIT 1[0m
  [1m[35mPhoto Load (0.3ms)[0m  SELECT `photos`.* FROM `photos` WHERE (restaurant_id = 221 and cover = true and status = 1) LIMIT 1
  [1m[36mPhoto Load (0.3ms)[0m  [1mSELECT `photos`.* FROM `photos` WHERE `photos`.`restaurant_id` = 221 AND `photos`.`status` = 1 ORDER BY restaurant_id ASC, created_at DESC LIMIT 1[0m
  [1m[35mPhoto Load (0.3ms)[0m  SELECT `photos`.* FROM `photos` WHERE (restaurant_id = 216 and cover = true and status = 1) LIMIT 1
  [1m[36mPhoto Load (0.3ms)[0m  [1mSELECT `photos`.* FROM `photos` WHERE `photos`.`restaurant_id` = 216 AND `photos`.`status` = 1 ORDER BY restaurant_id ASC, created_at DESC LIMIT 1[0m
  [1m[35m (0.4ms)[0m  SELECT COUNT(*) FROM `restaurants` 
  Rendered restaurants/index.html.erb within layouts/admin (177.1ms)
Completed 200 OK in 244ms (Views: 224.6ms | ActiveRecord: 16.5ms)


Started GET "/admin/collections" for 127.0.0.1 at 2016-01-18 04:23:09 +0100
Processing by CollectionsController#index as HTML
  Rendered shared/_restaurant_manage_tabs.html.erb (0.7ms)
  [1m[36mCollection Load (0.4ms)[0m  [1mSELECT `collections`.* FROM `collections` ORDER BY name ASC, created_at DESC LIMIT 12 OFFSET 0[0m
  [1m[35mCollectionImage Load (0.2ms)[0m  SELECT `collection_images`.* FROM `collection_images` WHERE (collection_id = 3) LIMIT 1
  [1m[36mCollectionImage Load (0.4ms)[0m  [1mSELECT `collection_images`.* FROM `collection_images` WHERE (collection_id = 2) LIMIT 1[0m
  [1m[35m (0.2ms)[0m  SELECT COUNT(*) FROM `collections` 
  Rendered collections/index.erb within layouts/admin (42.9ms)
  [1m[36mUser Load (0.2ms)[0m  [1mSELECT `users`.* FROM `users` WHERE `users`.`id` = 1 LIMIT 1[0m
Completed 200 OK in 62ms (Views: 57.4ms | ActiveRecord: 3.3ms)


Started GET "/admin/collections/admin_new_collection" for 127.0.0.1 at 2016-01-18 04:23:10 +0100
Processing by CollectionsController#admin_new_collection as HTML
  [1m[35mUser Load (0.3ms)[0m  SELECT `users`.* FROM `users` WHERE `users`.`id` = 1 LIMIT 1
  [1m[36mRestaurant Load (4.4ms)[0m  [1mSELECT `restaurants`.* FROM `restaurants` [0m
  Rendered collections/_collection_form.html.erb (5.8ms)
  Rendered collections/_collection_restaurants_form.html.erb (0.3ms)
  Rendered collections/admin_new_collection.html.erb within layouts/admin (18.0ms)
Completed 200 OK in 92ms (Views: 36.2ms | ActiveRecord: 4.7ms)


Started GET "/admin/collections/admin_new_collection" for 127.0.0.1 at 2016-01-18 04:35:52 +0100
Processing by CollectionsController#admin_new_collection as HTML
  [1m[35mUser Load (0.3ms)[0m  SELECT `users`.* FROM `users` WHERE `users`.`id` = 1 LIMIT 1
  Rendered collections/_collection_form.html.erb (18.2ms)
  Rendered collections/_collection_restaurants_form.html.erb (0.6ms)
  Rendered collections/admin_new_collection.html.erb within layouts/admin (39.0ms)
Completed 200 OK in 205ms (Views: 65.8ms | ActiveRecord: 4.5ms)


Started GET "/admin/restaurants" for 127.0.0.1 at 2016-01-18 04:37:24 +0100
  [1m[36m (0.2ms)[0m  [1mSELECT COUNT(*) FROM `filter_types` WHERE (code = 'features')[0m
  [1m[35m (0.2ms)[0m  SELECT COUNT(*) FROM `filters` WHERE (code = 'offer')
Processing by RestaurantsController#index as HTML
  [1m[36mUser Load (0.2ms)[0m  [1mSELECT `users`.* FROM `users` WHERE `users`.`id` = 1 LIMIT 1[0m
  Rendered shared/_restaurant_manage_tabs.html.erb (0.8ms)
  Rendered restaurants/_condition_fields.html.erb (33.2ms)
  [1m[35mRestaurant Load (0.8ms)[0m  SELECT `restaurants`.* FROM `restaurants` ORDER BY disabled ASC,created_at DESC LIMIT 12 OFFSET 0
  [1m[36mPhoto Load (0.4ms)[0m  [1mSELECT `photos`.* FROM `photos` WHERE (restaurant_id = 876 and cover = true and status = 1) LIMIT 1[0m
  [1m[35mPhoto Load (0.3ms)[0m  SELECT `photos`.* FROM `photos` WHERE `photos`.`restaurant_id` = 876 AND `photos`.`status` = 1 ORDER BY restaurant_id ASC, created_at DESC LIMIT 1
  [1m[36mPhoto Load (0.3ms)[0m  [1mSELECT `photos`.* FROM `photos` WHERE (restaurant_id = 851 and cover = true and status = 1) LIMIT 1[0m
  [1m[35mPhoto Load (0.3ms)[0m  SELECT `photos`.* FROM `photos` WHERE `photos`.`restaurant_id` = 851 AND `photos`.`status` = 1 ORDER BY restaurant_id ASC, created_at DESC LIMIT 1
  [1m[36mPhoto Load (0.4ms)[0m  [1mSELECT `photos`.* FROM `photos` WHERE (restaurant_id = 693 and cover = true and status = 1) LIMIT 1[0m
  [1m[35mPhoto Load (0.3ms)[0m  SELECT `photos`.* FROM `photos` WHERE `photos`.`restaurant_id` = 693 AND `photos`.`status` = 1 ORDER BY restaurant_id ASC, created_at DESC LIMIT 1
  [1m[36mPhoto Load (0.3ms)[0m  [1mSELECT `photos`.* FROM `photos` WHERE (restaurant_id = 686 and cover = true and status = 1) LIMIT 1[0m
  [1m[35mPhoto Load (0.3ms)[0m  SELECT `photos`.* FROM `photos` WHERE `photos`.`restaurant_id` = 686 AND `photos`.`status` = 1 ORDER BY restaurant_id ASC, created_at DESC LIMIT 1
  [1m[36mPhoto Load (0.3ms)[0m  [1mSELECT `photos`.* FROM `photos` WHERE (restaurant_id = 669 and cover = true and status = 1) LIMIT 1[0m
  [1m[35mPhoto Load (0.3ms)[0m  SELECT `photos`.* FROM `photos` WHERE `photos`.`restaurant_id` = 669 AND `photos`.`status` = 1 ORDER BY restaurant_id ASC, created_at DESC LIMIT 1
  [1m[36mPhoto Load (0.3ms)[0m  [1mSELECT `photos`.* FROM `photos` WHERE (restaurant_id = 251 and cover = true and status = 1) LIMIT 1[0m
  [1m[35mPhoto Load (0.5ms)[0m  SELECT `photos`.* FROM `photos` WHERE `photos`.`restaurant_id` = 251 AND `photos`.`status` = 1 ORDER BY restaurant_id ASC, created_at DESC LIMIT 1
  [1m[36mPhoto Load (0.4ms)[0m  [1mSELECT `photos`.* FROM `photos` WHERE (restaurant_id = 250 and cover = true and status = 1) LIMIT 1[0m
  [1m[35mPhoto Load (0.3ms)[0m  SELECT `photos`.* FROM `photos` WHERE `photos`.`restaurant_id` = 250 AND `photos`.`status` = 1 ORDER BY restaurant_id ASC, created_at DESC LIMIT 1
  [1m[36mPhoto Load (0.3ms)[0m  [1mSELECT `photos`.* FROM `photos` WHERE (restaurant_id = 237 and cover = true and status = 1) LIMIT 1[0m
  [1m[35mPhoto Load (0.3ms)[0m  SELECT `photos`.* FROM `photos` WHERE `photos`.`restaurant_id` = 237 AND `photos`.`status` = 1 ORDER BY restaurant_id ASC, created_at DESC LIMIT 1
  [1m[36mPhoto Load (0.3ms)[0m  [1mSELECT `photos`.* FROM `photos` WHERE (restaurant_id = 231 and cover = true and status = 1) LIMIT 1[0m
  [1m[35mPhoto Load (0.3ms)[0m  SELECT `photos`.* FROM `photos` WHERE `photos`.`restaurant_id` = 231 AND `photos`.`status` = 1 ORDER BY restaurant_id ASC, created_at DESC LIMIT 1
  [1m[36mPhoto Load (0.3ms)[0m  [1mSELECT `photos`.* FROM `photos` WHERE (restaurant_id = 222 and cover = true and status = 1) LIMIT 1[0m
  [1m[35mPhoto Load (0.3ms)[0m  SELECT `photos`.* FROM `photos` WHERE `photos`.`restaurant_id` = 222 AND `photos`.`status` = 1 ORDER BY restaurant_id ASC, created_at DESC LIMIT 1
  [1m[36mPhoto Load (0.3ms)[0m  [1mSELECT `photos`.* FROM `photos` WHERE (restaurant_id = 221 and cover = true and status = 1) LIMIT 1[0m
  [1m[35mPhoto Load (0.3ms)[0m  SELECT `photos`.* FROM `photos` WHERE `photos`.`restaurant_id` = 221 AND `photos`.`status` = 1 ORDER BY restaurant_id ASC, created_at DESC LIMIT 1
  [1m[36mPhoto Load (0.3ms)[0m  [1mSELECT `photos`.* FROM `photos` WHERE (restaurant_id = 216 and cover = true and status = 1) LIMIT 1[0m
  [1m[35mPhoto Load (0.3ms)[0m  SELECT `photos`.* FROM `photos` WHERE `photos`.`restaurant_id` = 216 AND `photos`.`status` = 1 ORDER BY restaurant_id ASC, created_at DESC LIMIT 1
  [1m[36m (0.4ms)[0m  [1mSELECT COUNT(*) FROM `restaurants` [0m
  Rendered restaurants/index.html.erb within layouts/admin (196.0ms)
Completed 200 OK in 336ms (Views: 215.7ms | ActiveRecord: 15.5ms)


Started GET "/admin/restaurants/admin_new" for 127.0.0.1 at 2016-01-18 04:37:27 +0100
Processing by RestaurantsController#admin_new as HTML
  [1m[35mUser Load (0.4ms)[0m  SELECT `users`.* FROM `users` WHERE `users`.`id` = 1 LIMIT 1
  [1m[36m (1.1ms)[0m  [1mSELECT `filters`.id FROM `filters` INNER JOIN `filters_restaurants` ON `filters`.`id` = `filters_restaurants`.`filter_id` WHERE `filters_restaurants`.`restaurant_id` IS NULL[0m
  [1m[35mFilterType Load (0.2ms)[0m  SELECT `filter_types`.* FROM `filter_types` WHERE `filter_types`.`code` = 'hal_status' LIMIT 1
  [1m[36mFilterType Load (0.2ms)[0m  [1mSELECT `filter_types`.* FROM `filter_types` WHERE `filter_types`.`code` = 'price' LIMIT 1[0m
  [1m[35mFilterType Load (0.2ms)[0m  SELECT `filter_types`.* FROM `filter_types` WHERE `filter_types`.`code` = 'cuisine' LIMIT 1
  [1m[36mFilterType Load (0.3ms)[0m  [1mSELECT `filter_types`.* FROM `filter_types` WHERE `filter_types`.`code` = 'alcohol' LIMIT 1[0m
  [1m[35mFilterType Load (0.2ms)[0m  SELECT `filter_types`.* FROM `filter_types` WHERE `filter_types`.`code` = 'features' LIMIT 1
  Rendered restaurants/_googlemap.html.erb (0.1ms)
  [1m[36mFilter Load (0.3ms)[0m  [1mSELECT `filters`.* FROM `filters` WHERE `filters`.`filter_type_id` = 8[0m
  [1m[35mFilter Load (0.3ms)[0m  SELECT `filters`.* FROM `filters` WHERE `filters`.`filter_type_id` = 1 ORDER BY name ASC
  [1m[36mFilter Load (0.2ms)[0m  [1mSELECT `filters`.* FROM `filters` WHERE `filters`.`filter_type_id` = 4[0m
  [1m[35mFilter Load (0.2ms)[0m  SELECT `filters`.* FROM `filters` WHERE `filters`.`filter_type_id` = 6
  [1m[36mFilter Load (0.2ms)[0m  [1mSELECT `filters`.* FROM `filters` WHERE `filters`.`filter_type_id` = 11 AND (code != 'offer')[0m
  Rendered restaurants/_admin_form.html.erb (71.1ms)
  Rendered restaurants/_upload_menu.html.erb (3.3ms)
  Rendered restaurants/_upload_photos.html.erb (1.8ms)
  Rendered restaurants/admin_new.html.erb within layouts/admin (81.0ms)
Completed 200 OK in 193ms (Views: 86.6ms | ActiveRecord: 10.9ms)


Started GET "/admin/restaurants/admin_new" for 127.0.0.1 at 2016-01-18 04:37:27 +0100
Processing by RestaurantsController#admin_new as HTML
  [1m[35mUser Load (0.6ms)[0m  SELECT `users`.* FROM `users` WHERE `users`.`id` = 1 LIMIT 1
  [1m[36m (1.1ms)[0m  [1mSELECT `filters`.id FROM `filters` INNER JOIN `filters_restaurants` ON `filters`.`id` = `filters_restaurants`.`filter_id` WHERE `filters_restaurants`.`restaurant_id` IS NULL[0m
  [1m[35mFilterType Load (0.2ms)[0m  SELECT `filter_types`.* FROM `filter_types` WHERE `filter_types`.`code` = 'hal_status' LIMIT 1
  [1m[36mFilterType Load (0.1ms)[0m  [1mSELECT `filter_types`.* FROM `filter_types` WHERE `filter_types`.`code` = 'price' LIMIT 1[0m
  [1m[35mFilterType Load (0.1ms)[0m  SELECT `filter_types`.* FROM `filter_types` WHERE `filter_types`.`code` = 'cuisine' LIMIT 1
  [1m[36mFilterType Load (0.1ms)[0m  [1mSELECT `filter_types`.* FROM `filter_types` WHERE `filter_types`.`code` = 'alcohol' LIMIT 1[0m
  [1m[35mFilterType Load (0.1ms)[0m  SELECT `filter_types`.* FROM `filter_types` WHERE `filter_types`.`code` = 'features' LIMIT 1
  Rendered restaurants/_googlemap.html.erb (0.1ms)
  [1m[36mFilter Load (0.4ms)[0m  [1mSELECT `filters`.* FROM `filters` WHERE `filters`.`filter_type_id` = 8[0m
  [1m[35mFilter Load (0.2ms)[0m  SELECT `filters`.* FROM `filters` WHERE `filters`.`filter_type_id` = 1 ORDER BY name ASC
  [1m[36mFilter Load (0.1ms)[0m  [1mSELECT `filters`.* FROM `filters` WHERE `filters`.`filter_type_id` = 4[0m
  [1m[35mFilter Load (0.1ms)[0m  SELECT `filters`.* FROM `filters` WHERE `filters`.`filter_type_id` = 6
  [1m[36mFilter Load (0.1ms)[0m  [1mSELECT `filters`.* FROM `filters` WHERE `filters`.`filter_type_id` = 11 AND (code != 'offer')[0m
  Rendered restaurants/_admin_form.html.erb (45.0ms)
  Rendered restaurants/_upload_menu.html.erb (1.3ms)
  Rendered restaurants/_upload_photos.html.erb (0.8ms)
  Rendered restaurants/admin_new.html.erb within layouts/admin (49.8ms)
Completed 200 OK in 66ms (Views: 53.7ms | ActiveRecord: 3.3ms)


Started GET "/photos?r_id=" for 127.0.0.1 at 2016-01-18 04:37:29 +0100
Processing by PhotosController#index as JSON
  Parameters: {"r_id"=>""}
  [1m[35mRestaurant Load (1.8ms)[0m  SELECT `restaurants`.* FROM `restaurants` WHERE `restaurants`.`slug` = '' LIMIT 1
  [1m[36mRestaurant Load (0.5ms)[0m  [1mSELECT `restaurants`.* FROM `restaurants` WHERE `restaurants`.`id` = 0 LIMIT 1[0m
Completed 500 Internal Server Error in 6ms

ActiveRecord::RecordNotFound (Couldn't find Restaurant with id=):
  app/controllers/photos_controller.rb:11:in `index'


  Rendered /Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_dispatch/middleware/templates/rescues/_trace.erb (1.3ms)
  Rendered /Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_dispatch/middleware/templates/rescues/_request_and_response.erb (0.9ms)
  Rendered /Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_dispatch/middleware/templates/rescues/diagnostics.erb within rescues/layout (50.6ms)


Started GET "/admin/restaurants" for 127.0.0.1 at 2016-01-18 04:37:33 +0100
Processing by RestaurantsController#index as HTML
  [1m[35mUser Load (0.4ms)[0m  SELECT `users`.* FROM `users` WHERE `users`.`id` = 1 LIMIT 1
  Rendered shared/_restaurant_manage_tabs.html.erb (0.6ms)
  Rendered restaurants/_condition_fields.html.erb (8.2ms)
  [1m[36mRestaurant Load (2.0ms)[0m  [1mSELECT `restaurants`.* FROM `restaurants` ORDER BY disabled ASC,created_at DESC LIMIT 12 OFFSET 0[0m
  [1m[35mPhoto Load (0.4ms)[0m  SELECT `photos`.* FROM `photos` WHERE (restaurant_id = 876 and cover = true and status = 1) LIMIT 1
  [1m[36mPhoto Load (0.3ms)[0m  [1mSELECT `photos`.* FROM `photos` WHERE `photos`.`restaurant_id` = 876 AND `photos`.`status` = 1 ORDER BY restaurant_id ASC, created_at DESC LIMIT 1[0m
  [1m[35mPhoto Load (0.3ms)[0m  SELECT `photos`.* FROM `photos` WHERE (restaurant_id = 851 and cover = true and status = 1) LIMIT 1
  [1m[36mPhoto Load (0.3ms)[0m  [1mSELECT `photos`.* FROM `photos` WHERE `photos`.`restaurant_id` = 851 AND `photos`.`status` = 1 ORDER BY restaurant_id ASC, created_at DESC LIMIT 1[0m
  [1m[35mPhoto Load (0.3ms)[0m  SELECT `photos`.* FROM `photos` WHERE (restaurant_id = 693 and cover = true and status = 1) LIMIT 1
  [1m[36mPhoto Load (0.3ms)[0m  [1mSELECT `photos`.* FROM `photos` WHERE `photos`.`restaurant_id` = 693 AND `photos`.`status` = 1 ORDER BY restaurant_id ASC, created_at DESC LIMIT 1[0m
  [1m[35mPhoto Load (0.3ms)[0m  SELECT `photos`.* FROM `photos` WHERE (restaurant_id = 686 and cover = true and status = 1) LIMIT 1
  [1m[36mPhoto Load (0.4ms)[0m  [1mSELECT `photos`.* FROM `photos` WHERE `photos`.`restaurant_id` = 686 AND `photos`.`status` = 1 ORDER BY restaurant_id ASC, created_at DESC LIMIT 1[0m
  [1m[35mPhoto Load (0.3ms)[0m  SELECT `photos`.* FROM `photos` WHERE (restaurant_id = 669 and cover = true and status = 1) LIMIT 1
  [1m[36mPhoto Load (0.3ms)[0m  [1mSELECT `photos`.* FROM `photos` WHERE `photos`.`restaurant_id` = 669 AND `photos`.`status` = 1 ORDER BY restaurant_id ASC, created_at DESC LIMIT 1[0m
  [1m[35mPhoto Load (0.3ms)[0m  SELECT `photos`.* FROM `photos` WHERE (restaurant_id = 251 and cover = true and status = 1) LIMIT 1
  [1m[36mPhoto Load (0.3ms)[0m  [1mSELECT `photos`.* FROM `photos` WHERE `photos`.`restaurant_id` = 251 AND `photos`.`status` = 1 ORDER BY restaurant_id ASC, created_at DESC LIMIT 1[0m
  [1m[35mPhoto Load (0.3ms)[0m  SELECT `photos`.* FROM `photos` WHERE (restaurant_id = 250 and cover = true and status = 1) LIMIT 1
  [1m[36mPhoto Load (0.3ms)[0m  [1mSELECT `photos`.* FROM `photos` WHERE `photos`.`restaurant_id` = 250 AND `photos`.`status` = 1 ORDER BY restaurant_id ASC, created_at DESC LIMIT 1[0m
  [1m[35mPhoto Load (0.3ms)[0m  SELECT `photos`.* FROM `photos` WHERE (restaurant_id = 237 and cover = true and status = 1) LIMIT 1
  [1m[36mPhoto Load (0.3ms)[0m  [1mSELECT `photos`.* FROM `photos` WHERE `photos`.`restaurant_id` = 237 AND `photos`.`status` = 1 ORDER BY restaurant_id ASC, created_at DESC LIMIT 1[0m
  [1m[35mPhoto Load (2.2ms)[0m  SELECT `photos`.* FROM `photos` WHERE (restaurant_id = 231 and cover = true and status = 1) LIMIT 1
  [1m[36mPhoto Load (0.4ms)[0m  [1mSELECT `photos`.* FROM `photos` WHERE `photos`.`restaurant_id` = 231 AND `photos`.`status` = 1 ORDER BY restaurant_id ASC, created_at DESC LIMIT 1[0m
  [1m[35mPhoto Load (0.5ms)[0m  SELECT `photos`.* FROM `photos` WHERE (restaurant_id = 222 and cover = true and status = 1) LIMIT 1
  [1m[36mPhoto Load (2.0ms)[0m  [1mSELECT `photos`.* FROM `photos` WHERE `photos`.`restaurant_id` = 222 AND `photos`.`status` = 1 ORDER BY restaurant_id ASC, created_at DESC LIMIT 1[0m
  [1m[35mPhoto Load (1.0ms)[0m  SELECT `photos`.* FROM `photos` WHERE (restaurant_id = 221 and cover = true and status = 1) LIMIT 1
  [1m[36mPhoto Load (0.3ms)[0m  [1mSELECT `photos`.* FROM `photos` WHERE `photos`.`restaurant_id` = 221 AND `photos`.`status` = 1 ORDER BY restaurant_id ASC, created_at DESC LIMIT 1[0m
  [1m[35mPhoto Load (1.2ms)[0m  SELECT `photos`.* FROM `photos` WHERE (restaurant_id = 216 and cover = true and status = 1) LIMIT 1
  [1m[36mPhoto Load (0.4ms)[0m  [1mSELECT `photos`.* FROM `photos` WHERE `photos`.`restaurant_id` = 216 AND `photos`.`status` = 1 ORDER BY restaurant_id ASC, created_at DESC LIMIT 1[0m
  [1m[35m (0.4ms)[0m  SELECT COUNT(*) FROM `restaurants` 
  Rendered restaurants/index.html.erb within layouts/admin (240.5ms)
Completed 200 OK in 249ms (Views: 230.6ms | ActiveRecord: 15.7ms)


Started GET "/admin/collections" for 127.0.0.1 at 2016-01-18 04:37:34 +0100
Processing by CollectionsController#index as HTML
  Rendered shared/_restaurant_manage_tabs.html.erb (0.6ms)
  [1m[36mCollection Load (0.2ms)[0m  [1mSELECT `collections`.* FROM `collections` ORDER BY name ASC, created_at DESC LIMIT 12 OFFSET 0[0m
  [1m[35mCollectionImage Load (0.2ms)[0m  SELECT `collection_images`.* FROM `collection_images` WHERE (collection_id = 3) LIMIT 1
  [1m[36mCollectionImage Load (0.3ms)[0m  [1mSELECT `collection_images`.* FROM `collection_images` WHERE (collection_id = 2) LIMIT 1[0m
  [1m[35m (0.2ms)[0m  SELECT COUNT(*) FROM `collections` 
  Rendered collections/index.erb within layouts/admin (61.9ms)
  [1m[36mUser Load (0.3ms)[0m  [1mSELECT `users`.* FROM `users` WHERE `users`.`id` = 1 LIMIT 1[0m
Completed 200 OK in 96ms (Views: 89.7ms | ActiveRecord: 5.7ms)


Started GET "/admin/collections/admin_new_collection" for 127.0.0.1 at 2016-01-18 04:37:37 +0100
Processing by CollectionsController#admin_new_collection as HTML
  [1m[35mUser Load (0.3ms)[0m  SELECT `users`.* FROM `users` WHERE `users`.`id` = 1 LIMIT 1
  Rendered collections/_collection_form.html.erb (5.6ms)
  Rendered collections/_collection_restaurants_form.html.erb (0.3ms)
  Rendered collections/admin_new_collection.html.erb within layouts/admin (22.6ms)
Completed 200 OK in 40ms (Views: 37.3ms | ActiveRecord: 0.3ms)


Started GET "/admin/restaurants" for 127.0.0.1 at 2016-01-18 04:54:10 +0100
Processing by RestaurantsController#index as HTML
  [1m[36mUser Load (0.3ms)[0m  [1mSELECT `users`.* FROM `users` WHERE `users`.`id` = 1 LIMIT 1[0m
  Rendered shared/_restaurant_manage_tabs.html.erb (1.0ms)
  Rendered restaurants/_condition_fields.html.erb (10.2ms)
  [1m[35mRestaurant Load (0.8ms)[0m  SELECT `restaurants`.* FROM `restaurants` ORDER BY disabled ASC,created_at DESC LIMIT 12 OFFSET 0
  [1m[36mPhoto Load (0.4ms)[0m  [1mSELECT `photos`.* FROM `photos` WHERE (restaurant_id = 876 and cover = true and status = 1) LIMIT 1[0m
  [1m[35mPhoto Load (0.3ms)[0m  SELECT `photos`.* FROM `photos` WHERE `photos`.`restaurant_id` = 876 AND `photos`.`status` = 1 ORDER BY restaurant_id ASC, created_at DESC LIMIT 1
  [1m[36mPhoto Load (0.4ms)[0m  [1mSELECT `photos`.* FROM `photos` WHERE (restaurant_id = 851 and cover = true and status = 1) LIMIT 1[0m
  [1m[35mPhoto Load (0.3ms)[0m  SELECT `photos`.* FROM `photos` WHERE `photos`.`restaurant_id` = 851 AND `photos`.`status` = 1 ORDER BY restaurant_id ASC, created_at DESC LIMIT 1
  [1m[36mPhoto Load (0.3ms)[0m  [1mSELECT `photos`.* FROM `photos` WHERE (restaurant_id = 693 and cover = true and status = 1) LIMIT 1[0m
  [1m[35mPhoto Load (0.3ms)[0m  SELECT `photos`.* FROM `photos` WHERE `photos`.`restaurant_id` = 693 AND `photos`.`status` = 1 ORDER BY restaurant_id ASC, created_at DESC LIMIT 1
  [1m[36mPhoto Load (0.3ms)[0m  [1mSELECT `photos`.* FROM `photos` WHERE (restaurant_id = 686 and cover = true and status = 1) LIMIT 1[0m
  [1m[35mPhoto Load (0.3ms)[0m  SELECT `photos`.* FROM `photos` WHERE `photos`.`restaurant_id` = 686 AND `photos`.`status` = 1 ORDER BY restaurant_id ASC, created_at DESC LIMIT 1
  [1m[36mPhoto Load (0.3ms)[0m  [1mSELECT `photos`.* FROM `photos` WHERE (restaurant_id = 669 and cover = true and status = 1) LIMIT 1[0m
  [1m[35mPhoto Load (0.3ms)[0m  SELECT `photos`.* FROM `photos` WHERE `photos`.`restaurant_id` = 669 AND `photos`.`status` = 1 ORDER BY restaurant_id ASC, created_at DESC LIMIT 1
  [1m[36mPhoto Load (0.3ms)[0m  [1mSELECT `photos`.* FROM `photos` WHERE (restaurant_id = 251 and cover = true and status = 1) LIMIT 1[0m
  [1m[35mPhoto Load (0.3ms)[0m  SELECT `photos`.* FROM `photos` WHERE `photos`.`restaurant_id` = 251 AND `photos`.`status` = 1 ORDER BY restaurant_id ASC, created_at DESC LIMIT 1
  [1m[36mPhoto Load (0.4ms)[0m  [1mSELECT `photos`.* FROM `photos` WHERE (restaurant_id = 250 and cover = true and status = 1) LIMIT 1[0m
  [1m[35mPhoto Load (0.3ms)[0m  SELECT `photos`.* FROM `photos` WHERE `photos`.`restaurant_id` = 250 AND `photos`.`status` = 1 ORDER BY restaurant_id ASC, created_at DESC LIMIT 1
  [1m[36mPhoto Load (0.3ms)[0m  [1mSELECT `photos`.* FROM `photos` WHERE (restaurant_id = 237 and cover = true and status = 1) LIMIT 1[0m
  [1m[35mPhoto Load (0.3ms)[0m  SELECT `photos`.* FROM `photos` WHERE `photos`.`restaurant_id` = 237 AND `photos`.`status` = 1 ORDER BY restaurant_id ASC, created_at DESC LIMIT 1
  [1m[36mPhoto Load (0.3ms)[0m  [1mSELECT `photos`.* FROM `photos` WHERE (restaurant_id = 231 and cover = true and status = 1) LIMIT 1[0m
  [1m[35mPhoto Load (0.3ms)[0m  SELECT `photos`.* FROM `photos` WHERE `photos`.`restaurant_id` = 231 AND `photos`.`status` = 1 ORDER BY restaurant_id ASC, created_at DESC LIMIT 1
  [1m[36mPhoto Load (0.3ms)[0m  [1mSELECT `photos`.* FROM `photos` WHERE (restaurant_id = 222 and cover = true and status = 1) LIMIT 1[0m
  [1m[35mPhoto Load (0.3ms)[0m  SELECT `photos`.* FROM `photos` WHERE `photos`.`restaurant_id` = 222 AND `photos`.`status` = 1 ORDER BY restaurant_id ASC, created_at DESC LIMIT 1
  [1m[36mPhoto Load (0.3ms)[0m  [1mSELECT `photos`.* FROM `photos` WHERE (restaurant_id = 221 and cover = true and status = 1) LIMIT 1[0m
  [1m[35mPhoto Load (0.3ms)[0m  SELECT `photos`.* FROM `photos` WHERE `photos`.`restaurant_id` = 221 AND `photos`.`status` = 1 ORDER BY restaurant_id ASC, created_at DESC LIMIT 1
  [1m[36mPhoto Load (0.3ms)[0m  [1mSELECT `photos`.* FROM `photos` WHERE (restaurant_id = 216 and cover = true and status = 1) LIMIT 1[0m
  [1m[35mPhoto Load (0.3ms)[0m  SELECT `photos`.* FROM `photos` WHERE `photos`.`restaurant_id` = 216 AND `photos`.`status` = 1 ORDER BY restaurant_id ASC, created_at DESC LIMIT 1
  [1m[36m (0.4ms)[0m  [1mSELECT COUNT(*) FROM `restaurants` [0m
  Rendered restaurants/index.html.erb within layouts/admin (122.8ms)
Completed 200 OK in 146ms (Views: 134.0ms | ActiveRecord: 8.7ms)


Started GET "/admin/restaurants/admin_new" for 127.0.0.1 at 2016-01-18 04:54:13 +0100
Processing by RestaurantsController#admin_new as HTML
  [1m[35mUser Load (0.5ms)[0m  SELECT `users`.* FROM `users` WHERE `users`.`id` = 1 LIMIT 1
  [1m[36m (1.3ms)[0m  [1mSELECT `filters`.id FROM `filters` INNER JOIN `filters_restaurants` ON `filters`.`id` = `filters_restaurants`.`filter_id` WHERE `filters_restaurants`.`restaurant_id` IS NULL[0m
  [1m[35mFilterType Load (0.2ms)[0m  SELECT `filter_types`.* FROM `filter_types` WHERE `filter_types`.`code` = 'hal_status' LIMIT 1
  [1m[36mFilterType Load (0.2ms)[0m  [1mSELECT `filter_types`.* FROM `filter_types` WHERE `filter_types`.`code` = 'price' LIMIT 1[0m
  [1m[35mFilterType Load (0.2ms)[0m  SELECT `filter_types`.* FROM `filter_types` WHERE `filter_types`.`code` = 'cuisine' LIMIT 1
  [1m[36mFilterType Load (0.2ms)[0m  [1mSELECT `filter_types`.* FROM `filter_types` WHERE `filter_types`.`code` = 'alcohol' LIMIT 1[0m
  [1m[35mFilterType Load (0.2ms)[0m  SELECT `filter_types`.* FROM `filter_types` WHERE `filter_types`.`code` = 'features' LIMIT 1
  Rendered restaurants/_googlemap.html.erb (0.1ms)
  [1m[36mFilter Load (0.3ms)[0m  [1mSELECT `filters`.* FROM `filters` WHERE `filters`.`filter_type_id` = 8[0m
  [1m[35mFilter Load (0.2ms)[0m  SELECT `filters`.* FROM `filters` WHERE `filters`.`filter_type_id` = 1 ORDER BY name ASC
  [1m[36mFilter Load (0.2ms)[0m  [1mSELECT `filters`.* FROM `filters` WHERE `filters`.`filter_type_id` = 4[0m
  [1m[35mFilter Load (0.2ms)[0m  SELECT `filters`.* FROM `filters` WHERE `filters`.`filter_type_id` = 6
  [1m[36mFilter Load (0.2ms)[0m  [1mSELECT `filters`.* FROM `filters` WHERE `filters`.`filter_type_id` = 11 AND (code != 'offer')[0m
  Rendered restaurants/_admin_form.html.erb (41.6ms)
  Rendered restaurants/_upload_menu.html.erb (1.4ms)
  Rendered restaurants/_upload_photos.html.erb (0.8ms)
  Rendered restaurants/admin_new.html.erb within layouts/admin (47.7ms)
Completed 200 OK in 66ms (Views: 51.8ms | ActiveRecord: 3.6ms)


Started GET "/photos?r_id=" for 127.0.0.1 at 2016-01-18 04:54:16 +0100
Processing by PhotosController#index as JSON
  Parameters: {"r_id"=>""}
  [1m[35mRestaurant Load (1.8ms)[0m  SELECT `restaurants`.* FROM `restaurants` WHERE `restaurants`.`slug` = '' LIMIT 1
  [1m[36mRestaurant Load (0.3ms)[0m  [1mSELECT `restaurants`.* FROM `restaurants` WHERE `restaurants`.`id` = 0 LIMIT 1[0m
Completed 500 Internal Server Error in 5ms

ActiveRecord::RecordNotFound (Couldn't find Restaurant with id=):
  app/controllers/photos_controller.rb:11:in `index'


  Rendered /Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_dispatch/middleware/templates/rescues/_trace.erb (4.3ms)
  Rendered /Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_dispatch/middleware/templates/rescues/_request_and_response.erb (1.0ms)
  Rendered /Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_dispatch/middleware/templates/rescues/diagnostics.erb within rescues/layout (72.3ms)


Started GET "/admin/collections" for 127.0.0.1 at 2016-01-18 05:00:03 +0100
Processing by CollectionsController#index as HTML
  Rendered shared/_restaurant_manage_tabs.html.erb (0.8ms)
  [1m[35mCollection Load (0.3ms)[0m  SELECT `collections`.* FROM `collections` ORDER BY name ASC, created_at DESC LIMIT 12 OFFSET 0
  [1m[36mCollectionImage Load (0.2ms)[0m  [1mSELECT `collection_images`.* FROM `collection_images` WHERE (collection_id = 3) LIMIT 1[0m
  [1m[35mCollectionImage Load (0.2ms)[0m  SELECT `collection_images`.* FROM `collection_images` WHERE (collection_id = 2) LIMIT 1
  [1m[36m (0.2ms)[0m  [1mSELECT COUNT(*) FROM `collections` [0m
  Rendered collections/index.erb within layouts/admin (24.8ms)
  [1m[35mUser Load (0.3ms)[0m  SELECT `users`.* FROM `users` WHERE `users`.`id` = 1 LIMIT 1
Completed 200 OK in 57ms (Views: 55.4ms | ActiveRecord: 1.2ms)


Started GET "/admin/collections/admin_new_collection" for 127.0.0.1 at 2016-01-18 05:00:04 +0100
Processing by CollectionsController#admin_new_collection as HTML
  [1m[36mUser Load (0.4ms)[0m  [1mSELECT `users`.* FROM `users` WHERE `users`.`id` = 1 LIMIT 1[0m
  Rendered collections/_collection_form.html.erb (7.5ms)
  Rendered collections/_collection_restaurants_form.html.erb (0.7ms)
  Rendered collections/admin_new_collection.html.erb within layouts/admin (30.2ms)
Completed 200 OK in 62ms (Views: 58.6ms | ActiveRecord: 0.4ms)


Started GET "/admin/collections/admin_new_collection" for 127.0.0.1 at 2016-01-18 05:00:04 +0100
Processing by CollectionsController#admin_new_collection as HTML
  [1m[35mUser Load (0.2ms)[0m  SELECT `users`.* FROM `users` WHERE `users`.`id` = 1 LIMIT 1
  Rendered collections/_collection_form.html.erb (5.1ms)
  Rendered collections/_collection_restaurants_form.html.erb (0.3ms)
  Rendered collections/admin_new_collection.html.erb within layouts/admin (7.1ms)
Completed 200 OK in 15ms (Views: 12.6ms | ActiveRecord: 0.2ms)


Started GET "/admin/collections/admin_new_collection" for 127.0.0.1 at 2016-01-18 05:00:25 +0100
Processing by CollectionsController#admin_new_collection as HTML
  [1m[36mUser Load (0.3ms)[0m  [1mSELECT `users`.* FROM `users` WHERE `users`.`id` = 1 LIMIT 1[0m
  [1m[35m (0.2ms)[0m  SELECT COUNT(*) FROM `filter_types` WHERE (code = 'features')
  [1m[36m (0.2ms)[0m  [1mSELECT COUNT(*) FROM `filters` WHERE (code = 'offer')[0m
  [1m[35mRestaurant Load (3.8ms)[0m  SELECT `restaurants`.* FROM `restaurants` 
  Rendered collections/_collection_form.html.erb (7.6ms)
  Rendered collections/_collection_restaurants_form.html.erb (1.3ms)
  Rendered collections/admin_new_collection.html.erb within layouts/admin (11.5ms)
Completed 200 OK in 353ms (Views: 27.0ms | ActiveRecord: 14.7ms)


Started GET "/admin/collections/admin_new_collection" for 127.0.0.1 at 2016-01-18 05:00:38 +0100
Processing by CollectionsController#admin_new_collection as HTML
  [1m[36mUser Load (0.4ms)[0m  [1mSELECT `users`.* FROM `users` WHERE `users`.`id` = 1 LIMIT 1[0m
  [1m[35mRestaurant Load (4.1ms)[0m  SELECT `restaurants`.* FROM `restaurants` 
  Rendered collections/_collection_form.html.erb (4.9ms)
  Rendered collections/_collection_restaurants_form.html.erb (0.3ms)
  Rendered collections/admin_new_collection.html.erb within layouts/admin (6.9ms)
Completed 200 OK in 85ms (Views: 12.3ms | ActiveRecord: 4.5ms)


Started GET "/admin/collections/admin_new_collection" for 127.0.0.1 at 2016-01-18 05:01:07 +0100
Processing by CollectionsController#admin_new_collection as HTML
  [1m[36mUser Load (0.3ms)[0m  [1mSELECT `users`.* FROM `users` WHERE `users`.`id` = 1 LIMIT 1[0m
  [1m[35m (0.2ms)[0m  SELECT COUNT(*) FROM `filter_types` WHERE (code = 'features')
  [1m[36m (0.3ms)[0m  [1mSELECT COUNT(*) FROM `filters` WHERE (code = 'offer')[0m
  Rendered collections/_collection_form.html.erb (5.0ms)
  Rendered collections/_collection_restaurants_form.html.erb (0.3ms)
  Rendered collections/admin_new_collection.html.erb within layouts/admin (23.2ms)
Completed 200 OK in 228ms (Views: 55.1ms | ActiveRecord: 8.4ms)


Started GET "/admin/collections/admin_new_collection" for 127.0.0.1 at 2016-01-18 05:01:37 +0100
Processing by CollectionsController#admin_new_collection as HTML
  [1m[35mUser Load (0.4ms)[0m  SELECT `users`.* FROM `users` WHERE `users`.`id` = 1 LIMIT 1
  Rendered collections/_collection_form.html.erb (7.3ms)
  Rendered collections/_collection_restaurants_form.html.erb (0.2ms)
  Rendered collections/admin_new_collection.html.erb within layouts/admin (9.7ms)
Completed 200 OK in 19ms (Views: 16.0ms | ActiveRecord: 0.4ms)


Started GET "/admin/collections/admin_new_collection" for 127.0.0.1 at 2016-01-18 05:02:50 +0100
Processing by CollectionsController#admin_new_collection as HTML
  [1m[36mUser Load (0.2ms)[0m  [1mSELECT `users`.* FROM `users` WHERE `users`.`id` = 1 LIMIT 1[0m
  [1m[35m (0.2ms)[0m  SELECT COUNT(*) FROM `filter_types` WHERE (code = 'features')
  [1m[36m (0.2ms)[0m  [1mSELECT COUNT(*) FROM `filters` WHERE (code = 'offer')[0m
  [1m[35mRestaurant Load (3.6ms)[0m  SELECT `restaurants`.* FROM `restaurants` 
  Rendered collections/_collection_form.html.erb (9.3ms)
  Rendered collections/_collection_restaurants_form.html.erb (0.4ms)
  Rendered collections/admin_new_collection.html.erb within layouts/admin (11.9ms)
Completed 200 OK in 318ms (Views: 24.1ms | ActiveRecord: 13.8ms)


Started GET "/admin/collections/admin_new_collection" for 127.0.0.1 at 2016-01-18 05:04:45 +0100
Processing by CollectionsController#admin_new_collection as HTML
  [1m[36mUser Load (0.5ms)[0m  [1mSELECT `users`.* FROM `users` WHERE `users`.`id` = 1 LIMIT 1[0m
  [1m[35m (0.2ms)[0m  SELECT COUNT(*) FROM `filter_types` WHERE (code = 'features')
  [1m[36m (0.2ms)[0m  [1mSELECT COUNT(*) FROM `filters` WHERE (code = 'offer')[0m
  Rendered collections/_collection_form.html.erb (5.5ms)
  Rendered collections/_collection_restaurants_form.html.erb (0.3ms)
  Rendered collections/admin_new_collection.html.erb within layouts/admin (21.6ms)
Completed 200 OK in 315ms (Views: 46.5ms | ActiveRecord: 9.1ms)


Started GET "/admin/collections/admin_new_collection" for 127.0.0.1 at 2016-01-18 05:05:04 +0100
Processing by CollectionsController#admin_new_collection as HTML
  [1m[35mUser Load (0.3ms)[0m  SELECT `users`.* FROM `users` WHERE `users`.`id` = 1 LIMIT 1
  Rendered collections/_collection_form.html.erb (10.0ms)
  Rendered collections/_collection_restaurants_form.html.erb (0.7ms)
  Rendered collections/admin_new_collection.html.erb within layouts/admin (12.9ms)
Completed 200 OK in 22ms (Views: 19.8ms | ActiveRecord: 0.3ms)


Started GET "/admin/collections/admin_new_collection" for 127.0.0.1 at 2016-01-18 05:07:28 +0100
Processing by CollectionsController#admin_new_collection as HTML
  [1m[36mUser Load (0.2ms)[0m  [1mSELECT `users`.* FROM `users` WHERE `users`.`id` = 1 LIMIT 1[0m
  [1m[35m (0.2ms)[0m  SELECT COUNT(*) FROM `filter_types` WHERE (code = 'features')
  [1m[36m (0.2ms)[0m  [1mSELECT COUNT(*) FROM `filters` WHERE (code = 'offer')[0m
  [1m[35mRestaurant Load (3.9ms)[0m  SELECT `restaurants`.* FROM `restaurants` WHERE `restaurants`.`disabled` = 0
  Rendered collections/_collection_form.html.erb (4.9ms)
  Rendered collections/_collection_restaurants_form.html.erb (0.2ms)
  Rendered collections/admin_new_collection.html.erb within layouts/admin (6.7ms)
Completed 200 OK in 495ms (Views: 17.7ms | ActiveRecord: 14.6ms)


Started GET "/admin/collections/admin_new_collection" for 127.0.0.1 at 2016-01-18 05:07:59 +0100
Processing by CollectionsController#admin_new_collection as HTML
  [1m[36mUser Load (0.2ms)[0m  [1mSELECT `users`.* FROM `users` WHERE `users`.`id` = 1 LIMIT 1[0m
  [1m[35m (0.8ms)[0m  SELECT COUNT(*) FROM `filter_types` WHERE (code = 'features')
  [1m[36m (0.2ms)[0m  [1mSELECT COUNT(*) FROM `filters` WHERE (code = 'offer')[0m
  Rendered collections/_collection_form.html.erb (6.2ms)
  Rendered collections/_collection_restaurants_form.html.erb (0.4ms)
  Rendered collections/admin_new_collection.html.erb within layouts/admin (8.6ms)
Completed 200 OK in 231ms (Views: 22.2ms | ActiveRecord: 9.9ms)


Started GET "/admin/collections/admin_new_collection" for 127.0.0.1 at 2016-01-18 05:11:41 +0100
Processing by CollectionsController#admin_new_collection as HTML
  [1m[35mUser Load (0.4ms)[0m  SELECT `users`.* FROM `users` WHERE `users`.`id` = 1 LIMIT 1
  Rendered collections/_collection_form.html.erb (6.2ms)
  Rendered collections/_collection_restaurants_form.html.erb (4.2ms)
  Rendered collections/admin_new_collection.html.erb within layouts/admin (24.5ms)
Completed 200 OK in 65ms (Views: 62.5ms | ActiveRecord: 0.4ms)


Started GET "/admin/collections/admin_new_collection" for 127.0.0.1 at 2016-01-18 05:12:26 +0100
Processing by CollectionsController#admin_new_collection as HTML
  [1m[36mUser Load (0.3ms)[0m  [1mSELECT `users`.* FROM `users` WHERE `users`.`id` = 1 LIMIT 1[0m
  Rendered collections/_collection_form.html.erb (7.2ms)
  Rendered collections/_collection_restaurants_form.html.erb (1.0ms)
  Rendered collections/admin_new_collection.html.erb within layouts/admin (11.9ms)
Completed 200 OK in 23ms (Views: 20.0ms | ActiveRecord: 0.3ms)


Started GET "/admin/collections/admin_new_collection" for 127.0.0.1 at 2016-01-18 05:12:39 +0100
Processing by CollectionsController#admin_new_collection as HTML
  [1m[35mUser Load (0.4ms)[0m  SELECT `users`.* FROM `users` WHERE `users`.`id` = 1 LIMIT 1
  Rendered collections/_collection_form.html.erb (8.4ms)
  Rendered collections/_collection_restaurants_form.html.erb (0.9ms)
  Rendered collections/admin_new_collection.html.erb within layouts/admin (12.0ms)
Completed 200 OK in 23ms (Views: 19.8ms | ActiveRecord: 0.4ms)


Started GET "/admin/collections/admin_new_collection" for 127.0.0.1 at 2016-01-18 05:19:53 +0100
Processing by CollectionsController#admin_new_collection as HTML
  [1m[36mUser Load (0.2ms)[0m  [1mSELECT `users`.* FROM `users` WHERE `users`.`id` = 1 LIMIT 1[0m
  [1m[35m (0.2ms)[0m  SELECT COUNT(*) FROM `filter_types` WHERE (code = 'features')
  [1m[36m (0.2ms)[0m  [1mSELECT COUNT(*) FROM `filters` WHERE (code = 'offer')[0m
  [1m[35mRestaurant Load (3.9ms)[0m  SELECT `restaurants`.* FROM `restaurants` WHERE `restaurants`.`disabled` = 0
  Rendered collections/_collection_form.html.erb (5.0ms)
  Rendered collections/_collection_restaurants_form.html.erb (0.8ms)
  Rendered collections/admin_new_collection.html.erb within layouts/admin (22.8ms)
Completed 200 OK in 515ms (Views: 56.6ms | ActiveRecord: 15.0ms)


Started GET "/admin/collections/admin_new_collection" for 127.0.0.1 at 2016-01-18 05:20:14 +0100
Processing by CollectionsController#admin_new_collection as HTML
  [1m[36mUser Load (0.5ms)[0m  [1mSELECT `users`.* FROM `users` WHERE `users`.`id` = 1 LIMIT 1[0m
  [1m[35mRestaurant Load (6.6ms)[0m  SELECT `restaurants`.* FROM `restaurants` WHERE `restaurants`.`disabled` = 0
  Rendered collections/_collection_form.html.erb (4.4ms)
  Rendered collections/_collection_restaurants_form.html.erb (0.8ms)
  Rendered collections/admin_new_collection.html.erb within layouts/admin (17.2ms)
Completed 200 OK in 239ms (Views: 40.2ms | ActiveRecord: 7.1ms)


Started GET "/admin/collections/admin_new_collection" for 127.0.0.1 at 2016-01-18 05:21:27 +0100
Processing by CollectionsController#admin_new_collection as HTML
  [1m[36mUser Load (0.5ms)[0m  [1mSELECT `users`.* FROM `users` WHERE `users`.`id` = 1 LIMIT 1[0m
  [1m[35mRestaurant Load (8.5ms)[0m  SELECT `restaurants`.* FROM `restaurants` WHERE `restaurants`.`disabled` = 0
ERROR: compiling _app_views_collections_admin_new_collection_html_erb___3023385902521735371_70236417315880 RAISED /Users/kevinmuller/halalgems_backend/app/views/collections/admin_new_collection.html.erb:19: syntax error, unexpected tIDENTIFIER, expecting ')'
/Users/kevinmuller/halalgems_backend/app/views/collections/admin_new_collection.html.erb:24: unknown regexp options - dv
/Users/kevinmuller/halalgems_backend/app/views/collections/admin_new_collection.html.erb:25: syntax error, unexpected '<'
    </div>
     ^
/Users/kevinmuller/halalgems_backend/app/views/collections/admin_new_collection.html.erb:26: unknown regexp options - dv
/Users/kevinmuller/halalgems_backend/app/views/collections/admin_new_collection.html.erb:27: syntax error, unexpected '<'
</div>');@output_buffer.to_s
 ^
/Users/kevinmuller/halalgems_backend/app/views/collections/admin_new_collection.html.erb:27: unterminated regexp meets end of file
Function body:           def _app_views_collections_admin_new_collection_html_erb___3023385902521735371_70236417315880(local_assigns, output_buffer)
            _old_virtual_path, @virtual_path = @virtual_path, "collections/admin_new_collection";_old_output_buffer = @output_buffer;;@output_buffer = output_buffer || ActionView::OutputBuffer.new;@output_buffer.safe_concat('
<div class="edit-restaurant-admin"> <!-- css class needs to be changed -->
  <div class="">
    <div class="page-header color-blue-title">
      <h1>New Collection</h1>
    </div>
    <div class="page_content info">
      <ul class="nav nav-tabs">
        <li class="active"><a href="#tab1" data-toggle="tab">Info</a></li>
        <li class=""><a href="#tab2" data-toggle="tab">Restaurants</a></li>
      </ul>
      <div class="tab-content">
        <div class="tab-pane active edit_profile" id="tab1">
          ');@output_buffer.append= ( render 'collection_form' );@output_buffer.safe_concat('
');@output_buffer.safe_concat('        </div>
        <div class="tab-pane" id="tab2">
          ');@output_buffer.append= ( #render 'collection_restaurants_form', :restaurants => @restaurants );@output_buffer.safe_concat('
');@output_buffer.safe_concat('          ');@output_buffer.append=  select_tag(:restaurant_id) do @output_buffer.safe_concat('
');@output_buffer.safe_concat('            '); @restaurants.each do |r| ;@output_buffer.safe_concat('abc
              ');@output_buffer.append= ( content_tag(:option, r.name, value: r.id) );@output_buffer.safe_concat('
');             end 
           end 
@output_buffer.safe_concat('        </div>
      </div>
    </div>
  </div>
</div>');@output_buffer.to_s
          ensure
            @virtual_path, @output_buffer = _old_virtual_path, _old_output_buffer
          end

Backtrace: /Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_view/template.rb:297:in `module_eval'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_view/template.rb:297:in `compile'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_view/template.rb:244:in `block in compile!'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_view/template.rb:232:in `synchronize'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_view/template.rb:232:in `compile!'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_view/template.rb:144:in `block in render'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/activesupport-3.2.8/lib/active_support/notifications.rb:125:in `instrument'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_view/template.rb:143:in `render'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_view/renderer/template_renderer.rb:47:in `block (2 levels) in render_template'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_view/renderer/abstract_renderer.rb:38:in `block in instrument'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/activesupport-3.2.8/lib/active_support/notifications.rb:123:in `block in instrument'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/activesupport-3.2.8/lib/active_support/notifications/instrumenter.rb:20:in `instrument'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/activesupport-3.2.8/lib/active_support/notifications.rb:123:in `instrument'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_view/renderer/abstract_renderer.rb:38:in `instrument'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_view/renderer/template_renderer.rb:46:in `block in render_template'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_view/renderer/template_renderer.rb:54:in `render_with_layout'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_view/renderer/template_renderer.rb:45:in `render_template'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_view/renderer/template_renderer.rb:18:in `render'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/newrelic_rpm-3.7.3.204/lib/new_relic/agent/instrumentation/rails3/action_controller.rb:160:in `block in render_with_newrelic'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/newrelic_rpm-3.7.3.204/lib/new_relic/agent/method_tracer.rb:281:in `trace_execution_scoped'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/newrelic_rpm-3.7.3.204/lib/new_relic/agent/instrumentation/rails3/action_controller.rb:159:in `render_with_newrelic'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_view/renderer/renderer.rb:36:in `render_template'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_view/renderer/renderer.rb:17:in `render'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/abstract_controller/rendering.rb:110:in `_render_template'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_controller/metal/streaming.rb:225:in `_render_template'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/abstract_controller/rendering.rb:103:in `render_to_body'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_controller/metal/renderers.rb:28:in `render_to_body'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_controller/metal/compatibility.rb:50:in `render_to_body'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/abstract_controller/rendering.rb:88:in `render'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_controller/metal/rendering.rb:16:in `render'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_controller/metal/instrumentation.rb:40:in `block (2 levels) in render'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/activesupport-3.2.8/lib/active_support/core_ext/benchmark.rb:5:in `block in ms'
/Users/kevinmuller/.rvm/rubies/ruby-2.2.4/lib/ruby/2.2.0/benchmark.rb:303:in `realtime'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/activesupport-3.2.8/lib/active_support/core_ext/benchmark.rb:5:in `ms'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_controller/metal/instrumentation.rb:40:in `block in render'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_controller/metal/instrumentation.rb:83:in `cleanup_view_runtime'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/activerecord-3.2.8/lib/active_record/railties/controller_runtime.rb:24:in `cleanup_view_runtime'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_controller/metal/instrumentation.rb:39:in `render'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/bundler/gems/remotipart-aadc29e996c3/lib/remotipart/render_overrides.rb:14:in `render_with_remotipart'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_controller/metal/implicit_render.rb:10:in `default_render'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_controller/metal/mime_responds.rb:196:in `respond_to'
/Users/kevinmuller/halalgems_backend/app/controllers/collections_controller.rb:56:in `admin_new_collection'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_controller/metal/implicit_render.rb:4:in `send_action'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/abstract_controller/base.rb:167:in `process_action'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_controller/metal/rendering.rb:10:in `process_action'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/abstract_controller/callbacks.rb:18:in `block in process_action'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/activesupport-3.2.8/lib/active_support/callbacks.rb:458:in `_run__1878201843038484176__process_action__477167353515410138__callbacks'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/activesupport-3.2.8/lib/active_support/callbacks.rb:405:in `__run_callback'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/activesupport-3.2.8/lib/active_support/callbacks.rb:385:in `_run_process_action_callbacks'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/activesupport-3.2.8/lib/active_support/callbacks.rb:81:in `run_callbacks'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/abstract_controller/callbacks.rb:17:in `process_action'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_controller/metal/rescue.rb:29:in `process_action'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_controller/metal/instrumentation.rb:30:in `block in process_action'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/activesupport-3.2.8/lib/active_support/notifications.rb:123:in `block in instrument'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/activesupport-3.2.8/lib/active_support/notifications/instrumenter.rb:20:in `instrument'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/activesupport-3.2.8/lib/active_support/notifications.rb:123:in `instrument'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_controller/metal/instrumentation.rb:29:in `process_action'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_controller/metal/params_wrapper.rb:207:in `process_action'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/activerecord-3.2.8/lib/active_record/railties/controller_runtime.rb:18:in `process_action'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/newrelic_rpm-3.7.3.204/lib/new_relic/agent/instrumentation/rails3/action_controller.rb:38:in `block in process_action'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/newrelic_rpm-3.7.3.204/lib/new_relic/agent/instrumentation/controller_instrumentation.rb:335:in `perform_action_with_newrelic_trace'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/newrelic_rpm-3.7.3.204/lib/new_relic/agent/instrumentation/rails3/action_controller.rb:37:in `process_action'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/abstract_controller/base.rb:121:in `process'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/abstract_controller/rendering.rb:45:in `process'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_controller/metal.rb:203:in `dispatch'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_controller/metal/rack_delegation.rb:14:in `dispatch'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_controller/metal.rb:246:in `block in action'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_dispatch/routing/route_set.rb:73:in `call'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_dispatch/routing/route_set.rb:73:in `dispatch'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_dispatch/routing/route_set.rb:36:in `call'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/journey-1.0.4/lib/journey/router.rb:68:in `block in call'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/journey-1.0.4/lib/journey/router.rb:56:in `each'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/journey-1.0.4/lib/journey/router.rb:56:in `call'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_dispatch/routing/route_set.rb:600:in `call'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/omniauth-1.1.4/lib/omniauth/strategy.rb:184:in `call!'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/omniauth-1.1.4/lib/omniauth/strategy.rb:164:in `call'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/newrelic_rpm-3.7.3.204/lib/new_relic/rack/error_collector.rb:55:in `call'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/newrelic_rpm-3.7.3.204/lib/new_relic/rack/agent_hooks.rb:32:in `call'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/newrelic_rpm-3.7.3.204/lib/new_relic/rack/browser_monitoring.rb:27:in `call'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/newrelic_rpm-3.7.3.204/lib/new_relic/rack/developer_mode.rb:45:in `call'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/galetahub-simple_captcha-0.1.5/lib/simple_captcha/middleware.rb:20:in `call'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/bundler/gems/client_side_validations-a6a515504520/lib/client_side_validations/middleware.rb:21:in `call'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/warden-1.1.1/lib/warden/manager.rb:35:in `block in call'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/warden-1.1.1/lib/warden/manager.rb:34:in `catch'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/warden-1.1.1/lib/warden/manager.rb:34:in `call'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_dispatch/middleware/best_standards_support.rb:17:in `call'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/rack-1.4.5/lib/rack/etag.rb:23:in `call'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/rack-1.4.5/lib/rack/conditionalget.rb:25:in `call'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_dispatch/middleware/head.rb:14:in `call'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/bundler/gems/remotipart-aadc29e996c3/lib/remotipart/middleware.rb:27:in `call'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_dispatch/middleware/params_parser.rb:21:in `call'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_dispatch/middleware/flash.rb:242:in `call'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/rack-1.4.5/lib/rack/session/abstract/id.rb:210:in `context'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/rack-1.4.5/lib/rack/session/abstract/id.rb:205:in `call'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_dispatch/middleware/cookies.rb:339:in `call'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/dragonfly-0.9.15/lib/dragonfly/cookie_monster.rb:9:in `call'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/activerecord-3.2.8/lib/active_record/query_cache.rb:64:in `call'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/activerecord-3.2.8/lib/active_record/connection_adapters/abstract/connection_pool.rb:473:in `call'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_dispatch/middleware/callbacks.rb:28:in `block in call'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/activesupport-3.2.8/lib/active_support/callbacks.rb:405:in `_run__1871245027803988066__call__4207201468600934469__callbacks'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/activesupport-3.2.8/lib/active_support/callbacks.rb:405:in `__run_callback'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/activesupport-3.2.8/lib/active_support/callbacks.rb:385:in `_run_call_callbacks'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/activesupport-3.2.8/lib/active_support/callbacks.rb:81:in `run_callbacks'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_dispatch/middleware/callbacks.rb:27:in `call'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_dispatch/middleware/reloader.rb:65:in `call'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_dispatch/middleware/remote_ip.rb:31:in `call'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_dispatch/middleware/debug_exceptions.rb:16:in `call'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_dispatch/middleware/show_exceptions.rb:56:in `call'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/railties-3.2.8/lib/rails/rack/logger.rb:26:in `call_app'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/railties-3.2.8/lib/rails/rack/logger.rb:16:in `call'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/quiet_assets-1.0.3/lib/quiet_assets.rb:23:in `call_with_quiet_assets'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_dispatch/middleware/request_id.rb:22:in `call'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/rack-1.4.5/lib/rack/methodoverride.rb:21:in `call'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/rack-1.4.5/lib/rack/runtime.rb:17:in `call'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/activesupport-3.2.8/lib/active_support/cache/strategy/local_cache.rb:72:in `call'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/rack-1.4.5/lib/rack/lock.rb:15:in `call'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_dispatch/middleware/static.rb:62:in `call'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/dragonfly-0.9.15/lib/dragonfly/middleware.rb:13:in `call'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/rack-cache-1.2/lib/rack/cache/context.rb:136:in `forward'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/rack-cache-1.2/lib/rack/cache/context.rb:245:in `fetch'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/rack-cache-1.2/lib/rack/cache/context.rb:185:in `lookup'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/rack-cache-1.2/lib/rack/cache/context.rb:66:in `call!'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/rack-cache-1.2/lib/rack/cache/context.rb:51:in `call'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/railties-3.2.8/lib/rails/engine.rb:479:in `call'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/railties-3.2.8/lib/rails/application.rb:223:in `call'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/rack-1.4.5/lib/rack/content_length.rb:14:in `call'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/railties-3.2.8/lib/rails/rack/log_tailer.rb:17:in `call'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/rack-1.4.5/lib/rack/handler/webrick.rb:59:in `service'
/Users/kevinmuller/.rvm/rubies/ruby-2.2.4/lib/ruby/2.2.0/webrick/httpserver.rb:138:in `service'
/Users/kevinmuller/.rvm/rubies/ruby-2.2.4/lib/ruby/2.2.0/webrick/httpserver.rb:94:in `run'
/Users/kevinmuller/.rvm/rubies/ruby-2.2.4/lib/ruby/2.2.0/webrick/server.rb:294:in `block in start_thread'
  Rendered collections/admin_new_collection.html.erb within layouts/admin (0.8ms)
Completed 500 Internal Server Error in 230ms

ActionView::Template::Error (/Users/kevinmuller/halalgems_backend/app/views/collections/admin_new_collection.html.erb:19: syntax error, unexpected tIDENTIFIER, expecting ')'
/Users/kevinmuller/halalgems_backend/app/views/collections/admin_new_collection.html.erb:24: unknown regexp options - dv
/Users/kevinmuller/halalgems_backend/app/views/collections/admin_new_collection.html.erb:25: syntax error, unexpected '<'
    </div>
     ^
/Users/kevinmuller/halalgems_backend/app/views/collections/admin_new_collection.html.erb:26: unknown regexp options - dv
/Users/kevinmuller/halalgems_backend/app/views/collections/admin_new_collection.html.erb:27: syntax error, unexpected '<'
</div>');@output_buffer.to_s
 ^
/Users/kevinmuller/halalgems_backend/app/views/collections/admin_new_collection.html.erb:27: unterminated regexp meets end of file):
    16:         <div class="tab-pane" id="tab2">
    17:           <%= #render 'collection_restaurants_form', :restaurants => @restaurants %>
    18:           <%= select_tag(:restaurant_id) do %>
    19:             <% @restaurants.each do |r| %>abc
    20:               <%= content_tag(:option, r.name, value: r.id) %>
    21:             <% end %>
    22:           <% end %>
  app/controllers/collections_controller.rb:56:in `admin_new_collection'


  Rendered /Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_dispatch/middleware/templates/rescues/_trace.erb (1.2ms)
  Rendered /Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_dispatch/middleware/templates/rescues/_request_and_response.erb (0.9ms)
  Rendered /Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_dispatch/middleware/templates/rescues/template_error.erb within rescues/layout (43.0ms)


Started GET "/admin/collections/admin_new_collection" for 127.0.0.1 at 2016-01-18 05:22:07 +0100
Processing by CollectionsController#admin_new_collection as HTML
  [1m[36mUser Load (0.5ms)[0m  [1mSELECT `users`.* FROM `users` WHERE `users`.`id` = 1 LIMIT 1[0m
  [1m[35mRestaurant Load (6.7ms)[0m  SELECT `restaurants`.* FROM `restaurants` WHERE `restaurants`.`disabled` = 0
  Rendered collections/_collection_form.html.erb (5.0ms)
  Rendered collections/admin_new_collection.html.erb within layouts/admin (14.6ms)
Completed 200 OK in 216ms (Views: 21.3ms | ActiveRecord: 7.2ms)


Started GET "/admin/collections/admin_new_collection" for 127.0.0.1 at 2016-01-18 05:22:33 +0100
Processing by CollectionsController#admin_new_collection as HTML
  [1m[36mUser Load (0.6ms)[0m  [1mSELECT `users`.* FROM `users` WHERE `users`.`id` = 1 LIMIT 1[0m
  [1m[35mRestaurant Load (5.3ms)[0m  SELECT `restaurants`.* FROM `restaurants` WHERE `restaurants`.`disabled` = 0
  Rendered collections/_collection_form.html.erb (4.3ms)
  Rendered collections/admin_new_collection.html.erb within layouts/admin (5.9ms)
Completed 200 OK in 210ms (Views: 11.1ms | ActiveRecord: 5.9ms)


Started GET "/admin/collections/admin_new_collection" for 127.0.0.1 at 2016-01-18 05:23:12 +0100
Processing by CollectionsController#admin_new_collection as HTML
  [1m[36mUser Load (0.4ms)[0m  [1mSELECT `users`.* FROM `users` WHERE `users`.`id` = 1 LIMIT 1[0m
  [1m[35mRestaurant Load (6.9ms)[0m  SELECT `restaurants`.* FROM `restaurants` WHERE `restaurants`.`disabled` = 0
  Rendered collections/_collection_form.html.erb (4.7ms)
  Rendered collections/_collection_restaurants_form.html.erb (0.8ms)
  Rendered collections/admin_new_collection.html.erb within layouts/admin (7.5ms)
Completed 200 OK in 193ms (Views: 12.8ms | ActiveRecord: 7.3ms)


Started GET "/admin/collections/admin_new_collection" for 127.0.0.1 at 2016-01-18 05:23:28 +0100
Processing by CollectionsController#admin_new_collection as HTML
  [1m[36mUser Load (0.2ms)[0m  [1mSELECT `users`.* FROM `users` WHERE `users`.`id` = 1 LIMIT 1[0m
  [1m[35mRestaurant Load (3.7ms)[0m  SELECT `restaurants`.* FROM `restaurants` WHERE `restaurants`.`disabled` = 0
  Rendered collections/_collection_form.html.erb (4.8ms)
  Rendered collections/_collection_restaurants_form.html.erb (1.1ms)
  Rendered collections/admin_new_collection.html.erb within layouts/admin (20.0ms)
Completed 200 OK in 210ms (Views: 25.7ms | ActiveRecord: 3.9ms)


Started GET "/admin/collections/admin_new_collection" for 127.0.0.1 at 2016-01-18 05:24:14 +0100
Processing by CollectionsController#admin_new_collection as HTML
  [1m[36mUser Load (0.8ms)[0m  [1mSELECT `users`.* FROM `users` WHERE `users`.`id` = 1 LIMIT 1[0m
  [1m[35mRestaurant Load (3.8ms)[0m  SELECT `restaurants`.* FROM `restaurants` WHERE `restaurants`.`disabled` = 0
  Rendered collections/_collection_form.html.erb (7.0ms)
  Rendered collections/_collection_restaurants_form.html.erb (1.0ms)
  Rendered collections/admin_new_collection.html.erb within layouts/admin (20.4ms)
Completed 200 OK in 304ms (Views: 53.4ms | ActiveRecord: 4.6ms)


Started GET "/admin/collections/admin_new_collection" for 127.0.0.1 at 2016-01-18 05:24:53 +0100
Processing by CollectionsController#admin_new_collection as HTML
  [1m[36mUser Load (0.4ms)[0m  [1mSELECT `users`.* FROM `users` WHERE `users`.`id` = 1 LIMIT 1[0m
  [1m[35mRestaurant Load (6.9ms)[0m  SELECT `restaurants`.* FROM `restaurants` WHERE `restaurants`.`disabled` = 0
  Rendered collections/_collection_form.html.erb (5.1ms)
  Rendered collections/_collection_restaurants_form.html.erb (0.6ms)
  Rendered collections/admin_new_collection.html.erb within layouts/admin (7.9ms)
Completed 200 OK in 213ms (Views: 14.5ms | ActiveRecord: 7.4ms)


Started GET "/admin/collections/admin_new_collection" for 127.0.0.1 at 2016-01-18 05:25:07 +0100
Processing by CollectionsController#admin_new_collection as HTML
  [1m[36mUser Load (0.3ms)[0m  [1mSELECT `users`.* FROM `users` WHERE `users`.`id` = 1 LIMIT 1[0m
  [1m[35mRestaurant Load (6.6ms)[0m  SELECT `restaurants`.* FROM `restaurants` WHERE `restaurants`.`disabled` = 0
  Rendered collections/_collection_form.html.erb (4.7ms)
  Rendered collections/_collection_restaurants_form.html.erb (0.1ms)
  Rendered collections/admin_new_collection.html.erb within layouts/admin (6.4ms)
Completed 200 OK in 205ms (Views: 11.6ms | ActiveRecord: 7.0ms)


Started GET "/admin/collections/admin_new_collection" for 127.0.0.1 at 2016-01-18 05:25:11 +0100
Processing by CollectionsController#admin_new_collection as HTML
  [1m[36mUser Load (0.3ms)[0m  [1mSELECT `users`.* FROM `users` WHERE `users`.`id` = 1 LIMIT 1[0m
  [1m[35mRestaurant Load (7.0ms)[0m  SELECT `restaurants`.* FROM `restaurants` WHERE `restaurants`.`disabled` = 0
  Rendered collections/_collection_form.html.erb (5.7ms)
  Rendered collections/_collection_restaurants_form.html.erb (0.6ms)
  Rendered collections/admin_new_collection.html.erb within layouts/admin (8.2ms)
Completed 200 OK in 234ms (Views: 15.0ms | ActiveRecord: 7.3ms)


Started GET "/admin/collections/admin_new_collection" for 127.0.0.1 at 2016-01-18 05:25:48 +0100
Processing by CollectionsController#admin_new_collection as HTML
  [1m[36mUser Load (0.2ms)[0m  [1mSELECT `users`.* FROM `users` WHERE `users`.`id` = 1 LIMIT 1[0m
  [1m[35mRestaurant Load (3.6ms)[0m  SELECT `restaurants`.* FROM `restaurants` WHERE `restaurants`.`disabled` = 0
  Rendered collections/_collection_form.html.erb (5.5ms)
  Rendered collections/_collection_restaurants_form.html.erb (1.0ms)
  Rendered collections/admin_new_collection.html.erb within layouts/admin (18.8ms)
Completed 200 OK in 248ms (Views: 42.0ms | ActiveRecord: 3.9ms)


Started GET "/admin/collections/admin_new_collection" for 127.0.0.1 at 2016-01-18 05:26:08 +0100
Processing by CollectionsController#admin_new_collection as HTML
  [1m[36mUser Load (0.3ms)[0m  [1mSELECT `users`.* FROM `users` WHERE `users`.`id` = 1 LIMIT 1[0m
  [1m[35mRestaurant Load (4.0ms)[0m  SELECT `restaurants`.* FROM `restaurants` WHERE `restaurants`.`disabled` = 0
  Rendered collections/_collection_form.html.erb (11.9ms)
  Rendered collections/_collection_restaurants_form.html.erb (1.4ms)
  Rendered collections/admin_new_collection.html.erb within layouts/admin (20.9ms)
Completed 200 OK in 474ms (Views: 30.9ms | ActiveRecord: 4.3ms)


Started GET "/admin/collections/admin_new_collection" for 127.0.0.1 at 2016-01-18 05:28:20 +0100
Processing by CollectionsController#admin_new_collection as HTML
  [1m[36mUser Load (0.3ms)[0m  [1mSELECT `users`.* FROM `users` WHERE `users`.`id` = 1 LIMIT 1[0m
  [1m[35mRestaurant Load (4.4ms)[0m  SELECT `restaurants`.* FROM `restaurants` WHERE `restaurants`.`disabled` = 0
  Rendered collections/_collection_form.html.erb (4.9ms)
  Rendered collections/_collection_restaurants_form.html.erb (4.1ms)
  Rendered collections/admin_new_collection.html.erb within layouts/admin (21.4ms)
Completed 200 OK in 273ms (Views: 42.9ms | ActiveRecord: 4.7ms)


Started GET "/admin/collections/admin_new_collection" for 127.0.0.1 at 2016-01-18 05:28:47 +0100
Processing by CollectionsController#admin_new_collection as HTML
  [1m[36mUser Load (0.5ms)[0m  [1mSELECT `users`.* FROM `users` WHERE `users`.`id` = 1 LIMIT 1[0m
  [1m[35mRestaurant Load (4.4ms)[0m  SELECT `restaurants`.* FROM `restaurants` WHERE `restaurants`.`disabled` = 0
  Rendered collections/_collection_form.html.erb (6.1ms)
  Rendered collections/_collection_restaurants_form.html.erb (4.6ms)
  Rendered collections/admin_new_collection.html.erb within layouts/admin (12.5ms)
Completed 200 OK in 200ms (Views: 17.9ms | ActiveRecord: 4.9ms)


Started GET "/admin/collections/admin_new_collection" for 127.0.0.1 at 2016-01-18 05:29:08 +0100
Processing by CollectionsController#admin_new_collection as HTML
  [1m[36mUser Load (0.4ms)[0m  [1mSELECT `users`.* FROM `users` WHERE `users`.`id` = 1 LIMIT 1[0m
  [1m[35mRestaurant Load (6.4ms)[0m  SELECT `restaurants`.* FROM `restaurants` WHERE `restaurants`.`disabled` = 0
  Rendered collections/_collection_form.html.erb (5.5ms)
ERROR: compiling _app_views_collections__collection_restaurants_form_html_erb__241531618330134577_70236351225620 RAISED /Users/kevinmuller/halalgems_backend/app/views/collections/_collection_restaurants_form.html.erb:14: syntax error, unexpected keyword_ensure, expecting keyword_end
/Users/kevinmuller/halalgems_backend/app/views/collections/_collection_restaurants_form.html.erb:16: syntax error, unexpected end-of-input, expecting keyword_end
Function body:           def _app_views_collections__collection_restaurants_form_html_erb__241531618330134577_70236351225620(local_assigns, output_buffer)
            _old_virtual_path, @virtual_path = @virtual_path, "collections/_collection_restaurants_form";_old_output_buffer = @output_buffer;collection_restaurants_form = local_assigns[:collection_restaurants_form];;@output_buffer = output_buffer || ActionView::OutputBuffer.new;@output_buffer.safe_concat('
<div class="form_add_new_collection">
  ');@output_buffer.append=  form_for(@collection, url: '/restaurants' , html: { id: "collection_restaurants" }) do |f| @output_buffer.safe_concat('
');   @restaurants.each do |r| 
@output_buffer.safe_concat('    ');@output_buffer.append=  select_tag(:restaurant_id) do @output_buffer.safe_concat('
');       @restaurants.each do |r|         
@output_buffer.safe_concat('        ');@output_buffer.append= ( r.name );@output_buffer.safe_concat('
');       end 
  	 end 
   end 
@output_buffer.safe_concat('</div>

');@output_buffer.to_s
          ensure
            @virtual_path, @output_buffer = _old_virtual_path, _old_output_buffer
          end

Backtrace: /Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_view/template.rb:297:in `module_eval'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_view/template.rb:297:in `compile'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_view/template.rb:244:in `block in compile!'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_view/template.rb:232:in `synchronize'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_view/template.rb:232:in `compile!'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_view/template.rb:144:in `block in render'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/activesupport-3.2.8/lib/active_support/notifications.rb:125:in `instrument'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_view/template.rb:143:in `render'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_view/renderer/partial_renderer.rb:265:in `render_partial'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_view/renderer/partial_renderer.rb:238:in `block in render'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_view/renderer/abstract_renderer.rb:38:in `block in instrument'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/activesupport-3.2.8/lib/active_support/notifications.rb:123:in `block in instrument'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/activesupport-3.2.8/lib/active_support/notifications/instrumenter.rb:20:in `instrument'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/activesupport-3.2.8/lib/active_support/notifications.rb:123:in `instrument'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_view/renderer/abstract_renderer.rb:38:in `instrument'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/newrelic_rpm-3.7.3.204/lib/new_relic/agent/instrumentation/rails3/action_controller.rb:175:in `block in instrument_with_newrelic'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/newrelic_rpm-3.7.3.204/lib/new_relic/agent/method_tracer.rb:281:in `trace_execution_scoped'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/newrelic_rpm-3.7.3.204/lib/new_relic/agent/instrumentation/rails3/action_controller.rb:174:in `instrument_with_newrelic'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_view/renderer/partial_renderer.rb:237:in `render'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_view/renderer/renderer.rb:41:in `render_partial'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_view/helpers/rendering_helper.rb:27:in `render'
/Users/kevinmuller/halalgems_backend/app/views/collections/admin_new_collection.html.erb:17:in `_app_views_collections_admin_new_collection_html_erb___3023385902521735371_70236385891800'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_view/template.rb:145:in `block in render'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/activesupport-3.2.8/lib/active_support/notifications.rb:125:in `instrument'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_view/template.rb:143:in `render'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_view/renderer/template_renderer.rb:47:in `block (2 levels) in render_template'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_view/renderer/abstract_renderer.rb:38:in `block in instrument'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/activesupport-3.2.8/lib/active_support/notifications.rb:123:in `block in instrument'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/activesupport-3.2.8/lib/active_support/notifications/instrumenter.rb:20:in `instrument'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/activesupport-3.2.8/lib/active_support/notifications.rb:123:in `instrument'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_view/renderer/abstract_renderer.rb:38:in `instrument'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_view/renderer/template_renderer.rb:46:in `block in render_template'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_view/renderer/template_renderer.rb:54:in `render_with_layout'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_view/renderer/template_renderer.rb:45:in `render_template'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_view/renderer/template_renderer.rb:18:in `render'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/newrelic_rpm-3.7.3.204/lib/new_relic/agent/instrumentation/rails3/action_controller.rb:160:in `block in render_with_newrelic'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/newrelic_rpm-3.7.3.204/lib/new_relic/agent/method_tracer.rb:281:in `trace_execution_scoped'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/newrelic_rpm-3.7.3.204/lib/new_relic/agent/instrumentation/rails3/action_controller.rb:159:in `render_with_newrelic'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_view/renderer/renderer.rb:36:in `render_template'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_view/renderer/renderer.rb:17:in `render'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/abstract_controller/rendering.rb:110:in `_render_template'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_controller/metal/streaming.rb:225:in `_render_template'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/abstract_controller/rendering.rb:103:in `render_to_body'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_controller/metal/renderers.rb:28:in `render_to_body'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_controller/metal/compatibility.rb:50:in `render_to_body'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/abstract_controller/rendering.rb:88:in `render'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_controller/metal/rendering.rb:16:in `render'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_controller/metal/instrumentation.rb:40:in `block (2 levels) in render'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/activesupport-3.2.8/lib/active_support/core_ext/benchmark.rb:5:in `block in ms'
/Users/kevinmuller/.rvm/rubies/ruby-2.2.4/lib/ruby/2.2.0/benchmark.rb:303:in `realtime'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/activesupport-3.2.8/lib/active_support/core_ext/benchmark.rb:5:in `ms'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_controller/metal/instrumentation.rb:40:in `block in render'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_controller/metal/instrumentation.rb:83:in `cleanup_view_runtime'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/activerecord-3.2.8/lib/active_record/railties/controller_runtime.rb:24:in `cleanup_view_runtime'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_controller/metal/instrumentation.rb:39:in `render'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/bundler/gems/remotipart-aadc29e996c3/lib/remotipart/render_overrides.rb:14:in `render_with_remotipart'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_controller/metal/implicit_render.rb:10:in `default_render'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_controller/metal/mime_responds.rb:196:in `respond_to'
/Users/kevinmuller/halalgems_backend/app/controllers/collections_controller.rb:56:in `admin_new_collection'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_controller/metal/implicit_render.rb:4:in `send_action'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/abstract_controller/base.rb:167:in `process_action'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_controller/metal/rendering.rb:10:in `process_action'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/abstract_controller/callbacks.rb:18:in `block in process_action'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/activesupport-3.2.8/lib/active_support/callbacks.rb:458:in `_run__1878201843038484176__process_action__477167353515410138__callbacks'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/activesupport-3.2.8/lib/active_support/callbacks.rb:405:in `__run_callback'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/activesupport-3.2.8/lib/active_support/callbacks.rb:385:in `_run_process_action_callbacks'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/activesupport-3.2.8/lib/active_support/callbacks.rb:81:in `run_callbacks'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/abstract_controller/callbacks.rb:17:in `process_action'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_controller/metal/rescue.rb:29:in `process_action'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_controller/metal/instrumentation.rb:30:in `block in process_action'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/activesupport-3.2.8/lib/active_support/notifications.rb:123:in `block in instrument'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/activesupport-3.2.8/lib/active_support/notifications/instrumenter.rb:20:in `instrument'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/activesupport-3.2.8/lib/active_support/notifications.rb:123:in `instrument'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_controller/metal/instrumentation.rb:29:in `process_action'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_controller/metal/params_wrapper.rb:207:in `process_action'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/activerecord-3.2.8/lib/active_record/railties/controller_runtime.rb:18:in `process_action'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/newrelic_rpm-3.7.3.204/lib/new_relic/agent/instrumentation/rails3/action_controller.rb:38:in `block in process_action'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/newrelic_rpm-3.7.3.204/lib/new_relic/agent/instrumentation/controller_instrumentation.rb:335:in `perform_action_with_newrelic_trace'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/newrelic_rpm-3.7.3.204/lib/new_relic/agent/instrumentation/rails3/action_controller.rb:37:in `process_action'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/abstract_controller/base.rb:121:in `process'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/abstract_controller/rendering.rb:45:in `process'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_controller/metal.rb:203:in `dispatch'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_controller/metal/rack_delegation.rb:14:in `dispatch'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_controller/metal.rb:246:in `block in action'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_dispatch/routing/route_set.rb:73:in `call'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_dispatch/routing/route_set.rb:73:in `dispatch'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_dispatch/routing/route_set.rb:36:in `call'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/journey-1.0.4/lib/journey/router.rb:68:in `block in call'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/journey-1.0.4/lib/journey/router.rb:56:in `each'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/journey-1.0.4/lib/journey/router.rb:56:in `call'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_dispatch/routing/route_set.rb:600:in `call'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/omniauth-1.1.4/lib/omniauth/strategy.rb:184:in `call!'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/omniauth-1.1.4/lib/omniauth/strategy.rb:164:in `call'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/newrelic_rpm-3.7.3.204/lib/new_relic/rack/error_collector.rb:55:in `call'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/newrelic_rpm-3.7.3.204/lib/new_relic/rack/agent_hooks.rb:32:in `call'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/newrelic_rpm-3.7.3.204/lib/new_relic/rack/browser_monitoring.rb:27:in `call'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/newrelic_rpm-3.7.3.204/lib/new_relic/rack/developer_mode.rb:45:in `call'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/galetahub-simple_captcha-0.1.5/lib/simple_captcha/middleware.rb:20:in `call'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/bundler/gems/client_side_validations-a6a515504520/lib/client_side_validations/middleware.rb:21:in `call'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/warden-1.1.1/lib/warden/manager.rb:35:in `block in call'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/warden-1.1.1/lib/warden/manager.rb:34:in `catch'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/warden-1.1.1/lib/warden/manager.rb:34:in `call'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_dispatch/middleware/best_standards_support.rb:17:in `call'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/rack-1.4.5/lib/rack/etag.rb:23:in `call'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/rack-1.4.5/lib/rack/conditionalget.rb:25:in `call'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_dispatch/middleware/head.rb:14:in `call'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/bundler/gems/remotipart-aadc29e996c3/lib/remotipart/middleware.rb:27:in `call'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_dispatch/middleware/params_parser.rb:21:in `call'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_dispatch/middleware/flash.rb:242:in `call'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/rack-1.4.5/lib/rack/session/abstract/id.rb:210:in `context'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/rack-1.4.5/lib/rack/session/abstract/id.rb:205:in `call'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_dispatch/middleware/cookies.rb:339:in `call'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/dragonfly-0.9.15/lib/dragonfly/cookie_monster.rb:9:in `call'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/activerecord-3.2.8/lib/active_record/query_cache.rb:64:in `call'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/activerecord-3.2.8/lib/active_record/connection_adapters/abstract/connection_pool.rb:473:in `call'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_dispatch/middleware/callbacks.rb:28:in `block in call'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/activesupport-3.2.8/lib/active_support/callbacks.rb:405:in `_run__1871245027803988066__call__4207201468600934469__callbacks'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/activesupport-3.2.8/lib/active_support/callbacks.rb:405:in `__run_callback'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/activesupport-3.2.8/lib/active_support/callbacks.rb:385:in `_run_call_callbacks'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/activesupport-3.2.8/lib/active_support/callbacks.rb:81:in `run_callbacks'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_dispatch/middleware/callbacks.rb:27:in `call'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_dispatch/middleware/reloader.rb:65:in `call'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_dispatch/middleware/remote_ip.rb:31:in `call'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_dispatch/middleware/debug_exceptions.rb:16:in `call'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_dispatch/middleware/show_exceptions.rb:56:in `call'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/railties-3.2.8/lib/rails/rack/logger.rb:26:in `call_app'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/railties-3.2.8/lib/rails/rack/logger.rb:16:in `call'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/quiet_assets-1.0.3/lib/quiet_assets.rb:23:in `call_with_quiet_assets'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_dispatch/middleware/request_id.rb:22:in `call'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/rack-1.4.5/lib/rack/methodoverride.rb:21:in `call'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/rack-1.4.5/lib/rack/runtime.rb:17:in `call'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/activesupport-3.2.8/lib/active_support/cache/strategy/local_cache.rb:72:in `call'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/rack-1.4.5/lib/rack/lock.rb:15:in `call'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_dispatch/middleware/static.rb:62:in `call'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/dragonfly-0.9.15/lib/dragonfly/middleware.rb:13:in `call'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/rack-cache-1.2/lib/rack/cache/context.rb:136:in `forward'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/rack-cache-1.2/lib/rack/cache/context.rb:245:in `fetch'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/rack-cache-1.2/lib/rack/cache/context.rb:185:in `lookup'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/rack-cache-1.2/lib/rack/cache/context.rb:66:in `call!'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/rack-cache-1.2/lib/rack/cache/context.rb:51:in `call'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/railties-3.2.8/lib/rails/engine.rb:479:in `call'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/railties-3.2.8/lib/rails/application.rb:223:in `call'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/rack-1.4.5/lib/rack/content_length.rb:14:in `call'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/railties-3.2.8/lib/rails/rack/log_tailer.rb:17:in `call'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/rack-1.4.5/lib/rack/handler/webrick.rb:59:in `service'
/Users/kevinmuller/.rvm/rubies/ruby-2.2.4/lib/ruby/2.2.0/webrick/httpserver.rb:138:in `service'
/Users/kevinmuller/.rvm/rubies/ruby-2.2.4/lib/ruby/2.2.0/webrick/httpserver.rb:94:in `run'
/Users/kevinmuller/.rvm/rubies/ruby-2.2.4/lib/ruby/2.2.0/webrick/server.rb:294:in `block in start_thread'
  Rendered collections/_collection_restaurants_form.html.erb (0.7ms)
  Rendered collections/admin_new_collection.html.erb within layouts/admin (7.8ms)
Completed 500 Internal Server Error in 223ms

ActionView::Template::Error (/Users/kevinmuller/halalgems_backend/app/views/collections/_collection_restaurants_form.html.erb:14: syntax error, unexpected keyword_ensure, expecting keyword_end
/Users/kevinmuller/halalgems_backend/app/views/collections/_collection_restaurants_form.html.erb:16: syntax error, unexpected end-of-input, expecting keyword_end):
    11: </div>
  app/views/collections/admin_new_collection.html.erb:17:in `_app_views_collections_admin_new_collection_html_erb___3023385902521735371_70236385891800'
  app/controllers/collections_controller.rb:56:in `admin_new_collection'


  Rendered /Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_dispatch/middleware/templates/rescues/_trace.erb (1.4ms)
  Rendered /Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_dispatch/middleware/templates/rescues/_request_and_response.erb (0.9ms)
  Rendered /Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_dispatch/middleware/templates/rescues/template_error.erb within rescues/layout (42.9ms)


Started GET "/admin/collections/admin_new_collection" for 127.0.0.1 at 2016-01-18 05:29:22 +0100
Processing by CollectionsController#admin_new_collection as HTML
  [1m[36mUser Load (0.3ms)[0m  [1mSELECT `users`.* FROM `users` WHERE `users`.`id` = 1 LIMIT 1[0m
  [1m[35mRestaurant Load (3.5ms)[0m  SELECT `restaurants`.* FROM `restaurants` WHERE `restaurants`.`disabled` = 0
  Rendered collections/_collection_form.html.erb (3.8ms)
ERROR: compiling _app_views_collections__collection_restaurants_form_html_erb__241531618330134577_70236170039300 RAISED /Users/kevinmuller/halalgems_backend/app/views/collections/_collection_restaurants_form.html.erb:14: syntax error, unexpected keyword_ensure, expecting keyword_end
/Users/kevinmuller/halalgems_backend/app/views/collections/_collection_restaurants_form.html.erb:16: syntax error, unexpected end-of-input, expecting keyword_end
Function body:           def _app_views_collections__collection_restaurants_form_html_erb__241531618330134577_70236170039300(local_assigns, output_buffer)
            _old_virtual_path, @virtual_path = @virtual_path, "collections/_collection_restaurants_form";_old_output_buffer = @output_buffer;collection_restaurants_form = local_assigns[:collection_restaurants_form];;@output_buffer = output_buffer || ActionView::OutputBuffer.new;@output_buffer.safe_concat('
<div class="form_add_new_collection">
  ');@output_buffer.append=  form_for(@collection, url: '/restaurants' , html: { id: "collection_restaurants" }) do |f| @output_buffer.safe_concat('
');   @restaurants.each do |r| 
@output_buffer.safe_concat('    ');@output_buffer.append=  select_tag(:restaurant_id) do @output_buffer.safe_concat('
');       @restaurants.each do |r| 
@output_buffer.safe_concat('        ');@output_buffer.append= ( content_tag(:option, r.name, value: r.id) );@output_buffer.safe_concat('
');       end 
  	 end 
   end 
@output_buffer.safe_concat('</div>

');@output_buffer.to_s
          ensure
            @virtual_path, @output_buffer = _old_virtual_path, _old_output_buffer
          end

Backtrace: /Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_view/template.rb:297:in `module_eval'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_view/template.rb:297:in `compile'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_view/template.rb:244:in `block in compile!'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_view/template.rb:232:in `synchronize'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_view/template.rb:232:in `compile!'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_view/template.rb:144:in `block in render'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/activesupport-3.2.8/lib/active_support/notifications.rb:125:in `instrument'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_view/template.rb:143:in `render'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_view/renderer/partial_renderer.rb:265:in `render_partial'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_view/renderer/partial_renderer.rb:238:in `block in render'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_view/renderer/abstract_renderer.rb:38:in `block in instrument'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/activesupport-3.2.8/lib/active_support/notifications.rb:123:in `block in instrument'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/activesupport-3.2.8/lib/active_support/notifications/instrumenter.rb:20:in `instrument'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/activesupport-3.2.8/lib/active_support/notifications.rb:123:in `instrument'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_view/renderer/abstract_renderer.rb:38:in `instrument'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/newrelic_rpm-3.7.3.204/lib/new_relic/agent/instrumentation/rails3/action_controller.rb:175:in `block in instrument_with_newrelic'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/newrelic_rpm-3.7.3.204/lib/new_relic/agent/method_tracer.rb:281:in `trace_execution_scoped'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/newrelic_rpm-3.7.3.204/lib/new_relic/agent/instrumentation/rails3/action_controller.rb:174:in `instrument_with_newrelic'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_view/renderer/partial_renderer.rb:237:in `render'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_view/renderer/renderer.rb:41:in `render_partial'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_view/helpers/rendering_helper.rb:27:in `render'
/Users/kevinmuller/halalgems_backend/app/views/collections/admin_new_collection.html.erb:17:in `_app_views_collections_admin_new_collection_html_erb___3023385902521735371_70236385891800'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_view/template.rb:145:in `block in render'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/activesupport-3.2.8/lib/active_support/notifications.rb:125:in `instrument'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_view/template.rb:143:in `render'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_view/renderer/template_renderer.rb:47:in `block (2 levels) in render_template'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_view/renderer/abstract_renderer.rb:38:in `block in instrument'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/activesupport-3.2.8/lib/active_support/notifications.rb:123:in `block in instrument'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/activesupport-3.2.8/lib/active_support/notifications/instrumenter.rb:20:in `instrument'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/activesupport-3.2.8/lib/active_support/notifications.rb:123:in `instrument'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_view/renderer/abstract_renderer.rb:38:in `instrument'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_view/renderer/template_renderer.rb:46:in `block in render_template'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_view/renderer/template_renderer.rb:54:in `render_with_layout'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_view/renderer/template_renderer.rb:45:in `render_template'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_view/renderer/template_renderer.rb:18:in `render'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/newrelic_rpm-3.7.3.204/lib/new_relic/agent/instrumentation/rails3/action_controller.rb:160:in `block in render_with_newrelic'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/newrelic_rpm-3.7.3.204/lib/new_relic/agent/method_tracer.rb:281:in `trace_execution_scoped'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/newrelic_rpm-3.7.3.204/lib/new_relic/agent/instrumentation/rails3/action_controller.rb:159:in `render_with_newrelic'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_view/renderer/renderer.rb:36:in `render_template'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_view/renderer/renderer.rb:17:in `render'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/abstract_controller/rendering.rb:110:in `_render_template'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_controller/metal/streaming.rb:225:in `_render_template'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/abstract_controller/rendering.rb:103:in `render_to_body'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_controller/metal/renderers.rb:28:in `render_to_body'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_controller/metal/compatibility.rb:50:in `render_to_body'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/abstract_controller/rendering.rb:88:in `render'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_controller/metal/rendering.rb:16:in `render'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_controller/metal/instrumentation.rb:40:in `block (2 levels) in render'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/activesupport-3.2.8/lib/active_support/core_ext/benchmark.rb:5:in `block in ms'
/Users/kevinmuller/.rvm/rubies/ruby-2.2.4/lib/ruby/2.2.0/benchmark.rb:303:in `realtime'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/activesupport-3.2.8/lib/active_support/core_ext/benchmark.rb:5:in `ms'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_controller/metal/instrumentation.rb:40:in `block in render'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_controller/metal/instrumentation.rb:83:in `cleanup_view_runtime'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/activerecord-3.2.8/lib/active_record/railties/controller_runtime.rb:24:in `cleanup_view_runtime'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_controller/metal/instrumentation.rb:39:in `render'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/bundler/gems/remotipart-aadc29e996c3/lib/remotipart/render_overrides.rb:14:in `render_with_remotipart'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_controller/metal/implicit_render.rb:10:in `default_render'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_controller/metal/mime_responds.rb:196:in `respond_to'
/Users/kevinmuller/halalgems_backend/app/controllers/collections_controller.rb:56:in `admin_new_collection'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_controller/metal/implicit_render.rb:4:in `send_action'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/abstract_controller/base.rb:167:in `process_action'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_controller/metal/rendering.rb:10:in `process_action'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/abstract_controller/callbacks.rb:18:in `block in process_action'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/activesupport-3.2.8/lib/active_support/callbacks.rb:458:in `_run__1878201843038484176__process_action__477167353515410138__callbacks'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/activesupport-3.2.8/lib/active_support/callbacks.rb:405:in `__run_callback'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/activesupport-3.2.8/lib/active_support/callbacks.rb:385:in `_run_process_action_callbacks'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/activesupport-3.2.8/lib/active_support/callbacks.rb:81:in `run_callbacks'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/abstract_controller/callbacks.rb:17:in `process_action'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_controller/metal/rescue.rb:29:in `process_action'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_controller/metal/instrumentation.rb:30:in `block in process_action'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/activesupport-3.2.8/lib/active_support/notifications.rb:123:in `block in instrument'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/activesupport-3.2.8/lib/active_support/notifications/instrumenter.rb:20:in `instrument'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/activesupport-3.2.8/lib/active_support/notifications.rb:123:in `instrument'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_controller/metal/instrumentation.rb:29:in `process_action'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_controller/metal/params_wrapper.rb:207:in `process_action'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/activerecord-3.2.8/lib/active_record/railties/controller_runtime.rb:18:in `process_action'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/newrelic_rpm-3.7.3.204/lib/new_relic/agent/instrumentation/rails3/action_controller.rb:38:in `block in process_action'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/newrelic_rpm-3.7.3.204/lib/new_relic/agent/instrumentation/controller_instrumentation.rb:335:in `perform_action_with_newrelic_trace'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/newrelic_rpm-3.7.3.204/lib/new_relic/agent/instrumentation/rails3/action_controller.rb:37:in `process_action'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/abstract_controller/base.rb:121:in `process'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/abstract_controller/rendering.rb:45:in `process'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_controller/metal.rb:203:in `dispatch'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_controller/metal/rack_delegation.rb:14:in `dispatch'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_controller/metal.rb:246:in `block in action'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_dispatch/routing/route_set.rb:73:in `call'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_dispatch/routing/route_set.rb:73:in `dispatch'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_dispatch/routing/route_set.rb:36:in `call'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/journey-1.0.4/lib/journey/router.rb:68:in `block in call'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/journey-1.0.4/lib/journey/router.rb:56:in `each'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/journey-1.0.4/lib/journey/router.rb:56:in `call'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_dispatch/routing/route_set.rb:600:in `call'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/omniauth-1.1.4/lib/omniauth/strategy.rb:184:in `call!'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/omniauth-1.1.4/lib/omniauth/strategy.rb:164:in `call'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/newrelic_rpm-3.7.3.204/lib/new_relic/rack/error_collector.rb:55:in `call'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/newrelic_rpm-3.7.3.204/lib/new_relic/rack/agent_hooks.rb:32:in `call'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/newrelic_rpm-3.7.3.204/lib/new_relic/rack/browser_monitoring.rb:27:in `call'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/newrelic_rpm-3.7.3.204/lib/new_relic/rack/developer_mode.rb:45:in `call'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/galetahub-simple_captcha-0.1.5/lib/simple_captcha/middleware.rb:20:in `call'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/bundler/gems/client_side_validations-a6a515504520/lib/client_side_validations/middleware.rb:21:in `call'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/warden-1.1.1/lib/warden/manager.rb:35:in `block in call'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/warden-1.1.1/lib/warden/manager.rb:34:in `catch'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/warden-1.1.1/lib/warden/manager.rb:34:in `call'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_dispatch/middleware/best_standards_support.rb:17:in `call'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/rack-1.4.5/lib/rack/etag.rb:23:in `call'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/rack-1.4.5/lib/rack/conditionalget.rb:25:in `call'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_dispatch/middleware/head.rb:14:in `call'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/bundler/gems/remotipart-aadc29e996c3/lib/remotipart/middleware.rb:27:in `call'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_dispatch/middleware/params_parser.rb:21:in `call'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_dispatch/middleware/flash.rb:242:in `call'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/rack-1.4.5/lib/rack/session/abstract/id.rb:210:in `context'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/rack-1.4.5/lib/rack/session/abstract/id.rb:205:in `call'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_dispatch/middleware/cookies.rb:339:in `call'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/dragonfly-0.9.15/lib/dragonfly/cookie_monster.rb:9:in `call'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/activerecord-3.2.8/lib/active_record/query_cache.rb:64:in `call'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/activerecord-3.2.8/lib/active_record/connection_adapters/abstract/connection_pool.rb:473:in `call'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_dispatch/middleware/callbacks.rb:28:in `block in call'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/activesupport-3.2.8/lib/active_support/callbacks.rb:405:in `_run__1871245027803988066__call__4207201468600934469__callbacks'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/activesupport-3.2.8/lib/active_support/callbacks.rb:405:in `__run_callback'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/activesupport-3.2.8/lib/active_support/callbacks.rb:385:in `_run_call_callbacks'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/activesupport-3.2.8/lib/active_support/callbacks.rb:81:in `run_callbacks'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_dispatch/middleware/callbacks.rb:27:in `call'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_dispatch/middleware/reloader.rb:65:in `call'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_dispatch/middleware/remote_ip.rb:31:in `call'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_dispatch/middleware/debug_exceptions.rb:16:in `call'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_dispatch/middleware/show_exceptions.rb:56:in `call'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/railties-3.2.8/lib/rails/rack/logger.rb:26:in `call_app'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/railties-3.2.8/lib/rails/rack/logger.rb:16:in `call'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/quiet_assets-1.0.3/lib/quiet_assets.rb:23:in `call_with_quiet_assets'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_dispatch/middleware/request_id.rb:22:in `call'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/rack-1.4.5/lib/rack/methodoverride.rb:21:in `call'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/rack-1.4.5/lib/rack/runtime.rb:17:in `call'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/activesupport-3.2.8/lib/active_support/cache/strategy/local_cache.rb:72:in `call'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/rack-1.4.5/lib/rack/lock.rb:15:in `call'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_dispatch/middleware/static.rb:62:in `call'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/dragonfly-0.9.15/lib/dragonfly/middleware.rb:13:in `call'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/rack-cache-1.2/lib/rack/cache/context.rb:136:in `forward'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/rack-cache-1.2/lib/rack/cache/context.rb:245:in `fetch'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/rack-cache-1.2/lib/rack/cache/context.rb:185:in `lookup'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/rack-cache-1.2/lib/rack/cache/context.rb:66:in `call!'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/rack-cache-1.2/lib/rack/cache/context.rb:51:in `call'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/railties-3.2.8/lib/rails/engine.rb:479:in `call'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/railties-3.2.8/lib/rails/application.rb:223:in `call'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/rack-1.4.5/lib/rack/content_length.rb:14:in `call'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/railties-3.2.8/lib/rails/rack/log_tailer.rb:17:in `call'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/rack-1.4.5/lib/rack/handler/webrick.rb:59:in `service'
/Users/kevinmuller/.rvm/rubies/ruby-2.2.4/lib/ruby/2.2.0/webrick/httpserver.rb:138:in `service'
/Users/kevinmuller/.rvm/rubies/ruby-2.2.4/lib/ruby/2.2.0/webrick/httpserver.rb:94:in `run'
/Users/kevinmuller/.rvm/rubies/ruby-2.2.4/lib/ruby/2.2.0/webrick/server.rb:294:in `block in start_thread'
  Rendered collections/_collection_restaurants_form.html.erb (0.5ms)
  Rendered collections/admin_new_collection.html.erb within layouts/admin (5.7ms)
Completed 500 Internal Server Error in 189ms

ActionView::Template::Error (/Users/kevinmuller/halalgems_backend/app/views/collections/_collection_restaurants_form.html.erb:14: syntax error, unexpected keyword_ensure, expecting keyword_end
/Users/kevinmuller/halalgems_backend/app/views/collections/_collection_restaurants_form.html.erb:16: syntax error, unexpected end-of-input, expecting keyword_end):
    11: </div>
  app/views/collections/admin_new_collection.html.erb:17:in `_app_views_collections_admin_new_collection_html_erb___3023385902521735371_70236385891800'
  app/controllers/collections_controller.rb:56:in `admin_new_collection'


  Rendered /Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_dispatch/middleware/templates/rescues/_trace.erb (1.3ms)
  Rendered /Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_dispatch/middleware/templates/rescues/_request_and_response.erb (0.9ms)
  Rendered /Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_dispatch/middleware/templates/rescues/template_error.erb within rescues/layout (43.8ms)


Started GET "/admin/collections/admin_new_collection" for 127.0.0.1 at 2016-01-18 05:29:24 +0100
Processing by CollectionsController#admin_new_collection as HTML
  [1m[36mUser Load (0.4ms)[0m  [1mSELECT `users`.* FROM `users` WHERE `users`.`id` = 1 LIMIT 1[0m
  [1m[35mRestaurant Load (6.4ms)[0m  SELECT `restaurants`.* FROM `restaurants` WHERE `restaurants`.`disabled` = 0
  Rendered collections/_collection_form.html.erb (4.3ms)
ERROR: compiling _app_views_collections__collection_restaurants_form_html_erb__241531618330134577_70236170039300 RAISED /Users/kevinmuller/halalgems_backend/app/views/collections/_collection_restaurants_form.html.erb:14: syntax error, unexpected keyword_ensure, expecting keyword_end
/Users/kevinmuller/halalgems_backend/app/views/collections/_collection_restaurants_form.html.erb:16: syntax error, unexpected end-of-input, expecting keyword_end
Function body:           def _app_views_collections__collection_restaurants_form_html_erb__241531618330134577_70236170039300(local_assigns, output_buffer)
            _old_virtual_path, @virtual_path = @virtual_path, "collections/_collection_restaurants_form";_old_output_buffer = @output_buffer;collection_restaurants_form = local_assigns[:collection_restaurants_form];;@output_buffer = output_buffer || ActionView::OutputBuffer.new;@output_buffer.safe_concat('
<div class="form_add_new_collection">
  ');@output_buffer.append=  form_for(@collection, url: '/restaurants' , html: { id: "collection_restaurants" }) do |f| @output_buffer.safe_concat('
');   @restaurants.each do |r| 
@output_buffer.safe_concat('    ');@output_buffer.append=  select_tag(:restaurant_id) do @output_buffer.safe_concat('
');       @restaurants.each do |r| 
@output_buffer.safe_concat('        ');@output_buffer.append= ( content_tag(:option, r.name, value: r.id) );@output_buffer.safe_concat('
');       end 
  	 end 
   end 
@output_buffer.safe_concat('</div>

');@output_buffer.to_s
          ensure
            @virtual_path, @output_buffer = _old_virtual_path, _old_output_buffer
          end

Backtrace: /Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_view/template.rb:297:in `module_eval'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_view/template.rb:297:in `compile'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_view/template.rb:244:in `block in compile!'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_view/template.rb:232:in `synchronize'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_view/template.rb:232:in `compile!'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_view/template.rb:144:in `block in render'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/activesupport-3.2.8/lib/active_support/notifications.rb:125:in `instrument'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_view/template.rb:143:in `render'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_view/renderer/partial_renderer.rb:265:in `render_partial'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_view/renderer/partial_renderer.rb:238:in `block in render'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_view/renderer/abstract_renderer.rb:38:in `block in instrument'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/activesupport-3.2.8/lib/active_support/notifications.rb:123:in `block in instrument'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/activesupport-3.2.8/lib/active_support/notifications/instrumenter.rb:20:in `instrument'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/activesupport-3.2.8/lib/active_support/notifications.rb:123:in `instrument'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_view/renderer/abstract_renderer.rb:38:in `instrument'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/newrelic_rpm-3.7.3.204/lib/new_relic/agent/instrumentation/rails3/action_controller.rb:175:in `block in instrument_with_newrelic'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/newrelic_rpm-3.7.3.204/lib/new_relic/agent/method_tracer.rb:281:in `trace_execution_scoped'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/newrelic_rpm-3.7.3.204/lib/new_relic/agent/instrumentation/rails3/action_controller.rb:174:in `instrument_with_newrelic'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_view/renderer/partial_renderer.rb:237:in `render'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_view/renderer/renderer.rb:41:in `render_partial'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_view/helpers/rendering_helper.rb:27:in `render'
/Users/kevinmuller/halalgems_backend/app/views/collections/admin_new_collection.html.erb:17:in `_app_views_collections_admin_new_collection_html_erb___3023385902521735371_70236385891800'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_view/template.rb:145:in `block in render'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/activesupport-3.2.8/lib/active_support/notifications.rb:125:in `instrument'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_view/template.rb:143:in `render'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_view/renderer/template_renderer.rb:47:in `block (2 levels) in render_template'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_view/renderer/abstract_renderer.rb:38:in `block in instrument'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/activesupport-3.2.8/lib/active_support/notifications.rb:123:in `block in instrument'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/activesupport-3.2.8/lib/active_support/notifications/instrumenter.rb:20:in `instrument'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/activesupport-3.2.8/lib/active_support/notifications.rb:123:in `instrument'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_view/renderer/abstract_renderer.rb:38:in `instrument'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_view/renderer/template_renderer.rb:46:in `block in render_template'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_view/renderer/template_renderer.rb:54:in `render_with_layout'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_view/renderer/template_renderer.rb:45:in `render_template'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_view/renderer/template_renderer.rb:18:in `render'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/newrelic_rpm-3.7.3.204/lib/new_relic/agent/instrumentation/rails3/action_controller.rb:160:in `block in render_with_newrelic'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/newrelic_rpm-3.7.3.204/lib/new_relic/agent/method_tracer.rb:281:in `trace_execution_scoped'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/newrelic_rpm-3.7.3.204/lib/new_relic/agent/instrumentation/rails3/action_controller.rb:159:in `render_with_newrelic'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_view/renderer/renderer.rb:36:in `render_template'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_view/renderer/renderer.rb:17:in `render'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/abstract_controller/rendering.rb:110:in `_render_template'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_controller/metal/streaming.rb:225:in `_render_template'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/abstract_controller/rendering.rb:103:in `render_to_body'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_controller/metal/renderers.rb:28:in `render_to_body'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_controller/metal/compatibility.rb:50:in `render_to_body'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/abstract_controller/rendering.rb:88:in `render'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_controller/metal/rendering.rb:16:in `render'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_controller/metal/instrumentation.rb:40:in `block (2 levels) in render'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/activesupport-3.2.8/lib/active_support/core_ext/benchmark.rb:5:in `block in ms'
/Users/kevinmuller/.rvm/rubies/ruby-2.2.4/lib/ruby/2.2.0/benchmark.rb:303:in `realtime'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/activesupport-3.2.8/lib/active_support/core_ext/benchmark.rb:5:in `ms'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_controller/metal/instrumentation.rb:40:in `block in render'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_controller/metal/instrumentation.rb:83:in `cleanup_view_runtime'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/activerecord-3.2.8/lib/active_record/railties/controller_runtime.rb:24:in `cleanup_view_runtime'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_controller/metal/instrumentation.rb:39:in `render'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/bundler/gems/remotipart-aadc29e996c3/lib/remotipart/render_overrides.rb:14:in `render_with_remotipart'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_controller/metal/implicit_render.rb:10:in `default_render'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_controller/metal/mime_responds.rb:196:in `respond_to'
/Users/kevinmuller/halalgems_backend/app/controllers/collections_controller.rb:56:in `admin_new_collection'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_controller/metal/implicit_render.rb:4:in `send_action'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/abstract_controller/base.rb:167:in `process_action'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_controller/metal/rendering.rb:10:in `process_action'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/abstract_controller/callbacks.rb:18:in `block in process_action'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/activesupport-3.2.8/lib/active_support/callbacks.rb:458:in `_run__1878201843038484176__process_action__477167353515410138__callbacks'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/activesupport-3.2.8/lib/active_support/callbacks.rb:405:in `__run_callback'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/activesupport-3.2.8/lib/active_support/callbacks.rb:385:in `_run_process_action_callbacks'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/activesupport-3.2.8/lib/active_support/callbacks.rb:81:in `run_callbacks'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/abstract_controller/callbacks.rb:17:in `process_action'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_controller/metal/rescue.rb:29:in `process_action'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_controller/metal/instrumentation.rb:30:in `block in process_action'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/activesupport-3.2.8/lib/active_support/notifications.rb:123:in `block in instrument'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/activesupport-3.2.8/lib/active_support/notifications/instrumenter.rb:20:in `instrument'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/activesupport-3.2.8/lib/active_support/notifications.rb:123:in `instrument'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_controller/metal/instrumentation.rb:29:in `process_action'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_controller/metal/params_wrapper.rb:207:in `process_action'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/activerecord-3.2.8/lib/active_record/railties/controller_runtime.rb:18:in `process_action'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/newrelic_rpm-3.7.3.204/lib/new_relic/agent/instrumentation/rails3/action_controller.rb:38:in `block in process_action'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/newrelic_rpm-3.7.3.204/lib/new_relic/agent/instrumentation/controller_instrumentation.rb:335:in `perform_action_with_newrelic_trace'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/newrelic_rpm-3.7.3.204/lib/new_relic/agent/instrumentation/rails3/action_controller.rb:37:in `process_action'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/abstract_controller/base.rb:121:in `process'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/abstract_controller/rendering.rb:45:in `process'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_controller/metal.rb:203:in `dispatch'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_controller/metal/rack_delegation.rb:14:in `dispatch'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_controller/metal.rb:246:in `block in action'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_dispatch/routing/route_set.rb:73:in `call'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_dispatch/routing/route_set.rb:73:in `dispatch'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_dispatch/routing/route_set.rb:36:in `call'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/journey-1.0.4/lib/journey/router.rb:68:in `block in call'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/journey-1.0.4/lib/journey/router.rb:56:in `each'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/journey-1.0.4/lib/journey/router.rb:56:in `call'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_dispatch/routing/route_set.rb:600:in `call'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/omniauth-1.1.4/lib/omniauth/strategy.rb:184:in `call!'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/omniauth-1.1.4/lib/omniauth/strategy.rb:164:in `call'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/newrelic_rpm-3.7.3.204/lib/new_relic/rack/error_collector.rb:55:in `call'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/newrelic_rpm-3.7.3.204/lib/new_relic/rack/agent_hooks.rb:32:in `call'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/newrelic_rpm-3.7.3.204/lib/new_relic/rack/browser_monitoring.rb:27:in `call'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/newrelic_rpm-3.7.3.204/lib/new_relic/rack/developer_mode.rb:45:in `call'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/galetahub-simple_captcha-0.1.5/lib/simple_captcha/middleware.rb:20:in `call'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/bundler/gems/client_side_validations-a6a515504520/lib/client_side_validations/middleware.rb:21:in `call'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/warden-1.1.1/lib/warden/manager.rb:35:in `block in call'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/warden-1.1.1/lib/warden/manager.rb:34:in `catch'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/warden-1.1.1/lib/warden/manager.rb:34:in `call'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_dispatch/middleware/best_standards_support.rb:17:in `call'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/rack-1.4.5/lib/rack/etag.rb:23:in `call'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/rack-1.4.5/lib/rack/conditionalget.rb:25:in `call'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_dispatch/middleware/head.rb:14:in `call'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/bundler/gems/remotipart-aadc29e996c3/lib/remotipart/middleware.rb:27:in `call'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_dispatch/middleware/params_parser.rb:21:in `call'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_dispatch/middleware/flash.rb:242:in `call'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/rack-1.4.5/lib/rack/session/abstract/id.rb:210:in `context'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/rack-1.4.5/lib/rack/session/abstract/id.rb:205:in `call'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_dispatch/middleware/cookies.rb:339:in `call'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/dragonfly-0.9.15/lib/dragonfly/cookie_monster.rb:9:in `call'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/activerecord-3.2.8/lib/active_record/query_cache.rb:64:in `call'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/activerecord-3.2.8/lib/active_record/connection_adapters/abstract/connection_pool.rb:473:in `call'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_dispatch/middleware/callbacks.rb:28:in `block in call'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/activesupport-3.2.8/lib/active_support/callbacks.rb:405:in `_run__1871245027803988066__call__4207201468600934469__callbacks'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/activesupport-3.2.8/lib/active_support/callbacks.rb:405:in `__run_callback'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/activesupport-3.2.8/lib/active_support/callbacks.rb:385:in `_run_call_callbacks'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/activesupport-3.2.8/lib/active_support/callbacks.rb:81:in `run_callbacks'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_dispatch/middleware/callbacks.rb:27:in `call'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_dispatch/middleware/reloader.rb:65:in `call'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_dispatch/middleware/remote_ip.rb:31:in `call'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_dispatch/middleware/debug_exceptions.rb:16:in `call'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_dispatch/middleware/show_exceptions.rb:56:in `call'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/railties-3.2.8/lib/rails/rack/logger.rb:26:in `call_app'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/railties-3.2.8/lib/rails/rack/logger.rb:16:in `call'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/quiet_assets-1.0.3/lib/quiet_assets.rb:23:in `call_with_quiet_assets'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_dispatch/middleware/request_id.rb:22:in `call'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/rack-1.4.5/lib/rack/methodoverride.rb:21:in `call'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/rack-1.4.5/lib/rack/runtime.rb:17:in `call'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/activesupport-3.2.8/lib/active_support/cache/strategy/local_cache.rb:72:in `call'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/rack-1.4.5/lib/rack/lock.rb:15:in `call'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_dispatch/middleware/static.rb:62:in `call'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/dragonfly-0.9.15/lib/dragonfly/middleware.rb:13:in `call'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/rack-cache-1.2/lib/rack/cache/context.rb:136:in `forward'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/rack-cache-1.2/lib/rack/cache/context.rb:245:in `fetch'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/rack-cache-1.2/lib/rack/cache/context.rb:185:in `lookup'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/rack-cache-1.2/lib/rack/cache/context.rb:66:in `call!'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/rack-cache-1.2/lib/rack/cache/context.rb:51:in `call'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/railties-3.2.8/lib/rails/engine.rb:479:in `call'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/railties-3.2.8/lib/rails/application.rb:223:in `call'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/rack-1.4.5/lib/rack/content_length.rb:14:in `call'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/railties-3.2.8/lib/rails/rack/log_tailer.rb:17:in `call'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/rack-1.4.5/lib/rack/handler/webrick.rb:59:in `service'
/Users/kevinmuller/.rvm/rubies/ruby-2.2.4/lib/ruby/2.2.0/webrick/httpserver.rb:138:in `service'
/Users/kevinmuller/.rvm/rubies/ruby-2.2.4/lib/ruby/2.2.0/webrick/httpserver.rb:94:in `run'
/Users/kevinmuller/.rvm/rubies/ruby-2.2.4/lib/ruby/2.2.0/webrick/server.rb:294:in `block in start_thread'
  Rendered collections/_collection_restaurants_form.html.erb (0.5ms)
  Rendered collections/admin_new_collection.html.erb within layouts/admin (6.4ms)
Completed 500 Internal Server Error in 187ms

ActionView::Template::Error (/Users/kevinmuller/halalgems_backend/app/views/collections/_collection_restaurants_form.html.erb:14: syntax error, unexpected keyword_ensure, expecting keyword_end
/Users/kevinmuller/halalgems_backend/app/views/collections/_collection_restaurants_form.html.erb:16: syntax error, unexpected end-of-input, expecting keyword_end):
    11: </div>
  app/views/collections/admin_new_collection.html.erb:17:in `_app_views_collections_admin_new_collection_html_erb___3023385902521735371_70236385891800'
  app/controllers/collections_controller.rb:56:in `admin_new_collection'


  Rendered /Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_dispatch/middleware/templates/rescues/_trace.erb (1.0ms)
  Rendered /Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_dispatch/middleware/templates/rescues/_request_and_response.erb (0.8ms)
  Rendered /Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_dispatch/middleware/templates/rescues/template_error.erb within rescues/layout (42.1ms)


Started GET "/admin/collections/admin_new_collection" for 127.0.0.1 at 2016-01-18 05:29:32 +0100
Processing by CollectionsController#admin_new_collection as HTML
  [1m[36mUser Load (0.2ms)[0m  [1mSELECT `users`.* FROM `users` WHERE `users`.`id` = 1 LIMIT 1[0m
  [1m[35mRestaurant Load (3.6ms)[0m  SELECT `restaurants`.* FROM `restaurants` WHERE `restaurants`.`disabled` = 0
  Rendered collections/_collection_form.html.erb (5.0ms)
  Rendered collections/_collection_restaurants_form.html.erb (0.8ms)
  Rendered collections/admin_new_collection.html.erb within layouts/admin (7.4ms)
Completed 200 OK in 185ms (Views: 13.2ms | ActiveRecord: 3.8ms)


Started GET "/admin/collections/admin_new_collection" for 127.0.0.1 at 2016-01-18 05:29:39 +0100
Processing by CollectionsController#admin_new_collection as HTML
  [1m[36mUser Load (0.4ms)[0m  [1mSELECT `users`.* FROM `users` WHERE `users`.`id` = 1 LIMIT 1[0m
  [1m[35mRestaurant Load (7.0ms)[0m  SELECT `restaurants`.* FROM `restaurants` WHERE `restaurants`.`disabled` = 0
  Rendered collections/_collection_form.html.erb (5.0ms)
  Rendered collections/_collection_restaurants_form.html.erb (0.8ms)
  Rendered collections/admin_new_collection.html.erb within layouts/admin (7.4ms)
Completed 200 OK in 204ms (Views: 13.1ms | ActiveRecord: 7.4ms)


Started GET "/admin/collections/admin_new_collection" for 127.0.0.1 at 2016-01-18 05:43:49 +0100
Processing by CollectionsController#admin_new_collection as HTML
  [1m[36mUser Load (0.5ms)[0m  [1mSELECT `users`.* FROM `users` WHERE `users`.`id` = 1 LIMIT 1[0m
  [1m[35mRestaurant Load (6.8ms)[0m  SELECT `restaurants`.* FROM `restaurants` WHERE `restaurants`.`disabled` = 0
  Rendered collections/_collection_form.html.erb (5.3ms)
  Rendered collections/_collection_restaurants_form.html.erb (1.3ms)
  Rendered collections/admin_new_collection.html.erb within layouts/admin (18.8ms)
Completed 500 Internal Server Error in 293ms

ActionView::Template::Error (wrong number of arguments (1 for 2..4)):
    1: 
    2: <div class="form_add_new_collection">
    3:   <%= form_for(@collection, url: '/restaurants' , html: { id: "collection_restaurants" }) do |f| %>
    4:     <%= f.select(:restaurant_id) do %>
    5:       <% @restaurants.each do |r| %>
    6:         <%= content_tag(:option, r.name, value: r.id) %>
    7:       <% end %>
  app/views/collections/_collection_restaurants_form.html.erb:4:in `block in _app_views_collections__collection_restaurants_form_html_erb__241531618330134577_70236167959320'
  app/views/collections/_collection_restaurants_form.html.erb:3:in `_app_views_collections__collection_restaurants_form_html_erb__241531618330134577_70236167959320'
  app/views/collections/admin_new_collection.html.erb:17:in `_app_views_collections_admin_new_collection_html_erb___3023385902521735371_70236385891800'
  app/controllers/collections_controller.rb:56:in `admin_new_collection'


  Rendered /Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_dispatch/middleware/templates/rescues/_trace.erb (1.0ms)
  Rendered /Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_dispatch/middleware/templates/rescues/_request_and_response.erb (1.1ms)
  Rendered /Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_dispatch/middleware/templates/rescues/template_error.erb within rescues/layout (58.7ms)


Started GET "/admin/collections/admin_new_collection" for 127.0.0.1 at 2016-01-18 05:44:55 +0100
Processing by CollectionsController#admin_new_collection as HTML
  [1m[36mUser Load (0.3ms)[0m  [1mSELECT `users`.* FROM `users` WHERE `users`.`id` = 1 LIMIT 1[0m
  [1m[35mRestaurant Load (6.2ms)[0m  SELECT `restaurants`.* FROM `restaurants` WHERE `restaurants`.`disabled` = 0
  Rendered collections/_collection_form.html.erb (4.8ms)
  Rendered collections/_collection_restaurants_form.html.erb (1.2ms)
  Rendered collections/admin_new_collection.html.erb within layouts/admin (8.1ms)
Completed 500 Internal Server Error in 209ms

ActionView::Template::Error (wrong number of arguments (1 for 2..4)):
    1: 
    2: <div class="form_add_new_collection">
    3:   <%= form_for(@collection, url: '/restaurants' , html: { id: "collection_restaurants" }) do |f| %>
    4:     <%= f.select(:restaurant_id) do %>
    5:       <% @restaurants.each do |r| %>
    6:         
    7:       <% end %>
  app/views/collections/_collection_restaurants_form.html.erb:4:in `block in _app_views_collections__collection_restaurants_form_html_erb__241531618330134577_70236378030380'
  app/views/collections/_collection_restaurants_form.html.erb:3:in `_app_views_collections__collection_restaurants_form_html_erb__241531618330134577_70236378030380'
  app/views/collections/admin_new_collection.html.erb:17:in `_app_views_collections_admin_new_collection_html_erb___3023385902521735371_70236385891800'
  app/controllers/collections_controller.rb:56:in `admin_new_collection'


  Rendered /Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_dispatch/middleware/templates/rescues/_trace.erb (1.2ms)
  Rendered /Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_dispatch/middleware/templates/rescues/_request_and_response.erb (0.9ms)
  Rendered /Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_dispatch/middleware/templates/rescues/template_error.erb within rescues/layout (43.9ms)


Started GET "/admin/collections/admin_new_collection" for 127.0.0.1 at 2016-01-18 05:44:56 +0100
Processing by CollectionsController#admin_new_collection as HTML
  [1m[36mUser Load (0.3ms)[0m  [1mSELECT `users`.* FROM `users` WHERE `users`.`id` = 1 LIMIT 1[0m
  [1m[35mRestaurant Load (4.8ms)[0m  SELECT `restaurants`.* FROM `restaurants` WHERE `restaurants`.`disabled` = 0
  Rendered collections/_collection_form.html.erb (4.4ms)
  Rendered collections/_collection_restaurants_form.html.erb (0.9ms)
  Rendered collections/admin_new_collection.html.erb within layouts/admin (7.3ms)
Completed 500 Internal Server Error in 195ms

ActionView::Template::Error (wrong number of arguments (1 for 2..4)):
    1: 
    2: <div class="form_add_new_collection">
    3:   <%= form_for(@collection, url: '/restaurants' , html: { id: "collection_restaurants" }) do |f| %>
    4:     <%= f.select(:restaurant_id) do %>
    5:       <% @restaurants.each do |r| %>
    6:         
    7:       <% end %>
  app/views/collections/_collection_restaurants_form.html.erb:4:in `block in _app_views_collections__collection_restaurants_form_html_erb__241531618330134577_70236378030380'
  app/views/collections/_collection_restaurants_form.html.erb:3:in `_app_views_collections__collection_restaurants_form_html_erb__241531618330134577_70236378030380'
  app/views/collections/admin_new_collection.html.erb:17:in `_app_views_collections_admin_new_collection_html_erb___3023385902521735371_70236385891800'
  app/controllers/collections_controller.rb:56:in `admin_new_collection'


  Rendered /Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_dispatch/middleware/templates/rescues/_trace.erb (0.8ms)
  Rendered /Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_dispatch/middleware/templates/rescues/_request_and_response.erb (0.7ms)
  Rendered /Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_dispatch/middleware/templates/rescues/template_error.erb within rescues/layout (41.6ms)


Started GET "/admin/collections/admin_new_collection" for 127.0.0.1 at 2016-01-18 05:50:38 +0100
Processing by CollectionsController#admin_new_collection as HTML
  [1m[36mUser Load (0.2ms)[0m  [1mSELECT `users`.* FROM `users` WHERE `users`.`id` = 1 LIMIT 1[0m
  [1m[35m (0.2ms)[0m  SELECT COUNT(*) FROM `filter_types` WHERE (code = 'features')
  [1m[36m (0.2ms)[0m  [1mSELECT COUNT(*) FROM `filters` WHERE (code = 'offer')[0m
  [1m[35mRestaurant Load (3.2ms)[0m  SELECT `restaurants`.* FROM `restaurants` WHERE `restaurants`.`disabled` = 0
  Rendered collections/_collection_form.html.erb (5.9ms)
  Rendered collections/_collection_restaurants_form.html.erb (1.8ms)
  Rendered collections/admin_new_collection.html.erb within layouts/admin (9.9ms)
Completed 500 Internal Server Error in 533ms

ActionView::Template::Error (wrong number of arguments (1 for 2..4)):
    1: 
    2: <div class="form_add_new_collection">
    3:   <%= form_for(@collection_restaurants, url: '/restaurants' , html: { id: "collection_restaurants" }) do |f| %>
    4:     <%= f.select(:restaurant_id) do %>
    5:       <% @restaurants.each do |r| %>
    6:         <%= content_tag(:option, r.name, value: r.id) %>
    7:       <% end %>
  app/views/collections/_collection_restaurants_form.html.erb:4:in `block in _app_views_collections__collection_restaurants_form_html_erb__241531618330134577_70236319757200'
  app/views/collections/_collection_restaurants_form.html.erb:3:in `_app_views_collections__collection_restaurants_form_html_erb__241531618330134577_70236319757200'
  app/views/collections/admin_new_collection.html.erb:17:in `_app_views_collections_admin_new_collection_html_erb___3023385902521735371_70236385891800'
  app/controllers/collections_controller.rb:57:in `admin_new_collection'


  Rendered /Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_dispatch/middleware/templates/rescues/_trace.erb (1.3ms)
  Rendered /Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_dispatch/middleware/templates/rescues/_request_and_response.erb (0.9ms)
  Rendered /Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_dispatch/middleware/templates/rescues/template_error.erb within rescues/layout (43.1ms)


Started GET "/admin/collections/admin_new_collection" for 127.0.0.1 at 2016-01-18 05:53:15 +0100
Processing by CollectionsController#admin_new_collection as HTML
  [1m[36mUser Load (0.5ms)[0m  [1mSELECT `users`.* FROM `users` WHERE `users`.`id` = 1 LIMIT 1[0m
  [1m[35mRestaurant Load (6.5ms)[0m  SELECT `restaurants`.* FROM `restaurants` WHERE `restaurants`.`disabled` = 0
  Rendered collections/_collection_form.html.erb (5.6ms)
  Rendered collections/_collection_restaurants_form.html.erb (23.6ms)
  Rendered collections/admin_new_collection.html.erb within layouts/admin (41.8ms)
Completed 200 OK in 300ms (Views: 72.3ms | ActiveRecord: 6.9ms)


Started GET "/admin/collections/admin_new_collection" for 127.0.0.1 at 2016-01-18 09:38:16 +0100
Processing by CollectionsController#admin_new_collection as HTML
  [1m[36mUser Load (0.7ms)[0m  [1mSELECT `users`.* FROM `users` WHERE `users`.`id` = 1 LIMIT 1[0m
  [1m[35m (0.2ms)[0m  BEGIN
  [1m[36m (0.2ms)[0m  [1mCOMMIT[0m
Completed 401 Unauthorized in 37ms


Started GET "/admin/collections/admin_new_collection" for 127.0.0.1 at 2016-01-18 09:38:16 +0100
Processing by CollectionsController#admin_new_collection as HTML
Completed 401 Unauthorized in 1ms


Started GET "/users/sign_in" for 127.0.0.1 at 2016-01-18 09:38:16 +0100
Processing by SessionsController#new as HTML
  Rendered sessions/new.html.slim within layouts/application (7.1ms)
  Rendered layouts/_header.html.erb (12.0ms)
  Rendered layouts/_main_menu.html.slim (3.2ms)
  Rendered layouts/_sub_main_menu.html.slim (0.2ms)
  Rendered layouts/_flash_messages.html.erb (0.2ms)
  [1m[35mBasicsPage Load (0.3ms)[0m  SELECT `basics_pages`.* FROM `basics_pages` WHERE `basics_pages`.`page_name` = 'Footer' LIMIT 1
  Rendered layouts/_footer.html.slim (177.3ms)
Completed 200 OK in 297ms (Views: 165.2ms | ActiveRecord: 126.2ms)


Started POST "/users/sign_in" for 127.0.0.1 at 2016-01-18 09:38:21 +0100
Processing by SessionsController#create as HTML
  Parameters: {"utf8"=>"âœ“", "authenticity_token"=>"cajmPApKUoLTDgL4nYG/B3GUhj8fezKDJZWxee28cyM=", "user"=>{"email"=>"kevin.muller1220@gmail.com", "password"=>"[FILTERED]"}, "button"=>""}
  [1m[36mUser Load (0.5ms)[0m  [1mSELECT `users`.* FROM `users` WHERE `users`.`email` = 'kevin.muller1220@gmail.com' LIMIT 1[0m
  [1m[35m (0.1ms)[0m  BEGIN
  [1m[36m (0.1ms)[0m  [1mCOMMIT[0m
  [1m[35m (0.1ms)[0m  BEGIN
  [1m[36m (0.4ms)[0m  [1mUPDATE `users` SET `last_sign_in_at` = '2016-01-18 03:11:37', `current_sign_in_at` = '2016-01-18 08:38:21', `sign_in_count` = 4, `updated_at` = '2016-01-18 08:38:21' WHERE `users`.`id` = 1[0m
  [1m[35m (0.6ms)[0m  COMMIT
Redirected to http://localhost:3000/admin
Completed 302 Found in 68ms (ActiveRecord: 1.8ms)


Started GET "/admin" for 127.0.0.1 at 2016-01-18 09:38:21 +0100
Processing by RestaurantsController#index as HTML
  [1m[36mUser Load (0.3ms)[0m  [1mSELECT `users`.* FROM `users` WHERE `users`.`id` = 1 LIMIT 1[0m
  Rendered shared/_restaurant_manage_tabs.html.erb (1.5ms)
  Rendered restaurants/_condition_fields.html.erb (19.0ms)
  [1m[35mRestaurant Load (1.8ms)[0m  SELECT `restaurants`.* FROM `restaurants` ORDER BY disabled ASC,created_at DESC LIMIT 12 OFFSET 0
  [1m[36mPhoto Load (0.7ms)[0m  [1mSELECT `photos`.* FROM `photos` WHERE (restaurant_id = 876 and cover = true and status = 1) LIMIT 1[0m
  [1m[35mPhoto Load (0.4ms)[0m  SELECT `photos`.* FROM `photos` WHERE `photos`.`restaurant_id` = 876 AND `photos`.`status` = 1 ORDER BY restaurant_id ASC, created_at DESC LIMIT 1
  [1m[36mPhoto Load (0.4ms)[0m  [1mSELECT `photos`.* FROM `photos` WHERE (restaurant_id = 851 and cover = true and status = 1) LIMIT 1[0m
  [1m[35mPhoto Load (0.3ms)[0m  SELECT `photos`.* FROM `photos` WHERE `photos`.`restaurant_id` = 851 AND `photos`.`status` = 1 ORDER BY restaurant_id ASC, created_at DESC LIMIT 1
  [1m[36mPhoto Load (0.3ms)[0m  [1mSELECT `photos`.* FROM `photos` WHERE (restaurant_id = 693 and cover = true and status = 1) LIMIT 1[0m
  [1m[35mPhoto Load (0.3ms)[0m  SELECT `photos`.* FROM `photos` WHERE `photos`.`restaurant_id` = 693 AND `photos`.`status` = 1 ORDER BY restaurant_id ASC, created_at DESC LIMIT 1
  [1m[36mPhoto Load (0.4ms)[0m  [1mSELECT `photos`.* FROM `photos` WHERE (restaurant_id = 686 and cover = true and status = 1) LIMIT 1[0m
  [1m[35mPhoto Load (0.3ms)[0m  SELECT `photos`.* FROM `photos` WHERE `photos`.`restaurant_id` = 686 AND `photos`.`status` = 1 ORDER BY restaurant_id ASC, created_at DESC LIMIT 1
  [1m[36mPhoto Load (0.3ms)[0m  [1mSELECT `photos`.* FROM `photos` WHERE (restaurant_id = 669 and cover = true and status = 1) LIMIT 1[0m
  [1m[35mPhoto Load (0.3ms)[0m  SELECT `photos`.* FROM `photos` WHERE `photos`.`restaurant_id` = 669 AND `photos`.`status` = 1 ORDER BY restaurant_id ASC, created_at DESC LIMIT 1
  [1m[36mPhoto Load (0.3ms)[0m  [1mSELECT `photos`.* FROM `photos` WHERE (restaurant_id = 251 and cover = true and status = 1) LIMIT 1[0m
  [1m[35mPhoto Load (0.3ms)[0m  SELECT `photos`.* FROM `photos` WHERE `photos`.`restaurant_id` = 251 AND `photos`.`status` = 1 ORDER BY restaurant_id ASC, created_at DESC LIMIT 1
  [1m[36mPhoto Load (0.3ms)[0m  [1mSELECT `photos`.* FROM `photos` WHERE (restaurant_id = 250 and cover = true and status = 1) LIMIT 1[0m
  [1m[35mPhoto Load (0.3ms)[0m  SELECT `photos`.* FROM `photos` WHERE `photos`.`restaurant_id` = 250 AND `photos`.`status` = 1 ORDER BY restaurant_id ASC, created_at DESC LIMIT 1
  [1m[36mPhoto Load (0.3ms)[0m  [1mSELECT `photos`.* FROM `photos` WHERE (restaurant_id = 237 and cover = true and status = 1) LIMIT 1[0m
  [1m[35mPhoto Load (0.3ms)[0m  SELECT `photos`.* FROM `photos` WHERE `photos`.`restaurant_id` = 237 AND `photos`.`status` = 1 ORDER BY restaurant_id ASC, created_at DESC LIMIT 1
  [1m[36mPhoto Load (0.4ms)[0m  [1mSELECT `photos`.* FROM `photos` WHERE (restaurant_id = 231 and cover = true and status = 1) LIMIT 1[0m
  [1m[35mPhoto Load (0.3ms)[0m  SELECT `photos`.* FROM `photos` WHERE `photos`.`restaurant_id` = 231 AND `photos`.`status` = 1 ORDER BY restaurant_id ASC, created_at DESC LIMIT 1
  [1m[36mPhoto Load (0.3ms)[0m  [1mSELECT `photos`.* FROM `photos` WHERE (restaurant_id = 222 and cover = true and status = 1) LIMIT 1[0m
  [1m[35mPhoto Load (0.3ms)[0m  SELECT `photos`.* FROM `photos` WHERE `photos`.`restaurant_id` = 222 AND `photos`.`status` = 1 ORDER BY restaurant_id ASC, created_at DESC LIMIT 1
  [1m[36mPhoto Load (0.3ms)[0m  [1mSELECT `photos`.* FROM `photos` WHERE (restaurant_id = 221 and cover = true and status = 1) LIMIT 1[0m
  [1m[35mPhoto Load (0.3ms)[0m  SELECT `photos`.* FROM `photos` WHERE `photos`.`restaurant_id` = 221 AND `photos`.`status` = 1 ORDER BY restaurant_id ASC, created_at DESC LIMIT 1
  [1m[36mPhoto Load (0.4ms)[0m  [1mSELECT `photos`.* FROM `photos` WHERE (restaurant_id = 216 and cover = true and status = 1) LIMIT 1[0m
  [1m[35mPhoto Load (0.3ms)[0m  SELECT `photos`.* FROM `photos` WHERE `photos`.`restaurant_id` = 216 AND `photos`.`status` = 1 ORDER BY restaurant_id ASC, created_at DESC LIMIT 1
  [1m[36m (0.9ms)[0m  [1mSELECT COUNT(*) FROM `restaurants` [0m
  Rendered restaurants/index.html.erb within layouts/admin (143.6ms)
Completed 200 OK in 162ms (Views: 144.8ms | ActiveRecord: 13.6ms)


Started GET "/admin/collections" for 127.0.0.1 at 2016-01-18 09:38:23 +0100
Processing by CollectionsController#index as HTML
  Rendered shared/_restaurant_manage_tabs.html.erb (0.8ms)
  [1m[35mCollection Load (0.5ms)[0m  SELECT `collections`.* FROM `collections` ORDER BY name ASC, created_at DESC LIMIT 12 OFFSET 0
  [1m[36mCollectionImage Load (0.3ms)[0m  [1mSELECT `collection_images`.* FROM `collection_images` WHERE (collection_id = 3) LIMIT 1[0m
  [1m[35mCollectionImage Load (0.3ms)[0m  SELECT `collection_images`.* FROM `collection_images` WHERE (collection_id = 2) LIMIT 1
  [1m[36m (0.1ms)[0m  [1mSELECT COUNT(*) FROM `collections` [0m
  Rendered collections/index.erb within layouts/admin (56.6ms)
  [1m[35mUser Load (0.3ms)[0m  SELECT `users`.* FROM `users` WHERE `users`.`id` = 1 LIMIT 1
Completed 200 OK in 73ms (Views: 68.4ms | ActiveRecord: 3.7ms)


Started GET "/admin/collections/admin_new_collection" for 127.0.0.1 at 2016-01-18 09:38:26 +0100
Processing by CollectionsController#admin_new_collection as HTML
  [1m[36mUser Load (0.3ms)[0m  [1mSELECT `users`.* FROM `users` WHERE `users`.`id` = 1 LIMIT 1[0m
  [1m[35mRestaurant Load (3.8ms)[0m  SELECT `restaurants`.* FROM `restaurants` WHERE `restaurants`.`disabled` = 0
  Rendered collections/_collection_form.html.erb (9.1ms)
  Rendered collections/_collection_restaurants_form.html.erb (503.7ms)
  Rendered collections/admin_new_collection.html.erb within layouts/admin (537.7ms)
Completed 500 Internal Server Error in 805ms

ActionView::Template::Error (undefined local variable or method `restaurants' for #<#<Class:0x007fc25766f9b0>:0x007fc25ce9d3f8>):
    1: 
    2: <div class="form_add_new_collection">
    3:   <%= form_for(@collection_restaurants, url: '/restaurants' , html: { id: "collection_restaurants" }) do |f| %>
    4:     <%= f.collection_select(:restaurant_id, restaurants, :id, :name) %>
    5:   <% end %>
    6: </div>
  app/views/collections/_collection_restaurants_form.html.erb:4:in `block in _app_views_collections__collection_restaurants_form_html_erb__241531618330134577_70236379571740'
  app/views/collections/_collection_restaurants_form.html.erb:3:in `_app_views_collections__collection_restaurants_form_html_erb__241531618330134577_70236379571740'
  app/views/collections/admin_new_collection.html.erb:17:in `_app_views_collections_admin_new_collection_html_erb___3023385902521735371_70236385891800'
  app/controllers/collections_controller.rb:57:in `admin_new_collection'


  Rendered /Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_dispatch/middleware/templates/rescues/_trace.erb (1.6ms)
  Rendered /Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_dispatch/middleware/templates/rescues/_request_and_response.erb (0.9ms)
  Rendered /Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_dispatch/middleware/templates/rescues/template_error.erb within rescues/layout (50.9ms)


Started GET "/admin/collections/admin_new_collection" for 127.0.0.1 at 2016-01-18 09:38:35 +0100
Processing by CollectionsController#admin_new_collection as HTML
  [1m[36mUser Load (0.4ms)[0m  [1mSELECT `users`.* FROM `users` WHERE `users`.`id` = 1 LIMIT 1[0m
  [1m[35mRestaurant Load (6.7ms)[0m  SELECT `restaurants`.* FROM `restaurants` WHERE `restaurants`.`disabled` = 0
  Rendered collections/_collection_form.html.erb (4.9ms)
  Rendered collections/_collection_restaurants_form.html.erb (10.7ms)
  Rendered collections/admin_new_collection.html.erb within layouts/admin (17.6ms)
Completed 200 OK in 208ms (Views: 23.2ms | ActiveRecord: 7.1ms)


Started GET "/admin/restaurants" for 127.0.0.1 at 2016-01-18 09:44:22 +0100
Processing by RestaurantsController#index as HTML
  [1m[36mUser Load (0.3ms)[0m  [1mSELECT `users`.* FROM `users` WHERE `users`.`id` = 1 LIMIT 1[0m
  Rendered shared/_restaurant_manage_tabs.html.erb (0.9ms)
  Rendered restaurants/_condition_fields.html.erb (10.1ms)
  [1m[35mRestaurant Load (0.9ms)[0m  SELECT `restaurants`.* FROM `restaurants` ORDER BY disabled ASC,created_at DESC LIMIT 12 OFFSET 0
  [1m[36mPhoto Load (0.4ms)[0m  [1mSELECT `photos`.* FROM `photos` WHERE (restaurant_id = 876 and cover = true and status = 1) LIMIT 1[0m
  [1m[35mPhoto Load (0.3ms)[0m  SELECT `photos`.* FROM `photos` WHERE `photos`.`restaurant_id` = 876 AND `photos`.`status` = 1 ORDER BY restaurant_id ASC, created_at DESC LIMIT 1
  [1m[36mPhoto Load (0.3ms)[0m  [1mSELECT `photos`.* FROM `photos` WHERE (restaurant_id = 851 and cover = true and status = 1) LIMIT 1[0m
  [1m[35mPhoto Load (0.3ms)[0m  SELECT `photos`.* FROM `photos` WHERE `photos`.`restaurant_id` = 851 AND `photos`.`status` = 1 ORDER BY restaurant_id ASC, created_at DESC LIMIT 1
  [1m[36mPhoto Load (0.3ms)[0m  [1mSELECT `photos`.* FROM `photos` WHERE (restaurant_id = 693 and cover = true and status = 1) LIMIT 1[0m
  [1m[35mPhoto Load (0.3ms)[0m  SELECT `photos`.* FROM `photos` WHERE `photos`.`restaurant_id` = 693 AND `photos`.`status` = 1 ORDER BY restaurant_id ASC, created_at DESC LIMIT 1
  [1m[36mPhoto Load (0.4ms)[0m  [1mSELECT `photos`.* FROM `photos` WHERE (restaurant_id = 686 and cover = true and status = 1) LIMIT 1[0m
  [1m[35mPhoto Load (0.3ms)[0m  SELECT `photos`.* FROM `photos` WHERE `photos`.`restaurant_id` = 686 AND `photos`.`status` = 1 ORDER BY restaurant_id ASC, created_at DESC LIMIT 1
  [1m[36mPhoto Load (0.3ms)[0m  [1mSELECT `photos`.* FROM `photos` WHERE (restaurant_id = 669 and cover = true and status = 1) LIMIT 1[0m
  [1m[35mPhoto Load (0.3ms)[0m  SELECT `photos`.* FROM `photos` WHERE `photos`.`restaurant_id` = 669 AND `photos`.`status` = 1 ORDER BY restaurant_id ASC, created_at DESC LIMIT 1
  [1m[36mPhoto Load (0.4ms)[0m  [1mSELECT `photos`.* FROM `photos` WHERE (restaurant_id = 251 and cover = true and status = 1) LIMIT 1[0m
  [1m[35mPhoto Load (0.9ms)[0m  SELECT `photos`.* FROM `photos` WHERE `photos`.`restaurant_id` = 251 AND `photos`.`status` = 1 ORDER BY restaurant_id ASC, created_at DESC LIMIT 1
  [1m[36mPhoto Load (0.4ms)[0m  [1mSELECT `photos`.* FROM `photos` WHERE (restaurant_id = 250 and cover = true and status = 1) LIMIT 1[0m
  [1m[35mPhoto Load (0.3ms)[0m  SELECT `photos`.* FROM `photos` WHERE `photos`.`restaurant_id` = 250 AND `photos`.`status` = 1 ORDER BY restaurant_id ASC, created_at DESC LIMIT 1
  [1m[36mPhoto Load (0.4ms)[0m  [1mSELECT `photos`.* FROM `photos` WHERE (restaurant_id = 237 and cover = true and status = 1) LIMIT 1[0m
  [1m[35mPhoto Load (0.8ms)[0m  SELECT `photos`.* FROM `photos` WHERE `photos`.`restaurant_id` = 237 AND `photos`.`status` = 1 ORDER BY restaurant_id ASC, created_at DESC LIMIT 1
  [1m[36mPhoto Load (0.4ms)[0m  [1mSELECT `photos`.* FROM `photos` WHERE (restaurant_id = 231 and cover = true and status = 1) LIMIT 1[0m
  [1m[35mPhoto Load (0.3ms)[0m  SELECT `photos`.* FROM `photos` WHERE `photos`.`restaurant_id` = 231 AND `photos`.`status` = 1 ORDER BY restaurant_id ASC, created_at DESC LIMIT 1
  [1m[36mPhoto Load (0.4ms)[0m  [1mSELECT `photos`.* FROM `photos` WHERE (restaurant_id = 222 and cover = true and status = 1) LIMIT 1[0m
  [1m[35mPhoto Load (0.3ms)[0m  SELECT `photos`.* FROM `photos` WHERE `photos`.`restaurant_id` = 222 AND `photos`.`status` = 1 ORDER BY restaurant_id ASC, created_at DESC LIMIT 1
  [1m[36mPhoto Load (0.7ms)[0m  [1mSELECT `photos`.* FROM `photos` WHERE (restaurant_id = 221 and cover = true and status = 1) LIMIT 1[0m
  [1m[35mPhoto Load (0.3ms)[0m  SELECT `photos`.* FROM `photos` WHERE `photos`.`restaurant_id` = 221 AND `photos`.`status` = 1 ORDER BY restaurant_id ASC, created_at DESC LIMIT 1
  [1m[36mPhoto Load (0.3ms)[0m  [1mSELECT `photos`.* FROM `photos` WHERE (restaurant_id = 216 and cover = true and status = 1) LIMIT 1[0m
  [1m[35mPhoto Load (0.3ms)[0m  SELECT `photos`.* FROM `photos` WHERE `photos`.`restaurant_id` = 216 AND `photos`.`status` = 1 ORDER BY restaurant_id ASC, created_at DESC LIMIT 1
  [1m[36m (0.4ms)[0m  [1mSELECT COUNT(*) FROM `restaurants` [0m
  Rendered restaurants/index.html.erb within layouts/admin (119.7ms)
Completed 200 OK in 156ms (Views: 141.7ms | ActiveRecord: 10.9ms)


Started GET "/admin/restaurants/admin_new" for 127.0.0.1 at 2016-01-18 09:44:25 +0100
Processing by RestaurantsController#admin_new as HTML
  [1m[35mUser Load (0.3ms)[0m  SELECT `users`.* FROM `users` WHERE `users`.`id` = 1 LIMIT 1
  [1m[36m (1.9ms)[0m  [1mSELECT `filters`.id FROM `filters` INNER JOIN `filters_restaurants` ON `filters`.`id` = `filters_restaurants`.`filter_id` WHERE `filters_restaurants`.`restaurant_id` IS NULL[0m
  [1m[35mFilterType Load (0.3ms)[0m  SELECT `filter_types`.* FROM `filter_types` WHERE `filter_types`.`code` = 'hal_status' LIMIT 1
  [1m[36mFilterType Load (0.2ms)[0m  [1mSELECT `filter_types`.* FROM `filter_types` WHERE `filter_types`.`code` = 'price' LIMIT 1[0m
  [1m[35mFilterType Load (0.1ms)[0m  SELECT `filter_types`.* FROM `filter_types` WHERE `filter_types`.`code` = 'cuisine' LIMIT 1
  [1m[36mFilterType Load (0.1ms)[0m  [1mSELECT `filter_types`.* FROM `filter_types` WHERE `filter_types`.`code` = 'alcohol' LIMIT 1[0m
  [1m[35mFilterType Load (0.3ms)[0m  SELECT `filter_types`.* FROM `filter_types` WHERE `filter_types`.`code` = 'features' LIMIT 1
  Rendered restaurants/_googlemap.html.erb (0.2ms)
  [1m[36mFilter Load (0.4ms)[0m  [1mSELECT `filters`.* FROM `filters` WHERE `filters`.`filter_type_id` = 8[0m
  [1m[35mFilter Load (0.4ms)[0m  SELECT `filters`.* FROM `filters` WHERE `filters`.`filter_type_id` = 1 ORDER BY name ASC
  [1m[36mFilter Load (0.2ms)[0m  [1mSELECT `filters`.* FROM `filters` WHERE `filters`.`filter_type_id` = 4[0m
  [1m[35mFilter Load (0.2ms)[0m  SELECT `filters`.* FROM `filters` WHERE `filters`.`filter_type_id` = 6
  [1m[36mFilter Load (0.2ms)[0m  [1mSELECT `filters`.* FROM `filters` WHERE `filters`.`filter_type_id` = 11 AND (code != 'offer')[0m
  Rendered restaurants/_admin_form.html.erb (63.6ms)
  Rendered restaurants/_upload_menu.html.erb (2.9ms)
  Rendered restaurants/_upload_photos.html.erb (1.5ms)
  Rendered restaurants/admin_new.html.erb within layouts/admin (72.2ms)
Completed 200 OK in 190ms (Views: 77.0ms | ActiveRecord: 39.4ms)


Started GET "/photos?r_id=" for 127.0.0.1 at 2016-01-18 09:44:28 +0100
Processing by PhotosController#index as JSON
  Parameters: {"r_id"=>""}
  [1m[35mRestaurant Load (1.5ms)[0m  SELECT `restaurants`.* FROM `restaurants` WHERE `restaurants`.`slug` = '' LIMIT 1
  [1m[36mRestaurant Load (0.2ms)[0m  [1mSELECT `restaurants`.* FROM `restaurants` WHERE `restaurants`.`id` = 0 LIMIT 1[0m
Completed 500 Internal Server Error in 4ms

ActiveRecord::RecordNotFound (Couldn't find Restaurant with id=):
  app/controllers/photos_controller.rb:11:in `index'


  Rendered /Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_dispatch/middleware/templates/rescues/_trace.erb (1.3ms)
  Rendered /Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_dispatch/middleware/templates/rescues/_request_and_response.erb (1.2ms)
  Rendered /Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_dispatch/middleware/templates/rescues/diagnostics.erb within rescues/layout (48.0ms)


Started POST "/admin/menus" for 127.0.0.1 at 2016-01-18 09:44:55 +0100
Processing by MenusController#create as JS
  Parameters: {"utf8"=>"âœ“", "authenticity_token"=>"cajmPApKUoLTDgL4nYG/B3GUhj8fezKDJZWxee28cyM=", "menus"=>{"name"=>"sdfg", "restaurant_id"=>""}, "commit"=>"Submit"}
  [1m[35mUser Load (0.3ms)[0m  SELECT `users`.* FROM `users` WHERE `users`.`id` = 1 LIMIT 1
  [1m[36m (0.2ms)[0m  [1mBEGIN[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO `menus` (`created_at`, `menu_name`, `menu_uid`, `name`, `restaurant_id`, `updated_at`, `user_id`) VALUES ('2016-01-18 08:44:55', NULL, NULL, 'sdfg', NULL, '2016-01-18 08:44:55', 1)
  [1m[36m (0.6ms)[0m  [1mCOMMIT[0m
Completed 500 Internal Server Error in 8ms

NoMethodError (undefined method `size' for nil:NilClass):
  app/models/menu.rb:39:in `to_jq_upload'
  app/controllers/menus_controller.rb:25:in `block (2 levels) in create'
  app/controllers/menus_controller.rb:21:in `create'


  Rendered /Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_dispatch/middleware/templates/rescues/_trace.erb (1.0ms)
  Rendered /Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_dispatch/middleware/templates/rescues/_request_and_response.erb (1.0ms)
  Rendered /Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_dispatch/middleware/templates/rescues/diagnostics.erb within rescues/layout (41.7ms)


Started POST "/admin/menus" for 127.0.0.1 at 2016-01-18 09:44:56 +0100
Processing by MenusController#create as JS
  Parameters: {"utf8"=>"âœ“", "authenticity_token"=>"cajmPApKUoLTDgL4nYG/B3GUhj8fezKDJZWxee28cyM=", "menus"=>{"name"=>"sdfg", "restaurant_id"=>""}, "commit"=>"Submit"}
  [1m[35mUser Load (2.3ms)[0m  SELECT `users`.* FROM `users` WHERE `users`.`id` = 1 LIMIT 1
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35mSQL (0.8ms)[0m  INSERT INTO `menus` (`created_at`, `menu_name`, `menu_uid`, `name`, `restaurant_id`, `updated_at`, `user_id`) VALUES ('2016-01-18 08:44:56', NULL, NULL, 'sdfg', NULL, '2016-01-18 08:44:56', 1)
  [1m[36m (0.5ms)[0m  [1mCOMMIT[0m
Completed 500 Internal Server Error in 10ms

NoMethodError (undefined method `size' for nil:NilClass):
  app/models/menu.rb:39:in `to_jq_upload'
  app/controllers/menus_controller.rb:25:in `block (2 levels) in create'
  app/controllers/menus_controller.rb:21:in `create'


  Rendered /Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_dispatch/middleware/templates/rescues/_trace.erb (1.5ms)
  Rendered /Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_dispatch/middleware/templates/rescues/_request_and_response.erb (1.2ms)
  Rendered /Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_dispatch/middleware/templates/rescues/diagnostics.erb within rescues/layout (47.4ms)


Started POST "/admin/menus" for 127.0.0.1 at 2016-01-18 09:44:56 +0100
Processing by MenusController#create as JS
  Parameters: {"utf8"=>"âœ“", "authenticity_token"=>"cajmPApKUoLTDgL4nYG/B3GUhj8fezKDJZWxee28cyM=", "menus"=>{"name"=>"sdfg", "restaurant_id"=>""}, "commit"=>"Submit"}
  [1m[35mUser Load (0.3ms)[0m  SELECT `users`.* FROM `users` WHERE `users`.`id` = 1 LIMIT 1
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO `menus` (`created_at`, `menu_name`, `menu_uid`, `name`, `restaurant_id`, `updated_at`, `user_id`) VALUES ('2016-01-18 08:44:56', NULL, NULL, 'sdfg', NULL, '2016-01-18 08:44:56', 1)
  [1m[36m (0.5ms)[0m  [1mCOMMIT[0m
Completed 500 Internal Server Error in 5ms

NoMethodError (undefined method `size' for nil:NilClass):
  app/models/menu.rb:39:in `to_jq_upload'
  app/controllers/menus_controller.rb:25:in `block (2 levels) in create'
  app/controllers/menus_controller.rb:21:in `create'


  Rendered /Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_dispatch/middleware/templates/rescues/_trace.erb (1.2ms)
  Rendered /Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_dispatch/middleware/templates/rescues/_request_and_response.erb (1.1ms)
  Rendered /Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_dispatch/middleware/templates/rescues/diagnostics.erb within rescues/layout (45.3ms)


Started POST "/admin/menus" for 127.0.0.1 at 2016-01-18 09:44:57 +0100
Processing by MenusController#create as JS
  Parameters: {"utf8"=>"âœ“", "authenticity_token"=>"cajmPApKUoLTDgL4nYG/B3GUhj8fezKDJZWxee28cyM=", "menus"=>{"name"=>"sdfg", "restaurant_id"=>""}, "commit"=>"Submit"}
  [1m[35mUser Load (0.4ms)[0m  SELECT `users`.* FROM `users` WHERE `users`.`id` = 1 LIMIT 1
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO `menus` (`created_at`, `menu_name`, `menu_uid`, `name`, `restaurant_id`, `updated_at`, `user_id`) VALUES ('2016-01-18 08:44:57', NULL, NULL, 'sdfg', NULL, '2016-01-18 08:44:57', 1)
  [1m[36m (1.1ms)[0m  [1mCOMMIT[0m
Completed 500 Internal Server Error in 6ms

NoMethodError (undefined method `size' for nil:NilClass):
  app/models/menu.rb:39:in `to_jq_upload'
  app/controllers/menus_controller.rb:25:in `block (2 levels) in create'
  app/controllers/menus_controller.rb:21:in `create'


  Rendered /Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_dispatch/middleware/templates/rescues/_trace.erb (1.2ms)
  Rendered /Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_dispatch/middleware/templates/rescues/_request_and_response.erb (1.0ms)
  Rendered /Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_dispatch/middleware/templates/rescues/diagnostics.erb within rescues/layout (43.3ms)


Started POST "/admin/menus" for 127.0.0.1 at 2016-01-18 09:44:59 +0100
Processing by MenusController#create as JS
  Parameters: {"utf8"=>"âœ“", "authenticity_token"=>"cajmPApKUoLTDgL4nYG/B3GUhj8fezKDJZWxee28cyM=", "menus"=>{"name"=>"sdfg", "restaurant_id"=>""}, "commit"=>"Submit"}
  [1m[35mUser Load (0.3ms)[0m  SELECT `users`.* FROM `users` WHERE `users`.`id` = 1 LIMIT 1
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO `menus` (`created_at`, `menu_name`, `menu_uid`, `name`, `restaurant_id`, `updated_at`, `user_id`) VALUES ('2016-01-18 08:44:59', NULL, NULL, 'sdfg', NULL, '2016-01-18 08:44:59', 1)
  [1m[36m (2.4ms)[0m  [1mCOMMIT[0m
Completed 500 Internal Server Error in 7ms

NoMethodError (undefined method `size' for nil:NilClass):
  app/models/menu.rb:39:in `to_jq_upload'
  app/controllers/menus_controller.rb:25:in `block (2 levels) in create'
  app/controllers/menus_controller.rb:21:in `create'


  Rendered /Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_dispatch/middleware/templates/rescues/_trace.erb (1.1ms)
  Rendered /Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_dispatch/middleware/templates/rescues/_request_and_response.erb (1.0ms)
  Rendered /Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_dispatch/middleware/templates/rescues/diagnostics.erb within rescues/layout (43.9ms)


Started POST "/admin/menus" for 127.0.0.1 at 2016-01-18 09:45:04 +0100
Processing by MenusController#create as JS
  Parameters: {"utf8"=>"âœ“", "authenticity_token"=>"cajmPApKUoLTDgL4nYG/B3GUhj8fezKDJZWxee28cyM=", "menus"=>{"name"=>"sdfg", "restaurant_id"=>"", "menu"=>#<ActionDispatch::Http::UploadedFile:0x007fc255d1f708 @original_filename="sunday_roast.png", @content_type="image/png", @headers="Content-Disposition: form-data; name=\"menus[menu]\"; filename=\"sunday_roast.png\"\r\nContent-Type: image/png\r\n", @tempfile=#<Tempfile:/var/folders/rf/q4l8n5k56pnbjgkdtzrhq_w00000gn/T/RackMultipart20160118-19170-13li4ba>>}, "commit"=>"Submit", "remotipart_submitted"=>"true", "X-Requested-With"=>"IFrame", "X-Http-Accept"=>"text/javascript, application/javascript, application/ecmascript, application/x-ecmascript, */*; q=0.01"}
  [1m[35mUser Load (3.2ms)[0m  SELECT `users`.* FROM `users` WHERE `users`.`id` = 1 LIMIT 1
  [1m[36m (0.7ms)[0m  [1mBEGIN[0m
  [1m[35mSQL (0.5ms)[0m  INSERT INTO `menus` (`created_at`, `menu_name`, `menu_uid`, `name`, `restaurant_id`, `updated_at`, `user_id`) VALUES ('2016-01-18 08:45:04', 'sunday_roast.png', '2016/01/18/09_45_04_975_sunday_roast.png', 'sdfg', NULL, '2016-01-18 08:45:04', 1)
  [1m[36m (0.5ms)[0m  [1mCOMMIT[0m
Completed 200 OK in 34ms (Views: 0.2ms | ActiveRecord: 4.9ms)


Started POST "/admin/menus" for 127.0.0.1 at 2016-01-18 09:45:05 +0100
Processing by MenusController#create as JS
  Parameters: {"utf8"=>"âœ“", "authenticity_token"=>"cajmPApKUoLTDgL4nYG/B3GUhj8fezKDJZWxee28cyM=", "menus"=>{"name"=>"sdfg", "restaurant_id"=>""}, "commit"=>"Submit"}
  [1m[35mUser Load (0.3ms)[0m  SELECT `users`.* FROM `users` WHERE `users`.`id` = 1 LIMIT 1
  [1m[36m (0.2ms)[0m  [1mBEGIN[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO `menus` (`created_at`, `menu_name`, `menu_uid`, `name`, `restaurant_id`, `updated_at`, `user_id`) VALUES ('2016-01-18 08:45:05', NULL, NULL, 'sdfg', NULL, '2016-01-18 08:45:05', 1)
  [1m[36m (0.6ms)[0m  [1mCOMMIT[0m
Completed 500 Internal Server Error in 6ms

NoMethodError (undefined method `size' for nil:NilClass):
  app/models/menu.rb:39:in `to_jq_upload'
  app/controllers/menus_controller.rb:25:in `block (2 levels) in create'
  app/controllers/menus_controller.rb:21:in `create'


  Rendered /Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_dispatch/middleware/templates/rescues/_trace.erb (1.2ms)
  Rendered /Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_dispatch/middleware/templates/rescues/_request_and_response.erb (0.9ms)
  Rendered /Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_dispatch/middleware/templates/rescues/diagnostics.erb within rescues/layout (42.9ms)


Started POST "/admin/menus" for 127.0.0.1 at 2016-01-18 09:45:06 +0100
Processing by MenusController#create as JS
  Parameters: {"utf8"=>"âœ“", "authenticity_token"=>"cajmPApKUoLTDgL4nYG/B3GUhj8fezKDJZWxee28cyM=", "menus"=>{"name"=>"sdfg", "restaurant_id"=>""}, "commit"=>"Submit"}
  [1m[35mUser Load (0.4ms)[0m  SELECT `users`.* FROM `users` WHERE `users`.`id` = 1 LIMIT 1
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO `menus` (`created_at`, `menu_name`, `menu_uid`, `name`, `restaurant_id`, `updated_at`, `user_id`) VALUES ('2016-01-18 08:45:06', NULL, NULL, 'sdfg', NULL, '2016-01-18 08:45:06', 1)
  [1m[36m (0.6ms)[0m  [1mCOMMIT[0m
Completed 500 Internal Server Error in 7ms

NoMethodError (undefined method `size' for nil:NilClass):
  app/models/menu.rb:39:in `to_jq_upload'
  app/controllers/menus_controller.rb:25:in `block (2 levels) in create'
  app/controllers/menus_controller.rb:21:in `create'


  Rendered /Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_dispatch/middleware/templates/rescues/_trace.erb (1.2ms)
  Rendered /Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_dispatch/middleware/templates/rescues/_request_and_response.erb (1.1ms)
  Rendered /Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_dispatch/middleware/templates/rescues/diagnostics.erb within rescues/layout (43.6ms)


Started POST "/admin/menus" for 127.0.0.1 at 2016-01-18 09:45:07 +0100
Processing by MenusController#create as JS
  Parameters: {"utf8"=>"âœ“", "authenticity_token"=>"cajmPApKUoLTDgL4nYG/B3GUhj8fezKDJZWxee28cyM=", "menus"=>{"name"=>"sdfg", "restaurant_id"=>""}, "commit"=>"Submit"}
  [1m[35mUser Load (0.3ms)[0m  SELECT `users`.* FROM `users` WHERE `users`.`id` = 1 LIMIT 1
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35mSQL (0.8ms)[0m  INSERT INTO `menus` (`created_at`, `menu_name`, `menu_uid`, `name`, `restaurant_id`, `updated_at`, `user_id`) VALUES ('2016-01-18 08:45:07', NULL, NULL, 'sdfg', NULL, '2016-01-18 08:45:07', 1)
  [1m[36m (1.1ms)[0m  [1mCOMMIT[0m
Completed 500 Internal Server Error in 9ms

NoMethodError (undefined method `size' for nil:NilClass):
  app/models/menu.rb:39:in `to_jq_upload'
  app/controllers/menus_controller.rb:25:in `block (2 levels) in create'
  app/controllers/menus_controller.rb:21:in `create'


  Rendered /Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_dispatch/middleware/templates/rescues/_trace.erb (1.2ms)
  Rendered /Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_dispatch/middleware/templates/rescues/_request_and_response.erb (1.0ms)
  Rendered /Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_dispatch/middleware/templates/rescues/diagnostics.erb within rescues/layout (42.9ms)


Started POST "/admin/menus" for 127.0.0.1 at 2016-01-18 09:45:26 +0100
Processing by MenusController#create as JS
  Parameters: {"utf8"=>"âœ“", "authenticity_token"=>"cajmPApKUoLTDgL4nYG/B3GUhj8fezKDJZWxee28cyM=", "menus"=>{"name"=>"sdfg", "restaurant_id"=>""}, "commit"=>"Submit"}
  [1m[35mUser Load (0.7ms)[0m  SELECT `users`.* FROM `users` WHERE `users`.`id` = 1 LIMIT 1
  [1m[36m (0.2ms)[0m  [1mBEGIN[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO `menus` (`created_at`, `menu_name`, `menu_uid`, `name`, `restaurant_id`, `updated_at`, `user_id`) VALUES ('2016-01-18 08:45:26', NULL, NULL, 'sdfg', NULL, '2016-01-18 08:45:26', 1)
  [1m[36m (0.8ms)[0m  [1mCOMMIT[0m
Completed 500 Internal Server Error in 8ms

NoMethodError (undefined method `size' for nil:NilClass):
  app/models/menu.rb:39:in `to_jq_upload'
  app/controllers/menus_controller.rb:25:in `block (2 levels) in create'
  app/controllers/menus_controller.rb:21:in `create'


  Rendered /Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_dispatch/middleware/templates/rescues/_trace.erb (1.1ms)
  Rendered /Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_dispatch/middleware/templates/rescues/_request_and_response.erb (1.1ms)
  Rendered /Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_dispatch/middleware/templates/rescues/diagnostics.erb within rescues/layout (43.1ms)


Started GET "/admin/restaurants" for 127.0.0.1 at 2016-01-18 09:45:28 +0100
Processing by RestaurantsController#index as HTML
  [1m[35mUser Load (0.7ms)[0m  SELECT `users`.* FROM `users` WHERE `users`.`id` = 1 LIMIT 1
  Rendered shared/_restaurant_manage_tabs.html.erb (1.0ms)
  Rendered restaurants/_condition_fields.html.erb (19.5ms)
  [1m[36mRestaurant Load (0.7ms)[0m  [1mSELECT `restaurants`.* FROM `restaurants` ORDER BY disabled ASC,created_at DESC LIMIT 12 OFFSET 0[0m
  [1m[35mPhoto Load (0.4ms)[0m  SELECT `photos`.* FROM `photos` WHERE (restaurant_id = 876 and cover = true and status = 1) LIMIT 1
  [1m[36mPhoto Load (0.3ms)[0m  [1mSELECT `photos`.* FROM `photos` WHERE `photos`.`restaurant_id` = 876 AND `photos`.`status` = 1 ORDER BY restaurant_id ASC, created_at DESC LIMIT 1[0m
  [1m[35mPhoto Load (0.4ms)[0m  SELECT `photos`.* FROM `photos` WHERE (restaurant_id = 851 and cover = true and status = 1) LIMIT 1
  [1m[36mPhoto Load (0.3ms)[0m  [1mSELECT `photos`.* FROM `photos` WHERE `photos`.`restaurant_id` = 851 AND `photos`.`status` = 1 ORDER BY restaurant_id ASC, created_at DESC LIMIT 1[0m
  [1m[35mPhoto Load (0.5ms)[0m  SELECT `photos`.* FROM `photos` WHERE (restaurant_id = 693 and cover = true and status = 1) LIMIT 1
  [1m[36mPhoto Load (0.4ms)[0m  [1mSELECT `photos`.* FROM `photos` WHERE `photos`.`restaurant_id` = 693 AND `photos`.`status` = 1 ORDER BY restaurant_id ASC, created_at DESC LIMIT 1[0m
  [1m[35mPhoto Load (0.3ms)[0m  SELECT `photos`.* FROM `photos` WHERE (restaurant_id = 686 and cover = true and status = 1) LIMIT 1
  [1m[36mPhoto Load (0.3ms)[0m  [1mSELECT `photos`.* FROM `photos` WHERE `photos`.`restaurant_id` = 686 AND `photos`.`status` = 1 ORDER BY restaurant_id ASC, created_at DESC LIMIT 1[0m
  [1m[35mPhoto Load (0.3ms)[0m  SELECT `photos`.* FROM `photos` WHERE (restaurant_id = 669 and cover = true and status = 1) LIMIT 1
  [1m[36mPhoto Load (0.3ms)[0m  [1mSELECT `photos`.* FROM `photos` WHERE `photos`.`restaurant_id` = 669 AND `photos`.`status` = 1 ORDER BY restaurant_id ASC, created_at DESC LIMIT 1[0m
  [1m[35mPhoto Load (0.3ms)[0m  SELECT `photos`.* FROM `photos` WHERE (restaurant_id = 251 and cover = true and status = 1) LIMIT 1
  [1m[36mPhoto Load (0.3ms)[0m  [1mSELECT `photos`.* FROM `photos` WHERE `photos`.`restaurant_id` = 251 AND `photos`.`status` = 1 ORDER BY restaurant_id ASC, created_at DESC LIMIT 1[0m
  [1m[35mPhoto Load (0.3ms)[0m  SELECT `photos`.* FROM `photos` WHERE (restaurant_id = 250 and cover = true and status = 1) LIMIT 1
  [1m[36mPhoto Load (0.3ms)[0m  [1mSELECT `photos`.* FROM `photos` WHERE `photos`.`restaurant_id` = 250 AND `photos`.`status` = 1 ORDER BY restaurant_id ASC, created_at DESC LIMIT 1[0m
  [1m[35mPhoto Load (0.3ms)[0m  SELECT `photos`.* FROM `photos` WHERE (restaurant_id = 237 and cover = true and status = 1) LIMIT 1
  [1m[36mPhoto Load (0.3ms)[0m  [1mSELECT `photos`.* FROM `photos` WHERE `photos`.`restaurant_id` = 237 AND `photos`.`status` = 1 ORDER BY restaurant_id ASC, created_at DESC LIMIT 1[0m
  [1m[35mPhoto Load (0.3ms)[0m  SELECT `photos`.* FROM `photos` WHERE (restaurant_id = 231 and cover = true and status = 1) LIMIT 1
  [1m[36mPhoto Load (0.3ms)[0m  [1mSELECT `photos`.* FROM `photos` WHERE `photos`.`restaurant_id` = 231 AND `photos`.`status` = 1 ORDER BY restaurant_id ASC, created_at DESC LIMIT 1[0m
  [1m[35mPhoto Load (0.3ms)[0m  SELECT `photos`.* FROM `photos` WHERE (restaurant_id = 222 and cover = true and status = 1) LIMIT 1
  [1m[36mPhoto Load (0.3ms)[0m  [1mSELECT `photos`.* FROM `photos` WHERE `photos`.`restaurant_id` = 222 AND `photos`.`status` = 1 ORDER BY restaurant_id ASC, created_at DESC LIMIT 1[0m
  [1m[35mPhoto Load (0.3ms)[0m  SELECT `photos`.* FROM `photos` WHERE (restaurant_id = 221 and cover = true and status = 1) LIMIT 1
  [1m[36mPhoto Load (0.3ms)[0m  [1mSELECT `photos`.* FROM `photos` WHERE `photos`.`restaurant_id` = 221 AND `photos`.`status` = 1 ORDER BY restaurant_id ASC, created_at DESC LIMIT 1[0m
  [1m[35mPhoto Load (0.3ms)[0m  SELECT `photos`.* FROM `photos` WHERE (restaurant_id = 216 and cover = true and status = 1) LIMIT 1
  [1m[36mPhoto Load (0.3ms)[0m  [1mSELECT `photos`.* FROM `photos` WHERE `photos`.`restaurant_id` = 216 AND `photos`.`status` = 1 ORDER BY restaurant_id ASC, created_at DESC LIMIT 1[0m
  [1m[35m (0.4ms)[0m  SELECT COUNT(*) FROM `restaurants` 
  Rendered restaurants/index.html.erb within layouts/admin (123.1ms)
Completed 200 OK in 131ms (Views: 119.6ms | ActiveRecord: 9.4ms)


Started GET "/oriental-kitchen/edit" for 127.0.0.1 at 2016-01-18 09:45:40 +0100
Processing by RestaurantsController#edit as HTML
  Parameters: {"id"=>"oriental-kitchen"}
  [1m[36mUser Load (0.3ms)[0m  [1mSELECT `users`.* FROM `users` WHERE `users`.`id` = 1 LIMIT 1[0m
  [1m[35mRestaurant Load (1.4ms)[0m  SELECT `restaurants`.* FROM `restaurants` WHERE `restaurants`.`slug` = 'oriental-kitchen' LIMIT 1
  [1m[36mSchedule Load (0.3ms)[0m  [1mSELECT `schedules`.* FROM `schedules` WHERE `schedules`.`restaurant_id` = 876 ORDER BY day_of_week ASC[0m
  [1m[35mPhoto Load (0.3ms)[0m  SELECT `photos`.* FROM `photos` WHERE `photos`.`restaurant_id` = 876
  [1m[36mFilter Load (1.0ms)[0m  [1mSELECT `filters`.* FROM `filters` INNER JOIN `filters_restaurants` ON `filters`.`id` = `filters_restaurants`.`filter_id` WHERE `filters_restaurants`.`restaurant_id` = 876 AND `filters`.`code` = 'cuisine'[0m
  [1m[35m (1.0ms)[0m  SELECT `filters`.id FROM `filters` INNER JOIN `filters_restaurants` ON `filters`.`id` = `filters_restaurants`.`filter_id` WHERE `filters_restaurants`.`restaurant_id` = 876
  [1m[36mFilterType Load (0.2ms)[0m  [1mSELECT `filter_types`.* FROM `filter_types` WHERE `filter_types`.`code` = 'hal_status' LIMIT 1[0m
  [1m[35mFilterType Load (0.1ms)[0m  SELECT `filter_types`.* FROM `filter_types` WHERE `filter_types`.`code` = 'price' LIMIT 1
  [1m[36mFilterType Load (0.2ms)[0m  [1mSELECT `filter_types`.* FROM `filter_types` WHERE `filter_types`.`code` = 'cuisine' LIMIT 1[0m
  [1m[35mFilterType Load (0.1ms)[0m  SELECT `filter_types`.* FROM `filter_types` WHERE `filter_types`.`code` = 'alcohol' LIMIT 1
  [1m[36mFilterType Load (0.1ms)[0m  [1mSELECT `filter_types`.* FROM `filter_types` WHERE `filter_types`.`code` = 'features' LIMIT 1[0m
  Rendered restaurants/_googlemap.html.erb (0.0ms)
  [1m[35mFilter Load (0.3ms)[0m  SELECT `filters`.* FROM `filters` WHERE `filters`.`filter_type_id` = 8
  [1m[36mFilter Load (0.2ms)[0m  [1mSELECT `filters`.* FROM `filters` WHERE `filters`.`filter_type_id` = 1 ORDER BY name ASC[0m
  [1m[35mFilter Load (0.2ms)[0m  SELECT `filters`.* FROM `filters` WHERE `filters`.`filter_type_id` = 4
  [1m[36mFilter Load (0.2ms)[0m  [1mSELECT `filters`.* FROM `filters` WHERE `filters`.`filter_type_id` = 6[0m
  [1m[35mFilter Load (0.2ms)[0m  SELECT `filters`.* FROM `filters` WHERE `filters`.`filter_type_id` = 11 AND (code != 'offer')
  Rendered restaurants/_admin_form.html.erb (49.9ms)
  [1m[36mMenu Load (0.3ms)[0m  [1mSELECT `menus`.* FROM `menus` WHERE `menus`.`restaurant_id` = 876[0m
  Rendered restaurants/_upload_menu.html.erb (2.8ms)
  Rendered restaurants/_upload_photos.html.erb (1.0ms)
  Rendered restaurants/edit.html.erb within layouts/admin (57.1ms)
Completed 200 OK in 107ms (Views: 86.8ms | ActiveRecord: 6.5ms)


Started GET "/photos?r_id=876" for 127.0.0.1 at 2016-01-18 09:45:41 +0100
Processing by PhotosController#index as JSON
  Parameters: {"r_id"=>"876"}
  [1m[35mRestaurant Load (1.6ms)[0m  SELECT `restaurants`.* FROM `restaurants` WHERE `restaurants`.`slug` = '876' LIMIT 1
  [1m[36mRestaurant Load (1.0ms)[0m  [1mSELECT `restaurants`.* FROM `restaurants` WHERE `restaurants`.`id` = 876 LIMIT 1[0m
  [1m[35mPhoto Load (0.5ms)[0m  SELECT `photos`.* FROM `photos` WHERE `photos`.`restaurant_id` = 876
Completed 200 OK in 8ms (Views: 0.1ms | ActiveRecord: 3.0ms)


Started POST "/admin/menus" for 127.0.0.1 at 2016-01-18 09:45:59 +0100
Processing by MenusController#create as JS
  Parameters: {"utf8"=>"âœ“", "authenticity_token"=>"cajmPApKUoLTDgL4nYG/B3GUhj8fezKDJZWxee28cyM=", "menus"=>{"name"=>"Steak", "restaurant_id"=>"876", "menu"=>#<ActionDispatch::Http::UploadedFile:0x007fc244c4df20 @original_filename="steak.png", @content_type="image/png", @headers="Content-Disposition: form-data; name=\"menus[menu]\"; filename=\"steak.png\"\r\nContent-Type: image/png\r\n", @tempfile=#<Tempfile:/var/folders/rf/q4l8n5k56pnbjgkdtzrhq_w00000gn/T/RackMultipart20160118-19170-16hyllf>>}, "commit"=>"Submit", "remotipart_submitted"=>"true", "X-Requested-With"=>"IFrame", "X-Http-Accept"=>"text/javascript, application/javascript, application/ecmascript, application/x-ecmascript, */*; q=0.01"}
  [1m[36mUser Load (1.7ms)[0m  [1mSELECT `users`.* FROM `users` WHERE `users`.`id` = 1 LIMIT 1[0m
  [1m[35m (0.1ms)[0m  BEGIN
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO `menus` (`created_at`, `menu_name`, `menu_uid`, `name`, `restaurant_id`, `updated_at`, `user_id`) VALUES ('2016-01-18 08:45:59', 'steak.png', '2016/01/18/09_45_59_170_steak.png', 'Steak', 876, '2016-01-18 08:45:59', 1)[0m
  [1m[35m (0.5ms)[0m  COMMIT
Completed 200 OK in 11ms (Views: 0.1ms | ActiveRecord: 2.6ms)


Started POST "/admin/menus" for 127.0.0.1 at 2016-01-18 09:46:01 +0100
Processing by MenusController#create as JS
  Parameters: {"utf8"=>"âœ“", "authenticity_token"=>"cajmPApKUoLTDgL4nYG/B3GUhj8fezKDJZWxee28cyM=", "menus"=>{"name"=>"Steak", "restaurant_id"=>"876"}, "commit"=>"Submit"}
  [1m[36mUser Load (0.3ms)[0m  [1mSELECT `users`.* FROM `users` WHERE `users`.`id` = 1 LIMIT 1[0m
  [1m[35m (0.1ms)[0m  BEGIN
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO `menus` (`created_at`, `menu_name`, `menu_uid`, `name`, `restaurant_id`, `updated_at`, `user_id`) VALUES ('2016-01-18 08:46:01', NULL, NULL, 'Steak', 876, '2016-01-18 08:46:01', 1)[0m
  [1m[35m (0.5ms)[0m  COMMIT
Completed 500 Internal Server Error in 6ms

NoMethodError (undefined method `size' for nil:NilClass):
  app/models/menu.rb:39:in `to_jq_upload'
  app/controllers/menus_controller.rb:25:in `block (2 levels) in create'
  app/controllers/menus_controller.rb:21:in `create'


  Rendered /Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_dispatch/middleware/templates/rescues/_trace.erb (1.1ms)
  Rendered /Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_dispatch/middleware/templates/rescues/_request_and_response.erb (0.9ms)
  Rendered /Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_dispatch/middleware/templates/rescues/diagnostics.erb within rescues/layout (42.2ms)


Started GET "/admin/restaurants" for 127.0.0.1 at 2016-01-18 09:46:11 +0100
Processing by RestaurantsController#index as HTML
  [1m[36mUser Load (0.3ms)[0m  [1mSELECT `users`.* FROM `users` WHERE `users`.`id` = 1 LIMIT 1[0m
  Rendered shared/_restaurant_manage_tabs.html.erb (0.8ms)
  Rendered restaurants/_condition_fields.html.erb (8.6ms)
  [1m[35mRestaurant Load (0.8ms)[0m  SELECT `restaurants`.* FROM `restaurants` ORDER BY disabled ASC,created_at DESC LIMIT 12 OFFSET 0
  [1m[36mPhoto Load (0.3ms)[0m  [1mSELECT `photos`.* FROM `photos` WHERE (restaurant_id = 876 and cover = true and status = 1) LIMIT 1[0m
  [1m[35mPhoto Load (0.3ms)[0m  SELECT `photos`.* FROM `photos` WHERE `photos`.`restaurant_id` = 876 AND `photos`.`status` = 1 ORDER BY restaurant_id ASC, created_at DESC LIMIT 1
  [1m[36mPhoto Load (0.4ms)[0m  [1mSELECT `photos`.* FROM `photos` WHERE (restaurant_id = 851 and cover = true and status = 1) LIMIT 1[0m
  [1m[35mPhoto Load (0.3ms)[0m  SELECT `photos`.* FROM `photos` WHERE `photos`.`restaurant_id` = 851 AND `photos`.`status` = 1 ORDER BY restaurant_id ASC, created_at DESC LIMIT 1
  [1m[36mPhoto Load (0.3ms)[0m  [1mSELECT `photos`.* FROM `photos` WHERE (restaurant_id = 693 and cover = true and status = 1) LIMIT 1[0m
  [1m[35mPhoto Load (0.3ms)[0m  SELECT `photos`.* FROM `photos` WHERE `photos`.`restaurant_id` = 693 AND `photos`.`status` = 1 ORDER BY restaurant_id ASC, created_at DESC LIMIT 1
  [1m[36mPhoto Load (0.3ms)[0m  [1mSELECT `photos`.* FROM `photos` WHERE (restaurant_id = 686 and cover = true and status = 1) LIMIT 1[0m
  [1m[35mPhoto Load (0.3ms)[0m  SELECT `photos`.* FROM `photos` WHERE `photos`.`restaurant_id` = 686 AND `photos`.`status` = 1 ORDER BY restaurant_id ASC, created_at DESC LIMIT 1
  [1m[36mPhoto Load (0.3ms)[0m  [1mSELECT `photos`.* FROM `photos` WHERE (restaurant_id = 669 and cover = true and status = 1) LIMIT 1[0m
  [1m[35mPhoto Load (0.3ms)[0m  SELECT `photos`.* FROM `photos` WHERE `photos`.`restaurant_id` = 669 AND `photos`.`status` = 1 ORDER BY restaurant_id ASC, created_at DESC LIMIT 1
  [1m[36mPhoto Load (0.3ms)[0m  [1mSELECT `photos`.* FROM `photos` WHERE (restaurant_id = 251 and cover = true and status = 1) LIMIT 1[0m
  [1m[35mPhoto Load (0.3ms)[0m  SELECT `photos`.* FROM `photos` WHERE `photos`.`restaurant_id` = 251 AND `photos`.`status` = 1 ORDER BY restaurant_id ASC, created_at DESC LIMIT 1
  [1m[36mPhoto Load (0.3ms)[0m  [1mSELECT `photos`.* FROM `photos` WHERE (restaurant_id = 250 and cover = true and status = 1) LIMIT 1[0m
  [1m[35mPhoto Load (0.3ms)[0m  SELECT `photos`.* FROM `photos` WHERE `photos`.`restaurant_id` = 250 AND `photos`.`status` = 1 ORDER BY restaurant_id ASC, created_at DESC LIMIT 1
  [1m[36mPhoto Load (0.3ms)[0m  [1mSELECT `photos`.* FROM `photos` WHERE (restaurant_id = 237 and cover = true and status = 1) LIMIT 1[0m
  [1m[35mPhoto Load (0.3ms)[0m  SELECT `photos`.* FROM `photos` WHERE `photos`.`restaurant_id` = 237 AND `photos`.`status` = 1 ORDER BY restaurant_id ASC, created_at DESC LIMIT 1
  [1m[36mPhoto Load (0.4ms)[0m  [1mSELECT `photos`.* FROM `photos` WHERE (restaurant_id = 231 and cover = true and status = 1) LIMIT 1[0m
  [1m[35mPhoto Load (0.3ms)[0m  SELECT `photos`.* FROM `photos` WHERE `photos`.`restaurant_id` = 231 AND `photos`.`status` = 1 ORDER BY restaurant_id ASC, created_at DESC LIMIT 1
  [1m[36mPhoto Load (0.3ms)[0m  [1mSELECT `photos`.* FROM `photos` WHERE (restaurant_id = 222 and cover = true and status = 1) LIMIT 1[0m
  [1m[35mPhoto Load (0.3ms)[0m  SELECT `photos`.* FROM `photos` WHERE `photos`.`restaurant_id` = 222 AND `photos`.`status` = 1 ORDER BY restaurant_id ASC, created_at DESC LIMIT 1
  [1m[36mPhoto Load (0.3ms)[0m  [1mSELECT `photos`.* FROM `photos` WHERE (restaurant_id = 221 and cover = true and status = 1) LIMIT 1[0m
  [1m[35mPhoto Load (0.3ms)[0m  SELECT `photos`.* FROM `photos` WHERE `photos`.`restaurant_id` = 221 AND `photos`.`status` = 1 ORDER BY restaurant_id ASC, created_at DESC LIMIT 1
  [1m[36mPhoto Load (0.3ms)[0m  [1mSELECT `photos`.* FROM `photos` WHERE (restaurant_id = 216 and cover = true and status = 1) LIMIT 1[0m
  [1m[35mPhoto Load (0.3ms)[0m  SELECT `photos`.* FROM `photos` WHERE `photos`.`restaurant_id` = 216 AND `photos`.`status` = 1 ORDER BY restaurant_id ASC, created_at DESC LIMIT 1
  [1m[36m (0.5ms)[0m  [1mSELECT COUNT(*) FROM `restaurants` [0m
  Rendered restaurants/index.html.erb within layouts/admin (82.7ms)
Completed 200 OK in 91ms (Views: 80.0ms | ActiveRecord: 8.7ms)


Started GET "/oriental-kitchen/edit" for 127.0.0.1 at 2016-01-18 09:46:15 +0100
Processing by RestaurantsController#edit as HTML
  Parameters: {"id"=>"oriental-kitchen"}
  [1m[35mUser Load (0.3ms)[0m  SELECT `users`.* FROM `users` WHERE `users`.`id` = 1 LIMIT 1
  [1m[36mRestaurant Load (1.3ms)[0m  [1mSELECT `restaurants`.* FROM `restaurants` WHERE `restaurants`.`slug` = 'oriental-kitchen' LIMIT 1[0m
  [1m[35mSchedule Load (0.2ms)[0m  SELECT `schedules`.* FROM `schedules` WHERE `schedules`.`restaurant_id` = 876 ORDER BY day_of_week ASC
  [1m[36mPhoto Load (0.5ms)[0m  [1mSELECT `photos`.* FROM `photos` WHERE `photos`.`restaurant_id` = 876[0m
  [1m[35mFilter Load (1.1ms)[0m  SELECT `filters`.* FROM `filters` INNER JOIN `filters_restaurants` ON `filters`.`id` = `filters_restaurants`.`filter_id` WHERE `filters_restaurants`.`restaurant_id` = 876 AND `filters`.`code` = 'cuisine'
  [1m[36m (1.2ms)[0m  [1mSELECT `filters`.id FROM `filters` INNER JOIN `filters_restaurants` ON `filters`.`id` = `filters_restaurants`.`filter_id` WHERE `filters_restaurants`.`restaurant_id` = 876[0m
  [1m[35mFilterType Load (0.2ms)[0m  SELECT `filter_types`.* FROM `filter_types` WHERE `filter_types`.`code` = 'hal_status' LIMIT 1
  [1m[36mFilterType Load (0.2ms)[0m  [1mSELECT `filter_types`.* FROM `filter_types` WHERE `filter_types`.`code` = 'price' LIMIT 1[0m
  [1m[35mFilterType Load (0.2ms)[0m  SELECT `filter_types`.* FROM `filter_types` WHERE `filter_types`.`code` = 'cuisine' LIMIT 1
  [1m[36mFilterType Load (0.2ms)[0m  [1mSELECT `filter_types`.* FROM `filter_types` WHERE `filter_types`.`code` = 'alcohol' LIMIT 1[0m
  [1m[35mFilterType Load (0.2ms)[0m  SELECT `filter_types`.* FROM `filter_types` WHERE `filter_types`.`code` = 'features' LIMIT 1
  Rendered restaurants/_googlemap.html.erb (0.0ms)
  [1m[36mFilter Load (0.4ms)[0m  [1mSELECT `filters`.* FROM `filters` WHERE `filters`.`filter_type_id` = 8[0m
  [1m[35mFilter Load (0.3ms)[0m  SELECT `filters`.* FROM `filters` WHERE `filters`.`filter_type_id` = 1 ORDER BY name ASC
  [1m[36mFilter Load (0.2ms)[0m  [1mSELECT `filters`.* FROM `filters` WHERE `filters`.`filter_type_id` = 4[0m
  [1m[35mFilter Load (0.2ms)[0m  SELECT `filters`.* FROM `filters` WHERE `filters`.`filter_type_id` = 6
  [1m[36mFilter Load (0.2ms)[0m  [1mSELECT `filters`.* FROM `filters` WHERE `filters`.`filter_type_id` = 11 AND (code != 'offer')[0m
  Rendered restaurants/_admin_form.html.erb (48.3ms)
  [1m[35mMenu Load (0.3ms)[0m  SELECT `menus`.* FROM `menus` WHERE `menus`.`restaurant_id` = 876
  Rendered restaurants/_upload_menu.html.erb (3.7ms)
  Rendered restaurants/_upload_photos.html.erb (0.9ms)
  Rendered restaurants/edit.html.erb within layouts/admin (55.6ms)
Completed 200 OK in 80ms (Views: 59.4ms | ActiveRecord: 6.9ms)


Started GET "/photos?r_id=876" for 127.0.0.1 at 2016-01-18 09:46:16 +0100
Processing by PhotosController#index as JSON
  Parameters: {"r_id"=>"876"}
  [1m[36mRestaurant Load (1.4ms)[0m  [1mSELECT `restaurants`.* FROM `restaurants` WHERE `restaurants`.`slug` = '876' LIMIT 1[0m
  [1m[35mRestaurant Load (0.3ms)[0m  SELECT `restaurants`.* FROM `restaurants` WHERE `restaurants`.`id` = 876 LIMIT 1
  [1m[36mPhoto Load (0.5ms)[0m  [1mSELECT `photos`.* FROM `photos` WHERE `photos`.`restaurant_id` = 876[0m
Completed 200 OK in 5ms (Views: 0.1ms | ActiveRecord: 2.2ms)


Started POST "/admin/menus" for 127.0.0.1 at 2016-01-18 09:46:32 +0100
Processing by MenusController#create as JS
  Parameters: {"utf8"=>"âœ“", "authenticity_token"=>"cajmPApKUoLTDgL4nYG/B3GUhj8fezKDJZWxee28cyM=", "menus"=>{"name"=>"Sunday roast", "restaurant_id"=>"876", "menu"=>#<ActionDispatch::Http::UploadedFile:0x007fc259c88188 @original_filename="sunday_roast.png", @content_type="image/png", @headers="Content-Disposition: form-data; name=\"menus[menu]\"; filename=\"sunday_roast.png\"\r\nContent-Type: image/png\r\n", @tempfile=#<Tempfile:/var/folders/rf/q4l8n5k56pnbjgkdtzrhq_w00000gn/T/RackMultipart20160118-19170-iw28u2>>}, "commit"=>"Submit", "remotipart_submitted"=>"true", "X-Requested-With"=>"IFrame", "X-Http-Accept"=>"text/javascript, application/javascript, application/ecmascript, application/x-ecmascript, */*; q=0.01"}
  [1m[35mUser Load (0.4ms)[0m  SELECT `users`.* FROM `users` WHERE `users`.`id` = 1 LIMIT 1
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO `menus` (`created_at`, `menu_name`, `menu_uid`, `name`, `restaurant_id`, `updated_at`, `user_id`) VALUES ('2016-01-18 08:46:32', 'sunday_roast.png', '2016/01/18/09_46_32_953_sunday_roast.png', 'Sunday roast', 876, '2016-01-18 08:46:32', 1)
  [1m[36m (0.4ms)[0m  [1mCOMMIT[0m
Completed 200 OK in 8ms (Views: 0.1ms | ActiveRecord: 1.3ms)


Started GET "/oriental-kitchen/edit" for 127.0.0.1 at 2016-01-18 09:46:34 +0100
Processing by RestaurantsController#edit as HTML
  Parameters: {"id"=>"oriental-kitchen"}
  [1m[35mUser Load (0.4ms)[0m  SELECT `users`.* FROM `users` WHERE `users`.`id` = 1 LIMIT 1
  [1m[36mRestaurant Load (2.3ms)[0m  [1mSELECT `restaurants`.* FROM `restaurants` WHERE `restaurants`.`slug` = 'oriental-kitchen' LIMIT 1[0m
  [1m[35mSchedule Load (0.3ms)[0m  SELECT `schedules`.* FROM `schedules` WHERE `schedules`.`restaurant_id` = 876 ORDER BY day_of_week ASC
  [1m[36mPhoto Load (0.6ms)[0m  [1mSELECT `photos`.* FROM `photos` WHERE `photos`.`restaurant_id` = 876[0m
  [1m[35mFilter Load (1.1ms)[0m  SELECT `filters`.* FROM `filters` INNER JOIN `filters_restaurants` ON `filters`.`id` = `filters_restaurants`.`filter_id` WHERE `filters_restaurants`.`restaurant_id` = 876 AND `filters`.`code` = 'cuisine'
  [1m[36m (1.1ms)[0m  [1mSELECT `filters`.id FROM `filters` INNER JOIN `filters_restaurants` ON `filters`.`id` = `filters_restaurants`.`filter_id` WHERE `filters_restaurants`.`restaurant_id` = 876[0m
  [1m[35mFilterType Load (0.2ms)[0m  SELECT `filter_types`.* FROM `filter_types` WHERE `filter_types`.`code` = 'hal_status' LIMIT 1
  [1m[36mFilterType Load (0.2ms)[0m  [1mSELECT `filter_types`.* FROM `filter_types` WHERE `filter_types`.`code` = 'price' LIMIT 1[0m
  [1m[35mFilterType Load (0.1ms)[0m  SELECT `filter_types`.* FROM `filter_types` WHERE `filter_types`.`code` = 'cuisine' LIMIT 1
  [1m[36mFilterType Load (0.1ms)[0m  [1mSELECT `filter_types`.* FROM `filter_types` WHERE `filter_types`.`code` = 'alcohol' LIMIT 1[0m
  [1m[35mFilterType Load (0.1ms)[0m  SELECT `filter_types`.* FROM `filter_types` WHERE `filter_types`.`code` = 'features' LIMIT 1
  Rendered restaurants/_googlemap.html.erb (0.1ms)
  [1m[36mFilter Load (0.3ms)[0m  [1mSELECT `filters`.* FROM `filters` WHERE `filters`.`filter_type_id` = 8[0m
  [1m[35mFilter Load (0.2ms)[0m  SELECT `filters`.* FROM `filters` WHERE `filters`.`filter_type_id` = 1 ORDER BY name ASC
  [1m[36mFilter Load (0.2ms)[0m  [1mSELECT `filters`.* FROM `filters` WHERE `filters`.`filter_type_id` = 4[0m
  [1m[35mFilter Load (0.2ms)[0m  SELECT `filters`.* FROM `filters` WHERE `filters`.`filter_type_id` = 6
  [1m[36mFilter Load (0.3ms)[0m  [1mSELECT `filters`.* FROM `filters` WHERE `filters`.`filter_type_id` = 11 AND (code != 'offer')[0m
  Rendered restaurants/_admin_form.html.erb (44.6ms)
  [1m[35mMenu Load (0.3ms)[0m  SELECT `menus`.* FROM `menus` WHERE `menus`.`restaurant_id` = 876
  Rendered restaurants/_upload_menu.html.erb (3.8ms)
  Rendered restaurants/_upload_photos.html.erb (1.0ms)
  Rendered restaurants/edit.html.erb within layouts/admin (52.5ms)
Completed 200 OK in 81ms (Views: 56.1ms | ActiveRecord: 7.9ms)


Started GET "/photos?r_id=876" for 127.0.0.1 at 2016-01-18 09:46:36 +0100
Processing by PhotosController#index as JSON
  Parameters: {"r_id"=>"876"}
  [1m[36mRestaurant Load (1.6ms)[0m  [1mSELECT `restaurants`.* FROM `restaurants` WHERE `restaurants`.`slug` = '876' LIMIT 1[0m
  [1m[35mRestaurant Load (0.3ms)[0m  SELECT `restaurants`.* FROM `restaurants` WHERE `restaurants`.`id` = 876 LIMIT 1
  [1m[36mPhoto Load (0.3ms)[0m  [1mSELECT `photos`.* FROM `photos` WHERE `photos`.`restaurant_id` = 876[0m
Completed 200 OK in 7ms (Views: 0.1ms | ActiveRecord: 2.3ms)


Started POST "/admin/menus" for 127.0.0.1 at 2016-01-18 09:46:57 +0100
Processing by MenusController#create as JS
  Parameters: {"utf8"=>"âœ“", "authenticity_token"=>"cajmPApKUoLTDgL4nYG/B3GUhj8fezKDJZWxee28cyM=", "menus"=>{"name"=>"Persian", "restaurant_id"=>"876", "menu"=>#<ActionDispatch::Http::UploadedFile:0x007fc25ad8ed60 @original_filename="persian.png", @content_type="image/png", @headers="Content-Disposition: form-data; name=\"menus[menu]\"; filename=\"persian.png\"\r\nContent-Type: image/png\r\n", @tempfile=#<Tempfile:/var/folders/rf/q4l8n5k56pnbjgkdtzrhq_w00000gn/T/RackMultipart20160118-19170-ac888f>>}, "commit"=>"Submit", "remotipart_submitted"=>"true", "X-Requested-With"=>"IFrame", "X-Http-Accept"=>"text/javascript, application/javascript, application/ecmascript, application/x-ecmascript, */*; q=0.01"}
  [1m[35mUser Load (5.9ms)[0m  SELECT `users`.* FROM `users` WHERE `users`.`id` = 1 LIMIT 1
  [1m[36m (0.9ms)[0m  [1mBEGIN[0m
  [1m[35mSQL (7.8ms)[0m  INSERT INTO `menus` (`created_at`, `menu_name`, `menu_uid`, `name`, `restaurant_id`, `updated_at`, `user_id`) VALUES ('2016-01-18 08:46:57', 'persian.png', '2016/01/18/09_46_57_741_persian.png', 'Persian', 876, '2016-01-18 08:46:57', 1)
  [1m[36m (10.3ms)[0m  [1mCOMMIT[0m
Completed 200 OK in 34ms (Views: 0.1ms | ActiveRecord: 24.9ms)


Started DELETE "/admin/menus/12" for 127.0.0.1 at 2016-01-18 09:47:23 +0100
Processing by MenusController#destroy as JS
  Parameters: {"id"=>"12"}
  [1m[35mMenu Load (0.8ms)[0m  SELECT `menus`.* FROM `menus` WHERE `menus`.`id` = 12 LIMIT 1
  [1m[36m (1.2ms)[0m  [1mBEGIN[0m
  [1m[35mSQL (2.1ms)[0m  DELETE FROM `menus` WHERE `menus`.`id` = 12
  [1m[36m (1.0ms)[0m  [1mCOMMIT[0m
  Rendered menus/destroy.js.erb (0.5ms)
Completed 200 OK in 72ms (Views: 61.7ms | ActiveRecord: 5.1ms)


Started GET "/admin/collections/admin_new_collection" for 127.0.0.1 at 2016-01-18 09:50:44 +0100
Processing by CollectionsController#admin_new_collection as HTML
  [1m[35mUser Load (0.2ms)[0m  SELECT `users`.* FROM `users` WHERE `users`.`id` = 1 LIMIT 1
  [1m[36mRestaurant Load (3.0ms)[0m  [1mSELECT `restaurants`.* FROM `restaurants` WHERE `restaurants`.`disabled` = 0[0m
  Rendered collections/_collection_form.html.erb (4.9ms)
  Rendered collections/_collection_restaurants_form.html.erb (30.8ms)
  Rendered collections/admin_new_collection.html.erb within layouts/admin (48.0ms)
Completed 200 OK in 275ms (Views: 72.0ms | ActiveRecord: 3.2ms)


Started GET "/admin/collections/admin_new_collection" for 127.0.0.1 at 2016-01-18 09:52:35 +0100
Processing by CollectionsController#admin_new_collection as HTML
  [1m[35mUser Load (0.4ms)[0m  SELECT `users`.* FROM `users` WHERE `users`.`id` = 1 LIMIT 1
  [1m[36mRestaurant Load (3.7ms)[0m  [1mSELECT `restaurants`.* FROM `restaurants` WHERE `restaurants`.`disabled` = 0[0m
  Rendered collections/_collection_form.html.erb (9.7ms)
  Rendered collections/_collection_restaurants_form.html.erb (20.0ms)
  Rendered collections/admin_new_collection.html.erb within layouts/admin (33.8ms)
Completed 200 OK in 349ms (Views: 42.6ms | ActiveRecord: 4.1ms)


Started GET "/admin/collections/admin_new_collection" for 127.0.0.1 at 2016-01-18 09:54:41 +0100
Processing by CollectionsController#admin_new_collection as HTML
  [1m[35mUser Load (0.3ms)[0m  SELECT `users`.* FROM `users` WHERE `users`.`id` = 1 LIMIT 1
  [1m[36mRestaurant Load (3.5ms)[0m  [1mSELECT `restaurants`.* FROM `restaurants` WHERE `restaurants`.`disabled` = 0[0m
  Rendered collections/_collection_form.html.erb (6.5ms)
  Rendered collections/_collection_restaurants_form.html.erb (591.8ms)
  Rendered collections/admin_new_collection.html.erb within layouts/admin (600.4ms)
Completed 500 Internal Server Error in 860ms

ActionView::Template::Error (undefined method `collection_restaurants_path' for #<#<Class:0x007fc25766f9b0>:0x007fc245010248>):
    1: 
    2: <div class="form_add_new_collection">
    3:   <%= form_for(@collection_restaurants, html: { id: "collection_restaurants" }) do |f| %>
    4:     <div class="simple-label">
    5:       <%= f.label :menu, "Choose restaurant", class: "control-label" %>
    6:     </div>
  app/views/collections/_collection_restaurants_form.html.erb:3:in `_app_views_collections__collection_restaurants_form_html_erb__241531618330134577_70236177216360'
  app/views/collections/admin_new_collection.html.erb:17:in `_app_views_collections_admin_new_collection_html_erb___3023385902521735371_70236385891800'
  app/controllers/collections_controller.rb:57:in `admin_new_collection'


  Rendered /Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_dispatch/middleware/templates/rescues/_trace.erb (0.8ms)
  Rendered /Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_dispatch/middleware/templates/rescues/_request_and_response.erb (0.9ms)
  Rendered /Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_dispatch/middleware/templates/rescues/template_error.erb within rescues/layout (41.2ms)


Started GET "/admin/collections/admin_new_collection" for 127.0.0.1 at 2016-01-18 09:57:31 +0100
Processing by CollectionsController#admin_new_collection as HTML
  [1m[35mUser Load (0.3ms)[0m  SELECT `users`.* FROM `users` WHERE `users`.`id` = 1 LIMIT 1
  [1m[36m (0.3ms)[0m  [1mSELECT COUNT(*) FROM `filter_types` WHERE (code = 'features')[0m
  [1m[35m (0.2ms)[0m  SELECT COUNT(*) FROM `filters` WHERE (code = 'offer')
  [1m[36mRestaurant Load (3.7ms)[0m  [1mSELECT `restaurants`.* FROM `restaurants` WHERE `restaurants`.`disabled` = 0[0m
  Rendered collections/_collection_form.html.erb (5.0ms)
  Rendered collections/_collection_restaurants_form.html.erb (341.9ms)
  Rendered collections/admin_new_collection.html.erb within layouts/admin (360.0ms)
Completed 500 Internal Server Error in 764ms

ActionView::Template::Error (undefined method `collection_restaurants_path' for #<#<Class:0x007fc243c84080>:0x007fc243bfedb8>):
    1: 
    2: <div class="form_add_new_collection">
    3:   <%= form_for(@collection_restaurants, remote: true, html: { id: "collection_restaurants" }) do |f| %>
    4:     <div class="simple-label">
    5:       <%= f.label :menu, "Choose restaurant", class: "control-label" %>
    6:     </div>
  app/views/collections/_collection_restaurants_form.html.erb:3:in `_app_views_collections__collection_restaurants_form_html_erb__241531618330134577_70236179303200'
  app/views/collections/admin_new_collection.html.erb:17:in `_app_views_collections_admin_new_collection_html_erb___3023385902521735371_70236385891800'
  app/controllers/collections_controller.rb:57:in `admin_new_collection'


  Rendered /Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_dispatch/middleware/templates/rescues/_trace.erb (0.9ms)
  Rendered /Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_dispatch/middleware/templates/rescues/_request_and_response.erb (0.8ms)
  Rendered /Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_dispatch/middleware/templates/rescues/template_error.erb within rescues/layout (40.9ms)


Started GET "/admin/collections/admin_new_collection" for 127.0.0.1 at 2016-01-18 09:58:12 +0100
Processing by CollectionsController#admin_new_collection as HTML
  [1m[35mUser Load (0.5ms)[0m  SELECT `users`.* FROM `users` WHERE `users`.`id` = 1 LIMIT 1
  [1m[36mRestaurant Load (6.3ms)[0m  [1mSELECT `restaurants`.* FROM `restaurants` WHERE `restaurants`.`disabled` = 0[0m
  Rendered collections/_collection_form.html.erb (4.5ms)
  Rendered collections/_collection_restaurants_form.html.erb (390.7ms)
  Rendered collections/admin_new_collection.html.erb within layouts/admin (397.0ms)
Completed 500 Internal Server Error in 567ms

ActionView::Template::Error (undefined method `collection_restaurants_path' for #<#<Class:0x007fc243c84080>:0x007fc25d8b1fd8>):
    1: 
    2: <div class="form_add_new_collection">
    3:   <%= form_for(@collection_restaurants, remote: true ) do |f| %>
    4:     <div class="simple-label">
    5:       <%= f.label :menu, "Choose restaurant", class: "control-label" %>
    6:     </div>
  app/views/collections/_collection_restaurants_form.html.erb:3:in `_app_views_collections__collection_restaurants_form_html_erb__241531618330134577_70236377297000'
  app/views/collections/admin_new_collection.html.erb:17:in `_app_views_collections_admin_new_collection_html_erb___3023385902521735371_70236385891800'
  app/controllers/collections_controller.rb:57:in `admin_new_collection'


  Rendered /Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_dispatch/middleware/templates/rescues/_trace.erb (0.9ms)
  Rendered /Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_dispatch/middleware/templates/rescues/_request_and_response.erb (0.6ms)
  Rendered /Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_dispatch/middleware/templates/rescues/template_error.erb within rescues/layout (40.3ms)


Started GET "/admin/collections/admin_new_collection" for 127.0.0.1 at 2016-01-18 10:03:05 +0100

SyntaxError (/Users/kevinmuller/halalgems_backend/config/routes.rb:227: syntax error, unexpected tSTRING_BEG, expecting keyword_do or '{' or '('
...lections#add_restaurants', as 'collection_restaurants'
...                               ^):
  activesupport (3.2.8) lib/active_support/dependencies.rb:245:in `load'
  activesupport (3.2.8) lib/active_support/dependencies.rb:245:in `block in load'
  activesupport (3.2.8) lib/active_support/dependencies.rb:236:in `load_dependency'
  activesupport (3.2.8) lib/active_support/dependencies.rb:245:in `load'
  railties (3.2.8) lib/rails/application/routes_reloader.rb:40:in `block in load_paths'
  railties (3.2.8) lib/rails/application/routes_reloader.rb:40:in `each'
  railties (3.2.8) lib/rails/application/routes_reloader.rb:40:in `load_paths'
  railties (3.2.8) lib/rails/application/routes_reloader.rb:16:in `reload!'
  railties (3.2.8) lib/rails/application/routes_reloader.rb:26:in `block in updater'
  activesupport (3.2.8) lib/active_support/file_update_checker.rb:78:in `call'
  activesupport (3.2.8) lib/active_support/file_update_checker.rb:78:in `execute'
  activesupport (3.2.8) lib/active_support/file_update_checker.rb:86:in `execute_if_updated'
  railties (3.2.8) lib/rails/application/routes_reloader.rb:7:in `execute_if_updated'
  railties (3.2.8) lib/rails/application/finisher.rb:68:in `block (2 levels) in <module:Finisher>'
  activesupport (3.2.8) lib/active_support/callbacks.rb:451:in `_run__2918684959943665061__prepare__4207201468600934469__callbacks'
  activesupport (3.2.8) lib/active_support/callbacks.rb:405:in `__run_callback'
  activesupport (3.2.8) lib/active_support/callbacks.rb:385:in `_run_prepare_callbacks'
  activesupport (3.2.8) lib/active_support/callbacks.rb:81:in `run_callbacks'
  actionpack (3.2.8) lib/action_dispatch/middleware/reloader.rb:74:in `prepare!'
  actionpack (3.2.8) lib/action_dispatch/middleware/reloader.rb:64:in `call'
  actionpack (3.2.8) lib/action_dispatch/middleware/remote_ip.rb:31:in `call'
  actionpack (3.2.8) lib/action_dispatch/middleware/debug_exceptions.rb:16:in `call'
  actionpack (3.2.8) lib/action_dispatch/middleware/show_exceptions.rb:56:in `call'
  railties (3.2.8) lib/rails/rack/logger.rb:26:in `call_app'
  railties (3.2.8) lib/rails/rack/logger.rb:16:in `call'
  quiet_assets (1.0.3) lib/quiet_assets.rb:23:in `call_with_quiet_assets'
  actionpack (3.2.8) lib/action_dispatch/middleware/request_id.rb:22:in `call'
  rack (1.4.5) lib/rack/methodoverride.rb:21:in `call'
  rack (1.4.5) lib/rack/runtime.rb:17:in `call'
  activesupport (3.2.8) lib/active_support/cache/strategy/local_cache.rb:72:in `call'
  rack (1.4.5) lib/rack/lock.rb:15:in `call'
  actionpack (3.2.8) lib/action_dispatch/middleware/static.rb:62:in `call'
  dragonfly (0.9.15) lib/dragonfly/middleware.rb:13:in `call'
  rack-cache (1.2) lib/rack/cache/context.rb:136:in `forward'
  rack-cache (1.2) lib/rack/cache/context.rb:245:in `fetch'
  rack-cache (1.2) lib/rack/cache/context.rb:185:in `lookup'
  rack-cache (1.2) lib/rack/cache/context.rb:66:in `call!'
  rack-cache (1.2) lib/rack/cache/context.rb:51:in `call'
  railties (3.2.8) lib/rails/engine.rb:479:in `call'
  railties (3.2.8) lib/rails/application.rb:223:in `call'
  rack (1.4.5) lib/rack/content_length.rb:14:in `call'
  railties (3.2.8) lib/rails/rack/log_tailer.rb:17:in `call'
  rack (1.4.5) lib/rack/handler/webrick.rb:59:in `service'
  /Users/kevinmuller/.rvm/rubies/ruby-2.2.4/lib/ruby/2.2.0/webrick/httpserver.rb:138:in `service'
  /Users/kevinmuller/.rvm/rubies/ruby-2.2.4/lib/ruby/2.2.0/webrick/httpserver.rb:94:in `run'
  /Users/kevinmuller/.rvm/rubies/ruby-2.2.4/lib/ruby/2.2.0/webrick/server.rb:294:in `block in start_thread'


  Rendered /Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_dispatch/middleware/templates/rescues/_trace.erb (0.9ms)
  Rendered /Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_dispatch/middleware/templates/rescues/_request_and_response.erb (0.8ms)
  Rendered /Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_dispatch/middleware/templates/rescues/diagnostics.erb within rescues/layout (42.3ms)


Started GET "/admin/collections/admin_new_collection" for 127.0.0.1 at 2016-01-18 10:03:19 +0100
Processing by CollectionsController#admin_new_collection as HTML
  [1m[35mUser Load (0.2ms)[0m  SELECT `users`.* FROM `users` WHERE `users`.`id` = 1 LIMIT 1
  [1m[36m (0.2ms)[0m  [1mSELECT COUNT(*) FROM `filter_types` WHERE (code = 'features')[0m
  [1m[35m (0.2ms)[0m  SELECT COUNT(*) FROM `filters` WHERE (code = 'offer')
  Rendered collections/_collection_form.html.erb (4.4ms)
  [1m[36mRestaurant Load (3.0ms)[0m  [1mSELECT `restaurants`.* FROM `restaurants` WHERE `restaurants`.`disabled` = 0[0m
  Rendered collections/_collection_restaurants_form.html.erb (456.6ms)
  Rendered collections/admin_new_collection.html.erb within layouts/admin (463.1ms)
Completed 500 Internal Server Error in 634ms

ActionView::Template::Error (undefined method `collection_restaurants_path' for #<#<Class:0x007fc25de03680>:0x007fc25de022f8>):
    1: 
    2: <div class="form_add_new_collection">
    3:   <%= form_for(@collection_restaurants, remote: true, html: { id: "collection_restaurants" }) do |f| %>
    4:     <div class="simple-label">
    5:       <%= f.label :menu, "Choose restaurant", class: "control-label" %>
    6:     </div>
  app/views/collections/_collection_restaurants_form.html.erb:3:in `_app_views_collections__collection_restaurants_form_html_erb__241531618330134577_70236386955620'
  app/views/collections/admin_new_collection.html.erb:17:in `_app_views_collections_admin_new_collection_html_erb___3023385902521735371_70236385891800'
  app/controllers/collections_controller.rb:56:in `admin_new_collection'


  Rendered /Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_dispatch/middleware/templates/rescues/_trace.erb (1.2ms)
  Rendered /Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_dispatch/middleware/templates/rescues/_request_and_response.erb (1.0ms)
  Rendered /Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_dispatch/middleware/templates/rescues/template_error.erb within rescues/layout (44.5ms)


Started GET "/admin/collections/admin_new_collection" for 127.0.0.1 at 2016-01-18 10:04:43 +0100
Processing by CollectionsController#admin_new_collection as HTML
  [1m[35mUser Load (0.2ms)[0m  SELECT `users`.* FROM `users` WHERE `users`.`id` = 1 LIMIT 1
  [1m[36m (0.2ms)[0m  [1mSELECT COUNT(*) FROM `filter_types` WHERE (code = 'features')[0m
  [1m[35m (0.2ms)[0m  SELECT COUNT(*) FROM `filters` WHERE (code = 'offer')
  Rendered collections/_collection_form.html.erb (5.3ms)
  [1m[36mRestaurant Load (3.3ms)[0m  [1mSELECT `restaurants`.* FROM `restaurants` WHERE `restaurants`.`disabled` = 0[0m
  Rendered collections/_collection_restaurants_form.html.erb (537.9ms)
  Rendered collections/admin_new_collection.html.erb within layouts/admin (545.1ms)
Completed 500 Internal Server Error in 773ms

ActionView::Template::Error (undefined method `collection_restaurants_path' for #<#<Class:0x007fc262377518>:0x007fc2623760f0>):
    1: 
    2: <div class="form_add_new_collection">
    3:   <%= form_for(@collection_restaurants, remote: true, html: { id: "collection_restaurants" }) do |f| %>
    4:     <div class="simple-label">
    5:       <%= f.label :menu, "Choose restaurant", class: "control-label" %>
    6:     </div>
  app/views/collections/_collection_restaurants_form.html.erb:3:in `_app_views_collections__collection_restaurants_form_html_erb__241531618330134577_70236386955620'
  app/views/collections/admin_new_collection.html.erb:17:in `_app_views_collections_admin_new_collection_html_erb___3023385902521735371_70236385891800'
  app/controllers/collections_controller.rb:56:in `admin_new_collection'


  Rendered /Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_dispatch/middleware/templates/rescues/_trace.erb (1.4ms)
  Rendered /Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_dispatch/middleware/templates/rescues/_request_and_response.erb (0.9ms)
  Rendered /Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_dispatch/middleware/templates/rescues/template_error.erb within rescues/layout (42.5ms)


Started GET "/admin/collections/admin_new_collection" for 127.0.0.1 at 2016-01-18 10:08:37 +0100
Processing by CollectionsController#admin_new_collection as HTML
  [1m[35mUser Load (0.3ms)[0m  SELECT `users`.* FROM `users` WHERE `users`.`id` = 1 LIMIT 1
  [1m[36m (0.2ms)[0m  [1mSELECT COUNT(*) FROM `filter_types` WHERE (code = 'features')[0m
  [1m[35m (0.2ms)[0m  SELECT COUNT(*) FROM `filters` WHERE (code = 'offer')
  Rendered collections/_collection_form.html.erb (5.1ms)
  [1m[36mRestaurant Load (3.0ms)[0m  [1mSELECT `restaurants`.* FROM `restaurants` WHERE `restaurants`.`disabled` = 0[0m
  Rendered collections/_collection_restaurants_form.html.erb (447.4ms)
  Rendered collections/admin_new_collection.html.erb within layouts/admin (466.0ms)
Completed 500 Internal Server Error in 687ms

ActionView::Template::Error (undefined method `collection_restaurants_path' for #<#<Class:0x007fc2616702e8>:0x007fc2621628b8>):
    1: 
    2: <div class="form_add_new_collection">
    3:   <%= form_for(@collection_restaurant, remote: true, html: { id: "collection_restaurants" }) do |f| %>
    4:     <div class="simple-label">
    5:       <%= f.label :menu, "Choose restaurant", class: "control-label" %>
    6:     </div>
  app/views/collections/_collection_restaurants_form.html.erb:3:in `_app_views_collections__collection_restaurants_form_html_erb__241531618330134577_70236183006380'
  app/views/collections/admin_new_collection.html.erb:17:in `_app_views_collections_admin_new_collection_html_erb___3023385902521735371_70236385891800'
  app/controllers/collections_controller.rb:56:in `admin_new_collection'


  Rendered /Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_dispatch/middleware/templates/rescues/_trace.erb (1.3ms)
  Rendered /Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_dispatch/middleware/templates/rescues/_request_and_response.erb (0.8ms)
  Rendered /Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_dispatch/middleware/templates/rescues/template_error.erb within rescues/layout (42.3ms)


Started GET "/admin/collections/admin_new_collection" for 127.0.0.1 at 2016-01-18 10:09:27 +0100
Processing by CollectionsController#admin_new_collection as HTML
  [1m[35mUser Load (0.2ms)[0m  SELECT `users`.* FROM `users` WHERE `users`.`id` = 1 LIMIT 1
  [1m[36m (0.2ms)[0m  [1mSELECT COUNT(*) FROM `filter_types` WHERE (code = 'features')[0m
  [1m[35m (0.2ms)[0m  SELECT COUNT(*) FROM `filters` WHERE (code = 'offer')
  Rendered collections/_collection_form.html.erb (4.9ms)
  [1m[36mRestaurant Load (3.3ms)[0m  [1mSELECT `restaurants`.* FROM `restaurants` WHERE `restaurants`.`disabled` = 0[0m
  Rendered collections/_collection_restaurants_form.html.erb (91.6ms)
  Rendered collections/admin_new_collection.html.erb within layouts/admin (98.4ms)
Completed 200 OK in 313ms (Views: 103.8ms | ActiveRecord: 16.1ms)


Started POST "/restaurants" for 127.0.0.1 at 2016-01-18 10:10:42 +0100
Processing by RestaurantsController#create as HTML
  Parameters: {"utf8"=>"âœ“", "authenticity_token"=>"cajmPApKUoLTDgL4nYG/B3GUhj8fezKDJZWxee28cyM=", "collection_restaurant"=>{"restaurant_id"=>"1"}, "commit"=>"Add"}
Completed 500 Internal Server Error in 1ms

NoMethodError (undefined method `[]' for nil:NilClass):
  app/controllers/restaurants_controller.rb:333:in `create'


  Rendered /Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_dispatch/middleware/templates/rescues/_trace.erb (1.3ms)
  Rendered /Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_dispatch/middleware/templates/rescues/_request_and_response.erb (1.1ms)
  Rendered /Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_dispatch/middleware/templates/rescues/diagnostics.erb within rescues/layout (75.6ms)


Started GET "/admin/collections/admin_new_collection" for 127.0.0.1 at 2016-01-18 10:11:54 +0100
Processing by CollectionsController#admin_new_collection as HTML
  [1m[35mUser Load (0.3ms)[0m  SELECT `users`.* FROM `users` WHERE `users`.`id` = 1 LIMIT 1
  Rendered collections/_collection_form.html.erb (4.9ms)
  Rendered collections/_collection_restaurants_form.html.erb (1.3ms)
  Rendered collections/admin_new_collection.html.erb within layouts/admin (20.1ms)
Completed 500 Internal Server Error in 33ms

ActionController::RoutingError (No route matches {:action=>"add_restaurants", :controller=>"collections"}):
  app/views/collections/_collection_restaurants_form.html.erb:3:in `_app_views_collections__collection_restaurants_form_html_erb__241531618330134577_70236169774760'
  app/views/collections/admin_new_collection.html.erb:17:in `_app_views_collections_admin_new_collection_html_erb___3023385902521735371_70236385891800'
  app/controllers/collections_controller.rb:56:in `admin_new_collection'


  Rendered /Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_dispatch/middleware/templates/rescues/routing_error.erb within rescues/layout (0.6ms)


Started GET "/admin/collections/admin_new_collection" for 127.0.0.1 at 2016-01-18 10:12:11 +0100
Processing by CollectionsController#admin_new_collection as HTML
  [1m[36mUser Load (0.7ms)[0m  [1mSELECT `users`.* FROM `users` WHERE `users`.`id` = 1 LIMIT 1[0m
  Rendered collections/_collection_form.html.erb (4.5ms)
  [1m[35mRestaurant Load (3.3ms)[0m  SELECT `restaurants`.* FROM `restaurants` WHERE `restaurants`.`disabled` = 0
  Rendered collections/_collection_restaurants_form.html.erb (409.7ms)
  Rendered collections/admin_new_collection.html.erb within layouts/admin (415.9ms)
Completed 500 Internal Server Error in 422ms

ActionView::Template::Error (undefined local variable or method `collection_restaurants_path' for #<#<Class:0x007fc25ab95518>:0x007fc26217b020>):
    1: 
    2: <div class="form_add_new_collection">
    3:   <%= form_for(@collection_restaurants, url: collection_restaurants_path , html: { id: "collection_restaurants" }) do |f| %>
    4:     <div class="simple-label">
    5:       <%= f.label :menu, "Choose restaurant", class: "control-label" %>
    6:     </div>
  app/views/collections/_collection_restaurants_form.html.erb:3:in `_app_views_collections__collection_restaurants_form_html_erb__241531618330134577_70236177118900'
  app/views/collections/admin_new_collection.html.erb:17:in `_app_views_collections_admin_new_collection_html_erb___3023385902521735371_70236385891800'
  app/controllers/collections_controller.rb:56:in `admin_new_collection'


  Rendered /Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_dispatch/middleware/templates/rescues/_trace.erb (1.1ms)
  Rendered /Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_dispatch/middleware/templates/rescues/_request_and_response.erb (1.0ms)
  Rendered /Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_dispatch/middleware/templates/rescues/template_error.erb within rescues/layout (43.4ms)


Started GET "/admin/collections/admin_new_collection" for 127.0.0.1 at 2016-01-18 10:12:32 +0100
Processing by CollectionsController#admin_new_collection as HTML
  [1m[36mUser Load (0.2ms)[0m  [1mSELECT `users`.* FROM `users` WHERE `users`.`id` = 1 LIMIT 1[0m
  [1m[35m (0.2ms)[0m  SELECT COUNT(*) FROM `filter_types` WHERE (code = 'features')
  [1m[36m (0.2ms)[0m  [1mSELECT COUNT(*) FROM `filters` WHERE (code = 'offer')[0m
  Rendered collections/_collection_form.html.erb (5.6ms)
  Rendered collections/_collection_restaurants_form.html.erb (1.3ms)
  Rendered collections/admin_new_collection.html.erb within layouts/admin (8.5ms)
Completed 500 Internal Server Error in 217ms

ActionController::RoutingError (No route matches {:action=>"add_restaurants", :controller=>"collections"}):
  app/views/collections/_collection_restaurants_form.html.erb:3:in `_app_views_collections__collection_restaurants_form_html_erb__241531618330134577_70236414630200'
  app/views/collections/admin_new_collection.html.erb:17:in `_app_views_collections_admin_new_collection_html_erb___3023385902521735371_70236385891800'
  app/controllers/collections_controller.rb:56:in `admin_new_collection'


  Rendered /Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_dispatch/middleware/templates/rescues/routing_error.erb within rescues/layout (0.5ms)


Started GET "/admin/collections/admin_new_collection" for 127.0.0.1 at 2016-01-18 10:12:44 +0100
Processing by CollectionsController#admin_new_collection as HTML
  [1m[35mUser Load (0.4ms)[0m  SELECT `users`.* FROM `users` WHERE `users`.`id` = 1 LIMIT 1
  [1m[36m (0.2ms)[0m  [1mSELECT COUNT(*) FROM `filter_types` WHERE (code = 'features')[0m
  [1m[35m (0.2ms)[0m  SELECT COUNT(*) FROM `filters` WHERE (code = 'offer')
  Rendered collections/_collection_form.html.erb (6.0ms)
  Rendered collections/_collection_restaurants_form.html.erb (0.9ms)
  Rendered collections/admin_new_collection.html.erb within layouts/admin (8.8ms)
Completed 500 Internal Server Error in 223ms

ActionController::RoutingError (No route matches {:action=>"add_restaurant", :controller=>"collections"}):
  app/views/collections/_collection_restaurants_form.html.erb:3:in `_app_views_collections__collection_restaurants_form_html_erb__241531618330134577_70236414630200'
  app/views/collections/admin_new_collection.html.erb:17:in `_app_views_collections_admin_new_collection_html_erb___3023385902521735371_70236385891800'
  app/controllers/collections_controller.rb:56:in `admin_new_collection'


  Rendered /Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_dispatch/middleware/templates/rescues/routing_error.erb within rescues/layout (0.5ms)


Started GET "/admin/collections/admin_new_collection" for 127.0.0.1 at 2016-01-18 10:14:11 +0100

SyntaxError (/Users/kevinmuller/halalgems_backend/config/routes.rb:227: syntax error, unexpected tIDENTIFIER, expecting keyword_end
...'collections#add_restaurant' as: 'add_restaurant'
...                               ^):
  activesupport (3.2.8) lib/active_support/dependencies.rb:245:in `load'
  activesupport (3.2.8) lib/active_support/dependencies.rb:245:in `block in load'
  activesupport (3.2.8) lib/active_support/dependencies.rb:236:in `load_dependency'
  activesupport (3.2.8) lib/active_support/dependencies.rb:245:in `load'
  railties (3.2.8) lib/rails/application/routes_reloader.rb:40:in `block in load_paths'
  railties (3.2.8) lib/rails/application/routes_reloader.rb:40:in `each'
  railties (3.2.8) lib/rails/application/routes_reloader.rb:40:in `load_paths'
  railties (3.2.8) lib/rails/application/routes_reloader.rb:16:in `reload!'
  railties (3.2.8) lib/rails/application/routes_reloader.rb:26:in `block in updater'
  activesupport (3.2.8) lib/active_support/file_update_checker.rb:78:in `call'
  activesupport (3.2.8) lib/active_support/file_update_checker.rb:78:in `execute'
  activesupport (3.2.8) lib/active_support/file_update_checker.rb:86:in `execute_if_updated'
  railties (3.2.8) lib/rails/application/routes_reloader.rb:7:in `execute_if_updated'
  railties (3.2.8) lib/rails/application/finisher.rb:68:in `block (2 levels) in <module:Finisher>'
  activesupport (3.2.8) lib/active_support/callbacks.rb:451:in `_run__2918684959943665061__prepare__4207201468600934469__callbacks'
  activesupport (3.2.8) lib/active_support/callbacks.rb:405:in `__run_callback'
  activesupport (3.2.8) lib/active_support/callbacks.rb:385:in `_run_prepare_callbacks'
  activesupport (3.2.8) lib/active_support/callbacks.rb:81:in `run_callbacks'
  actionpack (3.2.8) lib/action_dispatch/middleware/reloader.rb:74:in `prepare!'
  actionpack (3.2.8) lib/action_dispatch/middleware/reloader.rb:64:in `call'
  actionpack (3.2.8) lib/action_dispatch/middleware/remote_ip.rb:31:in `call'
  actionpack (3.2.8) lib/action_dispatch/middleware/debug_exceptions.rb:16:in `call'
  actionpack (3.2.8) lib/action_dispatch/middleware/show_exceptions.rb:56:in `call'
  railties (3.2.8) lib/rails/rack/logger.rb:26:in `call_app'
  railties (3.2.8) lib/rails/rack/logger.rb:16:in `call'
  quiet_assets (1.0.3) lib/quiet_assets.rb:23:in `call_with_quiet_assets'
  actionpack (3.2.8) lib/action_dispatch/middleware/request_id.rb:22:in `call'
  rack (1.4.5) lib/rack/methodoverride.rb:21:in `call'
  rack (1.4.5) lib/rack/runtime.rb:17:in `call'
  activesupport (3.2.8) lib/active_support/cache/strategy/local_cache.rb:72:in `call'
  rack (1.4.5) lib/rack/lock.rb:15:in `call'
  actionpack (3.2.8) lib/action_dispatch/middleware/static.rb:62:in `call'
  dragonfly (0.9.15) lib/dragonfly/middleware.rb:13:in `call'
  rack-cache (1.2) lib/rack/cache/context.rb:136:in `forward'
  rack-cache (1.2) lib/rack/cache/context.rb:245:in `fetch'
  rack-cache (1.2) lib/rack/cache/context.rb:185:in `lookup'
  rack-cache (1.2) lib/rack/cache/context.rb:66:in `call!'
  rack-cache (1.2) lib/rack/cache/context.rb:51:in `call'
  railties (3.2.8) lib/rails/engine.rb:479:in `call'
  railties (3.2.8) lib/rails/application.rb:223:in `call'
  rack (1.4.5) lib/rack/content_length.rb:14:in `call'
  railties (3.2.8) lib/rails/rack/log_tailer.rb:17:in `call'
  rack (1.4.5) lib/rack/handler/webrick.rb:59:in `service'
  /Users/kevinmuller/.rvm/rubies/ruby-2.2.4/lib/ruby/2.2.0/webrick/httpserver.rb:138:in `service'
  /Users/kevinmuller/.rvm/rubies/ruby-2.2.4/lib/ruby/2.2.0/webrick/httpserver.rb:94:in `run'
  /Users/kevinmuller/.rvm/rubies/ruby-2.2.4/lib/ruby/2.2.0/webrick/server.rb:294:in `block in start_thread'


  Rendered /Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_dispatch/middleware/templates/rescues/_trace.erb (1.0ms)
  Rendered /Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_dispatch/middleware/templates/rescues/_request_and_response.erb (0.8ms)
  Rendered /Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_dispatch/middleware/templates/rescues/diagnostics.erb within rescues/layout (41.8ms)


Started GET "/admin/collections/admin_new_collection" for 127.0.0.1 at 2016-01-18 10:14:24 +0100
Processing by CollectionsController#admin_new_collection as HTML
  [1m[36mUser Load (0.2ms)[0m  [1mSELECT `users`.* FROM `users` WHERE `users`.`id` = 1 LIMIT 1[0m
  [1m[35m (0.2ms)[0m  SELECT COUNT(*) FROM `filter_types` WHERE (code = 'features')
  [1m[36m (0.2ms)[0m  [1mSELECT COUNT(*) FROM `filters` WHERE (code = 'offer')[0m
  Rendered collections/_collection_form.html.erb (5.5ms)
  Rendered collections/_collection_restaurants_form.html.erb (1.7ms)
  Rendered collections/admin_new_collection.html.erb within layouts/admin (19.3ms)
Completed 500 Internal Server Error in 240ms

ActionController::RoutingError (No route matches {:action=>"add_restaurant", :controller=>"collections"}):
  app/views/collections/_collection_restaurants_form.html.erb:3:in `_app_views_collections__collection_restaurants_form_html_erb__241531618330134577_70236414120200'
  app/views/collections/admin_new_collection.html.erb:17:in `_app_views_collections_admin_new_collection_html_erb___3023385902521735371_70236385891800'
  app/controllers/collections_controller.rb:56:in `admin_new_collection'


  Rendered /Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_dispatch/middleware/templates/rescues/routing_error.erb within rescues/layout (0.5ms)


Started GET "/admin/collections/admin_new_collection" for 127.0.0.1 at 2016-01-18 10:17:09 +0100
Processing by CollectionsController#admin_new_collection as HTML
  [1m[35mUser Load (0.3ms)[0m  SELECT `users`.* FROM `users` WHERE `users`.`id` = 1 LIMIT 1
  [1m[36m (0.2ms)[0m  [1mSELECT COUNT(*) FROM `filter_types` WHERE (code = 'features')[0m
  [1m[35m (0.2ms)[0m  SELECT COUNT(*) FROM `filters` WHERE (code = 'offer')
  Rendered collections/_collection_form.html.erb (5.1ms)
  Rendered collections/_collection_restaurants_form.html.erb (1.2ms)
  Rendered collections/admin_new_collection.html.erb within layouts/admin (8.9ms)
Completed 500 Internal Server Error in 224ms

ActionController::RoutingError (No route matches {:action=>"add_restaurant", :controller=>"collections"}):
  app/views/collections/_collection_restaurants_form.html.erb:3:in `_app_views_collections__collection_restaurants_form_html_erb__241531618330134577_70236385117800'
  app/views/collections/admin_new_collection.html.erb:17:in `_app_views_collections_admin_new_collection_html_erb___3023385902521735371_70236385891800'
  app/controllers/collections_controller.rb:56:in `admin_new_collection'


  Rendered /Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_dispatch/middleware/templates/rescues/routing_error.erb within rescues/layout (0.5ms)


Started GET "/admin/collections/admin_new_collection" for 127.0.0.1 at 2016-01-18 10:17:39 +0100
Processing by CollectionsController#admin_new_collection as HTML
  [1m[36mUser Load (0.2ms)[0m  [1mSELECT `users`.* FROM `users` WHERE `users`.`id` = 1 LIMIT 1[0m
  [1m[35m (0.2ms)[0m  SELECT COUNT(*) FROM `filter_types` WHERE (code = 'features')
  [1m[36m (0.2ms)[0m  [1mSELECT COUNT(*) FROM `filters` WHERE (code = 'offer')[0m
  Rendered collections/_collection_form.html.erb (5.6ms)
  Rendered collections/_collection_restaurants_form.html.erb (0.9ms)
  Rendered collections/admin_new_collection.html.erb within layouts/admin (8.5ms)
Completed 500 Internal Server Error in 228ms

ActionController::RoutingError (No route matches {:action=>"add_restaurant", :controller=>"collections"}):
  app/views/collections/_collection_restaurants_form.html.erb:3:in `_app_views_collections__collection_restaurants_form_html_erb__241531618330134577_70236385117800'
  app/views/collections/admin_new_collection.html.erb:17:in `_app_views_collections_admin_new_collection_html_erb___3023385902521735371_70236385891800'
  app/controllers/collections_controller.rb:56:in `admin_new_collection'


  Rendered /Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_dispatch/middleware/templates/rescues/routing_error.erb within rescues/layout (0.5ms)


Started GET "/admin/collections/admin_new_collection" for 127.0.0.1 at 2016-01-18 10:18:39 +0100
Processing by CollectionsController#admin_new_collection as HTML
  [1m[35mUser Load (0.3ms)[0m  SELECT `users`.* FROM `users` WHERE `users`.`id` = 1 LIMIT 1
  [1m[36m (0.2ms)[0m  [1mSELECT COUNT(*) FROM `filter_types` WHERE (code = 'features')[0m
  [1m[35m (0.2ms)[0m  SELECT COUNT(*) FROM `filters` WHERE (code = 'offer')
  Rendered collections/_collection_form.html.erb (5.6ms)
  Rendered collections/_collection_restaurants_form.html.erb (0.8ms)
  Rendered collections/admin_new_collection.html.erb within layouts/admin (8.0ms)
Completed 500 Internal Server Error in 207ms

ActionController::RoutingError (No route matches {:action=>"add_restaurant", :controller=>"collections"}):
  app/views/collections/_collection_restaurants_form.html.erb:3:in `_app_views_collections__collection_restaurants_form_html_erb__241531618330134577_70236385117800'
  app/views/collections/admin_new_collection.html.erb:17:in `_app_views_collections_admin_new_collection_html_erb___3023385902521735371_70236385891800'
  app/controllers/collections_controller.rb:56:in `admin_new_collection'


  Rendered /Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_dispatch/middleware/templates/rescues/routing_error.erb within rescues/layout (0.6ms)


Started GET "/admin/collections/admin_new_collection" for 127.0.0.1 at 2016-01-18 10:20:49 +0100
Processing by CollectionsController#admin_new_collection as HTML
  [1m[36mUser Load (0.2ms)[0m  [1mSELECT `users`.* FROM `users` WHERE `users`.`id` = 1 LIMIT 1[0m
  [1m[35m (0.2ms)[0m  SELECT COUNT(*) FROM `filter_types` WHERE (code = 'features')
  [1m[36m (0.2ms)[0m  [1mSELECT COUNT(*) FROM `filters` WHERE (code = 'offer')[0m
  Rendered collections/_collection_form.html.erb (6.8ms)
  Rendered collections/_collection_restaurants_form.html.erb (1.1ms)
  Rendered collections/admin_new_collection.html.erb within layouts/admin (9.8ms)
Completed 500 Internal Server Error in 193ms

ActionController::RoutingError (No route matches {:action=>"add_restaurant", :controller=>"collections"}):
  app/views/collections/_collection_restaurants_form.html.erb:3:in `_app_views_collections__collection_restaurants_form_html_erb__241531618330134577_70236385117800'
  app/views/collections/admin_new_collection.html.erb:17:in `_app_views_collections_admin_new_collection_html_erb___3023385902521735371_70236385891800'
  app/controllers/collections_controller.rb:56:in `admin_new_collection'


  Rendered /Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_dispatch/middleware/templates/rescues/routing_error.erb within rescues/layout (0.6ms)


Started GET "/admin/collections/admin_new_collection" for 127.0.0.1 at 2016-01-18 10:25:13 +0100
Processing by CollectionsController#admin_new_collection as HTML
  [1m[35mUser Load (0.2ms)[0m  SELECT `users`.* FROM `users` WHERE `users`.`id` = 1 LIMIT 1
  [1m[36m (0.2ms)[0m  [1mSELECT COUNT(*) FROM `filter_types` WHERE (code = 'features')[0m
  [1m[35m (0.2ms)[0m  SELECT COUNT(*) FROM `filters` WHERE (code = 'offer')
  Rendered collections/_collection_form.html.erb (5.4ms)
  Rendered collections/_collection_restaurants_form.html.erb (1.7ms)
  Rendered collections/admin_new_collection.html.erb within layouts/admin (31.2ms)
Completed 500 Internal Server Error in 246ms

ActionController::RoutingError (No route matches {:action=>"add_restaurant", :controller=>"collections"}):
  app/views/collections/_collection_restaurants_form.html.erb:3:in `_app_views_collections__collection_restaurants_form_html_erb__241531618330134577_70236385117800'
  app/views/collections/admin_new_collection.html.erb:17:in `_app_views_collections_admin_new_collection_html_erb___3023385902521735371_70236385891800'
  app/controllers/collections_controller.rb:56:in `admin_new_collection'


  Rendered /Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_dispatch/middleware/templates/rescues/routing_error.erb within rescues/layout (0.6ms)


Started GET "/admin/collections/admin_new_collection" for 127.0.0.1 at 2016-01-18 10:25:19 +0100
Processing by CollectionsController#admin_new_collection as HTML
  [1m[36mUser Load (0.2ms)[0m  [1mSELECT `users`.* FROM `users` WHERE `users`.`id` = 1 LIMIT 1[0m
  [1m[35m (0.2ms)[0m  SELECT COUNT(*) FROM `filter_types` WHERE (code = 'features')
  [1m[36m (0.2ms)[0m  [1mSELECT COUNT(*) FROM `filters` WHERE (code = 'offer')[0m
  Rendered collections/_collection_form.html.erb (5.3ms)
  Rendered collections/_collection_restaurants_form.html.erb (1.0ms)
  Rendered collections/admin_new_collection.html.erb within layouts/admin (8.2ms)
Completed 500 Internal Server Error in 191ms

ActionController::RoutingError (No route matches {:action=>"add_restaurant", :controller=>"collections"}):
  app/views/collections/_collection_restaurants_form.html.erb:3:in `_app_views_collections__collection_restaurants_form_html_erb__241531618330134577_70236385117800'
  app/views/collections/admin_new_collection.html.erb:17:in `_app_views_collections_admin_new_collection_html_erb___3023385902521735371_70236385891800'
  app/controllers/collections_controller.rb:56:in `admin_new_collection'


  Rendered /Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_dispatch/middleware/templates/rescues/routing_error.erb within rescues/layout (0.7ms)


Started GET "/admin/collections/admin_new_collection" for 127.0.0.1 at 2016-01-18 10:25:47 +0100
Processing by CollectionsController#admin_new_collection as HTML
  [1m[35mUser Load (0.3ms)[0m  SELECT `users`.* FROM `users` WHERE `users`.`id` = 1 LIMIT 1
  [1m[36m (0.5ms)[0m  [1mSELECT COUNT(*) FROM `filter_types` WHERE (code = 'features')[0m
  [1m[35m (0.3ms)[0m  SELECT COUNT(*) FROM `filters` WHERE (code = 'offer')
  Rendered collections/_collection_form.html.erb (6.5ms)
  [1m[36mRestaurant Load (3.3ms)[0m  [1mSELECT `restaurants`.* FROM `restaurants` WHERE `restaurants`.`disabled` = 0[0m
  Rendered collections/_collection_restaurants_form.html.erb (489.2ms)
  Rendered collections/admin_new_collection.html.erb within layouts/admin (497.6ms)
Completed 500 Internal Server Error in 707ms

ActionView::Template::Error (undefined local variable or method `add_restaurants_collection_path' for #<#<Class:0x007fc255b5d960>:0x007fc255b4dba0>):
    1: 
    2: <div class="form_add_new_collection">
    3:   <%= form_for(@collection_restaurant, url: add_restaurants_collection_path , html: { id: "collection_restaurants" }) do |f| %>
    4:     <div class="simple-label">
    5:       <%= f.label :menu, "Choose restaurant", class: "control-label" %>
    6:     </div>
  app/views/collections/_collection_restaurants_form.html.erb:3:in `_app_views_collections__collection_restaurants_form_html_erb__241531618330134577_70236318217600'
  app/views/collections/admin_new_collection.html.erb:17:in `_app_views_collections_admin_new_collection_html_erb___3023385902521735371_70236385891800'
  app/controllers/collections_controller.rb:56:in `admin_new_collection'


  Rendered /Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_dispatch/middleware/templates/rescues/_trace.erb (1.0ms)
  Rendered /Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_dispatch/middleware/templates/rescues/_request_and_response.erb (0.8ms)
  Rendered /Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_dispatch/middleware/templates/rescues/template_error.erb within rescues/layout (45.8ms)


Started GET "/admin/collections/admin_new_collection" for 127.0.0.1 at 2016-01-18 10:25:56 +0100
Processing by CollectionsController#admin_new_collection as HTML
  [1m[35mUser Load (0.5ms)[0m  SELECT `users`.* FROM `users` WHERE `users`.`id` = 1 LIMIT 1
  Rendered collections/_collection_form.html.erb (4.3ms)
  Rendered collections/_collection_restaurants_form.html.erb (1.2ms)
  Rendered collections/admin_new_collection.html.erb within layouts/admin (7.2ms)
Completed 500 Internal Server Error in 14ms

ActionController::RoutingError (No route matches {:action=>"add_restaurant", :controller=>"collections"}):
  app/views/collections/_collection_restaurants_form.html.erb:3:in `_app_views_collections__collection_restaurants_form_html_erb__241531618330134577_70236415370080'
  app/views/collections/admin_new_collection.html.erb:17:in `_app_views_collections_admin_new_collection_html_erb___3023385902521735371_70236385891800'
  app/controllers/collections_controller.rb:56:in `admin_new_collection'


  Rendered /Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_dispatch/middleware/templates/rescues/routing_error.erb within rescues/layout (0.4ms)


Started GET "/admin/collections/admin_new_collection" for 127.0.0.1 at 2016-01-18 10:26:21 +0100
Processing by CollectionsController#admin_new_collection as HTML
  [1m[36mUser Load (0.3ms)[0m  [1mSELECT `users`.* FROM `users` WHERE `users`.`id` = 1 LIMIT 1[0m
  [1m[35m (0.2ms)[0m  SELECT COUNT(*) FROM `filter_types` WHERE (code = 'features')
  [1m[36m (0.2ms)[0m  [1mSELECT COUNT(*) FROM `filters` WHERE (code = 'offer')[0m
  Rendered collections/_collection_form.html.erb (4.5ms)
  Rendered collections/_collection_restaurants_form.html.erb (0.9ms)
  Rendered collections/admin_new_collection.html.erb within layouts/admin (7.1ms)
Completed 500 Internal Server Error in 254ms

ActionController::RoutingError (No route matches {:action=>"add_restaurant", :controller=>"collections"}):
  app/views/collections/_collection_restaurants_form.html.erb:3:in `_app_views_collections__collection_restaurants_form_html_erb__241531618330134577_70236415370080'
  app/views/collections/admin_new_collection.html.erb:17:in `_app_views_collections_admin_new_collection_html_erb___3023385902521735371_70236385891800'
  app/controllers/collections_controller.rb:56:in `admin_new_collection'


  Rendered /Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_dispatch/middleware/templates/rescues/routing_error.erb within rescues/layout (0.5ms)


Started GET "/admin/collections/admin_new_collection" for 127.0.0.1 at 2016-01-18 10:26:33 +0100
Processing by CollectionsController#admin_new_collection as HTML
  [1m[35mUser Load (0.2ms)[0m  SELECT `users`.* FROM `users` WHERE `users`.`id` = 1 LIMIT 1
  [1m[36m (0.2ms)[0m  [1mSELECT COUNT(*) FROM `filter_types` WHERE (code = 'features')[0m
  [1m[35m (0.2ms)[0m  SELECT COUNT(*) FROM `filters` WHERE (code = 'offer')
  Rendered collections/_collection_form.html.erb (5.1ms)
  Rendered collections/_collection_restaurants_form.html.erb (0.8ms)
  Rendered collections/admin_new_collection.html.erb within layouts/admin (7.5ms)
Completed 500 Internal Server Error in 215ms

ActionController::RoutingError (No route matches {:action=>"add_restaurant", :controller=>"collections"}):
  app/views/collections/_collection_restaurants_form.html.erb:3:in `_app_views_collections__collection_restaurants_form_html_erb__241531618330134577_70236415370080'
  app/views/collections/admin_new_collection.html.erb:17:in `_app_views_collections_admin_new_collection_html_erb___3023385902521735371_70236385891800'
  app/controllers/collections_controller.rb:56:in `admin_new_collection'


  Rendered /Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_dispatch/middleware/templates/rescues/routing_error.erb within rescues/layout (0.4ms)


Started GET "/admin/collections/admin_new_collection" for 127.0.0.1 at 2016-01-18 10:26:57 +0100
Processing by CollectionsController#admin_new_collection as HTML
  [1m[36mUser Load (0.4ms)[0m  [1mSELECT `users`.* FROM `users` WHERE `users`.`id` = 1 LIMIT 1[0m
  [1m[35m (0.2ms)[0m  SELECT COUNT(*) FROM `filter_types` WHERE (code = 'features')
  [1m[36m (0.2ms)[0m  [1mSELECT COUNT(*) FROM `filters` WHERE (code = 'offer')[0m
  Rendered collections/_collection_form.html.erb (6.9ms)
  [1m[35mRestaurant Load (3.3ms)[0m  SELECT `restaurants`.* FROM `restaurants` WHERE `restaurants`.`disabled` = 0
  Rendered collections/_collection_restaurants_form.html.erb (454.8ms)
  Rendered collections/admin_new_collection.html.erb within layouts/admin (463.6ms)
Completed 500 Internal Server Error in 788ms

ActionView::Template::Error (undefined method `collection_restaurants_path' for #<#<Class:0x007fc244d975e8>:0x007fc244d95ce8>):
    1: 
    2: <div class="form_add_new_collection">
    3:   <%= form_for(@collection_restaurant, html: { id: "collection_restaurants" }) do |f| %>
    4:     <div class="simple-label">
    5:       <%= f.label :menu, "Choose restaurant", class: "control-label" %>
    6:     </div>
  app/views/collections/_collection_restaurants_form.html.erb:3:in `_app_views_collections__collection_restaurants_form_html_erb__241531618330134577_70236181519800'
  app/views/collections/admin_new_collection.html.erb:17:in `_app_views_collections_admin_new_collection_html_erb___3023385902521735371_70236385891800'
  app/controllers/collections_controller.rb:56:in `admin_new_collection'


  Rendered /Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_dispatch/middleware/templates/rescues/_trace.erb (1.1ms)
  Rendered /Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_dispatch/middleware/templates/rescues/_request_and_response.erb (0.8ms)
  Rendered /Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_dispatch/middleware/templates/rescues/template_error.erb within rescues/layout (41.5ms)


Started GET "/oriental-kitchen/edit" for 127.0.0.1 at 2016-01-18 10:27:23 +0100
  [1m[36m (0.2ms)[0m  [1mSELECT COUNT(*) FROM `filter_types` WHERE (code = 'features')[0m
  [1m[35m (0.2ms)[0m  SELECT COUNT(*) FROM `filters` WHERE (code = 'offer')
Processing by RestaurantsController#edit as HTML
  Parameters: {"id"=>"oriental-kitchen"}
  [1m[36mUser Load (0.2ms)[0m  [1mSELECT `users`.* FROM `users` WHERE `users`.`id` = 1 LIMIT 1[0m
  [1m[35mRestaurant Load (1.2ms)[0m  SELECT `restaurants`.* FROM `restaurants` WHERE `restaurants`.`slug` = 'oriental-kitchen' LIMIT 1
  [1m[36mSchedule Load (0.2ms)[0m  [1mSELECT `schedules`.* FROM `schedules` WHERE `schedules`.`restaurant_id` = 876 ORDER BY day_of_week ASC[0m
  [1m[35mPhoto Load (0.4ms)[0m  SELECT `photos`.* FROM `photos` WHERE `photos`.`restaurant_id` = 876
  [1m[36mFilter Load (1.3ms)[0m  [1mSELECT `filters`.* FROM `filters` INNER JOIN `filters_restaurants` ON `filters`.`id` = `filters_restaurants`.`filter_id` WHERE `filters_restaurants`.`restaurant_id` = 876 AND `filters`.`code` = 'cuisine'[0m
  [1m[35m (1.0ms)[0m  SELECT `filters`.id FROM `filters` INNER JOIN `filters_restaurants` ON `filters`.`id` = `filters_restaurants`.`filter_id` WHERE `filters_restaurants`.`restaurant_id` = 876
  [1m[36mFilterType Load (0.2ms)[0m  [1mSELECT `filter_types`.* FROM `filter_types` WHERE `filter_types`.`code` = 'hal_status' LIMIT 1[0m
  [1m[35mFilterType Load (0.3ms)[0m  SELECT `filter_types`.* FROM `filter_types` WHERE `filter_types`.`code` = 'price' LIMIT 1
  [1m[36mFilterType Load (0.1ms)[0m  [1mSELECT `filter_types`.* FROM `filter_types` WHERE `filter_types`.`code` = 'cuisine' LIMIT 1[0m
  [1m[35mFilterType Load (0.1ms)[0m  SELECT `filter_types`.* FROM `filter_types` WHERE `filter_types`.`code` = 'alcohol' LIMIT 1
  [1m[36mFilterType Load (0.1ms)[0m  [1mSELECT `filter_types`.* FROM `filter_types` WHERE `filter_types`.`code` = 'features' LIMIT 1[0m
  Rendered restaurants/_googlemap.html.erb (0.1ms)
  [1m[35mFilter Load (0.3ms)[0m  SELECT `filters`.* FROM `filters` WHERE `filters`.`filter_type_id` = 8
  [1m[36mFilter Load (0.3ms)[0m  [1mSELECT `filters`.* FROM `filters` WHERE `filters`.`filter_type_id` = 1 ORDER BY name ASC[0m
  [1m[35mFilter Load (0.2ms)[0m  SELECT `filters`.* FROM `filters` WHERE `filters`.`filter_type_id` = 4
  [1m[36mFilter Load (0.2ms)[0m  [1mSELECT `filters`.* FROM `filters` WHERE `filters`.`filter_type_id` = 6[0m
  [1m[35mFilter Load (0.2ms)[0m  SELECT `filters`.* FROM `filters` WHERE `filters`.`filter_type_id` = 11 AND (code != 'offer')
  Rendered restaurants/_admin_form.html.erb (56.2ms)
  [1m[36mMenu Load (0.3ms)[0m  [1mSELECT `menus`.* FROM `menus` WHERE `menus`.`restaurant_id` = 876[0m
  Rendered restaurants/_upload_menu.html.erb (6.9ms)
  Rendered restaurants/_upload_photos.html.erb (1.3ms)
  Rendered restaurants/edit.html.erb within layouts/admin (68.1ms)
Completed 200 OK in 280ms (Views: 91.4ms | ActiveRecord: 20.0ms)


Started GET "/photos?r_id=876" for 127.0.0.1 at 2016-01-18 10:27:26 +0100
Processing by PhotosController#index as JSON
  Parameters: {"r_id"=>"876"}
  [1m[35mRestaurant Load (4.0ms)[0m  SELECT `restaurants`.* FROM `restaurants` WHERE `restaurants`.`slug` = '876' LIMIT 1
  [1m[36mRestaurant Load (0.9ms)[0m  [1mSELECT `restaurants`.* FROM `restaurants` WHERE `restaurants`.`id` = 876 LIMIT 1[0m
  [1m[35mPhoto Load (0.4ms)[0m  SELECT `photos`.* FROM `photos` WHERE `photos`.`restaurant_id` = 876
Completed 200 OK in 11ms (Views: 0.1ms | ActiveRecord: 5.3ms)


Started GET "/oriental-kitchen/edit" for 127.0.0.1 at 2016-01-18 10:29:08 +0100
  [1m[36m (0.2ms)[0m  [1mSELECT COUNT(*) FROM `filter_types` WHERE (code = 'features')[0m
  [1m[35m (0.2ms)[0m  SELECT COUNT(*) FROM `filters` WHERE (code = 'offer')
Processing by RestaurantsController#edit as HTML
  Parameters: {"id"=>"oriental-kitchen"}
  [1m[36mUser Load (0.3ms)[0m  [1mSELECT `users`.* FROM `users` WHERE `users`.`id` = 1 LIMIT 1[0m
  [1m[35mRestaurant Load (1.2ms)[0m  SELECT `restaurants`.* FROM `restaurants` WHERE `restaurants`.`slug` = 'oriental-kitchen' LIMIT 1
  [1m[36mSchedule Load (0.2ms)[0m  [1mSELECT `schedules`.* FROM `schedules` WHERE `schedules`.`restaurant_id` = 876 ORDER BY day_of_week ASC[0m
  [1m[35mPhoto Load (0.5ms)[0m  SELECT `photos`.* FROM `photos` WHERE `photos`.`restaurant_id` = 876
  [1m[36mFilter Load (1.2ms)[0m  [1mSELECT `filters`.* FROM `filters` INNER JOIN `filters_restaurants` ON `filters`.`id` = `filters_restaurants`.`filter_id` WHERE `filters_restaurants`.`restaurant_id` = 876 AND `filters`.`code` = 'cuisine'[0m
  [1m[35m (1.0ms)[0m  SELECT `filters`.id FROM `filters` INNER JOIN `filters_restaurants` ON `filters`.`id` = `filters_restaurants`.`filter_id` WHERE `filters_restaurants`.`restaurant_id` = 876
  [1m[36mFilterType Load (0.2ms)[0m  [1mSELECT `filter_types`.* FROM `filter_types` WHERE `filter_types`.`code` = 'hal_status' LIMIT 1[0m
  [1m[35mFilterType Load (0.5ms)[0m  SELECT `filter_types`.* FROM `filter_types` WHERE `filter_types`.`code` = 'price' LIMIT 1
  [1m[36mFilterType Load (0.1ms)[0m  [1mSELECT `filter_types`.* FROM `filter_types` WHERE `filter_types`.`code` = 'cuisine' LIMIT 1[0m
  [1m[35mFilterType Load (0.1ms)[0m  SELECT `filter_types`.* FROM `filter_types` WHERE `filter_types`.`code` = 'alcohol' LIMIT 1
  [1m[36mFilterType Load (0.1ms)[0m  [1mSELECT `filter_types`.* FROM `filter_types` WHERE `filter_types`.`code` = 'features' LIMIT 1[0m
  Rendered restaurants/_googlemap.html.erb (0.1ms)
  [1m[35mFilter Load (0.3ms)[0m  SELECT `filters`.* FROM `filters` WHERE `filters`.`filter_type_id` = 8
  [1m[36mFilter Load (0.4ms)[0m  [1mSELECT `filters`.* FROM `filters` WHERE `filters`.`filter_type_id` = 1 ORDER BY name ASC[0m
  [1m[35mFilter Load (0.2ms)[0m  SELECT `filters`.* FROM `filters` WHERE `filters`.`filter_type_id` = 4
  [1m[36mFilter Load (0.2ms)[0m  [1mSELECT `filters`.* FROM `filters` WHERE `filters`.`filter_type_id` = 6[0m
  [1m[35mFilter Load (0.2ms)[0m  SELECT `filters`.* FROM `filters` WHERE `filters`.`filter_type_id` = 11 AND (code != 'offer')
  Rendered restaurants/_admin_form.html.erb (59.0ms)
  [1m[36mMenu Load (0.3ms)[0m  [1mSELECT `menus`.* FROM `menus` WHERE `menus`.`restaurant_id` = 876[0m
  Rendered restaurants/_upload_menu.html.erb (30.6ms)
  Rendered restaurants/_upload_photos.html.erb (1.6ms)
  Rendered restaurants/edit.html.erb within layouts/admin (95.6ms)
Completed 200 OK in 320ms (Views: 132.1ms | ActiveRecord: 21.6ms)


Started GET "/photos?r_id=876" for 127.0.0.1 at 2016-01-18 10:29:12 +0100
Processing by PhotosController#index as JSON
  Parameters: {"r_id"=>"876"}
  [1m[35mRestaurant Load (1.7ms)[0m  SELECT `restaurants`.* FROM `restaurants` WHERE `restaurants`.`slug` = '876' LIMIT 1
  [1m[36mRestaurant Load (0.6ms)[0m  [1mSELECT `restaurants`.* FROM `restaurants` WHERE `restaurants`.`id` = 876 LIMIT 1[0m
  [1m[35mPhoto Load (0.3ms)[0m  SELECT `photos`.* FROM `photos` WHERE `photos`.`restaurant_id` = 876
Completed 200 OK in 11ms (Views: 0.1ms | ActiveRecord: 2.7ms)


Started GET "/admin/collections/admin_new_collection" for 127.0.0.1 at 2016-01-18 10:29:12 +0100
Processing by CollectionsController#admin_new_collection as HTML
  [1m[36mUser Load (0.3ms)[0m  [1mSELECT `users`.* FROM `users` WHERE `users`.`id` = 1 LIMIT 1[0m
  Rendered collections/_collection_form.html.erb (5.7ms)
  [1m[35mRestaurant Load (3.9ms)[0m  SELECT `restaurants`.* FROM `restaurants` WHERE `restaurants`.`disabled` = 0
  Rendered collections/_collection_restaurants_form.html.erb (421.8ms)
  Rendered collections/admin_new_collection.html.erb within layouts/admin (448.9ms)
Completed 500 Internal Server Error in 503ms

ActionView::Template::Error (undefined method `collection_restaurants_path' for #<#<Class:0x007fc262204f78>:0x007fc244c87900>):
    1: 
    2: <div class="form_add_new_collection">
    3:   <%= form_for(@collection_restaurant, html: { id: "collection_restaurants" }) do |f| %>
    4:     <div class="simple-label">
    5:       <%= f.label :menu, "Choose restaurant", class: "control-label" %>
    6:     </div>
  app/views/collections/_collection_restaurants_form.html.erb:3:in `_app_views_collections__collection_restaurants_form_html_erb__241531618330134577_70236181519800'
  app/views/collections/admin_new_collection.html.erb:17:in `_app_views_collections_admin_new_collection_html_erb___3023385902521735371_70236385891800'
  app/controllers/collections_controller.rb:56:in `admin_new_collection'


  Rendered /Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_dispatch/middleware/templates/rescues/_trace.erb (1.2ms)
  Rendered /Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_dispatch/middleware/templates/rescues/_request_and_response.erb (0.8ms)
  Rendered /Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_dispatch/middleware/templates/rescues/template_error.erb within rescues/layout (42.3ms)


Started GET "/admin/collections/admin_new_collection" for 127.0.0.1 at 2016-01-18 10:29:48 +0100
Processing by CollectionsController#admin_new_collection as HTML
  [1m[36mUser Load (0.6ms)[0m  [1mSELECT `users`.* FROM `users` WHERE `users`.`id` = 1 LIMIT 1[0m
  Rendered collections/_collection_form.html.erb (6.0ms)
  [1m[35mRestaurant Load (3.6ms)[0m  SELECT `restaurants`.* FROM `restaurants` WHERE `restaurants`.`disabled` = 0
  Rendered collections/_collection_restaurants_form.html.erb (59.5ms)
  Rendered collections/admin_new_collection.html.erb within layouts/admin (67.3ms)
Completed 200 OK in 76ms (Views: 69.2ms | ActiveRecord: 4.3ms)


Started POST "/admin/collections/add_restaurant" for 127.0.0.1 at 2016-01-18 10:30:26 +0100

ActionController::RoutingError (No route matches [POST] "/admin/collections/add_restaurant"):
  actionpack (3.2.8) lib/action_dispatch/middleware/debug_exceptions.rb:21:in `call'
  actionpack (3.2.8) lib/action_dispatch/middleware/show_exceptions.rb:56:in `call'
  railties (3.2.8) lib/rails/rack/logger.rb:26:in `call_app'
  railties (3.2.8) lib/rails/rack/logger.rb:16:in `call'
  quiet_assets (1.0.3) lib/quiet_assets.rb:23:in `call_with_quiet_assets'
  actionpack (3.2.8) lib/action_dispatch/middleware/request_id.rb:22:in `call'
  rack (1.4.5) lib/rack/methodoverride.rb:21:in `call'
  rack (1.4.5) lib/rack/runtime.rb:17:in `call'
  activesupport (3.2.8) lib/active_support/cache/strategy/local_cache.rb:72:in `call'
  rack (1.4.5) lib/rack/lock.rb:15:in `call'
  actionpack (3.2.8) lib/action_dispatch/middleware/static.rb:62:in `call'
  dragonfly (0.9.15) lib/dragonfly/middleware.rb:13:in `call'
  rack-cache (1.2) lib/rack/cache/context.rb:136:in `forward'
  rack-cache (1.2) lib/rack/cache/context.rb:143:in `pass'
  rack-cache (1.2) lib/rack/cache/context.rb:155:in `invalidate'
  rack-cache (1.2) lib/rack/cache/context.rb:71:in `call!'
  rack-cache (1.2) lib/rack/cache/context.rb:51:in `call'
  railties (3.2.8) lib/rails/engine.rb:479:in `call'
  railties (3.2.8) lib/rails/application.rb:223:in `call'
  rack (1.4.5) lib/rack/content_length.rb:14:in `call'
  railties (3.2.8) lib/rails/rack/log_tailer.rb:17:in `call'
  rack (1.4.5) lib/rack/handler/webrick.rb:59:in `service'
  /Users/kevinmuller/.rvm/rubies/ruby-2.2.4/lib/ruby/2.2.0/webrick/httpserver.rb:138:in `service'
  /Users/kevinmuller/.rvm/rubies/ruby-2.2.4/lib/ruby/2.2.0/webrick/httpserver.rb:94:in `run'
  /Users/kevinmuller/.rvm/rubies/ruby-2.2.4/lib/ruby/2.2.0/webrick/server.rb:294:in `block in start_thread'


  Rendered /Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_dispatch/middleware/templates/rescues/routing_error.erb within rescues/layout (0.6ms)


Started POST "/admin/collections/add_restaurant" for 127.0.0.1 at 2016-01-18 10:30:48 +0100
Processing by CollectionsController#add_restaurant as HTML
  Parameters: {"utf8"=>"âœ“", "authenticity_token"=>"cajmPApKUoLTDgL4nYG/B3GUhj8fezKDJZWxee28cyM=", "collection_restaurant"=>{"restaurant_id"=>"1"}, "commit"=>"Add"}
  [1m[36mUser Load (0.2ms)[0m  [1mSELECT `users`.* FROM `users` WHERE `users`.`id` = 1 LIMIT 1[0m
Completed 500 Internal Server Error in 104ms

ActionView::MissingTemplate (Missing template collections/add_restaurant, application/add_restaurant with {:locale=>[:en], :formats=>[:html], :handlers=>[:erb, :builder, :coffee, :slim]}. Searched in:
  * "/Users/kevinmuller/halalgems_backend/app/views"
  * "/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/ckeditor-3.7.3/app/views"
  * "/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/devise_mailchimp-0.0.4/app/views"
  * "/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/kaminari-bootstrap-3.0.1/app/views"
  * "/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/bootstrap-kaminari-views-0.0.3/app/views"
  * "/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/kaminari-0.14.1/app/views"
  * "/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/devise-2.0.4/app/views"
):
  actionpack (3.2.8) lib/action_view/path_set.rb:58:in `find'
  actionpack (3.2.8) lib/action_view/lookup_context.rb:109:in `find'
  actionpack (3.2.8) lib/action_view/renderer/abstract_renderer.rb:3:in `find_template'
  actionpack (3.2.8) lib/action_view/renderer/template_renderer.rb:34:in `determine_template'
  newrelic_rpm (3.7.3.204) lib/new_relic/agent/instrumentation/rails3/action_controller.rb:157:in `render_with_newrelic'
  actionpack (3.2.8) lib/action_view/renderer/renderer.rb:36:in `render_template'
  actionpack (3.2.8) lib/action_view/renderer/renderer.rb:17:in `render'
  actionpack (3.2.8) lib/abstract_controller/rendering.rb:110:in `_render_template'
  actionpack (3.2.8) lib/action_controller/metal/streaming.rb:225:in `_render_template'
  actionpack (3.2.8) lib/abstract_controller/rendering.rb:103:in `render_to_body'
  actionpack (3.2.8) lib/action_controller/metal/renderers.rb:28:in `render_to_body'
  actionpack (3.2.8) lib/action_controller/metal/compatibility.rb:50:in `render_to_body'
  actionpack (3.2.8) lib/abstract_controller/rendering.rb:88:in `render'
  actionpack (3.2.8) lib/action_controller/metal/rendering.rb:16:in `render'
  actionpack (3.2.8) lib/action_controller/metal/instrumentation.rb:40:in `block (2 levels) in render'
  activesupport (3.2.8) lib/active_support/core_ext/benchmark.rb:5:in `block in ms'
  /Users/kevinmuller/.rvm/rubies/ruby-2.2.4/lib/ruby/2.2.0/benchmark.rb:303:in `realtime'
  activesupport (3.2.8) lib/active_support/core_ext/benchmark.rb:5:in `ms'
  actionpack (3.2.8) lib/action_controller/metal/instrumentation.rb:40:in `block in render'
  actionpack (3.2.8) lib/action_controller/metal/instrumentation.rb:83:in `cleanup_view_runtime'
  activerecord (3.2.8) lib/active_record/railties/controller_runtime.rb:24:in `cleanup_view_runtime'
  actionpack (3.2.8) lib/action_controller/metal/instrumentation.rb:39:in `render'
  /Users/kevinmuller/.rvm/gems/ruby-2.2.4/bundler/gems/remotipart-aadc29e996c3/lib/remotipart/render_overrides.rb:14:in `render_with_remotipart'
  actionpack (3.2.8) lib/action_controller/metal/implicit_render.rb:10:in `default_render'
  actionpack (3.2.8) lib/action_controller/metal/implicit_render.rb:5:in `send_action'
  actionpack (3.2.8) lib/abstract_controller/base.rb:167:in `process_action'
  actionpack (3.2.8) lib/action_controller/metal/rendering.rb:10:in `process_action'
  actionpack (3.2.8) lib/abstract_controller/callbacks.rb:18:in `block in process_action'
  activesupport (3.2.8) lib/active_support/callbacks.rb:458:in `_run__1878201843038484176__process_action__62597762474239354__callbacks'
  activesupport (3.2.8) lib/active_support/callbacks.rb:405:in `__run_callback'
  activesupport (3.2.8) lib/active_support/callbacks.rb:385:in `_run_process_action_callbacks'
  activesupport (3.2.8) lib/active_support/callbacks.rb:81:in `run_callbacks'
  actionpack (3.2.8) lib/abstract_controller/callbacks.rb:17:in `process_action'
  actionpack (3.2.8) lib/action_controller/metal/rescue.rb:29:in `process_action'
  actionpack (3.2.8) lib/action_controller/metal/instrumentation.rb:30:in `block in process_action'
  activesupport (3.2.8) lib/active_support/notifications.rb:123:in `block in instrument'
  activesupport (3.2.8) lib/active_support/notifications/instrumenter.rb:20:in `instrument'
  activesupport (3.2.8) lib/active_support/notifications.rb:123:in `instrument'
  actionpack (3.2.8) lib/action_controller/metal/instrumentation.rb:29:in `process_action'
  actionpack (3.2.8) lib/action_controller/metal/params_wrapper.rb:207:in `process_action'
  activerecord (3.2.8) lib/active_record/railties/controller_runtime.rb:18:in `process_action'
  newrelic_rpm (3.7.3.204) lib/new_relic/agent/instrumentation/rails3/action_controller.rb:38:in `block in process_action'
  newrelic_rpm (3.7.3.204) lib/new_relic/agent/instrumentation/controller_instrumentation.rb:335:in `perform_action_with_newrelic_trace'
  newrelic_rpm (3.7.3.204) lib/new_relic/agent/instrumentation/rails3/action_controller.rb:37:in `process_action'
  actionpack (3.2.8) lib/abstract_controller/base.rb:121:in `process'
  actionpack (3.2.8) lib/abstract_controller/rendering.rb:45:in `process'
  actionpack (3.2.8) lib/action_controller/metal.rb:203:in `dispatch'
  actionpack (3.2.8) lib/action_controller/metal/rack_delegation.rb:14:in `dispatch'
  actionpack (3.2.8) lib/action_controller/metal.rb:246:in `block in action'
  actionpack (3.2.8) lib/action_dispatch/routing/route_set.rb:73:in `call'
  actionpack (3.2.8) lib/action_dispatch/routing/route_set.rb:73:in `dispatch'
  actionpack (3.2.8) lib/action_dispatch/routing/route_set.rb:36:in `call'
  journey (1.0.4) lib/journey/router.rb:68:in `block in call'
  journey (1.0.4) lib/journey/router.rb:56:in `each'
  journey (1.0.4) lib/journey/router.rb:56:in `call'
  actionpack (3.2.8) lib/action_dispatch/routing/route_set.rb:600:in `call'
  omniauth (1.1.4) lib/omniauth/strategy.rb:184:in `call!'
  omniauth (1.1.4) lib/omniauth/strategy.rb:164:in `call'
  newrelic_rpm (3.7.3.204) lib/new_relic/rack/error_collector.rb:55:in `call'
  newrelic_rpm (3.7.3.204) lib/new_relic/rack/agent_hooks.rb:32:in `call'
  newrelic_rpm (3.7.3.204) lib/new_relic/rack/browser_monitoring.rb:27:in `call'
  newrelic_rpm (3.7.3.204) lib/new_relic/rack/developer_mode.rb:45:in `call'
  galetahub-simple_captcha (0.1.5) lib/simple_captcha/middleware.rb:20:in `call'
  /Users/kevinmuller/.rvm/gems/ruby-2.2.4/bundler/gems/client_side_validations-a6a515504520/lib/client_side_validations/middleware.rb:21:in `call'
  warden (1.1.1) lib/warden/manager.rb:35:in `block in call'
  warden (1.1.1) lib/warden/manager.rb:34:in `catch'
  warden (1.1.1) lib/warden/manager.rb:34:in `call'
  actionpack (3.2.8) lib/action_dispatch/middleware/best_standards_support.rb:17:in `call'
  rack (1.4.5) lib/rack/etag.rb:23:in `call'
  rack (1.4.5) lib/rack/conditionalget.rb:35:in `call'
  actionpack (3.2.8) lib/action_dispatch/middleware/head.rb:14:in `call'
  /Users/kevinmuller/.rvm/gems/ruby-2.2.4/bundler/gems/remotipart-aadc29e996c3/lib/remotipart/middleware.rb:27:in `call'
  actionpack (3.2.8) lib/action_dispatch/middleware/params_parser.rb:21:in `call'
  actionpack (3.2.8) lib/action_dispatch/middleware/flash.rb:242:in `call'
  rack (1.4.5) lib/rack/session/abstract/id.rb:210:in `context'
  rack (1.4.5) lib/rack/session/abstract/id.rb:205:in `call'
  actionpack (3.2.8) lib/action_dispatch/middleware/cookies.rb:339:in `call'
  dragonfly (0.9.15) lib/dragonfly/cookie_monster.rb:9:in `call'
  activerecord (3.2.8) lib/active_record/query_cache.rb:64:in `call'
  activerecord (3.2.8) lib/active_record/connection_adapters/abstract/connection_pool.rb:473:in `call'
  actionpack (3.2.8) lib/action_dispatch/middleware/callbacks.rb:28:in `block in call'
  activesupport (3.2.8) lib/active_support/callbacks.rb:405:in `_run__1871245027803988066__call__4207201468600934469__callbacks'
  activesupport (3.2.8) lib/active_support/callbacks.rb:405:in `__run_callback'
  activesupport (3.2.8) lib/active_support/callbacks.rb:385:in `_run_call_callbacks'
  activesupport (3.2.8) lib/active_support/callbacks.rb:81:in `run_callbacks'
  actionpack (3.2.8) lib/action_dispatch/middleware/callbacks.rb:27:in `call'
  actionpack (3.2.8) lib/action_dispatch/middleware/reloader.rb:65:in `call'
  actionpack (3.2.8) lib/action_dispatch/middleware/remote_ip.rb:31:in `call'
  actionpack (3.2.8) lib/action_dispatch/middleware/debug_exceptions.rb:16:in `call'
  actionpack (3.2.8) lib/action_dispatch/middleware/show_exceptions.rb:56:in `call'
  railties (3.2.8) lib/rails/rack/logger.rb:26:in `call_app'
  railties (3.2.8) lib/rails/rack/logger.rb:16:in `call'
  quiet_assets (1.0.3) lib/quiet_assets.rb:23:in `call_with_quiet_assets'
  actionpack (3.2.8) lib/action_dispatch/middleware/request_id.rb:22:in `call'
  rack (1.4.5) lib/rack/methodoverride.rb:21:in `call'
  rack (1.4.5) lib/rack/runtime.rb:17:in `call'
  activesupport (3.2.8) lib/active_support/cache/strategy/local_cache.rb:72:in `call'
  rack (1.4.5) lib/rack/lock.rb:15:in `call'
  actionpack (3.2.8) lib/action_dispatch/middleware/static.rb:62:in `call'
  dragonfly (0.9.15) lib/dragonfly/middleware.rb:13:in `call'
  rack-cache (1.2) lib/rack/cache/context.rb:136:in `forward'
  rack-cache (1.2) lib/rack/cache/context.rb:143:in `pass'
  rack-cache (1.2) lib/rack/cache/context.rb:155:in `invalidate'
  rack-cache (1.2) lib/rack/cache/context.rb:71:in `call!'
  rack-cache (1.2) lib/rack/cache/context.rb:51:in `call'
  railties (3.2.8) lib/rails/engine.rb:479:in `call'
  railties (3.2.8) lib/rails/application.rb:223:in `call'
  rack (1.4.5) lib/rack/content_length.rb:14:in `call'
  railties (3.2.8) lib/rails/rack/log_tailer.rb:17:in `call'
  rack (1.4.5) lib/rack/handler/webrick.rb:59:in `service'
  /Users/kevinmuller/.rvm/rubies/ruby-2.2.4/lib/ruby/2.2.0/webrick/httpserver.rb:138:in `service'
  /Users/kevinmuller/.rvm/rubies/ruby-2.2.4/lib/ruby/2.2.0/webrick/httpserver.rb:94:in `run'
  /Users/kevinmuller/.rvm/rubies/ruby-2.2.4/lib/ruby/2.2.0/webrick/server.rb:294:in `block in start_thread'


  Rendered /Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_dispatch/middleware/templates/rescues/missing_template.erb within rescues/layout (0.4ms)


Started GET "/admin/restaurants" for 127.0.0.1 at 2016-01-18 10:34:05 +0100
  [1m[35m (0.3ms)[0m  SELECT COUNT(*) FROM `filter_types` WHERE (code = 'features')
  [1m[36m (0.2ms)[0m  [1mSELECT COUNT(*) FROM `filters` WHERE (code = 'offer')[0m
Processing by RestaurantsController#index as HTML
  [1m[35mUser Load (0.2ms)[0m  SELECT `users`.* FROM `users` WHERE `users`.`id` = 1 LIMIT 1
  Rendered shared/_restaurant_manage_tabs.html.erb (0.9ms)
  Rendered restaurants/_condition_fields.html.erb (12.9ms)
  [1m[36mRestaurant Load (0.8ms)[0m  [1mSELECT `restaurants`.* FROM `restaurants` ORDER BY disabled ASC,created_at DESC LIMIT 12 OFFSET 0[0m
  [1m[35mPhoto Load (0.5ms)[0m  SELECT `photos`.* FROM `photos` WHERE (restaurant_id = 876 and cover = true and status = 1) LIMIT 1
  [1m[36mPhoto Load (0.3ms)[0m  [1mSELECT `photos`.* FROM `photos` WHERE `photos`.`restaurant_id` = 876 AND `photos`.`status` = 1 ORDER BY restaurant_id ASC, created_at DESC LIMIT 1[0m
  [1m[35mPhoto Load (0.5ms)[0m  SELECT `photos`.* FROM `photos` WHERE (restaurant_id = 851 and cover = true and status = 1) LIMIT 1
  [1m[36mPhoto Load (0.3ms)[0m  [1mSELECT `photos`.* FROM `photos` WHERE `photos`.`restaurant_id` = 851 AND `photos`.`status` = 1 ORDER BY restaurant_id ASC, created_at DESC LIMIT 1[0m
  [1m[35mPhoto Load (0.4ms)[0m  SELECT `photos`.* FROM `photos` WHERE (restaurant_id = 693 and cover = true and status = 1) LIMIT 1
  [1m[36mPhoto Load (0.3ms)[0m  [1mSELECT `photos`.* FROM `photos` WHERE `photos`.`restaurant_id` = 693 AND `photos`.`status` = 1 ORDER BY restaurant_id ASC, created_at DESC LIMIT 1[0m
  [1m[35mPhoto Load (0.3ms)[0m  SELECT `photos`.* FROM `photos` WHERE (restaurant_id = 686 and cover = true and status = 1) LIMIT 1
  [1m[36mPhoto Load (0.3ms)[0m  [1mSELECT `photos`.* FROM `photos` WHERE `photos`.`restaurant_id` = 686 AND `photos`.`status` = 1 ORDER BY restaurant_id ASC, created_at DESC LIMIT 1[0m
  [1m[35mPhoto Load (0.3ms)[0m  SELECT `photos`.* FROM `photos` WHERE (restaurant_id = 669 and cover = true and status = 1) LIMIT 1
  [1m[36mPhoto Load (0.3ms)[0m  [1mSELECT `photos`.* FROM `photos` WHERE `photos`.`restaurant_id` = 669 AND `photos`.`status` = 1 ORDER BY restaurant_id ASC, created_at DESC LIMIT 1[0m
  [1m[35mPhoto Load (0.3ms)[0m  SELECT `photos`.* FROM `photos` WHERE (restaurant_id = 251 and cover = true and status = 1) LIMIT 1
  [1m[36mPhoto Load (0.3ms)[0m  [1mSELECT `photos`.* FROM `photos` WHERE `photos`.`restaurant_id` = 251 AND `photos`.`status` = 1 ORDER BY restaurant_id ASC, created_at DESC LIMIT 1[0m
  [1m[35mPhoto Load (0.3ms)[0m  SELECT `photos`.* FROM `photos` WHERE (restaurant_id = 250 and cover = true and status = 1) LIMIT 1
  [1m[36mPhoto Load (0.3ms)[0m  [1mSELECT `photos`.* FROM `photos` WHERE `photos`.`restaurant_id` = 250 AND `photos`.`status` = 1 ORDER BY restaurant_id ASC, created_at DESC LIMIT 1[0m
  [1m[35mPhoto Load (0.5ms)[0m  SELECT `photos`.* FROM `photos` WHERE (restaurant_id = 237 and cover = true and status = 1) LIMIT 1
  [1m[36mPhoto Load (0.3ms)[0m  [1mSELECT `photos`.* FROM `photos` WHERE `photos`.`restaurant_id` = 237 AND `photos`.`status` = 1 ORDER BY restaurant_id ASC, created_at DESC LIMIT 1[0m
  [1m[35mPhoto Load (0.3ms)[0m  SELECT `photos`.* FROM `photos` WHERE (restaurant_id = 231 and cover = true and status = 1) LIMIT 1
  [1m[36mPhoto Load (0.3ms)[0m  [1mSELECT `photos`.* FROM `photos` WHERE `photos`.`restaurant_id` = 231 AND `photos`.`status` = 1 ORDER BY restaurant_id ASC, created_at DESC LIMIT 1[0m
  [1m[35mPhoto Load (0.4ms)[0m  SELECT `photos`.* FROM `photos` WHERE (restaurant_id = 222 and cover = true and status = 1) LIMIT 1
  [1m[36mPhoto Load (0.3ms)[0m  [1mSELECT `photos`.* FROM `photos` WHERE `photos`.`restaurant_id` = 222 AND `photos`.`status` = 1 ORDER BY restaurant_id ASC, created_at DESC LIMIT 1[0m
  [1m[35mPhoto Load (0.3ms)[0m  SELECT `photos`.* FROM `photos` WHERE (restaurant_id = 221 and cover = true and status = 1) LIMIT 1
  [1m[36mPhoto Load (0.3ms)[0m  [1mSELECT `photos`.* FROM `photos` WHERE `photos`.`restaurant_id` = 221 AND `photos`.`status` = 1 ORDER BY restaurant_id ASC, created_at DESC LIMIT 1[0m
  [1m[35mPhoto Load (0.5ms)[0m  SELECT `photos`.* FROM `photos` WHERE (restaurant_id = 216 and cover = true and status = 1) LIMIT 1
  [1m[36mPhoto Load (0.3ms)[0m  [1mSELECT `photos`.* FROM `photos` WHERE `photos`.`restaurant_id` = 216 AND `photos`.`status` = 1 ORDER BY restaurant_id ASC, created_at DESC LIMIT 1[0m
  [1m[35m (0.4ms)[0m  SELECT COUNT(*) FROM `restaurants` 
  Rendered restaurants/index.html.erb within layouts/admin (146.6ms)
Completed 200 OK in 252ms (Views: 160.0ms | ActiveRecord: 15.4ms)


Started GET "/admin/collections" for 127.0.0.1 at 2016-01-18 10:34:06 +0100
Processing by CollectionsController#index as HTML
  Rendered shared/_restaurant_manage_tabs.html.erb (0.6ms)
  [1m[36mCollection Load (0.2ms)[0m  [1mSELECT `collections`.* FROM `collections` ORDER BY name ASC, created_at DESC LIMIT 12 OFFSET 0[0m
  [1m[35mCollectionImage Load (0.2ms)[0m  SELECT `collection_images`.* FROM `collection_images` WHERE (collection_id = 3) LIMIT 1
  [1m[36mCollectionImage Load (0.3ms)[0m  [1mSELECT `collection_images`.* FROM `collection_images` WHERE (collection_id = 2) LIMIT 1[0m
  [1m[35m (0.2ms)[0m  SELECT COUNT(*) FROM `collections` 
  Rendered collections/index.erb within layouts/admin (55.8ms)
  [1m[36mUser Load (0.3ms)[0m  [1mSELECT `users`.* FROM `users` WHERE `users`.`id` = 1 LIMIT 1[0m
Completed 200 OK in 79ms (Views: 72.5ms | ActiveRecord: 5.3ms)


Started GET "/collection/3/edit" for 127.0.0.1 at 2016-01-18 10:34:12 +0100
Processing by CollectionsController#edit_collection as HTML
  Parameters: {"id"=>"3"}
  [1m[35mUser Load (0.4ms)[0m  SELECT `users`.* FROM `users` WHERE `users`.`id` = 1 LIMIT 1
  [1m[36mCollection Load (0.2ms)[0m  [1mSELECT `collections`.* FROM `collections` WHERE `collections`.`id` = 3 LIMIT 1[0m
  [1m[35mCollectionImage Load (0.3ms)[0m  SELECT `collection_images`.* FROM `collection_images` WHERE (collection_id = 3) LIMIT 1
  Rendered collections/_collection_form.html.erb (10.1ms)
  Rendered collections/_collection_restaurants_form.html.erb (1.3ms)
  Rendered collections/edit_collection.html.erb within layouts/admin (29.6ms)
Completed 500 Internal Server Error in 58ms

ActionView::Template::Error (undefined method `model_name' for NilClass:Class):
    1: 
    2: <div class="form_add_new_collection">
    3:   <%= form_for(@collection_restaurant, url: add_restaurant_collections_path , html: { id: "collection_restaurants" }) do |f| %>
    4:     <div class="simple-label">
    5:       <%= f.label :menu, "Choose restaurant", class: "control-label" %>
    6:     </div>
  app/views/collections/_collection_restaurants_form.html.erb:3:in `_app_views_collections__collection_restaurants_form_html_erb__241531618330134577_70236361697840'
  app/views/collections/edit_collection.html.erb:17:in `_app_views_collections_edit_collection_html_erb___2603788858892649966_70236320703140'


  Rendered /Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_dispatch/middleware/templates/rescues/_trace.erb (2.0ms)
  Rendered /Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_dispatch/middleware/templates/rescues/_request_and_response.erb (1.0ms)
  Rendered /Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_dispatch/middleware/templates/rescues/template_error.erb within rescues/layout (53.9ms)


Started GET "/collection/3/edit" for 127.0.0.1 at 2016-01-18 10:34:46 +0100
Processing by CollectionsController#edit_collection as HTML
  Parameters: {"id"=>"3"}
  [1m[36mUser Load (0.3ms)[0m  [1mSELECT `users`.* FROM `users` WHERE `users`.`id` = 1 LIMIT 1[0m
  [1m[35mCollection Load (0.2ms)[0m  SELECT `collections`.* FROM `collections` WHERE `collections`.`id` = 3 LIMIT 1
  [1m[36m (0.2ms)[0m  [1mSELECT COUNT(*) FROM `filter_types` WHERE (code = 'features')[0m
  [1m[35m (0.2ms)[0m  SELECT COUNT(*) FROM `filters` WHERE (code = 'offer')
  [1m[36mCollectionImage Load (0.2ms)[0m  [1mSELECT `collection_images`.* FROM `collection_images` WHERE (collection_id = 3) LIMIT 1[0m
  Rendered collections/_collection_form.html.erb (38.2ms)
  [1m[35mRestaurant Load (2.9ms)[0m  SELECT `restaurants`.* FROM `restaurants` WHERE `restaurants`.`disabled` = 0
  Rendered collections/_collection_restaurants_form.html.erb (120.4ms)
  Rendered collections/edit_collection.html.erb within layouts/admin (160.6ms)
Completed 200 OK in 426ms (Views: 164.4ms | ActiveRecord: 41.3ms)


Started GET "/collection/3/edit" for 127.0.0.1 at 2016-01-18 10:35:58 +0100
Processing by CollectionsController#edit_collection as HTML
  Parameters: {"id"=>"3"}
  [1m[36mUser Load (0.4ms)[0m  [1mSELECT `users`.* FROM `users` WHERE `users`.`id` = 1 LIMIT 1[0m
  [1m[35mCollection Load (0.3ms)[0m  SELECT `collections`.* FROM `collections` WHERE `collections`.`id` = 3 LIMIT 1
  [1m[36mCollectionImage Load (0.3ms)[0m  [1mSELECT `collection_images`.* FROM `collection_images` WHERE (collection_id = 3) LIMIT 1[0m
  Rendered collections/_collection_form.html.erb (10.5ms)
  [1m[35mRestaurant Load (3.6ms)[0m  SELECT `restaurants`.* FROM `restaurants` WHERE `restaurants`.`disabled` = 0
  Rendered collections/_collection_restaurants_form.html.erb (87.0ms)
  Rendered collections/edit_collection.html.erb within layouts/admin (132.5ms)
Completed 200 OK in 148ms (Views: 138.8ms | ActiveRecord: 4.6ms)


Started POST "/admin/collections/add_restaurant" for 127.0.0.1 at 2016-01-18 10:36:12 +0100
Processing by CollectionsController#add_restaurant as HTML
  Parameters: {"utf8"=>"âœ“", "authenticity_token"=>"cajmPApKUoLTDgL4nYG/B3GUhj8fezKDJZWxee28cyM=", "collection_restaurant"=>{"restaurant_id"=>"9"}, "commit"=>"Add"}
  [1m[36mUser Load (0.4ms)[0m  [1mSELECT `users`.* FROM `users` WHERE `users`.`id` = 1 LIMIT 1[0m
  [1m[35m (0.4ms)[0m  BEGIN
  [1m[36mSQL (0.6ms)[0m  [1mINSERT INTO `collection_restaurants` (`collection_id`, `order`, `restaurant_id`) VALUES (NULL, NULL, NULL)[0m
  [1m[35m (1.1ms)[0m  COMMIT
Completed 500 Internal Server Error in 22ms

ActionView::MissingTemplate (Missing template collections/add_restaurant, application/add_restaurant with {:locale=>[:en], :formats=>[:html], :handlers=>[:erb, :builder, :coffee, :slim]}. Searched in:
  * "/Users/kevinmuller/halalgems_backend/app/views"
  * "/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/ckeditor-3.7.3/app/views"
  * "/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/devise_mailchimp-0.0.4/app/views"
  * "/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/kaminari-bootstrap-3.0.1/app/views"
  * "/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/bootstrap-kaminari-views-0.0.3/app/views"
  * "/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/kaminari-0.14.1/app/views"
  * "/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/devise-2.0.4/app/views"
):
  actionpack (3.2.8) lib/action_view/path_set.rb:58:in `find'
  actionpack (3.2.8) lib/action_view/lookup_context.rb:109:in `find'
  actionpack (3.2.8) lib/action_view/renderer/abstract_renderer.rb:3:in `find_template'
  actionpack (3.2.8) lib/action_view/renderer/template_renderer.rb:34:in `determine_template'
  newrelic_rpm (3.7.3.204) lib/new_relic/agent/instrumentation/rails3/action_controller.rb:157:in `render_with_newrelic'
  actionpack (3.2.8) lib/action_view/renderer/renderer.rb:36:in `render_template'
  actionpack (3.2.8) lib/action_view/renderer/renderer.rb:17:in `render'
  actionpack (3.2.8) lib/abstract_controller/rendering.rb:110:in `_render_template'
  actionpack (3.2.8) lib/action_controller/metal/streaming.rb:225:in `_render_template'
  actionpack (3.2.8) lib/abstract_controller/rendering.rb:103:in `render_to_body'
  actionpack (3.2.8) lib/action_controller/metal/renderers.rb:28:in `render_to_body'
  actionpack (3.2.8) lib/action_controller/metal/compatibility.rb:50:in `render_to_body'
  actionpack (3.2.8) lib/abstract_controller/rendering.rb:88:in `render'
  actionpack (3.2.8) lib/action_controller/metal/rendering.rb:16:in `render'
  actionpack (3.2.8) lib/action_controller/metal/instrumentation.rb:40:in `block (2 levels) in render'
  activesupport (3.2.8) lib/active_support/core_ext/benchmark.rb:5:in `block in ms'
  /Users/kevinmuller/.rvm/rubies/ruby-2.2.4/lib/ruby/2.2.0/benchmark.rb:303:in `realtime'
  activesupport (3.2.8) lib/active_support/core_ext/benchmark.rb:5:in `ms'
  actionpack (3.2.8) lib/action_controller/metal/instrumentation.rb:40:in `block in render'
  actionpack (3.2.8) lib/action_controller/metal/instrumentation.rb:83:in `cleanup_view_runtime'
  activerecord (3.2.8) lib/active_record/railties/controller_runtime.rb:24:in `cleanup_view_runtime'
  actionpack (3.2.8) lib/action_controller/metal/instrumentation.rb:39:in `render'
  /Users/kevinmuller/.rvm/gems/ruby-2.2.4/bundler/gems/remotipart-aadc29e996c3/lib/remotipart/render_overrides.rb:14:in `render_with_remotipart'
  actionpack (3.2.8) lib/action_controller/metal/implicit_render.rb:10:in `default_render'
  actionpack (3.2.8) lib/action_controller/metal/implicit_render.rb:5:in `send_action'
  actionpack (3.2.8) lib/abstract_controller/base.rb:167:in `process_action'
  actionpack (3.2.8) lib/action_controller/metal/rendering.rb:10:in `process_action'
  actionpack (3.2.8) lib/abstract_controller/callbacks.rb:18:in `block in process_action'
  activesupport (3.2.8) lib/active_support/callbacks.rb:458:in `_run__1878201843038484176__process_action__62597762474239354__callbacks'
  activesupport (3.2.8) lib/active_support/callbacks.rb:405:in `__run_callback'
  activesupport (3.2.8) lib/active_support/callbacks.rb:385:in `_run_process_action_callbacks'
  activesupport (3.2.8) lib/active_support/callbacks.rb:81:in `run_callbacks'
  actionpack (3.2.8) lib/abstract_controller/callbacks.rb:17:in `process_action'
  actionpack (3.2.8) lib/action_controller/metal/rescue.rb:29:in `process_action'
  actionpack (3.2.8) lib/action_controller/metal/instrumentation.rb:30:in `block in process_action'
  activesupport (3.2.8) lib/active_support/notifications.rb:123:in `block in instrument'
  activesupport (3.2.8) lib/active_support/notifications/instrumenter.rb:20:in `instrument'
  activesupport (3.2.8) lib/active_support/notifications.rb:123:in `instrument'
  actionpack (3.2.8) lib/action_controller/metal/instrumentation.rb:29:in `process_action'
  actionpack (3.2.8) lib/action_controller/metal/params_wrapper.rb:207:in `process_action'
  activerecord (3.2.8) lib/active_record/railties/controller_runtime.rb:18:in `process_action'
  newrelic_rpm (3.7.3.204) lib/new_relic/agent/instrumentation/rails3/action_controller.rb:38:in `block in process_action'
  newrelic_rpm (3.7.3.204) lib/new_relic/agent/instrumentation/controller_instrumentation.rb:335:in `perform_action_with_newrelic_trace'
  newrelic_rpm (3.7.3.204) lib/new_relic/agent/instrumentation/rails3/action_controller.rb:37:in `process_action'
  actionpack (3.2.8) lib/abstract_controller/base.rb:121:in `process'
  actionpack (3.2.8) lib/abstract_controller/rendering.rb:45:in `process'
  actionpack (3.2.8) lib/action_controller/metal.rb:203:in `dispatch'
  actionpack (3.2.8) lib/action_controller/metal/rack_delegation.rb:14:in `dispatch'
  actionpack (3.2.8) lib/action_controller/metal.rb:246:in `block in action'
  actionpack (3.2.8) lib/action_dispatch/routing/route_set.rb:73:in `call'
  actionpack (3.2.8) lib/action_dispatch/routing/route_set.rb:73:in `dispatch'
  actionpack (3.2.8) lib/action_dispatch/routing/route_set.rb:36:in `call'
  journey (1.0.4) lib/journey/router.rb:68:in `block in call'
  journey (1.0.4) lib/journey/router.rb:56:in `each'
  journey (1.0.4) lib/journey/router.rb:56:in `call'
  actionpack (3.2.8) lib/action_dispatch/routing/route_set.rb:600:in `call'
  omniauth (1.1.4) lib/omniauth/strategy.rb:184:in `call!'
  omniauth (1.1.4) lib/omniauth/strategy.rb:164:in `call'
  newrelic_rpm (3.7.3.204) lib/new_relic/rack/error_collector.rb:55:in `call'
  newrelic_rpm (3.7.3.204) lib/new_relic/rack/agent_hooks.rb:32:in `call'
  newrelic_rpm (3.7.3.204) lib/new_relic/rack/browser_monitoring.rb:27:in `call'
  newrelic_rpm (3.7.3.204) lib/new_relic/rack/developer_mode.rb:45:in `call'
  galetahub-simple_captcha (0.1.5) lib/simple_captcha/middleware.rb:20:in `call'
  /Users/kevinmuller/.rvm/gems/ruby-2.2.4/bundler/gems/client_side_validations-a6a515504520/lib/client_side_validations/middleware.rb:21:in `call'
  warden (1.1.1) lib/warden/manager.rb:35:in `block in call'
  warden (1.1.1) lib/warden/manager.rb:34:in `catch'
  warden (1.1.1) lib/warden/manager.rb:34:in `call'
  actionpack (3.2.8) lib/action_dispatch/middleware/best_standards_support.rb:17:in `call'
  rack (1.4.5) lib/rack/etag.rb:23:in `call'
  rack (1.4.5) lib/rack/conditionalget.rb:35:in `call'
  actionpack (3.2.8) lib/action_dispatch/middleware/head.rb:14:in `call'
  /Users/kevinmuller/.rvm/gems/ruby-2.2.4/bundler/gems/remotipart-aadc29e996c3/lib/remotipart/middleware.rb:27:in `call'
  actionpack (3.2.8) lib/action_dispatch/middleware/params_parser.rb:21:in `call'
  actionpack (3.2.8) lib/action_dispatch/middleware/flash.rb:242:in `call'
  rack (1.4.5) lib/rack/session/abstract/id.rb:210:in `context'
  rack (1.4.5) lib/rack/session/abstract/id.rb:205:in `call'
  actionpack (3.2.8) lib/action_dispatch/middleware/cookies.rb:339:in `call'
  dragonfly (0.9.15) lib/dragonfly/cookie_monster.rb:9:in `call'
  activerecord (3.2.8) lib/active_record/query_cache.rb:64:in `call'
  activerecord (3.2.8) lib/active_record/connection_adapters/abstract/connection_pool.rb:473:in `call'
  actionpack (3.2.8) lib/action_dispatch/middleware/callbacks.rb:28:in `block in call'
  activesupport (3.2.8) lib/active_support/callbacks.rb:405:in `_run__1871245027803988066__call__4207201468600934469__callbacks'
  activesupport (3.2.8) lib/active_support/callbacks.rb:405:in `__run_callback'
  activesupport (3.2.8) lib/active_support/callbacks.rb:385:in `_run_call_callbacks'
  activesupport (3.2.8) lib/active_support/callbacks.rb:81:in `run_callbacks'
  actionpack (3.2.8) lib/action_dispatch/middleware/callbacks.rb:27:in `call'
  actionpack (3.2.8) lib/action_dispatch/middleware/reloader.rb:65:in `call'
  actionpack (3.2.8) lib/action_dispatch/middleware/remote_ip.rb:31:in `call'
  actionpack (3.2.8) lib/action_dispatch/middleware/debug_exceptions.rb:16:in `call'
  actionpack (3.2.8) lib/action_dispatch/middleware/show_exceptions.rb:56:in `call'
  railties (3.2.8) lib/rails/rack/logger.rb:26:in `call_app'
  railties (3.2.8) lib/rails/rack/logger.rb:16:in `call'
  quiet_assets (1.0.3) lib/quiet_assets.rb:23:in `call_with_quiet_assets'
  actionpack (3.2.8) lib/action_dispatch/middleware/request_id.rb:22:in `call'
  rack (1.4.5) lib/rack/methodoverride.rb:21:in `call'
  rack (1.4.5) lib/rack/runtime.rb:17:in `call'
  activesupport (3.2.8) lib/active_support/cache/strategy/local_cache.rb:72:in `call'
  rack (1.4.5) lib/rack/lock.rb:15:in `call'
  actionpack (3.2.8) lib/action_dispatch/middleware/static.rb:62:in `call'
  dragonfly (0.9.15) lib/dragonfly/middleware.rb:13:in `call'
  rack-cache (1.2) lib/rack/cache/context.rb:136:in `forward'
  rack-cache (1.2) lib/rack/cache/context.rb:143:in `pass'
  rack-cache (1.2) lib/rack/cache/context.rb:155:in `invalidate'
  rack-cache (1.2) lib/rack/cache/context.rb:71:in `call!'
  rack-cache (1.2) lib/rack/cache/context.rb:51:in `call'
  railties (3.2.8) lib/rails/engine.rb:479:in `call'
  railties (3.2.8) lib/rails/application.rb:223:in `call'
  rack (1.4.5) lib/rack/content_length.rb:14:in `call'
  railties (3.2.8) lib/rails/rack/log_tailer.rb:17:in `call'
  rack (1.4.5) lib/rack/handler/webrick.rb:59:in `service'
  /Users/kevinmuller/.rvm/rubies/ruby-2.2.4/lib/ruby/2.2.0/webrick/httpserver.rb:138:in `service'
  /Users/kevinmuller/.rvm/rubies/ruby-2.2.4/lib/ruby/2.2.0/webrick/httpserver.rb:94:in `run'
  /Users/kevinmuller/.rvm/rubies/ruby-2.2.4/lib/ruby/2.2.0/webrick/server.rb:294:in `block in start_thread'


  Rendered /Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_dispatch/middleware/templates/rescues/missing_template.erb within rescues/layout (0.8ms)


Started GET "/admin/restaurants" for 127.0.0.1 at 2016-01-18 10:38:24 +0100
Processing by RestaurantsController#index as HTML
  [1m[36mUser Load (0.4ms)[0m  [1mSELECT `users`.* FROM `users` WHERE `users`.`id` = 1 LIMIT 1[0m
  Rendered shared/_restaurant_manage_tabs.html.erb (1.1ms)
  Rendered restaurants/_condition_fields.html.erb (13.2ms)
  [1m[35mRestaurant Load (0.8ms)[0m  SELECT `restaurants`.* FROM `restaurants` ORDER BY disabled ASC,created_at DESC LIMIT 12 OFFSET 0
  [1m[36mPhoto Load (0.4ms)[0m  [1mSELECT `photos`.* FROM `photos` WHERE (restaurant_id = 876 and cover = true and status = 1) LIMIT 1[0m
  [1m[35mPhoto Load (0.3ms)[0m  SELECT `photos`.* FROM `photos` WHERE `photos`.`restaurant_id` = 876 AND `photos`.`status` = 1 ORDER BY restaurant_id ASC, created_at DESC LIMIT 1
  [1m[36mPhoto Load (0.3ms)[0m  [1mSELECT `photos`.* FROM `photos` WHERE (restaurant_id = 851 and cover = true and status = 1) LIMIT 1[0m
  [1m[35mPhoto Load (0.3ms)[0m  SELECT `photos`.* FROM `photos` WHERE `photos`.`restaurant_id` = 851 AND `photos`.`status` = 1 ORDER BY restaurant_id ASC, created_at DESC LIMIT 1
  [1m[36mPhoto Load (0.3ms)[0m  [1mSELECT `photos`.* FROM `photos` WHERE (restaurant_id = 693 and cover = true and status = 1) LIMIT 1[0m
  [1m[35mPhoto Load (0.3ms)[0m  SELECT `photos`.* FROM `photos` WHERE `photos`.`restaurant_id` = 693 AND `photos`.`status` = 1 ORDER BY restaurant_id ASC, created_at DESC LIMIT 1
  [1m[36mPhoto Load (0.3ms)[0m  [1mSELECT `photos`.* FROM `photos` WHERE (restaurant_id = 686 and cover = true and status = 1) LIMIT 1[0m
  [1m[35mPhoto Load (0.3ms)[0m  SELECT `photos`.* FROM `photos` WHERE `photos`.`restaurant_id` = 686 AND `photos`.`status` = 1 ORDER BY restaurant_id ASC, created_at DESC LIMIT 1
  [1m[36mPhoto Load (0.3ms)[0m  [1mSELECT `photos`.* FROM `photos` WHERE (restaurant_id = 669 and cover = true and status = 1) LIMIT 1[0m
  [1m[35mPhoto Load (0.3ms)[0m  SELECT `photos`.* FROM `photos` WHERE `photos`.`restaurant_id` = 669 AND `photos`.`status` = 1 ORDER BY restaurant_id ASC, created_at DESC LIMIT 1
  [1m[36mPhoto Load (0.4ms)[0m  [1mSELECT `photos`.* FROM `photos` WHERE (restaurant_id = 251 and cover = true and status = 1) LIMIT 1[0m
  [1m[35mPhoto Load (0.3ms)[0m  SELECT `photos`.* FROM `photos` WHERE `photos`.`restaurant_id` = 251 AND `photos`.`status` = 1 ORDER BY restaurant_id ASC, created_at DESC LIMIT 1
  [1m[36mPhoto Load (0.3ms)[0m  [1mSELECT `photos`.* FROM `photos` WHERE (restaurant_id = 250 and cover = true and status = 1) LIMIT 1[0m
  [1m[35mPhoto Load (0.3ms)[0m  SELECT `photos`.* FROM `photos` WHERE `photos`.`restaurant_id` = 250 AND `photos`.`status` = 1 ORDER BY restaurant_id ASC, created_at DESC LIMIT 1
  [1m[36mPhoto Load (0.3ms)[0m  [1mSELECT `photos`.* FROM `photos` WHERE (restaurant_id = 237 and cover = true and status = 1) LIMIT 1[0m
  [1m[35mPhoto Load (0.9ms)[0m  SELECT `photos`.* FROM `photos` WHERE `photos`.`restaurant_id` = 237 AND `photos`.`status` = 1 ORDER BY restaurant_id ASC, created_at DESC LIMIT 1
  [1m[36mPhoto Load (0.6ms)[0m  [1mSELECT `photos`.* FROM `photos` WHERE (restaurant_id = 231 and cover = true and status = 1) LIMIT 1[0m
  [1m[35mPhoto Load (0.3ms)[0m  SELECT `photos`.* FROM `photos` WHERE `photos`.`restaurant_id` = 231 AND `photos`.`status` = 1 ORDER BY restaurant_id ASC, created_at DESC LIMIT 1
  [1m[36mPhoto Load (0.3ms)[0m  [1mSELECT `photos`.* FROM `photos` WHERE (restaurant_id = 222 and cover = true and status = 1) LIMIT 1[0m
  [1m[35mPhoto Load (0.3ms)[0m  SELECT `photos`.* FROM `photos` WHERE `photos`.`restaurant_id` = 222 AND `photos`.`status` = 1 ORDER BY restaurant_id ASC, created_at DESC LIMIT 1
  [1m[36mPhoto Load (0.3ms)[0m  [1mSELECT `photos`.* FROM `photos` WHERE (restaurant_id = 221 and cover = true and status = 1) LIMIT 1[0m
  [1m[35mPhoto Load (0.3ms)[0m  SELECT `photos`.* FROM `photos` WHERE `photos`.`restaurant_id` = 221 AND `photos`.`status` = 1 ORDER BY restaurant_id ASC, created_at DESC LIMIT 1
  [1m[36mPhoto Load (0.3ms)[0m  [1mSELECT `photos`.* FROM `photos` WHERE (restaurant_id = 216 and cover = true and status = 1) LIMIT 1[0m
  [1m[35mPhoto Load (0.3ms)[0m  SELECT `photos`.* FROM `photos` WHERE `photos`.`restaurant_id` = 216 AND `photos`.`status` = 1 ORDER BY restaurant_id ASC, created_at DESC LIMIT 1
  [1m[36m (0.4ms)[0m  [1mSELECT COUNT(*) FROM `restaurants` [0m
  Rendered restaurants/index.html.erb within layouts/admin (203.0ms)
Completed 200 OK in 230ms (Views: 158.2ms | ActiveRecord: 68.0ms)


Started GET "/admin/collections" for 127.0.0.1 at 2016-01-18 10:38:26 +0100
Processing by CollectionsController#index as HTML
  Rendered shared/_restaurant_manage_tabs.html.erb (0.7ms)
  [1m[35mCollection Load (0.3ms)[0m  SELECT `collections`.* FROM `collections` ORDER BY name ASC, created_at DESC LIMIT 12 OFFSET 0
  [1m[36mCollectionImage Load (0.3ms)[0m  [1mSELECT `collection_images`.* FROM `collection_images` WHERE (collection_id = 3) LIMIT 1[0m
  [1m[35mCollectionImage Load (0.3ms)[0m  SELECT `collection_images`.* FROM `collection_images` WHERE (collection_id = 2) LIMIT 1
  [1m[36m (0.2ms)[0m  [1mSELECT COUNT(*) FROM `collections` [0m
  Rendered collections/index.erb within layouts/admin (13.9ms)
  [1m[35mUser Load (0.3ms)[0m  SELECT `users`.* FROM `users` WHERE `users`.`id` = 1 LIMIT 1
Completed 200 OK in 34ms (Views: 31.3ms | ActiveRecord: 1.4ms)


Started GET "/admin/restaurants" for 127.0.0.1 at 2016-01-18 10:39:10 +0100
Processing by RestaurantsController#index as HTML
  [1m[36mUser Load (0.3ms)[0m  [1mSELECT `users`.* FROM `users` WHERE `users`.`id` = 1 LIMIT 1[0m
  Rendered shared/_restaurant_manage_tabs.html.erb (0.8ms)
  Rendered restaurants/_condition_fields.html.erb (12.0ms)
  [1m[35mRestaurant Load (0.8ms)[0m  SELECT `restaurants`.* FROM `restaurants` ORDER BY disabled ASC,created_at DESC LIMIT 12 OFFSET 0
  [1m[36mPhoto Load (0.4ms)[0m  [1mSELECT `photos`.* FROM `photos` WHERE (restaurant_id = 876 and cover = true and status = 1) LIMIT 1[0m
  [1m[35mPhoto Load (0.3ms)[0m  SELECT `photos`.* FROM `photos` WHERE `photos`.`restaurant_id` = 876 AND `photos`.`status` = 1 ORDER BY restaurant_id ASC, created_at DESC LIMIT 1
  [1m[36mPhoto Load (0.3ms)[0m  [1mSELECT `photos`.* FROM `photos` WHERE (restaurant_id = 851 and cover = true and status = 1) LIMIT 1[0m
  [1m[35mPhoto Load (0.3ms)[0m  SELECT `photos`.* FROM `photos` WHERE `photos`.`restaurant_id` = 851 AND `photos`.`status` = 1 ORDER BY restaurant_id ASC, created_at DESC LIMIT 1
  [1m[36mPhoto Load (0.4ms)[0m  [1mSELECT `photos`.* FROM `photos` WHERE (restaurant_id = 693 and cover = true and status = 1) LIMIT 1[0m
  [1m[35mPhoto Load (0.3ms)[0m  SELECT `photos`.* FROM `photos` WHERE `photos`.`restaurant_id` = 693 AND `photos`.`status` = 1 ORDER BY restaurant_id ASC, created_at DESC LIMIT 1
  [1m[36mPhoto Load (0.3ms)[0m  [1mSELECT `photos`.* FROM `photos` WHERE (restaurant_id = 686 and cover = true and status = 1) LIMIT 1[0m
  [1m[35mPhoto Load (0.3ms)[0m  SELECT `photos`.* FROM `photos` WHERE `photos`.`restaurant_id` = 686 AND `photos`.`status` = 1 ORDER BY restaurant_id ASC, created_at DESC LIMIT 1
  [1m[36mPhoto Load (0.3ms)[0m  [1mSELECT `photos`.* FROM `photos` WHERE (restaurant_id = 669 and cover = true and status = 1) LIMIT 1[0m
  [1m[35mPhoto Load (0.3ms)[0m  SELECT `photos`.* FROM `photos` WHERE `photos`.`restaurant_id` = 669 AND `photos`.`status` = 1 ORDER BY restaurant_id ASC, created_at DESC LIMIT 1
  [1m[36mPhoto Load (0.4ms)[0m  [1mSELECT `photos`.* FROM `photos` WHERE (restaurant_id = 251 and cover = true and status = 1) LIMIT 1[0m
  [1m[35mPhoto Load (0.3ms)[0m  SELECT `photos`.* FROM `photos` WHERE `photos`.`restaurant_id` = 251 AND `photos`.`status` = 1 ORDER BY restaurant_id ASC, created_at DESC LIMIT 1
  [1m[36mPhoto Load (0.3ms)[0m  [1mSELECT `photos`.* FROM `photos` WHERE (restaurant_id = 250 and cover = true and status = 1) LIMIT 1[0m
  [1m[35mPhoto Load (0.3ms)[0m  SELECT `photos`.* FROM `photos` WHERE `photos`.`restaurant_id` = 250 AND `photos`.`status` = 1 ORDER BY restaurant_id ASC, created_at DESC LIMIT 1
  [1m[36mPhoto Load (0.3ms)[0m  [1mSELECT `photos`.* FROM `photos` WHERE (restaurant_id = 237 and cover = true and status = 1) LIMIT 1[0m
  [1m[35mPhoto Load (0.3ms)[0m  SELECT `photos`.* FROM `photos` WHERE `photos`.`restaurant_id` = 237 AND `photos`.`status` = 1 ORDER BY restaurant_id ASC, created_at DESC LIMIT 1
  [1m[36mPhoto Load (0.3ms)[0m  [1mSELECT `photos`.* FROM `photos` WHERE (restaurant_id = 231 and cover = true and status = 1) LIMIT 1[0m
  [1m[35mPhoto Load (0.3ms)[0m  SELECT `photos`.* FROM `photos` WHERE `photos`.`restaurant_id` = 231 AND `photos`.`status` = 1 ORDER BY restaurant_id ASC, created_at DESC LIMIT 1
  [1m[36mPhoto Load (0.3ms)[0m  [1mSELECT `photos`.* FROM `photos` WHERE (restaurant_id = 222 and cover = true and status = 1) LIMIT 1[0m
  [1m[35mPhoto Load (0.3ms)[0m  SELECT `photos`.* FROM `photos` WHERE `photos`.`restaurant_id` = 222 AND `photos`.`status` = 1 ORDER BY restaurant_id ASC, created_at DESC LIMIT 1
  [1m[36mPhoto Load (0.3ms)[0m  [1mSELECT `photos`.* FROM `photos` WHERE (restaurant_id = 221 and cover = true and status = 1) LIMIT 1[0m
  [1m[35mPhoto Load (0.3ms)[0m  SELECT `photos`.* FROM `photos` WHERE `photos`.`restaurant_id` = 221 AND `photos`.`status` = 1 ORDER BY restaurant_id ASC, created_at DESC LIMIT 1
  [1m[36mPhoto Load (0.3ms)[0m  [1mSELECT `photos`.* FROM `photos` WHERE (restaurant_id = 216 and cover = true and status = 1) LIMIT 1[0m
  [1m[35mPhoto Load (0.4ms)[0m  SELECT `photos`.* FROM `photos` WHERE `photos`.`restaurant_id` = 216 AND `photos`.`status` = 1 ORDER BY restaurant_id ASC, created_at DESC LIMIT 1
  [1m[36m (0.4ms)[0m  [1mSELECT COUNT(*) FROM `restaurants` [0m
  Rendered restaurants/index.html.erb within layouts/admin (124.9ms)
Completed 200 OK in 144ms (Views: 132.2ms | ActiveRecord: 9.0ms)


Started GET "/admin/collections" for 127.0.0.1 at 2016-01-18 10:39:11 +0100
Processing by CollectionsController#index as HTML
  Rendered shared/_restaurant_manage_tabs.html.erb (1.0ms)
  [1m[35mCollection Load (0.3ms)[0m  SELECT `collections`.* FROM `collections` ORDER BY name ASC, created_at DESC LIMIT 12 OFFSET 0
  [1m[36mCollectionImage Load (0.2ms)[0m  [1mSELECT `collection_images`.* FROM `collection_images` WHERE (collection_id = 3) LIMIT 1[0m
  [1m[35mCollectionImage Load (0.2ms)[0m  SELECT `collection_images`.* FROM `collection_images` WHERE (collection_id = 2) LIMIT 1
  [1m[36m (0.2ms)[0m  [1mSELECT COUNT(*) FROM `collections` [0m
  Rendered collections/index.erb within layouts/admin (15.4ms)
  [1m[35mUser Load (0.3ms)[0m  SELECT `users`.* FROM `users` WHERE `users`.`id` = 1 LIMIT 1
Completed 200 OK in 24ms (Views: 22.4ms | ActiveRecord: 1.2ms)


Started GET "/restaurants" for 127.0.0.1 at 2016-01-18 10:39:13 +0100
Processing by RestaurantsController#index as HTML
  [1m[36mUser Load (0.3ms)[0m  [1mSELECT `users`.* FROM `users` WHERE `users`.`id` = 1 LIMIT 1[0m
  Rendered shared/_restaurant_manage_tabs.html.erb (1.2ms)
  Rendered restaurants/_condition_fields.html.erb (13.4ms)
  [1m[35mRestaurant Load (0.8ms)[0m  SELECT `restaurants`.* FROM `restaurants` ORDER BY disabled ASC,created_at DESC LIMIT 12 OFFSET 0
  [1m[36mPhoto Load (0.3ms)[0m  [1mSELECT `photos`.* FROM `photos` WHERE (restaurant_id = 876 and cover = true and status = 1) LIMIT 1[0m
  [1m[35mPhoto Load (0.3ms)[0m  SELECT `photos`.* FROM `photos` WHERE `photos`.`restaurant_id` = 876 AND `photos`.`status` = 1 ORDER BY restaurant_id ASC, created_at DESC LIMIT 1
  [1m[36mPhoto Load (0.3ms)[0m  [1mSELECT `photos`.* FROM `photos` WHERE (restaurant_id = 851 and cover = true and status = 1) LIMIT 1[0m
  [1m[35mPhoto Load (0.3ms)[0m  SELECT `photos`.* FROM `photos` WHERE `photos`.`restaurant_id` = 851 AND `photos`.`status` = 1 ORDER BY restaurant_id ASC, created_at DESC LIMIT 1
  [1m[36mPhoto Load (0.4ms)[0m  [1mSELECT `photos`.* FROM `photos` WHERE (restaurant_id = 693 and cover = true and status = 1) LIMIT 1[0m
  [1m[35mPhoto Load (0.3ms)[0m  SELECT `photos`.* FROM `photos` WHERE `photos`.`restaurant_id` = 693 AND `photos`.`status` = 1 ORDER BY restaurant_id ASC, created_at DESC LIMIT 1
  [1m[36mPhoto Load (0.5ms)[0m  [1mSELECT `photos`.* FROM `photos` WHERE (restaurant_id = 686 and cover = true and status = 1) LIMIT 1[0m
  [1m[35mPhoto Load (0.4ms)[0m  SELECT `photos`.* FROM `photos` WHERE `photos`.`restaurant_id` = 686 AND `photos`.`status` = 1 ORDER BY restaurant_id ASC, created_at DESC LIMIT 1
  [1m[36mPhoto Load (0.4ms)[0m  [1mSELECT `photos`.* FROM `photos` WHERE (restaurant_id = 669 and cover = true and status = 1) LIMIT 1[0m
  [1m[35mPhoto Load (0.3ms)[0m  SELECT `photos`.* FROM `photos` WHERE `photos`.`restaurant_id` = 669 AND `photos`.`status` = 1 ORDER BY restaurant_id ASC, created_at DESC LIMIT 1
  [1m[36mPhoto Load (0.5ms)[0m  [1mSELECT `photos`.* FROM `photos` WHERE (restaurant_id = 251 and cover = true and status = 1) LIMIT 1[0m
  [1m[35mPhoto Load (0.3ms)[0m  SELECT `photos`.* FROM `photos` WHERE `photos`.`restaurant_id` = 251 AND `photos`.`status` = 1 ORDER BY restaurant_id ASC, created_at DESC LIMIT 1
  [1m[36mPhoto Load (0.4ms)[0m  [1mSELECT `photos`.* FROM `photos` WHERE (restaurant_id = 250 and cover = true and status = 1) LIMIT 1[0m
  [1m[35mPhoto Load (0.3ms)[0m  SELECT `photos`.* FROM `photos` WHERE `photos`.`restaurant_id` = 250 AND `photos`.`status` = 1 ORDER BY restaurant_id ASC, created_at DESC LIMIT 1
  [1m[36mPhoto Load (0.4ms)[0m  [1mSELECT `photos`.* FROM `photos` WHERE (restaurant_id = 237 and cover = true and status = 1) LIMIT 1[0m
  [1m[35mPhoto Load (0.4ms)[0m  SELECT `photos`.* FROM `photos` WHERE `photos`.`restaurant_id` = 237 AND `photos`.`status` = 1 ORDER BY restaurant_id ASC, created_at DESC LIMIT 1
  [1m[36mPhoto Load (0.4ms)[0m  [1mSELECT `photos`.* FROM `photos` WHERE (restaurant_id = 231 and cover = true and status = 1) LIMIT 1[0m
  [1m[35mPhoto Load (0.3ms)[0m  SELECT `photos`.* FROM `photos` WHERE `photos`.`restaurant_id` = 231 AND `photos`.`status` = 1 ORDER BY restaurant_id ASC, created_at DESC LIMIT 1
  [1m[36mPhoto Load (0.3ms)[0m  [1mSELECT `photos`.* FROM `photos` WHERE (restaurant_id = 222 and cover = true and status = 1) LIMIT 1[0m
  [1m[35mPhoto Load (0.3ms)[0m  SELECT `photos`.* FROM `photos` WHERE `photos`.`restaurant_id` = 222 AND `photos`.`status` = 1 ORDER BY restaurant_id ASC, created_at DESC LIMIT 1
  [1m[36mPhoto Load (0.3ms)[0m  [1mSELECT `photos`.* FROM `photos` WHERE (restaurant_id = 221 and cover = true and status = 1) LIMIT 1[0m
  [1m[35mPhoto Load (0.3ms)[0m  SELECT `photos`.* FROM `photos` WHERE `photos`.`restaurant_id` = 221 AND `photos`.`status` = 1 ORDER BY restaurant_id ASC, created_at DESC LIMIT 1
  [1m[36mPhoto Load (0.3ms)[0m  [1mSELECT `photos`.* FROM `photos` WHERE (restaurant_id = 216 and cover = true and status = 1) LIMIT 1[0m
  [1m[35mPhoto Load (0.3ms)[0m  SELECT `photos`.* FROM `photos` WHERE `photos`.`restaurant_id` = 216 AND `photos`.`status` = 1 ORDER BY restaurant_id ASC, created_at DESC LIMIT 1
  [1m[36m (0.5ms)[0m  [1mSELECT COUNT(*) FROM `restaurants` [0m
  Rendered restaurants/index.html.erb within layouts/admin (106.7ms)
Completed 200 OK in 119ms (Views: 105.9ms | ActiveRecord: 10.1ms)


Started GET "/oriental-kitchen/edit" for 127.0.0.1 at 2016-01-18 10:39:15 +0100
Processing by RestaurantsController#edit as HTML
  Parameters: {"id"=>"oriental-kitchen"}
  [1m[35mUser Load (0.3ms)[0m  SELECT `users`.* FROM `users` WHERE `users`.`id` = 1 LIMIT 1
  [1m[36mRestaurant Load (1.3ms)[0m  [1mSELECT `restaurants`.* FROM `restaurants` WHERE `restaurants`.`slug` = 'oriental-kitchen' LIMIT 1[0m
  [1m[35mSchedule Load (0.3ms)[0m  SELECT `schedules`.* FROM `schedules` WHERE `schedules`.`restaurant_id` = 876 ORDER BY day_of_week ASC
  [1m[36mPhoto Load (0.8ms)[0m  [1mSELECT `photos`.* FROM `photos` WHERE `photos`.`restaurant_id` = 876[0m
  [1m[35mFilter Load (1.2ms)[0m  SELECT `filters`.* FROM `filters` INNER JOIN `filters_restaurants` ON `filters`.`id` = `filters_restaurants`.`filter_id` WHERE `filters_restaurants`.`restaurant_id` = 876 AND `filters`.`code` = 'cuisine'
  [1m[36m (1.2ms)[0m  [1mSELECT `filters`.id FROM `filters` INNER JOIN `filters_restaurants` ON `filters`.`id` = `filters_restaurants`.`filter_id` WHERE `filters_restaurants`.`restaurant_id` = 876[0m
  [1m[35mFilterType Load (0.2ms)[0m  SELECT `filter_types`.* FROM `filter_types` WHERE `filter_types`.`code` = 'hal_status' LIMIT 1
  [1m[36mFilterType Load (0.2ms)[0m  [1mSELECT `filter_types`.* FROM `filter_types` WHERE `filter_types`.`code` = 'price' LIMIT 1[0m
  [1m[35mFilterType Load (0.1ms)[0m  SELECT `filter_types`.* FROM `filter_types` WHERE `filter_types`.`code` = 'cuisine' LIMIT 1
  [1m[36mFilterType Load (0.2ms)[0m  [1mSELECT `filter_types`.* FROM `filter_types` WHERE `filter_types`.`code` = 'alcohol' LIMIT 1[0m
  [1m[35mFilterType Load (0.2ms)[0m  SELECT `filter_types`.* FROM `filter_types` WHERE `filter_types`.`code` = 'features' LIMIT 1
  Rendered restaurants/_googlemap.html.erb (0.1ms)
  [1m[36mFilter Load (0.3ms)[0m  [1mSELECT `filters`.* FROM `filters` WHERE `filters`.`filter_type_id` = 8[0m
  [1m[35mFilter Load (0.2ms)[0m  SELECT `filters`.* FROM `filters` WHERE `filters`.`filter_type_id` = 1 ORDER BY name ASC
  [1m[36mFilter Load (0.2ms)[0m  [1mSELECT `filters`.* FROM `filters` WHERE `filters`.`filter_type_id` = 4[0m
  [1m[35mFilter Load (0.2ms)[0m  SELECT `filters`.* FROM `filters` WHERE `filters`.`filter_type_id` = 6
  [1m[36mFilter Load (0.2ms)[0m  [1mSELECT `filters`.* FROM `filters` WHERE `filters`.`filter_type_id` = 11 AND (code != 'offer')[0m
  Rendered restaurants/_admin_form.html.erb (91.5ms)
  [1m[35mMenu Load (0.3ms)[0m  SELECT `menus`.* FROM `menus` WHERE `menus`.`restaurant_id` = 876
  Rendered restaurants/_upload_menu.html.erb (7.9ms)
  Rendered restaurants/_upload_photos.html.erb (5.4ms)
  Rendered restaurants/edit.html.erb within layouts/admin (110.0ms)
Completed 200 OK in 253ms (Views: 136.5ms | ActiveRecord: 13.6ms)


Started GET "/photos?r_id=876" for 127.0.0.1 at 2016-01-18 10:39:18 +0100
Processing by PhotosController#index as JSON
  Parameters: {"r_id"=>"876"}
  [1m[36mRestaurant Load (1.5ms)[0m  [1mSELECT `restaurants`.* FROM `restaurants` WHERE `restaurants`.`slug` = '876' LIMIT 1[0m
  [1m[35mRestaurant Load (0.5ms)[0m  SELECT `restaurants`.* FROM `restaurants` WHERE `restaurants`.`id` = 876 LIMIT 1
  [1m[36mPhoto Load (0.5ms)[0m  [1mSELECT `photos`.* FROM `photos` WHERE `photos`.`restaurant_id` = 876[0m
Completed 200 OK in 8ms (Views: 0.1ms | ActiveRecord: 2.4ms)


Started POST "/photos" for 127.0.0.1 at 2016-01-18 10:39:25 +0100
Processing by PhotosController#create as JSON
  Parameters: {"utf8"=>"âœ“", "authenticity_token"=>"cajmPApKUoLTDgL4nYG/B3GUhj8fezKDJZWxee28cyM=", "photo"=>{"restaurant_id"=>"876", "user_id"=>"1", "image"=>[#<ActionDispatch::Http::UploadedFile:0x007fc243e856e0 @original_filename="sunday_roast.png", @content_type="image/png", @headers="Content-Disposition: form-data; name=\"photo[image][]\"; filename=\"sunday_roast.png\"\r\nContent-Type: image/png\r\n", @tempfile=#<Tempfile:/var/folders/rf/q4l8n5k56pnbjgkdtzrhq_w00000gn/T/RackMultipart20160118-19170-12kuy2z>>]}}
  [1m[35mRestaurant Load (2.3ms)[0m  SELECT `restaurants`.* FROM `restaurants` WHERE `restaurants`.`slug` = '876' LIMIT 1
  [1m[36mRestaurant Load (0.2ms)[0m  [1mSELECT `restaurants`.* FROM `restaurants` WHERE `restaurants`.`id` = 876 LIMIT 1[0m
  [1m[35m (0.1ms)[0m  BEGIN
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO `photos` (`cover`, `created_at`, `image_name`, `image_uid`, `restaurant_id`, `restaurant_temp_id`, `status`, `text_content`, `text_hyperlink`, `text_title`, `updated_at`, `user_id`) VALUES (0, '2016-01-18 09:39:25', 'sunday_roast.png', '2016/01/18/10_39_25_644_sunday_roast.png', 876, NULL, 0, NULL, NULL, NULL, '2016-01-18 09:39:25', 1)[0m
  [1m[35mRestaurant Load (0.3ms)[0m  SELECT `restaurants`.* FROM `restaurants` WHERE `restaurants`.`id` = 876 LIMIT 1
  [1m[36mFilter Load (1.4ms)[0m  [1mSELECT `filters`.* FROM `filters` INNER JOIN `filters_restaurants` ON `filters`.`id` = `filters_restaurants`.`filter_id` WHERE `filters_restaurants`.`restaurant_id` = 876[0m
  [1m[35mFilterType Load (3.5ms)[0m  SELECT `filter_types`.* FROM `filter_types` INNER JOIN `filter_types_restaurants` ON `filter_types`.`id` = `filter_types_restaurants`.`filter_type_id` WHERE `filter_types_restaurants`.`restaurant_id` = 876
  [1m[36m (3.7ms)[0m  [1mUPDATE `restaurants` SET `request_approve_photo` = 1, `updated_at` = '2016-01-18 09:39:25' WHERE `restaurants`.`id` = 876[0m
  [1m[35m (2.3ms)[0m  COMMIT
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35mFilter Load (1.3ms)[0m  SELECT `filters`.* FROM `filters` INNER JOIN `filters_restaurants` ON `filters`.`id` = `filters_restaurants`.`filter_id` WHERE `filters_restaurants`.`restaurant_id` = 876
  [1m[36mFilterType Load (2.4ms)[0m  [1mSELECT `filter_types`.* FROM `filter_types` INNER JOIN `filter_types_restaurants` ON `filter_types`.`id` = `filter_types_restaurants`.`filter_type_id` WHERE `filter_types_restaurants`.`restaurant_id` = 876[0m
  [1m[35m (0.8ms)[0m  UPDATE `restaurants` SET `updated_at` = '2016-01-18 09:39:25' WHERE `restaurants`.`id` = 876
  [1m[36m (3.4ms)[0m  [1mCOMMIT[0m
  [1m[35mUser Load (0.9ms)[0m  SELECT `users`.* FROM `users` WHERE `users`.`id` = 1 LIMIT 1
  [1m[36m (0.8ms)[0m  [1mBEGIN[0m
  [1m[35m (0.4ms)[0m  UPDATE `photos` SET `status` = 1, `updated_at` = '2016-01-18 09:39:25' WHERE `photos`.`id` = 535
  [1m[36m (1.3ms)[0m  [1mUPDATE `restaurants` SET `request_approve_photo` = 0, `updated_at` = '2016-01-18 09:39:25' WHERE `restaurants`.`id` = 876[0m
  [1m[35m (0.8ms)[0m  COMMIT
Completed 200 OK in 112ms (Views: 0.3ms | ActiveRecord: 31.0ms)


Started POST "/photos/535/to_cover" for 127.0.0.1 at 2016-01-18 10:39:32 +0100
Processing by PhotosController#to_cover as JS
  Parameters: {"id"=>"535"}
  [1m[36mPhoto Load (0.3ms)[0m  [1mSELECT `photos`.* FROM `photos` WHERE `photos`.`id` = 535 LIMIT 1[0m
  [1m[35mSQL (0.3ms)[0m  UPDATE `photos` SET cover = false WHERE (restaurant_id = 876 and cover = true)
  [1m[36m (0.2ms)[0m  [1mBEGIN[0m
  [1m[35m (0.5ms)[0m  UPDATE `photos` SET `cover` = 1, `updated_at` = '2016-01-18 09:39:32' WHERE `photos`.`id` = 535
  [1m[36mRestaurant Load (0.9ms)[0m  [1mSELECT `restaurants`.* FROM `restaurants` WHERE `restaurants`.`id` = 876 LIMIT 1[0m
  [1m[35mFilter Load (1.2ms)[0m  SELECT `filters`.* FROM `filters` INNER JOIN `filters_restaurants` ON `filters`.`id` = `filters_restaurants`.`filter_id` WHERE `filters_restaurants`.`restaurant_id` = 876
  [1m[36mFilterType Load (2.1ms)[0m  [1mSELECT `filter_types`.* FROM `filter_types` INNER JOIN `filter_types_restaurants` ON `filter_types`.`id` = `filter_types_restaurants`.`filter_type_id` WHERE `filter_types_restaurants`.`restaurant_id` = 876[0m
  [1m[35m (0.8ms)[0m  COMMIT
  Rendered photos/to_cover.js.erb (1.3ms)
Completed 200 OK in 89ms (Views: 66.8ms | ActiveRecord: 6.2ms)


Started POST "/photos/535/to_cover" for 127.0.0.1 at 2016-01-18 10:39:33 +0100
Processing by PhotosController#to_cover as JS
  Parameters: {"id"=>"535"}
  [1m[36mPhoto Load (0.4ms)[0m  [1mSELECT `photos`.* FROM `photos` WHERE `photos`.`id` = 535 LIMIT 1[0m
  [1m[35mSQL (1.0ms)[0m  UPDATE `photos` SET cover = false WHERE (restaurant_id = 876 and cover = true)
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35mRestaurant Load (0.4ms)[0m  SELECT `restaurants`.* FROM `restaurants` WHERE `restaurants`.`id` = 876 LIMIT 1
  [1m[36mFilter Load (1.3ms)[0m  [1mSELECT `filters`.* FROM `filters` INNER JOIN `filters_restaurants` ON `filters`.`id` = `filters_restaurants`.`filter_id` WHERE `filters_restaurants`.`restaurant_id` = 876[0m
  [1m[35mFilterType Load (2.9ms)[0m  SELECT `filter_types`.* FROM `filter_types` INNER JOIN `filter_types_restaurants` ON `filter_types`.`id` = `filter_types_restaurants`.`filter_type_id` WHERE `filter_types_restaurants`.`restaurant_id` = 876
  [1m[36m (0.2ms)[0m  [1mCOMMIT[0m
  Rendered photos/to_cover.js.erb (0.1ms)
Completed 200 OK in 47ms (Views: 25.4ms | ActiveRecord: 6.2ms)


Started POST "/photos/535/to_cover" for 127.0.0.1 at 2016-01-18 10:39:35 +0100
Processing by PhotosController#to_cover as JS
  Parameters: {"id"=>"535"}
  [1m[35mPhoto Load (0.3ms)[0m  SELECT `photos`.* FROM `photos` WHERE `photos`.`id` = 535 LIMIT 1
  [1m[36mSQL (0.4ms)[0m  [1mUPDATE `photos` SET cover = false WHERE (restaurant_id = 876 and cover = true)[0m
  [1m[35m (0.1ms)[0m  BEGIN
  [1m[36m (0.2ms)[0m  [1mUPDATE `photos` SET `cover` = 1, `updated_at` = '2016-01-18 09:39:35' WHERE `photos`.`id` = 535[0m
  [1m[35mRestaurant Load (0.4ms)[0m  SELECT `restaurants`.* FROM `restaurants` WHERE `restaurants`.`id` = 876 LIMIT 1
  [1m[36mFilter Load (1.0ms)[0m  [1mSELECT `filters`.* FROM `filters` INNER JOIN `filters_restaurants` ON `filters`.`id` = `filters_restaurants`.`filter_id` WHERE `filters_restaurants`.`restaurant_id` = 876[0m
  [1m[35mFilterType Load (2.0ms)[0m  SELECT `filter_types`.* FROM `filter_types` INNER JOIN `filter_types_restaurants` ON `filter_types`.`id` = `filter_types_restaurants`.`filter_type_id` WHERE `filter_types_restaurants`.`restaurant_id` = 876
  [1m[36m (0.6ms)[0m  [1mCOMMIT[0m
  Rendered photos/to_cover.js.erb (0.1ms)
Completed 200 OK in 40ms (Views: 23.5ms | ActiveRecord: 4.9ms)


Started DELETE "/photos/535" for 127.0.0.1 at 2016-01-18 10:40:36 +0100
Processing by PhotosController#destroy as JSON
  Parameters: {"id"=>"535"}
  [1m[35mPhoto Load (0.2ms)[0m  SELECT `photos`.* FROM `photos` WHERE `photos`.`id` = 535 LIMIT 1
  [1m[36m (0.2ms)[0m  [1mBEGIN[0m
  [1m[35mSQL (0.4ms)[0m  DELETE FROM `photos` WHERE `photos`.`id` = 535
  [1m[36m (0.5ms)[0m  [1mCOMMIT[0m
Completed 200 OK in 15ms (Views: 0.1ms | ActiveRecord: 1.2ms)


Started POST "/admin/collections/add_restaurant" for 127.0.0.1 at 2016-01-18 11:18:51 +0100
Processing by CollectionsController#add_restaurant as HTML
  Parameters: {"utf8"=>"âœ“", "authenticity_token"=>"cajmPApKUoLTDgL4nYG/B3GUhj8fezKDJZWxee28cyM=", "collection_restaurant"=>{"restaurant_id"=>"9"}, "commit"=>"Add"}
  [1m[35mUser Load (1.3ms)[0m  SELECT `users`.* FROM `users` WHERE `users`.`id` = 1 LIMIT 1
  [1m[36m (0.2ms)[0m  [1mBEGIN[0m
  [1m[35m (0.1ms)[0m  COMMIT
Completed 401 Unauthorized in 16ms


Started GET "/admin/collections/add_restaurant" for 127.0.0.1 at 2016-01-18 11:18:51 +0100

AbstractController::ActionNotFound (The action 'show' could not be found for CollectionsController):
  actionpack (3.2.8) lib/abstract_controller/base.rb:116:in `process'
  actionpack (3.2.8) lib/abstract_controller/rendering.rb:45:in `process'
  actionpack (3.2.8) lib/action_controller/metal.rb:203:in `dispatch'
  actionpack (3.2.8) lib/action_controller/metal/rack_delegation.rb:14:in `dispatch'
  actionpack (3.2.8) lib/action_controller/metal.rb:246:in `block in action'
  actionpack (3.2.8) lib/action_dispatch/routing/route_set.rb:73:in `call'
  actionpack (3.2.8) lib/action_dispatch/routing/route_set.rb:73:in `dispatch'
  actionpack (3.2.8) lib/action_dispatch/routing/route_set.rb:36:in `call'
  journey (1.0.4) lib/journey/router.rb:68:in `block in call'
  journey (1.0.4) lib/journey/router.rb:56:in `each'
  journey (1.0.4) lib/journey/router.rb:56:in `call'
  actionpack (3.2.8) lib/action_dispatch/routing/route_set.rb:600:in `call'
  omniauth (1.1.4) lib/omniauth/strategy.rb:184:in `call!'
  omniauth (1.1.4) lib/omniauth/strategy.rb:164:in `call'
  newrelic_rpm (3.7.3.204) lib/new_relic/rack/error_collector.rb:55:in `call'
  newrelic_rpm (3.7.3.204) lib/new_relic/rack/agent_hooks.rb:32:in `call'
  newrelic_rpm (3.7.3.204) lib/new_relic/rack/browser_monitoring.rb:27:in `call'
  newrelic_rpm (3.7.3.204) lib/new_relic/rack/developer_mode.rb:45:in `call'
  galetahub-simple_captcha (0.1.5) lib/simple_captcha/middleware.rb:20:in `call'
  /Users/kevinmuller/.rvm/gems/ruby-2.2.4/bundler/gems/client_side_validations-a6a515504520/lib/client_side_validations/middleware.rb:21:in `call'
  warden (1.1.1) lib/warden/manager.rb:35:in `block in call'
  warden (1.1.1) lib/warden/manager.rb:34:in `catch'
  warden (1.1.1) lib/warden/manager.rb:34:in `call'
  actionpack (3.2.8) lib/action_dispatch/middleware/best_standards_support.rb:17:in `call'
  rack (1.4.5) lib/rack/etag.rb:23:in `call'
  rack (1.4.5) lib/rack/conditionalget.rb:25:in `call'
  actionpack (3.2.8) lib/action_dispatch/middleware/head.rb:14:in `call'
  /Users/kevinmuller/.rvm/gems/ruby-2.2.4/bundler/gems/remotipart-aadc29e996c3/lib/remotipart/middleware.rb:27:in `call'
  actionpack (3.2.8) lib/action_dispatch/middleware/params_parser.rb:21:in `call'
  actionpack (3.2.8) lib/action_dispatch/middleware/flash.rb:242:in `call'
  rack (1.4.5) lib/rack/session/abstract/id.rb:210:in `context'
  rack (1.4.5) lib/rack/session/abstract/id.rb:205:in `call'
  actionpack (3.2.8) lib/action_dispatch/middleware/cookies.rb:339:in `call'
  dragonfly (0.9.15) lib/dragonfly/cookie_monster.rb:9:in `call'
  activerecord (3.2.8) lib/active_record/query_cache.rb:64:in `call'
  activerecord (3.2.8) lib/active_record/connection_adapters/abstract/connection_pool.rb:473:in `call'
  actionpack (3.2.8) lib/action_dispatch/middleware/callbacks.rb:28:in `block in call'
  activesupport (3.2.8) lib/active_support/callbacks.rb:405:in `_run__1871245027803988066__call__4207201468600934469__callbacks'
  activesupport (3.2.8) lib/active_support/callbacks.rb:405:in `__run_callback'
  activesupport (3.2.8) lib/active_support/callbacks.rb:385:in `_run_call_callbacks'
  activesupport (3.2.8) lib/active_support/callbacks.rb:81:in `run_callbacks'
  actionpack (3.2.8) lib/action_dispatch/middleware/callbacks.rb:27:in `call'
  actionpack (3.2.8) lib/action_dispatch/middleware/reloader.rb:65:in `call'
  actionpack (3.2.8) lib/action_dispatch/middleware/remote_ip.rb:31:in `call'
  actionpack (3.2.8) lib/action_dispatch/middleware/debug_exceptions.rb:16:in `call'
  actionpack (3.2.8) lib/action_dispatch/middleware/show_exceptions.rb:56:in `call'
  railties (3.2.8) lib/rails/rack/logger.rb:26:in `call_app'
  railties (3.2.8) lib/rails/rack/logger.rb:16:in `call'
  quiet_assets (1.0.3) lib/quiet_assets.rb:23:in `call_with_quiet_assets'
  actionpack (3.2.8) lib/action_dispatch/middleware/request_id.rb:22:in `call'
  rack (1.4.5) lib/rack/methodoverride.rb:21:in `call'
  rack (1.4.5) lib/rack/runtime.rb:17:in `call'
  activesupport (3.2.8) lib/active_support/cache/strategy/local_cache.rb:72:in `call'
  rack (1.4.5) lib/rack/lock.rb:15:in `call'
  actionpack (3.2.8) lib/action_dispatch/middleware/static.rb:62:in `call'
  dragonfly (0.9.15) lib/dragonfly/middleware.rb:13:in `call'
  rack-cache (1.2) lib/rack/cache/context.rb:136:in `forward'
  rack-cache (1.2) lib/rack/cache/context.rb:245:in `fetch'
  rack-cache (1.2) lib/rack/cache/context.rb:185:in `lookup'
  rack-cache (1.2) lib/rack/cache/context.rb:66:in `call!'
  rack-cache (1.2) lib/rack/cache/context.rb:51:in `call'
  railties (3.2.8) lib/rails/engine.rb:479:in `call'
  railties (3.2.8) lib/rails/application.rb:223:in `call'
  rack (1.4.5) lib/rack/content_length.rb:14:in `call'
  railties (3.2.8) lib/rails/rack/log_tailer.rb:17:in `call'
  rack (1.4.5) lib/rack/handler/webrick.rb:59:in `service'
  /Users/kevinmuller/.rvm/rubies/ruby-2.2.4/lib/ruby/2.2.0/webrick/httpserver.rb:138:in `service'
  /Users/kevinmuller/.rvm/rubies/ruby-2.2.4/lib/ruby/2.2.0/webrick/httpserver.rb:94:in `run'
  /Users/kevinmuller/.rvm/rubies/ruby-2.2.4/lib/ruby/2.2.0/webrick/server.rb:294:in `block in start_thread'


  Rendered /Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_dispatch/middleware/templates/rescues/unknown_action.erb within rescues/layout (1.1ms)


Started GET "/collection/3/edit" for 127.0.0.1 at 2016-01-18 11:18:54 +0100
Processing by CollectionsController#edit_collection as HTML
  Parameters: {"id"=>"3"}
Completed 401 Unauthorized in 1ms


Started GET "/users/sign_in" for 127.0.0.1 at 2016-01-18 11:18:55 +0100
Processing by SessionsController#new as HTML
  Rendered sessions/new.html.slim within layouts/application (2.6ms)
  Rendered layouts/_header.html.erb (2.2ms)
  Rendered layouts/_main_menu.html.slim (0.8ms)
  Rendered layouts/_sub_main_menu.html.slim (0.0ms)
  Rendered layouts/_flash_messages.html.erb (0.2ms)
  [1m[36mBasicsPage Load (0.2ms)[0m  [1mSELECT `basics_pages`.* FROM `basics_pages` WHERE `basics_pages`.`page_name` = 'Footer' LIMIT 1[0m
  Rendered layouts/_footer.html.slim (62.1ms)
Completed 200 OK in 118ms (Views: 75.0ms | ActiveRecord: 41.2ms)


Started POST "/users/sign_in" for 127.0.0.1 at 2016-01-18 11:18:59 +0100
Processing by SessionsController#create as HTML
  Parameters: {"utf8"=>"âœ“", "authenticity_token"=>"cajmPApKUoLTDgL4nYG/B3GUhj8fezKDJZWxee28cyM=", "user"=>{"email"=>"kevin.muller1220@gmail.com", "password"=>"[FILTERED]"}, "button"=>""}
  [1m[35mUser Load (0.4ms)[0m  SELECT `users`.* FROM `users` WHERE `users`.`email` = 'kevin.muller1220@gmail.com' LIMIT 1
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35m (0.1ms)[0m  COMMIT
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35m (0.3ms)[0m  UPDATE `users` SET `last_sign_in_at` = '2016-01-18 08:38:21', `current_sign_in_at` = '2016-01-18 10:18:59', `sign_in_count` = 5, `updated_at` = '2016-01-18 10:18:59' WHERE `users`.`id` = 1
  [1m[36m (0.6ms)[0m  [1mCOMMIT[0m
Redirected to http://localhost:3000/admin
Completed 302 Found in 63ms (ActiveRecord: 1.6ms)


Started GET "/admin" for 127.0.0.1 at 2016-01-18 11:18:59 +0100
Processing by RestaurantsController#index as HTML
  [1m[35mUser Load (0.3ms)[0m  SELECT `users`.* FROM `users` WHERE `users`.`id` = 1 LIMIT 1
  Rendered shared/_restaurant_manage_tabs.html.erb (0.9ms)
  Rendered restaurants/_condition_fields.html.erb (13.6ms)
  [1m[36mRestaurant Load (0.9ms)[0m  [1mSELECT `restaurants`.* FROM `restaurants` ORDER BY disabled ASC,created_at DESC LIMIT 12 OFFSET 0[0m
  [1m[35mPhoto Load (0.3ms)[0m  SELECT `photos`.* FROM `photos` WHERE (restaurant_id = 876 and cover = true and status = 1) LIMIT 1
  [1m[36mPhoto Load (0.4ms)[0m  [1mSELECT `photos`.* FROM `photos` WHERE `photos`.`restaurant_id` = 876 AND `photos`.`status` = 1 ORDER BY restaurant_id ASC, created_at DESC LIMIT 1[0m
  [1m[35mPhoto Load (0.3ms)[0m  SELECT `photos`.* FROM `photos` WHERE (restaurant_id = 851 and cover = true and status = 1) LIMIT 1
  [1m[36mPhoto Load (0.3ms)[0m  [1mSELECT `photos`.* FROM `photos` WHERE `photos`.`restaurant_id` = 851 AND `photos`.`status` = 1 ORDER BY restaurant_id ASC, created_at DESC LIMIT 1[0m
  [1m[35mPhoto Load (0.4ms)[0m  SELECT `photos`.* FROM `photos` WHERE (restaurant_id = 693 and cover = true and status = 1) LIMIT 1
  [1m[36mPhoto Load (0.3ms)[0m  [1mSELECT `photos`.* FROM `photos` WHERE `photos`.`restaurant_id` = 693 AND `photos`.`status` = 1 ORDER BY restaurant_id ASC, created_at DESC LIMIT 1[0m
  [1m[35mPhoto Load (0.3ms)[0m  SELECT `photos`.* FROM `photos` WHERE (restaurant_id = 686 and cover = true and status = 1) LIMIT 1
  [1m[36mPhoto Load (0.3ms)[0m  [1mSELECT `photos`.* FROM `photos` WHERE `photos`.`restaurant_id` = 686 AND `photos`.`status` = 1 ORDER BY restaurant_id ASC, created_at DESC LIMIT 1[0m
  [1m[35mPhoto Load (0.3ms)[0m  SELECT `photos`.* FROM `photos` WHERE (restaurant_id = 669 and cover = true and status = 1) LIMIT 1
  [1m[36mPhoto Load (0.3ms)[0m  [1mSELECT `photos`.* FROM `photos` WHERE `photos`.`restaurant_id` = 669 AND `photos`.`status` = 1 ORDER BY restaurant_id ASC, created_at DESC LIMIT 1[0m
  [1m[35mPhoto Load (0.3ms)[0m  SELECT `photos`.* FROM `photos` WHERE (restaurant_id = 251 and cover = true and status = 1) LIMIT 1
  [1m[36mPhoto Load (0.3ms)[0m  [1mSELECT `photos`.* FROM `photos` WHERE `photos`.`restaurant_id` = 251 AND `photos`.`status` = 1 ORDER BY restaurant_id ASC, created_at DESC LIMIT 1[0m
  [1m[35mPhoto Load (0.3ms)[0m  SELECT `photos`.* FROM `photos` WHERE (restaurant_id = 250 and cover = true and status = 1) LIMIT 1
  [1m[36mPhoto Load (0.3ms)[0m  [1mSELECT `photos`.* FROM `photos` WHERE `photos`.`restaurant_id` = 250 AND `photos`.`status` = 1 ORDER BY restaurant_id ASC, created_at DESC LIMIT 1[0m
  [1m[35mPhoto Load (0.3ms)[0m  SELECT `photos`.* FROM `photos` WHERE (restaurant_id = 237 and cover = true and status = 1) LIMIT 1
  [1m[36mPhoto Load (0.3ms)[0m  [1mSELECT `photos`.* FROM `photos` WHERE `photos`.`restaurant_id` = 237 AND `photos`.`status` = 1 ORDER BY restaurant_id ASC, created_at DESC LIMIT 1[0m
  [1m[35mPhoto Load (0.3ms)[0m  SELECT `photos`.* FROM `photos` WHERE (restaurant_id = 231 and cover = true and status = 1) LIMIT 1
  [1m[36mPhoto Load (0.3ms)[0m  [1mSELECT `photos`.* FROM `photos` WHERE `photos`.`restaurant_id` = 231 AND `photos`.`status` = 1 ORDER BY restaurant_id ASC, created_at DESC LIMIT 1[0m
  [1m[35mPhoto Load (0.3ms)[0m  SELECT `photos`.* FROM `photos` WHERE (restaurant_id = 222 and cover = true and status = 1) LIMIT 1
  [1m[36mPhoto Load (0.3ms)[0m  [1mSELECT `photos`.* FROM `photos` WHERE `photos`.`restaurant_id` = 222 AND `photos`.`status` = 1 ORDER BY restaurant_id ASC, created_at DESC LIMIT 1[0m
  [1m[35mPhoto Load (0.3ms)[0m  SELECT `photos`.* FROM `photos` WHERE (restaurant_id = 221 and cover = true and status = 1) LIMIT 1
  [1m[36mPhoto Load (0.3ms)[0m  [1mSELECT `photos`.* FROM `photos` WHERE `photos`.`restaurant_id` = 221 AND `photos`.`status` = 1 ORDER BY restaurant_id ASC, created_at DESC LIMIT 1[0m
  [1m[35mPhoto Load (0.3ms)[0m  SELECT `photos`.* FROM `photos` WHERE (restaurant_id = 216 and cover = true and status = 1) LIMIT 1
  [1m[36mPhoto Load (0.3ms)[0m  [1mSELECT `photos`.* FROM `photos` WHERE `photos`.`restaurant_id` = 216 AND `photos`.`status` = 1 ORDER BY restaurant_id ASC, created_at DESC LIMIT 1[0m
  [1m[35m (0.4ms)[0m  SELECT COUNT(*) FROM `restaurants` 
  Rendered restaurants/index.html.erb within layouts/admin (114.3ms)
Completed 200 OK in 126ms (Views: 114.3ms | ActiveRecord: 8.8ms)


Started GET "/admin/collections" for 127.0.0.1 at 2016-01-18 11:19:02 +0100
Processing by CollectionsController#index as HTML
  Rendered shared/_restaurant_manage_tabs.html.erb (0.8ms)
  [1m[36mCollection Load (0.3ms)[0m  [1mSELECT `collections`.* FROM `collections` ORDER BY name ASC, created_at DESC LIMIT 12 OFFSET 0[0m
  [1m[35mCollectionImage Load (0.2ms)[0m  SELECT `collection_images`.* FROM `collection_images` WHERE (collection_id = 3) LIMIT 1
  [1m[36mCollectionImage Load (0.2ms)[0m  [1mSELECT `collection_images`.* FROM `collection_images` WHERE (collection_id = 2) LIMIT 1[0m
  [1m[35m (0.2ms)[0m  SELECT COUNT(*) FROM `collections` 
  Rendered collections/index.erb within layouts/admin (14.6ms)
  [1m[36mUser Load (0.4ms)[0m  [1mSELECT `users`.* FROM `users` WHERE `users`.`id` = 1 LIMIT 1[0m
Completed 200 OK in 46ms (Views: 43.7ms | ActiveRecord: 1.3ms)


Started GET "/collection/3/edit" for 127.0.0.1 at 2016-01-18 11:19:05 +0100
Processing by CollectionsController#edit_collection as HTML
  Parameters: {"id"=>"3"}
  [1m[35mUser Load (0.3ms)[0m  SELECT `users`.* FROM `users` WHERE `users`.`id` = 1 LIMIT 1
  [1m[36mCollection Load (0.2ms)[0m  [1mSELECT `collections`.* FROM `collections` WHERE `collections`.`id` = 3 LIMIT 1[0m
  [1m[35mCollectionImage Load (0.4ms)[0m  SELECT `collection_images`.* FROM `collection_images` WHERE (collection_id = 3) LIMIT 1
  Rendered collections/_collection_form.html.erb (12.9ms)
  [1m[36mRestaurant Load (3.2ms)[0m  [1mSELECT `restaurants`.* FROM `restaurants` WHERE `restaurants`.`disabled` = 0[0m
  Rendered collections/_collection_restaurants_form.html.erb (94.9ms)
  Rendered collections/edit_collection.html.erb within layouts/admin (115.7ms)
Completed 200 OK in 141ms (Views: 131.7ms | ActiveRecord: 4.1ms)


Started GET "/collection/3/edit" for 127.0.0.1 at 2016-01-18 11:19:44 +0100
Processing by CollectionsController#edit_collection as HTML
  Parameters: {"id"=>"3"}
  [1m[35mUser Load (0.3ms)[0m  SELECT `users`.* FROM `users` WHERE `users`.`id` = 1 LIMIT 1
  [1m[36mCollection Load (0.2ms)[0m  [1mSELECT `collections`.* FROM `collections` WHERE `collections`.`id` = 3 LIMIT 1[0m
  [1m[35mCollectionImage Load (0.4ms)[0m  SELECT `collection_images`.* FROM `collection_images` WHERE (collection_id = 3) LIMIT 1
  Rendered collections/_collection_form.html.erb (10.5ms)
  [1m[36mRestaurant Load (4.3ms)[0m  [1mSELECT `restaurants`.* FROM `restaurants` WHERE `restaurants`.`disabled` = 0[0m
  Rendered collections/_collection_restaurants_form.html.erb (93.8ms)
  Rendered collections/edit_collection.html.erb within layouts/admin (107.5ms)
Completed 200 OK in 120ms (Views: 109.4ms | ActiveRecord: 5.2ms)


Started GET "/collection/3/edit" for 127.0.0.1 at 2016-01-18 11:21:15 +0100
Processing by CollectionsController#edit_collection as HTML
  Parameters: {"id"=>"3"}
  [1m[35mUser Load (0.5ms)[0m  SELECT `users`.* FROM `users` WHERE `users`.`id` = 1 LIMIT 1
  [1m[36mCollection Load (0.2ms)[0m  [1mSELECT `collections`.* FROM `collections` WHERE `collections`.`id` = 3 LIMIT 1[0m
  [1m[35mCollectionImage Load (0.3ms)[0m  SELECT `collection_images`.* FROM `collection_images` WHERE (collection_id = 3) LIMIT 1
  Rendered collections/_collection_form.html.erb (50.1ms)
  [1m[36mRestaurant Load (4.8ms)[0m  [1mSELECT `restaurants`.* FROM `restaurants` WHERE `restaurants`.`disabled` = 0[0m
  Rendered collections/_collection_restaurants_form.html.erb (95.8ms)
  Rendered collections/edit_collection.html.erb within layouts/admin (148.0ms)
Completed 200 OK in 161ms (Views: 149.4ms | ActiveRecord: 5.8ms)


Started GET "/collection/3/edit" for 127.0.0.1 at 2016-01-18 11:57:06 +0100
Processing by CollectionsController#edit_collection as HTML
  Parameters: {"id"=>"3"}
  [1m[35mUser Load (0.4ms)[0m  SELECT `users`.* FROM `users` WHERE `users`.`id` = 1 LIMIT 1
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35m (0.1ms)[0m  COMMIT
Completed 401 Unauthorized in 7ms


Started GET "/collection/3/edit" for 127.0.0.1 at 2016-01-18 11:57:06 +0100
Processing by CollectionsController#edit_collection as HTML
  Parameters: {"id"=>"3"}
Completed 401 Unauthorized in 1ms


Started GET "/users/sign_in" for 127.0.0.1 at 2016-01-18 11:57:06 +0100
Processing by SessionsController#new as HTML
  Rendered sessions/new.html.slim within layouts/application (3.7ms)
  Rendered layouts/_header.html.erb (2.8ms)
  Rendered layouts/_main_menu.html.slim (0.5ms)
  Rendered layouts/_sub_main_menu.html.slim (0.1ms)
  Rendered layouts/_flash_messages.html.erb (0.1ms)
  [1m[36mBasicsPage Load (0.3ms)[0m  [1mSELECT `basics_pages`.* FROM `basics_pages` WHERE `basics_pages`.`page_name` = 'Footer' LIMIT 1[0m
  Rendered layouts/_footer.html.slim (4.4ms)
Completed 200 OK in 37ms (Views: 35.8ms | ActiveRecord: 0.3ms)


Started POST "/users/sign_in" for 127.0.0.1 at 2016-01-18 11:57:14 +0100
Processing by SessionsController#create as HTML
  Parameters: {"utf8"=>"âœ“", "authenticity_token"=>"cajmPApKUoLTDgL4nYG/B3GUhj8fezKDJZWxee28cyM=", "user"=>{"email"=>"kevin.muller1220@gmail.com", "password"=>"[FILTERED]"}, "button"=>""}
  [1m[35mUser Load (0.3ms)[0m  SELECT `users`.* FROM `users` WHERE `users`.`email` = 'kevin.muller1220@gmail.com' LIMIT 1
  [1m[36m (0.2ms)[0m  [1mBEGIN[0m
  [1m[35m (0.1ms)[0m  COMMIT
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35m (0.3ms)[0m  UPDATE `users` SET `last_sign_in_at` = '2016-01-18 10:18:59', `current_sign_in_at` = '2016-01-18 10:57:14', `sign_in_count` = 6, `updated_at` = '2016-01-18 10:57:14' WHERE `users`.`id` = 1
  [1m[36m (0.5ms)[0m  [1mCOMMIT[0m
Redirected to http://localhost:3000/admin
Completed 302 Found in 64ms (ActiveRecord: 1.4ms)


Started GET "/admin" for 127.0.0.1 at 2016-01-18 11:57:14 +0100
Processing by RestaurantsController#index as HTML
  [1m[35mUser Load (0.4ms)[0m  SELECT `users`.* FROM `users` WHERE `users`.`id` = 1 LIMIT 1
  Rendered shared/_restaurant_manage_tabs.html.erb (0.9ms)
  Rendered restaurants/_condition_fields.html.erb (14.9ms)
  [1m[36mRestaurant Load (0.9ms)[0m  [1mSELECT `restaurants`.* FROM `restaurants` ORDER BY disabled ASC,created_at DESC LIMIT 12 OFFSET 0[0m
  [1m[35mPhoto Load (0.3ms)[0m  SELECT `photos`.* FROM `photos` WHERE (restaurant_id = 876 and cover = true and status = 1) LIMIT 1
  [1m[36mPhoto Load (0.3ms)[0m  [1mSELECT `photos`.* FROM `photos` WHERE `photos`.`restaurant_id` = 876 AND `photos`.`status` = 1 ORDER BY restaurant_id ASC, created_at DESC LIMIT 1[0m
  [1m[35mPhoto Load (2.2ms)[0m  SELECT `photos`.* FROM `photos` WHERE (restaurant_id = 851 and cover = true and status = 1) LIMIT 1
  [1m[36mPhoto Load (0.4ms)[0m  [1mSELECT `photos`.* FROM `photos` WHERE `photos`.`restaurant_id` = 851 AND `photos`.`status` = 1 ORDER BY restaurant_id ASC, created_at DESC LIMIT 1[0m
  [1m[35mPhoto Load (0.3ms)[0m  SELECT `photos`.* FROM `photos` WHERE (restaurant_id = 693 and cover = true and status = 1) LIMIT 1
  [1m[36mPhoto Load (0.3ms)[0m  [1mSELECT `photos`.* FROM `photos` WHERE `photos`.`restaurant_id` = 693 AND `photos`.`status` = 1 ORDER BY restaurant_id ASC, created_at DESC LIMIT 1[0m
  [1m[35mPhoto Load (0.3ms)[0m  SELECT `photos`.* FROM `photos` WHERE (restaurant_id = 686 and cover = true and status = 1) LIMIT 1
  [1m[36mPhoto Load (0.3ms)[0m  [1mSELECT `photos`.* FROM `photos` WHERE `photos`.`restaurant_id` = 686 AND `photos`.`status` = 1 ORDER BY restaurant_id ASC, created_at DESC LIMIT 1[0m
  [1m[35mPhoto Load (0.3ms)[0m  SELECT `photos`.* FROM `photos` WHERE (restaurant_id = 669 and cover = true and status = 1) LIMIT 1
  [1m[36mPhoto Load (0.3ms)[0m  [1mSELECT `photos`.* FROM `photos` WHERE `photos`.`restaurant_id` = 669 AND `photos`.`status` = 1 ORDER BY restaurant_id ASC, created_at DESC LIMIT 1[0m
  [1m[35mPhoto Load (0.4ms)[0m  SELECT `photos`.* FROM `photos` WHERE (restaurant_id = 251 and cover = true and status = 1) LIMIT 1
  [1m[36mPhoto Load (0.3ms)[0m  [1mSELECT `photos`.* FROM `photos` WHERE `photos`.`restaurant_id` = 251 AND `photos`.`status` = 1 ORDER BY restaurant_id ASC, created_at DESC LIMIT 1[0m
  [1m[35mPhoto Load (0.3ms)[0m  SELECT `photos`.* FROM `photos` WHERE (restaurant_id = 250 and cover = true and status = 1) LIMIT 1
  [1m[36mPhoto Load (0.3ms)[0m  [1mSELECT `photos`.* FROM `photos` WHERE `photos`.`restaurant_id` = 250 AND `photos`.`status` = 1 ORDER BY restaurant_id ASC, created_at DESC LIMIT 1[0m
  [1m[35mPhoto Load (0.3ms)[0m  SELECT `photos`.* FROM `photos` WHERE (restaurant_id = 237 and cover = true and status = 1) LIMIT 1
  [1m[36mPhoto Load (0.3ms)[0m  [1mSELECT `photos`.* FROM `photos` WHERE `photos`.`restaurant_id` = 237 AND `photos`.`status` = 1 ORDER BY restaurant_id ASC, created_at DESC LIMIT 1[0m
  [1m[35mPhoto Load (0.3ms)[0m  SELECT `photos`.* FROM `photos` WHERE (restaurant_id = 231 and cover = true and status = 1) LIMIT 1
  [1m[36mPhoto Load (0.3ms)[0m  [1mSELECT `photos`.* FROM `photos` WHERE `photos`.`restaurant_id` = 231 AND `photos`.`status` = 1 ORDER BY restaurant_id ASC, created_at DESC LIMIT 1[0m
  [1m[35mPhoto Load (0.3ms)[0m  SELECT `photos`.* FROM `photos` WHERE (restaurant_id = 222 and cover = true and status = 1) LIMIT 1
  [1m[36mPhoto Load (0.3ms)[0m  [1mSELECT `photos`.* FROM `photos` WHERE `photos`.`restaurant_id` = 222 AND `photos`.`status` = 1 ORDER BY restaurant_id ASC, created_at DESC LIMIT 1[0m
  [1m[35mPhoto Load (0.4ms)[0m  SELECT `photos`.* FROM `photos` WHERE (restaurant_id = 221 and cover = true and status = 1) LIMIT 1
  [1m[36mPhoto Load (0.3ms)[0m  [1mSELECT `photos`.* FROM `photos` WHERE `photos`.`restaurant_id` = 221 AND `photos`.`status` = 1 ORDER BY restaurant_id ASC, created_at DESC LIMIT 1[0m
  [1m[35mPhoto Load (0.3ms)[0m  SELECT `photos`.* FROM `photos` WHERE (restaurant_id = 216 and cover = true and status = 1) LIMIT 1
  [1m[36mPhoto Load (0.3ms)[0m  [1mSELECT `photos`.* FROM `photos` WHERE `photos`.`restaurant_id` = 216 AND `photos`.`status` = 1 ORDER BY restaurant_id ASC, created_at DESC LIMIT 1[0m
  [1m[35m (0.4ms)[0m  SELECT COUNT(*) FROM `restaurants` 
  Rendered restaurants/index.html.erb within layouts/admin (115.4ms)
Completed 200 OK in 125ms (Views: 111.7ms | ActiveRecord: 11.0ms)


Started GET "/admin/collections" for 127.0.0.1 at 2016-01-18 11:57:16 +0100
Processing by CollectionsController#index as HTML
  Rendered shared/_restaurant_manage_tabs.html.erb (0.7ms)
  [1m[36mCollection Load (0.3ms)[0m  [1mSELECT `collections`.* FROM `collections` ORDER BY name ASC, created_at DESC LIMIT 12 OFFSET 0[0m
  [1m[35mCollectionImage Load (0.2ms)[0m  SELECT `collection_images`.* FROM `collection_images` WHERE (collection_id = 3) LIMIT 1
  [1m[36mCollectionImage Load (0.2ms)[0m  [1mSELECT `collection_images`.* FROM `collection_images` WHERE (collection_id = 2) LIMIT 1[0m
  [1m[35m (0.3ms)[0m  SELECT COUNT(*) FROM `collections` 
  Rendered collections/index.erb within layouts/admin (14.2ms)
  [1m[36mUser Load (0.3ms)[0m  [1mSELECT `users`.* FROM `users` WHERE `users`.`id` = 1 LIMIT 1[0m
Completed 200 OK in 23ms (Views: 20.9ms | ActiveRecord: 1.2ms)


Started GET "/collection/3/edit" for 127.0.0.1 at 2016-01-18 11:57:18 +0100
Processing by CollectionsController#edit_collection as HTML
  Parameters: {"id"=>"3"}
  [1m[35mUser Load (0.2ms)[0m  SELECT `users`.* FROM `users` WHERE `users`.`id` = 1 LIMIT 1
  [1m[36mCollection Load (0.2ms)[0m  [1mSELECT `collections`.* FROM `collections` WHERE `collections`.`id` = 3 LIMIT 1[0m
  [1m[35mCollectionImage Load (0.7ms)[0m  SELECT `collection_images`.* FROM `collection_images` WHERE (collection_id = 3) LIMIT 1
  Rendered collections/_collection_form.html.erb (13.1ms)
  [1m[36mRestaurant Load (3.6ms)[0m  [1mSELECT `restaurants`.* FROM `restaurants` WHERE `restaurants`.`disabled` = 0[0m
  Rendered collections/_collection_restaurants_form.html.erb (92.5ms)
  Rendered collections/edit_collection.html.erb within layouts/admin (108.2ms)
Completed 200 OK in 119ms (Views: 111.0ms | ActiveRecord: 4.7ms)


Started GET "/collection/3/edit" for 127.0.0.1 at 2016-01-18 11:57:31 +0100
Processing by CollectionsController#edit_collection as HTML
  Parameters: {"id"=>"3"}
  [1m[35mUser Load (0.3ms)[0m  SELECT `users`.* FROM `users` WHERE `users`.`id` = 1 LIMIT 1
  [1m[36mCollection Load (0.2ms)[0m  [1mSELECT `collections`.* FROM `collections` WHERE `collections`.`id` = 3 LIMIT 1[0m
  [1m[35mCollectionImage Load (0.3ms)[0m  SELECT `collection_images`.* FROM `collection_images` WHERE (collection_id = 3) LIMIT 1
  Rendered collections/_collection_form.html.erb (11.7ms)
  [1m[36mRestaurant Load (3.7ms)[0m  [1mSELECT `restaurants`.* FROM `restaurants` WHERE `restaurants`.`disabled` = 0[0m
  Rendered collections/_collection_restaurants_form.html.erb (163.6ms)
  Rendered collections/edit_collection.html.erb within layouts/admin (178.0ms)
Completed 200 OK in 190ms (Views: 180.9ms | ActiveRecord: 4.5ms)


Started GET "/admin/collections/add_restaurant?utf8=%E2%9C%93&authenticity_token=cajmPApKUoLTDgL4nYG%2FB3GUhj8fezKDJZWxee28cyM%3D&collection_restaurant%5Brestaurant_id%5D=1" for 127.0.0.1 at 2016-01-18 11:57:35 +0100

AbstractController::ActionNotFound (The action 'show' could not be found for CollectionsController):
  actionpack (3.2.8) lib/abstract_controller/base.rb:116:in `process'
  actionpack (3.2.8) lib/abstract_controller/rendering.rb:45:in `process'
  actionpack (3.2.8) lib/action_controller/metal.rb:203:in `dispatch'
  actionpack (3.2.8) lib/action_controller/metal/rack_delegation.rb:14:in `dispatch'
  actionpack (3.2.8) lib/action_controller/metal.rb:246:in `block in action'
  actionpack (3.2.8) lib/action_dispatch/routing/route_set.rb:73:in `call'
  actionpack (3.2.8) lib/action_dispatch/routing/route_set.rb:73:in `dispatch'
  actionpack (3.2.8) lib/action_dispatch/routing/route_set.rb:36:in `call'
  journey (1.0.4) lib/journey/router.rb:68:in `block in call'
  journey (1.0.4) lib/journey/router.rb:56:in `each'
  journey (1.0.4) lib/journey/router.rb:56:in `call'
  actionpack (3.2.8) lib/action_dispatch/routing/route_set.rb:600:in `call'
  omniauth (1.1.4) lib/omniauth/strategy.rb:184:in `call!'
  omniauth (1.1.4) lib/omniauth/strategy.rb:164:in `call'
  newrelic_rpm (3.7.3.204) lib/new_relic/rack/error_collector.rb:55:in `call'
  newrelic_rpm (3.7.3.204) lib/new_relic/rack/agent_hooks.rb:32:in `call'
  newrelic_rpm (3.7.3.204) lib/new_relic/rack/browser_monitoring.rb:27:in `call'
  newrelic_rpm (3.7.3.204) lib/new_relic/rack/developer_mode.rb:45:in `call'
  galetahub-simple_captcha (0.1.5) lib/simple_captcha/middleware.rb:20:in `call'
  /Users/kevinmuller/.rvm/gems/ruby-2.2.4/bundler/gems/client_side_validations-a6a515504520/lib/client_side_validations/middleware.rb:21:in `call'
  warden (1.1.1) lib/warden/manager.rb:35:in `block in call'
  warden (1.1.1) lib/warden/manager.rb:34:in `catch'
  warden (1.1.1) lib/warden/manager.rb:34:in `call'
  actionpack (3.2.8) lib/action_dispatch/middleware/best_standards_support.rb:17:in `call'
  rack (1.4.5) lib/rack/etag.rb:23:in `call'
  rack (1.4.5) lib/rack/conditionalget.rb:25:in `call'
  actionpack (3.2.8) lib/action_dispatch/middleware/head.rb:14:in `call'
  /Users/kevinmuller/.rvm/gems/ruby-2.2.4/bundler/gems/remotipart-aadc29e996c3/lib/remotipart/middleware.rb:27:in `call'
  actionpack (3.2.8) lib/action_dispatch/middleware/params_parser.rb:21:in `call'
  actionpack (3.2.8) lib/action_dispatch/middleware/flash.rb:242:in `call'
  rack (1.4.5) lib/rack/session/abstract/id.rb:210:in `context'
  rack (1.4.5) lib/rack/session/abstract/id.rb:205:in `call'
  actionpack (3.2.8) lib/action_dispatch/middleware/cookies.rb:339:in `call'
  dragonfly (0.9.15) lib/dragonfly/cookie_monster.rb:9:in `call'
  activerecord (3.2.8) lib/active_record/query_cache.rb:64:in `call'
  activerecord (3.2.8) lib/active_record/connection_adapters/abstract/connection_pool.rb:473:in `call'
  actionpack (3.2.8) lib/action_dispatch/middleware/callbacks.rb:28:in `block in call'
  activesupport (3.2.8) lib/active_support/callbacks.rb:405:in `_run__1871245027803988066__call__4207201468600934469__callbacks'
  activesupport (3.2.8) lib/active_support/callbacks.rb:405:in `__run_callback'
  activesupport (3.2.8) lib/active_support/callbacks.rb:385:in `_run_call_callbacks'
  activesupport (3.2.8) lib/active_support/callbacks.rb:81:in `run_callbacks'
  actionpack (3.2.8) lib/action_dispatch/middleware/callbacks.rb:27:in `call'
  actionpack (3.2.8) lib/action_dispatch/middleware/reloader.rb:65:in `call'
  actionpack (3.2.8) lib/action_dispatch/middleware/remote_ip.rb:31:in `call'
  actionpack (3.2.8) lib/action_dispatch/middleware/debug_exceptions.rb:16:in `call'
  actionpack (3.2.8) lib/action_dispatch/middleware/show_exceptions.rb:56:in `call'
  railties (3.2.8) lib/rails/rack/logger.rb:26:in `call_app'
  railties (3.2.8) lib/rails/rack/logger.rb:16:in `call'
  quiet_assets (1.0.3) lib/quiet_assets.rb:23:in `call_with_quiet_assets'
  actionpack (3.2.8) lib/action_dispatch/middleware/request_id.rb:22:in `call'
  rack (1.4.5) lib/rack/methodoverride.rb:21:in `call'
  rack (1.4.5) lib/rack/runtime.rb:17:in `call'
  activesupport (3.2.8) lib/active_support/cache/strategy/local_cache.rb:72:in `call'
  rack (1.4.5) lib/rack/lock.rb:15:in `call'
  actionpack (3.2.8) lib/action_dispatch/middleware/static.rb:62:in `call'
  dragonfly (0.9.15) lib/dragonfly/middleware.rb:13:in `call'
  rack-cache (1.2) lib/rack/cache/context.rb:136:in `forward'
  rack-cache (1.2) lib/rack/cache/context.rb:245:in `fetch'
  rack-cache (1.2) lib/rack/cache/context.rb:185:in `lookup'
  rack-cache (1.2) lib/rack/cache/context.rb:66:in `call!'
  rack-cache (1.2) lib/rack/cache/context.rb:51:in `call'
  railties (3.2.8) lib/rails/engine.rb:479:in `call'
  railties (3.2.8) lib/rails/application.rb:223:in `call'
  rack (1.4.5) lib/rack/content_length.rb:14:in `call'
  railties (3.2.8) lib/rails/rack/log_tailer.rb:17:in `call'
  rack (1.4.5) lib/rack/handler/webrick.rb:59:in `service'
  /Users/kevinmuller/.rvm/rubies/ruby-2.2.4/lib/ruby/2.2.0/webrick/httpserver.rb:138:in `service'
  /Users/kevinmuller/.rvm/rubies/ruby-2.2.4/lib/ruby/2.2.0/webrick/httpserver.rb:94:in `run'
  /Users/kevinmuller/.rvm/rubies/ruby-2.2.4/lib/ruby/2.2.0/webrick/server.rb:294:in `block in start_thread'


  Rendered /Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_dispatch/middleware/templates/rescues/unknown_action.erb within rescues/layout (1.1ms)


Started GET "/collection/3/edit" for 127.0.0.1 at 2016-01-18 11:58:12 +0100
Processing by CollectionsController#edit_collection as HTML
  Parameters: {"id"=>"3"}
  [1m[35mUser Load (0.3ms)[0m  SELECT `users`.* FROM `users` WHERE `users`.`id` = 1 LIMIT 1
  [1m[36mCollection Load (0.2ms)[0m  [1mSELECT `collections`.* FROM `collections` WHERE `collections`.`id` = 3 LIMIT 1[0m
  [1m[35mCollectionImage Load (0.3ms)[0m  SELECT `collection_images`.* FROM `collection_images` WHERE (collection_id = 3) LIMIT 1
  Rendered collections/_collection_form.html.erb (13.7ms)
  [1m[36mRestaurant Load (3.7ms)[0m  [1mSELECT `restaurants`.* FROM `restaurants` WHERE `restaurants`.`disabled` = 0[0m
  Rendered collections/_collection_restaurants_form.html.erb (110.1ms)
  Rendered collections/edit_collection.html.erb within layouts/admin (126.1ms)
Completed 200 OK in 136ms (Views: 128.2ms | ActiveRecord: 4.5ms)


Started GET "/admin/collections/add_restaurant?utf8=%E2%9C%93&authenticity_token=cajmPApKUoLTDgL4nYG%2FB3GUhj8fezKDJZWxee28cyM%3D&collection_restaurant%5Brestaurant_id%5D=1" for 127.0.0.1 at 2016-01-18 11:58:15 +0100

AbstractController::ActionNotFound (The action 'show' could not be found for CollectionsController):
  actionpack (3.2.8) lib/abstract_controller/base.rb:116:in `process'
  actionpack (3.2.8) lib/abstract_controller/rendering.rb:45:in `process'
  actionpack (3.2.8) lib/action_controller/metal.rb:203:in `dispatch'
  actionpack (3.2.8) lib/action_controller/metal/rack_delegation.rb:14:in `dispatch'
  actionpack (3.2.8) lib/action_controller/metal.rb:246:in `block in action'
  actionpack (3.2.8) lib/action_dispatch/routing/route_set.rb:73:in `call'
  actionpack (3.2.8) lib/action_dispatch/routing/route_set.rb:73:in `dispatch'
  actionpack (3.2.8) lib/action_dispatch/routing/route_set.rb:36:in `call'
  journey (1.0.4) lib/journey/router.rb:68:in `block in call'
  journey (1.0.4) lib/journey/router.rb:56:in `each'
  journey (1.0.4) lib/journey/router.rb:56:in `call'
  actionpack (3.2.8) lib/action_dispatch/routing/route_set.rb:600:in `call'
  omniauth (1.1.4) lib/omniauth/strategy.rb:184:in `call!'
  omniauth (1.1.4) lib/omniauth/strategy.rb:164:in `call'
  newrelic_rpm (3.7.3.204) lib/new_relic/rack/error_collector.rb:55:in `call'
  newrelic_rpm (3.7.3.204) lib/new_relic/rack/agent_hooks.rb:32:in `call'
  newrelic_rpm (3.7.3.204) lib/new_relic/rack/browser_monitoring.rb:27:in `call'
  newrelic_rpm (3.7.3.204) lib/new_relic/rack/developer_mode.rb:45:in `call'
  galetahub-simple_captcha (0.1.5) lib/simple_captcha/middleware.rb:20:in `call'
  /Users/kevinmuller/.rvm/gems/ruby-2.2.4/bundler/gems/client_side_validations-a6a515504520/lib/client_side_validations/middleware.rb:21:in `call'
  warden (1.1.1) lib/warden/manager.rb:35:in `block in call'
  warden (1.1.1) lib/warden/manager.rb:34:in `catch'
  warden (1.1.1) lib/warden/manager.rb:34:in `call'
  actionpack (3.2.8) lib/action_dispatch/middleware/best_standards_support.rb:17:in `call'
  rack (1.4.5) lib/rack/etag.rb:23:in `call'
  rack (1.4.5) lib/rack/conditionalget.rb:25:in `call'
  actionpack (3.2.8) lib/action_dispatch/middleware/head.rb:14:in `call'
  /Users/kevinmuller/.rvm/gems/ruby-2.2.4/bundler/gems/remotipart-aadc29e996c3/lib/remotipart/middleware.rb:27:in `call'
  actionpack (3.2.8) lib/action_dispatch/middleware/params_parser.rb:21:in `call'
  actionpack (3.2.8) lib/action_dispatch/middleware/flash.rb:242:in `call'
  rack (1.4.5) lib/rack/session/abstract/id.rb:210:in `context'
  rack (1.4.5) lib/rack/session/abstract/id.rb:205:in `call'
  actionpack (3.2.8) lib/action_dispatch/middleware/cookies.rb:339:in `call'
  dragonfly (0.9.15) lib/dragonfly/cookie_monster.rb:9:in `call'
  activerecord (3.2.8) lib/active_record/query_cache.rb:64:in `call'
  activerecord (3.2.8) lib/active_record/connection_adapters/abstract/connection_pool.rb:473:in `call'
  actionpack (3.2.8) lib/action_dispatch/middleware/callbacks.rb:28:in `block in call'
  activesupport (3.2.8) lib/active_support/callbacks.rb:405:in `_run__1871245027803988066__call__4207201468600934469__callbacks'
  activesupport (3.2.8) lib/active_support/callbacks.rb:405:in `__run_callback'
  activesupport (3.2.8) lib/active_support/callbacks.rb:385:in `_run_call_callbacks'
  activesupport (3.2.8) lib/active_support/callbacks.rb:81:in `run_callbacks'
  actionpack (3.2.8) lib/action_dispatch/middleware/callbacks.rb:27:in `call'
  actionpack (3.2.8) lib/action_dispatch/middleware/reloader.rb:65:in `call'
  actionpack (3.2.8) lib/action_dispatch/middleware/remote_ip.rb:31:in `call'
  actionpack (3.2.8) lib/action_dispatch/middleware/debug_exceptions.rb:16:in `call'
  actionpack (3.2.8) lib/action_dispatch/middleware/show_exceptions.rb:56:in `call'
  railties (3.2.8) lib/rails/rack/logger.rb:26:in `call_app'
  railties (3.2.8) lib/rails/rack/logger.rb:16:in `call'
  quiet_assets (1.0.3) lib/quiet_assets.rb:23:in `call_with_quiet_assets'
  actionpack (3.2.8) lib/action_dispatch/middleware/request_id.rb:22:in `call'
  rack (1.4.5) lib/rack/methodoverride.rb:21:in `call'
  rack (1.4.5) lib/rack/runtime.rb:17:in `call'
  activesupport (3.2.8) lib/active_support/cache/strategy/local_cache.rb:72:in `call'
  rack (1.4.5) lib/rack/lock.rb:15:in `call'
  actionpack (3.2.8) lib/action_dispatch/middleware/static.rb:62:in `call'
  dragonfly (0.9.15) lib/dragonfly/middleware.rb:13:in `call'
  rack-cache (1.2) lib/rack/cache/context.rb:136:in `forward'
  rack-cache (1.2) lib/rack/cache/context.rb:245:in `fetch'
  rack-cache (1.2) lib/rack/cache/context.rb:185:in `lookup'
  rack-cache (1.2) lib/rack/cache/context.rb:66:in `call!'
  rack-cache (1.2) lib/rack/cache/context.rb:51:in `call'
  railties (3.2.8) lib/rails/engine.rb:479:in `call'
  railties (3.2.8) lib/rails/application.rb:223:in `call'
  rack (1.4.5) lib/rack/content_length.rb:14:in `call'
  railties (3.2.8) lib/rails/rack/log_tailer.rb:17:in `call'
  rack (1.4.5) lib/rack/handler/webrick.rb:59:in `service'
  /Users/kevinmuller/.rvm/rubies/ruby-2.2.4/lib/ruby/2.2.0/webrick/httpserver.rb:138:in `service'
  /Users/kevinmuller/.rvm/rubies/ruby-2.2.4/lib/ruby/2.2.0/webrick/httpserver.rb:94:in `run'
  /Users/kevinmuller/.rvm/rubies/ruby-2.2.4/lib/ruby/2.2.0/webrick/server.rb:294:in `block in start_thread'


  Rendered /Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_dispatch/middleware/templates/rescues/unknown_action.erb within rescues/layout (1.0ms)


Started GET "/collection/3/edit" for 127.0.0.1 at 2016-01-18 11:58:37 +0100
Processing by CollectionsController#edit_collection as HTML
  Parameters: {"id"=>"3"}
  [1m[35mUser Load (0.4ms)[0m  SELECT `users`.* FROM `users` WHERE `users`.`id` = 1 LIMIT 1
  [1m[36mCollection Load (0.2ms)[0m  [1mSELECT `collections`.* FROM `collections` WHERE `collections`.`id` = 3 LIMIT 1[0m
  [1m[35mCollectionImage Load (0.4ms)[0m  SELECT `collection_images`.* FROM `collection_images` WHERE (collection_id = 3) LIMIT 1
  Rendered collections/_collection_form.html.erb (11.3ms)
  [1m[36mRestaurant Load (3.2ms)[0m  [1mSELECT `restaurants`.* FROM `restaurants` WHERE `restaurants`.`disabled` = 0[0m
  Rendered collections/_collection_restaurants_form.html.erb (114.7ms)
  Rendered collections/edit_collection.html.erb within layouts/admin (129.0ms)
Completed 200 OK in 145ms (Views: 135.0ms | ActiveRecord: 4.2ms)


Started POST "/admin/collections/add_restaurant" for 127.0.0.1 at 2016-01-18 11:58:42 +0100
Processing by CollectionsController#add_restaurant as */*
  Parameters: {"utf8"=>"âœ“", "authenticity_token"=>"cajmPApKUoLTDgL4nYG/B3GUhj8fezKDJZWxee28cyM=", "collection_restaurant"=>{"restaurant_id"=>"1"}}
  [1m[35mUser Load (3.4ms)[0m  SELECT `users`.* FROM `users` WHERE `users`.`id` = 1 LIMIT 1
  [1m[36m (0.5ms)[0m  [1mBEGIN[0m
  [1m[35mSQL (1.4ms)[0m  INSERT INTO `collection_restaurants` (`collection_id`, `order`, `restaurant_id`) VALUES (NULL, NULL, NULL)
  [1m[36m (0.6ms)[0m  [1mCOMMIT[0m
Completed 500 Internal Server Error in 98ms

ActionView::MissingTemplate (Missing template collections/add_restaurant, application/add_restaurant with {:locale=>[:en], :formats=>[:html, :text, :js, :css, :ics, :csv, :png, :jpeg, :gif, :bmp, :tiff, :mpeg, :xml, :rss, :atom, :yaml, :multipart_form, :url_encoded_form, :json, :pdf, :zip], :handlers=>[:erb, :builder, :coffee, :slim]}. Searched in:
  * "/Users/kevinmuller/halalgems_backend/app/views"
  * "/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/ckeditor-3.7.3/app/views"
  * "/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/devise_mailchimp-0.0.4/app/views"
  * "/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/kaminari-bootstrap-3.0.1/app/views"
  * "/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/bootstrap-kaminari-views-0.0.3/app/views"
  * "/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/kaminari-0.14.1/app/views"
  * "/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/devise-2.0.4/app/views"
):
  actionpack (3.2.8) lib/action_view/path_set.rb:58:in `find'
  actionpack (3.2.8) lib/action_view/lookup_context.rb:109:in `find'
  actionpack (3.2.8) lib/action_view/renderer/abstract_renderer.rb:3:in `find_template'
  actionpack (3.2.8) lib/action_view/renderer/template_renderer.rb:34:in `determine_template'
  newrelic_rpm (3.7.3.204) lib/new_relic/agent/instrumentation/rails3/action_controller.rb:157:in `render_with_newrelic'
  actionpack (3.2.8) lib/action_view/renderer/renderer.rb:36:in `render_template'
  actionpack (3.2.8) lib/action_view/renderer/renderer.rb:17:in `render'
  actionpack (3.2.8) lib/abstract_controller/rendering.rb:110:in `_render_template'
  actionpack (3.2.8) lib/action_controller/metal/streaming.rb:225:in `_render_template'
  actionpack (3.2.8) lib/abstract_controller/rendering.rb:103:in `render_to_body'
  actionpack (3.2.8) lib/action_controller/metal/renderers.rb:28:in `render_to_body'
  actionpack (3.2.8) lib/action_controller/metal/compatibility.rb:50:in `render_to_body'
  actionpack (3.2.8) lib/abstract_controller/rendering.rb:88:in `render'
  actionpack (3.2.8) lib/action_controller/metal/rendering.rb:16:in `render'
  actionpack (3.2.8) lib/action_controller/metal/instrumentation.rb:40:in `block (2 levels) in render'
  activesupport (3.2.8) lib/active_support/core_ext/benchmark.rb:5:in `block in ms'
  /Users/kevinmuller/.rvm/rubies/ruby-2.2.4/lib/ruby/2.2.0/benchmark.rb:303:in `realtime'
  activesupport (3.2.8) lib/active_support/core_ext/benchmark.rb:5:in `ms'
  actionpack (3.2.8) lib/action_controller/metal/instrumentation.rb:40:in `block in render'
  actionpack (3.2.8) lib/action_controller/metal/instrumentation.rb:83:in `cleanup_view_runtime'
  activerecord (3.2.8) lib/active_record/railties/controller_runtime.rb:24:in `cleanup_view_runtime'
  actionpack (3.2.8) lib/action_controller/metal/instrumentation.rb:39:in `render'
  /Users/kevinmuller/.rvm/gems/ruby-2.2.4/bundler/gems/remotipart-aadc29e996c3/lib/remotipart/render_overrides.rb:14:in `render_with_remotipart'
  actionpack (3.2.8) lib/action_controller/metal/implicit_render.rb:10:in `default_render'
  actionpack (3.2.8) lib/action_controller/metal/implicit_render.rb:5:in `send_action'
  actionpack (3.2.8) lib/abstract_controller/base.rb:167:in `process_action'
  actionpack (3.2.8) lib/action_controller/metal/rendering.rb:10:in `process_action'
  actionpack (3.2.8) lib/abstract_controller/callbacks.rb:18:in `block in process_action'
  activesupport (3.2.8) lib/active_support/callbacks.rb:458:in `_run__1878201843038484176__process_action__62597762474239354__callbacks'
  activesupport (3.2.8) lib/active_support/callbacks.rb:405:in `__run_callback'
  activesupport (3.2.8) lib/active_support/callbacks.rb:385:in `_run_process_action_callbacks'
  activesupport (3.2.8) lib/active_support/callbacks.rb:81:in `run_callbacks'
  actionpack (3.2.8) lib/abstract_controller/callbacks.rb:17:in `process_action'
  actionpack (3.2.8) lib/action_controller/metal/rescue.rb:29:in `process_action'
  actionpack (3.2.8) lib/action_controller/metal/instrumentation.rb:30:in `block in process_action'
  activesupport (3.2.8) lib/active_support/notifications.rb:123:in `block in instrument'
  activesupport (3.2.8) lib/active_support/notifications/instrumenter.rb:20:in `instrument'
  activesupport (3.2.8) lib/active_support/notifications.rb:123:in `instrument'
  actionpack (3.2.8) lib/action_controller/metal/instrumentation.rb:29:in `process_action'
  actionpack (3.2.8) lib/action_controller/metal/params_wrapper.rb:207:in `process_action'
  activerecord (3.2.8) lib/active_record/railties/controller_runtime.rb:18:in `process_action'
  newrelic_rpm (3.7.3.204) lib/new_relic/agent/instrumentation/rails3/action_controller.rb:38:in `block in process_action'
  newrelic_rpm (3.7.3.204) lib/new_relic/agent/instrumentation/controller_instrumentation.rb:335:in `perform_action_with_newrelic_trace'
  newrelic_rpm (3.7.3.204) lib/new_relic/agent/instrumentation/rails3/action_controller.rb:37:in `process_action'
  actionpack (3.2.8) lib/abstract_controller/base.rb:121:in `process'
  actionpack (3.2.8) lib/abstract_controller/rendering.rb:45:in `process'
  actionpack (3.2.8) lib/action_controller/metal.rb:203:in `dispatch'
  actionpack (3.2.8) lib/action_controller/metal/rack_delegation.rb:14:in `dispatch'
  actionpack (3.2.8) lib/action_controller/metal.rb:246:in `block in action'
  actionpack (3.2.8) lib/action_dispatch/routing/route_set.rb:73:in `call'
  actionpack (3.2.8) lib/action_dispatch/routing/route_set.rb:73:in `dispatch'
  actionpack (3.2.8) lib/action_dispatch/routing/route_set.rb:36:in `call'
  journey (1.0.4) lib/journey/router.rb:68:in `block in call'
  journey (1.0.4) lib/journey/router.rb:56:in `each'
  journey (1.0.4) lib/journey/router.rb:56:in `call'
  actionpack (3.2.8) lib/action_dispatch/routing/route_set.rb:600:in `call'
  omniauth (1.1.4) lib/omniauth/strategy.rb:184:in `call!'
  omniauth (1.1.4) lib/omniauth/strategy.rb:164:in `call'
  newrelic_rpm (3.7.3.204) lib/new_relic/rack/error_collector.rb:55:in `call'
  newrelic_rpm (3.7.3.204) lib/new_relic/rack/agent_hooks.rb:32:in `call'
  newrelic_rpm (3.7.3.204) lib/new_relic/rack/browser_monitoring.rb:27:in `call'
  newrelic_rpm (3.7.3.204) lib/new_relic/rack/developer_mode.rb:45:in `call'
  galetahub-simple_captcha (0.1.5) lib/simple_captcha/middleware.rb:20:in `call'
  /Users/kevinmuller/.rvm/gems/ruby-2.2.4/bundler/gems/client_side_validations-a6a515504520/lib/client_side_validations/middleware.rb:21:in `call'
  warden (1.1.1) lib/warden/manager.rb:35:in `block in call'
  warden (1.1.1) lib/warden/manager.rb:34:in `catch'
  warden (1.1.1) lib/warden/manager.rb:34:in `call'
  actionpack (3.2.8) lib/action_dispatch/middleware/best_standards_support.rb:17:in `call'
  rack (1.4.5) lib/rack/etag.rb:23:in `call'
  rack (1.4.5) lib/rack/conditionalget.rb:35:in `call'
  actionpack (3.2.8) lib/action_dispatch/middleware/head.rb:14:in `call'
  /Users/kevinmuller/.rvm/gems/ruby-2.2.4/bundler/gems/remotipart-aadc29e996c3/lib/remotipart/middleware.rb:27:in `call'
  actionpack (3.2.8) lib/action_dispatch/middleware/params_parser.rb:21:in `call'
  actionpack (3.2.8) lib/action_dispatch/middleware/flash.rb:242:in `call'
  rack (1.4.5) lib/rack/session/abstract/id.rb:210:in `context'
  rack (1.4.5) lib/rack/session/abstract/id.rb:205:in `call'
  actionpack (3.2.8) lib/action_dispatch/middleware/cookies.rb:339:in `call'
  dragonfly (0.9.15) lib/dragonfly/cookie_monster.rb:9:in `call'
  activerecord (3.2.8) lib/active_record/query_cache.rb:64:in `call'
  activerecord (3.2.8) lib/active_record/connection_adapters/abstract/connection_pool.rb:473:in `call'
  actionpack (3.2.8) lib/action_dispatch/middleware/callbacks.rb:28:in `block in call'
  activesupport (3.2.8) lib/active_support/callbacks.rb:405:in `_run__1871245027803988066__call__4207201468600934469__callbacks'
  activesupport (3.2.8) lib/active_support/callbacks.rb:405:in `__run_callback'
  activesupport (3.2.8) lib/active_support/callbacks.rb:385:in `_run_call_callbacks'
  activesupport (3.2.8) lib/active_support/callbacks.rb:81:in `run_callbacks'
  actionpack (3.2.8) lib/action_dispatch/middleware/callbacks.rb:27:in `call'
  actionpack (3.2.8) lib/action_dispatch/middleware/reloader.rb:65:in `call'
  actionpack (3.2.8) lib/action_dispatch/middleware/remote_ip.rb:31:in `call'
  actionpack (3.2.8) lib/action_dispatch/middleware/debug_exceptions.rb:16:in `call'
  actionpack (3.2.8) lib/action_dispatch/middleware/show_exceptions.rb:56:in `call'
  railties (3.2.8) lib/rails/rack/logger.rb:26:in `call_app'
  railties (3.2.8) lib/rails/rack/logger.rb:16:in `call'
  quiet_assets (1.0.3) lib/quiet_assets.rb:23:in `call_with_quiet_assets'
  actionpack (3.2.8) lib/action_dispatch/middleware/request_id.rb:22:in `call'
  rack (1.4.5) lib/rack/methodoverride.rb:21:in `call'
  rack (1.4.5) lib/rack/runtime.rb:17:in `call'
  activesupport (3.2.8) lib/active_support/cache/strategy/local_cache.rb:72:in `call'
  rack (1.4.5) lib/rack/lock.rb:15:in `call'
  actionpack (3.2.8) lib/action_dispatch/middleware/static.rb:62:in `call'
  dragonfly (0.9.15) lib/dragonfly/middleware.rb:13:in `call'
  rack-cache (1.2) lib/rack/cache/context.rb:136:in `forward'
  rack-cache (1.2) lib/rack/cache/context.rb:143:in `pass'
  rack-cache (1.2) lib/rack/cache/context.rb:155:in `invalidate'
  rack-cache (1.2) lib/rack/cache/context.rb:71:in `call!'
  rack-cache (1.2) lib/rack/cache/context.rb:51:in `call'
  railties (3.2.8) lib/rails/engine.rb:479:in `call'
  railties (3.2.8) lib/rails/application.rb:223:in `call'
  rack (1.4.5) lib/rack/content_length.rb:14:in `call'
  railties (3.2.8) lib/rails/rack/log_tailer.rb:17:in `call'
  rack (1.4.5) lib/rack/handler/webrick.rb:59:in `service'
  /Users/kevinmuller/.rvm/rubies/ruby-2.2.4/lib/ruby/2.2.0/webrick/httpserver.rb:138:in `service'
  /Users/kevinmuller/.rvm/rubies/ruby-2.2.4/lib/ruby/2.2.0/webrick/httpserver.rb:94:in `run'
  /Users/kevinmuller/.rvm/rubies/ruby-2.2.4/lib/ruby/2.2.0/webrick/server.rb:294:in `block in start_thread'


  Rendered /Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_dispatch/middleware/templates/rescues/missing_template.erb within rescues/layout (0.9ms)


Started GET "/collection/3/edit" for 127.0.0.1 at 2016-01-18 12:02:48 +0100
Processing by CollectionsController#edit_collection as HTML
  Parameters: {"id"=>"3"}
  [1m[35mUser Load (0.3ms)[0m  SELECT `users`.* FROM `users` WHERE `users`.`id` = 1 LIMIT 1
  [1m[36mCollection Load (0.2ms)[0m  [1mSELECT `collections`.* FROM `collections` WHERE `collections`.`id` = 3 LIMIT 1[0m
  [1m[35m (0.2ms)[0m  SELECT COUNT(*) FROM `filter_types` WHERE (code = 'features')
  [1m[36m (0.2ms)[0m  [1mSELECT COUNT(*) FROM `filters` WHERE (code = 'offer')[0m
  [1m[35mCollectionImage Load (0.2ms)[0m  SELECT `collection_images`.* FROM `collection_images` WHERE (collection_id = 3) LIMIT 1
  Rendered collections/_collection_form.html.erb (53.0ms)
  [1m[36mRestaurant Load (3.2ms)[0m  [1mSELECT `restaurants`.* FROM `restaurants` WHERE `restaurants`.`disabled` = 0[0m
  Rendered collections/_collection_restaurants_form.html.erb (126.5ms)
  Rendered collections/edit_collection.html.erb within layouts/admin (181.7ms)
Completed 200 OK in 509ms (Views: 187.5ms | ActiveRecord: 19.2ms)


Started POST "/admin/collections/add_restaurant" for 127.0.0.1 at 2016-01-18 12:02:52 +0100
Processing by CollectionsController#add_restaurant as */*
  Parameters: {"utf8"=>"âœ“", "authenticity_token"=>"cajmPApKUoLTDgL4nYG/B3GUhj8fezKDJZWxee28cyM=", "collection_restaurant"=>{"restaurant_id"=>"1"}}
  [1m[35mUser Load (0.3ms)[0m  SELECT `users`.* FROM `users` WHERE `users`.`id` = 1 LIMIT 1
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35mSQL (0.4ms)[0m  INSERT INTO `collection_restaurants` (`collection_id`, `order`, `restaurant_id`) VALUES (NULL, NULL, NULL)
  [1m[36m (9.0ms)[0m  [1mCOMMIT[0m
Completed 500 Internal Server Error in 26ms

RuntimeError (Called id for nil, which would mistakenly be 8 -- if you really wanted the id of nil, use object_id):
  app/controllers/collections_controller.rb:194:in `block (2 levels) in add_restaurant'
  app/controllers/collections_controller.rb:192:in `add_restaurant'


  Rendered /Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_dispatch/middleware/templates/rescues/_trace.erb (1.9ms)
  Rendered /Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_dispatch/middleware/templates/rescues/_request_and_response.erb (1.0ms)
  Rendered /Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_dispatch/middleware/templates/rescues/diagnostics.erb within rescues/layout (46.2ms)


Started GET "/collection/3/edit" for 127.0.0.1 at 2016-01-18 12:03:01 +0100
Processing by CollectionsController#edit_collection as HTML
  Parameters: {"id"=>"3"}
  [1m[35mUser Load (0.4ms)[0m  SELECT `users`.* FROM `users` WHERE `users`.`id` = 1 LIMIT 1
  [1m[36mCollection Load (0.2ms)[0m  [1mSELECT `collections`.* FROM `collections` WHERE `collections`.`id` = 3 LIMIT 1[0m
  [1m[35mCollectionImage Load (0.3ms)[0m  SELECT `collection_images`.* FROM `collection_images` WHERE (collection_id = 3) LIMIT 1
  Rendered collections/_collection_form.html.erb (10.6ms)
  [1m[36mRestaurant Load (5.4ms)[0m  [1mSELECT `restaurants`.* FROM `restaurants` WHERE `restaurants`.`disabled` = 0[0m
  Rendered collections/_collection_restaurants_form.html.erb (92.3ms)
  Rendered collections/edit_collection.html.erb within layouts/admin (105.4ms)
Completed 200 OK in 120ms (Views: 109.9ms | ActiveRecord: 6.2ms)


Started POST "/admin/collections/add_restaurant" for 127.0.0.1 at 2016-01-18 12:03:04 +0100
Processing by CollectionsController#add_restaurant as */*
  Parameters: {"utf8"=>"âœ“", "authenticity_token"=>"cajmPApKUoLTDgL4nYG/B3GUhj8fezKDJZWxee28cyM=", "collection_restaurant"=>{"restaurant_id"=>"1"}}
  [1m[35mUser Load (0.3ms)[0m  SELECT `users`.* FROM `users` WHERE `users`.`id` = 1 LIMIT 1
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO `collection_restaurants` (`collection_id`, `order`, `restaurant_id`) VALUES (NULL, NULL, NULL)
  [1m[36m (0.5ms)[0m  [1mCOMMIT[0m
Completed 500 Internal Server Error in 9ms

RuntimeError (Called id for nil, which would mistakenly be 8 -- if you really wanted the id of nil, use object_id):
  app/controllers/collections_controller.rb:194:in `block (2 levels) in add_restaurant'
  app/controllers/collections_controller.rb:192:in `add_restaurant'


  Rendered /Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_dispatch/middleware/templates/rescues/_trace.erb (2.1ms)
  Rendered /Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_dispatch/middleware/templates/rescues/_request_and_response.erb (4.7ms)
  Rendered /Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_dispatch/middleware/templates/rescues/diagnostics.erb within rescues/layout (57.9ms)


Started GET "/collection/3/edit" for 127.0.0.1 at 2016-01-18 12:05:23 +0100
Processing by CollectionsController#edit_collection as HTML
  Parameters: {"id"=>"3"}
  [1m[35mUser Load (0.2ms)[0m  SELECT `users`.* FROM `users` WHERE `users`.`id` = 1 LIMIT 1
  [1m[36mCollection Load (0.4ms)[0m  [1mSELECT `collections`.* FROM `collections` WHERE `collections`.`id` = 3 LIMIT 1[0m
  [1m[35m (0.2ms)[0m  SELECT COUNT(*) FROM `filter_types` WHERE (code = 'features')
  [1m[36m (0.2ms)[0m  [1mSELECT COUNT(*) FROM `filters` WHERE (code = 'offer')[0m
  [1m[35mCollectionImage Load (0.2ms)[0m  SELECT `collection_images`.* FROM `collection_images` WHERE (collection_id = 3) LIMIT 1
  Rendered collections/_collection_form.html.erb (42.9ms)
  [1m[36mRestaurant Load (3.2ms)[0m  [1mSELECT `restaurants`.* FROM `restaurants` WHERE `restaurants`.`disabled` = 0[0m
  Rendered collections/_collection_restaurants_form.html.erb (124.9ms)
  Rendered collections/edit_collection.html.erb within layouts/admin (170.3ms)
Completed 200 OK in 479ms (Views: 175.6ms | ActiveRecord: 18.6ms)


Started POST "/admin/collections/add_restaurant" for 127.0.0.1 at 2016-01-18 12:05:27 +0100
Processing by CollectionsController#add_restaurant as */*
  Parameters: {"utf8"=>"âœ“", "authenticity_token"=>"cajmPApKUoLTDgL4nYG/B3GUhj8fezKDJZWxee28cyM=", "collection_restaurant"=>{"restaurant_id"=>"1"}}
  [1m[35mUser Load (0.3ms)[0m  SELECT `users`.* FROM `users` WHERE `users`.`id` = 1 LIMIT 1
Completed 500 Internal Server Error in 3ms

NoMethodError (undefined method `stringify_keys' for "1":String):
  app/controllers/collections_controller.rb:190:in `new'
  app/controllers/collections_controller.rb:190:in `add_restaurant'


  Rendered /Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_dispatch/middleware/templates/rescues/_trace.erb (1.7ms)
  Rendered /Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_dispatch/middleware/templates/rescues/_request_and_response.erb (1.0ms)
  Rendered /Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_dispatch/middleware/templates/rescues/diagnostics.erb within rescues/layout (43.5ms)


Started GET "/collection/3/edit" for 127.0.0.1 at 2016-01-18 12:07:09 +0100
Processing by CollectionsController#edit_collection as HTML
  Parameters: {"id"=>"3"}
  [1m[36mUser Load (0.3ms)[0m  [1mSELECT `users`.* FROM `users` WHERE `users`.`id` = 1 LIMIT 1[0m
  [1m[35mCollection Load (0.2ms)[0m  SELECT `collections`.* FROM `collections` WHERE `collections`.`id` = 3 LIMIT 1
  [1m[36m (0.6ms)[0m  [1mSELECT COUNT(*) FROM `filter_types` WHERE (code = 'features')[0m
  [1m[35m (0.2ms)[0m  SELECT COUNT(*) FROM `filters` WHERE (code = 'offer')
  [1m[36mCollectionImage Load (0.3ms)[0m  [1mSELECT `collection_images`.* FROM `collection_images` WHERE (collection_id = 3) LIMIT 1[0m
  Rendered collections/_collection_form.html.erb (56.4ms)
  [1m[35mRestaurant Load (3.2ms)[0m  SELECT `restaurants`.* FROM `restaurants` WHERE `restaurants`.`disabled` = 0
  Rendered collections/_collection_restaurants_form.html.erb (113.2ms)
  Rendered collections/edit_collection.html.erb within layouts/admin (172.2ms)
Completed 200 OK in 460ms (Views: 177.3ms | ActiveRecord: 21.4ms)


Started POST "/admin/collections/add_restaurant" for 127.0.0.1 at 2016-01-18 12:07:12 +0100
Processing by CollectionsController#add_restaurant as */*
  Parameters: {"utf8"=>"âœ“", "authenticity_token"=>"cajmPApKUoLTDgL4nYG/B3GUhj8fezKDJZWxee28cyM=", "collection_restaurant"=>{"restaurant_id"=>"1"}}
  [1m[36mUser Load (4.5ms)[0m  [1mSELECT `users`.* FROM `users` WHERE `users`.`id` = 1 LIMIT 1[0m
  [1m[35m (0.3ms)[0m  BEGIN
  [1m[36mSQL (0.6ms)[0m  [1mINSERT INTO `collection_restaurants` (`collection_id`, `order`, `restaurant_id`) VALUES (NULL, NULL, 1)[0m
  [1m[35m (0.7ms)[0m  COMMIT
Completed 500 Internal Server Error in 16ms

RuntimeError (Called id for nil, which would mistakenly be 8 -- if you really wanted the id of nil, use object_id):
  app/controllers/collections_controller.rb:195:in `block (2 levels) in add_restaurant'
  app/controllers/collections_controller.rb:193:in `add_restaurant'


  Rendered /Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_dispatch/middleware/templates/rescues/_trace.erb (15.8ms)
  Rendered /Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_dispatch/middleware/templates/rescues/_request_and_response.erb (1.7ms)
  Rendered /Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_dispatch/middleware/templates/rescues/diagnostics.erb within rescues/layout (109.5ms)


Started GET "/collection/3/edit" for 127.0.0.1 at 2016-01-18 12:07:56 +0100
Processing by CollectionsController#edit_collection as HTML
  Parameters: {"id"=>"3"}
  [1m[36mUser Load (0.3ms)[0m  [1mSELECT `users`.* FROM `users` WHERE `users`.`id` = 1 LIMIT 1[0m
  [1m[35mCollection Load (0.2ms)[0m  SELECT `collections`.* FROM `collections` WHERE `collections`.`id` = 3 LIMIT 1
  [1m[36m (0.2ms)[0m  [1mSELECT COUNT(*) FROM `filter_types` WHERE (code = 'features')[0m
  [1m[35m (0.2ms)[0m  SELECT COUNT(*) FROM `filters` WHERE (code = 'offer')
  [1m[36mCollectionImage Load (0.3ms)[0m  [1mSELECT `collection_images`.* FROM `collection_images` WHERE (collection_id = 3) LIMIT 1[0m
  Rendered collections/_collection_form.html.erb (45.4ms)
  [1m[35mRestaurant Load (3.6ms)[0m  SELECT `restaurants`.* FROM `restaurants` WHERE `restaurants`.`disabled` = 0
  Rendered collections/_collection_restaurants_form.html.erb (94.2ms)
  Rendered collections/edit_collection.html.erb within layouts/admin (143.0ms)
Completed 200 OK in 362ms (Views: 154.6ms | ActiveRecord: 20.4ms)


Started POST "/admin/collections/add_restaurant/3" for 127.0.0.1 at 2016-01-18 12:08:01 +0100
Processing by CollectionsController#add_restaurant as */*
  Parameters: {"utf8"=>"âœ“", "authenticity_token"=>"cajmPApKUoLTDgL4nYG/B3GUhj8fezKDJZWxee28cyM=", "collection_restaurant"=>{"restaurant_id"=>"1"}, "id"=>"3"}
  [1m[36mUser Load (0.3ms)[0m  [1mSELECT `users`.* FROM `users` WHERE `users`.`id` = 1 LIMIT 1[0m
  [1m[35m (0.1ms)[0m  BEGIN
  [1m[36mSQL (0.4ms)[0m  [1mINSERT INTO `collection_restaurants` (`collection_id`, `order`, `restaurant_id`) VALUES (NULL, NULL, 1)[0m
  [1m[35m (0.5ms)[0m  COMMIT
Completed 500 Internal Server Error in 16ms

RuntimeError (Called id for nil, which would mistakenly be 8 -- if you really wanted the id of nil, use object_id):
  app/controllers/collections_controller.rb:195:in `block (2 levels) in add_restaurant'
  app/controllers/collections_controller.rb:193:in `add_restaurant'


  Rendered /Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_dispatch/middleware/templates/rescues/_trace.erb (1.6ms)
  Rendered /Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_dispatch/middleware/templates/rescues/_request_and_response.erb (1.8ms)
  Rendered /Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_dispatch/middleware/templates/rescues/diagnostics.erb within rescues/layout (63.8ms)


Started GET "/collection/3/edit" for 127.0.0.1 at 2016-01-18 12:08:43 +0100
Processing by CollectionsController#edit_collection as HTML
  Parameters: {"id"=>"3"}
  [1m[36mUser Load (0.3ms)[0m  [1mSELECT `users`.* FROM `users` WHERE `users`.`id` = 1 LIMIT 1[0m
  [1m[35mCollection Load (0.2ms)[0m  SELECT `collections`.* FROM `collections` WHERE `collections`.`id` = 3 LIMIT 1
  [1m[36m (0.2ms)[0m  [1mSELECT COUNT(*) FROM `filter_types` WHERE (code = 'features')[0m
  [1m[35m (0.2ms)[0m  SELECT COUNT(*) FROM `filters` WHERE (code = 'offer')
  [1m[36mCollectionImage Load (0.3ms)[0m  [1mSELECT `collection_images`.* FROM `collection_images` WHERE (collection_id = 3) LIMIT 1[0m
  Rendered collections/_collection_form.html.erb (37.0ms)
  Rendered collections/_collection_restaurants_form.html.erb (0.9ms)
  Rendered collections/edit_collection.html.erb within layouts/admin (39.8ms)
Completed 500 Internal Server Error in 298ms

ActionController::RoutingError (No route matches {:controller=>"collections", :action=>"add_restaurant"}):
  app/views/collections/_collection_restaurants_form.html.erb:3:in `_app_views_collections__collection_restaurants_form_html_erb__241531618330134577_70236320265260'
  app/views/collections/edit_collection.html.erb:17:in `_app_views_collections_edit_collection_html_erb___2603788858892649966_70236180159620'


  Rendered /Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_dispatch/middleware/templates/rescues/routing_error.erb within rescues/layout (0.7ms)


Started GET "/collection/3/edit" for 127.0.0.1 at 2016-01-18 12:09:14 +0100
Processing by CollectionsController#edit_collection as HTML
  Parameters: {"id"=>"3"}
  [1m[35mUser Load (0.2ms)[0m  SELECT `users`.* FROM `users` WHERE `users`.`id` = 1 LIMIT 1
  [1m[36mCollection Load (0.2ms)[0m  [1mSELECT `collections`.* FROM `collections` WHERE `collections`.`id` = 3 LIMIT 1[0m
  [1m[35m (0.2ms)[0m  SELECT COUNT(*) FROM `filter_types` WHERE (code = 'features')
  [1m[36m (0.3ms)[0m  [1mSELECT COUNT(*) FROM `filters` WHERE (code = 'offer')[0m
  [1m[35mCollectionImage Load (0.2ms)[0m  SELECT `collection_images`.* FROM `collection_images` WHERE (collection_id = 3) LIMIT 1
  Rendered collections/_collection_form.html.erb (40.8ms)
  [1m[36mRestaurant Load (3.3ms)[0m  [1mSELECT `restaurants`.* FROM `restaurants` WHERE `restaurants`.`disabled` = 0[0m
  Rendered collections/_collection_restaurants_form.html.erb (136.5ms)
  Rendered collections/edit_collection.html.erb within layouts/admin (179.6ms)
Completed 200 OK in 387ms (Views: 184.5ms | ActiveRecord: 19.4ms)


Started POST "/admin/collections/add_restaurant/3" for 127.0.0.1 at 2016-01-18 12:09:19 +0100
Processing by CollectionsController#add_restaurant as */*
  Parameters: {"utf8"=>"âœ“", "authenticity_token"=>"cajmPApKUoLTDgL4nYG/B3GUhj8fezKDJZWxee28cyM=", "collection_restaurant"=>{"restaurant_id"=>"1"}, "id"=>"3"}
  [1m[35mUser Load (1.0ms)[0m  SELECT `users`.* FROM `users` WHERE `users`.`id` = 1 LIMIT 1
  [1m[36m (0.5ms)[0m  [1mBEGIN[0m
  [1m[35mSQL (1.2ms)[0m  INSERT INTO `collection_restaurants` (`collection_id`, `order`, `restaurant_id`) VALUES (3, NULL, 1)
  [1m[36m (1.0ms)[0m  [1mCOMMIT[0m
Completed 500 Internal Server Error in 12ms

RuntimeError (Called id for nil, which would mistakenly be 8 -- if you really wanted the id of nil, use object_id):
  app/controllers/collections_controller.rb:195:in `block (2 levels) in add_restaurant'
  app/controllers/collections_controller.rb:193:in `add_restaurant'


  Rendered /Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_dispatch/middleware/templates/rescues/_trace.erb (1.8ms)
  Rendered /Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_dispatch/middleware/templates/rescues/_request_and_response.erb (1.5ms)
  Rendered /Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_dispatch/middleware/templates/rescues/diagnostics.erb within rescues/layout (48.4ms)


Started GET "/collection/3/edit" for 127.0.0.1 at 2016-01-18 12:11:00 +0100
Processing by CollectionsController#edit_collection as HTML
  Parameters: {"id"=>"3"}
  [1m[35mUser Load (0.2ms)[0m  SELECT `users`.* FROM `users` WHERE `users`.`id` = 1 LIMIT 1
  [1m[36mCollection Load (0.2ms)[0m  [1mSELECT `collections`.* FROM `collections` WHERE `collections`.`id` = 3 LIMIT 1[0m
  [1m[35m (0.2ms)[0m  SELECT COUNT(*) FROM `filter_types` WHERE (code = 'features')
  [1m[36m (0.2ms)[0m  [1mSELECT COUNT(*) FROM `filters` WHERE (code = 'offer')[0m
  [1m[35mCollectionImage Load (0.2ms)[0m  SELECT `collection_images`.* FROM `collection_images` WHERE (collection_id = 3) LIMIT 1
  Rendered collections/_collection_form.html.erb (36.0ms)
  [1m[36mRestaurant Load (3.4ms)[0m  [1mSELECT `restaurants`.* FROM `restaurants` WHERE `restaurants`.`disabled` = 0[0m
  Rendered collections/_collection_restaurants_form.html.erb (95.0ms)
  Rendered collections/edit_collection.html.erb within layouts/admin (133.1ms)
Completed 200 OK in 394ms (Views: 136.6ms | ActiveRecord: 18.8ms)


Started POST "/admin/collections/add_restaurant/3" for 127.0.0.1 at 2016-01-18 12:11:07 +0100
Processing by CollectionsController#add_restaurant as */*
  Parameters: {"utf8"=>"âœ“", "authenticity_token"=>"cajmPApKUoLTDgL4nYG/B3GUhj8fezKDJZWxee28cyM=", "collection_restaurant"=>{"restaurant_id"=>"1"}, "id"=>"3"}
  [1m[35mUser Load (0.5ms)[0m  SELECT `users`.* FROM `users` WHERE `users`.`id` = 1 LIMIT 1
  [1m[36m (3.0ms)[0m  [1mBEGIN[0m
  [1m[35mSQL (0.4ms)[0m  INSERT INTO `collection_restaurants` (`collection_id`, `order`, `restaurant_id`) VALUES (3, NULL, 1)
  [1m[36m (0.8ms)[0m  [1mCOMMIT[0m
Redirected to http://localhost:3000/collection/8/edit
Completed 302 Found in 17ms (ActiveRecord: 4.7ms)


Started GET "/collection/8/edit" for 127.0.0.1 at 2016-01-18 12:11:07 +0100
Processing by CollectionsController#edit_collection as */*
  Parameters: {"id"=>"8"}
  [1m[35mUser Load (0.5ms)[0m  SELECT `users`.* FROM `users` WHERE `users`.`id` = 1 LIMIT 1
  [1m[36mCollection Load (0.4ms)[0m  [1mSELECT `collections`.* FROM `collections` WHERE `collections`.`id` = 8 LIMIT 1[0m
Completed 500 Internal Server Error in 7ms

ActiveRecord::RecordNotFound (Couldn't find Collection with id=8):
  app/controllers/collections_controller.rb:111:in `edit_collection'


  Rendered /Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_dispatch/middleware/templates/rescues/_trace.erb (1.9ms)
  Rendered /Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_dispatch/middleware/templates/rescues/_request_and_response.erb (1.9ms)
  Rendered /Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_dispatch/middleware/templates/rescues/diagnostics.erb within rescues/layout (56.1ms)


Started GET "/collection/3/edit" for 127.0.0.1 at 2016-01-18 12:11:42 +0100
Processing by CollectionsController#edit_collection as HTML
  Parameters: {"id"=>"3"}
  [1m[35mUser Load (0.3ms)[0m  SELECT `users`.* FROM `users` WHERE `users`.`id` = 1 LIMIT 1
  [1m[36mCollection Load (0.2ms)[0m  [1mSELECT `collections`.* FROM `collections` WHERE `collections`.`id` = 3 LIMIT 1[0m
  [1m[35m (0.2ms)[0m  SELECT COUNT(*) FROM `filter_types` WHERE (code = 'features')
  [1m[36m (0.2ms)[0m  [1mSELECT COUNT(*) FROM `filters` WHERE (code = 'offer')[0m
  [1m[35mCollectionImage Load (0.2ms)[0m  SELECT `collection_images`.* FROM `collection_images` WHERE (collection_id = 3) LIMIT 1
  Rendered collections/_collection_form.html.erb (40.8ms)
  [1m[36mRestaurant Load (3.4ms)[0m  [1mSELECT `restaurants`.* FROM `restaurants` WHERE `restaurants`.`disabled` = 0[0m
  Rendered collections/_collection_restaurants_form.html.erb (102.4ms)
  Rendered collections/edit_collection.html.erb within layouts/admin (145.3ms)
Completed 200 OK in 459ms (Views: 150.9ms | ActiveRecord: 19.3ms)


Started POST "/admin/collections/add_restaurant/3" for 127.0.0.1 at 2016-01-18 12:11:46 +0100
Processing by CollectionsController#add_restaurant as */*
  Parameters: {"utf8"=>"âœ“", "authenticity_token"=>"cajmPApKUoLTDgL4nYG/B3GUhj8fezKDJZWxee28cyM=", "collection_restaurant"=>{"restaurant_id"=>"1"}, "id"=>"3"}
  [1m[35mUser Load (5.7ms)[0m  SELECT `users`.* FROM `users` WHERE `users`.`id` = 1 LIMIT 1
  [1m[36m (0.7ms)[0m  [1mBEGIN[0m
  [1m[35mSQL (1.3ms)[0m  INSERT INTO `collection_restaurants` (`collection_id`, `order`, `restaurant_id`) VALUES (3, NULL, 1)
  [1m[36m (0.8ms)[0m  [1mCOMMIT[0m
Redirected to http://localhost:3000/collection/3/edit
Completed 302 Found in 17ms (ActiveRecord: 8.6ms)


Started GET "/collection/3/edit" for 127.0.0.1 at 2016-01-18 12:11:46 +0100
Processing by CollectionsController#edit_collection as */*
  Parameters: {"id"=>"3"}
  [1m[35mUser Load (0.7ms)[0m  SELECT `users`.* FROM `users` WHERE `users`.`id` = 1 LIMIT 1
  [1m[36mCollection Load (0.2ms)[0m  [1mSELECT `collections`.* FROM `collections` WHERE `collections`.`id` = 3 LIMIT 1[0m
  [1m[35mCollectionImage Load (0.3ms)[0m  SELECT `collection_images`.* FROM `collection_images` WHERE (collection_id = 3) LIMIT 1
  Rendered collections/_collection_form.html.erb (9.5ms)
  [1m[36mRestaurant Load (5.0ms)[0m  [1mSELECT `restaurants`.* FROM `restaurants` WHERE `restaurants`.`disabled` = 0[0m
  Rendered collections/_collection_restaurants_form.html.erb (94.5ms)
  Rendered collections/edit_collection.html.erb within layouts/admin (108.2ms)
Completed 200 OK in 135ms (Views: 125.6ms | ActiveRecord: 6.2ms)


Started POST "/admin/collections/add_restaurant/3" for 127.0.0.1 at 2016-01-18 12:18:32 +0100

SyntaxError (/Users/kevinmuller/halalgems_backend/app/controllers/collections_controller.rb:192: syntax error, unexpected ')', expecting ']'):
  activesupport (3.2.8) lib/active_support/dependencies.rb:469:in `load'
  activesupport (3.2.8) lib/active_support/dependencies.rb:469:in `block in load_file'
  activesupport (3.2.8) lib/active_support/dependencies.rb:639:in `new_constants_in'
  activesupport (3.2.8) lib/active_support/dependencies.rb:468:in `load_file'
  activesupport (3.2.8) lib/active_support/dependencies.rb:353:in `require_or_load'
  activesupport (3.2.8) lib/active_support/dependencies.rb:502:in `load_missing_constant'
  activesupport (3.2.8) lib/active_support/dependencies.rb:192:in `block in const_missing'
  activesupport (3.2.8) lib/active_support/dependencies.rb:190:in `each'
  activesupport (3.2.8) lib/active_support/dependencies.rb:190:in `const_missing'
  activesupport (3.2.8) lib/active_support/inflector/methods.rb:230:in `block in constantize'
  activesupport (3.2.8) lib/active_support/inflector/methods.rb:229:in `each'
  activesupport (3.2.8) lib/active_support/inflector/methods.rb:229:in `constantize'
  activesupport (3.2.8) lib/active_support/dependencies.rb:554:in `get'
  actionpack (3.2.8) lib/action_dispatch/routing/route_set.rb:69:in `controller_reference'
  actionpack (3.2.8) lib/action_dispatch/routing/route_set.rb:54:in `controller'
  actionpack (3.2.8) lib/action_dispatch/routing/route_set.rb:32:in `call'
  journey (1.0.4) lib/journey/router.rb:68:in `block in call'
  journey (1.0.4) lib/journey/router.rb:56:in `each'
  journey (1.0.4) lib/journey/router.rb:56:in `call'
  actionpack (3.2.8) lib/action_dispatch/routing/route_set.rb:600:in `call'
  omniauth (1.1.4) lib/omniauth/strategy.rb:184:in `call!'
  omniauth (1.1.4) lib/omniauth/strategy.rb:164:in `call'
  newrelic_rpm (3.7.3.204) lib/new_relic/rack/error_collector.rb:55:in `call'
  newrelic_rpm (3.7.3.204) lib/new_relic/rack/agent_hooks.rb:32:in `call'
  newrelic_rpm (3.7.3.204) lib/new_relic/rack/browser_monitoring.rb:27:in `call'
  newrelic_rpm (3.7.3.204) lib/new_relic/rack/developer_mode.rb:45:in `call'
  galetahub-simple_captcha (0.1.5) lib/simple_captcha/middleware.rb:20:in `call'
  /Users/kevinmuller/.rvm/gems/ruby-2.2.4/bundler/gems/client_side_validations-a6a515504520/lib/client_side_validations/middleware.rb:21:in `call'
  warden (1.1.1) lib/warden/manager.rb:35:in `block in call'
  warden (1.1.1) lib/warden/manager.rb:34:in `catch'
  warden (1.1.1) lib/warden/manager.rb:34:in `call'
  actionpack (3.2.8) lib/action_dispatch/middleware/best_standards_support.rb:17:in `call'
  rack (1.4.5) lib/rack/etag.rb:23:in `call'
  rack (1.4.5) lib/rack/conditionalget.rb:35:in `call'
  actionpack (3.2.8) lib/action_dispatch/middleware/head.rb:14:in `call'
  /Users/kevinmuller/.rvm/gems/ruby-2.2.4/bundler/gems/remotipart-aadc29e996c3/lib/remotipart/middleware.rb:27:in `call'
  actionpack (3.2.8) lib/action_dispatch/middleware/params_parser.rb:21:in `call'
  actionpack (3.2.8) lib/action_dispatch/middleware/flash.rb:242:in `call'
  rack (1.4.5) lib/rack/session/abstract/id.rb:210:in `context'
  rack (1.4.5) lib/rack/session/abstract/id.rb:205:in `call'
  actionpack (3.2.8) lib/action_dispatch/middleware/cookies.rb:339:in `call'
  dragonfly (0.9.15) lib/dragonfly/cookie_monster.rb:9:in `call'
  activerecord (3.2.8) lib/active_record/query_cache.rb:64:in `call'
  activerecord (3.2.8) lib/active_record/connection_adapters/abstract/connection_pool.rb:473:in `call'
  actionpack (3.2.8) lib/action_dispatch/middleware/callbacks.rb:28:in `block in call'
  activesupport (3.2.8) lib/active_support/callbacks.rb:405:in `_run__1871245027803988066__call__4207201468600934469__callbacks'
  activesupport (3.2.8) lib/active_support/callbacks.rb:405:in `__run_callback'
  activesupport (3.2.8) lib/active_support/callbacks.rb:385:in `_run_call_callbacks'
  activesupport (3.2.8) lib/active_support/callbacks.rb:81:in `run_callbacks'
  actionpack (3.2.8) lib/action_dispatch/middleware/callbacks.rb:27:in `call'
  actionpack (3.2.8) lib/action_dispatch/middleware/reloader.rb:65:in `call'
  actionpack (3.2.8) lib/action_dispatch/middleware/remote_ip.rb:31:in `call'
  actionpack (3.2.8) lib/action_dispatch/middleware/debug_exceptions.rb:16:in `call'
  actionpack (3.2.8) lib/action_dispatch/middleware/show_exceptions.rb:56:in `call'
  railties (3.2.8) lib/rails/rack/logger.rb:26:in `call_app'
  railties (3.2.8) lib/rails/rack/logger.rb:16:in `call'
  quiet_assets (1.0.3) lib/quiet_assets.rb:23:in `call_with_quiet_assets'
  actionpack (3.2.8) lib/action_dispatch/middleware/request_id.rb:22:in `call'
  rack (1.4.5) lib/rack/methodoverride.rb:21:in `call'
  rack (1.4.5) lib/rack/runtime.rb:17:in `call'
  activesupport (3.2.8) lib/active_support/cache/strategy/local_cache.rb:72:in `call'
  rack (1.4.5) lib/rack/lock.rb:15:in `call'
  actionpack (3.2.8) lib/action_dispatch/middleware/static.rb:62:in `call'
  dragonfly (0.9.15) lib/dragonfly/middleware.rb:13:in `call'
  rack-cache (1.2) lib/rack/cache/context.rb:136:in `forward'
  rack-cache (1.2) lib/rack/cache/context.rb:143:in `pass'
  rack-cache (1.2) lib/rack/cache/context.rb:155:in `invalidate'
  rack-cache (1.2) lib/rack/cache/context.rb:71:in `call!'
  rack-cache (1.2) lib/rack/cache/context.rb:51:in `call'
  railties (3.2.8) lib/rails/engine.rb:479:in `call'
  railties (3.2.8) lib/rails/application.rb:223:in `call'
  rack (1.4.5) lib/rack/content_length.rb:14:in `call'
  railties (3.2.8) lib/rails/rack/log_tailer.rb:17:in `call'
  rack (1.4.5) lib/rack/handler/webrick.rb:59:in `service'
  /Users/kevinmuller/.rvm/rubies/ruby-2.2.4/lib/ruby/2.2.0/webrick/httpserver.rb:138:in `service'
  /Users/kevinmuller/.rvm/rubies/ruby-2.2.4/lib/ruby/2.2.0/webrick/httpserver.rb:94:in `run'
  /Users/kevinmuller/.rvm/rubies/ruby-2.2.4/lib/ruby/2.2.0/webrick/server.rb:294:in `block in start_thread'


  Rendered /Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_dispatch/middleware/templates/rescues/_trace.erb (1.6ms)
  Rendered /Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_dispatch/middleware/templates/rescues/_request_and_response.erb (1.2ms)
  Rendered /Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_dispatch/middleware/templates/rescues/diagnostics.erb within rescues/layout (54.0ms)


Started GET "/collection/3/edit" for 127.0.0.1 at 2016-01-18 12:18:41 +0100

SyntaxError (/Users/kevinmuller/halalgems_backend/app/controllers/collections_controller.rb:192: syntax error, unexpected ')', expecting ']'):
  activesupport (3.2.8) lib/active_support/dependencies.rb:469:in `load'
  activesupport (3.2.8) lib/active_support/dependencies.rb:469:in `block in load_file'
  activesupport (3.2.8) lib/active_support/dependencies.rb:639:in `new_constants_in'
  activesupport (3.2.8) lib/active_support/dependencies.rb:468:in `load_file'
  activesupport (3.2.8) lib/active_support/dependencies.rb:353:in `require_or_load'
  activesupport (3.2.8) lib/active_support/dependencies.rb:502:in `load_missing_constant'
  activesupport (3.2.8) lib/active_support/dependencies.rb:192:in `block in const_missing'
  activesupport (3.2.8) lib/active_support/dependencies.rb:190:in `each'
  activesupport (3.2.8) lib/active_support/dependencies.rb:190:in `const_missing'
  activesupport (3.2.8) lib/active_support/inflector/methods.rb:230:in `block in constantize'
  activesupport (3.2.8) lib/active_support/inflector/methods.rb:229:in `each'
  activesupport (3.2.8) lib/active_support/inflector/methods.rb:229:in `constantize'
  activesupport (3.2.8) lib/active_support/dependencies.rb:554:in `get'
  actionpack (3.2.8) lib/action_dispatch/routing/route_set.rb:69:in `controller_reference'
  actionpack (3.2.8) lib/action_dispatch/routing/route_set.rb:54:in `controller'
  actionpack (3.2.8) lib/action_dispatch/routing/route_set.rb:32:in `call'
  journey (1.0.4) lib/journey/router.rb:68:in `block in call'
  journey (1.0.4) lib/journey/router.rb:56:in `each'
  journey (1.0.4) lib/journey/router.rb:56:in `call'
  actionpack (3.2.8) lib/action_dispatch/routing/route_set.rb:600:in `call'
  omniauth (1.1.4) lib/omniauth/strategy.rb:184:in `call!'
  omniauth (1.1.4) lib/omniauth/strategy.rb:164:in `call'
  newrelic_rpm (3.7.3.204) lib/new_relic/rack/error_collector.rb:55:in `call'
  newrelic_rpm (3.7.3.204) lib/new_relic/rack/agent_hooks.rb:32:in `call'
  newrelic_rpm (3.7.3.204) lib/new_relic/rack/browser_monitoring.rb:27:in `call'
  newrelic_rpm (3.7.3.204) lib/new_relic/rack/developer_mode.rb:45:in `call'
  galetahub-simple_captcha (0.1.5) lib/simple_captcha/middleware.rb:20:in `call'
  /Users/kevinmuller/.rvm/gems/ruby-2.2.4/bundler/gems/client_side_validations-a6a515504520/lib/client_side_validations/middleware.rb:21:in `call'
  warden (1.1.1) lib/warden/manager.rb:35:in `block in call'
  warden (1.1.1) lib/warden/manager.rb:34:in `catch'
  warden (1.1.1) lib/warden/manager.rb:34:in `call'
  actionpack (3.2.8) lib/action_dispatch/middleware/best_standards_support.rb:17:in `call'
  rack (1.4.5) lib/rack/etag.rb:23:in `call'
  rack (1.4.5) lib/rack/conditionalget.rb:25:in `call'
  actionpack (3.2.8) lib/action_dispatch/middleware/head.rb:14:in `call'
  /Users/kevinmuller/.rvm/gems/ruby-2.2.4/bundler/gems/remotipart-aadc29e996c3/lib/remotipart/middleware.rb:27:in `call'
  actionpack (3.2.8) lib/action_dispatch/middleware/params_parser.rb:21:in `call'
  actionpack (3.2.8) lib/action_dispatch/middleware/flash.rb:242:in `call'
  rack (1.4.5) lib/rack/session/abstract/id.rb:210:in `context'
  rack (1.4.5) lib/rack/session/abstract/id.rb:205:in `call'
  actionpack (3.2.8) lib/action_dispatch/middleware/cookies.rb:339:in `call'
  dragonfly (0.9.15) lib/dragonfly/cookie_monster.rb:9:in `call'
  activerecord (3.2.8) lib/active_record/query_cache.rb:64:in `call'
  activerecord (3.2.8) lib/active_record/connection_adapters/abstract/connection_pool.rb:473:in `call'
  actionpack (3.2.8) lib/action_dispatch/middleware/callbacks.rb:28:in `block in call'
  activesupport (3.2.8) lib/active_support/callbacks.rb:405:in `_run__1871245027803988066__call__4207201468600934469__callbacks'
  activesupport (3.2.8) lib/active_support/callbacks.rb:405:in `__run_callback'
  activesupport (3.2.8) lib/active_support/callbacks.rb:385:in `_run_call_callbacks'
  activesupport (3.2.8) lib/active_support/callbacks.rb:81:in `run_callbacks'
  actionpack (3.2.8) lib/action_dispatch/middleware/callbacks.rb:27:in `call'
  actionpack (3.2.8) lib/action_dispatch/middleware/reloader.rb:65:in `call'
  actionpack (3.2.8) lib/action_dispatch/middleware/remote_ip.rb:31:in `call'
  actionpack (3.2.8) lib/action_dispatch/middleware/debug_exceptions.rb:16:in `call'
  actionpack (3.2.8) lib/action_dispatch/middleware/show_exceptions.rb:56:in `call'
  railties (3.2.8) lib/rails/rack/logger.rb:26:in `call_app'
  railties (3.2.8) lib/rails/rack/logger.rb:16:in `call'
  quiet_assets (1.0.3) lib/quiet_assets.rb:23:in `call_with_quiet_assets'
  actionpack (3.2.8) lib/action_dispatch/middleware/request_id.rb:22:in `call'
  rack (1.4.5) lib/rack/methodoverride.rb:21:in `call'
  rack (1.4.5) lib/rack/runtime.rb:17:in `call'
  activesupport (3.2.8) lib/active_support/cache/strategy/local_cache.rb:72:in `call'
  rack (1.4.5) lib/rack/lock.rb:15:in `call'
  actionpack (3.2.8) lib/action_dispatch/middleware/static.rb:62:in `call'
  dragonfly (0.9.15) lib/dragonfly/middleware.rb:13:in `call'
  rack-cache (1.2) lib/rack/cache/context.rb:136:in `forward'
  rack-cache (1.2) lib/rack/cache/context.rb:245:in `fetch'
  rack-cache (1.2) lib/rack/cache/context.rb:185:in `lookup'
  rack-cache (1.2) lib/rack/cache/context.rb:66:in `call!'
  rack-cache (1.2) lib/rack/cache/context.rb:51:in `call'
  railties (3.2.8) lib/rails/engine.rb:479:in `call'
  railties (3.2.8) lib/rails/application.rb:223:in `call'
  rack (1.4.5) lib/rack/content_length.rb:14:in `call'
  railties (3.2.8) lib/rails/rack/log_tailer.rb:17:in `call'
  rack (1.4.5) lib/rack/handler/webrick.rb:59:in `service'
  /Users/kevinmuller/.rvm/rubies/ruby-2.2.4/lib/ruby/2.2.0/webrick/httpserver.rb:138:in `service'
  /Users/kevinmuller/.rvm/rubies/ruby-2.2.4/lib/ruby/2.2.0/webrick/httpserver.rb:94:in `run'
  /Users/kevinmuller/.rvm/rubies/ruby-2.2.4/lib/ruby/2.2.0/webrick/server.rb:294:in `block in start_thread'


  Rendered /Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_dispatch/middleware/templates/rescues/_trace.erb (2.4ms)
  Rendered /Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_dispatch/middleware/templates/rescues/_request_and_response.erb (8.3ms)
  Rendered /Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_dispatch/middleware/templates/rescues/diagnostics.erb within rescues/layout (68.9ms)


Started GET "/collection/3/edit" for 127.0.0.1 at 2016-01-18 12:18:56 +0100
Processing by CollectionsController#edit_collection as HTML
  Parameters: {"id"=>"3"}
  [1m[35mUser Load (0.4ms)[0m  SELECT `users`.* FROM `users` WHERE `users`.`id` = 1 LIMIT 1
  [1m[36mCollection Load (0.2ms)[0m  [1mSELECT `collections`.* FROM `collections` WHERE `collections`.`id` = 3 LIMIT 1[0m
  [1m[35m (0.2ms)[0m  SELECT COUNT(*) FROM `filter_types` WHERE (code = 'features')
  [1m[36m (0.1ms)[0m  [1mSELECT COUNT(*) FROM `filters` WHERE (code = 'offer')[0m
  [1m[35mCollectionImage Load (0.2ms)[0m  SELECT `collection_images`.* FROM `collection_images` WHERE (collection_id = 3) LIMIT 1
  Rendered collections/_collection_form.html.erb (40.6ms)
  [1m[36mRestaurant Load (3.3ms)[0m  [1mSELECT `restaurants`.* FROM `restaurants` WHERE `restaurants`.`disabled` = 0[0m
  Rendered collections/_collection_restaurants_form.html.erb (98.0ms)
  Rendered collections/edit_collection.html.erb within layouts/admin (149.3ms)
Completed 200 OK in 473ms (Views: 162.7ms | ActiveRecord: 18.4ms)


Started POST "/admin/collections/add_restaurant/3" for 127.0.0.1 at 2016-01-18 12:18:59 +0100
Processing by CollectionsController#add_restaurant as */*
  Parameters: {"utf8"=>"âœ“", "authenticity_token"=>"cajmPApKUoLTDgL4nYG/B3GUhj8fezKDJZWxee28cyM=", "collection_restaurant"=>{"restaurant_id"=>"1"}, "id"=>"3"}
  [1m[35mUser Load (1.1ms)[0m  SELECT `users`.* FROM `users` WHERE `users`.`id` = 1 LIMIT 1
Completed 500 Internal Server Error in 9ms

NoMethodError (undefined method `present' for "1":String):
  app/controllers/collections_controller.rb:190:in `add_restaurant'


  Rendered /Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_dispatch/middleware/templates/rescues/_trace.erb (1.6ms)
  Rendered /Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_dispatch/middleware/templates/rescues/_request_and_response.erb (2.8ms)
  Rendered /Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_dispatch/middleware/templates/rescues/diagnostics.erb within rescues/layout (58.9ms)


Started GET "/collection/3/edit" for 127.0.0.1 at 2016-01-18 12:19:12 +0100
Processing by CollectionsController#edit_collection as HTML
  Parameters: {"id"=>"3"}
  [1m[36mUser Load (0.2ms)[0m  [1mSELECT `users`.* FROM `users` WHERE `users`.`id` = 1 LIMIT 1[0m
  [1m[35mCollection Load (0.2ms)[0m  SELECT `collections`.* FROM `collections` WHERE `collections`.`id` = 3 LIMIT 1
  [1m[36m (0.2ms)[0m  [1mSELECT COUNT(*) FROM `filter_types` WHERE (code = 'features')[0m
  [1m[35m (0.2ms)[0m  SELECT COUNT(*) FROM `filters` WHERE (code = 'offer')
  [1m[36mCollectionImage Load (0.2ms)[0m  [1mSELECT `collection_images`.* FROM `collection_images` WHERE (collection_id = 3) LIMIT 1[0m
  Rendered collections/_collection_form.html.erb (59.1ms)
  [1m[35mRestaurant Load (3.8ms)[0m  SELECT `restaurants`.* FROM `restaurants` WHERE `restaurants`.`disabled` = 0
  Rendered collections/_collection_restaurants_form.html.erb (192.5ms)
  Rendered collections/edit_collection.html.erb within layouts/admin (255.3ms)
Completed 200 OK in 609ms (Views: 261.7ms | ActiveRecord: 21.4ms)


Started POST "/admin/collections/add_restaurant/3" for 127.0.0.1 at 2016-01-18 12:19:18 +0100
Processing by CollectionsController#add_restaurant as */*
  Parameters: {"utf8"=>"âœ“", "authenticity_token"=>"cajmPApKUoLTDgL4nYG/B3GUhj8fezKDJZWxee28cyM=", "collection_restaurant"=>{"restaurant_id"=>"1"}, "id"=>"3"}
  [1m[36mUser Load (0.8ms)[0m  [1mSELECT `users`.* FROM `users` WHERE `users`.`id` = 1 LIMIT 1[0m
  [1m[35mCollectionRestaurant Load (3.3ms)[0m  SELECT `collection_restaurants`.* FROM `collection_restaurants` WHERE `collection_restaurants`.`id` IN (0, 3, 1)
Completed 500 Internal Server Error in 15ms

ActiveRecord::RecordNotFound (Couldn't find all CollectionRestaurants with IDs (collection_id = ? AND restaurant_id = ?, 3, 1) (found 0 results, but was looking for 3)):
  app/controllers/collections_controller.rb:192:in `add_restaurant'


  Rendered /Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_dispatch/middleware/templates/rescues/_trace.erb (3.4ms)
  Rendered /Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_dispatch/middleware/templates/rescues/_request_and_response.erb (3.3ms)
  Rendered /Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_dispatch/middleware/templates/rescues/diagnostics.erb within rescues/layout (61.6ms)


Started GET "/collection/3/edit" for 127.0.0.1 at 2016-01-18 12:20:18 +0100
Processing by CollectionsController#edit_collection as HTML
  Parameters: {"id"=>"3"}
  [1m[36mUser Load (0.3ms)[0m  [1mSELECT `users`.* FROM `users` WHERE `users`.`id` = 1 LIMIT 1[0m
  [1m[35mCollection Load (0.2ms)[0m  SELECT `collections`.* FROM `collections` WHERE `collections`.`id` = 3 LIMIT 1
  [1m[36m (0.2ms)[0m  [1mSELECT COUNT(*) FROM `filter_types` WHERE (code = 'features')[0m
  [1m[35m (0.2ms)[0m  SELECT COUNT(*) FROM `filters` WHERE (code = 'offer')
  [1m[36mCollectionImage Load (0.2ms)[0m  [1mSELECT `collection_images`.* FROM `collection_images` WHERE (collection_id = 3) LIMIT 1[0m
  Rendered collections/_collection_form.html.erb (44.0ms)
  [1m[35mRestaurant Load (3.3ms)[0m  SELECT `restaurants`.* FROM `restaurants` WHERE `restaurants`.`disabled` = 0
  Rendered collections/_collection_restaurants_form.html.erb (130.6ms)
  Rendered collections/edit_collection.html.erb within layouts/admin (176.5ms)
Completed 200 OK in 554ms (Views: 183.2ms | ActiveRecord: 19.8ms)


Started POST "/admin/collections/add_restaurant/3" for 127.0.0.1 at 2016-01-18 12:20:22 +0100
Processing by CollectionsController#add_restaurant as */*
  Parameters: {"utf8"=>"âœ“", "authenticity_token"=>"cajmPApKUoLTDgL4nYG/B3GUhj8fezKDJZWxee28cyM=", "collection_restaurant"=>{"restaurant_id"=>"1"}, "id"=>"3"}
  [1m[36mUser Load (4.4ms)[0m  [1mSELECT `users`.* FROM `users` WHERE `users`.`id` = 1 LIMIT 1[0m
  [1m[35m (0.6ms)[0m  BEGIN
  [1m[36mSQL (2.0ms)[0m  [1mINSERT INTO `collection_restaurants` (`collection_id`, `order`, `restaurant_id`) VALUES (3, NULL, 1)[0m
  [1m[35m (1.9ms)[0m  COMMIT
Redirected to http://localhost:3000/collection/3/edit
Completed 302 Found in 22ms (ActiveRecord: 8.9ms)


Started GET "/collection/3/edit" for 127.0.0.1 at 2016-01-18 12:20:22 +0100
Processing by CollectionsController#edit_collection as */*
  Parameters: {"id"=>"3"}
  [1m[36mUser Load (6.0ms)[0m  [1mSELECT `users`.* FROM `users` WHERE `users`.`id` = 1 LIMIT 1[0m
  [1m[35mCollection Load (1.6ms)[0m  SELECT `collections`.* FROM `collections` WHERE `collections`.`id` = 3 LIMIT 1
  [1m[36mCollectionImage Load (0.4ms)[0m  [1mSELECT `collection_images`.* FROM `collection_images` WHERE (collection_id = 3) LIMIT 1[0m
  Rendered collections/_collection_form.html.erb (11.1ms)
  [1m[35mRestaurant Load (7.2ms)[0m  SELECT `restaurants`.* FROM `restaurants` WHERE `restaurants`.`disabled` = 0
  Rendered collections/_collection_restaurants_form.html.erb (113.0ms)
  Rendered collections/edit_collection.html.erb within layouts/admin (126.3ms)
Completed 200 OK in 160ms (Views: 139.8ms | ActiveRecord: 15.3ms)


Started GET "/collection/3/edit" for 127.0.0.1 at 2016-01-18 12:20:28 +0100
Processing by CollectionsController#edit_collection as HTML
  Parameters: {"id"=>"3"}
  [1m[36mUser Load (0.4ms)[0m  [1mSELECT `users`.* FROM `users` WHERE `users`.`id` = 1 LIMIT 1[0m
  [1m[35mCollection Load (0.3ms)[0m  SELECT `collections`.* FROM `collections` WHERE `collections`.`id` = 3 LIMIT 1
  [1m[36mCollectionImage Load (0.4ms)[0m  [1mSELECT `collection_images`.* FROM `collection_images` WHERE (collection_id = 3) LIMIT 1[0m
  Rendered collections/_collection_form.html.erb (9.5ms)
  [1m[35mRestaurant Load (11.1ms)[0m  SELECT `restaurants`.* FROM `restaurants` WHERE `restaurants`.`disabled` = 0
  Rendered collections/_collection_restaurants_form.html.erb (130.2ms)
  Rendered collections/edit_collection.html.erb within layouts/admin (142.9ms)
Completed 200 OK in 161ms (Views: 140.5ms | ActiveRecord: 12.1ms)


Started POST "/admin/collections/add_restaurant/3" for 127.0.0.1 at 2016-01-18 12:20:32 +0100
Processing by CollectionsController#add_restaurant as */*
  Parameters: {"utf8"=>"âœ“", "authenticity_token"=>"cajmPApKUoLTDgL4nYG/B3GUhj8fezKDJZWxee28cyM=", "collection_restaurant"=>{"restaurant_id"=>"1"}, "id"=>"3"}
  [1m[36mUser Load (1.5ms)[0m  [1mSELECT `users`.* FROM `users` WHERE `users`.`id` = 1 LIMIT 1[0m
  [1m[35m (0.6ms)[0m  BEGIN
  [1m[36mSQL (0.9ms)[0m  [1mINSERT INTO `collection_restaurants` (`collection_id`, `order`, `restaurant_id`) VALUES (3, NULL, 1)[0m
  [1m[35m (7.7ms)[0m  COMMIT
Redirected to http://localhost:3000/collection/3/edit
Completed 302 Found in 20ms (ActiveRecord: 10.7ms)


Started GET "/collection/3/edit" for 127.0.0.1 at 2016-01-18 12:20:32 +0100
Processing by CollectionsController#edit_collection as */*
  Parameters: {"id"=>"3"}
  [1m[36mUser Load (0.5ms)[0m  [1mSELECT `users`.* FROM `users` WHERE `users`.`id` = 1 LIMIT 1[0m
  [1m[35mCollection Load (0.2ms)[0m  SELECT `collections`.* FROM `collections` WHERE `collections`.`id` = 3 LIMIT 1
  [1m[36mCollectionImage Load (0.3ms)[0m  [1mSELECT `collection_images`.* FROM `collection_images` WHERE (collection_id = 3) LIMIT 1[0m
  Rendered collections/_collection_form.html.erb (19.1ms)
  [1m[35mRestaurant Load (3.5ms)[0m  SELECT `restaurants`.* FROM `restaurants` WHERE `restaurants`.`disabled` = 0
  Rendered collections/_collection_restaurants_form.html.erb (122.7ms)
  Rendered collections/edit_collection.html.erb within layouts/admin (144.5ms)
Completed 200 OK in 171ms (Views: 160.5ms | ActiveRecord: 4.6ms)


Started GET "/collection/3/edit" for 127.0.0.1 at 2016-01-18 12:21:59 +0100
Processing by CollectionsController#edit_collection as HTML
  Parameters: {"id"=>"3"}
  [1m[36mUser Load (0.5ms)[0m  [1mSELECT `users`.* FROM `users` WHERE `users`.`id` = 1 LIMIT 1[0m
  [1m[35mCollection Load (2.3ms)[0m  SELECT `collections`.* FROM `collections` WHERE `collections`.`id` = 3 LIMIT 1
  [1m[36mCollectionImage Load (0.9ms)[0m  [1mSELECT `collection_images`.* FROM `collection_images` WHERE (collection_id = 3) LIMIT 1[0m
  Rendered collections/_collection_form.html.erb (10.1ms)
  [1m[35mRestaurant Load (8.3ms)[0m  SELECT `restaurants`.* FROM `restaurants` WHERE `restaurants`.`disabled` = 0
  Rendered collections/_collection_restaurants_form.html.erb (122.0ms)
  Rendered collections/edit_collection.html.erb within layouts/admin (135.3ms)
Completed 200 OK in 151ms (Views: 133.0ms | ActiveRecord: 11.9ms)


Started POST "/admin/collections/add_restaurant/3" for 127.0.0.1 at 2016-01-18 12:22:16 +0100
Processing by CollectionsController#add_restaurant as */*
  Parameters: {"utf8"=>"âœ“", "authenticity_token"=>"cajmPApKUoLTDgL4nYG/B3GUhj8fezKDJZWxee28cyM=", "collection_restaurant"=>{"restaurant_id"=>"1"}, "id"=>"3"}
  [1m[36mUser Load (0.3ms)[0m  [1mSELECT `users`.* FROM `users` WHERE `users`.`id` = 1 LIMIT 1[0m
  [1m[35m (0.1ms)[0m  BEGIN
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO `collection_restaurants` (`collection_id`, `order`, `restaurant_id`) VALUES (3, NULL, 1)[0m
  [1m[35m (1.7ms)[0m  COMMIT
Redirected to http://localhost:3000/collection/3/edit
Completed 302 Found in 14ms (ActiveRecord: 2.3ms)


Started GET "/collection/3/edit" for 127.0.0.1 at 2016-01-18 12:22:16 +0100
Processing by CollectionsController#edit_collection as */*
  Parameters: {"id"=>"3"}
  [1m[36mUser Load (0.7ms)[0m  [1mSELECT `users`.* FROM `users` WHERE `users`.`id` = 1 LIMIT 1[0m
  [1m[35mCollection Load (0.4ms)[0m  SELECT `collections`.* FROM `collections` WHERE `collections`.`id` = 3 LIMIT 1
  [1m[36mCollectionImage Load (0.3ms)[0m  [1mSELECT `collection_images`.* FROM `collection_images` WHERE (collection_id = 3) LIMIT 1[0m
  Rendered collections/_collection_form.html.erb (16.0ms)
  [1m[35mRestaurant Load (3.5ms)[0m  SELECT `restaurants`.* FROM `restaurants` WHERE `restaurants`.`disabled` = 0
  Rendered collections/_collection_restaurants_form.html.erb (153.6ms)
  Rendered collections/edit_collection.html.erb within layouts/admin (173.0ms)
Completed 200 OK in 201ms (Views: 188.8ms | ActiveRecord: 4.8ms)


Started GET "/collection/3/edit" for 127.0.0.1 at 2016-01-18 12:23:26 +0100
Processing by CollectionsController#edit_collection as HTML
  Parameters: {"id"=>"3"}
  [1m[36mUser Load (0.3ms)[0m  [1mSELECT `users`.* FROM `users` WHERE `users`.`id` = 1 LIMIT 1[0m
  [1m[35mCollection Load (0.1ms)[0m  SELECT `collections`.* FROM `collections` WHERE `collections`.`id` = 3 LIMIT 1
  [1m[36mCollectionImage Load (0.3ms)[0m  [1mSELECT `collection_images`.* FROM `collection_images` WHERE (collection_id = 3) LIMIT 1[0m
  Rendered collections/_collection_form.html.erb (8.1ms)
  [1m[35mRestaurant Load (9.1ms)[0m  SELECT `restaurants`.* FROM `restaurants` WHERE `restaurants`.`disabled` = 0
  Rendered collections/_collection_restaurants_form.html.erb (93.0ms)
  Rendered collections/edit_collection.html.erb within layouts/admin (104.3ms)
Completed 200 OK in 114ms (Views: 101.6ms | ActiveRecord: 9.8ms)


Started POST "/admin/collections/add_restaurant/3" for 127.0.0.1 at 2016-01-18 12:23:53 +0100
Processing by CollectionsController#add_restaurant as */*
  Parameters: {"utf8"=>"âœ“", "authenticity_token"=>"cajmPApKUoLTDgL4nYG/B3GUhj8fezKDJZWxee28cyM=", "collection_restaurant"=>{"restaurant_id"=>"1"}, "id"=>"3"}
  [1m[36mUser Load (0.3ms)[0m  [1mSELECT `users`.* FROM `users` WHERE `users`.`id` = 1 LIMIT 1[0m
  [1m[35m (0.3ms)[0m  SELECT COUNT(*) FROM `collection_restaurants` WHERE (collection_id = '3' AND restaurant_id = '1')
Completed 500 Internal Server Error in 230ms

ActionView::MissingTemplate (Missing template collections/add_restaurant, application/add_restaurant with {:locale=>[:en], :formats=>[:html, :text, :js, :css, :ics, :csv, :png, :jpeg, :gif, :bmp, :tiff, :mpeg, :xml, :rss, :atom, :yaml, :multipart_form, :url_encoded_form, :json, :pdf, :zip], :handlers=>[:erb, :builder, :coffee, :slim]}. Searched in:
  * "/Users/kevinmuller/halalgems_backend/app/views"
  * "/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/ckeditor-3.7.3/app/views"
  * "/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/devise_mailchimp-0.0.4/app/views"
  * "/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/kaminari-bootstrap-3.0.1/app/views"
  * "/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/bootstrap-kaminari-views-0.0.3/app/views"
  * "/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/kaminari-0.14.1/app/views"
  * "/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/devise-2.0.4/app/views"
):
  actionpack (3.2.8) lib/action_view/path_set.rb:58:in `find'
  actionpack (3.2.8) lib/action_view/lookup_context.rb:109:in `find'
  actionpack (3.2.8) lib/action_view/renderer/abstract_renderer.rb:3:in `find_template'
  actionpack (3.2.8) lib/action_view/renderer/template_renderer.rb:34:in `determine_template'
  newrelic_rpm (3.7.3.204) lib/new_relic/agent/instrumentation/rails3/action_controller.rb:157:in `render_with_newrelic'
  actionpack (3.2.8) lib/action_view/renderer/renderer.rb:36:in `render_template'
  actionpack (3.2.8) lib/action_view/renderer/renderer.rb:17:in `render'
  actionpack (3.2.8) lib/abstract_controller/rendering.rb:110:in `_render_template'
  actionpack (3.2.8) lib/action_controller/metal/streaming.rb:225:in `_render_template'
  actionpack (3.2.8) lib/abstract_controller/rendering.rb:103:in `render_to_body'
  actionpack (3.2.8) lib/action_controller/metal/renderers.rb:28:in `render_to_body'
  actionpack (3.2.8) lib/action_controller/metal/compatibility.rb:50:in `render_to_body'
  actionpack (3.2.8) lib/abstract_controller/rendering.rb:88:in `render'
  actionpack (3.2.8) lib/action_controller/metal/rendering.rb:16:in `render'
  actionpack (3.2.8) lib/action_controller/metal/instrumentation.rb:40:in `block (2 levels) in render'
  activesupport (3.2.8) lib/active_support/core_ext/benchmark.rb:5:in `block in ms'
  /Users/kevinmuller/.rvm/rubies/ruby-2.2.4/lib/ruby/2.2.0/benchmark.rb:303:in `realtime'
  activesupport (3.2.8) lib/active_support/core_ext/benchmark.rb:5:in `ms'
  actionpack (3.2.8) lib/action_controller/metal/instrumentation.rb:40:in `block in render'
  actionpack (3.2.8) lib/action_controller/metal/instrumentation.rb:83:in `cleanup_view_runtime'
  activerecord (3.2.8) lib/active_record/railties/controller_runtime.rb:24:in `cleanup_view_runtime'
  actionpack (3.2.8) lib/action_controller/metal/instrumentation.rb:39:in `render'
  /Users/kevinmuller/.rvm/gems/ruby-2.2.4/bundler/gems/remotipart-aadc29e996c3/lib/remotipart/render_overrides.rb:14:in `render_with_remotipart'
  actionpack (3.2.8) lib/action_controller/metal/implicit_render.rb:10:in `default_render'
  actionpack (3.2.8) lib/action_controller/metal/implicit_render.rb:5:in `send_action'
  actionpack (3.2.8) lib/abstract_controller/base.rb:167:in `process_action'
  actionpack (3.2.8) lib/action_controller/metal/rendering.rb:10:in `process_action'
  actionpack (3.2.8) lib/abstract_controller/callbacks.rb:18:in `block in process_action'
  activesupport (3.2.8) lib/active_support/callbacks.rb:458:in `_run__1878201843038484176__process_action__62597762474239354__callbacks'
  activesupport (3.2.8) lib/active_support/callbacks.rb:405:in `__run_callback'
  activesupport (3.2.8) lib/active_support/callbacks.rb:385:in `_run_process_action_callbacks'
  activesupport (3.2.8) lib/active_support/callbacks.rb:81:in `run_callbacks'
  actionpack (3.2.8) lib/abstract_controller/callbacks.rb:17:in `process_action'
  actionpack (3.2.8) lib/action_controller/metal/rescue.rb:29:in `process_action'
  actionpack (3.2.8) lib/action_controller/metal/instrumentation.rb:30:in `block in process_action'
  activesupport (3.2.8) lib/active_support/notifications.rb:123:in `block in instrument'
  activesupport (3.2.8) lib/active_support/notifications/instrumenter.rb:20:in `instrument'
  activesupport (3.2.8) lib/active_support/notifications.rb:123:in `instrument'
  actionpack (3.2.8) lib/action_controller/metal/instrumentation.rb:29:in `process_action'
  actionpack (3.2.8) lib/action_controller/metal/params_wrapper.rb:207:in `process_action'
  activerecord (3.2.8) lib/active_record/railties/controller_runtime.rb:18:in `process_action'
  newrelic_rpm (3.7.3.204) lib/new_relic/agent/instrumentation/rails3/action_controller.rb:38:in `block in process_action'
  newrelic_rpm (3.7.3.204) lib/new_relic/agent/instrumentation/controller_instrumentation.rb:335:in `perform_action_with_newrelic_trace'
  newrelic_rpm (3.7.3.204) lib/new_relic/agent/instrumentation/rails3/action_controller.rb:37:in `process_action'
  actionpack (3.2.8) lib/abstract_controller/base.rb:121:in `process'
  actionpack (3.2.8) lib/abstract_controller/rendering.rb:45:in `process'
  actionpack (3.2.8) lib/action_controller/metal.rb:203:in `dispatch'
  actionpack (3.2.8) lib/action_controller/metal/rack_delegation.rb:14:in `dispatch'
  actionpack (3.2.8) lib/action_controller/metal.rb:246:in `block in action'
  actionpack (3.2.8) lib/action_dispatch/routing/route_set.rb:73:in `call'
  actionpack (3.2.8) lib/action_dispatch/routing/route_set.rb:73:in `dispatch'
  actionpack (3.2.8) lib/action_dispatch/routing/route_set.rb:36:in `call'
  journey (1.0.4) lib/journey/router.rb:68:in `block in call'
  journey (1.0.4) lib/journey/router.rb:56:in `each'
  journey (1.0.4) lib/journey/router.rb:56:in `call'
  actionpack (3.2.8) lib/action_dispatch/routing/route_set.rb:600:in `call'
  omniauth (1.1.4) lib/omniauth/strategy.rb:184:in `call!'
  omniauth (1.1.4) lib/omniauth/strategy.rb:164:in `call'
  newrelic_rpm (3.7.3.204) lib/new_relic/rack/error_collector.rb:55:in `call'
  newrelic_rpm (3.7.3.204) lib/new_relic/rack/agent_hooks.rb:32:in `call'
  newrelic_rpm (3.7.3.204) lib/new_relic/rack/browser_monitoring.rb:27:in `call'
  newrelic_rpm (3.7.3.204) lib/new_relic/rack/developer_mode.rb:45:in `call'
  galetahub-simple_captcha (0.1.5) lib/simple_captcha/middleware.rb:20:in `call'
  /Users/kevinmuller/.rvm/gems/ruby-2.2.4/bundler/gems/client_side_validations-a6a515504520/lib/client_side_validations/middleware.rb:21:in `call'
  warden (1.1.1) lib/warden/manager.rb:35:in `block in call'
  warden (1.1.1) lib/warden/manager.rb:34:in `catch'
  warden (1.1.1) lib/warden/manager.rb:34:in `call'
  actionpack (3.2.8) lib/action_dispatch/middleware/best_standards_support.rb:17:in `call'
  rack (1.4.5) lib/rack/etag.rb:23:in `call'
  rack (1.4.5) lib/rack/conditionalget.rb:35:in `call'
  actionpack (3.2.8) lib/action_dispatch/middleware/head.rb:14:in `call'
  /Users/kevinmuller/.rvm/gems/ruby-2.2.4/bundler/gems/remotipart-aadc29e996c3/lib/remotipart/middleware.rb:27:in `call'
  actionpack (3.2.8) lib/action_dispatch/middleware/params_parser.rb:21:in `call'
  actionpack (3.2.8) lib/action_dispatch/middleware/flash.rb:242:in `call'
  rack (1.4.5) lib/rack/session/abstract/id.rb:210:in `context'
  rack (1.4.5) lib/rack/session/abstract/id.rb:205:in `call'
  actionpack (3.2.8) lib/action_dispatch/middleware/cookies.rb:339:in `call'
  dragonfly (0.9.15) lib/dragonfly/cookie_monster.rb:9:in `call'
  activerecord (3.2.8) lib/active_record/query_cache.rb:64:in `call'
  activerecord (3.2.8) lib/active_record/connection_adapters/abstract/connection_pool.rb:473:in `call'
  actionpack (3.2.8) lib/action_dispatch/middleware/callbacks.rb:28:in `block in call'
  activesupport (3.2.8) lib/active_support/callbacks.rb:405:in `_run__1871245027803988066__call__4207201468600934469__callbacks'
  activesupport (3.2.8) lib/active_support/callbacks.rb:405:in `__run_callback'
  activesupport (3.2.8) lib/active_support/callbacks.rb:385:in `_run_call_callbacks'
  activesupport (3.2.8) lib/active_support/callbacks.rb:81:in `run_callbacks'
  actionpack (3.2.8) lib/action_dispatch/middleware/callbacks.rb:27:in `call'
  actionpack (3.2.8) lib/action_dispatch/middleware/reloader.rb:65:in `call'
  actionpack (3.2.8) lib/action_dispatch/middleware/remote_ip.rb:31:in `call'
  actionpack (3.2.8) lib/action_dispatch/middleware/debug_exceptions.rb:16:in `call'
  actionpack (3.2.8) lib/action_dispatch/middleware/show_exceptions.rb:56:in `call'
  railties (3.2.8) lib/rails/rack/logger.rb:26:in `call_app'
  railties (3.2.8) lib/rails/rack/logger.rb:16:in `call'
  quiet_assets (1.0.3) lib/quiet_assets.rb:23:in `call_with_quiet_assets'
  actionpack (3.2.8) lib/action_dispatch/middleware/request_id.rb:22:in `call'
  rack (1.4.5) lib/rack/methodoverride.rb:21:in `call'
  rack (1.4.5) lib/rack/runtime.rb:17:in `call'
  activesupport (3.2.8) lib/active_support/cache/strategy/local_cache.rb:72:in `call'
  rack (1.4.5) lib/rack/lock.rb:15:in `call'
  actionpack (3.2.8) lib/action_dispatch/middleware/static.rb:62:in `call'
  dragonfly (0.9.15) lib/dragonfly/middleware.rb:13:in `call'
  rack-cache (1.2) lib/rack/cache/context.rb:136:in `forward'
  rack-cache (1.2) lib/rack/cache/context.rb:143:in `pass'
  rack-cache (1.2) lib/rack/cache/context.rb:155:in `invalidate'
  rack-cache (1.2) lib/rack/cache/context.rb:71:in `call!'
  rack-cache (1.2) lib/rack/cache/context.rb:51:in `call'
  railties (3.2.8) lib/rails/engine.rb:479:in `call'
  railties (3.2.8) lib/rails/application.rb:223:in `call'
  rack (1.4.5) lib/rack/content_length.rb:14:in `call'
  railties (3.2.8) lib/rails/rack/log_tailer.rb:17:in `call'
  rack (1.4.5) lib/rack/handler/webrick.rb:59:in `service'
  /Users/kevinmuller/.rvm/rubies/ruby-2.2.4/lib/ruby/2.2.0/webrick/httpserver.rb:138:in `service'
  /Users/kevinmuller/.rvm/rubies/ruby-2.2.4/lib/ruby/2.2.0/webrick/httpserver.rb:94:in `run'
  /Users/kevinmuller/.rvm/rubies/ruby-2.2.4/lib/ruby/2.2.0/webrick/server.rb:294:in `block in start_thread'


  Rendered /Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_dispatch/middleware/templates/rescues/missing_template.erb within rescues/layout (0.6ms)


Started GET "/collection/3/edit" for 127.0.0.1 at 2016-01-18 12:59:53 +0100
Processing by CollectionsController#edit_collection as HTML
  Parameters: {"id"=>"3"}
  [1m[36mUser Load (0.3ms)[0m  [1mSELECT `users`.* FROM `users` WHERE `users`.`id` = 1 LIMIT 1[0m
  [1m[35m (0.2ms)[0m  BEGIN
  [1m[36m (0.2ms)[0m  [1mCOMMIT[0m
Completed 401 Unauthorized in 145ms


Started GET "/collection/3/edit" for 127.0.0.1 at 2016-01-18 12:59:53 +0100
Processing by CollectionsController#edit_collection as HTML
  Parameters: {"id"=>"3"}
Completed 401 Unauthorized in 1ms


Started GET "/users/sign_in" for 127.0.0.1 at 2016-01-18 12:59:53 +0100
Processing by SessionsController#new as HTML
  Rendered sessions/new.html.slim within layouts/application (2.7ms)
  Rendered layouts/_header.html.erb (2.2ms)
  Rendered layouts/_main_menu.html.slim (0.6ms)
  Rendered layouts/_sub_main_menu.html.slim (0.0ms)
  Rendered layouts/_flash_messages.html.erb (0.2ms)
  [1m[35mBasicsPage Load (0.5ms)[0m  SELECT `basics_pages`.* FROM `basics_pages` WHERE `basics_pages`.`page_name` = 'Footer' LIMIT 1
  Rendered layouts/_footer.html.slim (35.4ms)
Completed 200 OK in 102ms (Views: 98.2ms | ActiveRecord: 2.6ms)


Started POST "/users/sign_in" for 127.0.0.1 at 2016-01-18 12:59:58 +0100
Processing by SessionsController#create as HTML
  Parameters: {"utf8"=>"âœ“", "authenticity_token"=>"cajmPApKUoLTDgL4nYG/B3GUhj8fezKDJZWxee28cyM=", "user"=>{"email"=>"kevin.muller1220@gmail.com", "password"=>"[FILTERED]"}, "button"=>""}
  [1m[36mUser Load (0.3ms)[0m  [1mSELECT `users`.* FROM `users` WHERE `users`.`email` = 'kevin.muller1220@gmail.com' LIMIT 1[0m
  [1m[35m (0.3ms)[0m  BEGIN
  [1m[36m (0.1ms)[0m  [1mCOMMIT[0m
  [1m[35m (0.3ms)[0m  BEGIN
  [1m[36m (0.3ms)[0m  [1mUPDATE `users` SET `last_sign_in_at` = '2016-01-18 10:57:14', `current_sign_in_at` = '2016-01-18 11:59:58', `sign_in_count` = 7, `updated_at` = '2016-01-18 11:59:58' WHERE `users`.`id` = 1[0m
  [1m[35m (1.8ms)[0m  COMMIT
Redirected to http://localhost:3000/admin
Completed 302 Found in 86ms (ActiveRecord: 3.2ms)


Started GET "/admin" for 127.0.0.1 at 2016-01-18 12:59:58 +0100
  [1m[36m (2.4ms)[0m  [1mSELECT COUNT(*) FROM `filter_types` WHERE (code = 'features')[0m
  [1m[35m (0.3ms)[0m  SELECT COUNT(*) FROM `filters` WHERE (code = 'offer')
Processing by RestaurantsController#index as HTML
  [1m[36mUser Load (0.6ms)[0m  [1mSELECT `users`.* FROM `users` WHERE `users`.`id` = 1 LIMIT 1[0m
  Rendered shared/_restaurant_manage_tabs.html.erb (1.2ms)
  Rendered restaurants/_condition_fields.html.erb (19.4ms)
  [1m[35mRestaurant Load (1.2ms)[0m  SELECT `restaurants`.* FROM `restaurants` ORDER BY disabled ASC,created_at DESC LIMIT 12 OFFSET 0
  [1m[36mPhoto Load (0.6ms)[0m  [1mSELECT `photos`.* FROM `photos` WHERE (restaurant_id = 876 and cover = true and status = 1) LIMIT 1[0m
  [1m[35mPhoto Load (0.6ms)[0m  SELECT `photos`.* FROM `photos` WHERE `photos`.`restaurant_id` = 876 AND `photos`.`status` = 1 ORDER BY restaurant_id ASC, created_at DESC LIMIT 1
  [1m[36mPhoto Load (0.5ms)[0m  [1mSELECT `photos`.* FROM `photos` WHERE (restaurant_id = 851 and cover = true and status = 1) LIMIT 1[0m
  [1m[35mPhoto Load (0.3ms)[0m  SELECT `photos`.* FROM `photos` WHERE `photos`.`restaurant_id` = 851 AND `photos`.`status` = 1 ORDER BY restaurant_id ASC, created_at DESC LIMIT 1
  [1m[36mPhoto Load (0.4ms)[0m  [1mSELECT `photos`.* FROM `photos` WHERE (restaurant_id = 693 and cover = true and status = 1) LIMIT 1[0m
  [1m[35mPhoto Load (0.3ms)[0m  SELECT `photos`.* FROM `photos` WHERE `photos`.`restaurant_id` = 693 AND `photos`.`status` = 1 ORDER BY restaurant_id ASC, created_at DESC LIMIT 1
  [1m[36mPhoto Load (0.3ms)[0m  [1mSELECT `photos`.* FROM `photos` WHERE (restaurant_id = 686 and cover = true and status = 1) LIMIT 1[0m
  [1m[35mPhoto Load (0.3ms)[0m  SELECT `photos`.* FROM `photos` WHERE `photos`.`restaurant_id` = 686 AND `photos`.`status` = 1 ORDER BY restaurant_id ASC, created_at DESC LIMIT 1
  [1m[36mPhoto Load (0.5ms)[0m  [1mSELECT `photos`.* FROM `photos` WHERE (restaurant_id = 669 and cover = true and status = 1) LIMIT 1[0m
  [1m[35mPhoto Load (0.3ms)[0m  SELECT `photos`.* FROM `photos` WHERE `photos`.`restaurant_id` = 669 AND `photos`.`status` = 1 ORDER BY restaurant_id ASC, created_at DESC LIMIT 1
  [1m[36mPhoto Load (0.5ms)[0m  [1mSELECT `photos`.* FROM `photos` WHERE (restaurant_id = 251 and cover = true and status = 1) LIMIT 1[0m
  [1m[35mPhoto Load (0.4ms)[0m  SELECT `photos`.* FROM `photos` WHERE `photos`.`restaurant_id` = 251 AND `photos`.`status` = 1 ORDER BY restaurant_id ASC, created_at DESC LIMIT 1
  [1m[36mPhoto Load (0.3ms)[0m  [1mSELECT `photos`.* FROM `photos` WHERE (restaurant_id = 250 and cover = true and status = 1) LIMIT 1[0m
  [1m[35mPhoto Load (0.3ms)[0m  SELECT `photos`.* FROM `photos` WHERE `photos`.`restaurant_id` = 250 AND `photos`.`status` = 1 ORDER BY restaurant_id ASC, created_at DESC LIMIT 1
  [1m[36mPhoto Load (0.3ms)[0m  [1mSELECT `photos`.* FROM `photos` WHERE (restaurant_id = 237 and cover = true and status = 1) LIMIT 1[0m
  [1m[35mPhoto Load (0.3ms)[0m  SELECT `photos`.* FROM `photos` WHERE `photos`.`restaurant_id` = 237 AND `photos`.`status` = 1 ORDER BY restaurant_id ASC, created_at DESC LIMIT 1
  [1m[36mPhoto Load (0.5ms)[0m  [1mSELECT `photos`.* FROM `photos` WHERE (restaurant_id = 231 and cover = true and status = 1) LIMIT 1[0m
  [1m[35mPhoto Load (0.3ms)[0m  SELECT `photos`.* FROM `photos` WHERE `photos`.`restaurant_id` = 231 AND `photos`.`status` = 1 ORDER BY restaurant_id ASC, created_at DESC LIMIT 1
  [1m[36mPhoto Load (0.3ms)[0m  [1mSELECT `photos`.* FROM `photos` WHERE (restaurant_id = 222 and cover = true and status = 1) LIMIT 1[0m
  [1m[35mPhoto Load (0.3ms)[0m  SELECT `photos`.* FROM `photos` WHERE `photos`.`restaurant_id` = 222 AND `photos`.`status` = 1 ORDER BY restaurant_id ASC, created_at DESC LIMIT 1
  [1m[36mPhoto Load (0.3ms)[0m  [1mSELECT `photos`.* FROM `photos` WHERE (restaurant_id = 221 and cover = true and status = 1) LIMIT 1[0m
  [1m[35mPhoto Load (0.4ms)[0m  SELECT `photos`.* FROM `photos` WHERE `photos`.`restaurant_id` = 221 AND `photos`.`status` = 1 ORDER BY restaurant_id ASC, created_at DESC LIMIT 1
  [1m[36mPhoto Load (0.3ms)[0m  [1mSELECT `photos`.* FROM `photos` WHERE (restaurant_id = 216 and cover = true and status = 1) LIMIT 1[0m
  [1m[35mPhoto Load (0.3ms)[0m  SELECT `photos`.* FROM `photos` WHERE `photos`.`restaurant_id` = 216 AND `photos`.`status` = 1 ORDER BY restaurant_id ASC, created_at DESC LIMIT 1
  [1m[36m (0.5ms)[0m  [1mSELECT COUNT(*) FROM `restaurants` [0m
  Rendered restaurants/index.html.erb within layouts/admin (244.9ms)
Completed 200 OK in 275ms (Views: 247.8ms | ActiveRecord: 22.9ms)


Started GET "/admin/collections" for 127.0.0.1 at 2016-01-18 13:00:01 +0100
Processing by CollectionsController#index as HTML
  Rendered shared/_restaurant_manage_tabs.html.erb (0.7ms)
  [1m[35mCollection Load (0.8ms)[0m  SELECT `collections`.* FROM `collections` ORDER BY name ASC, created_at DESC LIMIT 12 OFFSET 0
  [1m[36mCollectionImage Load (0.5ms)[0m  [1mSELECT `collection_images`.* FROM `collection_images` WHERE (collection_id = 3) LIMIT 1[0m
  [1m[35mCollectionImage Load (0.4ms)[0m  SELECT `collection_images`.* FROM `collection_images` WHERE (collection_id = 2) LIMIT 1
  [1m[36m (0.2ms)[0m  [1mSELECT COUNT(*) FROM `collections` [0m
  Rendered collections/index.erb within layouts/admin (67.8ms)
  [1m[35mUser Load (0.3ms)[0m  SELECT `users`.* FROM `users` WHERE `users`.`id` = 1 LIMIT 1
Completed 200 OK in 109ms (Views: 98.4ms | ActiveRecord: 7.8ms)


Started GET "/collection/3/edit" for 127.0.0.1 at 2016-01-18 13:00:03 +0100
Processing by CollectionsController#edit_collection as HTML
  Parameters: {"id"=>"3"}
  [1m[36mUser Load (3.5ms)[0m  [1mSELECT `users`.* FROM `users` WHERE `users`.`id` = 1 LIMIT 1[0m
  [1m[35mCollection Load (0.3ms)[0m  SELECT `collections`.* FROM `collections` WHERE `collections`.`id` = 3 LIMIT 1
  [1m[36mCollectionImage Load (0.3ms)[0m  [1mSELECT `collection_images`.* FROM `collection_images` WHERE (collection_id = 3) LIMIT 1[0m
  Rendered collections/_collection_form.html.erb (64.0ms)
  [1m[35mRestaurant Load (3.5ms)[0m  SELECT `restaurants`.* FROM `restaurants` WHERE `restaurants`.`disabled` = 0
  Rendered collections/_collection_restaurants_form.html.erb (144.3ms)
  Rendered collections/edit_collection.html.erb within layouts/admin (234.0ms)
Completed 200 OK in 313ms (Views: 248.1ms | ActiveRecord: 10.2ms)


Started POST "/admin/collections/add_restaurant/3" for 127.0.0.1 at 2016-01-18 13:00:08 +0100
Processing by CollectionsController#add_restaurant as */*
  Parameters: {"utf8"=>"âœ“", "authenticity_token"=>"cajmPApKUoLTDgL4nYG/B3GUhj8fezKDJZWxee28cyM=", "collection_restaurant"=>{"restaurant_id"=>"1"}, "id"=>"3"}
  [1m[36mUser Load (0.5ms)[0m  [1mSELECT `users`.* FROM `users` WHERE `users`.`id` = 1 LIMIT 1[0m
  [1m[35m (1.0ms)[0m  SELECT COUNT(*) FROM `collection_restaurants` WHERE (collection_id = '3' AND restaurant_id = '1')
Completed 500 Internal Server Error in 7ms

ArgumentError (too few arguments):
  app/controllers/collections_controller.rb:206:in `format'
  app/controllers/collections_controller.rb:206:in `add_restaurant'


  Rendered /Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_dispatch/middleware/templates/rescues/_trace.erb (2.5ms)
  Rendered /Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_dispatch/middleware/templates/rescues/_request_and_response.erb (2.3ms)
  Rendered /Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_dispatch/middleware/templates/rescues/diagnostics.erb within rescues/layout (52.6ms)


Started GET "/collection/3/edit" for 127.0.0.1 at 2016-01-18 13:00:19 +0100
Processing by CollectionsController#edit_collection as HTML
  Parameters: {"id"=>"3"}
  [1m[36mUser Load (0.4ms)[0m  [1mSELECT `users`.* FROM `users` WHERE `users`.`id` = 1 LIMIT 1[0m
  [1m[35mCollection Load (0.3ms)[0m  SELECT `collections`.* FROM `collections` WHERE `collections`.`id` = 3 LIMIT 1
  [1m[36mCollectionImage Load (0.3ms)[0m  [1mSELECT `collection_images`.* FROM `collection_images` WHERE (collection_id = 3) LIMIT 1[0m
  Rendered collections/_collection_form.html.erb (52.1ms)
  [1m[35mRestaurant Load (4.0ms)[0m  SELECT `restaurants`.* FROM `restaurants` WHERE `restaurants`.`disabled` = 0
  Rendered collections/_collection_restaurants_form.html.erb (143.9ms)
  Rendered collections/edit_collection.html.erb within layouts/admin (202.2ms)
Completed 200 OK in 223ms (Views: 211.6ms | ActiveRecord: 5.0ms)


Started POST "/admin/collections/add_restaurant/3" for 127.0.0.1 at 2016-01-18 13:00:25 +0100
Processing by CollectionsController#add_restaurant as */*
  Parameters: {"utf8"=>"âœ“", "authenticity_token"=>"cajmPApKUoLTDgL4nYG/B3GUhj8fezKDJZWxee28cyM=", "collection_restaurant"=>{"restaurant_id"=>"1"}, "id"=>"3"}
  [1m[36mUser Load (3.4ms)[0m  [1mSELECT `users`.* FROM `users` WHERE `users`.`id` = 1 LIMIT 1[0m
  [1m[35m (0.3ms)[0m  SELECT COUNT(*) FROM `collection_restaurants` WHERE (collection_id = '3' AND restaurant_id = '1')
Completed 500 Internal Server Error in 10ms

ArgumentError (too few arguments):
  app/controllers/collections_controller.rb:206:in `format'
  app/controllers/collections_controller.rb:206:in `add_restaurant'


  Rendered /Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_dispatch/middleware/templates/rescues/_trace.erb (2.6ms)
  Rendered /Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_dispatch/middleware/templates/rescues/_request_and_response.erb (2.4ms)
  Rendered /Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_dispatch/middleware/templates/rescues/diagnostics.erb within rescues/layout (56.3ms)


Started GET "/collection/3/edit" for 127.0.0.1 at 2016-01-18 13:03:52 +0100
Processing by CollectionsController#edit_collection as HTML
  Parameters: {"id"=>"3"}
  [1m[36mUser Load (0.4ms)[0m  [1mSELECT `users`.* FROM `users` WHERE `users`.`id` = 1 LIMIT 1[0m
  [1m[35mCollection Load (0.4ms)[0m  SELECT `collections`.* FROM `collections` WHERE `collections`.`id` = 3 LIMIT 1
  [1m[36m (0.2ms)[0m  [1mSELECT COUNT(*) FROM `filter_types` WHERE (code = 'features')[0m
  [1m[35m (0.2ms)[0m  SELECT COUNT(*) FROM `filters` WHERE (code = 'offer')
  [1m[36mCollectionImage Load (0.2ms)[0m  [1mSELECT `collection_images`.* FROM `collection_images` WHERE (collection_id = 3) LIMIT 1[0m
  Rendered collections/_collection_form.html.erb (49.0ms)
  [1m[35mRestaurant Load (3.7ms)[0m  SELECT `restaurants`.* FROM `restaurants` WHERE `restaurants`.`disabled` = 0
  Rendered collections/_collection_restaurants_form.html.erb (104.8ms)
  Rendered collections/edit_collection.html.erb within layouts/admin (156.2ms)
Completed 200 OK in 652ms (Views: 160.2ms | ActiveRecord: 20.7ms)


Started POST "/admin/collections/add_restaurant/3" for 127.0.0.1 at 2016-01-18 13:04:01 +0100
Processing by CollectionsController#add_restaurant as */*
  Parameters: {"utf8"=>"âœ“", "authenticity_token"=>"cajmPApKUoLTDgL4nYG/B3GUhj8fezKDJZWxee28cyM=", "collection_restaurant"=>{"restaurant_id"=>"1"}, "id"=>"3"}
  [1m[36mUser Load (1.4ms)[0m  [1mSELECT `users`.* FROM `users` WHERE `users`.`id` = 1 LIMIT 1[0m
  [1m[35m (0.5ms)[0m  SELECT COUNT(*) FROM `collection_restaurants` WHERE (collection_id = '3' AND restaurant_id = '1')
Redirected to http://localhost:3000/collection/3/edit
Completed 500 Internal Server Error in 9ms

ArgumentError (too few arguments):
  app/controllers/collections_controller.rb:209:in `format'
  app/controllers/collections_controller.rb:209:in `add_restaurant'


  Rendered /Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_dispatch/middleware/templates/rescues/_trace.erb (1.9ms)
  Rendered /Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_dispatch/middleware/templates/rescues/_request_and_response.erb (1.4ms)
  Rendered /Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_dispatch/middleware/templates/rescues/diagnostics.erb within rescues/layout (55.2ms)


Started GET "/collection/3/edit" for 127.0.0.1 at 2016-01-18 13:04:43 +0100
Processing by CollectionsController#edit_collection as HTML
  Parameters: {"id"=>"3"}
  [1m[36mUser Load (0.3ms)[0m  [1mSELECT `users`.* FROM `users` WHERE `users`.`id` = 1 LIMIT 1[0m
  [1m[35mCollection Load (0.2ms)[0m  SELECT `collections`.* FROM `collections` WHERE `collections`.`id` = 3 LIMIT 1
  [1m[36m (0.3ms)[0m  [1mSELECT COUNT(*) FROM `filter_types` WHERE (code = 'features')[0m
  [1m[35m (0.2ms)[0m  SELECT COUNT(*) FROM `filters` WHERE (code = 'offer')
  [1m[36mCollectionImage Load (0.2ms)[0m  [1mSELECT `collection_images`.* FROM `collection_images` WHERE (collection_id = 3) LIMIT 1[0m
  Rendered collections/_collection_form.html.erb (47.0ms)
  [1m[35mRestaurant Load (2.9ms)[0m  SELECT `restaurants`.* FROM `restaurants` WHERE `restaurants`.`disabled` = 0
  Rendered collections/_collection_restaurants_form.html.erb (98.5ms)
  Rendered collections/edit_collection.html.erb within layouts/admin (147.8ms)
Completed 200 OK in 431ms (Views: 152.8ms | ActiveRecord: 18.7ms)


Started POST "/admin/collections/add_restaurant/3" for 127.0.0.1 at 2016-01-18 13:04:49 +0100
Processing by CollectionsController#add_restaurant as */*
  Parameters: {"utf8"=>"âœ“", "authenticity_token"=>"cajmPApKUoLTDgL4nYG/B3GUhj8fezKDJZWxee28cyM=", "collection_restaurant"=>{"restaurant_id"=>"1"}, "id"=>"3"}
  [1m[36mUser Load (0.6ms)[0m  [1mSELECT `users`.* FROM `users` WHERE `users`.`id` = 1 LIMIT 1[0m
  [1m[35m (9.1ms)[0m  SELECT COUNT(*) FROM `collection_restaurants` WHERE (collection_id = '3' AND restaurant_id = '1')
Completed 500 Internal Server Error in 101ms

ActionView::MissingTemplate (Missing template collections/add_restaurant, application/add_restaurant with {:locale=>[:en], :formats=>[:html, :text, :js, :css, :ics, :csv, :png, :jpeg, :gif, :bmp, :tiff, :mpeg, :xml, :rss, :atom, :yaml, :multipart_form, :url_encoded_form, :json, :pdf, :zip], :handlers=>[:erb, :builder, :coffee, :slim]}. Searched in:
  * "/Users/kevinmuller/halalgems_backend/app/views"
  * "/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/ckeditor-3.7.3/app/views"
  * "/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/devise_mailchimp-0.0.4/app/views"
  * "/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/kaminari-bootstrap-3.0.1/app/views"
  * "/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/bootstrap-kaminari-views-0.0.3/app/views"
  * "/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/kaminari-0.14.1/app/views"
  * "/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/devise-2.0.4/app/views"
):
  actionpack (3.2.8) lib/action_view/path_set.rb:58:in `find'
  actionpack (3.2.8) lib/action_view/lookup_context.rb:109:in `find'
  actionpack (3.2.8) lib/action_view/renderer/abstract_renderer.rb:3:in `find_template'
  actionpack (3.2.8) lib/action_view/renderer/template_renderer.rb:34:in `determine_template'
  newrelic_rpm (3.7.3.204) lib/new_relic/agent/instrumentation/rails3/action_controller.rb:157:in `render_with_newrelic'
  actionpack (3.2.8) lib/action_view/renderer/renderer.rb:36:in `render_template'
  actionpack (3.2.8) lib/action_view/renderer/renderer.rb:17:in `render'
  actionpack (3.2.8) lib/abstract_controller/rendering.rb:110:in `_render_template'
  actionpack (3.2.8) lib/action_controller/metal/streaming.rb:225:in `_render_template'
  actionpack (3.2.8) lib/abstract_controller/rendering.rb:103:in `render_to_body'
  actionpack (3.2.8) lib/action_controller/metal/renderers.rb:28:in `render_to_body'
  actionpack (3.2.8) lib/action_controller/metal/compatibility.rb:50:in `render_to_body'
  actionpack (3.2.8) lib/abstract_controller/rendering.rb:88:in `render'
  actionpack (3.2.8) lib/action_controller/metal/rendering.rb:16:in `render'
  actionpack (3.2.8) lib/action_controller/metal/instrumentation.rb:40:in `block (2 levels) in render'
  activesupport (3.2.8) lib/active_support/core_ext/benchmark.rb:5:in `block in ms'
  /Users/kevinmuller/.rvm/rubies/ruby-2.2.4/lib/ruby/2.2.0/benchmark.rb:303:in `realtime'
  activesupport (3.2.8) lib/active_support/core_ext/benchmark.rb:5:in `ms'
  actionpack (3.2.8) lib/action_controller/metal/instrumentation.rb:40:in `block in render'
  actionpack (3.2.8) lib/action_controller/metal/instrumentation.rb:83:in `cleanup_view_runtime'
  activerecord (3.2.8) lib/active_record/railties/controller_runtime.rb:24:in `cleanup_view_runtime'
  actionpack (3.2.8) lib/action_controller/metal/instrumentation.rb:39:in `render'
  /Users/kevinmuller/.rvm/gems/ruby-2.2.4/bundler/gems/remotipart-aadc29e996c3/lib/remotipart/render_overrides.rb:14:in `render_with_remotipart'
  actionpack (3.2.8) lib/action_controller/metal/implicit_render.rb:10:in `default_render'
  actionpack (3.2.8) lib/action_controller/metal/implicit_render.rb:5:in `send_action'
  actionpack (3.2.8) lib/abstract_controller/base.rb:167:in `process_action'
  actionpack (3.2.8) lib/action_controller/metal/rendering.rb:10:in `process_action'
  actionpack (3.2.8) lib/abstract_controller/callbacks.rb:18:in `block in process_action'
  activesupport (3.2.8) lib/active_support/callbacks.rb:458:in `_run__1878201843038484176__process_action__62597762474239354__callbacks'
  activesupport (3.2.8) lib/active_support/callbacks.rb:405:in `__run_callback'
  activesupport (3.2.8) lib/active_support/callbacks.rb:385:in `_run_process_action_callbacks'
  activesupport (3.2.8) lib/active_support/callbacks.rb:81:in `run_callbacks'
  actionpack (3.2.8) lib/abstract_controller/callbacks.rb:17:in `process_action'
  actionpack (3.2.8) lib/action_controller/metal/rescue.rb:29:in `process_action'
  actionpack (3.2.8) lib/action_controller/metal/instrumentation.rb:30:in `block in process_action'
  activesupport (3.2.8) lib/active_support/notifications.rb:123:in `block in instrument'
  activesupport (3.2.8) lib/active_support/notifications/instrumenter.rb:20:in `instrument'
  activesupport (3.2.8) lib/active_support/notifications.rb:123:in `instrument'
  actionpack (3.2.8) lib/action_controller/metal/instrumentation.rb:29:in `process_action'
  actionpack (3.2.8) lib/action_controller/metal/params_wrapper.rb:207:in `process_action'
  activerecord (3.2.8) lib/active_record/railties/controller_runtime.rb:18:in `process_action'
  newrelic_rpm (3.7.3.204) lib/new_relic/agent/instrumentation/rails3/action_controller.rb:38:in `block in process_action'
  newrelic_rpm (3.7.3.204) lib/new_relic/agent/instrumentation/controller_instrumentation.rb:335:in `perform_action_with_newrelic_trace'
  newrelic_rpm (3.7.3.204) lib/new_relic/agent/instrumentation/rails3/action_controller.rb:37:in `process_action'
  actionpack (3.2.8) lib/abstract_controller/base.rb:121:in `process'
  actionpack (3.2.8) lib/abstract_controller/rendering.rb:45:in `process'
  actionpack (3.2.8) lib/action_controller/metal.rb:203:in `dispatch'
  actionpack (3.2.8) lib/action_controller/metal/rack_delegation.rb:14:in `dispatch'
  actionpack (3.2.8) lib/action_controller/metal.rb:246:in `block in action'
  actionpack (3.2.8) lib/action_dispatch/routing/route_set.rb:73:in `call'
  actionpack (3.2.8) lib/action_dispatch/routing/route_set.rb:73:in `dispatch'
  actionpack (3.2.8) lib/action_dispatch/routing/route_set.rb:36:in `call'
  journey (1.0.4) lib/journey/router.rb:68:in `block in call'
  journey (1.0.4) lib/journey/router.rb:56:in `each'
  journey (1.0.4) lib/journey/router.rb:56:in `call'
  actionpack (3.2.8) lib/action_dispatch/routing/route_set.rb:600:in `call'
  omniauth (1.1.4) lib/omniauth/strategy.rb:184:in `call!'
  omniauth (1.1.4) lib/omniauth/strategy.rb:164:in `call'
  newrelic_rpm (3.7.3.204) lib/new_relic/rack/error_collector.rb:55:in `call'
  newrelic_rpm (3.7.3.204) lib/new_relic/rack/agent_hooks.rb:32:in `call'
  newrelic_rpm (3.7.3.204) lib/new_relic/rack/browser_monitoring.rb:27:in `call'
  newrelic_rpm (3.7.3.204) lib/new_relic/rack/developer_mode.rb:45:in `call'
  galetahub-simple_captcha (0.1.5) lib/simple_captcha/middleware.rb:20:in `call'
  /Users/kevinmuller/.rvm/gems/ruby-2.2.4/bundler/gems/client_side_validations-a6a515504520/lib/client_side_validations/middleware.rb:21:in `call'
  warden (1.1.1) lib/warden/manager.rb:35:in `block in call'
  warden (1.1.1) lib/warden/manager.rb:34:in `catch'
  warden (1.1.1) lib/warden/manager.rb:34:in `call'
  actionpack (3.2.8) lib/action_dispatch/middleware/best_standards_support.rb:17:in `call'
  rack (1.4.5) lib/rack/etag.rb:23:in `call'
  rack (1.4.5) lib/rack/conditionalget.rb:35:in `call'
  actionpack (3.2.8) lib/action_dispatch/middleware/head.rb:14:in `call'
  /Users/kevinmuller/.rvm/gems/ruby-2.2.4/bundler/gems/remotipart-aadc29e996c3/lib/remotipart/middleware.rb:27:in `call'
  actionpack (3.2.8) lib/action_dispatch/middleware/params_parser.rb:21:in `call'
  actionpack (3.2.8) lib/action_dispatch/middleware/flash.rb:242:in `call'
  rack (1.4.5) lib/rack/session/abstract/id.rb:210:in `context'
  rack (1.4.5) lib/rack/session/abstract/id.rb:205:in `call'
  actionpack (3.2.8) lib/action_dispatch/middleware/cookies.rb:339:in `call'
  dragonfly (0.9.15) lib/dragonfly/cookie_monster.rb:9:in `call'
  activerecord (3.2.8) lib/active_record/query_cache.rb:64:in `call'
  activerecord (3.2.8) lib/active_record/connection_adapters/abstract/connection_pool.rb:473:in `call'
  actionpack (3.2.8) lib/action_dispatch/middleware/callbacks.rb:28:in `block in call'
  activesupport (3.2.8) lib/active_support/callbacks.rb:405:in `_run__1871245027803988066__call__4207201468600934469__callbacks'
  activesupport (3.2.8) lib/active_support/callbacks.rb:405:in `__run_callback'
  activesupport (3.2.8) lib/active_support/callbacks.rb:385:in `_run_call_callbacks'
  activesupport (3.2.8) lib/active_support/callbacks.rb:81:in `run_callbacks'
  actionpack (3.2.8) lib/action_dispatch/middleware/callbacks.rb:27:in `call'
  actionpack (3.2.8) lib/action_dispatch/middleware/reloader.rb:65:in `call'
  actionpack (3.2.8) lib/action_dispatch/middleware/remote_ip.rb:31:in `call'
  actionpack (3.2.8) lib/action_dispatch/middleware/debug_exceptions.rb:16:in `call'
  actionpack (3.2.8) lib/action_dispatch/middleware/show_exceptions.rb:56:in `call'
  railties (3.2.8) lib/rails/rack/logger.rb:26:in `call_app'
  railties (3.2.8) lib/rails/rack/logger.rb:16:in `call'
  quiet_assets (1.0.3) lib/quiet_assets.rb:23:in `call_with_quiet_assets'
  actionpack (3.2.8) lib/action_dispatch/middleware/request_id.rb:22:in `call'
  rack (1.4.5) lib/rack/methodoverride.rb:21:in `call'
  rack (1.4.5) lib/rack/runtime.rb:17:in `call'
  activesupport (3.2.8) lib/active_support/cache/strategy/local_cache.rb:72:in `call'
  rack (1.4.5) lib/rack/lock.rb:15:in `call'
  actionpack (3.2.8) lib/action_dispatch/middleware/static.rb:62:in `call'
  dragonfly (0.9.15) lib/dragonfly/middleware.rb:13:in `call'
  rack-cache (1.2) lib/rack/cache/context.rb:136:in `forward'
  rack-cache (1.2) lib/rack/cache/context.rb:143:in `pass'
  rack-cache (1.2) lib/rack/cache/context.rb:155:in `invalidate'
  rack-cache (1.2) lib/rack/cache/context.rb:71:in `call!'
  rack-cache (1.2) lib/rack/cache/context.rb:51:in `call'
  railties (3.2.8) lib/rails/engine.rb:479:in `call'
  railties (3.2.8) lib/rails/application.rb:223:in `call'
  rack (1.4.5) lib/rack/content_length.rb:14:in `call'
  railties (3.2.8) lib/rails/rack/log_tailer.rb:17:in `call'
  rack (1.4.5) lib/rack/handler/webrick.rb:59:in `service'
  /Users/kevinmuller/.rvm/rubies/ruby-2.2.4/lib/ruby/2.2.0/webrick/httpserver.rb:138:in `service'
  /Users/kevinmuller/.rvm/rubies/ruby-2.2.4/lib/ruby/2.2.0/webrick/httpserver.rb:94:in `run'
  /Users/kevinmuller/.rvm/rubies/ruby-2.2.4/lib/ruby/2.2.0/webrick/server.rb:294:in `block in start_thread'


  Rendered /Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_dispatch/middleware/templates/rescues/missing_template.erb within rescues/layout (1.1ms)


Started GET "/collection/3/edit" for 127.0.0.1 at 2016-01-18 13:06:52 +0100
Processing by CollectionsController#edit_collection as HTML
  Parameters: {"id"=>"3"}
  [1m[36mUser Load (0.9ms)[0m  [1mSELECT `users`.* FROM `users` WHERE `users`.`id` = 1 LIMIT 1[0m
  [1m[35mCollection Load (0.2ms)[0m  SELECT `collections`.* FROM `collections` WHERE `collections`.`id` = 3 LIMIT 1
  [1m[36m (0.2ms)[0m  [1mSELECT COUNT(*) FROM `filter_types` WHERE (code = 'features')[0m
  [1m[35m (0.2ms)[0m  SELECT COUNT(*) FROM `filters` WHERE (code = 'offer')
  [1m[36mCollectionImage Load (0.2ms)[0m  [1mSELECT `collection_images`.* FROM `collection_images` WHERE (collection_id = 3) LIMIT 1[0m
  Rendered collections/_collection_form.html.erb (56.8ms)
  [1m[35mRestaurant Load (3.1ms)[0m  SELECT `restaurants`.* FROM `restaurants` WHERE `restaurants`.`disabled` = 0
  Rendered collections/_collection_restaurants_form.html.erb (116.1ms)
  Rendered collections/edit_collection.html.erb within layouts/admin (175.0ms)
Completed 200 OK in 542ms (Views: 181.6ms | ActiveRecord: 40.9ms)


Started POST "/admin/collections/add_restaurant/3" for 127.0.0.1 at 2016-01-18 13:07:00 +0100
Processing by CollectionsController#add_restaurant as */*
  Parameters: {"utf8"=>"âœ“", "authenticity_token"=>"cajmPApKUoLTDgL4nYG/B3GUhj8fezKDJZWxee28cyM=", "collection_restaurant"=>{"restaurant_id"=>"1"}, "id"=>"3"}
  [1m[36mUser Load (0.4ms)[0m  [1mSELECT `users`.* FROM `users` WHERE `users`.`id` = 1 LIMIT 1[0m
  [1m[35m (0.2ms)[0m  SELECT COUNT(*) FROM `collection_restaurants` WHERE (collection_id = '3' AND restaurant_id = '1')
Completed 500 Internal Server Error in 107ms

ActionView::MissingTemplate (Missing template collections/add_restaurant, application/add_restaurant with {:locale=>[:en], :formats=>[:html, :text, :js, :css, :ics, :csv, :png, :jpeg, :gif, :bmp, :tiff, :mpeg, :xml, :rss, :atom, :yaml, :multipart_form, :url_encoded_form, :json, :pdf, :zip], :handlers=>[:erb, :builder, :coffee, :slim]}. Searched in:
  * "/Users/kevinmuller/halalgems_backend/app/views"
  * "/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/ckeditor-3.7.3/app/views"
  * "/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/devise_mailchimp-0.0.4/app/views"
  * "/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/kaminari-bootstrap-3.0.1/app/views"
  * "/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/bootstrap-kaminari-views-0.0.3/app/views"
  * "/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/kaminari-0.14.1/app/views"
  * "/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/devise-2.0.4/app/views"
):
  actionpack (3.2.8) lib/action_view/path_set.rb:58:in `find'
  actionpack (3.2.8) lib/action_view/lookup_context.rb:109:in `find'
  actionpack (3.2.8) lib/action_view/renderer/abstract_renderer.rb:3:in `find_template'
  actionpack (3.2.8) lib/action_view/renderer/template_renderer.rb:34:in `determine_template'
  newrelic_rpm (3.7.3.204) lib/new_relic/agent/instrumentation/rails3/action_controller.rb:157:in `render_with_newrelic'
  actionpack (3.2.8) lib/action_view/renderer/renderer.rb:36:in `render_template'
  actionpack (3.2.8) lib/action_view/renderer/renderer.rb:17:in `render'
  actionpack (3.2.8) lib/abstract_controller/rendering.rb:110:in `_render_template'
  actionpack (3.2.8) lib/action_controller/metal/streaming.rb:225:in `_render_template'
  actionpack (3.2.8) lib/abstract_controller/rendering.rb:103:in `render_to_body'
  actionpack (3.2.8) lib/action_controller/metal/renderers.rb:28:in `render_to_body'
  actionpack (3.2.8) lib/action_controller/metal/compatibility.rb:50:in `render_to_body'
  actionpack (3.2.8) lib/abstract_controller/rendering.rb:88:in `render'
  actionpack (3.2.8) lib/action_controller/metal/rendering.rb:16:in `render'
  actionpack (3.2.8) lib/action_controller/metal/instrumentation.rb:40:in `block (2 levels) in render'
  activesupport (3.2.8) lib/active_support/core_ext/benchmark.rb:5:in `block in ms'
  /Users/kevinmuller/.rvm/rubies/ruby-2.2.4/lib/ruby/2.2.0/benchmark.rb:303:in `realtime'
  activesupport (3.2.8) lib/active_support/core_ext/benchmark.rb:5:in `ms'
  actionpack (3.2.8) lib/action_controller/metal/instrumentation.rb:40:in `block in render'
  actionpack (3.2.8) lib/action_controller/metal/instrumentation.rb:83:in `cleanup_view_runtime'
  activerecord (3.2.8) lib/active_record/railties/controller_runtime.rb:24:in `cleanup_view_runtime'
  actionpack (3.2.8) lib/action_controller/metal/instrumentation.rb:39:in `render'
  /Users/kevinmuller/.rvm/gems/ruby-2.2.4/bundler/gems/remotipart-aadc29e996c3/lib/remotipart/render_overrides.rb:14:in `render_with_remotipart'
  actionpack (3.2.8) lib/action_controller/metal/implicit_render.rb:10:in `default_render'
  actionpack (3.2.8) lib/action_controller/metal/implicit_render.rb:5:in `send_action'
  actionpack (3.2.8) lib/abstract_controller/base.rb:167:in `process_action'
  actionpack (3.2.8) lib/action_controller/metal/rendering.rb:10:in `process_action'
  actionpack (3.2.8) lib/abstract_controller/callbacks.rb:18:in `block in process_action'
  activesupport (3.2.8) lib/active_support/callbacks.rb:458:in `_run__1878201843038484176__process_action__62597762474239354__callbacks'
  activesupport (3.2.8) lib/active_support/callbacks.rb:405:in `__run_callback'
  activesupport (3.2.8) lib/active_support/callbacks.rb:385:in `_run_process_action_callbacks'
  activesupport (3.2.8) lib/active_support/callbacks.rb:81:in `run_callbacks'
  actionpack (3.2.8) lib/abstract_controller/callbacks.rb:17:in `process_action'
  actionpack (3.2.8) lib/action_controller/metal/rescue.rb:29:in `process_action'
  actionpack (3.2.8) lib/action_controller/metal/instrumentation.rb:30:in `block in process_action'
  activesupport (3.2.8) lib/active_support/notifications.rb:123:in `block in instrument'
  activesupport (3.2.8) lib/active_support/notifications/instrumenter.rb:20:in `instrument'
  activesupport (3.2.8) lib/active_support/notifications.rb:123:in `instrument'
  actionpack (3.2.8) lib/action_controller/metal/instrumentation.rb:29:in `process_action'
  actionpack (3.2.8) lib/action_controller/metal/params_wrapper.rb:207:in `process_action'
  activerecord (3.2.8) lib/active_record/railties/controller_runtime.rb:18:in `process_action'
  newrelic_rpm (3.7.3.204) lib/new_relic/agent/instrumentation/rails3/action_controller.rb:38:in `block in process_action'
  newrelic_rpm (3.7.3.204) lib/new_relic/agent/instrumentation/controller_instrumentation.rb:335:in `perform_action_with_newrelic_trace'
  newrelic_rpm (3.7.3.204) lib/new_relic/agent/instrumentation/rails3/action_controller.rb:37:in `process_action'
  actionpack (3.2.8) lib/abstract_controller/base.rb:121:in `process'
  actionpack (3.2.8) lib/abstract_controller/rendering.rb:45:in `process'
  actionpack (3.2.8) lib/action_controller/metal.rb:203:in `dispatch'
  actionpack (3.2.8) lib/action_controller/metal/rack_delegation.rb:14:in `dispatch'
  actionpack (3.2.8) lib/action_controller/metal.rb:246:in `block in action'
  actionpack (3.2.8) lib/action_dispatch/routing/route_set.rb:73:in `call'
  actionpack (3.2.8) lib/action_dispatch/routing/route_set.rb:73:in `dispatch'
  actionpack (3.2.8) lib/action_dispatch/routing/route_set.rb:36:in `call'
  journey (1.0.4) lib/journey/router.rb:68:in `block in call'
  journey (1.0.4) lib/journey/router.rb:56:in `each'
  journey (1.0.4) lib/journey/router.rb:56:in `call'
  actionpack (3.2.8) lib/action_dispatch/routing/route_set.rb:600:in `call'
  omniauth (1.1.4) lib/omniauth/strategy.rb:184:in `call!'
  omniauth (1.1.4) lib/omniauth/strategy.rb:164:in `call'
  newrelic_rpm (3.7.3.204) lib/new_relic/rack/error_collector.rb:55:in `call'
  newrelic_rpm (3.7.3.204) lib/new_relic/rack/agent_hooks.rb:32:in `call'
  newrelic_rpm (3.7.3.204) lib/new_relic/rack/browser_monitoring.rb:27:in `call'
  newrelic_rpm (3.7.3.204) lib/new_relic/rack/developer_mode.rb:45:in `call'
  galetahub-simple_captcha (0.1.5) lib/simple_captcha/middleware.rb:20:in `call'
  /Users/kevinmuller/.rvm/gems/ruby-2.2.4/bundler/gems/client_side_validations-a6a515504520/lib/client_side_validations/middleware.rb:21:in `call'
  warden (1.1.1) lib/warden/manager.rb:35:in `block in call'
  warden (1.1.1) lib/warden/manager.rb:34:in `catch'
  warden (1.1.1) lib/warden/manager.rb:34:in `call'
  actionpack (3.2.8) lib/action_dispatch/middleware/best_standards_support.rb:17:in `call'
  rack (1.4.5) lib/rack/etag.rb:23:in `call'
  rack (1.4.5) lib/rack/conditionalget.rb:35:in `call'
  actionpack (3.2.8) lib/action_dispatch/middleware/head.rb:14:in `call'
  /Users/kevinmuller/.rvm/gems/ruby-2.2.4/bundler/gems/remotipart-aadc29e996c3/lib/remotipart/middleware.rb:27:in `call'
  actionpack (3.2.8) lib/action_dispatch/middleware/params_parser.rb:21:in `call'
  actionpack (3.2.8) lib/action_dispatch/middleware/flash.rb:242:in `call'
  rack (1.4.5) lib/rack/session/abstract/id.rb:210:in `context'
  rack (1.4.5) lib/rack/session/abstract/id.rb:205:in `call'
  actionpack (3.2.8) lib/action_dispatch/middleware/cookies.rb:339:in `call'
  dragonfly (0.9.15) lib/dragonfly/cookie_monster.rb:9:in `call'
  activerecord (3.2.8) lib/active_record/query_cache.rb:64:in `call'
  activerecord (3.2.8) lib/active_record/connection_adapters/abstract/connection_pool.rb:473:in `call'
  actionpack (3.2.8) lib/action_dispatch/middleware/callbacks.rb:28:in `block in call'
  activesupport (3.2.8) lib/active_support/callbacks.rb:405:in `_run__1871245027803988066__call__4207201468600934469__callbacks'
  activesupport (3.2.8) lib/active_support/callbacks.rb:405:in `__run_callback'
  activesupport (3.2.8) lib/active_support/callbacks.rb:385:in `_run_call_callbacks'
  activesupport (3.2.8) lib/active_support/callbacks.rb:81:in `run_callbacks'
  actionpack (3.2.8) lib/action_dispatch/middleware/callbacks.rb:27:in `call'
  actionpack (3.2.8) lib/action_dispatch/middleware/reloader.rb:65:in `call'
  actionpack (3.2.8) lib/action_dispatch/middleware/remote_ip.rb:31:in `call'
  actionpack (3.2.8) lib/action_dispatch/middleware/debug_exceptions.rb:16:in `call'
  actionpack (3.2.8) lib/action_dispatch/middleware/show_exceptions.rb:56:in `call'
  railties (3.2.8) lib/rails/rack/logger.rb:26:in `call_app'
  railties (3.2.8) lib/rails/rack/logger.rb:16:in `call'
  quiet_assets (1.0.3) lib/quiet_assets.rb:23:in `call_with_quiet_assets'
  actionpack (3.2.8) lib/action_dispatch/middleware/request_id.rb:22:in `call'
  rack (1.4.5) lib/rack/methodoverride.rb:21:in `call'
  rack (1.4.5) lib/rack/runtime.rb:17:in `call'
  activesupport (3.2.8) lib/active_support/cache/strategy/local_cache.rb:72:in `call'
  rack (1.4.5) lib/rack/lock.rb:15:in `call'
  actionpack (3.2.8) lib/action_dispatch/middleware/static.rb:62:in `call'
  dragonfly (0.9.15) lib/dragonfly/middleware.rb:13:in `call'
  rack-cache (1.2) lib/rack/cache/context.rb:136:in `forward'
  rack-cache (1.2) lib/rack/cache/context.rb:143:in `pass'
  rack-cache (1.2) lib/rack/cache/context.rb:155:in `invalidate'
  rack-cache (1.2) lib/rack/cache/context.rb:71:in `call!'
  rack-cache (1.2) lib/rack/cache/context.rb:51:in `call'
  railties (3.2.8) lib/rails/engine.rb:479:in `call'
  railties (3.2.8) lib/rails/application.rb:223:in `call'
  rack (1.4.5) lib/rack/content_length.rb:14:in `call'
  railties (3.2.8) lib/rails/rack/log_tailer.rb:17:in `call'
  rack (1.4.5) lib/rack/handler/webrick.rb:59:in `service'
  /Users/kevinmuller/.rvm/rubies/ruby-2.2.4/lib/ruby/2.2.0/webrick/httpserver.rb:138:in `service'
  /Users/kevinmuller/.rvm/rubies/ruby-2.2.4/lib/ruby/2.2.0/webrick/httpserver.rb:94:in `run'
  /Users/kevinmuller/.rvm/rubies/ruby-2.2.4/lib/ruby/2.2.0/webrick/server.rb:294:in `block in start_thread'


  Rendered /Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_dispatch/middleware/templates/rescues/missing_template.erb within rescues/layout (0.8ms)


Started GET "/collection/3/edit" for 127.0.0.1 at 2016-01-18 13:10:15 +0100
Processing by CollectionsController#edit_collection as HTML
  Parameters: {"id"=>"3"}
  [1m[36mUser Load (0.2ms)[0m  [1mSELECT `users`.* FROM `users` WHERE `users`.`id` = 1 LIMIT 1[0m
  [1m[35mCollection Load (0.5ms)[0m  SELECT `collections`.* FROM `collections` WHERE `collections`.`id` = 3 LIMIT 1
  [1m[36m (0.2ms)[0m  [1mSELECT COUNT(*) FROM `filter_types` WHERE (code = 'features')[0m
  [1m[35m (0.2ms)[0m  SELECT COUNT(*) FROM `filters` WHERE (code = 'offer')
  [1m[36mCollectionImage Load (0.2ms)[0m  [1mSELECT `collection_images`.* FROM `collection_images` WHERE (collection_id = 3) LIMIT 1[0m
  Rendered collections/_collection_form.html.erb (58.9ms)
  [1m[35mRestaurant Load (2.9ms)[0m  SELECT `restaurants`.* FROM `restaurants` WHERE `restaurants`.`disabled` = 0
  Rendered collections/_collection_restaurants_form.html.erb (105.5ms)
  Rendered collections/edit_collection.html.erb within layouts/admin (166.6ms)
Completed 200 OK in 465ms (Views: 174.9ms | ActiveRecord: 19.8ms)


Started POST "/admin/collections/add_restaurant/3" for 127.0.0.1 at 2016-01-18 13:10:27 +0100
Processing by CollectionsController#add_restaurant as */*
  Parameters: {"utf8"=>"âœ“", "authenticity_token"=>"cajmPApKUoLTDgL4nYG/B3GUhj8fezKDJZWxee28cyM=", "collection_restaurant"=>{"restaurant_id"=>"1"}, "id"=>"3"}
  [1m[36mUser Load (0.5ms)[0m  [1mSELECT `users`.* FROM `users` WHERE `users`.`id` = 1 LIMIT 1[0m
  [1m[35m (0.3ms)[0m  SELECT COUNT(*) FROM `collection_restaurants` WHERE (collection_id = '3' AND restaurant_id = '1')
Completed 500 Internal Server Error in 85ms

ActionView::MissingTemplate (Missing template collections/add_restaurant, application/add_restaurant with {:locale=>[:en], :formats=>[:html, :text, :js, :css, :ics, :csv, :png, :jpeg, :gif, :bmp, :tiff, :mpeg, :xml, :rss, :atom, :yaml, :multipart_form, :url_encoded_form, :json, :pdf, :zip], :handlers=>[:erb, :builder, :coffee, :slim]}. Searched in:
  * "/Users/kevinmuller/halalgems_backend/app/views"
  * "/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/ckeditor-3.7.3/app/views"
  * "/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/devise_mailchimp-0.0.4/app/views"
  * "/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/kaminari-bootstrap-3.0.1/app/views"
  * "/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/bootstrap-kaminari-views-0.0.3/app/views"
  * "/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/kaminari-0.14.1/app/views"
  * "/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/devise-2.0.4/app/views"
):
  actionpack (3.2.8) lib/action_view/path_set.rb:58:in `find'
  actionpack (3.2.8) lib/action_view/lookup_context.rb:109:in `find'
  actionpack (3.2.8) lib/action_view/renderer/abstract_renderer.rb:3:in `find_template'
  actionpack (3.2.8) lib/action_view/renderer/template_renderer.rb:34:in `determine_template'
  newrelic_rpm (3.7.3.204) lib/new_relic/agent/instrumentation/rails3/action_controller.rb:157:in `render_with_newrelic'
  actionpack (3.2.8) lib/action_view/renderer/renderer.rb:36:in `render_template'
  actionpack (3.2.8) lib/action_view/renderer/renderer.rb:17:in `render'
  actionpack (3.2.8) lib/abstract_controller/rendering.rb:110:in `_render_template'
  actionpack (3.2.8) lib/action_controller/metal/streaming.rb:225:in `_render_template'
  actionpack (3.2.8) lib/abstract_controller/rendering.rb:103:in `render_to_body'
  actionpack (3.2.8) lib/action_controller/metal/renderers.rb:28:in `render_to_body'
  actionpack (3.2.8) lib/action_controller/metal/compatibility.rb:50:in `render_to_body'
  actionpack (3.2.8) lib/abstract_controller/rendering.rb:88:in `render'
  actionpack (3.2.8) lib/action_controller/metal/rendering.rb:16:in `render'
  actionpack (3.2.8) lib/action_controller/metal/instrumentation.rb:40:in `block (2 levels) in render'
  activesupport (3.2.8) lib/active_support/core_ext/benchmark.rb:5:in `block in ms'
  /Users/kevinmuller/.rvm/rubies/ruby-2.2.4/lib/ruby/2.2.0/benchmark.rb:303:in `realtime'
  activesupport (3.2.8) lib/active_support/core_ext/benchmark.rb:5:in `ms'
  actionpack (3.2.8) lib/action_controller/metal/instrumentation.rb:40:in `block in render'
  actionpack (3.2.8) lib/action_controller/metal/instrumentation.rb:83:in `cleanup_view_runtime'
  activerecord (3.2.8) lib/active_record/railties/controller_runtime.rb:24:in `cleanup_view_runtime'
  actionpack (3.2.8) lib/action_controller/metal/instrumentation.rb:39:in `render'
  /Users/kevinmuller/.rvm/gems/ruby-2.2.4/bundler/gems/remotipart-aadc29e996c3/lib/remotipart/render_overrides.rb:14:in `render_with_remotipart'
  actionpack (3.2.8) lib/action_controller/metal/implicit_render.rb:10:in `default_render'
  actionpack (3.2.8) lib/action_controller/metal/implicit_render.rb:5:in `send_action'
  actionpack (3.2.8) lib/abstract_controller/base.rb:167:in `process_action'
  actionpack (3.2.8) lib/action_controller/metal/rendering.rb:10:in `process_action'
  actionpack (3.2.8) lib/abstract_controller/callbacks.rb:18:in `block in process_action'
  activesupport (3.2.8) lib/active_support/callbacks.rb:458:in `_run__1878201843038484176__process_action__62597762474239354__callbacks'
  activesupport (3.2.8) lib/active_support/callbacks.rb:405:in `__run_callback'
  activesupport (3.2.8) lib/active_support/callbacks.rb:385:in `_run_process_action_callbacks'
  activesupport (3.2.8) lib/active_support/callbacks.rb:81:in `run_callbacks'
  actionpack (3.2.8) lib/abstract_controller/callbacks.rb:17:in `process_action'
  actionpack (3.2.8) lib/action_controller/metal/rescue.rb:29:in `process_action'
  actionpack (3.2.8) lib/action_controller/metal/instrumentation.rb:30:in `block in process_action'
  activesupport (3.2.8) lib/active_support/notifications.rb:123:in `block in instrument'
  activesupport (3.2.8) lib/active_support/notifications/instrumenter.rb:20:in `instrument'
  activesupport (3.2.8) lib/active_support/notifications.rb:123:in `instrument'
  actionpack (3.2.8) lib/action_controller/metal/instrumentation.rb:29:in `process_action'
  actionpack (3.2.8) lib/action_controller/metal/params_wrapper.rb:207:in `process_action'
  activerecord (3.2.8) lib/active_record/railties/controller_runtime.rb:18:in `process_action'
  newrelic_rpm (3.7.3.204) lib/new_relic/agent/instrumentation/rails3/action_controller.rb:38:in `block in process_action'
  newrelic_rpm (3.7.3.204) lib/new_relic/agent/instrumentation/controller_instrumentation.rb:335:in `perform_action_with_newrelic_trace'
  newrelic_rpm (3.7.3.204) lib/new_relic/agent/instrumentation/rails3/action_controller.rb:37:in `process_action'
  actionpack (3.2.8) lib/abstract_controller/base.rb:121:in `process'
  actionpack (3.2.8) lib/abstract_controller/rendering.rb:45:in `process'
  actionpack (3.2.8) lib/action_controller/metal.rb:203:in `dispatch'
  actionpack (3.2.8) lib/action_controller/metal/rack_delegation.rb:14:in `dispatch'
  actionpack (3.2.8) lib/action_controller/metal.rb:246:in `block in action'
  actionpack (3.2.8) lib/action_dispatch/routing/route_set.rb:73:in `call'
  actionpack (3.2.8) lib/action_dispatch/routing/route_set.rb:73:in `dispatch'
  actionpack (3.2.8) lib/action_dispatch/routing/route_set.rb:36:in `call'
  journey (1.0.4) lib/journey/router.rb:68:in `block in call'
  journey (1.0.4) lib/journey/router.rb:56:in `each'
  journey (1.0.4) lib/journey/router.rb:56:in `call'
  actionpack (3.2.8) lib/action_dispatch/routing/route_set.rb:600:in `call'
  omniauth (1.1.4) lib/omniauth/strategy.rb:184:in `call!'
  omniauth (1.1.4) lib/omniauth/strategy.rb:164:in `call'
  newrelic_rpm (3.7.3.204) lib/new_relic/rack/error_collector.rb:55:in `call'
  newrelic_rpm (3.7.3.204) lib/new_relic/rack/agent_hooks.rb:32:in `call'
  newrelic_rpm (3.7.3.204) lib/new_relic/rack/browser_monitoring.rb:27:in `call'
  newrelic_rpm (3.7.3.204) lib/new_relic/rack/developer_mode.rb:45:in `call'
  galetahub-simple_captcha (0.1.5) lib/simple_captcha/middleware.rb:20:in `call'
  /Users/kevinmuller/.rvm/gems/ruby-2.2.4/bundler/gems/client_side_validations-a6a515504520/lib/client_side_validations/middleware.rb:21:in `call'
  warden (1.1.1) lib/warden/manager.rb:35:in `block in call'
  warden (1.1.1) lib/warden/manager.rb:34:in `catch'
  warden (1.1.1) lib/warden/manager.rb:34:in `call'
  actionpack (3.2.8) lib/action_dispatch/middleware/best_standards_support.rb:17:in `call'
  rack (1.4.5) lib/rack/etag.rb:23:in `call'
  rack (1.4.5) lib/rack/conditionalget.rb:35:in `call'
  actionpack (3.2.8) lib/action_dispatch/middleware/head.rb:14:in `call'
  /Users/kevinmuller/.rvm/gems/ruby-2.2.4/bundler/gems/remotipart-aadc29e996c3/lib/remotipart/middleware.rb:27:in `call'
  actionpack (3.2.8) lib/action_dispatch/middleware/params_parser.rb:21:in `call'
  actionpack (3.2.8) lib/action_dispatch/middleware/flash.rb:242:in `call'
  rack (1.4.5) lib/rack/session/abstract/id.rb:210:in `context'
  rack (1.4.5) lib/rack/session/abstract/id.rb:205:in `call'
  actionpack (3.2.8) lib/action_dispatch/middleware/cookies.rb:339:in `call'
  dragonfly (0.9.15) lib/dragonfly/cookie_monster.rb:9:in `call'
  activerecord (3.2.8) lib/active_record/query_cache.rb:64:in `call'
  activerecord (3.2.8) lib/active_record/connection_adapters/abstract/connection_pool.rb:473:in `call'
  actionpack (3.2.8) lib/action_dispatch/middleware/callbacks.rb:28:in `block in call'
  activesupport (3.2.8) lib/active_support/callbacks.rb:405:in `_run__1871245027803988066__call__4207201468600934469__callbacks'
  activesupport (3.2.8) lib/active_support/callbacks.rb:405:in `__run_callback'
  activesupport (3.2.8) lib/active_support/callbacks.rb:385:in `_run_call_callbacks'
  activesupport (3.2.8) lib/active_support/callbacks.rb:81:in `run_callbacks'
  actionpack (3.2.8) lib/action_dispatch/middleware/callbacks.rb:27:in `call'
  actionpack (3.2.8) lib/action_dispatch/middleware/reloader.rb:65:in `call'
  actionpack (3.2.8) lib/action_dispatch/middleware/remote_ip.rb:31:in `call'
  actionpack (3.2.8) lib/action_dispatch/middleware/debug_exceptions.rb:16:in `call'
  actionpack (3.2.8) lib/action_dispatch/middleware/show_exceptions.rb:56:in `call'
  railties (3.2.8) lib/rails/rack/logger.rb:26:in `call_app'
  railties (3.2.8) lib/rails/rack/logger.rb:16:in `call'
  quiet_assets (1.0.3) lib/quiet_assets.rb:23:in `call_with_quiet_assets'
  actionpack (3.2.8) lib/action_dispatch/middleware/request_id.rb:22:in `call'
  rack (1.4.5) lib/rack/methodoverride.rb:21:in `call'
  rack (1.4.5) lib/rack/runtime.rb:17:in `call'
  activesupport (3.2.8) lib/active_support/cache/strategy/local_cache.rb:72:in `call'
  rack (1.4.5) lib/rack/lock.rb:15:in `call'
  actionpack (3.2.8) lib/action_dispatch/middleware/static.rb:62:in `call'
  dragonfly (0.9.15) lib/dragonfly/middleware.rb:13:in `call'
  rack-cache (1.2) lib/rack/cache/context.rb:136:in `forward'
  rack-cache (1.2) lib/rack/cache/context.rb:143:in `pass'
  rack-cache (1.2) lib/rack/cache/context.rb:155:in `invalidate'
  rack-cache (1.2) lib/rack/cache/context.rb:71:in `call!'
  rack-cache (1.2) lib/rack/cache/context.rb:51:in `call'
  railties (3.2.8) lib/rails/engine.rb:479:in `call'
  railties (3.2.8) lib/rails/application.rb:223:in `call'
  rack (1.4.5) lib/rack/content_length.rb:14:in `call'
  railties (3.2.8) lib/rails/rack/log_tailer.rb:17:in `call'
  rack (1.4.5) lib/rack/handler/webrick.rb:59:in `service'
  /Users/kevinmuller/.rvm/rubies/ruby-2.2.4/lib/ruby/2.2.0/webrick/httpserver.rb:138:in `service'
  /Users/kevinmuller/.rvm/rubies/ruby-2.2.4/lib/ruby/2.2.0/webrick/httpserver.rb:94:in `run'
  /Users/kevinmuller/.rvm/rubies/ruby-2.2.4/lib/ruby/2.2.0/webrick/server.rb:294:in `block in start_thread'


  Rendered /Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_dispatch/middleware/templates/rescues/missing_template.erb within rescues/layout (0.9ms)


Started GET "/oriental-kitchen/edit" for 127.0.0.1 at 2016-01-18 13:23:02 +0100
  [1m[36m (0.2ms)[0m  [1mSELECT COUNT(*) FROM `filter_types` WHERE (code = 'features')[0m
  [1m[35m (0.4ms)[0m  SELECT COUNT(*) FROM `filters` WHERE (code = 'offer')
Processing by RestaurantsController#edit as HTML
  Parameters: {"id"=>"oriental-kitchen"}
  [1m[36mUser Load (0.3ms)[0m  [1mSELECT `users`.* FROM `users` WHERE `users`.`id` = 1 LIMIT 1[0m
  [1m[35mRestaurant Load (2.3ms)[0m  SELECT `restaurants`.* FROM `restaurants` WHERE `restaurants`.`slug` = 'oriental-kitchen' LIMIT 1
  [1m[36mSchedule Load (0.7ms)[0m  [1mSELECT `schedules`.* FROM `schedules` WHERE `schedules`.`restaurant_id` = 876 ORDER BY day_of_week ASC[0m
  [1m[35mPhoto Load (0.5ms)[0m  SELECT `photos`.* FROM `photos` WHERE `photos`.`restaurant_id` = 876
  [1m[36mFilter Load (1.6ms)[0m  [1mSELECT `filters`.* FROM `filters` INNER JOIN `filters_restaurants` ON `filters`.`id` = `filters_restaurants`.`filter_id` WHERE `filters_restaurants`.`restaurant_id` = 876 AND `filters`.`code` = 'cuisine'[0m
  [1m[35m (1.3ms)[0m  SELECT `filters`.id FROM `filters` INNER JOIN `filters_restaurants` ON `filters`.`id` = `filters_restaurants`.`filter_id` WHERE `filters_restaurants`.`restaurant_id` = 876
  [1m[36mFilterType Load (0.4ms)[0m  [1mSELECT `filter_types`.* FROM `filter_types` WHERE `filter_types`.`code` = 'hal_status' LIMIT 1[0m
  [1m[35mFilterType Load (0.2ms)[0m  SELECT `filter_types`.* FROM `filter_types` WHERE `filter_types`.`code` = 'price' LIMIT 1
  [1m[36mFilterType Load (0.4ms)[0m  [1mSELECT `filter_types`.* FROM `filter_types` WHERE `filter_types`.`code` = 'cuisine' LIMIT 1[0m
  [1m[35mFilterType Load (0.4ms)[0m  SELECT `filter_types`.* FROM `filter_types` WHERE `filter_types`.`code` = 'alcohol' LIMIT 1
  [1m[36mFilterType Load (0.3ms)[0m  [1mSELECT `filter_types`.* FROM `filter_types` WHERE `filter_types`.`code` = 'features' LIMIT 1[0m
  Rendered restaurants/_googlemap.html.erb (0.3ms)
  [1m[35mFilter Load (0.5ms)[0m  SELECT `filters`.* FROM `filters` WHERE `filters`.`filter_type_id` = 8
  [1m[36mFilter Load (1.9ms)[0m  [1mSELECT `filters`.* FROM `filters` WHERE `filters`.`filter_type_id` = 1 ORDER BY name ASC[0m
  [1m[35mFilter Load (1.2ms)[0m  SELECT `filters`.* FROM `filters` WHERE `filters`.`filter_type_id` = 4
  [1m[36mFilter Load (0.3ms)[0m  [1mSELECT `filters`.* FROM `filters` WHERE `filters`.`filter_type_id` = 6[0m
  [1m[35mFilter Load (2.5ms)[0m  SELECT `filters`.* FROM `filters` WHERE `filters`.`filter_type_id` = 11 AND (code != 'offer')
  Rendered restaurants/_admin_form.html.erb (125.9ms)
  [1m[36mMenu Load (0.5ms)[0m  [1mSELECT `menus`.* FROM `menus` WHERE `menus`.`restaurant_id` = 876[0m
  Rendered restaurants/_upload_menu.html.erb (16.9ms)
  Rendered restaurants/_upload_photos.html.erb (6.9ms)
  Rendered restaurants/edit.html.erb within layouts/admin (157.8ms)
Completed 200 OK in 684ms (Views: 196.4ms | ActiveRecord: 31.0ms)


Started GET "/collection/3/edit" for 127.0.0.1 at 2016-01-18 13:23:06 +0100
Processing by CollectionsController#edit_collection as HTML
  Parameters: {"id"=>"3"}
  [1m[35mUser Load (3.2ms)[0m  SELECT `users`.* FROM `users` WHERE `users`.`id` = 1 LIMIT 1
  [1m[36mCollection Load (0.4ms)[0m  [1mSELECT `collections`.* FROM `collections` WHERE `collections`.`id` = 3 LIMIT 1[0m
  [1m[35mCollectionImage Load (0.2ms)[0m  SELECT `collection_images`.* FROM `collection_images` WHERE (collection_id = 3) LIMIT 1
  Rendered collections/_collection_form.html.erb (61.2ms)
  [1m[36mRestaurant Load (4.3ms)[0m  [1mSELECT `restaurants`.* FROM `restaurants` WHERE `restaurants`.`disabled` = 0[0m
  Rendered collections/_collection_restaurants_form.html.erb (139.3ms)
  Rendered collections/edit_collection.html.erb within layouts/admin (216.1ms)
Completed 200 OK in 401ms (Views: 241.2ms | ActiveRecord: 14.6ms)


Started GET "/photos?r_id=876" for 127.0.0.1 at 2016-01-18 13:23:06 +0100
Processing by PhotosController#index as JSON
  Parameters: {"r_id"=>"876"}
  [1m[35mRestaurant Load (4.9ms)[0m  SELECT `restaurants`.* FROM `restaurants` WHERE `restaurants`.`slug` = '876' LIMIT 1
  [1m[36mRestaurant Load (2.4ms)[0m  [1mSELECT `restaurants`.* FROM `restaurants` WHERE `restaurants`.`id` = 876 LIMIT 1[0m
  [1m[35mPhoto Load (3.9ms)[0m  SELECT `photos`.* FROM `photos` WHERE `photos`.`restaurant_id` = 876
Completed 200 OK in 63ms (Views: 0.2ms | ActiveRecord: 11.2ms)


Started POST "/admin/collections/add_restaurant/3" for 127.0.0.1 at 2016-01-18 13:23:14 +0100
Processing by CollectionsController#add_restaurant as HTML
  Parameters: {"utf8"=>"âœ“", "authenticity_token"=>"cajmPApKUoLTDgL4nYG/B3GUhj8fezKDJZWxee28cyM=", "collection_restaurant"=>{"restaurant_id"=>"1"}, "commit"=>"Add", "id"=>"3"}
  [1m[36mUser Load (0.3ms)[0m  [1mSELECT `users`.* FROM `users` WHERE `users`.`id` = 1 LIMIT 1[0m
  [1m[35m (0.4ms)[0m  SELECT COUNT(*) FROM `collection_restaurants` WHERE (collection_id = '3' AND restaurant_id = '1')
Completed 500 Internal Server Error in 27ms

ActionView::MissingTemplate (Missing template collections/add_restaurant, application/add_restaurant with {:locale=>[:en], :formats=>[:html], :handlers=>[:erb, :builder, :coffee, :slim]}. Searched in:
  * "/Users/kevinmuller/halalgems_backend/app/views"
  * "/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/ckeditor-3.7.3/app/views"
  * "/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/devise_mailchimp-0.0.4/app/views"
  * "/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/kaminari-bootstrap-3.0.1/app/views"
  * "/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/bootstrap-kaminari-views-0.0.3/app/views"
  * "/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/kaminari-0.14.1/app/views"
  * "/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/devise-2.0.4/app/views"
):
  actionpack (3.2.8) lib/action_view/path_set.rb:58:in `find'
  actionpack (3.2.8) lib/action_view/lookup_context.rb:109:in `find'
  actionpack (3.2.8) lib/action_view/renderer/abstract_renderer.rb:3:in `find_template'
  actionpack (3.2.8) lib/action_view/renderer/template_renderer.rb:34:in `determine_template'
  newrelic_rpm (3.7.3.204) lib/new_relic/agent/instrumentation/rails3/action_controller.rb:157:in `render_with_newrelic'
  actionpack (3.2.8) lib/action_view/renderer/renderer.rb:36:in `render_template'
  actionpack (3.2.8) lib/action_view/renderer/renderer.rb:17:in `render'
  actionpack (3.2.8) lib/abstract_controller/rendering.rb:110:in `_render_template'
  actionpack (3.2.8) lib/action_controller/metal/streaming.rb:225:in `_render_template'
  actionpack (3.2.8) lib/abstract_controller/rendering.rb:103:in `render_to_body'
  actionpack (3.2.8) lib/action_controller/metal/renderers.rb:28:in `render_to_body'
  actionpack (3.2.8) lib/action_controller/metal/compatibility.rb:50:in `render_to_body'
  actionpack (3.2.8) lib/abstract_controller/rendering.rb:88:in `render'
  actionpack (3.2.8) lib/action_controller/metal/rendering.rb:16:in `render'
  actionpack (3.2.8) lib/action_controller/metal/instrumentation.rb:40:in `block (2 levels) in render'
  activesupport (3.2.8) lib/active_support/core_ext/benchmark.rb:5:in `block in ms'
  /Users/kevinmuller/.rvm/rubies/ruby-2.2.4/lib/ruby/2.2.0/benchmark.rb:303:in `realtime'
  activesupport (3.2.8) lib/active_support/core_ext/benchmark.rb:5:in `ms'
  actionpack (3.2.8) lib/action_controller/metal/instrumentation.rb:40:in `block in render'
  actionpack (3.2.8) lib/action_controller/metal/instrumentation.rb:83:in `cleanup_view_runtime'
  activerecord (3.2.8) lib/active_record/railties/controller_runtime.rb:24:in `cleanup_view_runtime'
  actionpack (3.2.8) lib/action_controller/metal/instrumentation.rb:39:in `render'
  /Users/kevinmuller/.rvm/gems/ruby-2.2.4/bundler/gems/remotipart-aadc29e996c3/lib/remotipart/render_overrides.rb:14:in `render_with_remotipart'
  actionpack (3.2.8) lib/action_controller/metal/implicit_render.rb:10:in `default_render'
  actionpack (3.2.8) lib/action_controller/metal/implicit_render.rb:5:in `send_action'
  actionpack (3.2.8) lib/abstract_controller/base.rb:167:in `process_action'
  actionpack (3.2.8) lib/action_controller/metal/rendering.rb:10:in `process_action'
  actionpack (3.2.8) lib/abstract_controller/callbacks.rb:18:in `block in process_action'
  activesupport (3.2.8) lib/active_support/callbacks.rb:458:in `_run__1878201843038484176__process_action__62597762474239354__callbacks'
  activesupport (3.2.8) lib/active_support/callbacks.rb:405:in `__run_callback'
  activesupport (3.2.8) lib/active_support/callbacks.rb:385:in `_run_process_action_callbacks'
  activesupport (3.2.8) lib/active_support/callbacks.rb:81:in `run_callbacks'
  actionpack (3.2.8) lib/abstract_controller/callbacks.rb:17:in `process_action'
  actionpack (3.2.8) lib/action_controller/metal/rescue.rb:29:in `process_action'
  actionpack (3.2.8) lib/action_controller/metal/instrumentation.rb:30:in `block in process_action'
  activesupport (3.2.8) lib/active_support/notifications.rb:123:in `block in instrument'
  activesupport (3.2.8) lib/active_support/notifications/instrumenter.rb:20:in `instrument'
  activesupport (3.2.8) lib/active_support/notifications.rb:123:in `instrument'
  actionpack (3.2.8) lib/action_controller/metal/instrumentation.rb:29:in `process_action'
  actionpack (3.2.8) lib/action_controller/metal/params_wrapper.rb:207:in `process_action'
  activerecord (3.2.8) lib/active_record/railties/controller_runtime.rb:18:in `process_action'
  newrelic_rpm (3.7.3.204) lib/new_relic/agent/instrumentation/rails3/action_controller.rb:38:in `block in process_action'
  newrelic_rpm (3.7.3.204) lib/new_relic/agent/instrumentation/controller_instrumentation.rb:335:in `perform_action_with_newrelic_trace'
  newrelic_rpm (3.7.3.204) lib/new_relic/agent/instrumentation/rails3/action_controller.rb:37:in `process_action'
  actionpack (3.2.8) lib/abstract_controller/base.rb:121:in `process'
  actionpack (3.2.8) lib/abstract_controller/rendering.rb:45:in `process'
  actionpack (3.2.8) lib/action_controller/metal.rb:203:in `dispatch'
  actionpack (3.2.8) lib/action_controller/metal/rack_delegation.rb:14:in `dispatch'
  actionpack (3.2.8) lib/action_controller/metal.rb:246:in `block in action'
  actionpack (3.2.8) lib/action_dispatch/routing/route_set.rb:73:in `call'
  actionpack (3.2.8) lib/action_dispatch/routing/route_set.rb:73:in `dispatch'
  actionpack (3.2.8) lib/action_dispatch/routing/route_set.rb:36:in `call'
  journey (1.0.4) lib/journey/router.rb:68:in `block in call'
  journey (1.0.4) lib/journey/router.rb:56:in `each'
  journey (1.0.4) lib/journey/router.rb:56:in `call'
  actionpack (3.2.8) lib/action_dispatch/routing/route_set.rb:600:in `call'
  omniauth (1.1.4) lib/omniauth/strategy.rb:184:in `call!'
  omniauth (1.1.4) lib/omniauth/strategy.rb:164:in `call'
  newrelic_rpm (3.7.3.204) lib/new_relic/rack/error_collector.rb:55:in `call'
  newrelic_rpm (3.7.3.204) lib/new_relic/rack/agent_hooks.rb:32:in `call'
  newrelic_rpm (3.7.3.204) lib/new_relic/rack/browser_monitoring.rb:27:in `call'
  newrelic_rpm (3.7.3.204) lib/new_relic/rack/developer_mode.rb:45:in `call'
  galetahub-simple_captcha (0.1.5) lib/simple_captcha/middleware.rb:20:in `call'
  /Users/kevinmuller/.rvm/gems/ruby-2.2.4/bundler/gems/client_side_validations-a6a515504520/lib/client_side_validations/middleware.rb:21:in `call'
  warden (1.1.1) lib/warden/manager.rb:35:in `block in call'
  warden (1.1.1) lib/warden/manager.rb:34:in `catch'
  warden (1.1.1) lib/warden/manager.rb:34:in `call'
  actionpack (3.2.8) lib/action_dispatch/middleware/best_standards_support.rb:17:in `call'
  rack (1.4.5) lib/rack/etag.rb:23:in `call'
  rack (1.4.5) lib/rack/conditionalget.rb:35:in `call'
  actionpack (3.2.8) lib/action_dispatch/middleware/head.rb:14:in `call'
  /Users/kevinmuller/.rvm/gems/ruby-2.2.4/bundler/gems/remotipart-aadc29e996c3/lib/remotipart/middleware.rb:27:in `call'
  actionpack (3.2.8) lib/action_dispatch/middleware/params_parser.rb:21:in `call'
  actionpack (3.2.8) lib/action_dispatch/middleware/flash.rb:242:in `call'
  rack (1.4.5) lib/rack/session/abstract/id.rb:210:in `context'
  rack (1.4.5) lib/rack/session/abstract/id.rb:205:in `call'
  actionpack (3.2.8) lib/action_dispatch/middleware/cookies.rb:339:in `call'
  dragonfly (0.9.15) lib/dragonfly/cookie_monster.rb:9:in `call'
  activerecord (3.2.8) lib/active_record/query_cache.rb:64:in `call'
  activerecord (3.2.8) lib/active_record/connection_adapters/abstract/connection_pool.rb:473:in `call'
  actionpack (3.2.8) lib/action_dispatch/middleware/callbacks.rb:28:in `block in call'
  activesupport (3.2.8) lib/active_support/callbacks.rb:405:in `_run__1871245027803988066__call__4207201468600934469__callbacks'
  activesupport (3.2.8) lib/active_support/callbacks.rb:405:in `__run_callback'
  activesupport (3.2.8) lib/active_support/callbacks.rb:385:in `_run_call_callbacks'
  activesupport (3.2.8) lib/active_support/callbacks.rb:81:in `run_callbacks'
  actionpack (3.2.8) lib/action_dispatch/middleware/callbacks.rb:27:in `call'
  actionpack (3.2.8) lib/action_dispatch/middleware/reloader.rb:65:in `call'
  actionpack (3.2.8) lib/action_dispatch/middleware/remote_ip.rb:31:in `call'
  actionpack (3.2.8) lib/action_dispatch/middleware/debug_exceptions.rb:16:in `call'
  actionpack (3.2.8) lib/action_dispatch/middleware/show_exceptions.rb:56:in `call'
  railties (3.2.8) lib/rails/rack/logger.rb:26:in `call_app'
  railties (3.2.8) lib/rails/rack/logger.rb:16:in `call'
  quiet_assets (1.0.3) lib/quiet_assets.rb:23:in `call_with_quiet_assets'
  actionpack (3.2.8) lib/action_dispatch/middleware/request_id.rb:22:in `call'
  rack (1.4.5) lib/rack/methodoverride.rb:21:in `call'
  rack (1.4.5) lib/rack/runtime.rb:17:in `call'
  activesupport (3.2.8) lib/active_support/cache/strategy/local_cache.rb:72:in `call'
  rack (1.4.5) lib/rack/lock.rb:15:in `call'
  actionpack (3.2.8) lib/action_dispatch/middleware/static.rb:62:in `call'
  dragonfly (0.9.15) lib/dragonfly/middleware.rb:13:in `call'
  rack-cache (1.2) lib/rack/cache/context.rb:136:in `forward'
  rack-cache (1.2) lib/rack/cache/context.rb:143:in `pass'
  rack-cache (1.2) lib/rack/cache/context.rb:155:in `invalidate'
  rack-cache (1.2) lib/rack/cache/context.rb:71:in `call!'
  rack-cache (1.2) lib/rack/cache/context.rb:51:in `call'
  railties (3.2.8) lib/rails/engine.rb:479:in `call'
  railties (3.2.8) lib/rails/application.rb:223:in `call'
  rack (1.4.5) lib/rack/content_length.rb:14:in `call'
  railties (3.2.8) lib/rails/rack/log_tailer.rb:17:in `call'
  rack (1.4.5) lib/rack/handler/webrick.rb:59:in `service'
  /Users/kevinmuller/.rvm/rubies/ruby-2.2.4/lib/ruby/2.2.0/webrick/httpserver.rb:138:in `service'
  /Users/kevinmuller/.rvm/rubies/ruby-2.2.4/lib/ruby/2.2.0/webrick/httpserver.rb:94:in `run'
  /Users/kevinmuller/.rvm/rubies/ruby-2.2.4/lib/ruby/2.2.0/webrick/server.rb:294:in `block in start_thread'


  Rendered /Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_dispatch/middleware/templates/rescues/missing_template.erb within rescues/layout (1.1ms)


Started GET "/collection/3/edit" for 127.0.0.1 at 2016-01-18 13:23:28 +0100
Processing by CollectionsController#edit_collection as HTML
  Parameters: {"id"=>"3"}
  [1m[36mUser Load (0.5ms)[0m  [1mSELECT `users`.* FROM `users` WHERE `users`.`id` = 1 LIMIT 1[0m
  [1m[35mCollection Load (0.2ms)[0m  SELECT `collections`.* FROM `collections` WHERE `collections`.`id` = 3 LIMIT 1
  [1m[36mCollectionImage Load (0.3ms)[0m  [1mSELECT `collection_images`.* FROM `collection_images` WHERE (collection_id = 3) LIMIT 1[0m
  Rendered collections/_collection_form.html.erb (9.7ms)
  [1m[35mRestaurant Load (3.9ms)[0m  SELECT `restaurants`.* FROM `restaurants` WHERE `restaurants`.`disabled` = 0
  Rendered collections/_collection_restaurants_form.html.erb (97.9ms)
  Rendered collections/edit_collection.html.erb within layouts/admin (119.6ms)
Completed 200 OK in 156ms (Views: 147.0ms | ActiveRecord: 4.9ms)


Started POST "/admin/collections/add_restaurant/3" for 127.0.0.1 at 2016-01-18 13:23:36 +0100
Processing by CollectionsController#add_restaurant as JSON
  Parameters: {"utf8"=>"âœ“", "authenticity_token"=>"cajmPApKUoLTDgL4nYG/B3GUhj8fezKDJZWxee28cyM=", "collection_restaurant"=>{"restaurant_id"=>"1"}, "id"=>"3"}
  [1m[36mUser Load (1.7ms)[0m  [1mSELECT `users`.* FROM `users` WHERE `users`.`id` = 1 LIMIT 1[0m
  [1m[35m (0.3ms)[0m  SELECT COUNT(*) FROM `collection_restaurants` WHERE (collection_id = '3' AND restaurant_id = '1')
Completed 500 Internal Server Error in 99ms

ActionView::MissingTemplate (Missing template collections/add_restaurant, application/add_restaurant with {:locale=>[:en], :formats=>[:json, :js, :html, :text, :js, :css, :ics, :csv, :png, :jpeg, :gif, :bmp, :tiff, :mpeg, :xml, :rss, :atom, :yaml, :multipart_form, :url_encoded_form, :json, :pdf, :zip], :handlers=>[:erb, :builder, :coffee, :slim]}. Searched in:
  * "/Users/kevinmuller/halalgems_backend/app/views"
  * "/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/ckeditor-3.7.3/app/views"
  * "/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/devise_mailchimp-0.0.4/app/views"
  * "/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/kaminari-bootstrap-3.0.1/app/views"
  * "/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/bootstrap-kaminari-views-0.0.3/app/views"
  * "/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/kaminari-0.14.1/app/views"
  * "/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/devise-2.0.4/app/views"
):
  actionpack (3.2.8) lib/action_view/path_set.rb:58:in `find'
  actionpack (3.2.8) lib/action_view/lookup_context.rb:109:in `find'
  actionpack (3.2.8) lib/action_view/renderer/abstract_renderer.rb:3:in `find_template'
  actionpack (3.2.8) lib/action_view/renderer/template_renderer.rb:34:in `determine_template'
  newrelic_rpm (3.7.3.204) lib/new_relic/agent/instrumentation/rails3/action_controller.rb:157:in `render_with_newrelic'
  actionpack (3.2.8) lib/action_view/renderer/renderer.rb:36:in `render_template'
  actionpack (3.2.8) lib/action_view/renderer/renderer.rb:17:in `render'
  actionpack (3.2.8) lib/abstract_controller/rendering.rb:110:in `_render_template'
  actionpack (3.2.8) lib/action_controller/metal/streaming.rb:225:in `_render_template'
  actionpack (3.2.8) lib/abstract_controller/rendering.rb:103:in `render_to_body'
  actionpack (3.2.8) lib/action_controller/metal/renderers.rb:28:in `render_to_body'
  actionpack (3.2.8) lib/action_controller/metal/compatibility.rb:50:in `render_to_body'
  actionpack (3.2.8) lib/abstract_controller/rendering.rb:88:in `render'
  actionpack (3.2.8) lib/action_controller/metal/rendering.rb:16:in `render'
  actionpack (3.2.8) lib/action_controller/metal/instrumentation.rb:40:in `block (2 levels) in render'
  activesupport (3.2.8) lib/active_support/core_ext/benchmark.rb:5:in `block in ms'
  /Users/kevinmuller/.rvm/rubies/ruby-2.2.4/lib/ruby/2.2.0/benchmark.rb:303:in `realtime'
  activesupport (3.2.8) lib/active_support/core_ext/benchmark.rb:5:in `ms'
  actionpack (3.2.8) lib/action_controller/metal/instrumentation.rb:40:in `block in render'
  actionpack (3.2.8) lib/action_controller/metal/instrumentation.rb:83:in `cleanup_view_runtime'
  activerecord (3.2.8) lib/active_record/railties/controller_runtime.rb:24:in `cleanup_view_runtime'
  actionpack (3.2.8) lib/action_controller/metal/instrumentation.rb:39:in `render'
  /Users/kevinmuller/.rvm/gems/ruby-2.2.4/bundler/gems/remotipart-aadc29e996c3/lib/remotipart/render_overrides.rb:14:in `render_with_remotipart'
  actionpack (3.2.8) lib/action_controller/metal/implicit_render.rb:10:in `default_render'
  actionpack (3.2.8) lib/action_controller/metal/implicit_render.rb:5:in `send_action'
  actionpack (3.2.8) lib/abstract_controller/base.rb:167:in `process_action'
  actionpack (3.2.8) lib/action_controller/metal/rendering.rb:10:in `process_action'
  actionpack (3.2.8) lib/abstract_controller/callbacks.rb:18:in `block in process_action'
  activesupport (3.2.8) lib/active_support/callbacks.rb:458:in `_run__1878201843038484176__process_action__62597762474239354__callbacks'
  activesupport (3.2.8) lib/active_support/callbacks.rb:405:in `__run_callback'
  activesupport (3.2.8) lib/active_support/callbacks.rb:385:in `_run_process_action_callbacks'
  activesupport (3.2.8) lib/active_support/callbacks.rb:81:in `run_callbacks'
  actionpack (3.2.8) lib/abstract_controller/callbacks.rb:17:in `process_action'
  actionpack (3.2.8) lib/action_controller/metal/rescue.rb:29:in `process_action'
  actionpack (3.2.8) lib/action_controller/metal/instrumentation.rb:30:in `block in process_action'
  activesupport (3.2.8) lib/active_support/notifications.rb:123:in `block in instrument'
  activesupport (3.2.8) lib/active_support/notifications/instrumenter.rb:20:in `instrument'
  activesupport (3.2.8) lib/active_support/notifications.rb:123:in `instrument'
  actionpack (3.2.8) lib/action_controller/metal/instrumentation.rb:29:in `process_action'
  actionpack (3.2.8) lib/action_controller/metal/params_wrapper.rb:207:in `process_action'
  activerecord (3.2.8) lib/active_record/railties/controller_runtime.rb:18:in `process_action'
  newrelic_rpm (3.7.3.204) lib/new_relic/agent/instrumentation/rails3/action_controller.rb:38:in `block in process_action'
  newrelic_rpm (3.7.3.204) lib/new_relic/agent/instrumentation/controller_instrumentation.rb:335:in `perform_action_with_newrelic_trace'
  newrelic_rpm (3.7.3.204) lib/new_relic/agent/instrumentation/rails3/action_controller.rb:37:in `process_action'
  actionpack (3.2.8) lib/abstract_controller/base.rb:121:in `process'
  actionpack (3.2.8) lib/abstract_controller/rendering.rb:45:in `process'
  actionpack (3.2.8) lib/action_controller/metal.rb:203:in `dispatch'
  actionpack (3.2.8) lib/action_controller/metal/rack_delegation.rb:14:in `dispatch'
  actionpack (3.2.8) lib/action_controller/metal.rb:246:in `block in action'
  actionpack (3.2.8) lib/action_dispatch/routing/route_set.rb:73:in `call'
  actionpack (3.2.8) lib/action_dispatch/routing/route_set.rb:73:in `dispatch'
  actionpack (3.2.8) lib/action_dispatch/routing/route_set.rb:36:in `call'
  journey (1.0.4) lib/journey/router.rb:68:in `block in call'
  journey (1.0.4) lib/journey/router.rb:56:in `each'
  journey (1.0.4) lib/journey/router.rb:56:in `call'
  actionpack (3.2.8) lib/action_dispatch/routing/route_set.rb:600:in `call'
  omniauth (1.1.4) lib/omniauth/strategy.rb:184:in `call!'
  omniauth (1.1.4) lib/omniauth/strategy.rb:164:in `call'
  newrelic_rpm (3.7.3.204) lib/new_relic/rack/error_collector.rb:55:in `call'
  newrelic_rpm (3.7.3.204) lib/new_relic/rack/agent_hooks.rb:32:in `call'
  newrelic_rpm (3.7.3.204) lib/new_relic/rack/browser_monitoring.rb:27:in `call'
  newrelic_rpm (3.7.3.204) lib/new_relic/rack/developer_mode.rb:45:in `call'
  galetahub-simple_captcha (0.1.5) lib/simple_captcha/middleware.rb:20:in `call'
  /Users/kevinmuller/.rvm/gems/ruby-2.2.4/bundler/gems/client_side_validations-a6a515504520/lib/client_side_validations/middleware.rb:21:in `call'
  warden (1.1.1) lib/warden/manager.rb:35:in `block in call'
  warden (1.1.1) lib/warden/manager.rb:34:in `catch'
  warden (1.1.1) lib/warden/manager.rb:34:in `call'
  actionpack (3.2.8) lib/action_dispatch/middleware/best_standards_support.rb:17:in `call'
  rack (1.4.5) lib/rack/etag.rb:23:in `call'
  rack (1.4.5) lib/rack/conditionalget.rb:35:in `call'
  actionpack (3.2.8) lib/action_dispatch/middleware/head.rb:14:in `call'
  /Users/kevinmuller/.rvm/gems/ruby-2.2.4/bundler/gems/remotipart-aadc29e996c3/lib/remotipart/middleware.rb:27:in `call'
  actionpack (3.2.8) lib/action_dispatch/middleware/params_parser.rb:21:in `call'
  actionpack (3.2.8) lib/action_dispatch/middleware/flash.rb:242:in `call'
  rack (1.4.5) lib/rack/session/abstract/id.rb:210:in `context'
  rack (1.4.5) lib/rack/session/abstract/id.rb:205:in `call'
  actionpack (3.2.8) lib/action_dispatch/middleware/cookies.rb:339:in `call'
  dragonfly (0.9.15) lib/dragonfly/cookie_monster.rb:9:in `call'
  activerecord (3.2.8) lib/active_record/query_cache.rb:64:in `call'
  activerecord (3.2.8) lib/active_record/connection_adapters/abstract/connection_pool.rb:473:in `call'
  actionpack (3.2.8) lib/action_dispatch/middleware/callbacks.rb:28:in `block in call'
  activesupport (3.2.8) lib/active_support/callbacks.rb:405:in `_run__1871245027803988066__call__4207201468600934469__callbacks'
  activesupport (3.2.8) lib/active_support/callbacks.rb:405:in `__run_callback'
  activesupport (3.2.8) lib/active_support/callbacks.rb:385:in `_run_call_callbacks'
  activesupport (3.2.8) lib/active_support/callbacks.rb:81:in `run_callbacks'
  actionpack (3.2.8) lib/action_dispatch/middleware/callbacks.rb:27:in `call'
  actionpack (3.2.8) lib/action_dispatch/middleware/reloader.rb:65:in `call'
  actionpack (3.2.8) lib/action_dispatch/middleware/remote_ip.rb:31:in `call'
  actionpack (3.2.8) lib/action_dispatch/middleware/debug_exceptions.rb:16:in `call'
  actionpack (3.2.8) lib/action_dispatch/middleware/show_exceptions.rb:56:in `call'
  railties (3.2.8) lib/rails/rack/logger.rb:26:in `call_app'
  railties (3.2.8) lib/rails/rack/logger.rb:16:in `call'
  quiet_assets (1.0.3) lib/quiet_assets.rb:23:in `call_with_quiet_assets'
  actionpack (3.2.8) lib/action_dispatch/middleware/request_id.rb:22:in `call'
  rack (1.4.5) lib/rack/methodoverride.rb:21:in `call'
  rack (1.4.5) lib/rack/runtime.rb:17:in `call'
  activesupport (3.2.8) lib/active_support/cache/strategy/local_cache.rb:72:in `call'
  rack (1.4.5) lib/rack/lock.rb:15:in `call'
  actionpack (3.2.8) lib/action_dispatch/middleware/static.rb:62:in `call'
  dragonfly (0.9.15) lib/dragonfly/middleware.rb:13:in `call'
  rack-cache (1.2) lib/rack/cache/context.rb:136:in `forward'
  rack-cache (1.2) lib/rack/cache/context.rb:143:in `pass'
  rack-cache (1.2) lib/rack/cache/context.rb:155:in `invalidate'
  rack-cache (1.2) lib/rack/cache/context.rb:71:in `call!'
  rack-cache (1.2) lib/rack/cache/context.rb:51:in `call'
  railties (3.2.8) lib/rails/engine.rb:479:in `call'
  railties (3.2.8) lib/rails/application.rb:223:in `call'
  rack (1.4.5) lib/rack/content_length.rb:14:in `call'
  railties (3.2.8) lib/rails/rack/log_tailer.rb:17:in `call'
  rack (1.4.5) lib/rack/handler/webrick.rb:59:in `service'
  /Users/kevinmuller/.rvm/rubies/ruby-2.2.4/lib/ruby/2.2.0/webrick/httpserver.rb:138:in `service'
  /Users/kevinmuller/.rvm/rubies/ruby-2.2.4/lib/ruby/2.2.0/webrick/httpserver.rb:94:in `run'
  /Users/kevinmuller/.rvm/rubies/ruby-2.2.4/lib/ruby/2.2.0/webrick/server.rb:294:in `block in start_thread'


  Rendered /Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_dispatch/middleware/templates/rescues/missing_template.erb within rescues/layout (1.2ms)


Started GET "/collection/3/edit" for 127.0.0.1 at 2016-01-18 13:26:46 +0100
Processing by CollectionsController#edit_collection as HTML
  Parameters: {"id"=>"3"}
  [1m[36mUser Load (0.2ms)[0m  [1mSELECT `users`.* FROM `users` WHERE `users`.`id` = 1 LIMIT 1[0m
  [1m[35mCollection Load (0.3ms)[0m  SELECT `collections`.* FROM `collections` WHERE `collections`.`id` = 3 LIMIT 1
  [1m[36mCollectionImage Load (0.3ms)[0m  [1mSELECT `collection_images`.* FROM `collection_images` WHERE (collection_id = 3) LIMIT 1[0m
  Rendered collections/_collection_form.html.erb (9.8ms)
  [1m[35mRestaurant Load (3.8ms)[0m  SELECT `restaurants`.* FROM `restaurants` WHERE `restaurants`.`disabled` = 0
  Rendered collections/_collection_restaurants_form.html.erb (91.4ms)
  Rendered collections/edit_collection.html.erb within layouts/admin (114.7ms)
Completed 200 OK in 175ms (Views: 166.1ms | ActiveRecord: 4.6ms)


Started POST "/admin/collections/add_restaurant/3" for 127.0.0.1 at 2016-01-18 13:26:53 +0100
Processing by CollectionsController#add_restaurant as JSON
  Parameters: {"utf8"=>"âœ“", "authenticity_token"=>"cajmPApKUoLTDgL4nYG/B3GUhj8fezKDJZWxee28cyM=", "collection_restaurant"=>{"restaurant_id"=>"1"}, "id"=>"3"}
  [1m[36mUser Load (4.9ms)[0m  [1mSELECT `users`.* FROM `users` WHERE `users`.`id` = 1 LIMIT 1[0m
  [1m[35m (0.6ms)[0m  SELECT COUNT(*) FROM `collection_restaurants` WHERE (collection_id = '3' AND restaurant_id = '1')
ERROR: compiling _app_views_collections_add_restaurant_json_erb__929315449448891309_70236388459800 RAISED /Users/kevinmuller/halalgems_backend/app/views/collections/add_restaurant.json.erb:2: syntax error, unexpected '=', expecting keyword_end
');	 = @json 
   	  ^
Function body:           def _app_views_collections_add_restaurant_json_erb__929315449448891309_70236388459800(local_assigns, output_buffer)
            _old_virtual_path, @virtual_path = @virtual_path, "collections/add_restaurant";_old_output_buffer = @output_buffer;;@output_buffer = output_buffer || ActionView::OutputBuffer.new;@output_buffer.safe_concat('{
');	 = @json 
@output_buffer.safe_concat('}');@output_buffer.to_s
          ensure
            @virtual_path, @output_buffer = _old_virtual_path, _old_output_buffer
          end

Backtrace: /Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_view/template.rb:297:in `module_eval'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_view/template.rb:297:in `compile'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_view/template.rb:244:in `block in compile!'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_view/template.rb:232:in `synchronize'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_view/template.rb:232:in `compile!'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_view/template.rb:144:in `block in render'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/activesupport-3.2.8/lib/active_support/notifications.rb:125:in `instrument'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_view/template.rb:143:in `render'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_view/renderer/template_renderer.rb:47:in `block (2 levels) in render_template'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_view/renderer/abstract_renderer.rb:38:in `block in instrument'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/activesupport-3.2.8/lib/active_support/notifications.rb:123:in `block in instrument'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/activesupport-3.2.8/lib/active_support/notifications/instrumenter.rb:20:in `instrument'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/activesupport-3.2.8/lib/active_support/notifications.rb:123:in `instrument'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_view/renderer/abstract_renderer.rb:38:in `instrument'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_view/renderer/template_renderer.rb:46:in `block in render_template'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_view/renderer/template_renderer.rb:54:in `render_with_layout'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_view/renderer/template_renderer.rb:45:in `render_template'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_view/renderer/template_renderer.rb:18:in `render'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/newrelic_rpm-3.7.3.204/lib/new_relic/agent/instrumentation/rails3/action_controller.rb:160:in `block in render_with_newrelic'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/newrelic_rpm-3.7.3.204/lib/new_relic/agent/method_tracer.rb:281:in `trace_execution_scoped'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/newrelic_rpm-3.7.3.204/lib/new_relic/agent/instrumentation/rails3/action_controller.rb:159:in `render_with_newrelic'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_view/renderer/renderer.rb:36:in `render_template'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_view/renderer/renderer.rb:17:in `render'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/abstract_controller/rendering.rb:110:in `_render_template'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_controller/metal/streaming.rb:225:in `_render_template'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/abstract_controller/rendering.rb:103:in `render_to_body'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_controller/metal/renderers.rb:28:in `render_to_body'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_controller/metal/compatibility.rb:50:in `render_to_body'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/abstract_controller/rendering.rb:88:in `render'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_controller/metal/rendering.rb:16:in `render'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_controller/metal/instrumentation.rb:40:in `block (2 levels) in render'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/activesupport-3.2.8/lib/active_support/core_ext/benchmark.rb:5:in `block in ms'
/Users/kevinmuller/.rvm/rubies/ruby-2.2.4/lib/ruby/2.2.0/benchmark.rb:303:in `realtime'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/activesupport-3.2.8/lib/active_support/core_ext/benchmark.rb:5:in `ms'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_controller/metal/instrumentation.rb:40:in `block in render'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_controller/metal/instrumentation.rb:83:in `cleanup_view_runtime'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/activerecord-3.2.8/lib/active_record/railties/controller_runtime.rb:24:in `cleanup_view_runtime'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_controller/metal/instrumentation.rb:39:in `render'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/bundler/gems/remotipart-aadc29e996c3/lib/remotipart/render_overrides.rb:14:in `render_with_remotipart'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_controller/metal/implicit_render.rb:10:in `default_render'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_controller/metal/implicit_render.rb:5:in `send_action'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/abstract_controller/base.rb:167:in `process_action'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_controller/metal/rendering.rb:10:in `process_action'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/abstract_controller/callbacks.rb:18:in `block in process_action'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/activesupport-3.2.8/lib/active_support/callbacks.rb:458:in `_run__1878201843038484176__process_action__62597762474239354__callbacks'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/activesupport-3.2.8/lib/active_support/callbacks.rb:405:in `__run_callback'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/activesupport-3.2.8/lib/active_support/callbacks.rb:385:in `_run_process_action_callbacks'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/activesupport-3.2.8/lib/active_support/callbacks.rb:81:in `run_callbacks'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/abstract_controller/callbacks.rb:17:in `process_action'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_controller/metal/rescue.rb:29:in `process_action'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_controller/metal/instrumentation.rb:30:in `block in process_action'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/activesupport-3.2.8/lib/active_support/notifications.rb:123:in `block in instrument'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/activesupport-3.2.8/lib/active_support/notifications/instrumenter.rb:20:in `instrument'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/activesupport-3.2.8/lib/active_support/notifications.rb:123:in `instrument'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_controller/metal/instrumentation.rb:29:in `process_action'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_controller/metal/params_wrapper.rb:207:in `process_action'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/activerecord-3.2.8/lib/active_record/railties/controller_runtime.rb:18:in `process_action'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/newrelic_rpm-3.7.3.204/lib/new_relic/agent/instrumentation/rails3/action_controller.rb:38:in `block in process_action'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/newrelic_rpm-3.7.3.204/lib/new_relic/agent/instrumentation/controller_instrumentation.rb:335:in `perform_action_with_newrelic_trace'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/newrelic_rpm-3.7.3.204/lib/new_relic/agent/instrumentation/rails3/action_controller.rb:37:in `process_action'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/abstract_controller/base.rb:121:in `process'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/abstract_controller/rendering.rb:45:in `process'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_controller/metal.rb:203:in `dispatch'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_controller/metal/rack_delegation.rb:14:in `dispatch'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_controller/metal.rb:246:in `block in action'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_dispatch/routing/route_set.rb:73:in `call'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_dispatch/routing/route_set.rb:73:in `dispatch'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_dispatch/routing/route_set.rb:36:in `call'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/journey-1.0.4/lib/journey/router.rb:68:in `block in call'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/journey-1.0.4/lib/journey/router.rb:56:in `each'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/journey-1.0.4/lib/journey/router.rb:56:in `call'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_dispatch/routing/route_set.rb:600:in `call'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/omniauth-1.1.4/lib/omniauth/strategy.rb:184:in `call!'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/omniauth-1.1.4/lib/omniauth/strategy.rb:164:in `call'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/newrelic_rpm-3.7.3.204/lib/new_relic/rack/error_collector.rb:55:in `call'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/newrelic_rpm-3.7.3.204/lib/new_relic/rack/agent_hooks.rb:32:in `call'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/newrelic_rpm-3.7.3.204/lib/new_relic/rack/browser_monitoring.rb:27:in `call'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/newrelic_rpm-3.7.3.204/lib/new_relic/rack/developer_mode.rb:45:in `call'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/galetahub-simple_captcha-0.1.5/lib/simple_captcha/middleware.rb:20:in `call'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/bundler/gems/client_side_validations-a6a515504520/lib/client_side_validations/middleware.rb:21:in `call'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/warden-1.1.1/lib/warden/manager.rb:35:in `block in call'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/warden-1.1.1/lib/warden/manager.rb:34:in `catch'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/warden-1.1.1/lib/warden/manager.rb:34:in `call'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_dispatch/middleware/best_standards_support.rb:17:in `call'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/rack-1.4.5/lib/rack/etag.rb:23:in `call'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/rack-1.4.5/lib/rack/conditionalget.rb:35:in `call'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_dispatch/middleware/head.rb:14:in `call'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/bundler/gems/remotipart-aadc29e996c3/lib/remotipart/middleware.rb:27:in `call'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_dispatch/middleware/params_parser.rb:21:in `call'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_dispatch/middleware/flash.rb:242:in `call'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/rack-1.4.5/lib/rack/session/abstract/id.rb:210:in `context'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/rack-1.4.5/lib/rack/session/abstract/id.rb:205:in `call'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_dispatch/middleware/cookies.rb:339:in `call'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/dragonfly-0.9.15/lib/dragonfly/cookie_monster.rb:9:in `call'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/activerecord-3.2.8/lib/active_record/query_cache.rb:64:in `call'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/activerecord-3.2.8/lib/active_record/connection_adapters/abstract/connection_pool.rb:473:in `call'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_dispatch/middleware/callbacks.rb:28:in `block in call'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/activesupport-3.2.8/lib/active_support/callbacks.rb:405:in `_run__1871245027803988066__call__4207201468600934469__callbacks'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/activesupport-3.2.8/lib/active_support/callbacks.rb:405:in `__run_callback'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/activesupport-3.2.8/lib/active_support/callbacks.rb:385:in `_run_call_callbacks'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/activesupport-3.2.8/lib/active_support/callbacks.rb:81:in `run_callbacks'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_dispatch/middleware/callbacks.rb:27:in `call'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_dispatch/middleware/reloader.rb:65:in `call'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_dispatch/middleware/remote_ip.rb:31:in `call'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_dispatch/middleware/debug_exceptions.rb:16:in `call'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_dispatch/middleware/show_exceptions.rb:56:in `call'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/railties-3.2.8/lib/rails/rack/logger.rb:26:in `call_app'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/railties-3.2.8/lib/rails/rack/logger.rb:16:in `call'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/quiet_assets-1.0.3/lib/quiet_assets.rb:23:in `call_with_quiet_assets'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_dispatch/middleware/request_id.rb:22:in `call'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/rack-1.4.5/lib/rack/methodoverride.rb:21:in `call'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/rack-1.4.5/lib/rack/runtime.rb:17:in `call'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/activesupport-3.2.8/lib/active_support/cache/strategy/local_cache.rb:72:in `call'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/rack-1.4.5/lib/rack/lock.rb:15:in `call'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_dispatch/middleware/static.rb:62:in `call'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/dragonfly-0.9.15/lib/dragonfly/middleware.rb:13:in `call'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/rack-cache-1.2/lib/rack/cache/context.rb:136:in `forward'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/rack-cache-1.2/lib/rack/cache/context.rb:143:in `pass'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/rack-cache-1.2/lib/rack/cache/context.rb:155:in `invalidate'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/rack-cache-1.2/lib/rack/cache/context.rb:71:in `call!'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/rack-cache-1.2/lib/rack/cache/context.rb:51:in `call'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/railties-3.2.8/lib/rails/engine.rb:479:in `call'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/railties-3.2.8/lib/rails/application.rb:223:in `call'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/rack-1.4.5/lib/rack/content_length.rb:14:in `call'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/railties-3.2.8/lib/rails/rack/log_tailer.rb:17:in `call'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/rack-1.4.5/lib/rack/handler/webrick.rb:59:in `service'
/Users/kevinmuller/.rvm/rubies/ruby-2.2.4/lib/ruby/2.2.0/webrick/httpserver.rb:138:in `service'
/Users/kevinmuller/.rvm/rubies/ruby-2.2.4/lib/ruby/2.2.0/webrick/httpserver.rb:94:in `run'
/Users/kevinmuller/.rvm/rubies/ruby-2.2.4/lib/ruby/2.2.0/webrick/server.rb:294:in `block in start_thread'
  Rendered collections/add_restaurant.json.erb (1.3ms)
Completed 500 Internal Server Error in 59ms

ActionView::Template::Error (/Users/kevinmuller/halalgems_backend/app/views/collections/add_restaurant.json.erb:2: syntax error, unexpected '=', expecting keyword_end
');	 = @json 
   	  ^):
    1: {
    2: 	<% = @json %>
    3: }
  actionpack (3.2.8) lib/action_view/template.rb:297:in `module_eval'
  actionpack (3.2.8) lib/action_view/template.rb:297:in `compile'
  actionpack (3.2.8) lib/action_view/template.rb:244:in `block in compile!'
  actionpack (3.2.8) lib/action_view/template.rb:232:in `synchronize'
  actionpack (3.2.8) lib/action_view/template.rb:232:in `compile!'
  actionpack (3.2.8) lib/action_view/template.rb:144:in `block in render'
  activesupport (3.2.8) lib/active_support/notifications.rb:125:in `instrument'
  actionpack (3.2.8) lib/action_view/template.rb:143:in `render'
  actionpack (3.2.8) lib/action_view/renderer/template_renderer.rb:47:in `block (2 levels) in render_template'
  actionpack (3.2.8) lib/action_view/renderer/abstract_renderer.rb:38:in `block in instrument'
  activesupport (3.2.8) lib/active_support/notifications.rb:123:in `block in instrument'
  activesupport (3.2.8) lib/active_support/notifications/instrumenter.rb:20:in `instrument'
  activesupport (3.2.8) lib/active_support/notifications.rb:123:in `instrument'
  actionpack (3.2.8) lib/action_view/renderer/abstract_renderer.rb:38:in `instrument'
  actionpack (3.2.8) lib/action_view/renderer/template_renderer.rb:46:in `block in render_template'
  actionpack (3.2.8) lib/action_view/renderer/template_renderer.rb:54:in `render_with_layout'
  actionpack (3.2.8) lib/action_view/renderer/template_renderer.rb:45:in `render_template'
  actionpack (3.2.8) lib/action_view/renderer/template_renderer.rb:18:in `render'
  newrelic_rpm (3.7.3.204) lib/new_relic/agent/instrumentation/rails3/action_controller.rb:160:in `block in render_with_newrelic'
  newrelic_rpm (3.7.3.204) lib/new_relic/agent/method_tracer.rb:281:in `trace_execution_scoped'
  newrelic_rpm (3.7.3.204) lib/new_relic/agent/instrumentation/rails3/action_controller.rb:159:in `render_with_newrelic'
  actionpack (3.2.8) lib/action_view/renderer/renderer.rb:36:in `render_template'
  actionpack (3.2.8) lib/action_view/renderer/renderer.rb:17:in `render'
  actionpack (3.2.8) lib/abstract_controller/rendering.rb:110:in `_render_template'
  actionpack (3.2.8) lib/action_controller/metal/streaming.rb:225:in `_render_template'
  actionpack (3.2.8) lib/abstract_controller/rendering.rb:103:in `render_to_body'
  actionpack (3.2.8) lib/action_controller/metal/renderers.rb:28:in `render_to_body'
  actionpack (3.2.8) lib/action_controller/metal/compatibility.rb:50:in `render_to_body'
  actionpack (3.2.8) lib/abstract_controller/rendering.rb:88:in `render'
  actionpack (3.2.8) lib/action_controller/metal/rendering.rb:16:in `render'
  actionpack (3.2.8) lib/action_controller/metal/instrumentation.rb:40:in `block (2 levels) in render'
  activesupport (3.2.8) lib/active_support/core_ext/benchmark.rb:5:in `block in ms'
  /Users/kevinmuller/.rvm/rubies/ruby-2.2.4/lib/ruby/2.2.0/benchmark.rb:303:in `realtime'
  activesupport (3.2.8) lib/active_support/core_ext/benchmark.rb:5:in `ms'
  actionpack (3.2.8) lib/action_controller/metal/instrumentation.rb:40:in `block in render'
  actionpack (3.2.8) lib/action_controller/metal/instrumentation.rb:83:in `cleanup_view_runtime'
  activerecord (3.2.8) lib/active_record/railties/controller_runtime.rb:24:in `cleanup_view_runtime'
  actionpack (3.2.8) lib/action_controller/metal/instrumentation.rb:39:in `render'
  /Users/kevinmuller/.rvm/gems/ruby-2.2.4/bundler/gems/remotipart-aadc29e996c3/lib/remotipart/render_overrides.rb:14:in `render_with_remotipart'
  actionpack (3.2.8) lib/action_controller/metal/implicit_render.rb:10:in `default_render'
  actionpack (3.2.8) lib/action_controller/metal/implicit_render.rb:5:in `send_action'
  actionpack (3.2.8) lib/abstract_controller/base.rb:167:in `process_action'
  actionpack (3.2.8) lib/action_controller/metal/rendering.rb:10:in `process_action'
  actionpack (3.2.8) lib/abstract_controller/callbacks.rb:18:in `block in process_action'
  activesupport (3.2.8) lib/active_support/callbacks.rb:458:in `_run__1878201843038484176__process_action__62597762474239354__callbacks'
  activesupport (3.2.8) lib/active_support/callbacks.rb:405:in `__run_callback'
  activesupport (3.2.8) lib/active_support/callbacks.rb:385:in `_run_process_action_callbacks'
  activesupport (3.2.8) lib/active_support/callbacks.rb:81:in `run_callbacks'
  actionpack (3.2.8) lib/abstract_controller/callbacks.rb:17:in `process_action'
  actionpack (3.2.8) lib/action_controller/metal/rescue.rb:29:in `process_action'
  actionpack (3.2.8) lib/action_controller/metal/instrumentation.rb:30:in `block in process_action'
  activesupport (3.2.8) lib/active_support/notifications.rb:123:in `block in instrument'
  activesupport (3.2.8) lib/active_support/notifications/instrumenter.rb:20:in `instrument'
  activesupport (3.2.8) lib/active_support/notifications.rb:123:in `instrument'
  actionpack (3.2.8) lib/action_controller/metal/instrumentation.rb:29:in `process_action'
  actionpack (3.2.8) lib/action_controller/metal/params_wrapper.rb:207:in `process_action'
  activerecord (3.2.8) lib/active_record/railties/controller_runtime.rb:18:in `process_action'
  newrelic_rpm (3.7.3.204) lib/new_relic/agent/instrumentation/rails3/action_controller.rb:38:in `block in process_action'
  newrelic_rpm (3.7.3.204) lib/new_relic/agent/instrumentation/controller_instrumentation.rb:335:in `perform_action_with_newrelic_trace'
  newrelic_rpm (3.7.3.204) lib/new_relic/agent/instrumentation/rails3/action_controller.rb:37:in `process_action'
  actionpack (3.2.8) lib/abstract_controller/base.rb:121:in `process'
  actionpack (3.2.8) lib/abstract_controller/rendering.rb:45:in `process'
  actionpack (3.2.8) lib/action_controller/metal.rb:203:in `dispatch'
  actionpack (3.2.8) lib/action_controller/metal/rack_delegation.rb:14:in `dispatch'
  actionpack (3.2.8) lib/action_controller/metal.rb:246:in `block in action'
  actionpack (3.2.8) lib/action_dispatch/routing/route_set.rb:73:in `call'
  actionpack (3.2.8) lib/action_dispatch/routing/route_set.rb:73:in `dispatch'
  actionpack (3.2.8) lib/action_dispatch/routing/route_set.rb:36:in `call'
  journey (1.0.4) lib/journey/router.rb:68:in `block in call'
  journey (1.0.4) lib/journey/router.rb:56:in `each'
  journey (1.0.4) lib/journey/router.rb:56:in `call'
  actionpack (3.2.8) lib/action_dispatch/routing/route_set.rb:600:in `call'
  omniauth (1.1.4) lib/omniauth/strategy.rb:184:in `call!'
  omniauth (1.1.4) lib/omniauth/strategy.rb:164:in `call'
  newrelic_rpm (3.7.3.204) lib/new_relic/rack/error_collector.rb:55:in `call'
  newrelic_rpm (3.7.3.204) lib/new_relic/rack/agent_hooks.rb:32:in `call'
  newrelic_rpm (3.7.3.204) lib/new_relic/rack/browser_monitoring.rb:27:in `call'
  newrelic_rpm (3.7.3.204) lib/new_relic/rack/developer_mode.rb:45:in `call'
  galetahub-simple_captcha (0.1.5) lib/simple_captcha/middleware.rb:20:in `call'
  /Users/kevinmuller/.rvm/gems/ruby-2.2.4/bundler/gems/client_side_validations-a6a515504520/lib/client_side_validations/middleware.rb:21:in `call'
  warden (1.1.1) lib/warden/manager.rb:35:in `block in call'
  warden (1.1.1) lib/warden/manager.rb:34:in `catch'
  warden (1.1.1) lib/warden/manager.rb:34:in `call'
  actionpack (3.2.8) lib/action_dispatch/middleware/best_standards_support.rb:17:in `call'
  rack (1.4.5) lib/rack/etag.rb:23:in `call'
  rack (1.4.5) lib/rack/conditionalget.rb:35:in `call'
  actionpack (3.2.8) lib/action_dispatch/middleware/head.rb:14:in `call'
  /Users/kevinmuller/.rvm/gems/ruby-2.2.4/bundler/gems/remotipart-aadc29e996c3/lib/remotipart/middleware.rb:27:in `call'
  actionpack (3.2.8) lib/action_dispatch/middleware/params_parser.rb:21:in `call'
  actionpack (3.2.8) lib/action_dispatch/middleware/flash.rb:242:in `call'
  rack (1.4.5) lib/rack/session/abstract/id.rb:210:in `context'
  rack (1.4.5) lib/rack/session/abstract/id.rb:205:in `call'
  actionpack (3.2.8) lib/action_dispatch/middleware/cookies.rb:339:in `call'
  dragonfly (0.9.15) lib/dragonfly/cookie_monster.rb:9:in `call'
  activerecord (3.2.8) lib/active_record/query_cache.rb:64:in `call'
  activerecord (3.2.8) lib/active_record/connection_adapters/abstract/connection_pool.rb:473:in `call'
  actionpack (3.2.8) lib/action_dispatch/middleware/callbacks.rb:28:in `block in call'
  activesupport (3.2.8) lib/active_support/callbacks.rb:405:in `_run__1871245027803988066__call__4207201468600934469__callbacks'
  activesupport (3.2.8) lib/active_support/callbacks.rb:405:in `__run_callback'
  activesupport (3.2.8) lib/active_support/callbacks.rb:385:in `_run_call_callbacks'
  activesupport (3.2.8) lib/active_support/callbacks.rb:81:in `run_callbacks'
  actionpack (3.2.8) lib/action_dispatch/middleware/callbacks.rb:27:in `call'
  actionpack (3.2.8) lib/action_dispatch/middleware/reloader.rb:65:in `call'
  actionpack (3.2.8) lib/action_dispatch/middleware/remote_ip.rb:31:in `call'
  actionpack (3.2.8) lib/action_dispatch/middleware/debug_exceptions.rb:16:in `call'
  actionpack (3.2.8) lib/action_dispatch/middleware/show_exceptions.rb:56:in `call'
  railties (3.2.8) lib/rails/rack/logger.rb:26:in `call_app'
  railties (3.2.8) lib/rails/rack/logger.rb:16:in `call'
  quiet_assets (1.0.3) lib/quiet_assets.rb:23:in `call_with_quiet_assets'
  actionpack (3.2.8) lib/action_dispatch/middleware/request_id.rb:22:in `call'
  rack (1.4.5) lib/rack/methodoverride.rb:21:in `call'
  rack (1.4.5) lib/rack/runtime.rb:17:in `call'
  activesupport (3.2.8) lib/active_support/cache/strategy/local_cache.rb:72:in `call'
  rack (1.4.5) lib/rack/lock.rb:15:in `call'
  actionpack (3.2.8) lib/action_dispatch/middleware/static.rb:62:in `call'
  dragonfly (0.9.15) lib/dragonfly/middleware.rb:13:in `call'
  rack-cache (1.2) lib/rack/cache/context.rb:136:in `forward'
  rack-cache (1.2) lib/rack/cache/context.rb:143:in `pass'
  rack-cache (1.2) lib/rack/cache/context.rb:155:in `invalidate'
  rack-cache (1.2) lib/rack/cache/context.rb:71:in `call!'
  rack-cache (1.2) lib/rack/cache/context.rb:51:in `call'
  railties (3.2.8) lib/rails/engine.rb:479:in `call'
  railties (3.2.8) lib/rails/application.rb:223:in `call'
  rack (1.4.5) lib/rack/content_length.rb:14:in `call'
  railties (3.2.8) lib/rails/rack/log_tailer.rb:17:in `call'
  rack (1.4.5) lib/rack/handler/webrick.rb:59:in `service'
  /Users/kevinmuller/.rvm/rubies/ruby-2.2.4/lib/ruby/2.2.0/webrick/httpserver.rb:138:in `service'
  /Users/kevinmuller/.rvm/rubies/ruby-2.2.4/lib/ruby/2.2.0/webrick/httpserver.rb:94:in `run'
  /Users/kevinmuller/.rvm/rubies/ruby-2.2.4/lib/ruby/2.2.0/webrick/server.rb:294:in `block in start_thread'


  Rendered /Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_dispatch/middleware/templates/rescues/_trace.erb (2.2ms)
  Rendered /Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_dispatch/middleware/templates/rescues/_request_and_response.erb (1.8ms)
  Rendered /Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_dispatch/middleware/templates/rescues/template_error.erb within rescues/layout (49.3ms)


Started GET "/collection/3/edit" for 127.0.0.1 at 2016-01-18 13:27:02 +0100
Processing by CollectionsController#edit_collection as HTML
  Parameters: {"id"=>"3"}
  [1m[36mUser Load (0.7ms)[0m  [1mSELECT `users`.* FROM `users` WHERE `users`.`id` = 1 LIMIT 1[0m
  [1m[35mCollection Load (0.3ms)[0m  SELECT `collections`.* FROM `collections` WHERE `collections`.`id` = 3 LIMIT 1
  [1m[36mCollectionImage Load (1.1ms)[0m  [1mSELECT `collection_images`.* FROM `collection_images` WHERE (collection_id = 3) LIMIT 1[0m
  Rendered collections/_collection_form.html.erb (13.6ms)
  [1m[35mRestaurant Load (12.6ms)[0m  SELECT `restaurants`.* FROM `restaurants` WHERE `restaurants`.`disabled` = 0
  Rendered collections/_collection_restaurants_form.html.erb (130.0ms)
  Rendered collections/edit_collection.html.erb within layouts/admin (146.5ms)
Completed 200 OK in 163ms (Views: 143.2ms | ActiveRecord: 14.6ms)


Started POST "/admin/collections/add_restaurant/3" for 127.0.0.1 at 2016-01-18 13:27:06 +0100
Processing by CollectionsController#add_restaurant as JSON
  Parameters: {"utf8"=>"âœ“", "authenticity_token"=>"cajmPApKUoLTDgL4nYG/B3GUhj8fezKDJZWxee28cyM=", "collection_restaurant"=>{"restaurant_id"=>"1"}, "id"=>"3"}
  [1m[36mUser Load (1.8ms)[0m  [1mSELECT `users`.* FROM `users` WHERE `users`.`id` = 1 LIMIT 1[0m
  [1m[35m (0.6ms)[0m  SELECT COUNT(*) FROM `collection_restaurants` WHERE (collection_id = '3' AND restaurant_id = '1')
ERROR: compiling _app_views_collections_add_restaurant_json_erb__929315449448891309_70236388459800 RAISED /Users/kevinmuller/halalgems_backend/app/views/collections/add_restaurant.json.erb:2: syntax error, unexpected '=', expecting keyword_end
');	 = @json 
   	  ^
Function body:           def _app_views_collections_add_restaurant_json_erb__929315449448891309_70236388459800(local_assigns, output_buffer)
            _old_virtual_path, @virtual_path = @virtual_path, "collections/add_restaurant";_old_output_buffer = @output_buffer;;@output_buffer = output_buffer || ActionView::OutputBuffer.new;@output_buffer.safe_concat('{
');	 = @json 
@output_buffer.safe_concat('}');@output_buffer.to_s
          ensure
            @virtual_path, @output_buffer = _old_virtual_path, _old_output_buffer
          end

Backtrace: /Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_view/template.rb:297:in `module_eval'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_view/template.rb:297:in `compile'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_view/template.rb:244:in `block in compile!'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_view/template.rb:232:in `synchronize'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_view/template.rb:232:in `compile!'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_view/template.rb:144:in `block in render'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/activesupport-3.2.8/lib/active_support/notifications.rb:125:in `instrument'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_view/template.rb:143:in `render'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_view/renderer/template_renderer.rb:47:in `block (2 levels) in render_template'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_view/renderer/abstract_renderer.rb:38:in `block in instrument'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/activesupport-3.2.8/lib/active_support/notifications.rb:123:in `block in instrument'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/activesupport-3.2.8/lib/active_support/notifications/instrumenter.rb:20:in `instrument'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/activesupport-3.2.8/lib/active_support/notifications.rb:123:in `instrument'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_view/renderer/abstract_renderer.rb:38:in `instrument'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_view/renderer/template_renderer.rb:46:in `block in render_template'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_view/renderer/template_renderer.rb:54:in `render_with_layout'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_view/renderer/template_renderer.rb:45:in `render_template'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_view/renderer/template_renderer.rb:18:in `render'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/newrelic_rpm-3.7.3.204/lib/new_relic/agent/instrumentation/rails3/action_controller.rb:160:in `block in render_with_newrelic'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/newrelic_rpm-3.7.3.204/lib/new_relic/agent/method_tracer.rb:281:in `trace_execution_scoped'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/newrelic_rpm-3.7.3.204/lib/new_relic/agent/instrumentation/rails3/action_controller.rb:159:in `render_with_newrelic'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_view/renderer/renderer.rb:36:in `render_template'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_view/renderer/renderer.rb:17:in `render'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/abstract_controller/rendering.rb:110:in `_render_template'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_controller/metal/streaming.rb:225:in `_render_template'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/abstract_controller/rendering.rb:103:in `render_to_body'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_controller/metal/renderers.rb:28:in `render_to_body'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_controller/metal/compatibility.rb:50:in `render_to_body'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/abstract_controller/rendering.rb:88:in `render'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_controller/metal/rendering.rb:16:in `render'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_controller/metal/instrumentation.rb:40:in `block (2 levels) in render'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/activesupport-3.2.8/lib/active_support/core_ext/benchmark.rb:5:in `block in ms'
/Users/kevinmuller/.rvm/rubies/ruby-2.2.4/lib/ruby/2.2.0/benchmark.rb:303:in `realtime'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/activesupport-3.2.8/lib/active_support/core_ext/benchmark.rb:5:in `ms'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_controller/metal/instrumentation.rb:40:in `block in render'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_controller/metal/instrumentation.rb:83:in `cleanup_view_runtime'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/activerecord-3.2.8/lib/active_record/railties/controller_runtime.rb:24:in `cleanup_view_runtime'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_controller/metal/instrumentation.rb:39:in `render'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/bundler/gems/remotipart-aadc29e996c3/lib/remotipart/render_overrides.rb:14:in `render_with_remotipart'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_controller/metal/implicit_render.rb:10:in `default_render'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_controller/metal/implicit_render.rb:5:in `send_action'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/abstract_controller/base.rb:167:in `process_action'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_controller/metal/rendering.rb:10:in `process_action'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/abstract_controller/callbacks.rb:18:in `block in process_action'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/activesupport-3.2.8/lib/active_support/callbacks.rb:458:in `_run__1878201843038484176__process_action__62597762474239354__callbacks'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/activesupport-3.2.8/lib/active_support/callbacks.rb:405:in `__run_callback'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/activesupport-3.2.8/lib/active_support/callbacks.rb:385:in `_run_process_action_callbacks'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/activesupport-3.2.8/lib/active_support/callbacks.rb:81:in `run_callbacks'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/abstract_controller/callbacks.rb:17:in `process_action'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_controller/metal/rescue.rb:29:in `process_action'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_controller/metal/instrumentation.rb:30:in `block in process_action'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/activesupport-3.2.8/lib/active_support/notifications.rb:123:in `block in instrument'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/activesupport-3.2.8/lib/active_support/notifications/instrumenter.rb:20:in `instrument'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/activesupport-3.2.8/lib/active_support/notifications.rb:123:in `instrument'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_controller/metal/instrumentation.rb:29:in `process_action'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_controller/metal/params_wrapper.rb:207:in `process_action'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/activerecord-3.2.8/lib/active_record/railties/controller_runtime.rb:18:in `process_action'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/newrelic_rpm-3.7.3.204/lib/new_relic/agent/instrumentation/rails3/action_controller.rb:38:in `block in process_action'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/newrelic_rpm-3.7.3.204/lib/new_relic/agent/instrumentation/controller_instrumentation.rb:335:in `perform_action_with_newrelic_trace'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/newrelic_rpm-3.7.3.204/lib/new_relic/agent/instrumentation/rails3/action_controller.rb:37:in `process_action'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/abstract_controller/base.rb:121:in `process'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/abstract_controller/rendering.rb:45:in `process'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_controller/metal.rb:203:in `dispatch'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_controller/metal/rack_delegation.rb:14:in `dispatch'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_controller/metal.rb:246:in `block in action'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_dispatch/routing/route_set.rb:73:in `call'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_dispatch/routing/route_set.rb:73:in `dispatch'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_dispatch/routing/route_set.rb:36:in `call'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/journey-1.0.4/lib/journey/router.rb:68:in `block in call'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/journey-1.0.4/lib/journey/router.rb:56:in `each'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/journey-1.0.4/lib/journey/router.rb:56:in `call'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_dispatch/routing/route_set.rb:600:in `call'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/omniauth-1.1.4/lib/omniauth/strategy.rb:184:in `call!'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/omniauth-1.1.4/lib/omniauth/strategy.rb:164:in `call'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/newrelic_rpm-3.7.3.204/lib/new_relic/rack/error_collector.rb:55:in `call'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/newrelic_rpm-3.7.3.204/lib/new_relic/rack/agent_hooks.rb:32:in `call'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/newrelic_rpm-3.7.3.204/lib/new_relic/rack/browser_monitoring.rb:27:in `call'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/newrelic_rpm-3.7.3.204/lib/new_relic/rack/developer_mode.rb:45:in `call'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/galetahub-simple_captcha-0.1.5/lib/simple_captcha/middleware.rb:20:in `call'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/bundler/gems/client_side_validations-a6a515504520/lib/client_side_validations/middleware.rb:21:in `call'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/warden-1.1.1/lib/warden/manager.rb:35:in `block in call'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/warden-1.1.1/lib/warden/manager.rb:34:in `catch'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/warden-1.1.1/lib/warden/manager.rb:34:in `call'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_dispatch/middleware/best_standards_support.rb:17:in `call'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/rack-1.4.5/lib/rack/etag.rb:23:in `call'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/rack-1.4.5/lib/rack/conditionalget.rb:35:in `call'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_dispatch/middleware/head.rb:14:in `call'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/bundler/gems/remotipart-aadc29e996c3/lib/remotipart/middleware.rb:27:in `call'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_dispatch/middleware/params_parser.rb:21:in `call'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_dispatch/middleware/flash.rb:242:in `call'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/rack-1.4.5/lib/rack/session/abstract/id.rb:210:in `context'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/rack-1.4.5/lib/rack/session/abstract/id.rb:205:in `call'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_dispatch/middleware/cookies.rb:339:in `call'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/dragonfly-0.9.15/lib/dragonfly/cookie_monster.rb:9:in `call'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/activerecord-3.2.8/lib/active_record/query_cache.rb:64:in `call'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/activerecord-3.2.8/lib/active_record/connection_adapters/abstract/connection_pool.rb:473:in `call'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_dispatch/middleware/callbacks.rb:28:in `block in call'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/activesupport-3.2.8/lib/active_support/callbacks.rb:405:in `_run__1871245027803988066__call__4207201468600934469__callbacks'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/activesupport-3.2.8/lib/active_support/callbacks.rb:405:in `__run_callback'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/activesupport-3.2.8/lib/active_support/callbacks.rb:385:in `_run_call_callbacks'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/activesupport-3.2.8/lib/active_support/callbacks.rb:81:in `run_callbacks'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_dispatch/middleware/callbacks.rb:27:in `call'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_dispatch/middleware/reloader.rb:65:in `call'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_dispatch/middleware/remote_ip.rb:31:in `call'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_dispatch/middleware/debug_exceptions.rb:16:in `call'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_dispatch/middleware/show_exceptions.rb:56:in `call'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/railties-3.2.8/lib/rails/rack/logger.rb:26:in `call_app'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/railties-3.2.8/lib/rails/rack/logger.rb:16:in `call'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/quiet_assets-1.0.3/lib/quiet_assets.rb:23:in `call_with_quiet_assets'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_dispatch/middleware/request_id.rb:22:in `call'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/rack-1.4.5/lib/rack/methodoverride.rb:21:in `call'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/rack-1.4.5/lib/rack/runtime.rb:17:in `call'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/activesupport-3.2.8/lib/active_support/cache/strategy/local_cache.rb:72:in `call'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/rack-1.4.5/lib/rack/lock.rb:15:in `call'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_dispatch/middleware/static.rb:62:in `call'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/dragonfly-0.9.15/lib/dragonfly/middleware.rb:13:in `call'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/rack-cache-1.2/lib/rack/cache/context.rb:136:in `forward'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/rack-cache-1.2/lib/rack/cache/context.rb:143:in `pass'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/rack-cache-1.2/lib/rack/cache/context.rb:155:in `invalidate'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/rack-cache-1.2/lib/rack/cache/context.rb:71:in `call!'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/rack-cache-1.2/lib/rack/cache/context.rb:51:in `call'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/railties-3.2.8/lib/rails/engine.rb:479:in `call'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/railties-3.2.8/lib/rails/application.rb:223:in `call'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/rack-1.4.5/lib/rack/content_length.rb:14:in `call'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/railties-3.2.8/lib/rails/rack/log_tailer.rb:17:in `call'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/rack-1.4.5/lib/rack/handler/webrick.rb:59:in `service'
/Users/kevinmuller/.rvm/rubies/ruby-2.2.4/lib/ruby/2.2.0/webrick/httpserver.rb:138:in `service'
/Users/kevinmuller/.rvm/rubies/ruby-2.2.4/lib/ruby/2.2.0/webrick/httpserver.rb:94:in `run'
/Users/kevinmuller/.rvm/rubies/ruby-2.2.4/lib/ruby/2.2.0/webrick/server.rb:294:in `block in start_thread'
  Rendered collections/add_restaurant.json.erb (0.9ms)
Completed 500 Internal Server Error in 29ms

ActionView::Template::Error (/Users/kevinmuller/halalgems_backend/app/views/collections/add_restaurant.json.erb:2: syntax error, unexpected '=', expecting keyword_end
');	 = @json 
   	  ^):
    1: {
    2: 	<% = @json %>
    3: }
  actionpack (3.2.8) lib/action_view/template.rb:297:in `module_eval'
  actionpack (3.2.8) lib/action_view/template.rb:297:in `compile'
  actionpack (3.2.8) lib/action_view/template.rb:244:in `block in compile!'
  actionpack (3.2.8) lib/action_view/template.rb:232:in `synchronize'
  actionpack (3.2.8) lib/action_view/template.rb:232:in `compile!'
  actionpack (3.2.8) lib/action_view/template.rb:144:in `block in render'
  activesupport (3.2.8) lib/active_support/notifications.rb:125:in `instrument'
  actionpack (3.2.8) lib/action_view/template.rb:143:in `render'
  actionpack (3.2.8) lib/action_view/renderer/template_renderer.rb:47:in `block (2 levels) in render_template'
  actionpack (3.2.8) lib/action_view/renderer/abstract_renderer.rb:38:in `block in instrument'
  activesupport (3.2.8) lib/active_support/notifications.rb:123:in `block in instrument'
  activesupport (3.2.8) lib/active_support/notifications/instrumenter.rb:20:in `instrument'
  activesupport (3.2.8) lib/active_support/notifications.rb:123:in `instrument'
  actionpack (3.2.8) lib/action_view/renderer/abstract_renderer.rb:38:in `instrument'
  actionpack (3.2.8) lib/action_view/renderer/template_renderer.rb:46:in `block in render_template'
  actionpack (3.2.8) lib/action_view/renderer/template_renderer.rb:54:in `render_with_layout'
  actionpack (3.2.8) lib/action_view/renderer/template_renderer.rb:45:in `render_template'
  actionpack (3.2.8) lib/action_view/renderer/template_renderer.rb:18:in `render'
  newrelic_rpm (3.7.3.204) lib/new_relic/agent/instrumentation/rails3/action_controller.rb:160:in `block in render_with_newrelic'
  newrelic_rpm (3.7.3.204) lib/new_relic/agent/method_tracer.rb:281:in `trace_execution_scoped'
  newrelic_rpm (3.7.3.204) lib/new_relic/agent/instrumentation/rails3/action_controller.rb:159:in `render_with_newrelic'
  actionpack (3.2.8) lib/action_view/renderer/renderer.rb:36:in `render_template'
  actionpack (3.2.8) lib/action_view/renderer/renderer.rb:17:in `render'
  actionpack (3.2.8) lib/abstract_controller/rendering.rb:110:in `_render_template'
  actionpack (3.2.8) lib/action_controller/metal/streaming.rb:225:in `_render_template'
  actionpack (3.2.8) lib/abstract_controller/rendering.rb:103:in `render_to_body'
  actionpack (3.2.8) lib/action_controller/metal/renderers.rb:28:in `render_to_body'
  actionpack (3.2.8) lib/action_controller/metal/compatibility.rb:50:in `render_to_body'
  actionpack (3.2.8) lib/abstract_controller/rendering.rb:88:in `render'
  actionpack (3.2.8) lib/action_controller/metal/rendering.rb:16:in `render'
  actionpack (3.2.8) lib/action_controller/metal/instrumentation.rb:40:in `block (2 levels) in render'
  activesupport (3.2.8) lib/active_support/core_ext/benchmark.rb:5:in `block in ms'
  /Users/kevinmuller/.rvm/rubies/ruby-2.2.4/lib/ruby/2.2.0/benchmark.rb:303:in `realtime'
  activesupport (3.2.8) lib/active_support/core_ext/benchmark.rb:5:in `ms'
  actionpack (3.2.8) lib/action_controller/metal/instrumentation.rb:40:in `block in render'
  actionpack (3.2.8) lib/action_controller/metal/instrumentation.rb:83:in `cleanup_view_runtime'
  activerecord (3.2.8) lib/active_record/railties/controller_runtime.rb:24:in `cleanup_view_runtime'
  actionpack (3.2.8) lib/action_controller/metal/instrumentation.rb:39:in `render'
  /Users/kevinmuller/.rvm/gems/ruby-2.2.4/bundler/gems/remotipart-aadc29e996c3/lib/remotipart/render_overrides.rb:14:in `render_with_remotipart'
  actionpack (3.2.8) lib/action_controller/metal/implicit_render.rb:10:in `default_render'
  actionpack (3.2.8) lib/action_controller/metal/implicit_render.rb:5:in `send_action'
  actionpack (3.2.8) lib/abstract_controller/base.rb:167:in `process_action'
  actionpack (3.2.8) lib/action_controller/metal/rendering.rb:10:in `process_action'
  actionpack (3.2.8) lib/abstract_controller/callbacks.rb:18:in `block in process_action'
  activesupport (3.2.8) lib/active_support/callbacks.rb:458:in `_run__1878201843038484176__process_action__62597762474239354__callbacks'
  activesupport (3.2.8) lib/active_support/callbacks.rb:405:in `__run_callback'
  activesupport (3.2.8) lib/active_support/callbacks.rb:385:in `_run_process_action_callbacks'
  activesupport (3.2.8) lib/active_support/callbacks.rb:81:in `run_callbacks'
  actionpack (3.2.8) lib/abstract_controller/callbacks.rb:17:in `process_action'
  actionpack (3.2.8) lib/action_controller/metal/rescue.rb:29:in `process_action'
  actionpack (3.2.8) lib/action_controller/metal/instrumentation.rb:30:in `block in process_action'
  activesupport (3.2.8) lib/active_support/notifications.rb:123:in `block in instrument'
  activesupport (3.2.8) lib/active_support/notifications/instrumenter.rb:20:in `instrument'
  activesupport (3.2.8) lib/active_support/notifications.rb:123:in `instrument'
  actionpack (3.2.8) lib/action_controller/metal/instrumentation.rb:29:in `process_action'
  actionpack (3.2.8) lib/action_controller/metal/params_wrapper.rb:207:in `process_action'
  activerecord (3.2.8) lib/active_record/railties/controller_runtime.rb:18:in `process_action'
  newrelic_rpm (3.7.3.204) lib/new_relic/agent/instrumentation/rails3/action_controller.rb:38:in `block in process_action'
  newrelic_rpm (3.7.3.204) lib/new_relic/agent/instrumentation/controller_instrumentation.rb:335:in `perform_action_with_newrelic_trace'
  newrelic_rpm (3.7.3.204) lib/new_relic/agent/instrumentation/rails3/action_controller.rb:37:in `process_action'
  actionpack (3.2.8) lib/abstract_controller/base.rb:121:in `process'
  actionpack (3.2.8) lib/abstract_controller/rendering.rb:45:in `process'
  actionpack (3.2.8) lib/action_controller/metal.rb:203:in `dispatch'
  actionpack (3.2.8) lib/action_controller/metal/rack_delegation.rb:14:in `dispatch'
  actionpack (3.2.8) lib/action_controller/metal.rb:246:in `block in action'
  actionpack (3.2.8) lib/action_dispatch/routing/route_set.rb:73:in `call'
  actionpack (3.2.8) lib/action_dispatch/routing/route_set.rb:73:in `dispatch'
  actionpack (3.2.8) lib/action_dispatch/routing/route_set.rb:36:in `call'
  journey (1.0.4) lib/journey/router.rb:68:in `block in call'
  journey (1.0.4) lib/journey/router.rb:56:in `each'
  journey (1.0.4) lib/journey/router.rb:56:in `call'
  actionpack (3.2.8) lib/action_dispatch/routing/route_set.rb:600:in `call'
  omniauth (1.1.4) lib/omniauth/strategy.rb:184:in `call!'
  omniauth (1.1.4) lib/omniauth/strategy.rb:164:in `call'
  newrelic_rpm (3.7.3.204) lib/new_relic/rack/error_collector.rb:55:in `call'
  newrelic_rpm (3.7.3.204) lib/new_relic/rack/agent_hooks.rb:32:in `call'
  newrelic_rpm (3.7.3.204) lib/new_relic/rack/browser_monitoring.rb:27:in `call'
  newrelic_rpm (3.7.3.204) lib/new_relic/rack/developer_mode.rb:45:in `call'
  galetahub-simple_captcha (0.1.5) lib/simple_captcha/middleware.rb:20:in `call'
  /Users/kevinmuller/.rvm/gems/ruby-2.2.4/bundler/gems/client_side_validations-a6a515504520/lib/client_side_validations/middleware.rb:21:in `call'
  warden (1.1.1) lib/warden/manager.rb:35:in `block in call'
  warden (1.1.1) lib/warden/manager.rb:34:in `catch'
  warden (1.1.1) lib/warden/manager.rb:34:in `call'
  actionpack (3.2.8) lib/action_dispatch/middleware/best_standards_support.rb:17:in `call'
  rack (1.4.5) lib/rack/etag.rb:23:in `call'
  rack (1.4.5) lib/rack/conditionalget.rb:35:in `call'
  actionpack (3.2.8) lib/action_dispatch/middleware/head.rb:14:in `call'
  /Users/kevinmuller/.rvm/gems/ruby-2.2.4/bundler/gems/remotipart-aadc29e996c3/lib/remotipart/middleware.rb:27:in `call'
  actionpack (3.2.8) lib/action_dispatch/middleware/params_parser.rb:21:in `call'
  actionpack (3.2.8) lib/action_dispatch/middleware/flash.rb:242:in `call'
  rack (1.4.5) lib/rack/session/abstract/id.rb:210:in `context'
  rack (1.4.5) lib/rack/session/abstract/id.rb:205:in `call'
  actionpack (3.2.8) lib/action_dispatch/middleware/cookies.rb:339:in `call'
  dragonfly (0.9.15) lib/dragonfly/cookie_monster.rb:9:in `call'
  activerecord (3.2.8) lib/active_record/query_cache.rb:64:in `call'
  activerecord (3.2.8) lib/active_record/connection_adapters/abstract/connection_pool.rb:473:in `call'
  actionpack (3.2.8) lib/action_dispatch/middleware/callbacks.rb:28:in `block in call'
  activesupport (3.2.8) lib/active_support/callbacks.rb:405:in `_run__1871245027803988066__call__4207201468600934469__callbacks'
  activesupport (3.2.8) lib/active_support/callbacks.rb:405:in `__run_callback'
  activesupport (3.2.8) lib/active_support/callbacks.rb:385:in `_run_call_callbacks'
  activesupport (3.2.8) lib/active_support/callbacks.rb:81:in `run_callbacks'
  actionpack (3.2.8) lib/action_dispatch/middleware/callbacks.rb:27:in `call'
  actionpack (3.2.8) lib/action_dispatch/middleware/reloader.rb:65:in `call'
  actionpack (3.2.8) lib/action_dispatch/middleware/remote_ip.rb:31:in `call'
  actionpack (3.2.8) lib/action_dispatch/middleware/debug_exceptions.rb:16:in `call'
  actionpack (3.2.8) lib/action_dispatch/middleware/show_exceptions.rb:56:in `call'
  railties (3.2.8) lib/rails/rack/logger.rb:26:in `call_app'
  railties (3.2.8) lib/rails/rack/logger.rb:16:in `call'
  quiet_assets (1.0.3) lib/quiet_assets.rb:23:in `call_with_quiet_assets'
  actionpack (3.2.8) lib/action_dispatch/middleware/request_id.rb:22:in `call'
  rack (1.4.5) lib/rack/methodoverride.rb:21:in `call'
  rack (1.4.5) lib/rack/runtime.rb:17:in `call'
  activesupport (3.2.8) lib/active_support/cache/strategy/local_cache.rb:72:in `call'
  rack (1.4.5) lib/rack/lock.rb:15:in `call'
  actionpack (3.2.8) lib/action_dispatch/middleware/static.rb:62:in `call'
  dragonfly (0.9.15) lib/dragonfly/middleware.rb:13:in `call'
  rack-cache (1.2) lib/rack/cache/context.rb:136:in `forward'
  rack-cache (1.2) lib/rack/cache/context.rb:143:in `pass'
  rack-cache (1.2) lib/rack/cache/context.rb:155:in `invalidate'
  rack-cache (1.2) lib/rack/cache/context.rb:71:in `call!'
  rack-cache (1.2) lib/rack/cache/context.rb:51:in `call'
  railties (3.2.8) lib/rails/engine.rb:479:in `call'
  railties (3.2.8) lib/rails/application.rb:223:in `call'
  rack (1.4.5) lib/rack/content_length.rb:14:in `call'
  railties (3.2.8) lib/rails/rack/log_tailer.rb:17:in `call'
  rack (1.4.5) lib/rack/handler/webrick.rb:59:in `service'
  /Users/kevinmuller/.rvm/rubies/ruby-2.2.4/lib/ruby/2.2.0/webrick/httpserver.rb:138:in `service'
  /Users/kevinmuller/.rvm/rubies/ruby-2.2.4/lib/ruby/2.2.0/webrick/httpserver.rb:94:in `run'
  /Users/kevinmuller/.rvm/rubies/ruby-2.2.4/lib/ruby/2.2.0/webrick/server.rb:294:in `block in start_thread'


  Rendered /Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_dispatch/middleware/templates/rescues/_trace.erb (2.5ms)
  Rendered /Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_dispatch/middleware/templates/rescues/_request_and_response.erb (1.4ms)
  Rendered /Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_dispatch/middleware/templates/rescues/template_error.erb within rescues/layout (49.0ms)


Started GET "/collection/3/edit" for 127.0.0.1 at 2016-01-18 13:27:51 +0100
Processing by CollectionsController#edit_collection as HTML
  Parameters: {"id"=>"3"}
  [1m[36mUser Load (0.6ms)[0m  [1mSELECT `users`.* FROM `users` WHERE `users`.`id` = 1 LIMIT 1[0m
  [1m[35mCollection Load (0.2ms)[0m  SELECT `collections`.* FROM `collections` WHERE `collections`.`id` = 3 LIMIT 1
  [1m[36mCollectionImage Load (0.3ms)[0m  [1mSELECT `collection_images`.* FROM `collection_images` WHERE (collection_id = 3) LIMIT 1[0m
  Rendered collections/_collection_form.html.erb (10.3ms)
  [1m[35mRestaurant Load (13.8ms)[0m  SELECT `restaurants`.* FROM `restaurants` WHERE `restaurants`.`disabled` = 0
  Rendered collections/_collection_restaurants_form.html.erb (132.1ms)
  Rendered collections/edit_collection.html.erb within layouts/admin (145.3ms)
Completed 200 OK in 159ms (Views: 139.4ms | ActiveRecord: 14.9ms)


Started POST "/admin/collections/add_restaurant/3" for 127.0.0.1 at 2016-01-18 13:27:56 +0100
Processing by CollectionsController#add_restaurant as JSON
  Parameters: {"utf8"=>"âœ“", "authenticity_token"=>"cajmPApKUoLTDgL4nYG/B3GUhj8fezKDJZWxee28cyM=", "collection_restaurant"=>{"restaurant_id"=>"1"}, "id"=>"3"}
  [1m[36mUser Load (1.0ms)[0m  [1mSELECT `users`.* FROM `users` WHERE `users`.`id` = 1 LIMIT 1[0m
  [1m[35m (0.6ms)[0m  SELECT COUNT(*) FROM `collection_restaurants` WHERE (collection_id = '3' AND restaurant_id = '1')
  Rendered collections/add_restaurant.json.erb (1.5ms)
Completed 200 OK in 43ms (Views: 34.8ms | ActiveRecord: 1.6ms)


Started GET "/collection/3/edit" for 127.0.0.1 at 2016-01-18 13:28:48 +0100
Processing by CollectionsController#edit_collection as HTML
  Parameters: {"id"=>"3"}
  [1m[36mUser Load (0.2ms)[0m  [1mSELECT `users`.* FROM `users` WHERE `users`.`id` = 1 LIMIT 1[0m
  [1m[35mCollection Load (0.2ms)[0m  SELECT `collections`.* FROM `collections` WHERE `collections`.`id` = 3 LIMIT 1
  [1m[36mCollectionImage Load (0.3ms)[0m  [1mSELECT `collection_images`.* FROM `collection_images` WHERE (collection_id = 3) LIMIT 1[0m
  Rendered collections/_collection_form.html.erb (28.7ms)
  [1m[35mRestaurant Load (7.6ms)[0m  SELECT `restaurants`.* FROM `restaurants` WHERE `restaurants`.`disabled` = 0
  Rendered collections/_collection_restaurants_form.html.erb (129.0ms)
  Rendered collections/edit_collection.html.erb within layouts/admin (185.6ms)
Completed 200 OK in 219ms (Views: 207.3ms | ActiveRecord: 8.4ms)


Started POST "/admin/collections/add_restaurant/3" for 127.0.0.1 at 2016-01-18 13:28:51 +0100
Processing by CollectionsController#add_restaurant as JSON
  Parameters: {"utf8"=>"âœ“", "authenticity_token"=>"cajmPApKUoLTDgL4nYG/B3GUhj8fezKDJZWxee28cyM=", "collection_restaurant"=>{"restaurant_id"=>"1"}, "id"=>"3"}
  [1m[36mUser Load (0.4ms)[0m  [1mSELECT `users`.* FROM `users` WHERE `users`.`id` = 1 LIMIT 1[0m
  [1m[35m (6.3ms)[0m  SELECT COUNT(*) FROM `collection_restaurants` WHERE (collection_id = '3' AND restaurant_id = '1')
  Rendered collections/add_restaurant.json.erb (1.6ms)
Completed 200 OK in 38ms (Views: 26.5ms | ActiveRecord: 6.7ms)


Started GET "/collection/3/edit" for 127.0.0.1 at 2016-01-18 13:31:11 +0100
Processing by CollectionsController#edit_collection as HTML
  Parameters: {"id"=>"3"}
  [1m[36mUser Load (0.3ms)[0m  [1mSELECT `users`.* FROM `users` WHERE `users`.`id` = 1 LIMIT 1[0m
  [1m[35mCollection Load (0.2ms)[0m  SELECT `collections`.* FROM `collections` WHERE `collections`.`id` = 3 LIMIT 1
  [1m[36m (0.2ms)[0m  [1mSELECT COUNT(*) FROM `filter_types` WHERE (code = 'features')[0m
  [1m[35m (0.2ms)[0m  SELECT COUNT(*) FROM `filters` WHERE (code = 'offer')
  [1m[36mCollectionImage Load (0.3ms)[0m  [1mSELECT `collection_images`.* FROM `collection_images` WHERE (collection_id = 3) LIMIT 1[0m
  Rendered collections/_collection_form.html.erb (42.6ms)
  [1m[35mRestaurant Load (3.6ms)[0m  SELECT `restaurants`.* FROM `restaurants` WHERE `restaurants`.`disabled` = 0
  Rendered collections/_collection_restaurants_form.html.erb (111.6ms)
  Rendered collections/edit_collection.html.erb within layouts/admin (156.7ms)
Completed 200 OK in 482ms (Views: 161.4ms | ActiveRecord: 21.5ms)


Started POST "/admin/collections/add_restaurant/3" for 127.0.0.1 at 2016-01-18 13:31:18 +0100
Processing by CollectionsController#add_restaurant as JSON
  Parameters: {"utf8"=>"âœ“", "authenticity_token"=>"cajmPApKUoLTDgL4nYG/B3GUhj8fezKDJZWxee28cyM=", "collection_restaurant"=>{"restaurant_id"=>"1"}, "id"=>"3"}
  [1m[36mUser Load (1.4ms)[0m  [1mSELECT `users`.* FROM `users` WHERE `users`.`id` = 1 LIMIT 1[0m
  [1m[35m (1.0ms)[0m  SELECT COUNT(*) FROM `collection_restaurants` WHERE (collection_id = '3' AND restaurant_id = '1')
  Rendered collections/add_restaurant.json.erb (1.5ms)
Completed 200 OK in 57ms (Views: 49.3ms | ActiveRecord: 2.3ms)


Started GET "/collection/3/edit" for 127.0.0.1 at 2016-01-18 13:32:39 +0100
Processing by CollectionsController#edit_collection as HTML
  Parameters: {"id"=>"3"}
  [1m[36mUser Load (0.4ms)[0m  [1mSELECT `users`.* FROM `users` WHERE `users`.`id` = 1 LIMIT 1[0m
  [1m[35mCollection Load (0.2ms)[0m  SELECT `collections`.* FROM `collections` WHERE `collections`.`id` = 3 LIMIT 1
  [1m[36mCollectionImage Load (0.4ms)[0m  [1mSELECT `collection_images`.* FROM `collection_images` WHERE (collection_id = 3) LIMIT 1[0m
  Rendered collections/_collection_form.html.erb (16.3ms)
  [1m[35mRestaurant Load (3.5ms)[0m  SELECT `restaurants`.* FROM `restaurants` WHERE `restaurants`.`disabled` = 0
  Rendered collections/_collection_restaurants_form.html.erb (204.6ms)
  Rendered collections/edit_collection.html.erb within layouts/admin (224.1ms)
Completed 200 OK in 236ms (Views: 227.0ms | ActiveRecord: 4.6ms)


Started POST "/admin/collections/add_restaurant/3" for 127.0.0.1 at 2016-01-18 13:32:43 +0100
Processing by CollectionsController#add_restaurant as JSON
  Parameters: {"utf8"=>"âœ“", "authenticity_token"=>"cajmPApKUoLTDgL4nYG/B3GUhj8fezKDJZWxee28cyM=", "collection_restaurant"=>{"restaurant_id"=>"1"}, "id"=>"3"}
  [1m[36mUser Load (0.8ms)[0m  [1mSELECT `users`.* FROM `users` WHERE `users`.`id` = 1 LIMIT 1[0m
  [1m[35m (8.3ms)[0m  SELECT COUNT(*) FROM `collection_restaurants` WHERE (collection_id = '3' AND restaurant_id = '1')
  Rendered collections/add_restaurant.json.erb (1.7ms)
Completed 200 OK in 65ms (Views: 48.3ms | ActiveRecord: 9.1ms)


Started GET "/collection/3/edit" for 127.0.0.1 at 2016-01-18 13:32:55 +0100
Processing by CollectionsController#edit_collection as HTML
  Parameters: {"id"=>"3"}
  [1m[36mUser Load (0.3ms)[0m  [1mSELECT `users`.* FROM `users` WHERE `users`.`id` = 1 LIMIT 1[0m
  [1m[35mCollection Load (0.2ms)[0m  SELECT `collections`.* FROM `collections` WHERE `collections`.`id` = 3 LIMIT 1
  [1m[36mCollectionImage Load (0.3ms)[0m  [1mSELECT `collection_images`.* FROM `collection_images` WHERE (collection_id = 3) LIMIT 1[0m
  Rendered collections/_collection_form.html.erb (10.3ms)
  [1m[35mRestaurant Load (3.8ms)[0m  SELECT `restaurants`.* FROM `restaurants` WHERE `restaurants`.`disabled` = 0
  Rendered collections/_collection_restaurants_form.html.erb (91.3ms)
  Rendered collections/edit_collection.html.erb within layouts/admin (103.9ms)
Completed 200 OK in 114ms (Views: 105.7ms | ActiveRecord: 4.5ms)


Started GET "/collection/3/edit" for 127.0.0.1 at 2016-01-18 13:32:58 +0100
Processing by CollectionsController#edit_collection as HTML
  Parameters: {"id"=>"3"}
  [1m[36mUser Load (0.4ms)[0m  [1mSELECT `users`.* FROM `users` WHERE `users`.`id` = 1 LIMIT 1[0m
  [1m[35mCollection Load (0.3ms)[0m  SELECT `collections`.* FROM `collections` WHERE `collections`.`id` = 3 LIMIT 1
  [1m[36mCollectionImage Load (0.3ms)[0m  [1mSELECT `collection_images`.* FROM `collection_images` WHERE (collection_id = 3) LIMIT 1[0m
  Rendered collections/_collection_form.html.erb (10.3ms)
  [1m[35mRestaurant Load (3.4ms)[0m  SELECT `restaurants`.* FROM `restaurants` WHERE `restaurants`.`disabled` = 0
  Rendered collections/_collection_restaurants_form.html.erb (87.5ms)
  Rendered collections/edit_collection.html.erb within layouts/admin (100.2ms)
Completed 200 OK in 115ms (Views: 103.1ms | ActiveRecord: 4.4ms)


Started POST "/admin/collections/add_restaurant/3" for 127.0.0.1 at 2016-01-18 13:33:00 +0100
Processing by CollectionsController#add_restaurant as JSON
  Parameters: {"utf8"=>"âœ“", "authenticity_token"=>"cajmPApKUoLTDgL4nYG/B3GUhj8fezKDJZWxee28cyM=", "collection_restaurant"=>{"restaurant_id"=>"1"}, "id"=>"3"}
  [1m[36mUser Load (0.5ms)[0m  [1mSELECT `users`.* FROM `users` WHERE `users`.`id` = 1 LIMIT 1[0m
  [1m[35m (0.3ms)[0m  SELECT COUNT(*) FROM `collection_restaurants` WHERE (collection_id = '3' AND restaurant_id = '1')
  Rendered collections/add_restaurant.json.erb (0.1ms)
Completed 200 OK in 32ms (Views: 24.5ms | ActiveRecord: 0.8ms)


Started GET "/collection/3/edit" for 127.0.0.1 at 2016-01-18 13:33:20 +0100
Processing by CollectionsController#edit_collection as HTML
  Parameters: {"id"=>"3"}
  [1m[36mUser Load (0.5ms)[0m  [1mSELECT `users`.* FROM `users` WHERE `users`.`id` = 1 LIMIT 1[0m
  [1m[35mCollection Load (0.3ms)[0m  SELECT `collections`.* FROM `collections` WHERE `collections`.`id` = 3 LIMIT 1
  [1m[36mCollectionImage Load (0.4ms)[0m  [1mSELECT `collection_images`.* FROM `collection_images` WHERE (collection_id = 3) LIMIT 1[0m
  Rendered collections/_collection_form.html.erb (14.5ms)
  [1m[35mRestaurant Load (3.5ms)[0m  SELECT `restaurants`.* FROM `restaurants` WHERE `restaurants`.`disabled` = 0
  Rendered collections/_collection_restaurants_form.html.erb (102.5ms)
  Rendered collections/edit_collection.html.erb within layouts/admin (119.6ms)
Completed 200 OK in 133ms (Views: 122.7ms | ActiveRecord: 4.7ms)


Started POST "/admin/collections/add_restaurant/3" for 127.0.0.1 at 2016-01-18 13:33:22 +0100
Processing by CollectionsController#add_restaurant as JSON
  Parameters: {"utf8"=>"âœ“", "authenticity_token"=>"cajmPApKUoLTDgL4nYG/B3GUhj8fezKDJZWxee28cyM=", "collection_restaurant"=>{"restaurant_id"=>"1"}, "id"=>"3"}
  [1m[36mUser Load (2.2ms)[0m  [1mSELECT `users`.* FROM `users` WHERE `users`.`id` = 1 LIMIT 1[0m
  [1m[35m (0.7ms)[0m  SELECT COUNT(*) FROM `collection_restaurants` WHERE (collection_id = '3' AND restaurant_id = '1')
  Rendered collections/add_restaurant.json.erb (0.1ms)
Completed 200 OK in 31ms (Views: 23.7ms | ActiveRecord: 2.9ms)


Started GET "/collection/3/edit" for 127.0.0.1 at 2016-01-18 13:33:47 +0100
Processing by CollectionsController#edit_collection as HTML
  Parameters: {"id"=>"3"}
  [1m[36mUser Load (0.3ms)[0m  [1mSELECT `users`.* FROM `users` WHERE `users`.`id` = 1 LIMIT 1[0m
  [1m[35mCollection Load (0.2ms)[0m  SELECT `collections`.* FROM `collections` WHERE `collections`.`id` = 3 LIMIT 1
  [1m[36mCollectionImage Load (0.3ms)[0m  [1mSELECT `collection_images`.* FROM `collection_images` WHERE (collection_id = 3) LIMIT 1[0m
  Rendered collections/_collection_form.html.erb (13.1ms)
  [1m[35mRestaurant Load (16.8ms)[0m  SELECT `restaurants`.* FROM `restaurants` WHERE `restaurants`.`disabled` = 0
  Rendered collections/_collection_restaurants_form.html.erb (262.3ms)
  Rendered collections/edit_collection.html.erb within layouts/admin (278.3ms)
Completed 200 OK in 292ms (Views: 270.7ms | ActiveRecord: 17.7ms)


Started POST "/admin/collections/add_restaurant/3" for 127.0.0.1 at 2016-01-18 13:33:52 +0100
Processing by CollectionsController#add_restaurant as JSON
  Parameters: {"utf8"=>"âœ“", "authenticity_token"=>"cajmPApKUoLTDgL4nYG/B3GUhj8fezKDJZWxee28cyM=", "collection_restaurant"=>{"restaurant_id"=>"1"}, "id"=>"3"}
  [1m[36mUser Load (9.6ms)[0m  [1mSELECT `users`.* FROM `users` WHERE `users`.`id` = 1 LIMIT 1[0m
  [1m[35m (3.6ms)[0m  SELECT COUNT(*) FROM `collection_restaurants` WHERE (collection_id = '3' AND restaurant_id = '1')
  Rendered collections/add_restaurant.json.erb (0.1ms)
Completed 200 OK in 55ms (Views: 35.9ms | ActiveRecord: 13.2ms)


Started GET "/collection/3/edit" for 127.0.0.1 at 2016-01-18 13:37:20 +0100
Processing by CollectionsController#edit_collection as HTML
  Parameters: {"id"=>"3"}
  [1m[36mUser Load (0.8ms)[0m  [1mSELECT `users`.* FROM `users` WHERE `users`.`id` = 1 LIMIT 1[0m
  [1m[35mCollection Load (0.5ms)[0m  SELECT `collections`.* FROM `collections` WHERE `collections`.`id` = 3 LIMIT 1
  [1m[36mCollectionImage Load (0.3ms)[0m  [1mSELECT `collection_images`.* FROM `collection_images` WHERE (collection_id = 3) LIMIT 1[0m
  Rendered collections/_collection_form.html.erb (18.2ms)
  [1m[35mRestaurant Load (4.8ms)[0m  SELECT `restaurants`.* FROM `restaurants` WHERE `restaurants`.`disabled` = 0
  Rendered collections/_collection_restaurants_form.html.erb (225.2ms)
  Rendered collections/edit_collection.html.erb within layouts/admin (247.0ms)
Completed 200 OK in 262ms (Views: 249.7ms | ActiveRecord: 6.5ms)


Started POST "/admin/collections/add_restaurant/3" for 127.0.0.1 at 2016-01-18 13:37:25 +0100
Processing by CollectionsController#add_restaurant as JSON
  Parameters: {"utf8"=>"âœ“", "authenticity_token"=>"cajmPApKUoLTDgL4nYG/B3GUhj8fezKDJZWxee28cyM=", "collection_restaurant"=>{"restaurant_id"=>"1"}, "id"=>"3"}
  [1m[36mUser Load (2.3ms)[0m  [1mSELECT `users`.* FROM `users` WHERE `users`.`id` = 1 LIMIT 1[0m
  [1m[35m (0.9ms)[0m  SELECT COUNT(*) FROM `collection_restaurants` WHERE (collection_id = '3' AND restaurant_id = '1')
  Rendered collections/add_restaurant.json.erb (0.1ms)
Completed 200 OK in 64ms (Views: 50.0ms | ActiveRecord: 3.3ms)


Started GET "/collection/3/edit" for 127.0.0.1 at 2016-01-18 13:37:46 +0100
Processing by CollectionsController#edit_collection as HTML
  Parameters: {"id"=>"3"}
  [1m[36mUser Load (0.3ms)[0m  [1mSELECT `users`.* FROM `users` WHERE `users`.`id` = 1 LIMIT 1[0m
  [1m[35mCollection Load (0.2ms)[0m  SELECT `collections`.* FROM `collections` WHERE `collections`.`id` = 3 LIMIT 1
  [1m[36mCollectionImage Load (0.3ms)[0m  [1mSELECT `collection_images`.* FROM `collection_images` WHERE (collection_id = 3) LIMIT 1[0m
  Rendered collections/_collection_form.html.erb (16.4ms)
  [1m[35mRestaurant Load (3.5ms)[0m  SELECT `restaurants`.* FROM `restaurants` WHERE `restaurants`.`disabled` = 0
  Rendered collections/_collection_restaurants_form.html.erb (140.2ms)
  Rendered collections/edit_collection.html.erb within layouts/admin (159.7ms)
Completed 200 OK in 180ms (Views: 171.4ms | ActiveRecord: 4.3ms)


Started POST "/admin/collections/add_restaurant/3" for 127.0.0.1 at 2016-01-18 13:37:49 +0100
Processing by CollectionsController#add_restaurant as JSON
  Parameters: {"utf8"=>"âœ“", "authenticity_token"=>"cajmPApKUoLTDgL4nYG/B3GUhj8fezKDJZWxee28cyM=", "collection_restaurant"=>{"restaurant_id"=>"1"}, "id"=>"3"}
  [1m[36mUser Load (5.0ms)[0m  [1mSELECT `users`.* FROM `users` WHERE `users`.`id` = 1 LIMIT 1[0m
  [1m[35m (0.2ms)[0m  SELECT COUNT(*) FROM `collection_restaurants` WHERE (collection_id = '3' AND restaurant_id = '1')
  Rendered collections/add_restaurant.json.erb (0.1ms)
Completed 200 OK in 46ms (Views: 29.0ms | ActiveRecord: 5.2ms)


Started GET "/collection/3/edit" for 127.0.0.1 at 2016-01-18 13:38:04 +0100
Processing by CollectionsController#edit_collection as HTML
  Parameters: {"id"=>"3"}
  [1m[36mUser Load (0.3ms)[0m  [1mSELECT `users`.* FROM `users` WHERE `users`.`id` = 1 LIMIT 1[0m
  [1m[35mCollection Load (0.1ms)[0m  SELECT `collections`.* FROM `collections` WHERE `collections`.`id` = 3 LIMIT 1
  [1m[36mCollectionImage Load (0.3ms)[0m  [1mSELECT `collection_images`.* FROM `collection_images` WHERE (collection_id = 3) LIMIT 1[0m
  Rendered collections/_collection_form.html.erb (12.1ms)
  [1m[35mRestaurant Load (3.4ms)[0m  SELECT `restaurants`.* FROM `restaurants` WHERE `restaurants`.`disabled` = 0
  Rendered collections/_collection_restaurants_form.html.erb (112.0ms)
  Rendered collections/edit_collection.html.erb within layouts/admin (126.9ms)
Completed 200 OK in 137ms (Views: 129.7ms | ActiveRecord: 4.1ms)


Started POST "/admin/collections/add_restaurant/3" for 127.0.0.1 at 2016-01-18 13:38:06 +0100
Processing by CollectionsController#add_restaurant as JSON
  Parameters: {"utf8"=>"âœ“", "authenticity_token"=>"cajmPApKUoLTDgL4nYG/B3GUhj8fezKDJZWxee28cyM=", "collection_restaurant"=>{"restaurant_id"=>"1"}, "id"=>"3"}
  [1m[36mUser Load (1.2ms)[0m  [1mSELECT `users`.* FROM `users` WHERE `users`.`id` = 1 LIMIT 1[0m
  [1m[35m (2.9ms)[0m  SELECT COUNT(*) FROM `collection_restaurants` WHERE (collection_id = '3' AND restaurant_id = '1')
  Rendered collections/add_restaurant.json.erb (0.1ms)
Completed 200 OK in 36ms (Views: 28.1ms | ActiveRecord: 4.1ms)


Started GET "/collection/3/edit" for 127.0.0.1 at 2016-01-18 13:38:23 +0100
Processing by CollectionsController#edit_collection as HTML
  Parameters: {"id"=>"3"}
  [1m[36mUser Load (0.4ms)[0m  [1mSELECT `users`.* FROM `users` WHERE `users`.`id` = 1 LIMIT 1[0m
  [1m[35mCollection Load (0.4ms)[0m  SELECT `collections`.* FROM `collections` WHERE `collections`.`id` = 3 LIMIT 1
  [1m[36mCollectionImage Load (0.3ms)[0m  [1mSELECT `collection_images`.* FROM `collection_images` WHERE (collection_id = 3) LIMIT 1[0m
  Rendered collections/_collection_form.html.erb (9.3ms)
  [1m[35mRestaurant Load (3.8ms)[0m  SELECT `restaurants`.* FROM `restaurants` WHERE `restaurants`.`disabled` = 0
  Rendered collections/_collection_restaurants_form.html.erb (104.8ms)
  Rendered collections/edit_collection.html.erb within layouts/admin (116.3ms)
Completed 200 OK in 132ms (Views: 120.3ms | ActiveRecord: 4.9ms)


Started POST "/admin/collections/add_restaurant/3" for 127.0.0.1 at 2016-01-18 13:38:26 +0100
Processing by CollectionsController#add_restaurant as JSON
  Parameters: {"utf8"=>"âœ“", "authenticity_token"=>"cajmPApKUoLTDgL4nYG/B3GUhj8fezKDJZWxee28cyM=", "collection_restaurant"=>{"restaurant_id"=>"1"}, "id"=>"3"}
  [1m[36mUser Load (0.3ms)[0m  [1mSELECT `users`.* FROM `users` WHERE `users`.`id` = 1 LIMIT 1[0m
  [1m[35m (1.4ms)[0m  SELECT COUNT(*) FROM `collection_restaurants` WHERE (collection_id = '3' AND restaurant_id = '1')
  Rendered collections/add_restaurant.json.erb (0.1ms)
Completed 200 OK in 30ms (Views: 25.1ms | ActiveRecord: 1.7ms)


Started GET "/collection/3/edit" for 127.0.0.1 at 2016-01-18 13:38:43 +0100
Processing by CollectionsController#edit_collection as HTML
  Parameters: {"id"=>"3"}
  [1m[36mUser Load (0.3ms)[0m  [1mSELECT `users`.* FROM `users` WHERE `users`.`id` = 1 LIMIT 1[0m
  [1m[35mCollection Load (0.3ms)[0m  SELECT `collections`.* FROM `collections` WHERE `collections`.`id` = 3 LIMIT 1
  [1m[36mCollectionImage Load (0.3ms)[0m  [1mSELECT `collection_images`.* FROM `collection_images` WHERE (collection_id = 3) LIMIT 1[0m
  Rendered collections/_collection_form.html.erb (16.3ms)
  [1m[35mRestaurant Load (3.8ms)[0m  SELECT `restaurants`.* FROM `restaurants` WHERE `restaurants`.`disabled` = 0
  Rendered collections/_collection_restaurants_form.html.erb (107.6ms)
  Rendered collections/edit_collection.html.erb within layouts/admin (126.4ms)
Completed 200 OK in 140ms (Views: 129.7ms | ActiveRecord: 4.7ms)


Started POST "/admin/collections/add_restaurant/3" for 127.0.0.1 at 2016-01-18 13:38:46 +0100
Processing by CollectionsController#add_restaurant as JSON
  Parameters: {"utf8"=>"âœ“", "authenticity_token"=>"cajmPApKUoLTDgL4nYG/B3GUhj8fezKDJZWxee28cyM=", "collection_restaurant"=>{"restaurant_id"=>"1"}, "id"=>"3"}
  [1m[36mUser Load (0.3ms)[0m  [1mSELECT `users`.* FROM `users` WHERE `users`.`id` = 1 LIMIT 1[0m
  [1m[35m (0.2ms)[0m  SELECT COUNT(*) FROM `collection_restaurants` WHERE (collection_id = '3' AND restaurant_id = '1')
  Rendered collections/add_restaurant.json.erb (0.1ms)
Completed 200 OK in 29ms (Views: 25.3ms | ActiveRecord: 0.5ms)


Started GET "/collection/3/edit" for 127.0.0.1 at 2016-01-18 13:40:22 +0100
Processing by CollectionsController#edit_collection as HTML
  Parameters: {"id"=>"3"}
  [1m[36mUser Load (0.3ms)[0m  [1mSELECT `users`.* FROM `users` WHERE `users`.`id` = 1 LIMIT 1[0m
  [1m[35mCollection Load (0.3ms)[0m  SELECT `collections`.* FROM `collections` WHERE `collections`.`id` = 3 LIMIT 1
  [1m[36mCollectionImage Load (0.6ms)[0m  [1mSELECT `collection_images`.* FROM `collection_images` WHERE (collection_id = 3) LIMIT 1[0m
  Rendered collections/_collection_form.html.erb (18.6ms)
  [1m[35mRestaurant Load (3.5ms)[0m  SELECT `restaurants`.* FROM `restaurants` WHERE `restaurants`.`disabled` = 0
  Rendered collections/_collection_restaurants_form.html.erb (100.0ms)
  Rendered collections/edit_collection.html.erb within layouts/admin (121.6ms)
Completed 200 OK in 136ms (Views: 124.3ms | ActiveRecord: 4.7ms)


Started POST "/admin/collections/add_restaurant/3" for 127.0.0.1 at 2016-01-18 13:40:24 +0100
Processing by CollectionsController#add_restaurant as JSON
  Parameters: {"utf8"=>"âœ“", "authenticity_token"=>"cajmPApKUoLTDgL4nYG/B3GUhj8fezKDJZWxee28cyM=", "collection_restaurant"=>{"restaurant_id"=>"1"}, "id"=>"3"}
  [1m[36mUser Load (0.8ms)[0m  [1mSELECT `users`.* FROM `users` WHERE `users`.`id` = 1 LIMIT 1[0m
  [1m[35m (0.4ms)[0m  SELECT COUNT(*) FROM `collection_restaurants` WHERE (collection_id = '3' AND restaurant_id = '1')
  Rendered collections/add_restaurant.json.erb (1.0ms)
Completed 200 OK in 37ms (Views: 31.0ms | ActiveRecord: 1.1ms)


Started GET "/collection/3/edit" for 127.0.0.1 at 2016-01-18 13:40:53 +0100
Processing by CollectionsController#edit_collection as HTML
  Parameters: {"id"=>"3"}
  [1m[36mUser Load (0.6ms)[0m  [1mSELECT `users`.* FROM `users` WHERE `users`.`id` = 1 LIMIT 1[0m
  [1m[35mCollection Load (0.2ms)[0m  SELECT `collections`.* FROM `collections` WHERE `collections`.`id` = 3 LIMIT 1
  [1m[36mCollectionImage Load (0.3ms)[0m  [1mSELECT `collection_images`.* FROM `collection_images` WHERE (collection_id = 3) LIMIT 1[0m
  Rendered collections/_collection_form.html.erb (14.5ms)
  [1m[35mRestaurant Load (3.9ms)[0m  SELECT `restaurants`.* FROM `restaurants` WHERE `restaurants`.`disabled` = 0
  Rendered collections/_collection_restaurants_form.html.erb (108.0ms)
  Rendered collections/edit_collection.html.erb within layouts/admin (125.6ms)
Completed 200 OK in 142ms (Views: 131.3ms | ActiveRecord: 4.9ms)


Started POST "/admin/collections/add_restaurant/3" for 127.0.0.1 at 2016-01-18 13:40:58 +0100
Processing by CollectionsController#add_restaurant as JSON
  Parameters: {"utf8"=>"âœ“", "authenticity_token"=>"cajmPApKUoLTDgL4nYG/B3GUhj8fezKDJZWxee28cyM=", "collection_restaurant"=>{"restaurant_id"=>"2"}, "id"=>"3"}
  [1m[36mUser Load (0.4ms)[0m  [1mSELECT `users`.* FROM `users` WHERE `users`.`id` = 1 LIMIT 1[0m
  [1m[35m (1.9ms)[0m  SELECT COUNT(*) FROM `collection_restaurants` WHERE (collection_id = '3' AND restaurant_id = '2')
Completed 500 Internal Server Error in 29ms

NameError (undefined local variable or method `restaurant_id' for #<CollectionsController:0x007fc259953260>):
  app/controllers/collections_controller.rb:198:in `block in add_restaurant'
  app/controllers/collections_controller.rb:191:in `add_restaurant'


  Rendered /Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_dispatch/middleware/templates/rescues/_trace.erb (1.8ms)
  Rendered /Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_dispatch/middleware/templates/rescues/_request_and_response.erb (1.5ms)
  Rendered /Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_dispatch/middleware/templates/rescues/diagnostics.erb within rescues/layout (52.1ms)


Started GET "/admin/collections/add_restaurant/3" for 127.0.0.1 at 2016-01-18 13:41:09 +0100

ActionController::RoutingError (No route matches [GET] "/admin/collections/add_restaurant/3"):
  actionpack (3.2.8) lib/action_dispatch/middleware/debug_exceptions.rb:21:in `call'
  actionpack (3.2.8) lib/action_dispatch/middleware/show_exceptions.rb:56:in `call'
  railties (3.2.8) lib/rails/rack/logger.rb:26:in `call_app'
  railties (3.2.8) lib/rails/rack/logger.rb:16:in `call'
  quiet_assets (1.0.3) lib/quiet_assets.rb:23:in `call_with_quiet_assets'
  actionpack (3.2.8) lib/action_dispatch/middleware/request_id.rb:22:in `call'
  rack (1.4.5) lib/rack/methodoverride.rb:21:in `call'
  rack (1.4.5) lib/rack/runtime.rb:17:in `call'
  activesupport (3.2.8) lib/active_support/cache/strategy/local_cache.rb:72:in `call'
  rack (1.4.5) lib/rack/lock.rb:15:in `call'
  actionpack (3.2.8) lib/action_dispatch/middleware/static.rb:62:in `call'
  dragonfly (0.9.15) lib/dragonfly/middleware.rb:13:in `call'
  rack-cache (1.2) lib/rack/cache/context.rb:136:in `forward'
  rack-cache (1.2) lib/rack/cache/context.rb:245:in `fetch'
  rack-cache (1.2) lib/rack/cache/context.rb:185:in `lookup'
  rack-cache (1.2) lib/rack/cache/context.rb:66:in `call!'
  rack-cache (1.2) lib/rack/cache/context.rb:51:in `call'
  railties (3.2.8) lib/rails/engine.rb:479:in `call'
  railties (3.2.8) lib/rails/application.rb:223:in `call'
  rack (1.4.5) lib/rack/content_length.rb:14:in `call'
  railties (3.2.8) lib/rails/rack/log_tailer.rb:17:in `call'
  rack (1.4.5) lib/rack/handler/webrick.rb:59:in `service'
  /Users/kevinmuller/.rvm/rubies/ruby-2.2.4/lib/ruby/2.2.0/webrick/httpserver.rb:138:in `service'
  /Users/kevinmuller/.rvm/rubies/ruby-2.2.4/lib/ruby/2.2.0/webrick/httpserver.rb:94:in `run'
  /Users/kevinmuller/.rvm/rubies/ruby-2.2.4/lib/ruby/2.2.0/webrick/server.rb:294:in `block in start_thread'


  Rendered /Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_dispatch/middleware/templates/rescues/routing_error.erb within rescues/layout (0.8ms)


Started GET "/admin/collections/add_restaurant/3" for 127.0.0.1 at 2016-01-18 13:41:15 +0100

ActionController::RoutingError (No route matches [GET] "/admin/collections/add_restaurant/3"):
  actionpack (3.2.8) lib/action_dispatch/middleware/debug_exceptions.rb:21:in `call'
  actionpack (3.2.8) lib/action_dispatch/middleware/show_exceptions.rb:56:in `call'
  railties (3.2.8) lib/rails/rack/logger.rb:26:in `call_app'
  railties (3.2.8) lib/rails/rack/logger.rb:16:in `call'
  quiet_assets (1.0.3) lib/quiet_assets.rb:23:in `call_with_quiet_assets'
  actionpack (3.2.8) lib/action_dispatch/middleware/request_id.rb:22:in `call'
  rack (1.4.5) lib/rack/methodoverride.rb:21:in `call'
  rack (1.4.5) lib/rack/runtime.rb:17:in `call'
  activesupport (3.2.8) lib/active_support/cache/strategy/local_cache.rb:72:in `call'
  rack (1.4.5) lib/rack/lock.rb:15:in `call'
  actionpack (3.2.8) lib/action_dispatch/middleware/static.rb:62:in `call'
  dragonfly (0.9.15) lib/dragonfly/middleware.rb:13:in `call'
  rack-cache (1.2) lib/rack/cache/context.rb:136:in `forward'
  rack-cache (1.2) lib/rack/cache/context.rb:245:in `fetch'
  rack-cache (1.2) lib/rack/cache/context.rb:185:in `lookup'
  rack-cache (1.2) lib/rack/cache/context.rb:66:in `call!'
  rack-cache (1.2) lib/rack/cache/context.rb:51:in `call'
  railties (3.2.8) lib/rails/engine.rb:479:in `call'
  railties (3.2.8) lib/rails/application.rb:223:in `call'
  rack (1.4.5) lib/rack/content_length.rb:14:in `call'
  railties (3.2.8) lib/rails/rack/log_tailer.rb:17:in `call'
  rack (1.4.5) lib/rack/handler/webrick.rb:59:in `service'
  /Users/kevinmuller/.rvm/rubies/ruby-2.2.4/lib/ruby/2.2.0/webrick/httpserver.rb:138:in `service'
  /Users/kevinmuller/.rvm/rubies/ruby-2.2.4/lib/ruby/2.2.0/webrick/httpserver.rb:94:in `run'
  /Users/kevinmuller/.rvm/rubies/ruby-2.2.4/lib/ruby/2.2.0/webrick/server.rb:294:in `block in start_thread'


  Rendered /Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_dispatch/middleware/templates/rescues/routing_error.erb within rescues/layout (0.8ms)


Started GET "/collection/3/edit" for 127.0.0.1 at 2016-01-18 13:41:51 +0100
Processing by CollectionsController#edit_collection as HTML
  Parameters: {"id"=>"3"}
  [1m[36mUser Load (0.4ms)[0m  [1mSELECT `users`.* FROM `users` WHERE `users`.`id` = 1 LIMIT 1[0m
  [1m[35mCollection Load (0.2ms)[0m  SELECT `collections`.* FROM `collections` WHERE `collections`.`id` = 3 LIMIT 1
  [1m[36m (0.3ms)[0m  [1mSELECT COUNT(*) FROM `filter_types` WHERE (code = 'features')[0m
  [1m[35m (0.2ms)[0m  SELECT COUNT(*) FROM `filters` WHERE (code = 'offer')
  [1m[36mCollectionImage Load (0.2ms)[0m  [1mSELECT `collection_images`.* FROM `collection_images` WHERE (collection_id = 3) LIMIT 1[0m
  Rendered collections/_collection_form.html.erb (48.0ms)
  [1m[35mRestaurant Load (3.0ms)[0m  SELECT `restaurants`.* FROM `restaurants` WHERE `restaurants`.`disabled` = 0
  Rendered collections/_collection_restaurants_form.html.erb (98.6ms)
  Rendered collections/edit_collection.html.erb within layouts/admin (149.6ms)
Completed 200 OK in 521ms (Views: 153.8ms | ActiveRecord: 22.6ms)


Started POST "/admin/collections/add_restaurant/3" for 127.0.0.1 at 2016-01-18 13:41:56 +0100
Processing by CollectionsController#add_restaurant as JSON
  Parameters: {"utf8"=>"âœ“", "authenticity_token"=>"cajmPApKUoLTDgL4nYG/B3GUhj8fezKDJZWxee28cyM=", "collection_restaurant"=>{"restaurant_id"=>"2"}, "id"=>"3"}
  [1m[36mUser Load (0.5ms)[0m  [1mSELECT `users`.* FROM `users` WHERE `users`.`id` = 1 LIMIT 1[0m
  [1m[35m (0.5ms)[0m  SELECT COUNT(*) FROM `collection_restaurants` WHERE (collection_id = '3' AND restaurant_id = '2')
  [1m[36m (2.5ms)[0m  [1mBEGIN[0m
  [1m[35mSQL (0.7ms)[0m  INSERT INTO `collection_restaurants` (`collection_id`, `order`, `restaurant_id`) VALUES (3, NULL, 2)
  [1m[36m (10.1ms)[0m  [1mCOMMIT[0m
  Rendered collections/add_restaurant.json.erb (0.9ms)
Completed 200 OK in 50ms (Views: 21.2ms | ActiveRecord: 14.3ms)


Started GET "/collection/3/edit" for 127.0.0.1 at 2016-01-18 13:47:22 +0100
Processing by CollectionsController#edit_collection as HTML
  Parameters: {"id"=>"3"}
  [1m[35mUser Load (0.7ms)[0m  SELECT `users`.* FROM `users` WHERE `users`.`id` = 1 LIMIT 1
  [1m[36mCollection Load (0.9ms)[0m  [1mSELECT `collections`.* FROM `collections` WHERE `collections`.`id` = 3 LIMIT 1[0m
  [1m[35m (0.2ms)[0m  SELECT COUNT(*) FROM `filter_types` WHERE (code = 'features')
  [1m[36m (0.2ms)[0m  [1mSELECT COUNT(*) FROM `filters` WHERE (code = 'offer')[0m
  [1m[35mCollectionImage Load (0.2ms)[0m  SELECT `collection_images`.* FROM `collection_images` WHERE (collection_id = 3) LIMIT 1
  Rendered collections/_collection_form.html.erb (39.7ms)
  [1m[36mRestaurant Load (3.3ms)[0m  [1mSELECT `restaurants`.* FROM `restaurants` WHERE `restaurants`.`disabled` = 0[0m
  Rendered collections/_collection_restaurants_form.html.erb (116.3ms)
  Rendered collections/edit_collection.html.erb within layouts/admin (159.2ms)
Completed 200 OK in 619ms (Views: 166.3ms | ActiveRecord: 50.1ms)


Started GET "/collection/3/edit" for 127.0.0.1 at 2016-01-18 13:47:27 +0100
Processing by CollectionsController#edit_collection as HTML
  Parameters: {"id"=>"3"}
  [1m[35mUser Load (0.8ms)[0m  SELECT `users`.* FROM `users` WHERE `users`.`id` = 1 LIMIT 1
  [1m[36mCollection Load (1.4ms)[0m  [1mSELECT `collections`.* FROM `collections` WHERE `collections`.`id` = 3 LIMIT 1[0m
  [1m[35mCollectionImage Load (1.5ms)[0m  SELECT `collection_images`.* FROM `collection_images` WHERE (collection_id = 3) LIMIT 1
  Rendered collections/_collection_form.html.erb (13.0ms)
  [1m[36mRestaurant Load (9.4ms)[0m  [1mSELECT `restaurants`.* FROM `restaurants` WHERE `restaurants`.`disabled` = 0[0m
  Rendered collections/_collection_restaurants_form.html.erb (132.0ms)
  Rendered collections/edit_collection.html.erb within layouts/admin (147.6ms)
Completed 200 OK in 165ms (Views: 143.4ms | ActiveRecord: 13.0ms)


Started POST "/admin/collections/add_restaurant/3" for 127.0.0.1 at 2016-01-18 13:47:30 +0100
Processing by CollectionsController#add_restaurant as JSON
  Parameters: {"utf8"=>"âœ“", "authenticity_token"=>"cajmPApKUoLTDgL4nYG/B3GUhj8fezKDJZWxee28cyM=", "collection_restaurant"=>{"restaurant_id"=>"1"}, "id"=>"3"}
  [1m[35mUser Load (1.7ms)[0m  SELECT `users`.* FROM `users` WHERE `users`.`id` = 1 LIMIT 1
  [1m[36m (2.2ms)[0m  [1mSELECT COUNT(*) FROM `collection_restaurants` WHERE (collection_id = '3' AND restaurant_id = '1')[0m
  Rendered collections/add_restaurant.json.erb (0.7ms)
Completed 200 OK in 33ms (Views: 22.5ms | ActiveRecord: 4.0ms)


Started GET "/collection/3/edit" for 127.0.0.1 at 2016-01-18 13:47:55 +0100
Processing by CollectionsController#edit_collection as HTML
  Parameters: {"id"=>"3"}
  [1m[35mUser Load (0.3ms)[0m  SELECT `users`.* FROM `users` WHERE `users`.`id` = 1 LIMIT 1
  [1m[36mCollection Load (0.3ms)[0m  [1mSELECT `collections`.* FROM `collections` WHERE `collections`.`id` = 3 LIMIT 1[0m
  [1m[35mCollectionImage Load (0.3ms)[0m  SELECT `collection_images`.* FROM `collection_images` WHERE (collection_id = 3) LIMIT 1
  Rendered collections/_collection_form.html.erb (10.1ms)
  [1m[36mRestaurant Load (4.5ms)[0m  [1mSELECT `restaurants`.* FROM `restaurants` WHERE `restaurants`.`disabled` = 0[0m
  Rendered collections/_collection_restaurants_form.html.erb (185.0ms)
  Rendered collections/edit_collection.html.erb within layouts/admin (197.5ms)
Completed 200 OK in 209ms (Views: 199.8ms | ActiveRecord: 5.5ms)


Started POST "/admin/collections/add_restaurant/3" for 127.0.0.1 at 2016-01-18 13:47:57 +0100
Processing by CollectionsController#add_restaurant as JSON
  Parameters: {"utf8"=>"âœ“", "authenticity_token"=>"cajmPApKUoLTDgL4nYG/B3GUhj8fezKDJZWxee28cyM=", "collection_restaurant"=>{"restaurant_id"=>"1"}, "id"=>"3"}
  [1m[35mUser Load (0.8ms)[0m  SELECT `users`.* FROM `users` WHERE `users`.`id` = 1 LIMIT 1
  [1m[36m (1.8ms)[0m  [1mSELECT COUNT(*) FROM `collection_restaurants` WHERE (collection_id = '3' AND restaurant_id = '1')[0m
  Rendered collections/add_restaurant.json.erb (0.1ms)
Completed 200 OK in 41ms (Views: 32.6ms | ActiveRecord: 2.6ms)


Started GET "/collection/3/edit" for 127.0.0.1 at 2016-01-18 13:49:48 +0100
Processing by CollectionsController#edit_collection as HTML
  Parameters: {"id"=>"3"}
  [1m[35mUser Load (0.3ms)[0m  SELECT `users`.* FROM `users` WHERE `users`.`id` = 1 LIMIT 1
  [1m[36mCollection Load (0.6ms)[0m  [1mSELECT `collections`.* FROM `collections` WHERE `collections`.`id` = 3 LIMIT 1[0m
  [1m[35mCollectionImage Load (0.4ms)[0m  SELECT `collection_images`.* FROM `collection_images` WHERE (collection_id = 3) LIMIT 1
  Rendered collections/_collection_form.html.erb (11.9ms)
  [1m[36mRestaurant Load (7.7ms)[0m  [1mSELECT `restaurants`.* FROM `restaurants` WHERE `restaurants`.`disabled` = 0[0m
  Rendered collections/_collection_restaurants_form.html.erb (144.5ms)
  Rendered collections/edit_collection.html.erb within layouts/admin (176.9ms)
Completed 200 OK in 210ms (Views: 193.6ms | ActiveRecord: 9.0ms)


Started POST "/admin/collections/add_restaurant/3" for 127.0.0.1 at 2016-01-18 13:49:51 +0100
Processing by CollectionsController#add_restaurant as JSON
  Parameters: {"utf8"=>"âœ“", "authenticity_token"=>"cajmPApKUoLTDgL4nYG/B3GUhj8fezKDJZWxee28cyM=", "collection_restaurant"=>{"restaurant_id"=>"1"}, "id"=>"3"}
  [1m[35mUser Load (6.6ms)[0m  SELECT `users`.* FROM `users` WHERE `users`.`id` = 1 LIMIT 1
  [1m[36m (0.9ms)[0m  [1mSELECT COUNT(*) FROM `collection_restaurants` WHERE (collection_id = '3' AND restaurant_id = '1')[0m
  Rendered collections/add_restaurant.json.erb (1.4ms)
Completed 200 OK in 37ms (Views: 23.5ms | ActiveRecord: 7.6ms)


Started GET "/collection/3/edit" for 127.0.0.1 at 2016-01-18 13:50:34 +0100
Processing by CollectionsController#edit_collection as HTML
  Parameters: {"id"=>"3"}
  [1m[35mUser Load (0.3ms)[0m  SELECT `users`.* FROM `users` WHERE `users`.`id` = 1 LIMIT 1
  [1m[36mCollection Load (0.2ms)[0m  [1mSELECT `collections`.* FROM `collections` WHERE `collections`.`id` = 3 LIMIT 1[0m
  [1m[35mCollectionImage Load (0.3ms)[0m  SELECT `collection_images`.* FROM `collection_images` WHERE (collection_id = 3) LIMIT 1
  Rendered collections/_collection_form.html.erb (9.2ms)
  [1m[36mRestaurant Load (3.8ms)[0m  [1mSELECT `restaurants`.* FROM `restaurants` WHERE `restaurants`.`disabled` = 0[0m
  Rendered collections/_collection_restaurants_form.html.erb (85.8ms)
  Rendered collections/edit_collection.html.erb within layouts/admin (98.3ms)
Completed 200 OK in 109ms (Views: 100.4ms | ActiveRecord: 4.6ms)


Started POST "/admin/collections/add_restaurant/3" for 127.0.0.1 at 2016-01-18 13:50:37 +0100
Processing by CollectionsController#add_restaurant as JSON
  Parameters: {"utf8"=>"âœ“", "authenticity_token"=>"cajmPApKUoLTDgL4nYG/B3GUhj8fezKDJZWxee28cyM=", "collection_restaurant"=>{"restaurant_id"=>"1"}, "id"=>"3"}
  [1m[35mUser Load (0.3ms)[0m  SELECT `users`.* FROM `users` WHERE `users`.`id` = 1 LIMIT 1
  [1m[36m (0.7ms)[0m  [1mSELECT COUNT(*) FROM `collection_restaurants` WHERE (collection_id = '3' AND restaurant_id = '1')[0m
  Rendered collections/add_restaurant.json.erb (0.1ms)
Completed 200 OK in 28ms (Views: 23.0ms | ActiveRecord: 1.0ms)


Started GET "/collection/3/edit" for 127.0.0.1 at 2016-01-18 13:50:55 +0100
Processing by CollectionsController#edit_collection as HTML
  Parameters: {"id"=>"3"}
  [1m[35mUser Load (0.3ms)[0m  SELECT `users`.* FROM `users` WHERE `users`.`id` = 1 LIMIT 1
  [1m[36mCollection Load (0.2ms)[0m  [1mSELECT `collections`.* FROM `collections` WHERE `collections`.`id` = 3 LIMIT 1[0m
  [1m[35mCollectionImage Load (0.6ms)[0m  SELECT `collection_images`.* FROM `collection_images` WHERE (collection_id = 3) LIMIT 1
  Rendered collections/_collection_form.html.erb (13.1ms)
  [1m[36mRestaurant Load (3.6ms)[0m  [1mSELECT `restaurants`.* FROM `restaurants` WHERE `restaurants`.`disabled` = 0[0m
  Rendered collections/_collection_restaurants_form.html.erb (102.6ms)
  Rendered collections/edit_collection.html.erb within layouts/admin (118.9ms)
Completed 200 OK in 132ms (Views: 123.4ms | ActiveRecord: 4.7ms)


Started POST "/admin/collections/add_restaurant/3" for 127.0.0.1 at 2016-01-18 13:50:58 +0100
Processing by CollectionsController#add_restaurant as JSON
  Parameters: {"utf8"=>"âœ“", "authenticity_token"=>"cajmPApKUoLTDgL4nYG/B3GUhj8fezKDJZWxee28cyM=", "collection_restaurant"=>{"restaurant_id"=>"1"}, "id"=>"3"}
  [1m[35mUser Load (1.7ms)[0m  SELECT `users`.* FROM `users` WHERE `users`.`id` = 1 LIMIT 1
  [1m[36m (0.7ms)[0m  [1mSELECT COUNT(*) FROM `collection_restaurants` WHERE (collection_id = '3' AND restaurant_id = '1')[0m
  Rendered collections/add_restaurant.json.erb (0.1ms)
Completed 200 OK in 34ms (Views: 27.0ms | ActiveRecord: 2.4ms)


Started POST "/admin/collections/add_restaurant/3" for 127.0.0.1 at 2016-01-18 13:51:00 +0100
Processing by CollectionsController#add_restaurant as JSON
  Parameters: {"utf8"=>"âœ“", "authenticity_token"=>"cajmPApKUoLTDgL4nYG/B3GUhj8fezKDJZWxee28cyM=", "collection_restaurant"=>{"restaurant_id"=>"1"}, "id"=>"3"}
  [1m[35mUser Load (0.4ms)[0m  SELECT `users`.* FROM `users` WHERE `users`.`id` = 1 LIMIT 1
  [1m[36m (1.2ms)[0m  [1mSELECT COUNT(*) FROM `collection_restaurants` WHERE (collection_id = '3' AND restaurant_id = '1')[0m
  Rendered collections/add_restaurant.json.erb (0.0ms)
Completed 200 OK in 44ms (Views: 38.5ms | ActiveRecord: 1.6ms)


Started GET "/collection/3/edit" for 127.0.0.1 at 2016-01-18 13:57:59 +0100
Processing by CollectionsController#edit_collection as HTML
  Parameters: {"id"=>"3"}
  [1m[35mUser Load (0.2ms)[0m  SELECT `users`.* FROM `users` WHERE `users`.`id` = 1 LIMIT 1
  [1m[36mCollection Load (0.2ms)[0m  [1mSELECT `collections`.* FROM `collections` WHERE `collections`.`id` = 3 LIMIT 1[0m
  [1m[35m (0.2ms)[0m  SELECT COUNT(*) FROM `filter_types` WHERE (code = 'features')
  [1m[36m (0.2ms)[0m  [1mSELECT COUNT(*) FROM `filters` WHERE (code = 'offer')[0m
Completed 500 Internal Server Error in 307ms

NoMethodError (undefined method `collection_restaurant' for #<Class:0x007fc2575f9a30>):
  app/controllers/collections_controller.rb:114:in `edit_collection'


  Rendered /Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_dispatch/middleware/templates/rescues/_trace.erb (1.4ms)
  Rendered /Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_dispatch/middleware/templates/rescues/_request_and_response.erb (1.4ms)
  Rendered /Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_dispatch/middleware/templates/rescues/diagnostics.erb within rescues/layout (49.5ms)


Started GET "/collection/3/edit" for 127.0.0.1 at 2016-01-18 14:08:39 +0100
Processing by CollectionsController#edit_collection as HTML
  Parameters: {"id"=>"3"}
  [1m[35mUser Load (0.3ms)[0m  SELECT `users`.* FROM `users` WHERE `users`.`id` = 1 LIMIT 1
  [1m[36mCollection Load (0.2ms)[0m  [1mSELECT `collections`.* FROM `collections` WHERE `collections`.`id` = 3 LIMIT 1[0m
  [1m[35m (0.2ms)[0m  SELECT COUNT(*) FROM `filter_types` WHERE (code = 'features')
  [1m[36m (0.2ms)[0m  [1mSELECT COUNT(*) FROM `filters` WHERE (code = 'offer')[0m
Completed 500 Internal Server Error in 267ms

NoMethodError (undefined method `collection_restaurants' for #<Class:0x007fc245580e30>):
  app/controllers/collections_controller.rb:114:in `edit_collection'


  Rendered /Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_dispatch/middleware/templates/rescues/_trace.erb (1.5ms)
  Rendered /Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_dispatch/middleware/templates/rescues/_request_and_response.erb (1.1ms)
  Rendered /Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_dispatch/middleware/templates/rescues/diagnostics.erb within rescues/layout (44.4ms)


Started GET "/collection/3/edit" for 127.0.0.1 at 2016-01-18 14:11:04 +0100
Processing by CollectionsController#edit_collection as HTML
  Parameters: {"id"=>"3"}
  [1m[35mUser Load (0.2ms)[0m  SELECT `users`.* FROM `users` WHERE `users`.`id` = 1 LIMIT 1
  [1m[36mCollection Load (0.2ms)[0m  [1mSELECT `collections`.* FROM `collections` WHERE `collections`.`id` = 3 LIMIT 1[0m
  [1m[35m (0.2ms)[0m  SELECT COUNT(*) FROM `filter_types` WHERE (code = 'features')
  [1m[36m (0.2ms)[0m  [1mSELECT COUNT(*) FROM `filters` WHERE (code = 'offer')[0m
  [1m[35mCollectionRestaurant Load (0.2ms)[0m  SELECT `collection_restaurants`.* FROM `collection_restaurants` WHERE `collection_restaurants`.`collection_id` = 3
  [1m[36mCollectionImage Load (0.2ms)[0m  [1mSELECT `collection_images`.* FROM `collection_images` WHERE (collection_id = 3) LIMIT 1[0m
  Rendered collections/_collection_form.html.erb (39.5ms)
  [1m[35mRestaurant Load (3.3ms)[0m  SELECT `restaurants`.* FROM `restaurants` WHERE `restaurants`.`disabled` = 0
  Rendered collections/_collection_restaurants_form.html.erb (108.6ms)
  Rendered collections/_collection_restaurants_list.html.erb (2.3ms)
  Rendered collections/edit_collection.html.erb within layouts/admin (177.2ms)
Completed 500 Internal Server Error in 423ms

ActionView::Template::Error (First argument must be a Ransack::Search!):
    1: <table class="table table-condensed table-striped">
    2:   <thead>
    3:   <tr>
    4:     <th style="width: 20%"><%= sort_link @search, :name, "Restaurant name" %></th>
    5:     <th style="width: 25%">Actions</th>
    6:   </tr>
    7:   </thead>
  app/views/collections/_collection_restaurants_list.html.erb:4:in `_app_views_collections__collection_restaurants_list_html_erb___171350222027666675_70236345687180'
  app/views/collections/edit_collection.html.erb:18:in `_app_views_collections_edit_collection_html_erb___2603788858892649966_70236384724960'


  Rendered /Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_dispatch/middleware/templates/rescues/_trace.erb (1.8ms)
  Rendered /Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_dispatch/middleware/templates/rescues/_request_and_response.erb (1.1ms)
  Rendered /Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_dispatch/middleware/templates/rescues/template_error.erb within rescues/layout (45.4ms)


Started GET "/collection/3/edit" for 127.0.0.1 at 2016-01-18 14:11:46 +0100
Processing by CollectionsController#edit_collection as HTML
  Parameters: {"id"=>"3"}
  [1m[36mUser Load (0.2ms)[0m  [1mSELECT `users`.* FROM `users` WHERE `users`.`id` = 1 LIMIT 1[0m
  [1m[35mCollection Load (0.2ms)[0m  SELECT `collections`.* FROM `collections` WHERE `collections`.`id` = 3 LIMIT 1
  [1m[36m (0.2ms)[0m  [1mSELECT COUNT(*) FROM `filter_types` WHERE (code = 'features')[0m
  [1m[35m (0.2ms)[0m  SELECT COUNT(*) FROM `filters` WHERE (code = 'offer')
  [1m[36mCollectionImage Load (0.2ms)[0m  [1mSELECT `collection_images`.* FROM `collection_images` WHERE (collection_id = 3) LIMIT 1[0m
  Rendered collections/_collection_form.html.erb (34.3ms)
  [1m[35mRestaurant Load (3.7ms)[0m  SELECT `restaurants`.* FROM `restaurants` WHERE `restaurants`.`disabled` = 0
  Rendered collections/_collection_restaurants_form.html.erb (90.0ms)
  Rendered collections/_collection_restaurants_list.html.erb (0.8ms)
  Rendered collections/edit_collection.html.erb within layouts/admin (129.0ms)
Completed 500 Internal Server Error in 364ms

ActionView::Template::Error (First argument must be a Ransack::Search!):
    1: <table class="table table-condensed table-striped">
    2:   <thead>
    3:   <tr>
    4:     <th style="width: 20%"><%= sort_link @search, :name, "Restaurant name" %></th>
    5:     <th style="width: 25%">Actions</th>
    6:   </tr>
    7:   </thead>
  app/views/collections/_collection_restaurants_list.html.erb:4:in `_app_views_collections__collection_restaurants_list_html_erb___171350222027666675_70236345687180'
  app/views/collections/edit_collection.html.erb:18:in `_app_views_collections_edit_collection_html_erb___2603788858892649966_70236384724960'


  Rendered /Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_dispatch/middleware/templates/rescues/_trace.erb (1.7ms)
  Rendered /Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_dispatch/middleware/templates/rescues/_request_and_response.erb (1.3ms)
  Rendered /Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_dispatch/middleware/templates/rescues/template_error.erb within rescues/layout (47.9ms)


Started GET "/admin/reviews" for 127.0.0.1 at 2016-01-18 14:14:54 +0100
Processing by ReviewsController#index as HTML
  [1m[36mUser Load (0.3ms)[0m  [1mSELECT `users`.* FROM `users` WHERE `users`.`id` = 1 LIMIT 1[0m
  Rendered shared/_review_manage_tabs.html.erb (0.7ms)
  Rendered reviews/_condition_fields.html.erb (20.3ms)
  [1m[35mReview Load (0.4ms)[0m  SELECT `reviews`.* FROM `reviews` ORDER BY created_at DESC LIMIT 30 OFFSET 0
  [1m[36m (0.2ms)[0m  [1mSELECT COUNT(*) FROM `reviews` [0m
  Rendered reviews/index.html.erb within layouts/admin (50.4ms)
Completed 200 OK in 75ms (Views: 71.3ms | ActiveRecord: 0.8ms)


Started GET "/admin/restaurants" for 127.0.0.1 at 2016-01-18 14:14:55 +0100
Processing by RestaurantsController#index as HTML
  [1m[35mUser Load (0.7ms)[0m  SELECT `users`.* FROM `users` WHERE `users`.`id` = 1 LIMIT 1
  Rendered shared/_restaurant_manage_tabs.html.erb (0.6ms)
  Rendered restaurants/_condition_fields.html.erb (8.1ms)
  [1m[36mRestaurant Load (1.0ms)[0m  [1mSELECT `restaurants`.* FROM `restaurants` ORDER BY disabled ASC,created_at DESC LIMIT 12 OFFSET 0[0m
  [1m[35mPhoto Load (0.4ms)[0m  SELECT `photos`.* FROM `photos` WHERE (restaurant_id = 876 and cover = true and status = 1) LIMIT 1
  [1m[36mPhoto Load (0.4ms)[0m  [1mSELECT `photos`.* FROM `photos` WHERE `photos`.`restaurant_id` = 876 AND `photos`.`status` = 1 ORDER BY restaurant_id ASC, created_at DESC LIMIT 1[0m
  [1m[35mPhoto Load (0.6ms)[0m  SELECT `photos`.* FROM `photos` WHERE (restaurant_id = 851 and cover = true and status = 1) LIMIT 1
  [1m[36mPhoto Load (0.3ms)[0m  [1mSELECT `photos`.* FROM `photos` WHERE `photos`.`restaurant_id` = 851 AND `photos`.`status` = 1 ORDER BY restaurant_id ASC, created_at DESC LIMIT 1[0m
  [1m[35mPhoto Load (0.4ms)[0m  SELECT `photos`.* FROM `photos` WHERE (restaurant_id = 693 and cover = true and status = 1) LIMIT 1
  [1m[36mPhoto Load (0.4ms)[0m  [1mSELECT `photos`.* FROM `photos` WHERE `photos`.`restaurant_id` = 693 AND `photos`.`status` = 1 ORDER BY restaurant_id ASC, created_at DESC LIMIT 1[0m
  [1m[35mPhoto Load (0.4ms)[0m  SELECT `photos`.* FROM `photos` WHERE (restaurant_id = 686 and cover = true and status = 1) LIMIT 1
  [1m[36mPhoto Load (0.3ms)[0m  [1mSELECT `photos`.* FROM `photos` WHERE `photos`.`restaurant_id` = 686 AND `photos`.`status` = 1 ORDER BY restaurant_id ASC, created_at DESC LIMIT 1[0m
  [1m[35mPhoto Load (0.4ms)[0m  SELECT `photos`.* FROM `photos` WHERE (restaurant_id = 669 and cover = true and status = 1) LIMIT 1
  [1m[36mPhoto Load (0.3ms)[0m  [1mSELECT `photos`.* FROM `photos` WHERE `photos`.`restaurant_id` = 669 AND `photos`.`status` = 1 ORDER BY restaurant_id ASC, created_at DESC LIMIT 1[0m
  [1m[35mPhoto Load (0.3ms)[0m  SELECT `photos`.* FROM `photos` WHERE (restaurant_id = 251 and cover = true and status = 1) LIMIT 1
  [1m[36mPhoto Load (0.4ms)[0m  [1mSELECT `photos`.* FROM `photos` WHERE `photos`.`restaurant_id` = 251 AND `photos`.`status` = 1 ORDER BY restaurant_id ASC, created_at DESC LIMIT 1[0m
  [1m[35mPhoto Load (0.7ms)[0m  SELECT `photos`.* FROM `photos` WHERE (restaurant_id = 250 and cover = true and status = 1) LIMIT 1
  [1m[36mPhoto Load (0.3ms)[0m  [1mSELECT `photos`.* FROM `photos` WHERE `photos`.`restaurant_id` = 250 AND `photos`.`status` = 1 ORDER BY restaurant_id ASC, created_at DESC LIMIT 1[0m
  [1m[35mPhoto Load (0.3ms)[0m  SELECT `photos`.* FROM `photos` WHERE (restaurant_id = 237 and cover = true and status = 1) LIMIT 1
  [1m[36mPhoto Load (0.3ms)[0m  [1mSELECT `photos`.* FROM `photos` WHERE `photos`.`restaurant_id` = 237 AND `photos`.`status` = 1 ORDER BY restaurant_id ASC, created_at DESC LIMIT 1[0m
  [1m[35mPhoto Load (0.5ms)[0m  SELECT `photos`.* FROM `photos` WHERE (restaurant_id = 231 and cover = true and status = 1) LIMIT 1
  [1m[36mPhoto Load (0.3ms)[0m  [1mSELECT `photos`.* FROM `photos` WHERE `photos`.`restaurant_id` = 231 AND `photos`.`status` = 1 ORDER BY restaurant_id ASC, created_at DESC LIMIT 1[0m
  [1m[35mPhoto Load (0.3ms)[0m  SELECT `photos`.* FROM `photos` WHERE (restaurant_id = 222 and cover = true and status = 1) LIMIT 1
  [1m[36mPhoto Load (0.3ms)[0m  [1mSELECT `photos`.* FROM `photos` WHERE `photos`.`restaurant_id` = 222 AND `photos`.`status` = 1 ORDER BY restaurant_id ASC, created_at DESC LIMIT 1[0m
  [1m[35mPhoto Load (0.8ms)[0m  SELECT `photos`.* FROM `photos` WHERE (restaurant_id = 221 and cover = true and status = 1) LIMIT 1
  [1m[36mPhoto Load (0.7ms)[0m  [1mSELECT `photos`.* FROM `photos` WHERE `photos`.`restaurant_id` = 221 AND `photos`.`status` = 1 ORDER BY restaurant_id ASC, created_at DESC LIMIT 1[0m
  [1m[35mPhoto Load (0.3ms)[0m  SELECT `photos`.* FROM `photos` WHERE (restaurant_id = 216 and cover = true and status = 1) LIMIT 1
  [1m[36mPhoto Load (0.3ms)[0m  [1mSELECT `photos`.* FROM `photos` WHERE `photos`.`restaurant_id` = 216 AND `photos`.`status` = 1 ORDER BY restaurant_id ASC, created_at DESC LIMIT 1[0m
  [1m[35m (0.9ms)[0m  SELECT COUNT(*) FROM `restaurants` 
  Rendered restaurants/index.html.erb within layouts/admin (131.0ms)
Completed 200 OK in 159ms (Views: 141.8ms | ActiveRecord: 14.5ms)


Started GET "/admin/collections" for 127.0.0.1 at 2016-01-18 14:14:56 +0100
Processing by CollectionsController#index as HTML
  Rendered shared/_restaurant_manage_tabs.html.erb (0.6ms)
  [1m[36mCollection Load (0.4ms)[0m  [1mSELECT `collections`.* FROM `collections` ORDER BY name ASC, created_at DESC LIMIT 12 OFFSET 0[0m
  [1m[35mCollectionImage Load (0.2ms)[0m  SELECT `collection_images`.* FROM `collection_images` WHERE (collection_id = 3) LIMIT 1
  [1m[36mCollectionImage Load (0.2ms)[0m  [1mSELECT `collection_images`.* FROM `collection_images` WHERE (collection_id = 2) LIMIT 1[0m
  [1m[35m (0.2ms)[0m  SELECT COUNT(*) FROM `collections` 
  Rendered collections/index.erb within layouts/admin (12.4ms)
  [1m[36mUser Load (0.2ms)[0m  [1mSELECT `users`.* FROM `users` WHERE `users`.`id` = 1 LIMIT 1[0m
Completed 200 OK in 21ms (Views: 19.0ms | ActiveRecord: 1.2ms)


Started GET "/admin/collections?q%5Bs%5D=name+asc" for 127.0.0.1 at 2016-01-18 14:14:58 +0100
Processing by CollectionsController#index as HTML
  Parameters: {"q"=>{"s"=>"name asc"}}
  Rendered shared/_restaurant_manage_tabs.html.erb (0.9ms)
  [1m[35mCollection Load (0.4ms)[0m  SELECT `collections`.* FROM `collections` ORDER BY `collections`.`name` ASC, name ASC, created_at DESC LIMIT 12 OFFSET 0
  [1m[36mCollectionImage Load (0.2ms)[0m  [1mSELECT `collection_images`.* FROM `collection_images` WHERE (collection_id = 3) LIMIT 1[0m
  [1m[35mCollectionImage Load (0.2ms)[0m  SELECT `collection_images`.* FROM `collection_images` WHERE (collection_id = 2) LIMIT 1
  [1m[36m (0.2ms)[0m  [1mSELECT COUNT(*) FROM `collections` [0m
  Rendered collections/index.erb within layouts/admin (16.3ms)
  [1m[35mUser Load (0.3ms)[0m  SELECT `users`.* FROM `users` WHERE `users`.`id` = 1 LIMIT 1
Completed 200 OK in 27ms (Views: 24.3ms | ActiveRecord: 1.2ms)


Started GET "/admin/collections?q%5Bs%5D=name+desc" for 127.0.0.1 at 2016-01-18 14:15:06 +0100
Processing by CollectionsController#index as HTML
  Parameters: {"q"=>{"s"=>"name desc"}}
  Rendered shared/_restaurant_manage_tabs.html.erb (0.9ms)
  [1m[36mCollection Load (0.3ms)[0m  [1mSELECT `collections`.* FROM `collections` ORDER BY `collections`.`name` DESC, name ASC, created_at DESC LIMIT 12 OFFSET 0[0m
  [1m[35mCollectionImage Load (0.3ms)[0m  SELECT `collection_images`.* FROM `collection_images` WHERE (collection_id = 2) LIMIT 1
  [1m[36mCollectionImage Load (0.2ms)[0m  [1mSELECT `collection_images`.* FROM `collection_images` WHERE (collection_id = 3) LIMIT 1[0m
  [1m[35m (0.5ms)[0m  SELECT COUNT(*) FROM `collections` 
  Rendered collections/index.erb within layouts/admin (17.5ms)
  [1m[36mUser Load (0.5ms)[0m  [1mSELECT `users`.* FROM `users` WHERE `users`.`id` = 1 LIMIT 1[0m
Completed 200 OK in 29ms (Views: 25.9ms | ActiveRecord: 1.8ms)


Started GET "/admin/collections?q%5Bs%5D=name+asc" for 127.0.0.1 at 2016-01-18 14:15:07 +0100
Processing by CollectionsController#index as HTML
  Parameters: {"q"=>{"s"=>"name asc"}}
  Rendered shared/_restaurant_manage_tabs.html.erb (0.9ms)
  [1m[35mCollection Load (0.3ms)[0m  SELECT `collections`.* FROM `collections` ORDER BY `collections`.`name` ASC, name ASC, created_at DESC LIMIT 12 OFFSET 0
  [1m[36mCollectionImage Load (0.2ms)[0m  [1mSELECT `collection_images`.* FROM `collection_images` WHERE (collection_id = 3) LIMIT 1[0m
  [1m[35mCollectionImage Load (0.2ms)[0m  SELECT `collection_images`.* FROM `collection_images` WHERE (collection_id = 2) LIMIT 1
  [1m[36m (0.3ms)[0m  [1mSELECT COUNT(*) FROM `collections` [0m
  Rendered collections/index.erb within layouts/admin (17.1ms)
  [1m[35mUser Load (0.4ms)[0m  SELECT `users`.* FROM `users` WHERE `users`.`id` = 1 LIMIT 1
Completed 200 OK in 27ms (Views: 24.8ms | ActiveRecord: 1.4ms)


Started GET "/admin/collections?q%5Bs%5D=name+desc" for 127.0.0.1 at 2016-01-18 14:15:08 +0100
Processing by CollectionsController#index as HTML
  Parameters: {"q"=>{"s"=>"name desc"}}
  Rendered shared/_restaurant_manage_tabs.html.erb (0.8ms)
  [1m[36mCollection Load (0.3ms)[0m  [1mSELECT `collections`.* FROM `collections` ORDER BY `collections`.`name` DESC, name ASC, created_at DESC LIMIT 12 OFFSET 0[0m
  [1m[35mCollectionImage Load (0.2ms)[0m  SELECT `collection_images`.* FROM `collection_images` WHERE (collection_id = 2) LIMIT 1
  [1m[36mCollectionImage Load (0.4ms)[0m  [1mSELECT `collection_images`.* FROM `collection_images` WHERE (collection_id = 3) LIMIT 1[0m
  [1m[35m (0.2ms)[0m  SELECT COUNT(*) FROM `collections` 
  Rendered collections/index.erb within layouts/admin (17.7ms)
  [1m[36mUser Load (0.3ms)[0m  [1mSELECT `users`.* FROM `users` WHERE `users`.`id` = 1 LIMIT 1[0m
Completed 200 OK in 29ms (Views: 26.7ms | ActiveRecord: 1.3ms)


Started GET "/admin/collections?q%5Bs%5D=name+asc" for 127.0.0.1 at 2016-01-18 14:15:09 +0100
Processing by CollectionsController#index as HTML
  Parameters: {"q"=>{"s"=>"name asc"}}
  Rendered shared/_restaurant_manage_tabs.html.erb (1.3ms)
  [1m[35mCollection Load (0.4ms)[0m  SELECT `collections`.* FROM `collections` ORDER BY `collections`.`name` ASC, name ASC, created_at DESC LIMIT 12 OFFSET 0
  [1m[36mCollectionImage Load (0.2ms)[0m  [1mSELECT `collection_images`.* FROM `collection_images` WHERE (collection_id = 3) LIMIT 1[0m
  [1m[35mCollectionImage Load (0.3ms)[0m  SELECT `collection_images`.* FROM `collection_images` WHERE (collection_id = 2) LIMIT 1
  [1m[36m (0.2ms)[0m  [1mSELECT COUNT(*) FROM `collections` [0m
  Rendered collections/index.erb within layouts/admin (17.9ms)
  [1m[35mUser Load (0.3ms)[0m  SELECT `users`.* FROM `users` WHERE `users`.`id` = 1 LIMIT 1
Completed 200 OK in 29ms (Views: 26.7ms | ActiveRecord: 1.3ms)


Started GET "/admin/collections?q%5Bs%5D=name+desc" for 127.0.0.1 at 2016-01-18 14:15:15 +0100
Processing by CollectionsController#index as HTML
  Parameters: {"q"=>{"s"=>"name desc"}}
  Rendered shared/_restaurant_manage_tabs.html.erb (1.0ms)
  [1m[36mCollection Load (0.3ms)[0m  [1mSELECT `collections`.* FROM `collections` ORDER BY `collections`.`name` DESC, name ASC, created_at DESC LIMIT 12 OFFSET 0[0m
  [1m[35mCollectionImage Load (0.2ms)[0m  SELECT `collection_images`.* FROM `collection_images` WHERE (collection_id = 2) LIMIT 1
  [1m[36mCollectionImage Load (0.2ms)[0m  [1mSELECT `collection_images`.* FROM `collection_images` WHERE (collection_id = 3) LIMIT 1[0m
  [1m[35m (0.2ms)[0m  SELECT COUNT(*) FROM `collections` 
  Rendered collections/index.erb within layouts/admin (19.0ms)
  [1m[36mUser Load (0.4ms)[0m  [1mSELECT `users`.* FROM `users` WHERE `users`.`id` = 1 LIMIT 1[0m
Completed 200 OK in 32ms (Views: 29.1ms | ActiveRecord: 1.3ms)


Started GET "/admin/collections?q%5Bs%5D=description+asc" for 127.0.0.1 at 2016-01-18 14:15:22 +0100
Processing by CollectionsController#index as HTML
  Parameters: {"q"=>{"s"=>"description asc"}}
  Rendered shared/_restaurant_manage_tabs.html.erb (0.9ms)
  [1m[35mCollection Load (0.5ms)[0m  SELECT `collections`.* FROM `collections` ORDER BY `collections`.`description` ASC, name ASC, created_at DESC LIMIT 12 OFFSET 0
  [1m[36mCollectionImage Load (0.2ms)[0m  [1mSELECT `collection_images`.* FROM `collection_images` WHERE (collection_id = 3) LIMIT 1[0m
  [1m[35mCollectionImage Load (0.4ms)[0m  SELECT `collection_images`.* FROM `collection_images` WHERE (collection_id = 2) LIMIT 1
  [1m[36m (0.1ms)[0m  [1mSELECT COUNT(*) FROM `collections` [0m
  Rendered collections/index.erb within layouts/admin (24.6ms)
  [1m[35mUser Load (0.5ms)[0m  SELECT `users`.* FROM `users` WHERE `users`.`id` = 1 LIMIT 1
Completed 200 OK in 49ms (Views: 44.9ms | ActiveRecord: 1.7ms)


Started GET "/admin/collections?q%5Bs%5D=description+desc" for 127.0.0.1 at 2016-01-18 14:15:23 +0100
Processing by CollectionsController#index as HTML
  Parameters: {"q"=>{"s"=>"description desc"}}
  Rendered shared/_restaurant_manage_tabs.html.erb (1.1ms)
  [1m[36mCollection Load (0.3ms)[0m  [1mSELECT `collections`.* FROM `collections` ORDER BY `collections`.`description` DESC, name ASC, created_at DESC LIMIT 12 OFFSET 0[0m
  [1m[35mCollectionImage Load (0.6ms)[0m  SELECT `collection_images`.* FROM `collection_images` WHERE (collection_id = 2) LIMIT 1
  [1m[36mCollectionImage Load (0.5ms)[0m  [1mSELECT `collection_images`.* FROM `collection_images` WHERE (collection_id = 3) LIMIT 1[0m
  [1m[35m (0.3ms)[0m  SELECT COUNT(*) FROM `collections` 
  Rendered collections/index.erb within layouts/admin (20.8ms)
  [1m[36mUser Load (0.5ms)[0m  [1mSELECT `users`.* FROM `users` WHERE `users`.`id` = 1 LIMIT 1[0m
Completed 200 OK in 35ms (Views: 31.0ms | ActiveRecord: 2.2ms)


Started GET "/admin/collections?q%5Bs%5D=description+asc" for 127.0.0.1 at 2016-01-18 14:15:24 +0100
Processing by CollectionsController#index as HTML
  Parameters: {"q"=>{"s"=>"description asc"}}
  Rendered shared/_restaurant_manage_tabs.html.erb (0.8ms)
  [1m[35mCollection Load (0.4ms)[0m  SELECT `collections`.* FROM `collections` ORDER BY `collections`.`description` ASC, name ASC, created_at DESC LIMIT 12 OFFSET 0
  [1m[36mCollectionImage Load (0.2ms)[0m  [1mSELECT `collection_images`.* FROM `collection_images` WHERE (collection_id = 3) LIMIT 1[0m
  [1m[35mCollectionImage Load (0.2ms)[0m  SELECT `collection_images`.* FROM `collection_images` WHERE (collection_id = 2) LIMIT 1
  [1m[36m (0.7ms)[0m  [1mSELECT COUNT(*) FROM `collections` [0m
  Rendered collections/index.erb within layouts/admin (15.6ms)
  [1m[35mUser Load (0.4ms)[0m  SELECT `users`.* FROM `users` WHERE `users`.`id` = 1 LIMIT 1
Completed 200 OK in 27ms (Views: 24.5ms | ActiveRecord: 1.8ms)


Started GET "/admin/collections?q%5Bs%5D=name+asc" for 127.0.0.1 at 2016-01-18 14:15:25 +0100
Processing by CollectionsController#index as HTML
  Parameters: {"q"=>{"s"=>"name asc"}}
  Rendered shared/_restaurant_manage_tabs.html.erb (1.2ms)
  [1m[36mCollection Load (0.3ms)[0m  [1mSELECT `collections`.* FROM `collections` ORDER BY `collections`.`name` ASC, name ASC, created_at DESC LIMIT 12 OFFSET 0[0m
  [1m[35mCollectionImage Load (0.2ms)[0m  SELECT `collection_images`.* FROM `collection_images` WHERE (collection_id = 3) LIMIT 1
  [1m[36mCollectionImage Load (0.3ms)[0m  [1mSELECT `collection_images`.* FROM `collection_images` WHERE (collection_id = 2) LIMIT 1[0m
  [1m[35m (0.2ms)[0m  SELECT COUNT(*) FROM `collections` 
  Rendered collections/index.erb within layouts/admin (19.2ms)
  [1m[36mUser Load (0.3ms)[0m  [1mSELECT `users`.* FROM `users` WHERE `users`.`id` = 1 LIMIT 1[0m
Completed 200 OK in 31ms (Views: 28.0ms | ActiveRecord: 1.3ms)


Started GET "/admin/collections?q%5Bs%5D=name+desc" for 127.0.0.1 at 2016-01-18 14:15:26 +0100
Processing by CollectionsController#index as HTML
  Parameters: {"q"=>{"s"=>"name desc"}}
  Rendered shared/_restaurant_manage_tabs.html.erb (1.5ms)
  [1m[35mCollection Load (0.3ms)[0m  SELECT `collections`.* FROM `collections` ORDER BY `collections`.`name` DESC, name ASC, created_at DESC LIMIT 12 OFFSET 0
  [1m[36mCollectionImage Load (0.2ms)[0m  [1mSELECT `collection_images`.* FROM `collection_images` WHERE (collection_id = 2) LIMIT 1[0m
  [1m[35mCollectionImage Load (0.2ms)[0m  SELECT `collection_images`.* FROM `collection_images` WHERE (collection_id = 3) LIMIT 1
  [1m[36m (0.3ms)[0m  [1mSELECT COUNT(*) FROM `collections` [0m
  Rendered collections/index.erb within layouts/admin (19.4ms)
  [1m[35mUser Load (0.5ms)[0m  SELECT `users`.* FROM `users` WHERE `users`.`id` = 1 LIMIT 1
Completed 200 OK in 32ms (Views: 28.8ms | ActiveRecord: 1.6ms)


Started GET "/collection/3/edit" for 127.0.0.1 at 2016-01-18 14:20:16 +0100
Processing by CollectionsController#edit_collection as HTML
  Parameters: {"id"=>"3"}
  [1m[36mUser Load (0.2ms)[0m  [1mSELECT `users`.* FROM `users` WHERE `users`.`id` = 1 LIMIT 1[0m
  [1m[35mCollection Load (0.2ms)[0m  SELECT `collections`.* FROM `collections` WHERE `collections`.`id` = 3 LIMIT 1
  [1m[36m (0.2ms)[0m  [1mSELECT COUNT(*) FROM `filter_types` WHERE (code = 'features')[0m
  [1m[35m (0.2ms)[0m  SELECT COUNT(*) FROM `filters` WHERE (code = 'offer')
  [1m[36mCollectionImage Load (0.2ms)[0m  [1mSELECT `collection_images`.* FROM `collection_images` WHERE (collection_id = 3) LIMIT 1[0m
  Rendered collections/_collection_form.html.erb (53.2ms)
  [1m[35mRestaurant Load (2.9ms)[0m  SELECT `restaurants`.* FROM `restaurants` WHERE `restaurants`.`disabled` = 0
  Rendered collections/_collection_restaurants_form.html.erb (100.7ms)
  [1m[36mCollectionRestaurant Load (0.3ms)[0m  [1mSELECT `collection_restaurants`.* FROM `collection_restaurants` WHERE `collection_restaurants`.`collection_id` = 3[0m
  Rendered collections/_collection_restaurants_list.html.erb (4.0ms)
  Rendered collections/edit_collection.html.erb within layouts/admin (181.2ms)
Completed 500 Internal Server Error in 478ms

ActionView::Template::Error (undefined method `name' for #<CollectionRestaurant:0x007fc2610c1e00>):
    8:   <tbody>
    9:   <% @collection_restaurants.each do |restaurant| %>
    10:       <tr>
    11:         <td><%= restaurant.name %></td>
    12:         <td>
    13:           <div class="btn-group btn-group-xs">
    14:             <%= link_to '#', class: "btn btn-default fa fa-minus-circle", title: 'Delete' do %>
  app/views/collections/_collection_restaurants_list.html.erb:11:in `block in _app_views_collections__collection_restaurants_list_html_erb___171350222027666675_70236423711540'
  app/views/collections/_collection_restaurants_list.html.erb:9:in `_app_views_collections__collection_restaurants_list_html_erb___171350222027666675_70236423711540'
  app/views/collections/edit_collection.html.erb:18:in `_app_views_collections_edit_collection_html_erb___2603788858892649966_70236384724960'


  Rendered /Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_dispatch/middleware/templates/rescues/_trace.erb (1.2ms)
  Rendered /Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_dispatch/middleware/templates/rescues/_request_and_response.erb (1.0ms)
  Rendered /Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_dispatch/middleware/templates/rescues/template_error.erb within rescues/layout (44.1ms)


Started GET "/collection/3/edit" for 127.0.0.1 at 2016-01-18 14:22:33 +0100
Processing by CollectionsController#edit_collection as HTML
  Parameters: {"id"=>"3"}
  [1m[35mUser Load (0.2ms)[0m  SELECT `users`.* FROM `users` WHERE `users`.`id` = 1 LIMIT 1
  [1m[36mCollection Load (0.3ms)[0m  [1mSELECT `collections`.* FROM `collections` WHERE `collections`.`id` = 3 LIMIT 1[0m
  [1m[35m (0.2ms)[0m  SELECT COUNT(*) FROM `filter_types` WHERE (code = 'features')
  [1m[36m (0.2ms)[0m  [1mSELECT COUNT(*) FROM `filters` WHERE (code = 'offer')[0m
  [1m[35mCollectionRestaurant Load (0.2ms)[0m  SELECT `collection_restaurants`.* FROM `collection_restaurants` WHERE `collection_restaurants`.`collection_id` = 3
  [1m[36mCollectionImage Load (0.3ms)[0m  [1mSELECT `collection_images`.* FROM `collection_images` WHERE (collection_id = 3) LIMIT 1[0m
  Rendered collections/_collection_form.html.erb (85.6ms)
  [1m[35mRestaurant Load (2.9ms)[0m  SELECT `restaurants`.* FROM `restaurants` WHERE `restaurants`.`disabled` = 0
  Rendered collections/_collection_restaurants_form.html.erb (97.9ms)
  Rendered collections/_collection_restaurants_list.html.erb (1.2ms)
  Rendered collections/edit_collection.html.erb within layouts/admin (214.1ms)
Completed 500 Internal Server Error in 524ms

ActionView::Template::Error (undefined method `name' for #<CollectionRestaurant:0x007fc25dbebe60>):
    8:   <tbody>
    9:   <% @collection_restaurants.each do |restaurant| %>
    10:       <tr>
    11:         <td><%= restaurant.name %></td>
    12:         <td>
    13:           <div class="btn-group btn-group-xs">
    14:             <%= link_to '#', class: "btn btn-default fa fa-minus-circle", title: 'Delete' do %>
  app/views/collections/_collection_restaurants_list.html.erb:11:in `block in _app_views_collections__collection_restaurants_list_html_erb___171350222027666675_70236423711540'
  app/views/collections/_collection_restaurants_list.html.erb:9:in `each'
  app/views/collections/_collection_restaurants_list.html.erb:9:in `_app_views_collections__collection_restaurants_list_html_erb___171350222027666675_70236423711540'
  app/views/collections/edit_collection.html.erb:18:in `_app_views_collections_edit_collection_html_erb___2603788858892649966_70236384724960'


  Rendered /Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_dispatch/middleware/templates/rescues/_trace.erb (1.7ms)
  Rendered /Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_dispatch/middleware/templates/rescues/_request_and_response.erb (1.0ms)
  Rendered /Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_dispatch/middleware/templates/rescues/template_error.erb within rescues/layout (54.0ms)


Started GET "/collection/3/edit" for 127.0.0.1 at 2016-01-18 14:23:02 +0100
Processing by CollectionsController#edit_collection as HTML
  Parameters: {"id"=>"3"}
  [1m[36mUser Load (0.3ms)[0m  [1mSELECT `users`.* FROM `users` WHERE `users`.`id` = 1 LIMIT 1[0m
  [1m[35mCollection Load (0.2ms)[0m  SELECT `collections`.* FROM `collections` WHERE `collections`.`id` = 3 LIMIT 1
  [1m[36m (0.3ms)[0m  [1mSELECT COUNT(*) FROM `filter_types` WHERE (code = 'features')[0m
  [1m[35m (0.2ms)[0m  SELECT COUNT(*) FROM `filters` WHERE (code = 'offer')
  [1m[36mCollectionRestaurant Load (0.2ms)[0m  [1mSELECT `collection_restaurants`.* FROM `collection_restaurants` WHERE `collection_restaurants`.`collection_id` = 3[0m
  [1m[35mCollectionImage Load (1.1ms)[0m  SELECT `collection_images`.* FROM `collection_images` WHERE (collection_id = 3) LIMIT 1
  Rendered collections/_collection_form.html.erb (38.1ms)
  [1m[36mRestaurant Load (3.0ms)[0m  [1mSELECT `restaurants`.* FROM `restaurants` WHERE `restaurants`.`disabled` = 0[0m
  Rendered collections/_collection_restaurants_form.html.erb (128.7ms)
  Rendered collections/_collection_restaurants_list.html.erb (1.0ms)
  Rendered collections/edit_collection.html.erb within layouts/admin (170.9ms)
Completed 500 Internal Server Error in 499ms

ActionView::Template::Error (undefined method `name' for #<CollectionRestaurant:0x007fc25d950fe8>):
    8:   <tbody>
    9:   <% @collection_restaurants.each do |restaurant| %>
    10:       <tr>
    11:         <td><%= restaurant.name %></td>
    12:         <td>
    13:           <div class="btn-group btn-group-xs">
    14:             <%= link_to '#', class: "btn btn-default fa fa-minus-circle", title: 'Delete' do %>
  app/views/collections/_collection_restaurants_list.html.erb:11:in `block in _app_views_collections__collection_restaurants_list_html_erb___171350222027666675_70236423711540'
  app/views/collections/_collection_restaurants_list.html.erb:9:in `_app_views_collections__collection_restaurants_list_html_erb___171350222027666675_70236423711540'
  app/views/collections/edit_collection.html.erb:18:in `_app_views_collections_edit_collection_html_erb___2603788858892649966_70236384724960'


  Rendered /Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_dispatch/middleware/templates/rescues/_trace.erb (2.0ms)
  Rendered /Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_dispatch/middleware/templates/rescues/_request_and_response.erb (2.5ms)
  Rendered /Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_dispatch/middleware/templates/rescues/template_error.erb within rescues/layout (56.3ms)


Started GET "/collection/3/edit" for 127.0.0.1 at 2016-01-18 14:26:04 +0100
Processing by CollectionsController#edit_collection as HTML
  Parameters: {"id"=>"3"}
  [1m[35mUser Load (0.3ms)[0m  SELECT `users`.* FROM `users` WHERE `users`.`id` = 1 LIMIT 1
  [1m[36mCollection Load (0.2ms)[0m  [1mSELECT `collections`.* FROM `collections` WHERE `collections`.`id` = 3 LIMIT 1[0m
  [1m[35mCollectionRestaurant Load (0.2ms)[0m  SELECT `collection_restaurants`.* FROM `collection_restaurants` WHERE `collection_restaurants`.`collection_id` = 3
  [1m[36mCollectionImage Load (0.5ms)[0m  [1mSELECT `collection_images`.* FROM `collection_images` WHERE (collection_id = 3) LIMIT 1[0m
  Rendered collections/_collection_form.html.erb (10.4ms)
  [1m[35mRestaurant Load (5.3ms)[0m  SELECT `restaurants`.* FROM `restaurants` WHERE `restaurants`.`disabled` = 0
  Rendered collections/_collection_restaurants_form.html.erb (133.1ms)
  Rendered collections/_collection_restaurants_list.html.erb (18.2ms)
  Rendered collections/edit_collection.html.erb within layouts/admin (185.5ms)
Completed 200 OK in 213ms (Views: 201.8ms | ActiveRecord: 6.6ms)


Started GET "/collection/3/edit" for 127.0.0.1 at 2016-01-18 14:26:59 +0100
Processing by CollectionsController#edit_collection as HTML
  Parameters: {"id"=>"3"}
  [1m[36mUser Load (0.4ms)[0m  [1mSELECT `users`.* FROM `users` WHERE `users`.`id` = 1 LIMIT 1[0m
  [1m[35mCollection Load (0.3ms)[0m  SELECT `collections`.* FROM `collections` WHERE `collections`.`id` = 3 LIMIT 1
  [1m[36mCollectionRestaurant Load (0.2ms)[0m  [1mSELECT `collection_restaurants`.* FROM `collection_restaurants` WHERE `collection_restaurants`.`collection_id` = 3[0m
  [1m[35mCollectionImage Load (0.3ms)[0m  SELECT `collection_images`.* FROM `collection_images` WHERE (collection_id = 3) LIMIT 1
  Rendered collections/_collection_form.html.erb (13.9ms)
  [1m[36mRestaurant Load (3.2ms)[0m  [1mSELECT `restaurants`.* FROM `restaurants` WHERE `restaurants`.`disabled` = 0[0m
  Rendered collections/_collection_restaurants_form.html.erb (115.0ms)
  [1m[35mRestaurant Load (0.9ms)[0m  SELECT `restaurants`.* FROM `restaurants` WHERE `restaurants`.`collection_restaurant_id` = 10
Mysql2::Error: Unknown column 'restaurants.collection_restaurant_id' in 'where clause': SELECT `restaurants`.* FROM `restaurants`  WHERE `restaurants`.`collection_restaurant_id` = 10
  Rendered collections/_collection_restaurants_list.html.erb (6.9ms)
  Rendered collections/edit_collection.html.erb within layouts/admin (140.3ms)
Completed 500 Internal Server Error in 160ms
  [1m[36mRestaurant Load (0.3ms)[0m  [1mSELECT `restaurants`.* FROM `restaurants` WHERE `restaurants`.`collection_restaurant_id` = 10[0m
Mysql2::Error: Unknown column 'restaurants.collection_restaurant_id' in 'where clause': SELECT `restaurants`.* FROM `restaurants`  WHERE `restaurants`.`collection_restaurant_id` = 10
  [1m[35mRestaurant Load (0.3ms)[0m  SELECT `restaurants`.* FROM `restaurants` WHERE `restaurants`.`collection_restaurant_id` = 10
Mysql2::Error: Unknown column 'restaurants.collection_restaurant_id' in 'where clause': SELECT `restaurants`.* FROM `restaurants`  WHERE `restaurants`.`collection_restaurant_id` = 10

ActionView::Template::Error (undefined method `id' for #<Restaurant::FriendlyIdActiveRecordRelation:0x007fc2456db488>):
    8:   <tbody>
    9:   <% @collection_restaurants.each do |cr| %>
    10:       <tr>
    11:         <td><%= cr.restaurant.id %></td>
    12:         <td>
    13:           <div class="btn-group btn-group-xs">
    14:             <%= link_to '#', class: "btn btn-default fa fa-minus-circle", title: 'Delete' do %>
  app/views/collections/_collection_restaurants_list.html.erb:11:in `block in _app_views_collections__collection_restaurants_list_html_erb___171350222027666675_70236176706200'
  app/views/collections/_collection_restaurants_list.html.erb:9:in `_app_views_collections__collection_restaurants_list_html_erb___171350222027666675_70236176706200'
  app/views/collections/edit_collection.html.erb:18:in `_app_views_collections_edit_collection_html_erb___2603788858892649966_70236384724960'


  Rendered /Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_dispatch/middleware/templates/rescues/_trace.erb (1.7ms)
  Rendered /Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_dispatch/middleware/templates/rescues/_request_and_response.erb (1.0ms)
  Rendered /Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_dispatch/middleware/templates/rescues/template_error.erb within rescues/layout (44.5ms)


Started GET "/collection/3/edit" for 127.0.0.1 at 2016-01-18 14:29:17 +0100
Processing by CollectionsController#edit_collection as HTML
  Parameters: {"id"=>"3"}
  [1m[36mUser Load (0.2ms)[0m  [1mSELECT `users`.* FROM `users` WHERE `users`.`id` = 1 LIMIT 1[0m
  [1m[35mCollection Load (0.2ms)[0m  SELECT `collections`.* FROM `collections` WHERE `collections`.`id` = 3 LIMIT 1
  [1m[36m (0.2ms)[0m  [1mSELECT COUNT(*) FROM `filter_types` WHERE (code = 'features')[0m
  [1m[35m (0.2ms)[0m  SELECT COUNT(*) FROM `filters` WHERE (code = 'offer')
  [1m[36mCollectionImage Load (0.3ms)[0m  [1mSELECT `collection_images`.* FROM `collection_images` WHERE (collection_id = 3) LIMIT 1[0m
  Rendered collections/_collection_form.html.erb (51.1ms)
  [1m[35mRestaurant Load (4.1ms)[0m  SELECT `restaurants`.* FROM `restaurants` WHERE `restaurants`.`disabled` = 0
  Rendered collections/_collection_restaurants_form.html.erb (125.2ms)
  [1m[36mCollectionRestaurant Load (0.3ms)[0m  [1mSELECT `collection_restaurants`.* FROM `collection_restaurants` WHERE `collection_restaurants`.`collection_id` = 3[0m
  Rendered collections/_collection_restaurants_list.html.erb (5.1ms)
  Rendered collections/edit_collection.html.erb within layouts/admin (210.9ms)
Completed 200 OK in 474ms (Views: 228.9ms | ActiveRecord: 32.7ms)


Started GET "/collection/3/edit" for 127.0.0.1 at 2016-01-18 14:30:03 +0100
Processing by CollectionsController#edit_collection as HTML
  Parameters: {"id"=>"3"}
  [1m[35mUser Load (0.2ms)[0m  SELECT `users`.* FROM `users` WHERE `users`.`id` = 1 LIMIT 1
  [1m[36mCollection Load (0.2ms)[0m  [1mSELECT `collections`.* FROM `collections` WHERE `collections`.`id` = 3 LIMIT 1[0m
  [1m[35m (0.2ms)[0m  SELECT COUNT(*) FROM `filter_types` WHERE (code = 'features')
  [1m[36m (0.2ms)[0m  [1mSELECT COUNT(*) FROM `filters` WHERE (code = 'offer')[0m
Completed 500 Internal Server Error in 247ms

NoMethodError (undefined method `collection_restaurants' for #<Collection:0x007fc25af57020>):
  app/controllers/collections_controller.rb:115:in `edit_collection'


  Rendered /Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_dispatch/middleware/templates/rescues/_trace.erb (1.4ms)
  Rendered /Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_dispatch/middleware/templates/rescues/_request_and_response.erb (1.0ms)
  Rendered /Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_dispatch/middleware/templates/rescues/diagnostics.erb within rescues/layout (45.7ms)


Started GET "/collection/3/edit" for 127.0.0.1 at 2016-01-18 14:30:10 +0100
Processing by CollectionsController#edit_collection as HTML
  Parameters: {"id"=>"3"}
  [1m[35mUser Load (0.3ms)[0m  SELECT `users`.* FROM `users` WHERE `users`.`id` = 1 LIMIT 1
  [1m[36mCollection Load (0.2ms)[0m  [1mSELECT `collections`.* FROM `collections` WHERE `collections`.`id` = 3 LIMIT 1[0m
  [1m[35m (0.3ms)[0m  SELECT COUNT(*) FROM `filter_types` WHERE (code = 'features')
  [1m[36m (0.3ms)[0m  [1mSELECT COUNT(*) FROM `filters` WHERE (code = 'offer')[0m
  [1m[35mCollectionImage Load (0.2ms)[0m  SELECT `collection_images`.* FROM `collection_images` WHERE (collection_id = 3) LIMIT 1
  Rendered collections/_collection_form.html.erb (41.1ms)
  [1m[36mRestaurant Load (3.7ms)[0m  [1mSELECT `restaurants`.* FROM `restaurants` WHERE `restaurants`.`disabled` = 0[0m
  Rendered collections/_collection_restaurants_form.html.erb (126.1ms)
  [1m[35mCollectionRestaurant Load (0.3ms)[0m  SELECT `collection_restaurants`.* FROM `collection_restaurants` WHERE `collection_restaurants`.`collection_id` = 3
  Rendered collections/_collection_restaurants_list.html.erb (4.1ms)
  Rendered collections/edit_collection.html.erb within layouts/admin (176.2ms)
Completed 200 OK in 457ms (Views: 185.9ms | ActiveRecord: 19.2ms)


Started GET "/collection/3/edit" for 127.0.0.1 at 2016-01-18 14:31:47 +0100
Processing by CollectionsController#edit_collection as HTML
  Parameters: {"id"=>"3"}
  [1m[36mUser Load (0.5ms)[0m  [1mSELECT `users`.* FROM `users` WHERE `users`.`id` = 1 LIMIT 1[0m
  [1m[35mCollection Load (0.4ms)[0m  SELECT `collections`.* FROM `collections` WHERE `collections`.`id` = 3 LIMIT 1
  [1m[36mCollectionImage Load (0.3ms)[0m  [1mSELECT `collection_images`.* FROM `collection_images` WHERE (collection_id = 3) LIMIT 1[0m
  Rendered collections/_collection_form.html.erb (10.8ms)
  [1m[35mRestaurant Load (3.6ms)[0m  SELECT `restaurants`.* FROM `restaurants` WHERE `restaurants`.`disabled` = 0
  Rendered collections/_collection_restaurants_form.html.erb (80.0ms)
  [1m[36mCollectionRestaurant Load (0.3ms)[0m  [1mSELECT `collection_restaurants`.* FROM `collection_restaurants` WHERE `collection_restaurants`.`collection_id` = 3[0m
  [1m[35mRestaurant Load (0.3ms)[0m  SELECT `restaurants`.* FROM `restaurants` WHERE `restaurants`.`collection_restaurant_id` = 10 LIMIT 1
Mysql2::Error: Unknown column 'restaurants.collection_restaurant_id' in 'where clause': SELECT  `restaurants`.* FROM `restaurants`  WHERE `restaurants`.`collection_restaurant_id` = 10 LIMIT 1
  Rendered collections/_collection_restaurants_list.html.erb (4.6ms)
  Rendered collections/edit_collection.html.erb within layouts/admin (98.9ms)
Completed 500 Internal Server Error in 111ms

ActionView::Template::Error (Mysql2::Error: Unknown column 'restaurants.collection_restaurant_id' in 'where clause': SELECT  `restaurants`.* FROM `restaurants`  WHERE `restaurants`.`collection_restaurant_id` = 10 LIMIT 1):
    8:   <tbody>
    9:   <% @collection_restaurants.each do |cr| %>
    10:       <tr>
    11:         <td><%= cr.restaurant.first.name %></td>
    12:         <td>
    13:           <div class="btn-group btn-group-xs">
    14:             <%= link_to '#', class: "btn btn-default fa fa-minus-circle", title: 'Delete' do %>
  app/views/collections/_collection_restaurants_list.html.erb:11:in `block in _app_views_collections__collection_restaurants_list_html_erb___171350222027666675_70236179825100'
  app/views/collections/_collection_restaurants_list.html.erb:9:in `_app_views_collections__collection_restaurants_list_html_erb___171350222027666675_70236179825100'
  app/views/collections/edit_collection.html.erb:18:in `_app_views_collections_edit_collection_html_erb___2603788858892649966_70236384724960'


  Rendered /Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_dispatch/middleware/templates/rescues/_trace.erb (1.5ms)
  Rendered /Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_dispatch/middleware/templates/rescues/_request_and_response.erb (0.9ms)
  Rendered /Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_dispatch/middleware/templates/rescues/template_error.erb within rescues/layout (42.9ms)


Started GET "/collection/3/edit" for 127.0.0.1 at 2016-01-18 14:34:03 +0100
Processing by CollectionsController#edit_collection as HTML
  Parameters: {"id"=>"3"}
  [1m[36mUser Load (0.4ms)[0m  [1mSELECT `users`.* FROM `users` WHERE `users`.`id` = 1 LIMIT 1[0m
  [1m[35mCollection Load (0.3ms)[0m  SELECT `collections`.* FROM `collections` WHERE `collections`.`id` = 3 LIMIT 1
  [1m[36mCollectionImage Load (0.3ms)[0m  [1mSELECT `collection_images`.* FROM `collection_images` WHERE (collection_id = 3) LIMIT 1[0m
  Rendered collections/_collection_form.html.erb (7.5ms)
  [1m[35mRestaurant Load (3.7ms)[0m  SELECT `restaurants`.* FROM `restaurants` WHERE `restaurants`.`disabled` = 0
  Rendered collections/_collection_restaurants_form.html.erb (76.9ms)
  [1m[36mCollectionRestaurant Load (0.3ms)[0m  [1mSELECT `collection_restaurants`.* FROM `collection_restaurants` WHERE `collection_restaurants`.`collection_id` = 3[0m
  Rendered collections/_collection_restaurants_list.html.erb (2.9ms)
  Rendered collections/edit_collection.html.erb within layouts/admin (90.2ms)
Completed 200 OK in 104ms (Views: 94.3ms | ActiveRecord: 5.1ms)


Started GET "/collection/3/edit" for 127.0.0.1 at 2016-01-18 14:34:15 +0100
Processing by CollectionsController#edit_collection as HTML
  Parameters: {"id"=>"3"}
  [1m[35mUser Load (0.4ms)[0m  SELECT `users`.* FROM `users` WHERE `users`.`id` = 1 LIMIT 1
  [1m[36mCollection Load (0.3ms)[0m  [1mSELECT `collections`.* FROM `collections` WHERE `collections`.`id` = 3 LIMIT 1[0m
  [1m[35mCollectionImage Load (0.4ms)[0m  SELECT `collection_images`.* FROM `collection_images` WHERE (collection_id = 3) LIMIT 1
  Rendered collections/_collection_form.html.erb (18.5ms)
  [1m[36mRestaurant Load (3.8ms)[0m  [1mSELECT `restaurants`.* FROM `restaurants` WHERE `restaurants`.`disabled` = 0[0m
  Rendered collections/_collection_restaurants_form.html.erb (99.3ms)
  [1m[35mCollectionRestaurant Load (0.3ms)[0m  SELECT `collection_restaurants`.* FROM `collection_restaurants` WHERE `collection_restaurants`.`collection_id` = 3
  [1m[36mRestaurant Load (0.5ms)[0m  [1mSELECT `restaurants`.* FROM `restaurants` WHERE `restaurants`.`collection_restaurant_id` = 10 LIMIT 1[0m
Mysql2::Error: Unknown column 'restaurants.collection_restaurant_id' in 'where clause': SELECT  `restaurants`.* FROM `restaurants`  WHERE `restaurants`.`collection_restaurant_id` = 10 LIMIT 1
  Rendered collections/_collection_restaurants_list.html.erb (8.0ms)
  Rendered collections/edit_collection.html.erb within layouts/admin (130.0ms)
Completed 500 Internal Server Error in 141ms
  [1m[35mRestaurant Load (0.4ms)[0m  SELECT `restaurants`.* FROM `restaurants` WHERE `restaurants`.`collection_restaurant_id` = 10 LIMIT 1
Mysql2::Error: Unknown column 'restaurants.collection_restaurant_id' in 'where clause': SELECT  `restaurants`.* FROM `restaurants`  WHERE `restaurants`.`collection_restaurant_id` = 10 LIMIT 1
  [1m[36mRestaurant Load (0.3ms)[0m  [1mSELECT `restaurants`.* FROM `restaurants` WHERE `restaurants`.`collection_restaurant_id` = 10 LIMIT 1[0m
Mysql2::Error: Unknown column 'restaurants.collection_restaurant_id' in 'where clause': SELECT  `restaurants`.* FROM `restaurants`  WHERE `restaurants`.`collection_restaurant_id` = 10 LIMIT 1

ActionView::Template::Error (undefined method `id' for #<Restaurant::FriendlyIdActiveRecordRelation:0x007fc258fc2958>):
    8:   <tbody>
    9:   <% @collection_restaurants.each do |cr| %>
    10:       <tr>
    11:         <td><%= cr.restaurant.limit(1).id %></td>
    12:         <td>
    13:           <div class="btn-group btn-group-xs">
    14:             <%= link_to '#', class: "btn btn-default fa fa-minus-circle", title: 'Delete' do %>
  app/views/collections/_collection_restaurants_list.html.erb:11:in `block in _app_views_collections__collection_restaurants_list_html_erb___171350222027666675_70236359396260'
  app/views/collections/_collection_restaurants_list.html.erb:9:in `_app_views_collections__collection_restaurants_list_html_erb___171350222027666675_70236359396260'
  app/views/collections/edit_collection.html.erb:18:in `_app_views_collections_edit_collection_html_erb___2603788858892649966_70236384724960'


  Rendered /Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_dispatch/middleware/templates/rescues/_trace.erb (1.5ms)
  Rendered /Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_dispatch/middleware/templates/rescues/_request_and_response.erb (1.2ms)
  Rendered /Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_dispatch/middleware/templates/rescues/template_error.erb within rescues/layout (47.7ms)


Started GET "/collection/3/edit" for 127.0.0.1 at 2016-01-18 14:34:33 +0100
Processing by CollectionsController#edit_collection as HTML
  Parameters: {"id"=>"3"}
  [1m[35mUser Load (0.4ms)[0m  SELECT `users`.* FROM `users` WHERE `users`.`id` = 1 LIMIT 1
  [1m[36mCollection Load (0.3ms)[0m  [1mSELECT `collections`.* FROM `collections` WHERE `collections`.`id` = 3 LIMIT 1[0m
  [1m[35mCollectionImage Load (0.3ms)[0m  SELECT `collection_images`.* FROM `collection_images` WHERE (collection_id = 3) LIMIT 1
  Rendered collections/_collection_form.html.erb (10.0ms)
  [1m[36mRestaurant Load (4.1ms)[0m  [1mSELECT `restaurants`.* FROM `restaurants` WHERE `restaurants`.`disabled` = 0[0m
  Rendered collections/_collection_restaurants_form.html.erb (82.7ms)
  [1m[35mCollectionRestaurant Load (0.3ms)[0m  SELECT `collection_restaurants`.* FROM `collection_restaurants` WHERE `collection_restaurants`.`collection_id` = 3
  [1m[36mRestaurant Load (0.3ms)[0m  [1mSELECT `restaurants`.* FROM `restaurants` WHERE `restaurants`.`collection_restaurant_id` = 10 LIMIT 1[0m
Mysql2::Error: Unknown column 'restaurants.collection_restaurant_id' in 'where clause': SELECT  `restaurants`.* FROM `restaurants`  WHERE `restaurants`.`collection_restaurant_id` = 10 LIMIT 1
  Rendered collections/_collection_restaurants_list.html.erb (3.7ms)
  Rendered collections/edit_collection.html.erb within layouts/admin (100.3ms)
Completed 500 Internal Server Error in 110ms

ActionView::Template::Error (Mysql2::Error: Unknown column 'restaurants.collection_restaurant_id' in 'where clause': SELECT  `restaurants`.* FROM `restaurants`  WHERE `restaurants`.`collection_restaurant_id` = 10 LIMIT 1):
    8:   <tbody>
    9:   <% @collection_restaurants.each do |cr| %>
    10:       <tr>
    11:         <td><%= cr.restaurant.limit(1).inspect %></td>
    12:         <td>
    13:           <div class="btn-group btn-group-xs">
    14:             <%= link_to '#', class: "btn btn-default fa fa-minus-circle", title: 'Delete' do %>
  app/views/collections/_collection_restaurants_list.html.erb:11:in `block in _app_views_collections__collection_restaurants_list_html_erb___171350222027666675_70236308121920'
  app/views/collections/_collection_restaurants_list.html.erb:9:in `_app_views_collections__collection_restaurants_list_html_erb___171350222027666675_70236308121920'
  app/views/collections/edit_collection.html.erb:18:in `_app_views_collections_edit_collection_html_erb___2603788858892649966_70236384724960'


  Rendered /Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_dispatch/middleware/templates/rescues/_trace.erb (1.3ms)
  Rendered /Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_dispatch/middleware/templates/rescues/_request_and_response.erb (0.9ms)
  Rendered /Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_dispatch/middleware/templates/rescues/template_error.erb within rescues/layout (43.9ms)


Started GET "/collection/3/edit" for 127.0.0.1 at 2016-01-18 14:34:46 +0100
Processing by CollectionsController#edit_collection as HTML
  Parameters: {"id"=>"3"}
  [1m[35mUser Load (0.3ms)[0m  SELECT `users`.* FROM `users` WHERE `users`.`id` = 1 LIMIT 1
  [1m[36mCollection Load (0.2ms)[0m  [1mSELECT `collections`.* FROM `collections` WHERE `collections`.`id` = 3 LIMIT 1[0m
  [1m[35mCollectionImage Load (0.3ms)[0m  SELECT `collection_images`.* FROM `collection_images` WHERE (collection_id = 3) LIMIT 1
  Rendered collections/_collection_form.html.erb (7.0ms)
  [1m[36mRestaurant Load (3.9ms)[0m  [1mSELECT `restaurants`.* FROM `restaurants` WHERE `restaurants`.`disabled` = 0[0m
  Rendered collections/_collection_restaurants_form.html.erb (90.8ms)
  [1m[35mCollectionRestaurant Load (0.3ms)[0m  SELECT `collection_restaurants`.* FROM `collection_restaurants` WHERE `collection_restaurants`.`collection_id` = 3
  [1m[36mRestaurant Load (0.3ms)[0m  [1mSELECT `restaurants`.* FROM `restaurants` WHERE `restaurants`.`collection_restaurant_id` = 10[0m
Mysql2::Error: Unknown column 'restaurants.collection_restaurant_id' in 'where clause': SELECT `restaurants`.* FROM `restaurants`  WHERE `restaurants`.`collection_restaurant_id` = 10
  Rendered collections/_collection_restaurants_list.html.erb (4.1ms)
  Rendered collections/edit_collection.html.erb within layouts/admin (105.2ms)
Completed 500 Internal Server Error in 111ms

ActionView::Template::Error (Mysql2::Error: Unknown column 'restaurants.collection_restaurant_id' in 'where clause': SELECT `restaurants`.* FROM `restaurants`  WHERE `restaurants`.`collection_restaurant_id` = 10):
    8:   <tbody>
    9:   <% @collection_restaurants.each do |cr| %>
    10:       <tr>
    11:         <td><%= cr.restaurant.inspect %></td>
    12:         <td>
    13:           <div class="btn-group btn-group-xs">
    14:             <%= link_to '#', class: "btn btn-default fa fa-minus-circle", title: 'Delete' do %>
  app/views/collections/_collection_restaurants_list.html.erb:11:in `block in _app_views_collections__collection_restaurants_list_html_erb___171350222027666675_70236393983100'
  app/views/collections/_collection_restaurants_list.html.erb:9:in `_app_views_collections__collection_restaurants_list_html_erb___171350222027666675_70236393983100'
  app/views/collections/edit_collection.html.erb:18:in `_app_views_collections_edit_collection_html_erb___2603788858892649966_70236384724960'


  Rendered /Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_dispatch/middleware/templates/rescues/_trace.erb (1.4ms)
  Rendered /Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_dispatch/middleware/templates/rescues/_request_and_response.erb (1.0ms)
  Rendered /Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_dispatch/middleware/templates/rescues/template_error.erb within rescues/layout (44.2ms)


Started GET "/collection/3/edit" for 127.0.0.1 at 2016-01-18 14:34:57 +0100
Processing by CollectionsController#edit_collection as HTML
  Parameters: {"id"=>"3"}
  [1m[35mUser Load (0.5ms)[0m  SELECT `users`.* FROM `users` WHERE `users`.`id` = 1 LIMIT 1
  [1m[36mCollection Load (0.3ms)[0m  [1mSELECT `collections`.* FROM `collections` WHERE `collections`.`id` = 3 LIMIT 1[0m
  [1m[35mCollectionImage Load (0.3ms)[0m  SELECT `collection_images`.* FROM `collection_images` WHERE (collection_id = 3) LIMIT 1
  Rendered collections/_collection_form.html.erb (9.3ms)
  [1m[36mRestaurant Load (4.8ms)[0m  [1mSELECT `restaurants`.* FROM `restaurants` WHERE `restaurants`.`disabled` = 0[0m
  Rendered collections/_collection_restaurants_form.html.erb (92.8ms)
  [1m[35mCollectionRestaurant Load (0.3ms)[0m  SELECT `collection_restaurants`.* FROM `collection_restaurants` WHERE `collection_restaurants`.`collection_id` = 3
  [1m[36mRestaurant Load (0.3ms)[0m  [1mSELECT `restaurants`.* FROM `restaurants` WHERE `restaurants`.`collection_restaurant_id` = 10[0m
Mysql2::Error: Unknown column 'restaurants.collection_restaurant_id' in 'where clause': SELECT `restaurants`.* FROM `restaurants`  WHERE `restaurants`.`collection_restaurant_id` = 10
  Rendered collections/_collection_restaurants_list.html.erb (3.6ms)
  Rendered collections/edit_collection.html.erb within layouts/admin (109.7ms)
Completed 500 Internal Server Error in 120ms

ActionView::Template::Error (Mysql2::Error: Unknown column 'restaurants.collection_restaurant_id' in 'where clause': SELECT `restaurants`.* FROM `restaurants`  WHERE `restaurants`.`collection_restaurant_id` = 10):
    8:   <tbody>
    9:   <% @collection_restaurants.each do |cr| %>
    10:       <tr>
    11:         <td><%= cr.restaurant %></td>
    12:         <td>
    13:           <div class="btn-group btn-group-xs">
    14:             <%= link_to '#', class: "btn btn-default fa fa-minus-circle", title: 'Delete' do %>
  app/views/collections/_collection_restaurants_list.html.erb:11:in `block in _app_views_collections__collection_restaurants_list_html_erb___171350222027666675_70236343670380'
  app/views/collections/_collection_restaurants_list.html.erb:9:in `_app_views_collections__collection_restaurants_list_html_erb___171350222027666675_70236343670380'
  app/views/collections/edit_collection.html.erb:18:in `_app_views_collections_edit_collection_html_erb___2603788858892649966_70236384724960'


  Rendered /Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_dispatch/middleware/templates/rescues/_trace.erb (1.9ms)
  Rendered /Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_dispatch/middleware/templates/rescues/_request_and_response.erb (1.2ms)
  Rendered /Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_dispatch/middleware/templates/rescues/template_error.erb within rescues/layout (44.9ms)


Started GET "/collection/3/edit" for 127.0.0.1 at 2016-01-18 14:35:02 +0100
Processing by CollectionsController#edit_collection as HTML
  Parameters: {"id"=>"3"}
  [1m[35mUser Load (0.5ms)[0m  SELECT `users`.* FROM `users` WHERE `users`.`id` = 1 LIMIT 1
  [1m[36mCollection Load (0.3ms)[0m  [1mSELECT `collections`.* FROM `collections` WHERE `collections`.`id` = 3 LIMIT 1[0m
  [1m[35mCollectionImage Load (0.3ms)[0m  SELECT `collection_images`.* FROM `collection_images` WHERE (collection_id = 3) LIMIT 1
  Rendered collections/_collection_form.html.erb (8.2ms)
  [1m[36mRestaurant Load (3.8ms)[0m  [1mSELECT `restaurants`.* FROM `restaurants` WHERE `restaurants`.`disabled` = 0[0m
  Rendered collections/_collection_restaurants_form.html.erb (78.2ms)
  [1m[35mCollectionRestaurant Load (0.3ms)[0m  SELECT `collection_restaurants`.* FROM `collection_restaurants` WHERE `collection_restaurants`.`collection_id` = 3
  Rendered collections/_collection_restaurants_list.html.erb (2.6ms)
  Rendered collections/edit_collection.html.erb within layouts/admin (92.9ms)
Completed 200 OK in 106ms (Views: 96.6ms | ActiveRecord: 5.1ms)


Started GET "/collection/3/edit" for 127.0.0.1 at 2016-01-18 14:35:12 +0100
Processing by CollectionsController#edit_collection as HTML
  Parameters: {"id"=>"3"}
  [1m[36mUser Load (0.4ms)[0m  [1mSELECT `users`.* FROM `users` WHERE `users`.`id` = 1 LIMIT 1[0m
  [1m[35mCollection Load (0.3ms)[0m  SELECT `collections`.* FROM `collections` WHERE `collections`.`id` = 3 LIMIT 1
  [1m[36mCollectionImage Load (0.3ms)[0m  [1mSELECT `collection_images`.* FROM `collection_images` WHERE (collection_id = 3) LIMIT 1[0m
  Rendered collections/_collection_form.html.erb (22.1ms)
  [1m[35mRestaurant Load (4.6ms)[0m  SELECT `restaurants`.* FROM `restaurants` WHERE `restaurants`.`disabled` = 0
  Rendered collections/_collection_restaurants_form.html.erb (124.2ms)
  [1m[36mCollectionRestaurant Load (0.3ms)[0m  [1mSELECT `collection_restaurants`.* FROM `collection_restaurants` WHERE `collection_restaurants`.`collection_id` = 3[0m
  Rendered collections/_collection_restaurants_list.html.erb (4.7ms)
  Rendered collections/edit_collection.html.erb within layouts/admin (155.2ms)
Completed 200 OK in 169ms (Views: 158.2ms | ActiveRecord: 5.9ms)


Started GET "/collection/3/edit" for 127.0.0.1 at 2016-01-18 14:36:29 +0100
Processing by CollectionsController#edit_collection as HTML
  Parameters: {"id"=>"3"}
  [1m[35mUser Load (0.2ms)[0m  SELECT `users`.* FROM `users` WHERE `users`.`id` = 1 LIMIT 1
  [1m[36mCollection Load (0.3ms)[0m  [1mSELECT `collections`.* FROM `collections` WHERE `collections`.`id` = 3 LIMIT 1[0m
  [1m[35m (0.2ms)[0m  SELECT COUNT(*) FROM `filter_types` WHERE (code = 'features')
  [1m[36m (0.3ms)[0m  [1mSELECT COUNT(*) FROM `filters` WHERE (code = 'offer')[0m
  [1m[35mCollectionRestaurant Load (0.2ms)[0m  SELECT `collection_restaurants`.* FROM `collection_restaurants` WHERE `collection_restaurants`.`collection_id` = 3
Completed 500 Internal Server Error in 338ms

NoMethodError (undefined method `restaurant' for #<ActiveRecord::Relation:0x007fc2450f94e8>):
  app/controllers/collections_controller.rb:115:in `edit_collection'


  Rendered /Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_dispatch/middleware/templates/rescues/_trace.erb (1.3ms)
  Rendered /Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_dispatch/middleware/templates/rescues/_request_and_response.erb (1.0ms)
  Rendered /Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_dispatch/middleware/templates/rescues/diagnostics.erb within rescues/layout (48.5ms)


Started GET "/collection/3/edit" for 127.0.0.1 at 2016-01-18 14:37:20 +0100
Processing by CollectionsController#edit_collection as HTML
  Parameters: {"id"=>"3"}
  [1m[36mUser Load (0.5ms)[0m  [1mSELECT `users`.* FROM `users` WHERE `users`.`id` = 1 LIMIT 1[0m
  [1m[35mCollection Load (0.3ms)[0m  SELECT `collections`.* FROM `collections` WHERE `collections`.`id` = 3 LIMIT 1
  [1m[36mCollectionRestaurant Load (0.3ms)[0m  [1mSELECT `collection_restaurants`.* FROM `collection_restaurants` WHERE `collection_restaurants`.`collection_id` = 3[0m
Completed 500 Internal Server Error in 7ms

NoMethodError (undefined method `restaurant' for #<ActiveRecord::Relation:0x007fc2460482a0>):
  app/controllers/collections_controller.rb:115:in `edit_collection'


  Rendered /Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_dispatch/middleware/templates/rescues/_trace.erb (1.0ms)
  Rendered /Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_dispatch/middleware/templates/rescues/_request_and_response.erb (0.8ms)
  Rendered /Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_dispatch/middleware/templates/rescues/diagnostics.erb within rescues/layout (42.5ms)


Started GET "/collection/3/edit" for 127.0.0.1 at 2016-01-18 14:37:27 +0100
Processing by CollectionsController#edit_collection as HTML
  Parameters: {"id"=>"3"}
  [1m[35mUser Load (0.5ms)[0m  SELECT `users`.* FROM `users` WHERE `users`.`id` = 1 LIMIT 1
  [1m[36mCollection Load (0.3ms)[0m  [1mSELECT `collections`.* FROM `collections` WHERE `collections`.`id` = 3 LIMIT 1[0m
  [1m[35mCollectionRestaurant Load (0.2ms)[0m  SELECT `collection_restaurants`.* FROM `collection_restaurants` WHERE `collection_restaurants`.`collection_id` = 3
Completed 500 Internal Server Error in 7ms

NoMethodError (undefined method `restaurant' for #<ActiveRecord::Relation:0x007fc244b90c68>):
  app/controllers/collections_controller.rb:115:in `edit_collection'


  Rendered /Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_dispatch/middleware/templates/rescues/_trace.erb (1.4ms)
  Rendered /Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_dispatch/middleware/templates/rescues/_request_and_response.erb (1.0ms)
  Rendered /Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_dispatch/middleware/templates/rescues/diagnostics.erb within rescues/layout (43.8ms)


Started GET "/collection/3/edit" for 127.0.0.1 at 2016-01-18 14:52:52 +0100
Processing by CollectionsController#edit_collection as HTML
  Parameters: {"id"=>"3"}
  [1m[36mUser Load (0.3ms)[0m  [1mSELECT `users`.* FROM `users` WHERE `users`.`id` = 1 LIMIT 1[0m
  [1m[35mCollection Load (0.2ms)[0m  SELECT `collections`.* FROM `collections` WHERE `collections`.`id` = 3 LIMIT 1
  [1m[36m (0.2ms)[0m  [1mSELECT COUNT(*) FROM `filter_types` WHERE (code = 'features')[0m
  [1m[35m (0.2ms)[0m  SELECT COUNT(*) FROM `filters` WHERE (code = 'offer')
  [1m[36mCollectionImage Load (0.2ms)[0m  [1mSELECT `collection_images`.* FROM `collection_images` WHERE (collection_id = 3) LIMIT 1[0m
  Rendered collections/_collection_form.html.erb (52.3ms)
  [1m[35mRestaurant Load (3.2ms)[0m  SELECT `restaurants`.* FROM `restaurants` WHERE `restaurants`.`disabled` = 0
  Rendered collections/_collection_restaurants_form.html.erb (121.3ms)
  [1m[36mRestaurant Load (0.5ms)[0m  [1mSELECT `restaurants`.* FROM `restaurants` INNER JOIN `collections_restaurants` ON `restaurants`.`id` = `collections_restaurants`.`restaurant_id` WHERE `collections_restaurants`.`collection_id` = 3[0m
Mysql2::Error: Table 'hb_dev_db.collections_restaurants' doesn't exist: SELECT `restaurants`.* FROM `restaurants` INNER JOIN `collections_restaurants` ON `restaurants`.`id` = `collections_restaurants`.`restaurant_id` WHERE `collections_restaurants`.`collection_id` = 3
  Rendered collections/_collection_restaurants_list.html.erb (5.3ms)
  Rendered collections/edit_collection.html.erb within layouts/admin (217.1ms)
Completed 500 Internal Server Error in 521ms

ActionView::Template::Error (Mysql2::Error: Table 'hb_dev_db.collections_restaurants' doesn't exist: SELECT `restaurants`.* FROM `restaurants` INNER JOIN `collections_restaurants` ON `restaurants`.`id` = `collections_restaurants`.`restaurant_id` WHERE `collections_restaurants`.`collection_id` = 3):
    6:   </tr>
    7:   </thead>
    8:   <tbody>
    9:   <% @collection_restaurants.each do |cr| %>
    10:       <tr>
    11:         <td><%= cr.name %></td>
    12:         <td>
  app/views/collections/_collection_restaurants_list.html.erb:9:in `_app_views_collections__collection_restaurants_list_html_erb___171350222027666675_70236378543260'
  app/views/collections/edit_collection.html.erb:18:in `_app_views_collections_edit_collection_html_erb___2603788858892649966_70236384724960'


  Rendered /Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_dispatch/middleware/templates/rescues/_trace.erb (2.3ms)
  Rendered /Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_dispatch/middleware/templates/rescues/_request_and_response.erb (1.1ms)
  Rendered /Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_dispatch/middleware/templates/rescues/template_error.erb within rescues/layout (49.2ms)


Started GET "/collection/3/edit" for 127.0.0.1 at 2016-01-18 14:53:12 +0100
Processing by CollectionsController#edit_collection as HTML
  Parameters: {"id"=>"3"}
  [1m[35mUser Load (0.2ms)[0m  SELECT `users`.* FROM `users` WHERE `users`.`id` = 1 LIMIT 1
  [1m[36mCollection Load (0.2ms)[0m  [1mSELECT `collections`.* FROM `collections` WHERE `collections`.`id` = 3 LIMIT 1[0m
  [1m[35m (0.2ms)[0m  SELECT COUNT(*) FROM `filter_types` WHERE (code = 'features')
  [1m[36m (0.3ms)[0m  [1mSELECT COUNT(*) FROM `filters` WHERE (code = 'offer')[0m
  [1m[35mCollectionImage Load (0.3ms)[0m  SELECT `collection_images`.* FROM `collection_images` WHERE (collection_id = 3) LIMIT 1
  Rendered collections/_collection_form.html.erb (66.2ms)
  [1m[36mRestaurant Load (4.0ms)[0m  [1mSELECT `restaurants`.* FROM `restaurants` WHERE `restaurants`.`disabled` = 0[0m
  Rendered collections/_collection_restaurants_form.html.erb (150.0ms)
  [1m[35mRestaurant Load (0.7ms)[0m  SELECT `restaurants`.* FROM `restaurants` INNER JOIN `collection_restaurants` ON `restaurants`.`id` = `collection_restaurants`.`restaurant_id` WHERE `collection_restaurants`.`collection_id` = 3
  Rendered collections/_collection_restaurants_list.html.erb (3.6ms)
  Rendered collections/edit_collection.html.erb within layouts/admin (224.3ms)
Completed 200 OK in 476ms (Views: 236.2ms | ActiveRecord: 22.6ms)


Started POST "/admin/collections/add_restaurant/3" for 127.0.0.1 at 2016-01-18 14:53:21 +0100
Processing by CollectionsController#add_restaurant as JSON
  Parameters: {"utf8"=>"âœ“", "authenticity_token"=>"cajmPApKUoLTDgL4nYG/B3GUhj8fezKDJZWxee28cyM=", "collection_restaurant"=>{"restaurant_id"=>"1"}, "id"=>"3"}
  [1m[36mUser Load (1.5ms)[0m  [1mSELECT `users`.* FROM `users` WHERE `users`.`id` = 1 LIMIT 1[0m
  [1m[35m (0.7ms)[0m  SELECT COUNT(*) FROM `collection_restaurants` WHERE (collection_id = '3' AND restaurant_id = '1')
  Rendered collections/add_restaurant.json.erb (0.1ms)
Completed 200 OK in 60ms (Views: 51.7ms | ActiveRecord: 2.2ms)


Started POST "/admin/collections/add_restaurant/3" for 127.0.0.1 at 2016-01-18 14:53:24 +0100
Processing by CollectionsController#add_restaurant as JSON
  Parameters: {"utf8"=>"âœ“", "authenticity_token"=>"cajmPApKUoLTDgL4nYG/B3GUhj8fezKDJZWxee28cyM=", "collection_restaurant"=>{"restaurant_id"=>"5"}, "id"=>"3"}
  [1m[36mUser Load (0.6ms)[0m  [1mSELECT `users`.* FROM `users` WHERE `users`.`id` = 1 LIMIT 1[0m
  [1m[35m (0.6ms)[0m  SELECT COUNT(*) FROM `collection_restaurants` WHERE (collection_id = '3' AND restaurant_id = '5')
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO `collection_restaurants` (`collection_id`, `order`, `restaurant_id`) VALUES (3, NULL, 5)
  [1m[36m (0.7ms)[0m  [1mCOMMIT[0m
  Rendered collections/add_restaurant.json.erb (0.1ms)
Completed 200 OK in 32ms (Views: 21.4ms | ActiveRecord: 2.3ms)


Started GET "/collection/3/edit" for 127.0.0.1 at 2016-01-18 14:53:27 +0100
Processing by CollectionsController#edit_collection as HTML
  Parameters: {"id"=>"3"}
  [1m[35mUser Load (0.4ms)[0m  SELECT `users`.* FROM `users` WHERE `users`.`id` = 1 LIMIT 1
  [1m[36mCollection Load (0.5ms)[0m  [1mSELECT `collections`.* FROM `collections` WHERE `collections`.`id` = 3 LIMIT 1[0m
  [1m[35mCollectionImage Load (0.3ms)[0m  SELECT `collection_images`.* FROM `collection_images` WHERE (collection_id = 3) LIMIT 1
  Rendered collections/_collection_form.html.erb (11.5ms)
  [1m[36mRestaurant Load (3.7ms)[0m  [1mSELECT `restaurants`.* FROM `restaurants` WHERE `restaurants`.`disabled` = 0[0m
  Rendered collections/_collection_restaurants_form.html.erb (79.0ms)
  [1m[35mRestaurant Load (0.4ms)[0m  SELECT `restaurants`.* FROM `restaurants` INNER JOIN `collection_restaurants` ON `restaurants`.`id` = `collection_restaurants`.`restaurant_id` WHERE `collection_restaurants`.`collection_id` = 3
  Rendered collections/_collection_restaurants_list.html.erb (3.1ms)
  Rendered collections/edit_collection.html.erb within layouts/admin (98.3ms)
Completed 200 OK in 113ms (Views: 102.2ms | ActiveRecord: 5.2ms)


Started GET "/collection/3/edit" for 127.0.0.1 at 2016-01-18 14:55:14 +0100
Processing by CollectionsController#edit_collection as HTML
  Parameters: {"id"=>"3"}
  [1m[36mUser Load (0.4ms)[0m  [1mSELECT `users`.* FROM `users` WHERE `users`.`id` = 1 LIMIT 1[0m
  [1m[35mCollection Load (0.3ms)[0m  SELECT `collections`.* FROM `collections` WHERE `collections`.`id` = 3 LIMIT 1
  [1m[36mCollectionImage Load (0.5ms)[0m  [1mSELECT `collection_images`.* FROM `collection_images` WHERE (collection_id = 3) LIMIT 1[0m
  Rendered collections/_collection_form.html.erb (18.3ms)
  [1m[35mRestaurant Load (6.2ms)[0m  SELECT `restaurants`.* FROM `restaurants` WHERE `restaurants`.`disabled` = 0
  Rendered collections/_collection_restaurants_form.html.erb (99.4ms)
  [1m[36mRestaurant Load (0.5ms)[0m  [1mSELECT `restaurants`.* FROM `restaurants` INNER JOIN `collection_restaurants` ON `restaurants`.`id` = `collection_restaurants`.`restaurant_id` WHERE `collection_restaurants`.`collection_id` = 3[0m
  Rendered collections/_collection_restaurants_list.html.erb (3.3ms)
  Rendered collections/edit_collection.html.erb within layouts/admin (126.8ms)
Completed 200 OK in 151ms (Views: 135.5ms | ActiveRecord: 7.8ms)


Started GET "/collection/3/edit" for 127.0.0.1 at 2016-01-18 14:56:25 +0100
Processing by CollectionsController#edit_collection as HTML
  Parameters: {"id"=>"3"}
  [1m[35mUser Load (0.5ms)[0m  SELECT `users`.* FROM `users` WHERE `users`.`id` = 1 LIMIT 1
  [1m[36mCollection Load (0.2ms)[0m  [1mSELECT `collections`.* FROM `collections` WHERE `collections`.`id` = 3 LIMIT 1[0m
  [1m[35mCollectionImage Load (0.3ms)[0m  SELECT `collection_images`.* FROM `collection_images` WHERE (collection_id = 3) LIMIT 1
  Rendered collections/_collection_form.html.erb (8.9ms)
  [1m[36mRestaurant Load (3.6ms)[0m  [1mSELECT `restaurants`.* FROM `restaurants` WHERE `restaurants`.`disabled` = 0[0m
  Rendered collections/_collection_restaurants_form.html.erb (92.6ms)
  [1m[35mRestaurant Load (0.4ms)[0m  SELECT `restaurants`.* FROM `restaurants` INNER JOIN `collection_restaurants` ON `restaurants`.`id` = `collection_restaurants`.`restaurant_id` WHERE `collection_restaurants`.`collection_id` = 3
  Rendered collections/_collection_restaurants_list.html.erb (2.5ms)
  Rendered collections/edit_collection.html.erb within layouts/admin (107.2ms)
Completed 200 OK in 119ms (Views: 109.3ms | ActiveRecord: 4.9ms)


Started POST "/admin/collections/add_restaurant/3" for 127.0.0.1 at 2016-01-18 14:57:02 +0100
Processing by CollectionsController#add_restaurant as JSON
  Parameters: {"utf8"=>"âœ“", "authenticity_token"=>"cajmPApKUoLTDgL4nYG/B3GUhj8fezKDJZWxee28cyM=", "collection_restaurant"=>{"restaurant_id"=>"22"}, "id"=>"3"}
  [1m[36mUser Load (0.3ms)[0m  [1mSELECT `users`.* FROM `users` WHERE `users`.`id` = 1 LIMIT 1[0m
  [1m[35m (3.2ms)[0m  SELECT COUNT(*) FROM `collection_restaurants` WHERE (collection_id = '3' AND restaurant_id = '22')
  [1m[36m (0.2ms)[0m  [1mBEGIN[0m
  [1m[35mSQL (0.7ms)[0m  INSERT INTO `collection_restaurants` (`collection_id`, `order`, `restaurant_id`) VALUES (3, NULL, 22)
  [1m[36m (0.4ms)[0m  [1mCOMMIT[0m
  Rendered collections/add_restaurant.json.erb (0.1ms)
Completed 200 OK in 36ms (Views: 22.4ms | ActiveRecord: 4.8ms)


Started GET "/collection/3/edit" for 127.0.0.1 at 2016-01-18 14:57:04 +0100
Processing by CollectionsController#edit_collection as HTML
  Parameters: {"id"=>"3"}
  [1m[35mUser Load (0.4ms)[0m  SELECT `users`.* FROM `users` WHERE `users`.`id` = 1 LIMIT 1
  [1m[36mCollection Load (0.6ms)[0m  [1mSELECT `collections`.* FROM `collections` WHERE `collections`.`id` = 3 LIMIT 1[0m
  [1m[35mCollectionImage Load (0.3ms)[0m  SELECT `collection_images`.* FROM `collection_images` WHERE (collection_id = 3) LIMIT 1
  Rendered collections/_collection_form.html.erb (10.8ms)
  [1m[36mRestaurant Load (3.8ms)[0m  [1mSELECT `restaurants`.* FROM `restaurants` WHERE `restaurants`.`disabled` = 0[0m
  Rendered collections/_collection_restaurants_form.html.erb (87.9ms)
  [1m[35mRestaurant Load (0.4ms)[0m  SELECT `restaurants`.* FROM `restaurants` INNER JOIN `collection_restaurants` ON `restaurants`.`id` = `collection_restaurants`.`restaurant_id` WHERE `collection_restaurants`.`collection_id` = 3
  Rendered collections/_collection_restaurants_list.html.erb (2.7ms)
  Rendered collections/edit_collection.html.erb within layouts/admin (104.7ms)
Completed 200 OK in 119ms (Views: 107.4ms | ActiveRecord: 5.5ms)


Started GET "/admin/restaurants" for 127.0.0.1 at 2016-01-18 14:57:15 +0100
Processing by RestaurantsController#index as HTML
  [1m[36mUser Load (0.3ms)[0m  [1mSELECT `users`.* FROM `users` WHERE `users`.`id` = 1 LIMIT 1[0m
  Rendered shared/_restaurant_manage_tabs.html.erb (1.2ms)
  Rendered restaurants/_condition_fields.html.erb (15.7ms)
  [1m[35mRestaurant Load (0.8ms)[0m  SELECT `restaurants`.* FROM `restaurants` ORDER BY disabled ASC,created_at DESC LIMIT 12 OFFSET 0
  [1m[36mPhoto Load (0.5ms)[0m  [1mSELECT `photos`.* FROM `photos` WHERE (restaurant_id = 876 and cover = true and status = 1) LIMIT 1[0m
  [1m[35mPhoto Load (0.4ms)[0m  SELECT `photos`.* FROM `photos` WHERE `photos`.`restaurant_id` = 876 AND `photos`.`status` = 1 ORDER BY restaurant_id ASC, created_at DESC LIMIT 1
  [1m[36mPhoto Load (0.4ms)[0m  [1mSELECT `photos`.* FROM `photos` WHERE (restaurant_id = 851 and cover = true and status = 1) LIMIT 1[0m
  [1m[35mPhoto Load (0.3ms)[0m  SELECT `photos`.* FROM `photos` WHERE `photos`.`restaurant_id` = 851 AND `photos`.`status` = 1 ORDER BY restaurant_id ASC, created_at DESC LIMIT 1
  [1m[36mPhoto Load (0.4ms)[0m  [1mSELECT `photos`.* FROM `photos` WHERE (restaurant_id = 693 and cover = true and status = 1) LIMIT 1[0m
  [1m[35mPhoto Load (0.4ms)[0m  SELECT `photos`.* FROM `photos` WHERE `photos`.`restaurant_id` = 693 AND `photos`.`status` = 1 ORDER BY restaurant_id ASC, created_at DESC LIMIT 1
  [1m[36mPhoto Load (0.7ms)[0m  [1mSELECT `photos`.* FROM `photos` WHERE (restaurant_id = 686 and cover = true and status = 1) LIMIT 1[0m
  [1m[35mPhoto Load (0.4ms)[0m  SELECT `photos`.* FROM `photos` WHERE `photos`.`restaurant_id` = 686 AND `photos`.`status` = 1 ORDER BY restaurant_id ASC, created_at DESC LIMIT 1
  [1m[36mPhoto Load (0.6ms)[0m  [1mSELECT `photos`.* FROM `photos` WHERE (restaurant_id = 669 and cover = true and status = 1) LIMIT 1[0m
  [1m[35mPhoto Load (0.5ms)[0m  SELECT `photos`.* FROM `photos` WHERE `photos`.`restaurant_id` = 669 AND `photos`.`status` = 1 ORDER BY restaurant_id ASC, created_at DESC LIMIT 1
  [1m[36mPhoto Load (0.3ms)[0m  [1mSELECT `photos`.* FROM `photos` WHERE (restaurant_id = 251 and cover = true and status = 1) LIMIT 1[0m
  [1m[35mPhoto Load (0.3ms)[0m  SELECT `photos`.* FROM `photos` WHERE `photos`.`restaurant_id` = 251 AND `photos`.`status` = 1 ORDER BY restaurant_id ASC, created_at DESC LIMIT 1
  [1m[36mPhoto Load (0.4ms)[0m  [1mSELECT `photos`.* FROM `photos` WHERE (restaurant_id = 250 and cover = true and status = 1) LIMIT 1[0m
  [1m[35mPhoto Load (0.3ms)[0m  SELECT `photos`.* FROM `photos` WHERE `photos`.`restaurant_id` = 250 AND `photos`.`status` = 1 ORDER BY restaurant_id ASC, created_at DESC LIMIT 1
  [1m[36mPhoto Load (0.3ms)[0m  [1mSELECT `photos`.* FROM `photos` WHERE (restaurant_id = 237 and cover = true and status = 1) LIMIT 1[0m
  [1m[35mPhoto Load (0.3ms)[0m  SELECT `photos`.* FROM `photos` WHERE `photos`.`restaurant_id` = 237 AND `photos`.`status` = 1 ORDER BY restaurant_id ASC, created_at DESC LIMIT 1
  [1m[36mPhoto Load (0.3ms)[0m  [1mSELECT `photos`.* FROM `photos` WHERE (restaurant_id = 231 and cover = true and status = 1) LIMIT 1[0m
  [1m[35mPhoto Load (0.3ms)[0m  SELECT `photos`.* FROM `photos` WHERE `photos`.`restaurant_id` = 231 AND `photos`.`status` = 1 ORDER BY restaurant_id ASC, created_at DESC LIMIT 1
  [1m[36mPhoto Load (0.3ms)[0m  [1mSELECT `photos`.* FROM `photos` WHERE (restaurant_id = 222 and cover = true and status = 1) LIMIT 1[0m
  [1m[35mPhoto Load (0.3ms)[0m  SELECT `photos`.* FROM `photos` WHERE `photos`.`restaurant_id` = 222 AND `photos`.`status` = 1 ORDER BY restaurant_id ASC, created_at DESC LIMIT 1
  [1m[36mPhoto Load (0.4ms)[0m  [1mSELECT `photos`.* FROM `photos` WHERE (restaurant_id = 221 and cover = true and status = 1) LIMIT 1[0m
  [1m[35mPhoto Load (0.3ms)[0m  SELECT `photos`.* FROM `photos` WHERE `photos`.`restaurant_id` = 221 AND `photos`.`status` = 1 ORDER BY restaurant_id ASC, created_at DESC LIMIT 1
  [1m[36mPhoto Load (0.3ms)[0m  [1mSELECT `photos`.* FROM `photos` WHERE (restaurant_id = 216 and cover = true and status = 1) LIMIT 1[0m
  [1m[35mPhoto Load (0.3ms)[0m  SELECT `photos`.* FROM `photos` WHERE `photos`.`restaurant_id` = 216 AND `photos`.`status` = 1 ORDER BY restaurant_id ASC, created_at DESC LIMIT 1
  [1m[36m (0.4ms)[0m  [1mSELECT COUNT(*) FROM `restaurants` [0m
  Rendered restaurants/index.html.erb within layouts/admin (249.0ms)
Completed 200 OK in 276ms (Views: 217.0ms | ActiveRecord: 56.2ms)


Started GET "/admin/restaurants/admin_new" for 127.0.0.1 at 2016-01-18 14:57:17 +0100
Processing by RestaurantsController#admin_new as HTML
  [1m[35mUser Load (0.3ms)[0m  SELECT `users`.* FROM `users` WHERE `users`.`id` = 1 LIMIT 1
  [1m[36m (1.2ms)[0m  [1mSELECT `filters`.id FROM `filters` INNER JOIN `filters_restaurants` ON `filters`.`id` = `filters_restaurants`.`filter_id` WHERE `filters_restaurants`.`restaurant_id` IS NULL[0m
  [1m[35mFilterType Load (0.2ms)[0m  SELECT `filter_types`.* FROM `filter_types` WHERE `filter_types`.`code` = 'hal_status' LIMIT 1
  [1m[36mFilterType Load (0.2ms)[0m  [1mSELECT `filter_types`.* FROM `filter_types` WHERE `filter_types`.`code` = 'price' LIMIT 1[0m
  [1m[35mFilterType Load (0.2ms)[0m  SELECT `filter_types`.* FROM `filter_types` WHERE `filter_types`.`code` = 'cuisine' LIMIT 1
  [1m[36mFilterType Load (0.2ms)[0m  [1mSELECT `filter_types`.* FROM `filter_types` WHERE `filter_types`.`code` = 'alcohol' LIMIT 1[0m
  [1m[35mFilterType Load (0.2ms)[0m  SELECT `filter_types`.* FROM `filter_types` WHERE `filter_types`.`code` = 'features' LIMIT 1
  Rendered restaurants/_googlemap.html.erb (0.1ms)
  [1m[36mFilter Load (0.3ms)[0m  [1mSELECT `filters`.* FROM `filters` WHERE `filters`.`filter_type_id` = 8[0m
  [1m[35mFilter Load (0.4ms)[0m  SELECT `filters`.* FROM `filters` WHERE `filters`.`filter_type_id` = 1 ORDER BY name ASC
  [1m[36mFilter Load (0.2ms)[0m  [1mSELECT `filters`.* FROM `filters` WHERE `filters`.`filter_type_id` = 4[0m
  [1m[35mFilter Load (0.2ms)[0m  SELECT `filters`.* FROM `filters` WHERE `filters`.`filter_type_id` = 6
  [1m[36mFilter Load (0.3ms)[0m  [1mSELECT `filters`.* FROM `filters` WHERE `filters`.`filter_type_id` = 11 AND (code != 'offer')[0m
  Rendered restaurants/_admin_form.html.erb (65.2ms)
  Rendered restaurants/_upload_menu.html.erb (2.8ms)
  Rendered restaurants/_upload_photos.html.erb (1.5ms)
  Rendered restaurants/admin_new.html.erb within layouts/admin (75.1ms)
Completed 200 OK in 174ms (Views: 79.9ms | ActiveRecord: 10.4ms)


Started GET "/admin/restaurants" for 127.0.0.1 at 2016-01-18 14:57:19 +0100
Processing by RestaurantsController#index as HTML
  [1m[35mUser Load (0.5ms)[0m  SELECT `users`.* FROM `users` WHERE `users`.`id` = 1 LIMIT 1
  Rendered shared/_restaurant_manage_tabs.html.erb (0.6ms)
  Rendered restaurants/_condition_fields.html.erb (10.7ms)
  [1m[36mRestaurant Load (0.8ms)[0m  [1mSELECT `restaurants`.* FROM `restaurants` ORDER BY disabled ASC,created_at DESC LIMIT 12 OFFSET 0[0m
  [1m[35mPhoto Load (0.4ms)[0m  SELECT `photos`.* FROM `photos` WHERE (restaurant_id = 876 and cover = true and status = 1) LIMIT 1
  [1m[36mPhoto Load (0.3ms)[0m  [1mSELECT `photos`.* FROM `photos` WHERE `photos`.`restaurant_id` = 876 AND `photos`.`status` = 1 ORDER BY restaurant_id ASC, created_at DESC LIMIT 1[0m
  [1m[35mPhoto Load (0.3ms)[0m  SELECT `photos`.* FROM `photos` WHERE (restaurant_id = 851 and cover = true and status = 1) LIMIT 1
  [1m[36mPhoto Load (0.3ms)[0m  [1mSELECT `photos`.* FROM `photos` WHERE `photos`.`restaurant_id` = 851 AND `photos`.`status` = 1 ORDER BY restaurant_id ASC, created_at DESC LIMIT 1[0m
  [1m[35mPhoto Load (0.3ms)[0m  SELECT `photos`.* FROM `photos` WHERE (restaurant_id = 693 and cover = true and status = 1) LIMIT 1
  [1m[36mPhoto Load (0.3ms)[0m  [1mSELECT `photos`.* FROM `photos` WHERE `photos`.`restaurant_id` = 693 AND `photos`.`status` = 1 ORDER BY restaurant_id ASC, created_at DESC LIMIT 1[0m
  [1m[35mPhoto Load (0.3ms)[0m  SELECT `photos`.* FROM `photos` WHERE (restaurant_id = 686 and cover = true and status = 1) LIMIT 1
  [1m[36mPhoto Load (0.3ms)[0m  [1mSELECT `photos`.* FROM `photos` WHERE `photos`.`restaurant_id` = 686 AND `photos`.`status` = 1 ORDER BY restaurant_id ASC, created_at DESC LIMIT 1[0m
  [1m[35mPhoto Load (0.3ms)[0m  SELECT `photos`.* FROM `photos` WHERE (restaurant_id = 669 and cover = true and status = 1) LIMIT 1
  [1m[36mPhoto Load (0.3ms)[0m  [1mSELECT `photos`.* FROM `photos` WHERE `photos`.`restaurant_id` = 669 AND `photos`.`status` = 1 ORDER BY restaurant_id ASC, created_at DESC LIMIT 1[0m
  [1m[35mPhoto Load (0.3ms)[0m  SELECT `photos`.* FROM `photos` WHERE (restaurant_id = 251 and cover = true and status = 1) LIMIT 1
  [1m[36mPhoto Load (0.3ms)[0m  [1mSELECT `photos`.* FROM `photos` WHERE `photos`.`restaurant_id` = 251 AND `photos`.`status` = 1 ORDER BY restaurant_id ASC, created_at DESC LIMIT 1[0m
  [1m[35mPhoto Load (0.3ms)[0m  SELECT `photos`.* FROM `photos` WHERE (restaurant_id = 250 and cover = true and status = 1) LIMIT 1
  [1m[36mPhoto Load (0.3ms)[0m  [1mSELECT `photos`.* FROM `photos` WHERE `photos`.`restaurant_id` = 250 AND `photos`.`status` = 1 ORDER BY restaurant_id ASC, created_at DESC LIMIT 1[0m
  [1m[35mPhoto Load (0.3ms)[0m  SELECT `photos`.* FROM `photos` WHERE (restaurant_id = 237 and cover = true and status = 1) LIMIT 1
  [1m[36mPhoto Load (0.3ms)[0m  [1mSELECT `photos`.* FROM `photos` WHERE `photos`.`restaurant_id` = 237 AND `photos`.`status` = 1 ORDER BY restaurant_id ASC, created_at DESC LIMIT 1[0m
  [1m[35mPhoto Load (0.3ms)[0m  SELECT `photos`.* FROM `photos` WHERE (restaurant_id = 231 and cover = true and status = 1) LIMIT 1
  [1m[36mPhoto Load (0.4ms)[0m  [1mSELECT `photos`.* FROM `photos` WHERE `photos`.`restaurant_id` = 231 AND `photos`.`status` = 1 ORDER BY restaurant_id ASC, created_at DESC LIMIT 1[0m
  [1m[35mPhoto Load (0.3ms)[0m  SELECT `photos`.* FROM `photos` WHERE (restaurant_id = 222 and cover = true and status = 1) LIMIT 1
  [1m[36mPhoto Load (0.3ms)[0m  [1mSELECT `photos`.* FROM `photos` WHERE `photos`.`restaurant_id` = 222 AND `photos`.`status` = 1 ORDER BY restaurant_id ASC, created_at DESC LIMIT 1[0m
  [1m[35mPhoto Load (0.4ms)[0m  SELECT `photos`.* FROM `photos` WHERE (restaurant_id = 221 and cover = true and status = 1) LIMIT 1
  [1m[36mPhoto Load (0.3ms)[0m  [1mSELECT `photos`.* FROM `photos` WHERE `photos`.`restaurant_id` = 221 AND `photos`.`status` = 1 ORDER BY restaurant_id ASC, created_at DESC LIMIT 1[0m
  [1m[35mPhoto Load (0.3ms)[0m  SELECT `photos`.* FROM `photos` WHERE (restaurant_id = 216 and cover = true and status = 1) LIMIT 1
  [1m[36mPhoto Load (0.3ms)[0m  [1mSELECT `photos`.* FROM `photos` WHERE `photos`.`restaurant_id` = 216 AND `photos`.`status` = 1 ORDER BY restaurant_id ASC, created_at DESC LIMIT 1[0m
  [1m[35m (0.4ms)[0m  SELECT COUNT(*) FROM `restaurants` 
  Rendered restaurants/index.html.erb within layouts/admin (91.0ms)
Completed 200 OK in 99ms (Views: 87.8ms | ActiveRecord: 9.0ms)


Started GET "/admin/collections" for 127.0.0.1 at 2016-01-18 14:57:20 +0100
Processing by CollectionsController#index as HTML
  Rendered shared/_restaurant_manage_tabs.html.erb (0.7ms)
  [1m[36mCollection Load (0.6ms)[0m  [1mSELECT `collections`.* FROM `collections` ORDER BY name ASC, created_at DESC LIMIT 12 OFFSET 0[0m
  [1m[35mCollectionImage Load (0.2ms)[0m  SELECT `collection_images`.* FROM `collection_images` WHERE (collection_id = 3) LIMIT 1
  [1m[36mCollectionImage Load (0.2ms)[0m  [1mSELECT `collection_images`.* FROM `collection_images` WHERE (collection_id = 2) LIMIT 1[0m
  [1m[35m (0.2ms)[0m  SELECT COUNT(*) FROM `collections` 
  Rendered collections/index.erb within layouts/admin (13.2ms)
  [1m[36mUser Load (0.3ms)[0m  [1mSELECT `users`.* FROM `users` WHERE `users`.`id` = 1 LIMIT 1[0m
Completed 200 OK in 33ms (Views: 30.9ms | ActiveRecord: 1.5ms)


Started GET "/admin/collections/admin_new_collection" for 127.0.0.1 at 2016-01-18 14:57:21 +0100
Processing by CollectionsController#admin_new_collection as HTML
  [1m[35mUser Load (0.3ms)[0m  SELECT `users`.* FROM `users` WHERE `users`.`id` = 1 LIMIT 1
  Rendered collections/_collection_form.html.erb (8.1ms)
  Rendered collections/_collection_restaurants_form.html.erb (1.3ms)
  Rendered collections/admin_new_collection.html.erb within layouts/admin (34.8ms)
Completed 500 Internal Server Error in 57ms

ActionController::RoutingError (No route matches {:controller=>"collections", :action=>"add_restaurant"}):
  app/views/collections/_collection_restaurants_form.html.erb:4:in `_app_views_collections__collection_restaurants_form_html_erb__241531618330134577_70236394739480'
  app/views/collections/admin_new_collection.html.erb:17:in `_app_views_collections_admin_new_collection_html_erb___3023385902521735371_70236385891800'
  app/controllers/collections_controller.rb:56:in `admin_new_collection'


  Rendered /Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_dispatch/middleware/templates/rescues/routing_error.erb within rescues/layout (1.3ms)


Started GET "/admin/collections/admin_new_collection" for 127.0.0.1 at 2016-01-18 14:58:57 +0100
Processing by CollectionsController#admin_new_collection as HTML
  [1m[36mUser Load (0.3ms)[0m  [1mSELECT `users`.* FROM `users` WHERE `users`.`id` = 1 LIMIT 1[0m
  Rendered collections/_collection_form.html.erb (6.2ms)
  Rendered collections/admin_new_collection.html.erb within layouts/admin (17.7ms)
Completed 200 OK in 33ms (Views: 30.2ms | ActiveRecord: 0.3ms)


Started GET "/admin/collections/admin_new_collection" for 127.0.0.1 at 2016-01-18 15:01:06 +0100
Processing by CollectionsController#admin_new_collection as HTML
  [1m[35mUser Load (0.3ms)[0m  SELECT `users`.* FROM `users` WHERE `users`.`id` = 1 LIMIT 1
ERROR: compiling _app_views_collections__collection_form_html_erb__887589468924800558_70236175278040 RAISED /Users/kevinmuller/halalgems_backend/app/views/collections/_collection_form.html.erb:10: syntax error, unexpected ')', expecting keyword_then or ';' or '\n'
....append= ( if collection.name );@output_buffer.safe_concat('
...                               ^
/Users/kevinmuller/halalgems_backend/app/views/collections/_collection_form.html.erb:12: syntax error, unexpected keyword_end, expecting ')'
');           end 
                 ^
/Users/kevinmuller/halalgems_backend/app/views/collections/_collection_form.html.erb:24: syntax error, unexpected keyword_end, expecting ')'
');   end 
         ^
/Users/kevinmuller/halalgems_backend/app/views/collections/_collection_form.html.erb:28: syntax error, unexpected keyword_ensure, expecting ')'
/Users/kevinmuller/halalgems_backend/app/views/collections/_collection_form.html.erb:30: syntax error, unexpected keyword_end, expecting ')'
Function body:           def _app_views_collections__collection_form_html_erb__887589468924800558_70236175278040(local_assigns, output_buffer)
            _old_virtual_path, @virtual_path = @virtual_path, "collections/_collection_form";_old_output_buffer = @output_buffer;collection_form = local_assigns[:collection_form];;@output_buffer = output_buffer || ActionView::OutputBuffer.new;@output_buffer.safe_concat('
<div class="form_add_new_collection">
  ');@output_buffer.append=  simple_form_for(@collection, wrapper: 'collection', :multipart => true, :validate => true) do |f| @output_buffer.safe_concat('
');@output_buffer.safe_concat('    <div class="row">
      <div class=\'col-md-4\'>
        ');@output_buffer.append= ( hidden_field_tag 'admin', true );@output_buffer.safe_concat('
');@output_buffer.safe_concat('        ');@output_buffer.append= ( f.input :name, placeholder: 'Name', input_html: { class: 'form-control' } );@output_buffer.safe_concat('
');@output_buffer.safe_concat('        ');@output_buffer.append= ( f.input :description, placeholder: 'Description', input_html: { class: 'form-control' });@output_buffer.safe_concat('
');@output_buffer.safe_concat('        <div class="control-group">
          ');@output_buffer.append= ( if collection.name );@output_buffer.safe_concat('
');@output_buffer.safe_concat('            <img src="');@output_buffer.append= ( @collection.image_url );@output_buffer.safe_concat('" alt="');@output_buffer.append= ( @collection.name );@output_buffer.safe_concat('" class="jtooltip" title="');@output_buffer.append= ( @collection.name );@output_buffer.safe_concat('" />
');           end 
@output_buffer.safe_concat('          ');@output_buffer.append= ( f.label :image, t('collections.choose_new_image'), class: 'btn btn-default mg-bt-10 border-radius-5 form-control label_for_choose_menu' );@output_buffer.safe_concat('
');@output_buffer.safe_concat('          ');@output_buffer.append= ( f.file_field :image, :name => 'collection_image[image]', :multiple => false , class: 'form-control');@output_buffer.safe_concat('
');@output_buffer.safe_concat('          <label class=\'hide collection-image-error\'> ');@output_buffer.append= ( t('collections.please_choose_image') );@output_buffer.safe_concat(' </label>
        </div>
      </div>
    </div>
    <div class="backend">
      <button id=\'submit_collection\' class="btn btn-submit" type="submit">
        ');@output_buffer.append= ( t('layout.submit') );@output_buffer.safe_concat('
');@output_buffer.safe_concat('      </button>
    </div>
');   end 
@output_buffer.safe_concat('</div>

');@output_buffer.to_s
          ensure
            @virtual_path, @output_buffer = _old_virtual_path, _old_output_buffer
          end

Backtrace: /Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_view/template.rb:297:in `module_eval'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_view/template.rb:297:in `compile'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_view/template.rb:244:in `block in compile!'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_view/template.rb:232:in `synchronize'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_view/template.rb:232:in `compile!'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_view/template.rb:144:in `block in render'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/activesupport-3.2.8/lib/active_support/notifications.rb:125:in `instrument'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_view/template.rb:143:in `render'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_view/renderer/partial_renderer.rb:265:in `render_partial'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_view/renderer/partial_renderer.rb:238:in `block in render'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_view/renderer/abstract_renderer.rb:38:in `block in instrument'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/activesupport-3.2.8/lib/active_support/notifications.rb:123:in `block in instrument'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/activesupport-3.2.8/lib/active_support/notifications/instrumenter.rb:20:in `instrument'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/activesupport-3.2.8/lib/active_support/notifications.rb:123:in `instrument'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_view/renderer/abstract_renderer.rb:38:in `instrument'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/newrelic_rpm-3.7.3.204/lib/new_relic/agent/instrumentation/rails3/action_controller.rb:175:in `block in instrument_with_newrelic'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/newrelic_rpm-3.7.3.204/lib/new_relic/agent/method_tracer.rb:281:in `trace_execution_scoped'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/newrelic_rpm-3.7.3.204/lib/new_relic/agent/instrumentation/rails3/action_controller.rb:174:in `instrument_with_newrelic'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_view/renderer/partial_renderer.rb:237:in `render'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_view/renderer/renderer.rb:41:in `render_partial'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_view/helpers/rendering_helper.rb:27:in `render'
/Users/kevinmuller/halalgems_backend/app/views/collections/admin_new_collection.html.erb:14:in `_app_views_collections_admin_new_collection_html_erb___3023385902521735371_70236180334300'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_view/template.rb:145:in `block in render'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/activesupport-3.2.8/lib/active_support/notifications.rb:125:in `instrument'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_view/template.rb:143:in `render'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_view/renderer/template_renderer.rb:47:in `block (2 levels) in render_template'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_view/renderer/abstract_renderer.rb:38:in `block in instrument'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/activesupport-3.2.8/lib/active_support/notifications.rb:123:in `block in instrument'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/activesupport-3.2.8/lib/active_support/notifications/instrumenter.rb:20:in `instrument'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/activesupport-3.2.8/lib/active_support/notifications.rb:123:in `instrument'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_view/renderer/abstract_renderer.rb:38:in `instrument'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_view/renderer/template_renderer.rb:46:in `block in render_template'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_view/renderer/template_renderer.rb:54:in `render_with_layout'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_view/renderer/template_renderer.rb:45:in `render_template'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_view/renderer/template_renderer.rb:18:in `render'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/newrelic_rpm-3.7.3.204/lib/new_relic/agent/instrumentation/rails3/action_controller.rb:160:in `block in render_with_newrelic'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/newrelic_rpm-3.7.3.204/lib/new_relic/agent/method_tracer.rb:281:in `trace_execution_scoped'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/newrelic_rpm-3.7.3.204/lib/new_relic/agent/instrumentation/rails3/action_controller.rb:159:in `render_with_newrelic'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_view/renderer/renderer.rb:36:in `render_template'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_view/renderer/renderer.rb:17:in `render'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/abstract_controller/rendering.rb:110:in `_render_template'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_controller/metal/streaming.rb:225:in `_render_template'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/abstract_controller/rendering.rb:103:in `render_to_body'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_controller/metal/renderers.rb:28:in `render_to_body'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_controller/metal/compatibility.rb:50:in `render_to_body'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/abstract_controller/rendering.rb:88:in `render'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_controller/metal/rendering.rb:16:in `render'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_controller/metal/instrumentation.rb:40:in `block (2 levels) in render'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/activesupport-3.2.8/lib/active_support/core_ext/benchmark.rb:5:in `block in ms'
/Users/kevinmuller/.rvm/rubies/ruby-2.2.4/lib/ruby/2.2.0/benchmark.rb:303:in `realtime'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/activesupport-3.2.8/lib/active_support/core_ext/benchmark.rb:5:in `ms'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_controller/metal/instrumentation.rb:40:in `block in render'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_controller/metal/instrumentation.rb:83:in `cleanup_view_runtime'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/activerecord-3.2.8/lib/active_record/railties/controller_runtime.rb:24:in `cleanup_view_runtime'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_controller/metal/instrumentation.rb:39:in `render'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/bundler/gems/remotipart-aadc29e996c3/lib/remotipart/render_overrides.rb:14:in `render_with_remotipart'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_controller/metal/implicit_render.rb:10:in `default_render'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_controller/metal/mime_responds.rb:196:in `respond_to'
/Users/kevinmuller/halalgems_backend/app/controllers/collections_controller.rb:56:in `admin_new_collection'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_controller/metal/implicit_render.rb:4:in `send_action'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/abstract_controller/base.rb:167:in `process_action'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_controller/metal/rendering.rb:10:in `process_action'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/abstract_controller/callbacks.rb:18:in `block in process_action'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/activesupport-3.2.8/lib/active_support/callbacks.rb:458:in `_run__1878201843038484176__process_action__477167353515410138__callbacks'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/activesupport-3.2.8/lib/active_support/callbacks.rb:405:in `__run_callback'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/activesupport-3.2.8/lib/active_support/callbacks.rb:385:in `_run_process_action_callbacks'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/activesupport-3.2.8/lib/active_support/callbacks.rb:81:in `run_callbacks'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/abstract_controller/callbacks.rb:17:in `process_action'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_controller/metal/rescue.rb:29:in `process_action'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_controller/metal/instrumentation.rb:30:in `block in process_action'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/activesupport-3.2.8/lib/active_support/notifications.rb:123:in `block in instrument'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/activesupport-3.2.8/lib/active_support/notifications/instrumenter.rb:20:in `instrument'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/activesupport-3.2.8/lib/active_support/notifications.rb:123:in `instrument'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_controller/metal/instrumentation.rb:29:in `process_action'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_controller/metal/params_wrapper.rb:207:in `process_action'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/activerecord-3.2.8/lib/active_record/railties/controller_runtime.rb:18:in `process_action'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/newrelic_rpm-3.7.3.204/lib/new_relic/agent/instrumentation/rails3/action_controller.rb:38:in `block in process_action'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/newrelic_rpm-3.7.3.204/lib/new_relic/agent/instrumentation/controller_instrumentation.rb:335:in `perform_action_with_newrelic_trace'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/newrelic_rpm-3.7.3.204/lib/new_relic/agent/instrumentation/rails3/action_controller.rb:37:in `process_action'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/abstract_controller/base.rb:121:in `process'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/abstract_controller/rendering.rb:45:in `process'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_controller/metal.rb:203:in `dispatch'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_controller/metal/rack_delegation.rb:14:in `dispatch'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_controller/metal.rb:246:in `block in action'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_dispatch/routing/route_set.rb:73:in `call'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_dispatch/routing/route_set.rb:73:in `dispatch'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_dispatch/routing/route_set.rb:36:in `call'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/journey-1.0.4/lib/journey/router.rb:68:in `block in call'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/journey-1.0.4/lib/journey/router.rb:56:in `each'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/journey-1.0.4/lib/journey/router.rb:56:in `call'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_dispatch/routing/route_set.rb:600:in `call'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/omniauth-1.1.4/lib/omniauth/strategy.rb:184:in `call!'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/omniauth-1.1.4/lib/omniauth/strategy.rb:164:in `call'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/newrelic_rpm-3.7.3.204/lib/new_relic/rack/error_collector.rb:55:in `call'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/newrelic_rpm-3.7.3.204/lib/new_relic/rack/agent_hooks.rb:32:in `call'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/newrelic_rpm-3.7.3.204/lib/new_relic/rack/browser_monitoring.rb:27:in `call'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/newrelic_rpm-3.7.3.204/lib/new_relic/rack/developer_mode.rb:45:in `call'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/galetahub-simple_captcha-0.1.5/lib/simple_captcha/middleware.rb:20:in `call'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/bundler/gems/client_side_validations-a6a515504520/lib/client_side_validations/middleware.rb:21:in `call'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/warden-1.1.1/lib/warden/manager.rb:35:in `block in call'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/warden-1.1.1/lib/warden/manager.rb:34:in `catch'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/warden-1.1.1/lib/warden/manager.rb:34:in `call'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_dispatch/middleware/best_standards_support.rb:17:in `call'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/rack-1.4.5/lib/rack/etag.rb:23:in `call'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/rack-1.4.5/lib/rack/conditionalget.rb:25:in `call'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_dispatch/middleware/head.rb:14:in `call'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/bundler/gems/remotipart-aadc29e996c3/lib/remotipart/middleware.rb:27:in `call'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_dispatch/middleware/params_parser.rb:21:in `call'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_dispatch/middleware/flash.rb:242:in `call'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/rack-1.4.5/lib/rack/session/abstract/id.rb:210:in `context'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/rack-1.4.5/lib/rack/session/abstract/id.rb:205:in `call'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_dispatch/middleware/cookies.rb:339:in `call'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/dragonfly-0.9.15/lib/dragonfly/cookie_monster.rb:9:in `call'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/activerecord-3.2.8/lib/active_record/query_cache.rb:64:in `call'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/activerecord-3.2.8/lib/active_record/connection_adapters/abstract/connection_pool.rb:473:in `call'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_dispatch/middleware/callbacks.rb:28:in `block in call'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/activesupport-3.2.8/lib/active_support/callbacks.rb:405:in `_run__1871245027803988066__call__4207201468600934469__callbacks'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/activesupport-3.2.8/lib/active_support/callbacks.rb:405:in `__run_callback'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/activesupport-3.2.8/lib/active_support/callbacks.rb:385:in `_run_call_callbacks'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/activesupport-3.2.8/lib/active_support/callbacks.rb:81:in `run_callbacks'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_dispatch/middleware/callbacks.rb:27:in `call'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_dispatch/middleware/reloader.rb:65:in `call'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_dispatch/middleware/remote_ip.rb:31:in `call'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_dispatch/middleware/debug_exceptions.rb:16:in `call'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_dispatch/middleware/show_exceptions.rb:56:in `call'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/railties-3.2.8/lib/rails/rack/logger.rb:26:in `call_app'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/railties-3.2.8/lib/rails/rack/logger.rb:16:in `call'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/quiet_assets-1.0.3/lib/quiet_assets.rb:23:in `call_with_quiet_assets'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_dispatch/middleware/request_id.rb:22:in `call'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/rack-1.4.5/lib/rack/methodoverride.rb:21:in `call'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/rack-1.4.5/lib/rack/runtime.rb:17:in `call'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/activesupport-3.2.8/lib/active_support/cache/strategy/local_cache.rb:72:in `call'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/rack-1.4.5/lib/rack/lock.rb:15:in `call'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_dispatch/middleware/static.rb:62:in `call'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/dragonfly-0.9.15/lib/dragonfly/middleware.rb:13:in `call'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/rack-cache-1.2/lib/rack/cache/context.rb:136:in `forward'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/rack-cache-1.2/lib/rack/cache/context.rb:245:in `fetch'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/rack-cache-1.2/lib/rack/cache/context.rb:185:in `lookup'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/rack-cache-1.2/lib/rack/cache/context.rb:66:in `call!'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/rack-cache-1.2/lib/rack/cache/context.rb:51:in `call'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/railties-3.2.8/lib/rails/engine.rb:479:in `call'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/railties-3.2.8/lib/rails/application.rb:223:in `call'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/rack-1.4.5/lib/rack/content_length.rb:14:in `call'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/railties-3.2.8/lib/rails/rack/log_tailer.rb:17:in `call'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/rack-1.4.5/lib/rack/handler/webrick.rb:59:in `service'
/Users/kevinmuller/.rvm/rubies/ruby-2.2.4/lib/ruby/2.2.0/webrick/httpserver.rb:138:in `service'
/Users/kevinmuller/.rvm/rubies/ruby-2.2.4/lib/ruby/2.2.0/webrick/httpserver.rb:94:in `run'
/Users/kevinmuller/.rvm/rubies/ruby-2.2.4/lib/ruby/2.2.0/webrick/server.rb:294:in `block in start_thread'
  Rendered collections/_collection_form.html.erb (1.2ms)
  Rendered collections/admin_new_collection.html.erb within layouts/admin (2.3ms)
Completed 500 Internal Server Error in 19ms

ActionView::Template::Error (/Users/kevinmuller/halalgems_backend/app/views/collections/_collection_form.html.erb:10: syntax error, unexpected ')', expecting keyword_then or ';' or '\n'
....append= ( if collection.name );@output_buffer.safe_concat('
...                               ^
/Users/kevinmuller/halalgems_backend/app/views/collections/_collection_form.html.erb:12: syntax error, unexpected keyword_end, expecting ')'
');           end 
                 ^
/Users/kevinmuller/halalgems_backend/app/views/collections/_collection_form.html.erb:24: syntax error, unexpected keyword_end, expecting ')'
');   end 
         ^
/Users/kevinmuller/halalgems_backend/app/views/collections/_collection_form.html.erb:28: syntax error, unexpected keyword_ensure, expecting ')'
/Users/kevinmuller/halalgems_backend/app/views/collections/_collection_form.html.erb:30: syntax error, unexpected keyword_end, expecting ')'):
    7:         <%= f.input :name, placeholder: 'Name', input_html: { class: 'form-control' } %>
    8:         <%= f.input :description, placeholder: 'Description', input_html: { class: 'form-control' }%>
    9:         <div class="control-group">
    10:           <%= if collection.name %>
    11:             <img src="<%= @collection.image_url %>" alt="<%= @collection.name %>" class="jtooltip" title="<%= @collection.name %>" />
    12:           <% end %>
    13:           <%= f.label :image, t('collections.choose_new_image'), class: 'btn btn-default mg-bt-10 border-radius-5 form-control label_for_choose_menu' %>
  app/views/collections/admin_new_collection.html.erb:14:in `_app_views_collections_admin_new_collection_html_erb___3023385902521735371_70236180334300'
  app/controllers/collections_controller.rb:56:in `admin_new_collection'


  Rendered /Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_dispatch/middleware/templates/rescues/_trace.erb (1.5ms)
  Rendered /Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_dispatch/middleware/templates/rescues/_request_and_response.erb (1.1ms)
  Rendered /Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_dispatch/middleware/templates/rescues/template_error.erb within rescues/layout (45.7ms)


Started GET "/admin/collections/admin_new_collection" for 127.0.0.1 at 2016-01-18 15:01:45 +0100
Processing by CollectionsController#admin_new_collection as HTML
  [1m[36mUser Load (0.5ms)[0m  [1mSELECT `users`.* FROM `users` WHERE `users`.`id` = 1 LIMIT 1[0m
ERROR: compiling _app_views_collections__collection_form_html_erb__887589468924800558_70236414726500 RAISED /Users/kevinmuller/halalgems_backend/app/views/collections/_collection_form.html.erb:10: syntax error, unexpected ')', expecting keyword_then or ';' or '\n'
... ( if collection.name.present );@output_buffer.safe_concat('
...                               ^
/Users/kevinmuller/halalgems_backend/app/views/collections/_collection_form.html.erb:12: syntax error, unexpected keyword_end, expecting ')'
');           end 
                 ^
/Users/kevinmuller/halalgems_backend/app/views/collections/_collection_form.html.erb:24: syntax error, unexpected keyword_end, expecting ')'
');   end 
         ^
/Users/kevinmuller/halalgems_backend/app/views/collections/_collection_form.html.erb:28: syntax error, unexpected keyword_ensure, expecting ')'
/Users/kevinmuller/halalgems_backend/app/views/collections/_collection_form.html.erb:30: syntax error, unexpected keyword_end, expecting ')'
Function body:           def _app_views_collections__collection_form_html_erb__887589468924800558_70236414726500(local_assigns, output_buffer)
            _old_virtual_path, @virtual_path = @virtual_path, "collections/_collection_form";_old_output_buffer = @output_buffer;collection_form = local_assigns[:collection_form];;@output_buffer = output_buffer || ActionView::OutputBuffer.new;@output_buffer.safe_concat('
<div class="form_add_new_collection">
  ');@output_buffer.append=  simple_form_for(@collection, wrapper: 'collection', :multipart => true, :validate => true) do |f| @output_buffer.safe_concat('
');@output_buffer.safe_concat('    <div class="row">
      <div class=\'col-md-4\'>
        ');@output_buffer.append= ( hidden_field_tag 'admin', true );@output_buffer.safe_concat('
');@output_buffer.safe_concat('        ');@output_buffer.append= ( f.input :name, placeholder: 'Name', input_html: { class: 'form-control' } );@output_buffer.safe_concat('
');@output_buffer.safe_concat('        ');@output_buffer.append= ( f.input :description, placeholder: 'Description', input_html: { class: 'form-control' });@output_buffer.safe_concat('
');@output_buffer.safe_concat('        <div class="control-group">
          ');@output_buffer.append= ( if collection.name.present );@output_buffer.safe_concat('
');@output_buffer.safe_concat('            <img src="');@output_buffer.append= ( @collection.image_url );@output_buffer.safe_concat('" alt="');@output_buffer.append= ( @collection.name );@output_buffer.safe_concat('" class="jtooltip" title="');@output_buffer.append= ( @collection.name );@output_buffer.safe_concat('" />
');           end 
@output_buffer.safe_concat('          ');@output_buffer.append= ( f.label :image, t('collections.choose_new_image'), class: 'btn btn-default mg-bt-10 border-radius-5 form-control label_for_choose_menu' );@output_buffer.safe_concat('
');@output_buffer.safe_concat('          ');@output_buffer.append= ( f.file_field :image, :name => 'collection_image[image]', :multiple => false , class: 'form-control');@output_buffer.safe_concat('
');@output_buffer.safe_concat('          <label class=\'hide collection-image-error\'> ');@output_buffer.append= ( t('collections.please_choose_image') );@output_buffer.safe_concat(' </label>
        </div>
      </div>
    </div>
    <div class="backend">
      <button id=\'submit_collection\' class="btn btn-submit" type="submit">
        ');@output_buffer.append= ( t('layout.submit') );@output_buffer.safe_concat('
');@output_buffer.safe_concat('      </button>
    </div>
');   end 
@output_buffer.safe_concat('</div>

');@output_buffer.to_s
          ensure
            @virtual_path, @output_buffer = _old_virtual_path, _old_output_buffer
          end

Backtrace: /Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_view/template.rb:297:in `module_eval'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_view/template.rb:297:in `compile'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_view/template.rb:244:in `block in compile!'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_view/template.rb:232:in `synchronize'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_view/template.rb:232:in `compile!'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_view/template.rb:144:in `block in render'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/activesupport-3.2.8/lib/active_support/notifications.rb:125:in `instrument'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_view/template.rb:143:in `render'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_view/renderer/partial_renderer.rb:265:in `render_partial'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_view/renderer/partial_renderer.rb:238:in `block in render'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_view/renderer/abstract_renderer.rb:38:in `block in instrument'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/activesupport-3.2.8/lib/active_support/notifications.rb:123:in `block in instrument'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/activesupport-3.2.8/lib/active_support/notifications/instrumenter.rb:20:in `instrument'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/activesupport-3.2.8/lib/active_support/notifications.rb:123:in `instrument'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_view/renderer/abstract_renderer.rb:38:in `instrument'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/newrelic_rpm-3.7.3.204/lib/new_relic/agent/instrumentation/rails3/action_controller.rb:175:in `block in instrument_with_newrelic'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/newrelic_rpm-3.7.3.204/lib/new_relic/agent/method_tracer.rb:281:in `trace_execution_scoped'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/newrelic_rpm-3.7.3.204/lib/new_relic/agent/instrumentation/rails3/action_controller.rb:174:in `instrument_with_newrelic'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_view/renderer/partial_renderer.rb:237:in `render'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_view/renderer/renderer.rb:41:in `render_partial'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_view/helpers/rendering_helper.rb:27:in `render'
/Users/kevinmuller/halalgems_backend/app/views/collections/admin_new_collection.html.erb:14:in `_app_views_collections_admin_new_collection_html_erb___3023385902521735371_70236180334300'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_view/template.rb:145:in `block in render'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/activesupport-3.2.8/lib/active_support/notifications.rb:125:in `instrument'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_view/template.rb:143:in `render'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_view/renderer/template_renderer.rb:47:in `block (2 levels) in render_template'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_view/renderer/abstract_renderer.rb:38:in `block in instrument'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/activesupport-3.2.8/lib/active_support/notifications.rb:123:in `block in instrument'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/activesupport-3.2.8/lib/active_support/notifications/instrumenter.rb:20:in `instrument'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/activesupport-3.2.8/lib/active_support/notifications.rb:123:in `instrument'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_view/renderer/abstract_renderer.rb:38:in `instrument'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_view/renderer/template_renderer.rb:46:in `block in render_template'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_view/renderer/template_renderer.rb:54:in `render_with_layout'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_view/renderer/template_renderer.rb:45:in `render_template'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_view/renderer/template_renderer.rb:18:in `render'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/newrelic_rpm-3.7.3.204/lib/new_relic/agent/instrumentation/rails3/action_controller.rb:160:in `block in render_with_newrelic'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/newrelic_rpm-3.7.3.204/lib/new_relic/agent/method_tracer.rb:281:in `trace_execution_scoped'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/newrelic_rpm-3.7.3.204/lib/new_relic/agent/instrumentation/rails3/action_controller.rb:159:in `render_with_newrelic'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_view/renderer/renderer.rb:36:in `render_template'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_view/renderer/renderer.rb:17:in `render'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/abstract_controller/rendering.rb:110:in `_render_template'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_controller/metal/streaming.rb:225:in `_render_template'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/abstract_controller/rendering.rb:103:in `render_to_body'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_controller/metal/renderers.rb:28:in `render_to_body'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_controller/metal/compatibility.rb:50:in `render_to_body'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/abstract_controller/rendering.rb:88:in `render'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_controller/metal/rendering.rb:16:in `render'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_controller/metal/instrumentation.rb:40:in `block (2 levels) in render'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/activesupport-3.2.8/lib/active_support/core_ext/benchmark.rb:5:in `block in ms'
/Users/kevinmuller/.rvm/rubies/ruby-2.2.4/lib/ruby/2.2.0/benchmark.rb:303:in `realtime'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/activesupport-3.2.8/lib/active_support/core_ext/benchmark.rb:5:in `ms'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_controller/metal/instrumentation.rb:40:in `block in render'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_controller/metal/instrumentation.rb:83:in `cleanup_view_runtime'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/activerecord-3.2.8/lib/active_record/railties/controller_runtime.rb:24:in `cleanup_view_runtime'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_controller/metal/instrumentation.rb:39:in `render'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/bundler/gems/remotipart-aadc29e996c3/lib/remotipart/render_overrides.rb:14:in `render_with_remotipart'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_controller/metal/implicit_render.rb:10:in `default_render'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_controller/metal/mime_responds.rb:196:in `respond_to'
/Users/kevinmuller/halalgems_backend/app/controllers/collections_controller.rb:56:in `admin_new_collection'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_controller/metal/implicit_render.rb:4:in `send_action'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/abstract_controller/base.rb:167:in `process_action'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_controller/metal/rendering.rb:10:in `process_action'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/abstract_controller/callbacks.rb:18:in `block in process_action'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/activesupport-3.2.8/lib/active_support/callbacks.rb:458:in `_run__1878201843038484176__process_action__477167353515410138__callbacks'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/activesupport-3.2.8/lib/active_support/callbacks.rb:405:in `__run_callback'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/activesupport-3.2.8/lib/active_support/callbacks.rb:385:in `_run_process_action_callbacks'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/activesupport-3.2.8/lib/active_support/callbacks.rb:81:in `run_callbacks'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/abstract_controller/callbacks.rb:17:in `process_action'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_controller/metal/rescue.rb:29:in `process_action'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_controller/metal/instrumentation.rb:30:in `block in process_action'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/activesupport-3.2.8/lib/active_support/notifications.rb:123:in `block in instrument'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/activesupport-3.2.8/lib/active_support/notifications/instrumenter.rb:20:in `instrument'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/activesupport-3.2.8/lib/active_support/notifications.rb:123:in `instrument'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_controller/metal/instrumentation.rb:29:in `process_action'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_controller/metal/params_wrapper.rb:207:in `process_action'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/activerecord-3.2.8/lib/active_record/railties/controller_runtime.rb:18:in `process_action'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/newrelic_rpm-3.7.3.204/lib/new_relic/agent/instrumentation/rails3/action_controller.rb:38:in `block in process_action'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/newrelic_rpm-3.7.3.204/lib/new_relic/agent/instrumentation/controller_instrumentation.rb:335:in `perform_action_with_newrelic_trace'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/newrelic_rpm-3.7.3.204/lib/new_relic/agent/instrumentation/rails3/action_controller.rb:37:in `process_action'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/abstract_controller/base.rb:121:in `process'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/abstract_controller/rendering.rb:45:in `process'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_controller/metal.rb:203:in `dispatch'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_controller/metal/rack_delegation.rb:14:in `dispatch'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_controller/metal.rb:246:in `block in action'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_dispatch/routing/route_set.rb:73:in `call'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_dispatch/routing/route_set.rb:73:in `dispatch'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_dispatch/routing/route_set.rb:36:in `call'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/journey-1.0.4/lib/journey/router.rb:68:in `block in call'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/journey-1.0.4/lib/journey/router.rb:56:in `each'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/journey-1.0.4/lib/journey/router.rb:56:in `call'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_dispatch/routing/route_set.rb:600:in `call'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/omniauth-1.1.4/lib/omniauth/strategy.rb:184:in `call!'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/omniauth-1.1.4/lib/omniauth/strategy.rb:164:in `call'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/newrelic_rpm-3.7.3.204/lib/new_relic/rack/error_collector.rb:55:in `call'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/newrelic_rpm-3.7.3.204/lib/new_relic/rack/agent_hooks.rb:32:in `call'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/newrelic_rpm-3.7.3.204/lib/new_relic/rack/browser_monitoring.rb:27:in `call'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/newrelic_rpm-3.7.3.204/lib/new_relic/rack/developer_mode.rb:45:in `call'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/galetahub-simple_captcha-0.1.5/lib/simple_captcha/middleware.rb:20:in `call'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/bundler/gems/client_side_validations-a6a515504520/lib/client_side_validations/middleware.rb:21:in `call'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/warden-1.1.1/lib/warden/manager.rb:35:in `block in call'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/warden-1.1.1/lib/warden/manager.rb:34:in `catch'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/warden-1.1.1/lib/warden/manager.rb:34:in `call'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_dispatch/middleware/best_standards_support.rb:17:in `call'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/rack-1.4.5/lib/rack/etag.rb:23:in `call'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/rack-1.4.5/lib/rack/conditionalget.rb:25:in `call'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_dispatch/middleware/head.rb:14:in `call'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/bundler/gems/remotipart-aadc29e996c3/lib/remotipart/middleware.rb:27:in `call'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_dispatch/middleware/params_parser.rb:21:in `call'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_dispatch/middleware/flash.rb:242:in `call'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/rack-1.4.5/lib/rack/session/abstract/id.rb:210:in `context'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/rack-1.4.5/lib/rack/session/abstract/id.rb:205:in `call'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_dispatch/middleware/cookies.rb:339:in `call'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/dragonfly-0.9.15/lib/dragonfly/cookie_monster.rb:9:in `call'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/activerecord-3.2.8/lib/active_record/query_cache.rb:64:in `call'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/activerecord-3.2.8/lib/active_record/connection_adapters/abstract/connection_pool.rb:473:in `call'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_dispatch/middleware/callbacks.rb:28:in `block in call'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/activesupport-3.2.8/lib/active_support/callbacks.rb:405:in `_run__1871245027803988066__call__4207201468600934469__callbacks'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/activesupport-3.2.8/lib/active_support/callbacks.rb:405:in `__run_callback'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/activesupport-3.2.8/lib/active_support/callbacks.rb:385:in `_run_call_callbacks'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/activesupport-3.2.8/lib/active_support/callbacks.rb:81:in `run_callbacks'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_dispatch/middleware/callbacks.rb:27:in `call'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_dispatch/middleware/reloader.rb:65:in `call'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_dispatch/middleware/remote_ip.rb:31:in `call'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_dispatch/middleware/debug_exceptions.rb:16:in `call'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_dispatch/middleware/show_exceptions.rb:56:in `call'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/railties-3.2.8/lib/rails/rack/logger.rb:26:in `call_app'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/railties-3.2.8/lib/rails/rack/logger.rb:16:in `call'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/quiet_assets-1.0.3/lib/quiet_assets.rb:23:in `call_with_quiet_assets'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_dispatch/middleware/request_id.rb:22:in `call'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/rack-1.4.5/lib/rack/methodoverride.rb:21:in `call'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/rack-1.4.5/lib/rack/runtime.rb:17:in `call'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/activesupport-3.2.8/lib/active_support/cache/strategy/local_cache.rb:72:in `call'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/rack-1.4.5/lib/rack/lock.rb:15:in `call'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_dispatch/middleware/static.rb:62:in `call'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/dragonfly-0.9.15/lib/dragonfly/middleware.rb:13:in `call'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/rack-cache-1.2/lib/rack/cache/context.rb:136:in `forward'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/rack-cache-1.2/lib/rack/cache/context.rb:245:in `fetch'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/rack-cache-1.2/lib/rack/cache/context.rb:185:in `lookup'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/rack-cache-1.2/lib/rack/cache/context.rb:66:in `call!'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/rack-cache-1.2/lib/rack/cache/context.rb:51:in `call'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/railties-3.2.8/lib/rails/engine.rb:479:in `call'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/railties-3.2.8/lib/rails/application.rb:223:in `call'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/rack-1.4.5/lib/rack/content_length.rb:14:in `call'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/railties-3.2.8/lib/rails/rack/log_tailer.rb:17:in `call'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/rack-1.4.5/lib/rack/handler/webrick.rb:59:in `service'
/Users/kevinmuller/.rvm/rubies/ruby-2.2.4/lib/ruby/2.2.0/webrick/httpserver.rb:138:in `service'
/Users/kevinmuller/.rvm/rubies/ruby-2.2.4/lib/ruby/2.2.0/webrick/httpserver.rb:94:in `run'
/Users/kevinmuller/.rvm/rubies/ruby-2.2.4/lib/ruby/2.2.0/webrick/server.rb:294:in `block in start_thread'
  Rendered collections/_collection_form.html.erb (1.2ms)
  Rendered collections/admin_new_collection.html.erb within layouts/admin (2.4ms)
Completed 500 Internal Server Error in 12ms

ActionView::Template::Error (/Users/kevinmuller/halalgems_backend/app/views/collections/_collection_form.html.erb:10: syntax error, unexpected ')', expecting keyword_then or ';' or '\n'
... ( if collection.name.present );@output_buffer.safe_concat('
...                               ^
/Users/kevinmuller/halalgems_backend/app/views/collections/_collection_form.html.erb:12: syntax error, unexpected keyword_end, expecting ')'
');           end 
                 ^
/Users/kevinmuller/halalgems_backend/app/views/collections/_collection_form.html.erb:24: syntax error, unexpected keyword_end, expecting ')'
');   end 
         ^
/Users/kevinmuller/halalgems_backend/app/views/collections/_collection_form.html.erb:28: syntax error, unexpected keyword_ensure, expecting ')'
/Users/kevinmuller/halalgems_backend/app/views/collections/_collection_form.html.erb:30: syntax error, unexpected keyword_end, expecting ')'):
    7:         <%= f.input :name, placeholder: 'Name', input_html: { class: 'form-control' } %>
    8:         <%= f.input :description, placeholder: 'Description', input_html: { class: 'form-control' }%>
    9:         <div class="control-group">
    10:           <%= if collection.name.present %>
    11:             <img src="<%= @collection.image_url %>" alt="<%= @collection.name %>" class="jtooltip" title="<%= @collection.name %>" />
    12:           <% end %>
    13:           <%= f.label :image, t('collections.choose_new_image'), class: 'btn btn-default mg-bt-10 border-radius-5 form-control label_for_choose_menu' %>
  app/views/collections/admin_new_collection.html.erb:14:in `_app_views_collections_admin_new_collection_html_erb___3023385902521735371_70236180334300'
  app/controllers/collections_controller.rb:56:in `admin_new_collection'


  Rendered /Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_dispatch/middleware/templates/rescues/_trace.erb (1.5ms)
  Rendered /Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_dispatch/middleware/templates/rescues/_request_and_response.erb (1.1ms)
  Rendered /Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_dispatch/middleware/templates/rescues/template_error.erb within rescues/layout (44.3ms)


Started GET "/admin/collections/admin_new_collection" for 127.0.0.1 at 2016-01-18 15:01:48 +0100
Processing by CollectionsController#admin_new_collection as HTML
  [1m[35mUser Load (0.3ms)[0m  SELECT `users`.* FROM `users` WHERE `users`.`id` = 1 LIMIT 1
ERROR: compiling _app_views_collections__collection_form_html_erb__887589468924800558_70236397060900 RAISED /Users/kevinmuller/halalgems_backend/app/views/collections/_collection_form.html.erb:10: syntax error, unexpected ')', expecting keyword_then or ';' or '\n'
...( if collection.name.present? );@output_buffer.safe_concat('
...                               ^
/Users/kevinmuller/halalgems_backend/app/views/collections/_collection_form.html.erb:12: syntax error, unexpected keyword_end, expecting ')'
');           end 
                 ^
/Users/kevinmuller/halalgems_backend/app/views/collections/_collection_form.html.erb:24: syntax error, unexpected keyword_end, expecting ')'
');   end 
         ^
/Users/kevinmuller/halalgems_backend/app/views/collections/_collection_form.html.erb:28: syntax error, unexpected keyword_ensure, expecting ')'
/Users/kevinmuller/halalgems_backend/app/views/collections/_collection_form.html.erb:30: syntax error, unexpected keyword_end, expecting ')'
Function body:           def _app_views_collections__collection_form_html_erb__887589468924800558_70236397060900(local_assigns, output_buffer)
            _old_virtual_path, @virtual_path = @virtual_path, "collections/_collection_form";_old_output_buffer = @output_buffer;collection_form = local_assigns[:collection_form];;@output_buffer = output_buffer || ActionView::OutputBuffer.new;@output_buffer.safe_concat('
<div class="form_add_new_collection">
  ');@output_buffer.append=  simple_form_for(@collection, wrapper: 'collection', :multipart => true, :validate => true) do |f| @output_buffer.safe_concat('
');@output_buffer.safe_concat('    <div class="row">
      <div class=\'col-md-4\'>
        ');@output_buffer.append= ( hidden_field_tag 'admin', true );@output_buffer.safe_concat('
');@output_buffer.safe_concat('        ');@output_buffer.append= ( f.input :name, placeholder: 'Name', input_html: { class: 'form-control' } );@output_buffer.safe_concat('
');@output_buffer.safe_concat('        ');@output_buffer.append= ( f.input :description, placeholder: 'Description', input_html: { class: 'form-control' });@output_buffer.safe_concat('
');@output_buffer.safe_concat('        <div class="control-group">
          ');@output_buffer.append= ( if collection.name.present? );@output_buffer.safe_concat('
');@output_buffer.safe_concat('            <img src="');@output_buffer.append= ( @collection.image_url );@output_buffer.safe_concat('" alt="');@output_buffer.append= ( @collection.name );@output_buffer.safe_concat('" class="jtooltip" title="');@output_buffer.append= ( @collection.name );@output_buffer.safe_concat('" />
');           end 
@output_buffer.safe_concat('          ');@output_buffer.append= ( f.label :image, t('collections.choose_new_image'), class: 'btn btn-default mg-bt-10 border-radius-5 form-control label_for_choose_menu' );@output_buffer.safe_concat('
');@output_buffer.safe_concat('          ');@output_buffer.append= ( f.file_field :image, :name => 'collection_image[image]', :multiple => false , class: 'form-control');@output_buffer.safe_concat('
');@output_buffer.safe_concat('          <label class=\'hide collection-image-error\'> ');@output_buffer.append= ( t('collections.please_choose_image') );@output_buffer.safe_concat(' </label>
        </div>
      </div>
    </div>
    <div class="backend">
      <button id=\'submit_collection\' class="btn btn-submit" type="submit">
        ');@output_buffer.append= ( t('layout.submit') );@output_buffer.safe_concat('
');@output_buffer.safe_concat('      </button>
    </div>
');   end 
@output_buffer.safe_concat('</div>

');@output_buffer.to_s
          ensure
            @virtual_path, @output_buffer = _old_virtual_path, _old_output_buffer
          end

Backtrace: /Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_view/template.rb:297:in `module_eval'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_view/template.rb:297:in `compile'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_view/template.rb:244:in `block in compile!'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_view/template.rb:232:in `synchronize'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_view/template.rb:232:in `compile!'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_view/template.rb:144:in `block in render'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/activesupport-3.2.8/lib/active_support/notifications.rb:125:in `instrument'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_view/template.rb:143:in `render'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_view/renderer/partial_renderer.rb:265:in `render_partial'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_view/renderer/partial_renderer.rb:238:in `block in render'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_view/renderer/abstract_renderer.rb:38:in `block in instrument'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/activesupport-3.2.8/lib/active_support/notifications.rb:123:in `block in instrument'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/activesupport-3.2.8/lib/active_support/notifications/instrumenter.rb:20:in `instrument'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/activesupport-3.2.8/lib/active_support/notifications.rb:123:in `instrument'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_view/renderer/abstract_renderer.rb:38:in `instrument'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/newrelic_rpm-3.7.3.204/lib/new_relic/agent/instrumentation/rails3/action_controller.rb:175:in `block in instrument_with_newrelic'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/newrelic_rpm-3.7.3.204/lib/new_relic/agent/method_tracer.rb:281:in `trace_execution_scoped'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/newrelic_rpm-3.7.3.204/lib/new_relic/agent/instrumentation/rails3/action_controller.rb:174:in `instrument_with_newrelic'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_view/renderer/partial_renderer.rb:237:in `render'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_view/renderer/renderer.rb:41:in `render_partial'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_view/helpers/rendering_helper.rb:27:in `render'
/Users/kevinmuller/halalgems_backend/app/views/collections/admin_new_collection.html.erb:14:in `_app_views_collections_admin_new_collection_html_erb___3023385902521735371_70236180334300'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_view/template.rb:145:in `block in render'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/activesupport-3.2.8/lib/active_support/notifications.rb:125:in `instrument'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_view/template.rb:143:in `render'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_view/renderer/template_renderer.rb:47:in `block (2 levels) in render_template'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_view/renderer/abstract_renderer.rb:38:in `block in instrument'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/activesupport-3.2.8/lib/active_support/notifications.rb:123:in `block in instrument'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/activesupport-3.2.8/lib/active_support/notifications/instrumenter.rb:20:in `instrument'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/activesupport-3.2.8/lib/active_support/notifications.rb:123:in `instrument'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_view/renderer/abstract_renderer.rb:38:in `instrument'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_view/renderer/template_renderer.rb:46:in `block in render_template'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_view/renderer/template_renderer.rb:54:in `render_with_layout'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_view/renderer/template_renderer.rb:45:in `render_template'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_view/renderer/template_renderer.rb:18:in `render'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/newrelic_rpm-3.7.3.204/lib/new_relic/agent/instrumentation/rails3/action_controller.rb:160:in `block in render_with_newrelic'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/newrelic_rpm-3.7.3.204/lib/new_relic/agent/method_tracer.rb:281:in `trace_execution_scoped'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/newrelic_rpm-3.7.3.204/lib/new_relic/agent/instrumentation/rails3/action_controller.rb:159:in `render_with_newrelic'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_view/renderer/renderer.rb:36:in `render_template'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_view/renderer/renderer.rb:17:in `render'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/abstract_controller/rendering.rb:110:in `_render_template'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_controller/metal/streaming.rb:225:in `_render_template'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/abstract_controller/rendering.rb:103:in `render_to_body'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_controller/metal/renderers.rb:28:in `render_to_body'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_controller/metal/compatibility.rb:50:in `render_to_body'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/abstract_controller/rendering.rb:88:in `render'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_controller/metal/rendering.rb:16:in `render'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_controller/metal/instrumentation.rb:40:in `block (2 levels) in render'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/activesupport-3.2.8/lib/active_support/core_ext/benchmark.rb:5:in `block in ms'
/Users/kevinmuller/.rvm/rubies/ruby-2.2.4/lib/ruby/2.2.0/benchmark.rb:303:in `realtime'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/activesupport-3.2.8/lib/active_support/core_ext/benchmark.rb:5:in `ms'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_controller/metal/instrumentation.rb:40:in `block in render'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_controller/metal/instrumentation.rb:83:in `cleanup_view_runtime'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/activerecord-3.2.8/lib/active_record/railties/controller_runtime.rb:24:in `cleanup_view_runtime'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_controller/metal/instrumentation.rb:39:in `render'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/bundler/gems/remotipart-aadc29e996c3/lib/remotipart/render_overrides.rb:14:in `render_with_remotipart'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_controller/metal/implicit_render.rb:10:in `default_render'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_controller/metal/mime_responds.rb:196:in `respond_to'
/Users/kevinmuller/halalgems_backend/app/controllers/collections_controller.rb:56:in `admin_new_collection'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_controller/metal/implicit_render.rb:4:in `send_action'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/abstract_controller/base.rb:167:in `process_action'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_controller/metal/rendering.rb:10:in `process_action'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/abstract_controller/callbacks.rb:18:in `block in process_action'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/activesupport-3.2.8/lib/active_support/callbacks.rb:458:in `_run__1878201843038484176__process_action__477167353515410138__callbacks'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/activesupport-3.2.8/lib/active_support/callbacks.rb:405:in `__run_callback'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/activesupport-3.2.8/lib/active_support/callbacks.rb:385:in `_run_process_action_callbacks'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/activesupport-3.2.8/lib/active_support/callbacks.rb:81:in `run_callbacks'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/abstract_controller/callbacks.rb:17:in `process_action'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_controller/metal/rescue.rb:29:in `process_action'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_controller/metal/instrumentation.rb:30:in `block in process_action'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/activesupport-3.2.8/lib/active_support/notifications.rb:123:in `block in instrument'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/activesupport-3.2.8/lib/active_support/notifications/instrumenter.rb:20:in `instrument'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/activesupport-3.2.8/lib/active_support/notifications.rb:123:in `instrument'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_controller/metal/instrumentation.rb:29:in `process_action'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_controller/metal/params_wrapper.rb:207:in `process_action'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/activerecord-3.2.8/lib/active_record/railties/controller_runtime.rb:18:in `process_action'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/newrelic_rpm-3.7.3.204/lib/new_relic/agent/instrumentation/rails3/action_controller.rb:38:in `block in process_action'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/newrelic_rpm-3.7.3.204/lib/new_relic/agent/instrumentation/controller_instrumentation.rb:335:in `perform_action_with_newrelic_trace'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/newrelic_rpm-3.7.3.204/lib/new_relic/agent/instrumentation/rails3/action_controller.rb:37:in `process_action'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/abstract_controller/base.rb:121:in `process'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/abstract_controller/rendering.rb:45:in `process'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_controller/metal.rb:203:in `dispatch'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_controller/metal/rack_delegation.rb:14:in `dispatch'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_controller/metal.rb:246:in `block in action'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_dispatch/routing/route_set.rb:73:in `call'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_dispatch/routing/route_set.rb:73:in `dispatch'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_dispatch/routing/route_set.rb:36:in `call'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/journey-1.0.4/lib/journey/router.rb:68:in `block in call'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/journey-1.0.4/lib/journey/router.rb:56:in `each'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/journey-1.0.4/lib/journey/router.rb:56:in `call'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_dispatch/routing/route_set.rb:600:in `call'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/omniauth-1.1.4/lib/omniauth/strategy.rb:184:in `call!'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/omniauth-1.1.4/lib/omniauth/strategy.rb:164:in `call'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/newrelic_rpm-3.7.3.204/lib/new_relic/rack/error_collector.rb:55:in `call'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/newrelic_rpm-3.7.3.204/lib/new_relic/rack/agent_hooks.rb:32:in `call'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/newrelic_rpm-3.7.3.204/lib/new_relic/rack/browser_monitoring.rb:27:in `call'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/newrelic_rpm-3.7.3.204/lib/new_relic/rack/developer_mode.rb:45:in `call'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/galetahub-simple_captcha-0.1.5/lib/simple_captcha/middleware.rb:20:in `call'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/bundler/gems/client_side_validations-a6a515504520/lib/client_side_validations/middleware.rb:21:in `call'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/warden-1.1.1/lib/warden/manager.rb:35:in `block in call'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/warden-1.1.1/lib/warden/manager.rb:34:in `catch'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/warden-1.1.1/lib/warden/manager.rb:34:in `call'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_dispatch/middleware/best_standards_support.rb:17:in `call'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/rack-1.4.5/lib/rack/etag.rb:23:in `call'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/rack-1.4.5/lib/rack/conditionalget.rb:25:in `call'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_dispatch/middleware/head.rb:14:in `call'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/bundler/gems/remotipart-aadc29e996c3/lib/remotipart/middleware.rb:27:in `call'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_dispatch/middleware/params_parser.rb:21:in `call'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_dispatch/middleware/flash.rb:242:in `call'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/rack-1.4.5/lib/rack/session/abstract/id.rb:210:in `context'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/rack-1.4.5/lib/rack/session/abstract/id.rb:205:in `call'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_dispatch/middleware/cookies.rb:339:in `call'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/dragonfly-0.9.15/lib/dragonfly/cookie_monster.rb:9:in `call'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/activerecord-3.2.8/lib/active_record/query_cache.rb:64:in `call'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/activerecord-3.2.8/lib/active_record/connection_adapters/abstract/connection_pool.rb:473:in `call'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_dispatch/middleware/callbacks.rb:28:in `block in call'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/activesupport-3.2.8/lib/active_support/callbacks.rb:405:in `_run__1871245027803988066__call__4207201468600934469__callbacks'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/activesupport-3.2.8/lib/active_support/callbacks.rb:405:in `__run_callback'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/activesupport-3.2.8/lib/active_support/callbacks.rb:385:in `_run_call_callbacks'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/activesupport-3.2.8/lib/active_support/callbacks.rb:81:in `run_callbacks'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_dispatch/middleware/callbacks.rb:27:in `call'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_dispatch/middleware/reloader.rb:65:in `call'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_dispatch/middleware/remote_ip.rb:31:in `call'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_dispatch/middleware/debug_exceptions.rb:16:in `call'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_dispatch/middleware/show_exceptions.rb:56:in `call'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/railties-3.2.8/lib/rails/rack/logger.rb:26:in `call_app'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/railties-3.2.8/lib/rails/rack/logger.rb:16:in `call'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/quiet_assets-1.0.3/lib/quiet_assets.rb:23:in `call_with_quiet_assets'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_dispatch/middleware/request_id.rb:22:in `call'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/rack-1.4.5/lib/rack/methodoverride.rb:21:in `call'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/rack-1.4.5/lib/rack/runtime.rb:17:in `call'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/activesupport-3.2.8/lib/active_support/cache/strategy/local_cache.rb:72:in `call'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/rack-1.4.5/lib/rack/lock.rb:15:in `call'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_dispatch/middleware/static.rb:62:in `call'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/dragonfly-0.9.15/lib/dragonfly/middleware.rb:13:in `call'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/rack-cache-1.2/lib/rack/cache/context.rb:136:in `forward'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/rack-cache-1.2/lib/rack/cache/context.rb:245:in `fetch'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/rack-cache-1.2/lib/rack/cache/context.rb:185:in `lookup'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/rack-cache-1.2/lib/rack/cache/context.rb:66:in `call!'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/rack-cache-1.2/lib/rack/cache/context.rb:51:in `call'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/railties-3.2.8/lib/rails/engine.rb:479:in `call'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/railties-3.2.8/lib/rails/application.rb:223:in `call'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/rack-1.4.5/lib/rack/content_length.rb:14:in `call'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/railties-3.2.8/lib/rails/rack/log_tailer.rb:17:in `call'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/rack-1.4.5/lib/rack/handler/webrick.rb:59:in `service'
/Users/kevinmuller/.rvm/rubies/ruby-2.2.4/lib/ruby/2.2.0/webrick/httpserver.rb:138:in `service'
/Users/kevinmuller/.rvm/rubies/ruby-2.2.4/lib/ruby/2.2.0/webrick/httpserver.rb:94:in `run'
/Users/kevinmuller/.rvm/rubies/ruby-2.2.4/lib/ruby/2.2.0/webrick/server.rb:294:in `block in start_thread'
  Rendered collections/_collection_form.html.erb (1.6ms)
  Rendered collections/admin_new_collection.html.erb within layouts/admin (2.8ms)
Completed 500 Internal Server Error in 9ms

ActionView::Template::Error (/Users/kevinmuller/halalgems_backend/app/views/collections/_collection_form.html.erb:10: syntax error, unexpected ')', expecting keyword_then or ';' or '\n'
...( if collection.name.present? );@output_buffer.safe_concat('
...                               ^
/Users/kevinmuller/halalgems_backend/app/views/collections/_collection_form.html.erb:12: syntax error, unexpected keyword_end, expecting ')'
');           end 
                 ^
/Users/kevinmuller/halalgems_backend/app/views/collections/_collection_form.html.erb:24: syntax error, unexpected keyword_end, expecting ')'
');   end 
         ^
/Users/kevinmuller/halalgems_backend/app/views/collections/_collection_form.html.erb:28: syntax error, unexpected keyword_ensure, expecting ')'
/Users/kevinmuller/halalgems_backend/app/views/collections/_collection_form.html.erb:30: syntax error, unexpected keyword_end, expecting ')'):
    7:         <%= f.input :name, placeholder: 'Name', input_html: { class: 'form-control' } %>
    8:         <%= f.input :description, placeholder: 'Description', input_html: { class: 'form-control' }%>
    9:         <div class="control-group">
    10:           <%= if collection.name.present? %>
    11:             <img src="<%= @collection.image_url %>" alt="<%= @collection.name %>" class="jtooltip" title="<%= @collection.name %>" />
    12:           <% end %>
    13:           <%= f.label :image, t('collections.choose_new_image'), class: 'btn btn-default mg-bt-10 border-radius-5 form-control label_for_choose_menu' %>
  app/views/collections/admin_new_collection.html.erb:14:in `_app_views_collections_admin_new_collection_html_erb___3023385902521735371_70236180334300'
  app/controllers/collections_controller.rb:56:in `admin_new_collection'


  Rendered /Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_dispatch/middleware/templates/rescues/_trace.erb (1.6ms)
  Rendered /Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_dispatch/middleware/templates/rescues/_request_and_response.erb (1.1ms)
  Rendered /Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_dispatch/middleware/templates/rescues/template_error.erb within rescues/layout (43.9ms)


Started GET "/admin/collections/admin_new_collection" for 127.0.0.1 at 2016-01-18 15:02:06 +0100
Processing by CollectionsController#admin_new_collection as HTML
  [1m[36mUser Load (0.4ms)[0m  [1mSELECT `users`.* FROM `users` WHERE `users`.`id` = 1 LIMIT 1[0m
ERROR: compiling _app_views_collections__collection_form_html_erb__887589468924800558_70236414955680 RAISED /Users/kevinmuller/halalgems_backend/app/views/collections/_collection_form.html.erb:10: syntax error, unexpected ')', expecting keyword_then or ';' or '\n'
...= ( if collection.name != nil );@output_buffer.safe_concat('
...                               ^
/Users/kevinmuller/halalgems_backend/app/views/collections/_collection_form.html.erb:12: syntax error, unexpected keyword_end, expecting ')'
');           end 
                 ^
/Users/kevinmuller/halalgems_backend/app/views/collections/_collection_form.html.erb:24: syntax error, unexpected keyword_end, expecting ')'
');   end 
         ^
/Users/kevinmuller/halalgems_backend/app/views/collections/_collection_form.html.erb:28: syntax error, unexpected keyword_ensure, expecting ')'
/Users/kevinmuller/halalgems_backend/app/views/collections/_collection_form.html.erb:30: syntax error, unexpected keyword_end, expecting ')'
Function body:           def _app_views_collections__collection_form_html_erb__887589468924800558_70236414955680(local_assigns, output_buffer)
            _old_virtual_path, @virtual_path = @virtual_path, "collections/_collection_form";_old_output_buffer = @output_buffer;collection_form = local_assigns[:collection_form];;@output_buffer = output_buffer || ActionView::OutputBuffer.new;@output_buffer.safe_concat('
<div class="form_add_new_collection">
  ');@output_buffer.append=  simple_form_for(@collection, wrapper: 'collection', :multipart => true, :validate => true) do |f| @output_buffer.safe_concat('
');@output_buffer.safe_concat('    <div class="row">
      <div class=\'col-md-4\'>
        ');@output_buffer.append= ( hidden_field_tag 'admin', true );@output_buffer.safe_concat('
');@output_buffer.safe_concat('        ');@output_buffer.append= ( f.input :name, placeholder: 'Name', input_html: { class: 'form-control' } );@output_buffer.safe_concat('
');@output_buffer.safe_concat('        ');@output_buffer.append= ( f.input :description, placeholder: 'Description', input_html: { class: 'form-control' });@output_buffer.safe_concat('
');@output_buffer.safe_concat('        <div class="control-group">
          ');@output_buffer.append= ( if collection.name != nil );@output_buffer.safe_concat('
');@output_buffer.safe_concat('            <img src="');@output_buffer.append= ( @collection.image_url );@output_buffer.safe_concat('" alt="');@output_buffer.append= ( @collection.name );@output_buffer.safe_concat('" class="jtooltip" title="');@output_buffer.append= ( @collection.name );@output_buffer.safe_concat('" />
');           end 
@output_buffer.safe_concat('          ');@output_buffer.append= ( f.label :image, t('collections.choose_new_image'), class: 'btn btn-default mg-bt-10 border-radius-5 form-control label_for_choose_menu' );@output_buffer.safe_concat('
');@output_buffer.safe_concat('          ');@output_buffer.append= ( f.file_field :image, :name => 'collection_image[image]', :multiple => false , class: 'form-control');@output_buffer.safe_concat('
');@output_buffer.safe_concat('          <label class=\'hide collection-image-error\'> ');@output_buffer.append= ( t('collections.please_choose_image') );@output_buffer.safe_concat(' </label>
        </div>
      </div>
    </div>
    <div class="backend">
      <button id=\'submit_collection\' class="btn btn-submit" type="submit">
        ');@output_buffer.append= ( t('layout.submit') );@output_buffer.safe_concat('
');@output_buffer.safe_concat('      </button>
    </div>
');   end 
@output_buffer.safe_concat('</div>

');@output_buffer.to_s
          ensure
            @virtual_path, @output_buffer = _old_virtual_path, _old_output_buffer
          end

Backtrace: /Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_view/template.rb:297:in `module_eval'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_view/template.rb:297:in `compile'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_view/template.rb:244:in `block in compile!'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_view/template.rb:232:in `synchronize'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_view/template.rb:232:in `compile!'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_view/template.rb:144:in `block in render'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/activesupport-3.2.8/lib/active_support/notifications.rb:125:in `instrument'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_view/template.rb:143:in `render'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_view/renderer/partial_renderer.rb:265:in `render_partial'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_view/renderer/partial_renderer.rb:238:in `block in render'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_view/renderer/abstract_renderer.rb:38:in `block in instrument'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/activesupport-3.2.8/lib/active_support/notifications.rb:123:in `block in instrument'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/activesupport-3.2.8/lib/active_support/notifications/instrumenter.rb:20:in `instrument'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/activesupport-3.2.8/lib/active_support/notifications.rb:123:in `instrument'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_view/renderer/abstract_renderer.rb:38:in `instrument'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/newrelic_rpm-3.7.3.204/lib/new_relic/agent/instrumentation/rails3/action_controller.rb:175:in `block in instrument_with_newrelic'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/newrelic_rpm-3.7.3.204/lib/new_relic/agent/method_tracer.rb:281:in `trace_execution_scoped'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/newrelic_rpm-3.7.3.204/lib/new_relic/agent/instrumentation/rails3/action_controller.rb:174:in `instrument_with_newrelic'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_view/renderer/partial_renderer.rb:237:in `render'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_view/renderer/renderer.rb:41:in `render_partial'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_view/helpers/rendering_helper.rb:27:in `render'
/Users/kevinmuller/halalgems_backend/app/views/collections/admin_new_collection.html.erb:14:in `_app_views_collections_admin_new_collection_html_erb___3023385902521735371_70236180334300'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_view/template.rb:145:in `block in render'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/activesupport-3.2.8/lib/active_support/notifications.rb:125:in `instrument'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_view/template.rb:143:in `render'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_view/renderer/template_renderer.rb:47:in `block (2 levels) in render_template'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_view/renderer/abstract_renderer.rb:38:in `block in instrument'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/activesupport-3.2.8/lib/active_support/notifications.rb:123:in `block in instrument'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/activesupport-3.2.8/lib/active_support/notifications/instrumenter.rb:20:in `instrument'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/activesupport-3.2.8/lib/active_support/notifications.rb:123:in `instrument'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_view/renderer/abstract_renderer.rb:38:in `instrument'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_view/renderer/template_renderer.rb:46:in `block in render_template'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_view/renderer/template_renderer.rb:54:in `render_with_layout'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_view/renderer/template_renderer.rb:45:in `render_template'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_view/renderer/template_renderer.rb:18:in `render'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/newrelic_rpm-3.7.3.204/lib/new_relic/agent/instrumentation/rails3/action_controller.rb:160:in `block in render_with_newrelic'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/newrelic_rpm-3.7.3.204/lib/new_relic/agent/method_tracer.rb:281:in `trace_execution_scoped'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/newrelic_rpm-3.7.3.204/lib/new_relic/agent/instrumentation/rails3/action_controller.rb:159:in `render_with_newrelic'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_view/renderer/renderer.rb:36:in `render_template'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_view/renderer/renderer.rb:17:in `render'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/abstract_controller/rendering.rb:110:in `_render_template'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_controller/metal/streaming.rb:225:in `_render_template'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/abstract_controller/rendering.rb:103:in `render_to_body'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_controller/metal/renderers.rb:28:in `render_to_body'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_controller/metal/compatibility.rb:50:in `render_to_body'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/abstract_controller/rendering.rb:88:in `render'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_controller/metal/rendering.rb:16:in `render'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_controller/metal/instrumentation.rb:40:in `block (2 levels) in render'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/activesupport-3.2.8/lib/active_support/core_ext/benchmark.rb:5:in `block in ms'
/Users/kevinmuller/.rvm/rubies/ruby-2.2.4/lib/ruby/2.2.0/benchmark.rb:303:in `realtime'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/activesupport-3.2.8/lib/active_support/core_ext/benchmark.rb:5:in `ms'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_controller/metal/instrumentation.rb:40:in `block in render'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_controller/metal/instrumentation.rb:83:in `cleanup_view_runtime'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/activerecord-3.2.8/lib/active_record/railties/controller_runtime.rb:24:in `cleanup_view_runtime'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_controller/metal/instrumentation.rb:39:in `render'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/bundler/gems/remotipart-aadc29e996c3/lib/remotipart/render_overrides.rb:14:in `render_with_remotipart'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_controller/metal/implicit_render.rb:10:in `default_render'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_controller/metal/mime_responds.rb:196:in `respond_to'
/Users/kevinmuller/halalgems_backend/app/controllers/collections_controller.rb:56:in `admin_new_collection'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_controller/metal/implicit_render.rb:4:in `send_action'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/abstract_controller/base.rb:167:in `process_action'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_controller/metal/rendering.rb:10:in `process_action'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/abstract_controller/callbacks.rb:18:in `block in process_action'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/activesupport-3.2.8/lib/active_support/callbacks.rb:458:in `_run__1878201843038484176__process_action__477167353515410138__callbacks'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/activesupport-3.2.8/lib/active_support/callbacks.rb:405:in `__run_callback'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/activesupport-3.2.8/lib/active_support/callbacks.rb:385:in `_run_process_action_callbacks'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/activesupport-3.2.8/lib/active_support/callbacks.rb:81:in `run_callbacks'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/abstract_controller/callbacks.rb:17:in `process_action'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_controller/metal/rescue.rb:29:in `process_action'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_controller/metal/instrumentation.rb:30:in `block in process_action'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/activesupport-3.2.8/lib/active_support/notifications.rb:123:in `block in instrument'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/activesupport-3.2.8/lib/active_support/notifications/instrumenter.rb:20:in `instrument'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/activesupport-3.2.8/lib/active_support/notifications.rb:123:in `instrument'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_controller/metal/instrumentation.rb:29:in `process_action'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_controller/metal/params_wrapper.rb:207:in `process_action'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/activerecord-3.2.8/lib/active_record/railties/controller_runtime.rb:18:in `process_action'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/newrelic_rpm-3.7.3.204/lib/new_relic/agent/instrumentation/rails3/action_controller.rb:38:in `block in process_action'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/newrelic_rpm-3.7.3.204/lib/new_relic/agent/instrumentation/controller_instrumentation.rb:335:in `perform_action_with_newrelic_trace'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/newrelic_rpm-3.7.3.204/lib/new_relic/agent/instrumentation/rails3/action_controller.rb:37:in `process_action'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/abstract_controller/base.rb:121:in `process'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/abstract_controller/rendering.rb:45:in `process'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_controller/metal.rb:203:in `dispatch'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_controller/metal/rack_delegation.rb:14:in `dispatch'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_controller/metal.rb:246:in `block in action'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_dispatch/routing/route_set.rb:73:in `call'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_dispatch/routing/route_set.rb:73:in `dispatch'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_dispatch/routing/route_set.rb:36:in `call'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/journey-1.0.4/lib/journey/router.rb:68:in `block in call'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/journey-1.0.4/lib/journey/router.rb:56:in `each'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/journey-1.0.4/lib/journey/router.rb:56:in `call'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_dispatch/routing/route_set.rb:600:in `call'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/omniauth-1.1.4/lib/omniauth/strategy.rb:184:in `call!'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/omniauth-1.1.4/lib/omniauth/strategy.rb:164:in `call'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/newrelic_rpm-3.7.3.204/lib/new_relic/rack/error_collector.rb:55:in `call'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/newrelic_rpm-3.7.3.204/lib/new_relic/rack/agent_hooks.rb:32:in `call'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/newrelic_rpm-3.7.3.204/lib/new_relic/rack/browser_monitoring.rb:27:in `call'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/newrelic_rpm-3.7.3.204/lib/new_relic/rack/developer_mode.rb:45:in `call'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/galetahub-simple_captcha-0.1.5/lib/simple_captcha/middleware.rb:20:in `call'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/bundler/gems/client_side_validations-a6a515504520/lib/client_side_validations/middleware.rb:21:in `call'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/warden-1.1.1/lib/warden/manager.rb:35:in `block in call'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/warden-1.1.1/lib/warden/manager.rb:34:in `catch'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/warden-1.1.1/lib/warden/manager.rb:34:in `call'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_dispatch/middleware/best_standards_support.rb:17:in `call'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/rack-1.4.5/lib/rack/etag.rb:23:in `call'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/rack-1.4.5/lib/rack/conditionalget.rb:25:in `call'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_dispatch/middleware/head.rb:14:in `call'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/bundler/gems/remotipart-aadc29e996c3/lib/remotipart/middleware.rb:27:in `call'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_dispatch/middleware/params_parser.rb:21:in `call'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_dispatch/middleware/flash.rb:242:in `call'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/rack-1.4.5/lib/rack/session/abstract/id.rb:210:in `context'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/rack-1.4.5/lib/rack/session/abstract/id.rb:205:in `call'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_dispatch/middleware/cookies.rb:339:in `call'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/dragonfly-0.9.15/lib/dragonfly/cookie_monster.rb:9:in `call'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/activerecord-3.2.8/lib/active_record/query_cache.rb:64:in `call'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/activerecord-3.2.8/lib/active_record/connection_adapters/abstract/connection_pool.rb:473:in `call'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_dispatch/middleware/callbacks.rb:28:in `block in call'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/activesupport-3.2.8/lib/active_support/callbacks.rb:405:in `_run__1871245027803988066__call__4207201468600934469__callbacks'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/activesupport-3.2.8/lib/active_support/callbacks.rb:405:in `__run_callback'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/activesupport-3.2.8/lib/active_support/callbacks.rb:385:in `_run_call_callbacks'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/activesupport-3.2.8/lib/active_support/callbacks.rb:81:in `run_callbacks'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_dispatch/middleware/callbacks.rb:27:in `call'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_dispatch/middleware/reloader.rb:65:in `call'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_dispatch/middleware/remote_ip.rb:31:in `call'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_dispatch/middleware/debug_exceptions.rb:16:in `call'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_dispatch/middleware/show_exceptions.rb:56:in `call'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/railties-3.2.8/lib/rails/rack/logger.rb:26:in `call_app'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/railties-3.2.8/lib/rails/rack/logger.rb:16:in `call'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/quiet_assets-1.0.3/lib/quiet_assets.rb:23:in `call_with_quiet_assets'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_dispatch/middleware/request_id.rb:22:in `call'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/rack-1.4.5/lib/rack/methodoverride.rb:21:in `call'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/rack-1.4.5/lib/rack/runtime.rb:17:in `call'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/activesupport-3.2.8/lib/active_support/cache/strategy/local_cache.rb:72:in `call'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/rack-1.4.5/lib/rack/lock.rb:15:in `call'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_dispatch/middleware/static.rb:62:in `call'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/dragonfly-0.9.15/lib/dragonfly/middleware.rb:13:in `call'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/rack-cache-1.2/lib/rack/cache/context.rb:136:in `forward'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/rack-cache-1.2/lib/rack/cache/context.rb:245:in `fetch'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/rack-cache-1.2/lib/rack/cache/context.rb:185:in `lookup'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/rack-cache-1.2/lib/rack/cache/context.rb:66:in `call!'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/rack-cache-1.2/lib/rack/cache/context.rb:51:in `call'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/railties-3.2.8/lib/rails/engine.rb:479:in `call'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/railties-3.2.8/lib/rails/application.rb:223:in `call'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/rack-1.4.5/lib/rack/content_length.rb:14:in `call'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/railties-3.2.8/lib/rails/rack/log_tailer.rb:17:in `call'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/rack-1.4.5/lib/rack/handler/webrick.rb:59:in `service'
/Users/kevinmuller/.rvm/rubies/ruby-2.2.4/lib/ruby/2.2.0/webrick/httpserver.rb:138:in `service'
/Users/kevinmuller/.rvm/rubies/ruby-2.2.4/lib/ruby/2.2.0/webrick/httpserver.rb:94:in `run'
/Users/kevinmuller/.rvm/rubies/ruby-2.2.4/lib/ruby/2.2.0/webrick/server.rb:294:in `block in start_thread'
  Rendered collections/_collection_form.html.erb (1.1ms)
  Rendered collections/admin_new_collection.html.erb within layouts/admin (2.1ms)
Completed 500 Internal Server Error in 10ms

ActionView::Template::Error (/Users/kevinmuller/halalgems_backend/app/views/collections/_collection_form.html.erb:10: syntax error, unexpected ')', expecting keyword_then or ';' or '\n'
...= ( if collection.name != nil );@output_buffer.safe_concat('
...                               ^
/Users/kevinmuller/halalgems_backend/app/views/collections/_collection_form.html.erb:12: syntax error, unexpected keyword_end, expecting ')'
');           end 
                 ^
/Users/kevinmuller/halalgems_backend/app/views/collections/_collection_form.html.erb:24: syntax error, unexpected keyword_end, expecting ')'
');   end 
         ^
/Users/kevinmuller/halalgems_backend/app/views/collections/_collection_form.html.erb:28: syntax error, unexpected keyword_ensure, expecting ')'
/Users/kevinmuller/halalgems_backend/app/views/collections/_collection_form.html.erb:30: syntax error, unexpected keyword_end, expecting ')'):
    7:         <%= f.input :name, placeholder: 'Name', input_html: { class: 'form-control' } %>
    8:         <%= f.input :description, placeholder: 'Description', input_html: { class: 'form-control' }%>
    9:         <div class="control-group">
    10:           <%= if collection.name != nil %>
    11:             <img src="<%= @collection.image_url %>" alt="<%= @collection.name %>" class="jtooltip" title="<%= @collection.name %>" />
    12:           <% end %>
    13:           <%= f.label :image, t('collections.choose_new_image'), class: 'btn btn-default mg-bt-10 border-radius-5 form-control label_for_choose_menu' %>
  app/views/collections/admin_new_collection.html.erb:14:in `_app_views_collections_admin_new_collection_html_erb___3023385902521735371_70236180334300'
  app/controllers/collections_controller.rb:56:in `admin_new_collection'


  Rendered /Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_dispatch/middleware/templates/rescues/_trace.erb (1.2ms)
  Rendered /Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_dispatch/middleware/templates/rescues/_request_and_response.erb (0.9ms)
  Rendered /Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_dispatch/middleware/templates/rescues/template_error.erb within rescues/layout (43.8ms)


Started GET "/admin/collections/admin_new_collection" for 127.0.0.1 at 2016-01-18 15:02:10 +0100
Processing by CollectionsController#admin_new_collection as HTML
  [1m[35mUser Load (0.2ms)[0m  SELECT `users`.* FROM `users` WHERE `users`.`id` = 1 LIMIT 1
ERROR: compiling _app_views_collections__collection_form_html_erb__887589468924800558_70236378811100 RAISED /Users/kevinmuller/halalgems_backend/app/views/collections/_collection_form.html.erb:10: syntax error, unexpected ')', expecting keyword_then or ';' or '\n'
... ( if collection.name != nil? );@output_buffer.safe_concat('
...                               ^
/Users/kevinmuller/halalgems_backend/app/views/collections/_collection_form.html.erb:12: syntax error, unexpected keyword_end, expecting ')'
');           end 
                 ^
/Users/kevinmuller/halalgems_backend/app/views/collections/_collection_form.html.erb:24: syntax error, unexpected keyword_end, expecting ')'
');   end 
         ^
/Users/kevinmuller/halalgems_backend/app/views/collections/_collection_form.html.erb:28: syntax error, unexpected keyword_ensure, expecting ')'
/Users/kevinmuller/halalgems_backend/app/views/collections/_collection_form.html.erb:30: syntax error, unexpected keyword_end, expecting ')'
Function body:           def _app_views_collections__collection_form_html_erb__887589468924800558_70236378811100(local_assigns, output_buffer)
            _old_virtual_path, @virtual_path = @virtual_path, "collections/_collection_form";_old_output_buffer = @output_buffer;collection_form = local_assigns[:collection_form];;@output_buffer = output_buffer || ActionView::OutputBuffer.new;@output_buffer.safe_concat('
<div class="form_add_new_collection">
  ');@output_buffer.append=  simple_form_for(@collection, wrapper: 'collection', :multipart => true, :validate => true) do |f| @output_buffer.safe_concat('
');@output_buffer.safe_concat('    <div class="row">
      <div class=\'col-md-4\'>
        ');@output_buffer.append= ( hidden_field_tag 'admin', true );@output_buffer.safe_concat('
');@output_buffer.safe_concat('        ');@output_buffer.append= ( f.input :name, placeholder: 'Name', input_html: { class: 'form-control' } );@output_buffer.safe_concat('
');@output_buffer.safe_concat('        ');@output_buffer.append= ( f.input :description, placeholder: 'Description', input_html: { class: 'form-control' });@output_buffer.safe_concat('
');@output_buffer.safe_concat('        <div class="control-group">
          ');@output_buffer.append= ( if collection.name != nil? );@output_buffer.safe_concat('
');@output_buffer.safe_concat('            <img src="');@output_buffer.append= ( @collection.image_url );@output_buffer.safe_concat('" alt="');@output_buffer.append= ( @collection.name );@output_buffer.safe_concat('" class="jtooltip" title="');@output_buffer.append= ( @collection.name );@output_buffer.safe_concat('" />
');           end 
@output_buffer.safe_concat('          ');@output_buffer.append= ( f.label :image, t('collections.choose_new_image'), class: 'btn btn-default mg-bt-10 border-radius-5 form-control label_for_choose_menu' );@output_buffer.safe_concat('
');@output_buffer.safe_concat('          ');@output_buffer.append= ( f.file_field :image, :name => 'collection_image[image]', :multiple => false , class: 'form-control');@output_buffer.safe_concat('
');@output_buffer.safe_concat('          <label class=\'hide collection-image-error\'> ');@output_buffer.append= ( t('collections.please_choose_image') );@output_buffer.safe_concat(' </label>
        </div>
      </div>
    </div>
    <div class="backend">
      <button id=\'submit_collection\' class="btn btn-submit" type="submit">
        ');@output_buffer.append= ( t('layout.submit') );@output_buffer.safe_concat('
');@output_buffer.safe_concat('      </button>
    </div>
');   end 
@output_buffer.safe_concat('</div>

');@output_buffer.to_s
          ensure
            @virtual_path, @output_buffer = _old_virtual_path, _old_output_buffer
          end

Backtrace: /Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_view/template.rb:297:in `module_eval'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_view/template.rb:297:in `compile'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_view/template.rb:244:in `block in compile!'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_view/template.rb:232:in `synchronize'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_view/template.rb:232:in `compile!'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_view/template.rb:144:in `block in render'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/activesupport-3.2.8/lib/active_support/notifications.rb:125:in `instrument'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_view/template.rb:143:in `render'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_view/renderer/partial_renderer.rb:265:in `render_partial'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_view/renderer/partial_renderer.rb:238:in `block in render'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_view/renderer/abstract_renderer.rb:38:in `block in instrument'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/activesupport-3.2.8/lib/active_support/notifications.rb:123:in `block in instrument'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/activesupport-3.2.8/lib/active_support/notifications/instrumenter.rb:20:in `instrument'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/activesupport-3.2.8/lib/active_support/notifications.rb:123:in `instrument'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_view/renderer/abstract_renderer.rb:38:in `instrument'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/newrelic_rpm-3.7.3.204/lib/new_relic/agent/instrumentation/rails3/action_controller.rb:175:in `block in instrument_with_newrelic'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/newrelic_rpm-3.7.3.204/lib/new_relic/agent/method_tracer.rb:281:in `trace_execution_scoped'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/newrelic_rpm-3.7.3.204/lib/new_relic/agent/instrumentation/rails3/action_controller.rb:174:in `instrument_with_newrelic'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_view/renderer/partial_renderer.rb:237:in `render'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_view/renderer/renderer.rb:41:in `render_partial'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_view/helpers/rendering_helper.rb:27:in `render'
/Users/kevinmuller/halalgems_backend/app/views/collections/admin_new_collection.html.erb:14:in `_app_views_collections_admin_new_collection_html_erb___3023385902521735371_70236180334300'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_view/template.rb:145:in `block in render'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/activesupport-3.2.8/lib/active_support/notifications.rb:125:in `instrument'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_view/template.rb:143:in `render'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_view/renderer/template_renderer.rb:47:in `block (2 levels) in render_template'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_view/renderer/abstract_renderer.rb:38:in `block in instrument'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/activesupport-3.2.8/lib/active_support/notifications.rb:123:in `block in instrument'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/activesupport-3.2.8/lib/active_support/notifications/instrumenter.rb:20:in `instrument'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/activesupport-3.2.8/lib/active_support/notifications.rb:123:in `instrument'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_view/renderer/abstract_renderer.rb:38:in `instrument'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_view/renderer/template_renderer.rb:46:in `block in render_template'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_view/renderer/template_renderer.rb:54:in `render_with_layout'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_view/renderer/template_renderer.rb:45:in `render_template'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_view/renderer/template_renderer.rb:18:in `render'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/newrelic_rpm-3.7.3.204/lib/new_relic/agent/instrumentation/rails3/action_controller.rb:160:in `block in render_with_newrelic'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/newrelic_rpm-3.7.3.204/lib/new_relic/agent/method_tracer.rb:281:in `trace_execution_scoped'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/newrelic_rpm-3.7.3.204/lib/new_relic/agent/instrumentation/rails3/action_controller.rb:159:in `render_with_newrelic'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_view/renderer/renderer.rb:36:in `render_template'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_view/renderer/renderer.rb:17:in `render'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/abstract_controller/rendering.rb:110:in `_render_template'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_controller/metal/streaming.rb:225:in `_render_template'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/abstract_controller/rendering.rb:103:in `render_to_body'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_controller/metal/renderers.rb:28:in `render_to_body'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_controller/metal/compatibility.rb:50:in `render_to_body'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/abstract_controller/rendering.rb:88:in `render'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_controller/metal/rendering.rb:16:in `render'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_controller/metal/instrumentation.rb:40:in `block (2 levels) in render'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/activesupport-3.2.8/lib/active_support/core_ext/benchmark.rb:5:in `block in ms'
/Users/kevinmuller/.rvm/rubies/ruby-2.2.4/lib/ruby/2.2.0/benchmark.rb:303:in `realtime'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/activesupport-3.2.8/lib/active_support/core_ext/benchmark.rb:5:in `ms'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_controller/metal/instrumentation.rb:40:in `block in render'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_controller/metal/instrumentation.rb:83:in `cleanup_view_runtime'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/activerecord-3.2.8/lib/active_record/railties/controller_runtime.rb:24:in `cleanup_view_runtime'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_controller/metal/instrumentation.rb:39:in `render'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/bundler/gems/remotipart-aadc29e996c3/lib/remotipart/render_overrides.rb:14:in `render_with_remotipart'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_controller/metal/implicit_render.rb:10:in `default_render'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_controller/metal/mime_responds.rb:196:in `respond_to'
/Users/kevinmuller/halalgems_backend/app/controllers/collections_controller.rb:56:in `admin_new_collection'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_controller/metal/implicit_render.rb:4:in `send_action'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/abstract_controller/base.rb:167:in `process_action'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_controller/metal/rendering.rb:10:in `process_action'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/abstract_controller/callbacks.rb:18:in `block in process_action'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/activesupport-3.2.8/lib/active_support/callbacks.rb:458:in `_run__1878201843038484176__process_action__477167353515410138__callbacks'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/activesupport-3.2.8/lib/active_support/callbacks.rb:405:in `__run_callback'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/activesupport-3.2.8/lib/active_support/callbacks.rb:385:in `_run_process_action_callbacks'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/activesupport-3.2.8/lib/active_support/callbacks.rb:81:in `run_callbacks'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/abstract_controller/callbacks.rb:17:in `process_action'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_controller/metal/rescue.rb:29:in `process_action'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_controller/metal/instrumentation.rb:30:in `block in process_action'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/activesupport-3.2.8/lib/active_support/notifications.rb:123:in `block in instrument'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/activesupport-3.2.8/lib/active_support/notifications/instrumenter.rb:20:in `instrument'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/activesupport-3.2.8/lib/active_support/notifications.rb:123:in `instrument'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_controller/metal/instrumentation.rb:29:in `process_action'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_controller/metal/params_wrapper.rb:207:in `process_action'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/activerecord-3.2.8/lib/active_record/railties/controller_runtime.rb:18:in `process_action'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/newrelic_rpm-3.7.3.204/lib/new_relic/agent/instrumentation/rails3/action_controller.rb:38:in `block in process_action'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/newrelic_rpm-3.7.3.204/lib/new_relic/agent/instrumentation/controller_instrumentation.rb:335:in `perform_action_with_newrelic_trace'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/newrelic_rpm-3.7.3.204/lib/new_relic/agent/instrumentation/rails3/action_controller.rb:37:in `process_action'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/abstract_controller/base.rb:121:in `process'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/abstract_controller/rendering.rb:45:in `process'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_controller/metal.rb:203:in `dispatch'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_controller/metal/rack_delegation.rb:14:in `dispatch'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_controller/metal.rb:246:in `block in action'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_dispatch/routing/route_set.rb:73:in `call'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_dispatch/routing/route_set.rb:73:in `dispatch'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_dispatch/routing/route_set.rb:36:in `call'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/journey-1.0.4/lib/journey/router.rb:68:in `block in call'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/journey-1.0.4/lib/journey/router.rb:56:in `each'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/journey-1.0.4/lib/journey/router.rb:56:in `call'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_dispatch/routing/route_set.rb:600:in `call'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/omniauth-1.1.4/lib/omniauth/strategy.rb:184:in `call!'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/omniauth-1.1.4/lib/omniauth/strategy.rb:164:in `call'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/newrelic_rpm-3.7.3.204/lib/new_relic/rack/error_collector.rb:55:in `call'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/newrelic_rpm-3.7.3.204/lib/new_relic/rack/agent_hooks.rb:32:in `call'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/newrelic_rpm-3.7.3.204/lib/new_relic/rack/browser_monitoring.rb:27:in `call'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/newrelic_rpm-3.7.3.204/lib/new_relic/rack/developer_mode.rb:45:in `call'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/galetahub-simple_captcha-0.1.5/lib/simple_captcha/middleware.rb:20:in `call'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/bundler/gems/client_side_validations-a6a515504520/lib/client_side_validations/middleware.rb:21:in `call'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/warden-1.1.1/lib/warden/manager.rb:35:in `block in call'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/warden-1.1.1/lib/warden/manager.rb:34:in `catch'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/warden-1.1.1/lib/warden/manager.rb:34:in `call'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_dispatch/middleware/best_standards_support.rb:17:in `call'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/rack-1.4.5/lib/rack/etag.rb:23:in `call'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/rack-1.4.5/lib/rack/conditionalget.rb:25:in `call'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_dispatch/middleware/head.rb:14:in `call'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/bundler/gems/remotipart-aadc29e996c3/lib/remotipart/middleware.rb:27:in `call'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_dispatch/middleware/params_parser.rb:21:in `call'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_dispatch/middleware/flash.rb:242:in `call'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/rack-1.4.5/lib/rack/session/abstract/id.rb:210:in `context'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/rack-1.4.5/lib/rack/session/abstract/id.rb:205:in `call'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_dispatch/middleware/cookies.rb:339:in `call'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/dragonfly-0.9.15/lib/dragonfly/cookie_monster.rb:9:in `call'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/activerecord-3.2.8/lib/active_record/query_cache.rb:64:in `call'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/activerecord-3.2.8/lib/active_record/connection_adapters/abstract/connection_pool.rb:473:in `call'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_dispatch/middleware/callbacks.rb:28:in `block in call'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/activesupport-3.2.8/lib/active_support/callbacks.rb:405:in `_run__1871245027803988066__call__4207201468600934469__callbacks'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/activesupport-3.2.8/lib/active_support/callbacks.rb:405:in `__run_callback'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/activesupport-3.2.8/lib/active_support/callbacks.rb:385:in `_run_call_callbacks'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/activesupport-3.2.8/lib/active_support/callbacks.rb:81:in `run_callbacks'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_dispatch/middleware/callbacks.rb:27:in `call'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_dispatch/middleware/reloader.rb:65:in `call'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_dispatch/middleware/remote_ip.rb:31:in `call'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_dispatch/middleware/debug_exceptions.rb:16:in `call'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_dispatch/middleware/show_exceptions.rb:56:in `call'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/railties-3.2.8/lib/rails/rack/logger.rb:26:in `call_app'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/railties-3.2.8/lib/rails/rack/logger.rb:16:in `call'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/quiet_assets-1.0.3/lib/quiet_assets.rb:23:in `call_with_quiet_assets'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_dispatch/middleware/request_id.rb:22:in `call'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/rack-1.4.5/lib/rack/methodoverride.rb:21:in `call'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/rack-1.4.5/lib/rack/runtime.rb:17:in `call'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/activesupport-3.2.8/lib/active_support/cache/strategy/local_cache.rb:72:in `call'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/rack-1.4.5/lib/rack/lock.rb:15:in `call'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_dispatch/middleware/static.rb:62:in `call'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/dragonfly-0.9.15/lib/dragonfly/middleware.rb:13:in `call'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/rack-cache-1.2/lib/rack/cache/context.rb:136:in `forward'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/rack-cache-1.2/lib/rack/cache/context.rb:245:in `fetch'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/rack-cache-1.2/lib/rack/cache/context.rb:185:in `lookup'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/rack-cache-1.2/lib/rack/cache/context.rb:66:in `call!'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/rack-cache-1.2/lib/rack/cache/context.rb:51:in `call'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/railties-3.2.8/lib/rails/engine.rb:479:in `call'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/railties-3.2.8/lib/rails/application.rb:223:in `call'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/rack-1.4.5/lib/rack/content_length.rb:14:in `call'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/railties-3.2.8/lib/rails/rack/log_tailer.rb:17:in `call'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/rack-1.4.5/lib/rack/handler/webrick.rb:59:in `service'
/Users/kevinmuller/.rvm/rubies/ruby-2.2.4/lib/ruby/2.2.0/webrick/httpserver.rb:138:in `service'
/Users/kevinmuller/.rvm/rubies/ruby-2.2.4/lib/ruby/2.2.0/webrick/httpserver.rb:94:in `run'
/Users/kevinmuller/.rvm/rubies/ruby-2.2.4/lib/ruby/2.2.0/webrick/server.rb:294:in `block in start_thread'
  Rendered collections/_collection_form.html.erb (0.9ms)
  Rendered collections/admin_new_collection.html.erb within layouts/admin (1.8ms)
Completed 500 Internal Server Error in 7ms

ActionView::Template::Error (/Users/kevinmuller/halalgems_backend/app/views/collections/_collection_form.html.erb:10: syntax error, unexpected ')', expecting keyword_then or ';' or '\n'
... ( if collection.name != nil? );@output_buffer.safe_concat('
...                               ^
/Users/kevinmuller/halalgems_backend/app/views/collections/_collection_form.html.erb:12: syntax error, unexpected keyword_end, expecting ')'
');           end 
                 ^
/Users/kevinmuller/halalgems_backend/app/views/collections/_collection_form.html.erb:24: syntax error, unexpected keyword_end, expecting ')'
');   end 
         ^
/Users/kevinmuller/halalgems_backend/app/views/collections/_collection_form.html.erb:28: syntax error, unexpected keyword_ensure, expecting ')'
/Users/kevinmuller/halalgems_backend/app/views/collections/_collection_form.html.erb:30: syntax error, unexpected keyword_end, expecting ')'):
    7:         <%= f.input :name, placeholder: 'Name', input_html: { class: 'form-control' } %>
    8:         <%= f.input :description, placeholder: 'Description', input_html: { class: 'form-control' }%>
    9:         <div class="control-group">
    10:           <%= if collection.name != nil? %>
    11:             <img src="<%= @collection.image_url %>" alt="<%= @collection.name %>" class="jtooltip" title="<%= @collection.name %>" />
    12:           <% end %>
    13:           <%= f.label :image, t('collections.choose_new_image'), class: 'btn btn-default mg-bt-10 border-radius-5 form-control label_for_choose_menu' %>
  app/views/collections/admin_new_collection.html.erb:14:in `_app_views_collections_admin_new_collection_html_erb___3023385902521735371_70236180334300'
  app/controllers/collections_controller.rb:56:in `admin_new_collection'


  Rendered /Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_dispatch/middleware/templates/rescues/_trace.erb (1.6ms)
  Rendered /Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_dispatch/middleware/templates/rescues/_request_and_response.erb (0.9ms)
  Rendered /Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_dispatch/middleware/templates/rescues/template_error.erb within rescues/layout (43.4ms)


Started GET "/admin/collections/admin_new_collection" for 127.0.0.1 at 2016-01-18 15:02:51 +0100
Processing by CollectionsController#admin_new_collection as HTML
  [1m[36mUser Load (0.3ms)[0m  [1mSELECT `users`.* FROM `users` WHERE `users`.`id` = 1 LIMIT 1[0m
ERROR: compiling _app_views_collections__collection_form_html_erb__887589468924800558_70236393030000 RAISED /Users/kevinmuller/halalgems_backend/app/views/collections/_collection_form.html.erb:10: syntax error, unexpected ')', expecting keyword_then or ';' or '\n'
... ( if collection.name != nil? );@output_buffer.safe_concat('
...                               ^
/Users/kevinmuller/halalgems_backend/app/views/collections/_collection_form.html.erb:12: syntax error, unexpected keyword_end
...');@output_buffer.append= ( end );@output_buffer.safe_concat...
...                               ^
/Users/kevinmuller/halalgems_backend/app/views/collections/_collection_form.html.erb:24: syntax error, unexpected keyword_end, expecting ')'
');   end 
         ^
/Users/kevinmuller/halalgems_backend/app/views/collections/_collection_form.html.erb:28: syntax error, unexpected keyword_ensure, expecting ')'
/Users/kevinmuller/halalgems_backend/app/views/collections/_collection_form.html.erb:30: syntax error, unexpected keyword_end, expecting ')'
Function body:           def _app_views_collections__collection_form_html_erb__887589468924800558_70236393030000(local_assigns, output_buffer)
            _old_virtual_path, @virtual_path = @virtual_path, "collections/_collection_form";_old_output_buffer = @output_buffer;collection_form = local_assigns[:collection_form];;@output_buffer = output_buffer || ActionView::OutputBuffer.new;@output_buffer.safe_concat('
<div class="form_add_new_collection">
  ');@output_buffer.append=  simple_form_for(@collection, wrapper: 'collection', :multipart => true, :validate => true) do |f| @output_buffer.safe_concat('
');@output_buffer.safe_concat('    <div class="row">
      <div class=\'col-md-4\'>
        ');@output_buffer.append= ( hidden_field_tag 'admin', true );@output_buffer.safe_concat('
');@output_buffer.safe_concat('        ');@output_buffer.append= ( f.input :name, placeholder: 'Name', input_html: { class: 'form-control' } );@output_buffer.safe_concat('
');@output_buffer.safe_concat('        ');@output_buffer.append= ( f.input :description, placeholder: 'Description', input_html: { class: 'form-control' });@output_buffer.safe_concat('
');@output_buffer.safe_concat('        <div class="control-group">
          ');@output_buffer.append= ( if collection.name != nil? );@output_buffer.safe_concat('
');@output_buffer.safe_concat('            <img src="');@output_buffer.append= ( @collection.image_url );@output_buffer.safe_concat('" alt="');@output_buffer.append= ( @collection.name );@output_buffer.safe_concat('" class="jtooltip" title="');@output_buffer.append= ( @collection.name );@output_buffer.safe_concat('" />
          ');@output_buffer.append= ( end );@output_buffer.safe_concat('
');@output_buffer.safe_concat('          ');@output_buffer.append= ( f.label :image, t('collections.choose_new_image'), class: 'btn btn-default mg-bt-10 border-radius-5 form-control label_for_choose_menu' );@output_buffer.safe_concat('
');@output_buffer.safe_concat('          ');@output_buffer.append= ( f.file_field :image, :name => 'collection_image[image]', :multiple => false , class: 'form-control');@output_buffer.safe_concat('
');@output_buffer.safe_concat('          <label class=\'hide collection-image-error\'> ');@output_buffer.append= ( t('collections.please_choose_image') );@output_buffer.safe_concat(' </label>
        </div>
      </div>
    </div>
    <div class="backend">
      <button id=\'submit_collection\' class="btn btn-submit" type="submit">
        ');@output_buffer.append= ( t('layout.submit') );@output_buffer.safe_concat('
');@output_buffer.safe_concat('      </button>
    </div>
');   end 
@output_buffer.safe_concat('</div>

');@output_buffer.to_s
          ensure
            @virtual_path, @output_buffer = _old_virtual_path, _old_output_buffer
          end

Backtrace: /Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_view/template.rb:297:in `module_eval'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_view/template.rb:297:in `compile'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_view/template.rb:244:in `block in compile!'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_view/template.rb:232:in `synchronize'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_view/template.rb:232:in `compile!'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_view/template.rb:144:in `block in render'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/activesupport-3.2.8/lib/active_support/notifications.rb:125:in `instrument'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_view/template.rb:143:in `render'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_view/renderer/partial_renderer.rb:265:in `render_partial'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_view/renderer/partial_renderer.rb:238:in `block in render'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_view/renderer/abstract_renderer.rb:38:in `block in instrument'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/activesupport-3.2.8/lib/active_support/notifications.rb:123:in `block in instrument'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/activesupport-3.2.8/lib/active_support/notifications/instrumenter.rb:20:in `instrument'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/activesupport-3.2.8/lib/active_support/notifications.rb:123:in `instrument'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_view/renderer/abstract_renderer.rb:38:in `instrument'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/newrelic_rpm-3.7.3.204/lib/new_relic/agent/instrumentation/rails3/action_controller.rb:175:in `block in instrument_with_newrelic'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/newrelic_rpm-3.7.3.204/lib/new_relic/agent/method_tracer.rb:281:in `trace_execution_scoped'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/newrelic_rpm-3.7.3.204/lib/new_relic/agent/instrumentation/rails3/action_controller.rb:174:in `instrument_with_newrelic'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_view/renderer/partial_renderer.rb:237:in `render'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_view/renderer/renderer.rb:41:in `render_partial'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_view/helpers/rendering_helper.rb:27:in `render'
/Users/kevinmuller/halalgems_backend/app/views/collections/admin_new_collection.html.erb:14:in `_app_views_collections_admin_new_collection_html_erb___3023385902521735371_70236180334300'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_view/template.rb:145:in `block in render'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/activesupport-3.2.8/lib/active_support/notifications.rb:125:in `instrument'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_view/template.rb:143:in `render'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_view/renderer/template_renderer.rb:47:in `block (2 levels) in render_template'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_view/renderer/abstract_renderer.rb:38:in `block in instrument'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/activesupport-3.2.8/lib/active_support/notifications.rb:123:in `block in instrument'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/activesupport-3.2.8/lib/active_support/notifications/instrumenter.rb:20:in `instrument'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/activesupport-3.2.8/lib/active_support/notifications.rb:123:in `instrument'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_view/renderer/abstract_renderer.rb:38:in `instrument'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_view/renderer/template_renderer.rb:46:in `block in render_template'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_view/renderer/template_renderer.rb:54:in `render_with_layout'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_view/renderer/template_renderer.rb:45:in `render_template'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_view/renderer/template_renderer.rb:18:in `render'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/newrelic_rpm-3.7.3.204/lib/new_relic/agent/instrumentation/rails3/action_controller.rb:160:in `block in render_with_newrelic'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/newrelic_rpm-3.7.3.204/lib/new_relic/agent/method_tracer.rb:281:in `trace_execution_scoped'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/newrelic_rpm-3.7.3.204/lib/new_relic/agent/instrumentation/rails3/action_controller.rb:159:in `render_with_newrelic'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_view/renderer/renderer.rb:36:in `render_template'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_view/renderer/renderer.rb:17:in `render'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/abstract_controller/rendering.rb:110:in `_render_template'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_controller/metal/streaming.rb:225:in `_render_template'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/abstract_controller/rendering.rb:103:in `render_to_body'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_controller/metal/renderers.rb:28:in `render_to_body'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_controller/metal/compatibility.rb:50:in `render_to_body'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/abstract_controller/rendering.rb:88:in `render'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_controller/metal/rendering.rb:16:in `render'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_controller/metal/instrumentation.rb:40:in `block (2 levels) in render'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/activesupport-3.2.8/lib/active_support/core_ext/benchmark.rb:5:in `block in ms'
/Users/kevinmuller/.rvm/rubies/ruby-2.2.4/lib/ruby/2.2.0/benchmark.rb:303:in `realtime'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/activesupport-3.2.8/lib/active_support/core_ext/benchmark.rb:5:in `ms'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_controller/metal/instrumentation.rb:40:in `block in render'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_controller/metal/instrumentation.rb:83:in `cleanup_view_runtime'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/activerecord-3.2.8/lib/active_record/railties/controller_runtime.rb:24:in `cleanup_view_runtime'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_controller/metal/instrumentation.rb:39:in `render'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/bundler/gems/remotipart-aadc29e996c3/lib/remotipart/render_overrides.rb:14:in `render_with_remotipart'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_controller/metal/implicit_render.rb:10:in `default_render'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_controller/metal/mime_responds.rb:196:in `respond_to'
/Users/kevinmuller/halalgems_backend/app/controllers/collections_controller.rb:56:in `admin_new_collection'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_controller/metal/implicit_render.rb:4:in `send_action'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/abstract_controller/base.rb:167:in `process_action'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_controller/metal/rendering.rb:10:in `process_action'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/abstract_controller/callbacks.rb:18:in `block in process_action'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/activesupport-3.2.8/lib/active_support/callbacks.rb:458:in `_run__1878201843038484176__process_action__477167353515410138__callbacks'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/activesupport-3.2.8/lib/active_support/callbacks.rb:405:in `__run_callback'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/activesupport-3.2.8/lib/active_support/callbacks.rb:385:in `_run_process_action_callbacks'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/activesupport-3.2.8/lib/active_support/callbacks.rb:81:in `run_callbacks'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/abstract_controller/callbacks.rb:17:in `process_action'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_controller/metal/rescue.rb:29:in `process_action'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_controller/metal/instrumentation.rb:30:in `block in process_action'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/activesupport-3.2.8/lib/active_support/notifications.rb:123:in `block in instrument'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/activesupport-3.2.8/lib/active_support/notifications/instrumenter.rb:20:in `instrument'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/activesupport-3.2.8/lib/active_support/notifications.rb:123:in `instrument'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_controller/metal/instrumentation.rb:29:in `process_action'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_controller/metal/params_wrapper.rb:207:in `process_action'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/activerecord-3.2.8/lib/active_record/railties/controller_runtime.rb:18:in `process_action'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/newrelic_rpm-3.7.3.204/lib/new_relic/agent/instrumentation/rails3/action_controller.rb:38:in `block in process_action'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/newrelic_rpm-3.7.3.204/lib/new_relic/agent/instrumentation/controller_instrumentation.rb:335:in `perform_action_with_newrelic_trace'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/newrelic_rpm-3.7.3.204/lib/new_relic/agent/instrumentation/rails3/action_controller.rb:37:in `process_action'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/abstract_controller/base.rb:121:in `process'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/abstract_controller/rendering.rb:45:in `process'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_controller/metal.rb:203:in `dispatch'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_controller/metal/rack_delegation.rb:14:in `dispatch'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_controller/metal.rb:246:in `block in action'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_dispatch/routing/route_set.rb:73:in `call'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_dispatch/routing/route_set.rb:73:in `dispatch'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_dispatch/routing/route_set.rb:36:in `call'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/journey-1.0.4/lib/journey/router.rb:68:in `block in call'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/journey-1.0.4/lib/journey/router.rb:56:in `each'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/journey-1.0.4/lib/journey/router.rb:56:in `call'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_dispatch/routing/route_set.rb:600:in `call'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/omniauth-1.1.4/lib/omniauth/strategy.rb:184:in `call!'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/omniauth-1.1.4/lib/omniauth/strategy.rb:164:in `call'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/newrelic_rpm-3.7.3.204/lib/new_relic/rack/error_collector.rb:55:in `call'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/newrelic_rpm-3.7.3.204/lib/new_relic/rack/agent_hooks.rb:32:in `call'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/newrelic_rpm-3.7.3.204/lib/new_relic/rack/browser_monitoring.rb:27:in `call'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/newrelic_rpm-3.7.3.204/lib/new_relic/rack/developer_mode.rb:45:in `call'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/galetahub-simple_captcha-0.1.5/lib/simple_captcha/middleware.rb:20:in `call'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/bundler/gems/client_side_validations-a6a515504520/lib/client_side_validations/middleware.rb:21:in `call'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/warden-1.1.1/lib/warden/manager.rb:35:in `block in call'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/warden-1.1.1/lib/warden/manager.rb:34:in `catch'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/warden-1.1.1/lib/warden/manager.rb:34:in `call'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_dispatch/middleware/best_standards_support.rb:17:in `call'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/rack-1.4.5/lib/rack/etag.rb:23:in `call'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/rack-1.4.5/lib/rack/conditionalget.rb:25:in `call'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_dispatch/middleware/head.rb:14:in `call'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/bundler/gems/remotipart-aadc29e996c3/lib/remotipart/middleware.rb:27:in `call'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_dispatch/middleware/params_parser.rb:21:in `call'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_dispatch/middleware/flash.rb:242:in `call'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/rack-1.4.5/lib/rack/session/abstract/id.rb:210:in `context'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/rack-1.4.5/lib/rack/session/abstract/id.rb:205:in `call'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_dispatch/middleware/cookies.rb:339:in `call'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/dragonfly-0.9.15/lib/dragonfly/cookie_monster.rb:9:in `call'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/activerecord-3.2.8/lib/active_record/query_cache.rb:64:in `call'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/activerecord-3.2.8/lib/active_record/connection_adapters/abstract/connection_pool.rb:473:in `call'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_dispatch/middleware/callbacks.rb:28:in `block in call'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/activesupport-3.2.8/lib/active_support/callbacks.rb:405:in `_run__1871245027803988066__call__4207201468600934469__callbacks'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/activesupport-3.2.8/lib/active_support/callbacks.rb:405:in `__run_callback'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/activesupport-3.2.8/lib/active_support/callbacks.rb:385:in `_run_call_callbacks'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/activesupport-3.2.8/lib/active_support/callbacks.rb:81:in `run_callbacks'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_dispatch/middleware/callbacks.rb:27:in `call'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_dispatch/middleware/reloader.rb:65:in `call'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_dispatch/middleware/remote_ip.rb:31:in `call'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_dispatch/middleware/debug_exceptions.rb:16:in `call'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_dispatch/middleware/show_exceptions.rb:56:in `call'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/railties-3.2.8/lib/rails/rack/logger.rb:26:in `call_app'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/railties-3.2.8/lib/rails/rack/logger.rb:16:in `call'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/quiet_assets-1.0.3/lib/quiet_assets.rb:23:in `call_with_quiet_assets'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_dispatch/middleware/request_id.rb:22:in `call'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/rack-1.4.5/lib/rack/methodoverride.rb:21:in `call'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/rack-1.4.5/lib/rack/runtime.rb:17:in `call'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/activesupport-3.2.8/lib/active_support/cache/strategy/local_cache.rb:72:in `call'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/rack-1.4.5/lib/rack/lock.rb:15:in `call'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_dispatch/middleware/static.rb:62:in `call'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/dragonfly-0.9.15/lib/dragonfly/middleware.rb:13:in `call'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/rack-cache-1.2/lib/rack/cache/context.rb:136:in `forward'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/rack-cache-1.2/lib/rack/cache/context.rb:245:in `fetch'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/rack-cache-1.2/lib/rack/cache/context.rb:185:in `lookup'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/rack-cache-1.2/lib/rack/cache/context.rb:66:in `call!'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/rack-cache-1.2/lib/rack/cache/context.rb:51:in `call'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/railties-3.2.8/lib/rails/engine.rb:479:in `call'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/railties-3.2.8/lib/rails/application.rb:223:in `call'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/rack-1.4.5/lib/rack/content_length.rb:14:in `call'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/railties-3.2.8/lib/rails/rack/log_tailer.rb:17:in `call'
/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/rack-1.4.5/lib/rack/handler/webrick.rb:59:in `service'
/Users/kevinmuller/.rvm/rubies/ruby-2.2.4/lib/ruby/2.2.0/webrick/httpserver.rb:138:in `service'
/Users/kevinmuller/.rvm/rubies/ruby-2.2.4/lib/ruby/2.2.0/webrick/httpserver.rb:94:in `run'
/Users/kevinmuller/.rvm/rubies/ruby-2.2.4/lib/ruby/2.2.0/webrick/server.rb:294:in `block in start_thread'
  Rendered collections/_collection_form.html.erb (1.6ms)
  Rendered collections/admin_new_collection.html.erb within layouts/admin (3.3ms)
Completed 500 Internal Server Error in 43ms

ActionView::Template::Error (/Users/kevinmuller/halalgems_backend/app/views/collections/_collection_form.html.erb:10: syntax error, unexpected ')', expecting keyword_then or ';' or '\n'
... ( if collection.name != nil? );@output_buffer.safe_concat('
...                               ^
/Users/kevinmuller/halalgems_backend/app/views/collections/_collection_form.html.erb:12: syntax error, unexpected keyword_end
...');@output_buffer.append= ( end );@output_buffer.safe_concat...
...                               ^
/Users/kevinmuller/halalgems_backend/app/views/collections/_collection_form.html.erb:24: syntax error, unexpected keyword_end, expecting ')'
');   end 
         ^
/Users/kevinmuller/halalgems_backend/app/views/collections/_collection_form.html.erb:28: syntax error, unexpected keyword_ensure, expecting ')'
/Users/kevinmuller/halalgems_backend/app/views/collections/_collection_form.html.erb:30: syntax error, unexpected keyword_end, expecting ')'):
    7:         <%= f.input :name, placeholder: 'Name', input_html: { class: 'form-control' } %>
    8:         <%= f.input :description, placeholder: 'Description', input_html: { class: 'form-control' }%>
    9:         <div class="control-group">
    10:           <%= if collection.name != nil? %>
    11:             <img src="<%= @collection.image_url %>" alt="<%= @collection.name %>" class="jtooltip" title="<%= @collection.name %>" />
    12:           <%= end %>
    13:           <%= f.label :image, t('collections.choose_new_image'), class: 'btn btn-default mg-bt-10 border-radius-5 form-control label_for_choose_menu' %>
  app/views/collections/admin_new_collection.html.erb:14:in `_app_views_collections_admin_new_collection_html_erb___3023385902521735371_70236180334300'
  app/controllers/collections_controller.rb:56:in `admin_new_collection'


  Rendered /Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_dispatch/middleware/templates/rescues/_trace.erb (1.7ms)
  Rendered /Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_dispatch/middleware/templates/rescues/_request_and_response.erb (1.1ms)
  Rendered /Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_dispatch/middleware/templates/rescues/template_error.erb within rescues/layout (49.3ms)


Started GET "/admin/collections/admin_new_collection" for 127.0.0.1 at 2016-01-18 15:03:00 +0100
Processing by CollectionsController#admin_new_collection as HTML
  [1m[35mUser Load (0.4ms)[0m  SELECT `users`.* FROM `users` WHERE `users`.`id` = 1 LIMIT 1
  [1m[36mRestaurant Load (3.7ms)[0m  [1mSELECT `restaurants`.* FROM `restaurants` WHERE `restaurants`.`disabled` = 0[0m
  Rendered collections/_collection_form.html.erb (591.4ms)
  Rendered collections/admin_new_collection.html.erb within layouts/admin (593.0ms)
Completed 500 Internal Server Error in 601ms

ActionView::Template::Error (undefined local variable or method `collection' for #<#<Class:0x007fc2589f1fb0>:0x007fc25e882188>):
    7:         <%= f.input :name, placeholder: 'Name', input_html: { class: 'form-control' } %>
    8:         <%= f.input :description, placeholder: 'Description', input_html: { class: 'form-control' }%>
    9:         <div class="control-group">
    10:           <% if collection.name != nil? %>
    11:             <img src="<%= @collection.image_url %>" alt="<%= @collection.name %>" class="jtooltip" title="<%= @collection.name %>" />
    12:           <% end %>
    13:           <%= f.label :image, t('collections.choose_new_image'), class: 'btn btn-default mg-bt-10 border-radius-5 form-control label_for_choose_menu' %>
  app/views/collections/_collection_form.html.erb:10:in `block in _app_views_collections__collection_form_html_erb__887589468924800558_70236379046760'
  app/views/collections/_collection_form.html.erb:3:in `_app_views_collections__collection_form_html_erb__887589468924800558_70236379046760'
  app/views/collections/admin_new_collection.html.erb:14:in `_app_views_collections_admin_new_collection_html_erb___3023385902521735371_70236180334300'
  app/controllers/collections_controller.rb:56:in `admin_new_collection'


  Rendered /Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_dispatch/middleware/templates/rescues/_trace.erb (1.3ms)
  Rendered /Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_dispatch/middleware/templates/rescues/_request_and_response.erb (0.8ms)
  Rendered /Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_dispatch/middleware/templates/rescues/template_error.erb within rescues/layout (41.4ms)


Started GET "/admin/collections/admin_new_collection" for 127.0.0.1 at 2016-01-18 15:03:17 +0100
Processing by CollectionsController#admin_new_collection as HTML
  [1m[35mUser Load (0.2ms)[0m  SELECT `users`.* FROM `users` WHERE `users`.`id` = 1 LIMIT 1
  [1m[36mRestaurant Load (3.2ms)[0m  [1mSELECT `restaurants`.* FROM `restaurants` WHERE `restaurants`.`disabled` = 0[0m
  Rendered collections/_collection_form.html.erb (413.1ms)
  Rendered collections/admin_new_collection.html.erb within layouts/admin (414.0ms)
Completed 500 Internal Server Error in 419ms

ActionView::Template::Error (undefined local variable or method `collection' for #<#<Class:0x007fc2589f1fb0>:0x007fc2616a9c78>):
    7:         <%= f.input :name, placeholder: 'Name', input_html: { class: 'form-control' } %>
    8:         <%= f.input :description, placeholder: 'Description', input_html: { class: 'form-control' }%>
    9:         <div class="control-group">
    10:           <% if collection.name.present? %>
    11:             <img src="<%= @collection.image_url %>" alt="<%= @collection.name %>" class="jtooltip" title="<%= @collection.name %>" />
    12:           <% end %>
    13:           <%= f.label :image, t('collections.choose_new_image'), class: 'btn btn-default mg-bt-10 border-radius-5 form-control label_for_choose_menu' %>
  app/views/collections/_collection_form.html.erb:10:in `block in _app_views_collections__collection_form_html_erb__887589468924800558_70236180894620'
  app/views/collections/_collection_form.html.erb:3:in `_app_views_collections__collection_form_html_erb__887589468924800558_70236180894620'
  app/views/collections/admin_new_collection.html.erb:14:in `_app_views_collections_admin_new_collection_html_erb___3023385902521735371_70236180334300'
  app/controllers/collections_controller.rb:56:in `admin_new_collection'


  Rendered /Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_dispatch/middleware/templates/rescues/_trace.erb (1.6ms)
  Rendered /Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_dispatch/middleware/templates/rescues/_request_and_response.erb (0.7ms)
  Rendered /Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_dispatch/middleware/templates/rescues/template_error.erb within rescues/layout (39.7ms)


Started GET "/admin/collections/admin_new_collection" for 127.0.0.1 at 2016-01-18 15:03:29 +0100
Processing by CollectionsController#admin_new_collection as HTML
  [1m[35mUser Load (0.5ms)[0m  SELECT `users`.* FROM `users` WHERE `users`.`id` = 1 LIMIT 1
  Rendered collections/_collection_form.html.erb (7.5ms)
  Rendered collections/admin_new_collection.html.erb within layouts/admin (9.0ms)
Completed 200 OK in 20ms (Views: 16.6ms | ActiveRecord: 0.5ms)


Started POST "/admin/collections" for 127.0.0.1 at 2016-01-18 15:03:48 +0100
Processing by CollectionsController#create as HTML
  Parameters: {"utf8"=>"âœ“", "authenticity_token"=>"cajmPApKUoLTDgL4nYG/B3GUhj8fezKDJZWxee28cyM=", "admin"=>"true", "collection"=>{"name"=>"Test", "description"=>"asdf"}, "collection_image"=>{"image"=>#<ActionDispatch::Http::UploadedFile:0x007fc25ce9e398 @original_filename="sunday_roast.png", @content_type="image/png", @headers="Content-Disposition: form-data; name=\"collection_image[image]\"; filename=\"sunday_roast.png\"\r\nContent-Type: image/png\r\n", @tempfile=#<Tempfile:/var/folders/rf/q4l8n5k56pnbjgkdtzrhq_w00000gn/T/RackMultipart20160118-19170-1oc1b79>>}}
  [1m[36mCollection Load (0.4ms)[0m  [1mSELECT `collections`.* FROM `collections` WHERE `collections`.`name` = 'Test' LIMIT 1[0m
  Rendered collections/_collection_form.html.erb (5.4ms)
  Rendered collections/admin_new_collection.html.erb within layouts/admin (10.7ms)
  [1m[35mUser Load (0.3ms)[0m  SELECT `users`.* FROM `users` WHERE `users`.`id` = 1 LIMIT 1
Completed 200 OK in 42ms (Views: 38.5ms | ActiveRecord: 0.7ms)


Started POST "/admin/collections" for 127.0.0.1 at 2016-01-18 15:04:09 +0100
Processing by CollectionsController#create as HTML
  Parameters: {"utf8"=>"âœ“", "authenticity_token"=>"cajmPApKUoLTDgL4nYG/B3GUhj8fezKDJZWxee28cyM=", "admin"=>"true", "collection"=>{"name"=>"Test", "description"=>"asdf"}, "collection_image"=>{"image"=>#<ActionDispatch::Http::UploadedFile:0x007fc25df81ae8 @original_filename="sunday_roast.png", @content_type="image/png", @headers="Content-Disposition: form-data; name=\"collection_image[image]\"; filename=\"sunday_roast.png\"\r\nContent-Type: image/png\r\n", @tempfile=#<Tempfile:/var/folders/rf/q4l8n5k56pnbjgkdtzrhq_w00000gn/T/RackMultipart20160118-19170-1xx25e0>>}}
  [1m[36mCollection Load (0.3ms)[0m  [1mSELECT `collections`.* FROM `collections` WHERE `collections`.`name` = 'Test' LIMIT 1[0m
  Rendered collections/_collection_form.html.erb (7.3ms)
  Rendered collections/admin_new_collection.html.erb within layouts/admin (8.4ms)
  [1m[35mUser Load (0.4ms)[0m  SELECT `users`.* FROM `users` WHERE `users`.`id` = 1 LIMIT 1
Completed 200 OK in 20ms (Views: 17.7ms | ActiveRecord: 0.7ms)


Started POST "/admin/collections" for 127.0.0.1 at 2016-01-18 15:04:23 +0100
Processing by CollectionsController#create as HTML
  Parameters: {"utf8"=>"âœ“", "authenticity_token"=>"cajmPApKUoLTDgL4nYG/B3GUhj8fezKDJZWxee28cyM=", "admin"=>"true", "collection"=>{"name"=>"Test Collection", "description"=>"asdf"}}
  [1m[36mCollection Load (0.6ms)[0m  [1mSELECT `collections`.* FROM `collections` WHERE `collections`.`name` = 'Test Collection' LIMIT 1[0m
  [1m[35m (0.2ms)[0m  BEGIN
  [1m[36mSQL (0.4ms)[0m  [1mINSERT INTO `collections` (`created_at`, `description`, `disabled`, `image_url`, `name`, `updated_at`) VALUES ('2016-01-18 14:04:23', 'asdf', NULL, NULL, 'Test Collection', '2016-01-18 14:04:23')[0m
  [1m[35m (1.6ms)[0m  COMMIT
Redirected to http://localhost:3000/collection/4/edit
Completed 302 Found in 9ms (ActiveRecord: 2.8ms)


Started GET "/collection/4/edit" for 127.0.0.1 at 2016-01-18 15:04:23 +0100
Processing by CollectionsController#edit_collection as HTML
  Parameters: {"id"=>"4"}
  [1m[36mUser Load (0.2ms)[0m  [1mSELECT `users`.* FROM `users` WHERE `users`.`id` = 1 LIMIT 1[0m
  [1m[35mCollection Load (0.1ms)[0m  SELECT `collections`.* FROM `collections` WHERE `collections`.`id` = 4 LIMIT 1
  [1m[36mCollectionImage Load (0.3ms)[0m  [1mSELECT `collection_images`.* FROM `collection_images` WHERE (collection_id = 4) LIMIT 1[0m
  Rendered collections/_collection_form.html.erb (8.4ms)
  [1m[35mRestaurant Load (3.2ms)[0m  SELECT `restaurants`.* FROM `restaurants` WHERE `restaurants`.`disabled` = 0
  Rendered collections/_collection_restaurants_form.html.erb (228.8ms)
  [1m[36mRestaurant Load (0.3ms)[0m  [1mSELECT `restaurants`.* FROM `restaurants` INNER JOIN `collection_restaurants` ON `restaurants`.`id` = `collection_restaurants`.`restaurant_id` WHERE `collection_restaurants`.`collection_id` = 4[0m
  Rendered collections/_collection_restaurants_list.html.erb (2.1ms)
  Rendered collections/edit_collection.html.erb within layouts/admin (249.9ms)
Completed 200 OK in 266ms (Views: 259.6ms | ActiveRecord: 4.1ms)


Started PUT "/admin/collections/4" for 127.0.0.1 at 2016-01-18 15:04:50 +0100
Processing by CollectionsController#update as HTML
  Parameters: {"utf8"=>"âœ“", "authenticity_token"=>"cajmPApKUoLTDgL4nYG/B3GUhj8fezKDJZWxee28cyM=", "admin"=>"true", "collection"=>{"name"=>"Test Collection", "description"=>"asdf"}, "collection_image"=>{"image"=>#<ActionDispatch::Http::UploadedFile:0x007fc246058ee8 @original_filename="persian.png", @content_type="image/png", @headers="Content-Disposition: form-data; name=\"collection_image[image]\"; filename=\"persian.png\"\r\nContent-Type: image/png\r\n", @tempfile=#<Tempfile:/var/folders/rf/q4l8n5k56pnbjgkdtzrhq_w00000gn/T/RackMultipart20160118-19170-h9p19t>>}, "id"=>"4"}
  [1m[35mUser Load (1.1ms)[0m  SELECT `users`.* FROM `users` WHERE `users`.`id` = 1 LIMIT 1
  [1m[36mCollection Load (9.5ms)[0m  [1mSELECT `collections`.* FROM `collections` WHERE `collections`.`id` = 4 LIMIT 1[0m
  [1m[35mCollectionImage Load (1.0ms)[0m  SELECT `collection_images`.* FROM `collection_images` WHERE `collection_images`.`collection_id` = 4 LIMIT 1
Completed 500 Internal Server Error in 20ms

NoMethodError (undefined method `update_attributes' for nil:NilClass):
  app/controllers/collections_controller.rb:132:in `update'


  Rendered /Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_dispatch/middleware/templates/rescues/_trace.erb (1.0ms)
  Rendered /Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_dispatch/middleware/templates/rescues/_request_and_response.erb (1.6ms)
  Rendered /Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_dispatch/middleware/templates/rescues/diagnostics.erb within rescues/layout (58.0ms)


Started PUT "/admin/collections/4" for 127.0.0.1 at 2016-01-18 15:07:02 +0100
Processing by CollectionsController#update as HTML
  Parameters: {"utf8"=>"âœ“", "authenticity_token"=>"cajmPApKUoLTDgL4nYG/B3GUhj8fezKDJZWxee28cyM=", "admin"=>"true", "collection"=>{"name"=>"Test Collection", "description"=>"asdf"}, "collection_image"=>{"image"=>#<ActionDispatch::Http::UploadedFile:0x007fc25ed9a120 @original_filename="persian.png", @content_type="image/png", @headers="Content-Disposition: form-data; name=\"collection_image[image]\"; filename=\"persian.png\"\r\nContent-Type: image/png\r\n", @tempfile=#<Tempfile:/var/folders/rf/q4l8n5k56pnbjgkdtzrhq_w00000gn/T/RackMultipart20160118-19170-6p05tu>>}, "id"=>"4"}
  [1m[36mUser Load (0.2ms)[0m  [1mSELECT `users`.* FROM `users` WHERE `users`.`id` = 1 LIMIT 1[0m
  [1m[35mCollection Load (0.2ms)[0m  SELECT `collections`.* FROM `collections` WHERE `collections`.`id` = 4 LIMIT 1
  [1m[36mCollectionImage Load (0.2ms)[0m  [1mSELECT `collection_images`.* FROM `collection_images` WHERE `collection_images`.`collection_id` = 4 LIMIT 1[0m
Completed 500 Internal Server Error in 131ms

NoMethodError (undefined method `new' for nil:NilClass):
  app/controllers/collections_controller.rb:133:in `update'


  Rendered /Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_dispatch/middleware/templates/rescues/_trace.erb (0.8ms)
  Rendered /Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_dispatch/middleware/templates/rescues/_request_and_response.erb (0.8ms)
  Rendered /Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_dispatch/middleware/templates/rescues/diagnostics.erb within rescues/layout (40.5ms)


Started GET "/admin/restaurants" for 127.0.0.1 at 2016-01-18 15:08:30 +0100
  [1m[35m (0.2ms)[0m  SELECT COUNT(*) FROM `filter_types` WHERE (code = 'features')
  [1m[36m (0.2ms)[0m  [1mSELECT COUNT(*) FROM `filters` WHERE (code = 'offer')[0m
Processing by RestaurantsController#index as HTML
  [1m[35mUser Load (0.3ms)[0m  SELECT `users`.* FROM `users` WHERE `users`.`id` = 1 LIMIT 1
  Rendered shared/_restaurant_manage_tabs.html.erb (0.8ms)
  Rendered restaurants/_condition_fields.html.erb (11.4ms)
  [1m[36mRestaurant Load (1.0ms)[0m  [1mSELECT `restaurants`.* FROM `restaurants` ORDER BY disabled ASC,created_at DESC LIMIT 12 OFFSET 0[0m
  [1m[35mPhoto Load (0.4ms)[0m  SELECT `photos`.* FROM `photos` WHERE (restaurant_id = 876 and cover = true and status = 1) LIMIT 1
  [1m[36mPhoto Load (0.3ms)[0m  [1mSELECT `photos`.* FROM `photos` WHERE `photos`.`restaurant_id` = 876 AND `photos`.`status` = 1 ORDER BY restaurant_id ASC, created_at DESC LIMIT 1[0m
  [1m[35mPhoto Load (0.3ms)[0m  SELECT `photos`.* FROM `photos` WHERE (restaurant_id = 851 and cover = true and status = 1) LIMIT 1
  [1m[36mPhoto Load (0.3ms)[0m  [1mSELECT `photos`.* FROM `photos` WHERE `photos`.`restaurant_id` = 851 AND `photos`.`status` = 1 ORDER BY restaurant_id ASC, created_at DESC LIMIT 1[0m
  [1m[35mPhoto Load (0.3ms)[0m  SELECT `photos`.* FROM `photos` WHERE (restaurant_id = 693 and cover = true and status = 1) LIMIT 1
  [1m[36mPhoto Load (0.4ms)[0m  [1mSELECT `photos`.* FROM `photos` WHERE `photos`.`restaurant_id` = 693 AND `photos`.`status` = 1 ORDER BY restaurant_id ASC, created_at DESC LIMIT 1[0m
  [1m[35mPhoto Load (0.4ms)[0m  SELECT `photos`.* FROM `photos` WHERE (restaurant_id = 686 and cover = true and status = 1) LIMIT 1
  [1m[36mPhoto Load (0.3ms)[0m  [1mSELECT `photos`.* FROM `photos` WHERE `photos`.`restaurant_id` = 686 AND `photos`.`status` = 1 ORDER BY restaurant_id ASC, created_at DESC LIMIT 1[0m
  [1m[35mPhoto Load (0.4ms)[0m  SELECT `photos`.* FROM `photos` WHERE (restaurant_id = 669 and cover = true and status = 1) LIMIT 1
  [1m[36mPhoto Load (0.3ms)[0m  [1mSELECT `photos`.* FROM `photos` WHERE `photos`.`restaurant_id` = 669 AND `photos`.`status` = 1 ORDER BY restaurant_id ASC, created_at DESC LIMIT 1[0m
  [1m[35mPhoto Load (0.4ms)[0m  SELECT `photos`.* FROM `photos` WHERE (restaurant_id = 251 and cover = true and status = 1) LIMIT 1
  [1m[36mPhoto Load (0.3ms)[0m  [1mSELECT `photos`.* FROM `photos` WHERE `photos`.`restaurant_id` = 251 AND `photos`.`status` = 1 ORDER BY restaurant_id ASC, created_at DESC LIMIT 1[0m
  [1m[35mPhoto Load (0.3ms)[0m  SELECT `photos`.* FROM `photos` WHERE (restaurant_id = 250 and cover = true and status = 1) LIMIT 1
  [1m[36mPhoto Load (0.3ms)[0m  [1mSELECT `photos`.* FROM `photos` WHERE `photos`.`restaurant_id` = 250 AND `photos`.`status` = 1 ORDER BY restaurant_id ASC, created_at DESC LIMIT 1[0m
  [1m[35mPhoto Load (0.3ms)[0m  SELECT `photos`.* FROM `photos` WHERE (restaurant_id = 237 and cover = true and status = 1) LIMIT 1
  [1m[36mPhoto Load (0.3ms)[0m  [1mSELECT `photos`.* FROM `photos` WHERE `photos`.`restaurant_id` = 237 AND `photos`.`status` = 1 ORDER BY restaurant_id ASC, created_at DESC LIMIT 1[0m
  [1m[35mPhoto Load (0.4ms)[0m  SELECT `photos`.* FROM `photos` WHERE (restaurant_id = 231 and cover = true and status = 1) LIMIT 1
  [1m[36mPhoto Load (0.3ms)[0m  [1mSELECT `photos`.* FROM `photos` WHERE `photos`.`restaurant_id` = 231 AND `photos`.`status` = 1 ORDER BY restaurant_id ASC, created_at DESC LIMIT 1[0m
  [1m[35mPhoto Load (0.3ms)[0m  SELECT `photos`.* FROM `photos` WHERE (restaurant_id = 222 and cover = true and status = 1) LIMIT 1
  [1m[36mPhoto Load (0.3ms)[0m  [1mSELECT `photos`.* FROM `photos` WHERE `photos`.`restaurant_id` = 222 AND `photos`.`status` = 1 ORDER BY restaurant_id ASC, created_at DESC LIMIT 1[0m
  [1m[35mPhoto Load (0.3ms)[0m  SELECT `photos`.* FROM `photos` WHERE (restaurant_id = 221 and cover = true and status = 1) LIMIT 1
  [1m[36mPhoto Load (0.3ms)[0m  [1mSELECT `photos`.* FROM `photos` WHERE `photos`.`restaurant_id` = 221 AND `photos`.`status` = 1 ORDER BY restaurant_id ASC, created_at DESC LIMIT 1[0m
  [1m[35mPhoto Load (0.3ms)[0m  SELECT `photos`.* FROM `photos` WHERE (restaurant_id = 216 and cover = true and status = 1) LIMIT 1
  [1m[36mPhoto Load (0.3ms)[0m  [1mSELECT `photos`.* FROM `photos` WHERE `photos`.`restaurant_id` = 216 AND `photos`.`status` = 1 ORDER BY restaurant_id ASC, created_at DESC LIMIT 1[0m
  [1m[35m (0.5ms)[0m  SELECT COUNT(*) FROM `restaurants` 
  Rendered restaurants/index.html.erb within layouts/admin (135.6ms)
Completed 200 OK in 161ms (Views: 145.3ms | ActiveRecord: 13.9ms)


Started GET "/admin/collections" for 127.0.0.1 at 2016-01-18 15:08:31 +0100
Processing by CollectionsController#index as HTML
  Rendered shared/_restaurant_manage_tabs.html.erb (0.6ms)
  [1m[36mCollection Load (0.3ms)[0m  [1mSELECT `collections`.* FROM `collections` ORDER BY name ASC, created_at DESC LIMIT 12 OFFSET 0[0m
  [1m[35mCollectionImage Load (0.2ms)[0m  SELECT `collection_images`.* FROM `collection_images` WHERE (collection_id = 3) LIMIT 1
  [1m[36mCollectionImage Load (0.3ms)[0m  [1mSELECT `collection_images`.* FROM `collection_images` WHERE (collection_id = 2) LIMIT 1[0m
  [1m[35mCollectionImage Load (0.2ms)[0m  SELECT `collection_images`.* FROM `collection_images` WHERE (collection_id = 4) LIMIT 1
  [1m[36m (0.2ms)[0m  [1mSELECT COUNT(*) FROM `collections` [0m
  Rendered collections/index.erb within layouts/admin (18.1ms)
  [1m[35mUser Load (0.2ms)[0m  SELECT `users`.* FROM `users` WHERE `users`.`id` = 1 LIMIT 1
Completed 200 OK in 39ms (Views: 36.9ms | ActiveRecord: 1.3ms)


Started GET "/admin/collections/destroy/4" for 127.0.0.1 at 2016-01-18 15:08:35 +0100
Processing by CollectionsController#destroy as HTML
  Parameters: {"id"=>"4"}
  [1m[36mCollection Load (0.3ms)[0m  [1mSELECT `collections`.* FROM `collections` WHERE `collections`.`id` = 4 LIMIT 1[0m
  [1m[35m (0.1ms)[0m  BEGIN
  [1m[36mCollectionImage Load (0.2ms)[0m  [1mSELECT `collection_images`.* FROM `collection_images` WHERE `collection_images`.`collection_id` = 4 LIMIT 1[0m
  [1m[35mRestaurant Load (0.3ms)[0m  SELECT `restaurants`.* FROM `restaurants` INNER JOIN `collection_restaurants` ON `restaurants`.`id` = `collection_restaurants`.`restaurant_id` WHERE `collection_restaurants`.`collection_id` = 4
  [1m[36mSQL (0.2ms)[0m  [1mDELETE FROM `collections` WHERE `collections`.`id` = 4[0m
  [1m[35m (0.5ms)[0m  COMMIT
Redirected to http://localhost:3000/admin/collections
Completed 302 Found in 11ms (ActiveRecord: 3.3ms)


Started GET "/admin/collections" for 127.0.0.1 at 2016-01-18 15:08:35 +0100
Processing by CollectionsController#index as HTML
  Rendered shared/_restaurant_manage_tabs.html.erb (0.6ms)
  [1m[36mCollection Load (0.2ms)[0m  [1mSELECT `collections`.* FROM `collections` ORDER BY name ASC, created_at DESC LIMIT 12 OFFSET 0[0m
  [1m[35mCollectionImage Load (0.2ms)[0m  SELECT `collection_images`.* FROM `collection_images` WHERE (collection_id = 3) LIMIT 1
  [1m[36mCollectionImage Load (0.2ms)[0m  [1mSELECT `collection_images`.* FROM `collection_images` WHERE (collection_id = 2) LIMIT 1[0m
  [1m[35m (0.1ms)[0m  SELECT COUNT(*) FROM `collections` 
  Rendered collections/index.erb within layouts/admin (11.4ms)
  [1m[36mUser Load (0.2ms)[0m  [1mSELECT `users`.* FROM `users` WHERE `users`.`id` = 1 LIMIT 1[0m
Completed 200 OK in 19ms (Views: 17.1ms | ActiveRecord: 0.9ms)


Started GET "/admin/collections/admin_new_collection" for 127.0.0.1 at 2016-01-18 15:08:36 +0100
Processing by CollectionsController#admin_new_collection as HTML
  [1m[35mUser Load (0.3ms)[0m  SELECT `users`.* FROM `users` WHERE `users`.`id` = 1 LIMIT 1
  Rendered collections/_collection_form.html.erb (5.6ms)
  Rendered collections/admin_new_collection.html.erb within layouts/admin (6.4ms)
Completed 200 OK in 40ms (Views: 11.7ms | ActiveRecord: 0.5ms)


Started POST "/admin/collections" for 127.0.0.1 at 2016-01-18 15:08:48 +0100
Processing by CollectionsController#create as HTML
  Parameters: {"utf8"=>"âœ“", "authenticity_token"=>"cajmPApKUoLTDgL4nYG/B3GUhj8fezKDJZWxee28cyM=", "admin"=>"true", "collection"=>{"name"=>"Test", "description"=>"test"}, "collection_image"=>{"image"=>#<ActionDispatch::Http::UploadedFile:0x007fc25db50708 @original_filename="michelin.png", @content_type="image/png", @headers="Content-Disposition: form-data; name=\"collection_image[image]\"; filename=\"michelin.png\"\r\nContent-Type: image/png\r\n", @tempfile=#<Tempfile:/var/folders/rf/q4l8n5k56pnbjgkdtzrhq_w00000gn/T/RackMultipart20160118-19170-7cxl5k>>}}
  [1m[36mCollection Load (0.3ms)[0m  [1mSELECT `collections`.* FROM `collections` WHERE `collections`.`name` = 'Test' LIMIT 1[0m
  Rendered collections/_collection_form.html.erb (4.2ms)
  Rendered collections/admin_new_collection.html.erb within layouts/admin (5.0ms)
  [1m[35mUser Load (0.3ms)[0m  SELECT `users`.* FROM `users` WHERE `users`.`id` = 1 LIMIT 1
Completed 200 OK in 14ms (Views: 11.5ms | ActiveRecord: 0.6ms)


Started POST "/admin/collections" for 127.0.0.1 at 2016-01-18 15:09:13 +0100
Processing by CollectionsController#create as HTML
  Parameters: {"utf8"=>"âœ“", "authenticity_token"=>"cajmPApKUoLTDgL4nYG/B3GUhj8fezKDJZWxee28cyM=", "admin"=>"true", "collection"=>{"name"=>"Test Collection", "description"=>"test"}, "collection_image"=>{"image"=>#<ActionDispatch::Http::UploadedFile:0x007fc25e840440 @original_filename="sunday_roast.png", @content_type="image/png", @headers="Content-Disposition: form-data; name=\"collection_image[image]\"; filename=\"sunday_roast.png\"\r\nContent-Type: image/png\r\n", @tempfile=#<Tempfile:/var/folders/rf/q4l8n5k56pnbjgkdtzrhq_w00000gn/T/RackMultipart20160118-19170-18c93h1>>}}
  [1m[36mCollection Load (0.4ms)[0m  [1mSELECT `collections`.* FROM `collections` WHERE `collections`.`name` = 'Test Collection' LIMIT 1[0m
  [1m[35m (0.1ms)[0m  BEGIN
  [1m[36m (0.1ms)[0m  [1mCOMMIT[0m
  [1m[35m (0.1ms)[0m  BEGIN
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO `collections` (`created_at`, `description`, `disabled`, `image_url`, `name`, `updated_at`) VALUES ('2016-01-18 14:09:13', 'test', NULL, NULL, 'Test Collection', '2016-01-18 14:09:13')[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO `collection_images` (`collection_id`, `created_at`, `image_name`, `image_uid`, `text_content`, `text_hyperlink`, `text_title`, `updated_at`) VALUES (5, '2016-01-18 14:09:13', 'sunday_roast.png', '2016/01/18/15_09_13_876_sunday_roast.png', NULL, NULL, NULL, '2016-01-18 14:09:13')
  [1m[36m (0.6ms)[0m  [1mCOMMIT[0m
Redirected to http://localhost:3000/collection/5/edit
Completed 302 Found in 32ms (ActiveRecord: 1.7ms)


Started GET "/collection/5/edit" for 127.0.0.1 at 2016-01-18 15:09:13 +0100
Processing by CollectionsController#edit_collection as HTML
  Parameters: {"id"=>"5"}
  [1m[35mUser Load (0.2ms)[0m  SELECT `users`.* FROM `users` WHERE `users`.`id` = 1 LIMIT 1
  [1m[36mCollection Load (0.2ms)[0m  [1mSELECT `collections`.* FROM `collections` WHERE `collections`.`id` = 5 LIMIT 1[0m
  [1m[35mCollectionImage Load (0.3ms)[0m  SELECT `collection_images`.* FROM `collection_images` WHERE (collection_id = 5) LIMIT 1
  Rendered collections/_collection_form.html.erb (7.2ms)
  [1m[36mRestaurant Load (3.3ms)[0m  [1mSELECT `restaurants`.* FROM `restaurants` WHERE `restaurants`.`disabled` = 0[0m
  Rendered collections/_collection_restaurants_form.html.erb (54.5ms)
  [1m[35mRestaurant Load (0.3ms)[0m  SELECT `restaurants`.* FROM `restaurants` INNER JOIN `collection_restaurants` ON `restaurants`.`id` = `collection_restaurants`.`restaurant_id` WHERE `collection_restaurants`.`collection_id` = 5
  Rendered collections/_collection_restaurants_list.html.erb (1.8ms)
  Rendered collections/edit_collection.html.erb within layouts/admin (73.3ms)
Completed 200 OK in 109ms (Views: 101.7ms | ActiveRecord: 4.3ms)


Started POST "/admin/collections/add_restaurant/5" for 127.0.0.1 at 2016-01-18 15:09:31 +0100
Processing by CollectionsController#add_restaurant as JSON
  Parameters: {"utf8"=>"âœ“", "authenticity_token"=>"cajmPApKUoLTDgL4nYG/B3GUhj8fezKDJZWxee28cyM=", "collection_restaurant"=>{"restaurant_id"=>"1"}, "id"=>"5"}
  [1m[36mUser Load (1.0ms)[0m  [1mSELECT `users`.* FROM `users` WHERE `users`.`id` = 1 LIMIT 1[0m
  [1m[35m (0.3ms)[0m  SELECT COUNT(*) FROM `collection_restaurants` WHERE (collection_id = '5' AND restaurant_id = '1')
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35mSQL (3.0ms)[0m  INSERT INTO `collection_restaurants` (`collection_id`, `order`, `restaurant_id`) VALUES (5, NULL, 1)
  [1m[36m (0.9ms)[0m  [1mCOMMIT[0m
  Rendered collections/add_restaurant.json.erb (0.1ms)
Completed 200 OK in 60ms (Views: 47.4ms | ActiveRecord: 5.2ms)


Started POST "/admin/collections/add_restaurant/5" for 127.0.0.1 at 2016-01-18 15:09:33 +0100
Processing by CollectionsController#add_restaurant as JSON
  Parameters: {"utf8"=>"âœ“", "authenticity_token"=>"cajmPApKUoLTDgL4nYG/B3GUhj8fezKDJZWxee28cyM=", "collection_restaurant"=>{"restaurant_id"=>"4"}, "id"=>"5"}
  [1m[35mUser Load (0.3ms)[0m  SELECT `users`.* FROM `users` WHERE `users`.`id` = 1 LIMIT 1
  [1m[36m (0.2ms)[0m  [1mSELECT COUNT(*) FROM `collection_restaurants` WHERE (collection_id = '5' AND restaurant_id = '4')[0m
  [1m[35m (0.1ms)[0m  BEGIN
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO `collection_restaurants` (`collection_id`, `order`, `restaurant_id`) VALUES (5, NULL, 4)[0m
  [1m[35m (0.5ms)[0m  COMMIT
  Rendered collections/add_restaurant.json.erb (0.0ms)
Completed 200 OK in 42ms (Views: 36.2ms | ActiveRecord: 1.4ms)


Started GET "/collection/5/edit" for 127.0.0.1 at 2016-01-18 15:09:36 +0100
Processing by CollectionsController#edit_collection as HTML
  Parameters: {"id"=>"5"}
  [1m[36mUser Load (0.4ms)[0m  [1mSELECT `users`.* FROM `users` WHERE `users`.`id` = 1 LIMIT 1[0m
  [1m[35mCollection Load (0.4ms)[0m  SELECT `collections`.* FROM `collections` WHERE `collections`.`id` = 5 LIMIT 1
  [1m[36mCollectionImage Load (0.3ms)[0m  [1mSELECT `collection_images`.* FROM `collection_images` WHERE (collection_id = 5) LIMIT 1[0m
  Rendered collections/_collection_form.html.erb (14.3ms)
  [1m[35mRestaurant Load (4.6ms)[0m  SELECT `restaurants`.* FROM `restaurants` WHERE `restaurants`.`disabled` = 0
  Rendered collections/_collection_restaurants_form.html.erb (105.0ms)
  [1m[36mRestaurant Load (0.4ms)[0m  [1mSELECT `restaurants`.* FROM `restaurants` INNER JOIN `collection_restaurants` ON `restaurants`.`id` = `collection_restaurants`.`restaurant_id` WHERE `collection_restaurants`.`collection_id` = 5[0m
  Rendered collections/_collection_restaurants_list.html.erb (2.4ms)
  Rendered collections/edit_collection.html.erb within layouts/admin (125.7ms)
Completed 200 OK in 138ms (Views: 127.8ms | ActiveRecord: 6.2ms)


Started GET "/admin/restaurants" for 127.0.0.1 at 2016-01-18 15:10:15 +0100
Processing by RestaurantsController#index as HTML
  [1m[35mUser Load (0.4ms)[0m  SELECT `users`.* FROM `users` WHERE `users`.`id` = 1 LIMIT 1
  Rendered shared/_restaurant_manage_tabs.html.erb (1.0ms)
  Rendered restaurants/_condition_fields.html.erb (12.2ms)
  [1m[36mRestaurant Load (0.7ms)[0m  [1mSELECT `restaurants`.* FROM `restaurants` ORDER BY disabled ASC,created_at DESC LIMIT 12 OFFSET 0[0m
  [1m[35mPhoto Load (0.4ms)[0m  SELECT `photos`.* FROM `photos` WHERE (restaurant_id = 876 and cover = true and status = 1) LIMIT 1
  [1m[36mPhoto Load (0.3ms)[0m  [1mSELECT `photos`.* FROM `photos` WHERE `photos`.`restaurant_id` = 876 AND `photos`.`status` = 1 ORDER BY restaurant_id ASC, created_at DESC LIMIT 1[0m
  [1m[35mPhoto Load (0.3ms)[0m  SELECT `photos`.* FROM `photos` WHERE (restaurant_id = 851 and cover = true and status = 1) LIMIT 1
  [1m[36mPhoto Load (0.3ms)[0m  [1mSELECT `photos`.* FROM `photos` WHERE `photos`.`restaurant_id` = 851 AND `photos`.`status` = 1 ORDER BY restaurant_id ASC, created_at DESC LIMIT 1[0m
  [1m[35mPhoto Load (0.3ms)[0m  SELECT `photos`.* FROM `photos` WHERE (restaurant_id = 693 and cover = true and status = 1) LIMIT 1
  [1m[36mPhoto Load (0.3ms)[0m  [1mSELECT `photos`.* FROM `photos` WHERE `photos`.`restaurant_id` = 693 AND `photos`.`status` = 1 ORDER BY restaurant_id ASC, created_at DESC LIMIT 1[0m
  [1m[35mPhoto Load (0.3ms)[0m  SELECT `photos`.* FROM `photos` WHERE (restaurant_id = 686 and cover = true and status = 1) LIMIT 1
  [1m[36mPhoto Load (0.3ms)[0m  [1mSELECT `photos`.* FROM `photos` WHERE `photos`.`restaurant_id` = 686 AND `photos`.`status` = 1 ORDER BY restaurant_id ASC, created_at DESC LIMIT 1[0m
  [1m[35mPhoto Load (0.3ms)[0m  SELECT `photos`.* FROM `photos` WHERE (restaurant_id = 669 and cover = true and status = 1) LIMIT 1
  [1m[36mPhoto Load (0.3ms)[0m  [1mSELECT `photos`.* FROM `photos` WHERE `photos`.`restaurant_id` = 669 AND `photos`.`status` = 1 ORDER BY restaurant_id ASC, created_at DESC LIMIT 1[0m
  [1m[35mPhoto Load (0.4ms)[0m  SELECT `photos`.* FROM `photos` WHERE (restaurant_id = 251 and cover = true and status = 1) LIMIT 1
  [1m[36mPhoto Load (0.3ms)[0m  [1mSELECT `photos`.* FROM `photos` WHERE `photos`.`restaurant_id` = 251 AND `photos`.`status` = 1 ORDER BY restaurant_id ASC, created_at DESC LIMIT 1[0m
  [1m[35mPhoto Load (0.3ms)[0m  SELECT `photos`.* FROM `photos` WHERE (restaurant_id = 250 and cover = true and status = 1) LIMIT 1
  [1m[36mPhoto Load (0.3ms)[0m  [1mSELECT `photos`.* FROM `photos` WHERE `photos`.`restaurant_id` = 250 AND `photos`.`status` = 1 ORDER BY restaurant_id ASC, created_at DESC LIMIT 1[0m
  [1m[35mPhoto Load (0.4ms)[0m  SELECT `photos`.* FROM `photos` WHERE (restaurant_id = 237 and cover = true and status = 1) LIMIT 1
  [1m[36mPhoto Load (0.3ms)[0m  [1mSELECT `photos`.* FROM `photos` WHERE `photos`.`restaurant_id` = 237 AND `photos`.`status` = 1 ORDER BY restaurant_id ASC, created_at DESC LIMIT 1[0m
  [1m[35mPhoto Load (0.3ms)[0m  SELECT `photos`.* FROM `photos` WHERE (restaurant_id = 231 and cover = true and status = 1) LIMIT 1
  [1m[36mPhoto Load (0.3ms)[0m  [1mSELECT `photos`.* FROM `photos` WHERE `photos`.`restaurant_id` = 231 AND `photos`.`status` = 1 ORDER BY restaurant_id ASC, created_at DESC LIMIT 1[0m
  [1m[35mPhoto Load (0.3ms)[0m  SELECT `photos`.* FROM `photos` WHERE (restaurant_id = 222 and cover = true and status = 1) LIMIT 1
  [1m[36mPhoto Load (0.3ms)[0m  [1mSELECT `photos`.* FROM `photos` WHERE `photos`.`restaurant_id` = 222 AND `photos`.`status` = 1 ORDER BY restaurant_id ASC, created_at DESC LIMIT 1[0m
  [1m[35mPhoto Load (0.3ms)[0m  SELECT `photos`.* FROM `photos` WHERE (restaurant_id = 221 and cover = true and status = 1) LIMIT 1
  [1m[36mPhoto Load (0.2ms)[0m  [1mSELECT `photos`.* FROM `photos` WHERE `photos`.`restaurant_id` = 221 AND `photos`.`status` = 1 ORDER BY restaurant_id ASC, created_at DESC LIMIT 1[0m
  [1m[35mPhoto Load (0.5ms)[0m  SELECT `photos`.* FROM `photos` WHERE (restaurant_id = 216 and cover = true and status = 1) LIMIT 1
  [1m[36mPhoto Load (0.3ms)[0m  [1mSELECT `photos`.* FROM `photos` WHERE `photos`.`restaurant_id` = 216 AND `photos`.`status` = 1 ORDER BY restaurant_id ASC, created_at DESC LIMIT 1[0m
  [1m[35m (0.4ms)[0m  SELECT COUNT(*) FROM `restaurants` 
  Rendered restaurants/index.html.erb within layouts/admin (111.3ms)
Completed 200 OK in 142ms (Views: 130.4ms | ActiveRecord: 8.9ms)


Started GET "/admin/collections" for 127.0.0.1 at 2016-01-18 15:10:19 +0100
Processing by CollectionsController#index as HTML
  Rendered shared/_restaurant_manage_tabs.html.erb (2.0ms)
  [1m[36mCollection Load (0.3ms)[0m  [1mSELECT `collections`.* FROM `collections` ORDER BY name ASC, created_at DESC LIMIT 12 OFFSET 0[0m
  [1m[35mCollectionImage Load (0.2ms)[0m  SELECT `collection_images`.* FROM `collection_images` WHERE (collection_id = 3) LIMIT 1
  [1m[36mCollectionImage Load (0.2ms)[0m  [1mSELECT `collection_images`.* FROM `collection_images` WHERE (collection_id = 2) LIMIT 1[0m
  [1m[35mCollectionImage Load (0.2ms)[0m  SELECT `collection_images`.* FROM `collection_images` WHERE (collection_id = 5) LIMIT 1
  [1m[36m (0.1ms)[0m  [1mSELECT COUNT(*) FROM `collections` [0m
  Rendered collections/index.erb within layouts/admin (19.8ms)
  [1m[35mUser Load (0.3ms)[0m  SELECT `users`.* FROM `users` WHERE `users`.`id` = 1 LIMIT 1
Completed 200 OK in 41ms (Views: 37.8ms | ActiveRecord: 1.4ms)


Started GET "/collection/3/edit" for 127.0.0.1 at 2016-01-18 15:10:46 +0100
Processing by CollectionsController#edit_collection as HTML
  Parameters: {"id"=>"3"}
  [1m[36mUser Load (0.2ms)[0m  [1mSELECT `users`.* FROM `users` WHERE `users`.`id` = 1 LIMIT 1[0m
  [1m[35mCollection Load (0.2ms)[0m  SELECT `collections`.* FROM `collections` WHERE `collections`.`id` = 3 LIMIT 1
  [1m[36mCollectionImage Load (0.3ms)[0m  [1mSELECT `collection_images`.* FROM `collection_images` WHERE (collection_id = 3) LIMIT 1[0m
  Rendered collections/_collection_form.html.erb (9.2ms)
  [1m[35mRestaurant Load (3.4ms)[0m  SELECT `restaurants`.* FROM `restaurants` WHERE `restaurants`.`disabled` = 0
  Rendered collections/_collection_restaurants_form.html.erb (68.1ms)
  [1m[36mRestaurant Load (0.4ms)[0m  [1mSELECT `restaurants`.* FROM `restaurants` INNER JOIN `collection_restaurants` ON `restaurants`.`id` = `collection_restaurants`.`restaurant_id` WHERE `collection_restaurants`.`collection_id` = 3[0m
  Rendered collections/_collection_restaurants_list.html.erb (3.0ms)
  Rendered collections/edit_collection.html.erb within layouts/admin (83.5ms)
Completed 200 OK in 94ms (Views: 85.9ms | ActiveRecord: 4.5ms)


Started GET "/collection/3/edit?_=1453126251861" for 127.0.0.1 at 2016-01-18 15:10:51 +0100
Processing by CollectionsController#edit_collection as JS
  Parameters: {"_"=>"1453126251861", "id"=>"3"}
  [1m[35mUser Load (0.3ms)[0m  SELECT `users`.* FROM `users` WHERE `users`.`id` = 1 LIMIT 1
  [1m[36mCollection Load (0.1ms)[0m  [1mSELECT `collections`.* FROM `collections` WHERE `collections`.`id` = 3 LIMIT 1[0m
  [1m[35mCollectionImage Load (0.3ms)[0m  SELECT `collection_images`.* FROM `collection_images` WHERE (collection_id = 3) LIMIT 1
  Rendered collections/_collection_form.html.erb (9.9ms)
  [1m[36mRestaurant Load (3.2ms)[0m  [1mSELECT `restaurants`.* FROM `restaurants` WHERE `restaurants`.`disabled` = 0[0m
  Rendered collections/_collection_restaurants_form.html.erb (67.1ms)
  [1m[35mRestaurant Load (0.4ms)[0m  SELECT `restaurants`.* FROM `restaurants` INNER JOIN `collection_restaurants` ON `restaurants`.`id` = `collection_restaurants`.`restaurant_id` WHERE `collection_restaurants`.`collection_id` = 3
  Rendered collections/_collection_restaurants_list.html.erb (3.0ms)
  Rendered collections/edit_collection.html.erb within layouts/admin (84.7ms)
Completed 200 OK in 106ms (Views: 98.1ms | ActiveRecord: 4.4ms)


Started GET "/collection/3/edit" for 127.0.0.1 at 2016-01-18 15:22:55 +0100

SyntaxError (/Users/kevinmuller/halalgems_backend/app/helpers/collections_helper.rb:30: syntax error, unexpected end-of-input, expecting keyword_end):
  app/controllers/application_controller.rb:1:in `<top (required)>'
  app/controllers/collections_controller.rb:1:in `<top (required)>'


  Rendered /Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_dispatch/middleware/templates/rescues/_trace.erb (1.6ms)
  Rendered /Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_dispatch/middleware/templates/rescues/_request_and_response.erb (1.1ms)
  Rendered /Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_dispatch/middleware/templates/rescues/diagnostics.erb within rescues/layout (42.9ms)


Started GET "/collection/3/edit" for 127.0.0.1 at 2016-01-18 15:23:46 +0100
Processing by CollectionsController#edit_collection as HTML
  Parameters: {"id"=>"3"}
  [1m[36mUser Load (0.2ms)[0m  [1mSELECT `users`.* FROM `users` WHERE `users`.`id` = 1 LIMIT 1[0m
  [1m[35mCollection Load (0.2ms)[0m  SELECT `collections`.* FROM `collections` WHERE `collections`.`id` = 3 LIMIT 1
  [1m[36m (0.2ms)[0m  [1mSELECT COUNT(*) FROM `filter_types` WHERE (code = 'features')[0m
  [1m[35m (0.1ms)[0m  SELECT COUNT(*) FROM `filters` WHERE (code = 'offer')
  [1m[36mCollectionImage Load (0.2ms)[0m  [1mSELECT `collection_images`.* FROM `collection_images` WHERE (collection_id = 3) LIMIT 1[0m
  Rendered collections/_collection_form.html.erb (50.0ms)
  [1m[35mRestaurant Load (3.3ms)[0m  SELECT `restaurants`.* FROM `restaurants` WHERE `restaurants`.`disabled` = 0
  Rendered collections/_collection_restaurants_form.html.erb (86.5ms)
  [1m[36mRestaurant Load (0.4ms)[0m  [1mSELECT `restaurants`.* FROM `restaurants` INNER JOIN `collection_restaurants` ON `restaurants`.`id` = `collection_restaurants`.`restaurant_id` WHERE `collection_restaurants`.`collection_id` = 3[0m
  Rendered collections/_collection_restaurants_list.html.erb (3.3ms)
  Rendered collections/edit_collection.html.erb within layouts/admin (144.7ms)
Completed 200 OK in 446ms (Views: 148.2ms | ActiveRecord: 19.9ms)


Started GET "/collection/3/edit" for 127.0.0.1 at 2016-01-18 15:24:59 +0100
Processing by CollectionsController#edit_collection as HTML
  Parameters: {"id"=>"3"}
  [1m[35mUser Load (0.3ms)[0m  SELECT `users`.* FROM `users` WHERE `users`.`id` = 1 LIMIT 1
  [1m[36mCollection Load (0.1ms)[0m  [1mSELECT `collections`.* FROM `collections` WHERE `collections`.`id` = 3 LIMIT 1[0m
  [1m[35mCollectionImage Load (0.2ms)[0m  SELECT `collection_images`.* FROM `collection_images` WHERE (collection_id = 3) LIMIT 1
  Rendered collections/_collection_form.html.erb (7.3ms)
  [1m[36mRestaurant Load (3.1ms)[0m  [1mSELECT `restaurants`.* FROM `restaurants` WHERE `restaurants`.`disabled` = 0[0m
  Rendered collections/_collection_restaurants_form.html.erb (66.5ms)
  [1m[35mRestaurant Load (0.4ms)[0m  SELECT `restaurants`.* FROM `restaurants` INNER JOIN `collection_restaurants` ON `restaurants`.`id` = `collection_restaurants`.`restaurant_id` WHERE `collection_restaurants`.`collection_id` = 3
  Rendered collections/_collection_restaurants_list.html.erb (3.8ms)
  Rendered collections/edit_collection.html.erb within layouts/admin (81.4ms)
Completed 500 Internal Server Error in 87ms

ActionView::Template::Error (Called id for nil, which would mistakenly be 8 -- if you really wanted the id of nil, use object_id):
    13:           <td><%= cr.name %></td>
    14:           <td>
    15:             <div class="btn-group btn-group-xs">
    16:               <%= remove_collection_restaurant_button(@collection, @restaurant) %>
    17:             </div>
    18:           </td>
    19:         </tr>
  app/helpers/collections_helper.rb:27:in `remove_collection_restaurant_button'
  app/views/collections/_collection_restaurants_list.html.erb:16:in `block in _app_views_collections__collection_restaurants_list_html_erb___171350222027666675_70236345548880'
  app/views/collections/_collection_restaurants_list.html.erb:11:in `_app_views_collections__collection_restaurants_list_html_erb___171350222027666675_70236345548880'
  app/views/collections/edit_collection.html.erb:18:in `_app_views_collections_edit_collection_html_erb___2603788858892649966_70236384724960'


  Rendered /Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_dispatch/middleware/templates/rescues/_trace.erb (1.2ms)
  Rendered /Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_dispatch/middleware/templates/rescues/_request_and_response.erb (1.0ms)
  Rendered /Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_dispatch/middleware/templates/rescues/template_error.erb within rescues/layout (47.1ms)


Started GET "/collection/3/edit" for 127.0.0.1 at 2016-01-18 15:25:12 +0100
Processing by CollectionsController#edit_collection as HTML
  Parameters: {"id"=>"3"}
  [1m[36mUser Load (0.4ms)[0m  [1mSELECT `users`.* FROM `users` WHERE `users`.`id` = 1 LIMIT 1[0m
  [1m[35mCollection Load (0.5ms)[0m  SELECT `collections`.* FROM `collections` WHERE `collections`.`id` = 3 LIMIT 1
  [1m[36mCollectionImage Load (0.4ms)[0m  [1mSELECT `collection_images`.* FROM `collection_images` WHERE (collection_id = 3) LIMIT 1[0m
  Rendered collections/_collection_form.html.erb (12.1ms)
  [1m[35mRestaurant Load (7.0ms)[0m  SELECT `restaurants`.* FROM `restaurants` WHERE `restaurants`.`disabled` = 0
  Rendered collections/_collection_restaurants_form.html.erb (121.6ms)
  [1m[36mRestaurant Load (0.4ms)[0m  [1mSELECT `restaurants`.* FROM `restaurants` INNER JOIN `collection_restaurants` ON `restaurants`.`id` = `collection_restaurants`.`restaurant_id` WHERE `collection_restaurants`.`collection_id` = 3[0m
  Rendered collections/_collection_restaurants_list.html.erb (3.2ms)
  Rendered collections/edit_collection.html.erb within layouts/admin (140.9ms)
Completed 500 Internal Server Error in 151ms

ActionView::Template::Error (Called id for nil, which would mistakenly be 8 -- if you really wanted the id of nil, use object_id):
    13:           <td><%= cr.name %></td>
    14:           <td>
    15:             <div class="btn-group btn-group-xs">
    16:               <%= remove_collection_restaurant_button(@collection, @cr) %>
    17:             </div>
    18:           </td>
    19:         </tr>
  app/helpers/collections_helper.rb:27:in `remove_collection_restaurant_button'
  app/views/collections/_collection_restaurants_list.html.erb:16:in `block in _app_views_collections__collection_restaurants_list_html_erb___171350222027666675_70236168779860'
  app/views/collections/_collection_restaurants_list.html.erb:11:in `_app_views_collections__collection_restaurants_list_html_erb___171350222027666675_70236168779860'
  app/views/collections/edit_collection.html.erb:18:in `_app_views_collections_edit_collection_html_erb___2603788858892649966_70236384724960'


  Rendered /Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_dispatch/middleware/templates/rescues/_trace.erb (1.1ms)
  Rendered /Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_dispatch/middleware/templates/rescues/_request_and_response.erb (1.1ms)
  Rendered /Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_dispatch/middleware/templates/rescues/template_error.erb within rescues/layout (41.4ms)


Started GET "/collection/3/edit" for 127.0.0.1 at 2016-01-18 15:25:42 +0100
Processing by CollectionsController#edit_collection as HTML
  Parameters: {"id"=>"3"}
  [1m[35mUser Load (0.4ms)[0m  SELECT `users`.* FROM `users` WHERE `users`.`id` = 1 LIMIT 1
  [1m[36mCollection Load (0.2ms)[0m  [1mSELECT `collections`.* FROM `collections` WHERE `collections`.`id` = 3 LIMIT 1[0m
  [1m[35mCollectionImage Load (0.3ms)[0m  SELECT `collection_images`.* FROM `collection_images` WHERE (collection_id = 3) LIMIT 1
  Rendered collections/_collection_form.html.erb (9.9ms)
  [1m[36mRestaurant Load (3.4ms)[0m  [1mSELECT `restaurants`.* FROM `restaurants` WHERE `restaurants`.`disabled` = 0[0m
  Rendered collections/_collection_restaurants_form.html.erb (65.1ms)
  [1m[35mRestaurant Load (0.4ms)[0m  SELECT `restaurants`.* FROM `restaurants` INNER JOIN `collection_restaurants` ON `restaurants`.`id` = `collection_restaurants`.`restaurant_id` WHERE `collection_restaurants`.`collection_id` = 3
  Rendered collections/_collection_restaurants_list.html.erb (413.4ms)
  Rendered collections/edit_collection.html.erb within layouts/admin (492.0ms)
Completed 500 Internal Server Error in 501ms

ActionView::Template::Error (undefined method `remove_restaurant_collection_path' for #<#<Class:0x007fc262405700>:0x007fc262152da0>):
    13:           <td><%= cr.name %></td>
    14:           <td>
    15:             <div class="btn-group btn-group-xs">
    16:               <%= remove_collection_restaurant_button(@collection, cr) %>
    17:             </div>
    18:           </td>
    19:         </tr>
  app/helpers/collections_helper.rb:27:in `remove_collection_restaurant_button'
  app/views/collections/_collection_restaurants_list.html.erb:16:in `block in _app_views_collections__collection_restaurants_list_html_erb___171350222027666675_70236167501940'
  app/views/collections/_collection_restaurants_list.html.erb:11:in `_app_views_collections__collection_restaurants_list_html_erb___171350222027666675_70236167501940'
  app/views/collections/edit_collection.html.erb:18:in `_app_views_collections_edit_collection_html_erb___2603788858892649966_70236384724960'


  Rendered /Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_dispatch/middleware/templates/rescues/_trace.erb (1.1ms)
  Rendered /Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_dispatch/middleware/templates/rescues/_request_and_response.erb (0.7ms)
  Rendered /Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_dispatch/middleware/templates/rescues/template_error.erb within rescues/layout (42.6ms)


Started GET "/collection/3/edit" for 127.0.0.1 at 2016-01-18 15:26:07 +0100
Processing by CollectionsController#edit_collection as HTML
  Parameters: {"id"=>"3"}
  [1m[36mUser Load (0.6ms)[0m  [1mSELECT `users`.* FROM `users` WHERE `users`.`id` = 1 LIMIT 1[0m
  [1m[35mCollection Load (0.4ms)[0m  SELECT `collections`.* FROM `collections` WHERE `collections`.`id` = 3 LIMIT 1
  [1m[36mCollectionImage Load (0.2ms)[0m  [1mSELECT `collection_images`.* FROM `collection_images` WHERE (collection_id = 3) LIMIT 1[0m
  Rendered collections/_collection_form.html.erb (5.6ms)
  [1m[35mRestaurant Load (3.5ms)[0m  SELECT `restaurants`.* FROM `restaurants` WHERE `restaurants`.`disabled` = 0
  Rendered collections/_collection_restaurants_form.html.erb (44.9ms)
  [1m[36mRestaurant Load (0.4ms)[0m  [1mSELECT `restaurants`.* FROM `restaurants` INNER JOIN `collection_restaurants` ON `restaurants`.`id` = `collection_restaurants`.`restaurant_id` WHERE `collection_restaurants`.`collection_id` = 3[0m
  Rendered collections/_collection_restaurants_list.html.erb (393.6ms)
  Rendered collections/edit_collection.html.erb within layouts/admin (446.8ms)
Completed 500 Internal Server Error in 456ms

ActionView::Template::Error (undefined method `remove_restaurant_collection_path' for #<#<Class:0x007fc262405700>:0x007fc243d6f828>):
    13:           <td><%= cr.name %></td>
    14:           <td>
    15:             <div class="btn-group btn-group-xs">
    16:               <%= remove_collection_restaurant_button @collection, cr %>
    17:             </div>
    18:           </td>
    19:         </tr>
  app/helpers/collections_helper.rb:27:in `remove_collection_restaurant_button'
  app/views/collections/_collection_restaurants_list.html.erb:16:in `block in _app_views_collections__collection_restaurants_list_html_erb___171350222027666675_70236181795740'
  app/views/collections/_collection_restaurants_list.html.erb:11:in `_app_views_collections__collection_restaurants_list_html_erb___171350222027666675_70236181795740'
  app/views/collections/edit_collection.html.erb:18:in `_app_views_collections_edit_collection_html_erb___2603788858892649966_70236384724960'


  Rendered /Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_dispatch/middleware/templates/rescues/_trace.erb (1.1ms)
  Rendered /Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_dispatch/middleware/templates/rescues/_request_and_response.erb (1.0ms)
  Rendered /Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_dispatch/middleware/templates/rescues/template_error.erb within rescues/layout (42.1ms)


Started GET "/collection/2/edit" for 127.0.0.1 at 2016-01-18 15:26:27 +0100
Processing by CollectionsController#edit_collection as HTML
  Parameters: {"id"=>"2"}
  [1m[35mUser Load (0.2ms)[0m  SELECT `users`.* FROM `users` WHERE `users`.`id` = 1 LIMIT 1
  [1m[36mCollection Load (0.2ms)[0m  [1mSELECT `collections`.* FROM `collections` WHERE `collections`.`id` = 2 LIMIT 1[0m
  [1m[35m (0.2ms)[0m  SELECT COUNT(*) FROM `filter_types` WHERE (code = 'features')
  [1m[36m (0.2ms)[0m  [1mSELECT COUNT(*) FROM `filters` WHERE (code = 'offer')[0m
  [1m[35mCollectionImage Load (0.2ms)[0m  SELECT `collection_images`.* FROM `collection_images` WHERE (collection_id = 2) LIMIT 1
  Rendered collections/_collection_form.html.erb (35.8ms)
  [1m[36mRestaurant Load (3.8ms)[0m  [1mSELECT `restaurants`.* FROM `restaurants` WHERE `restaurants`.`disabled` = 0[0m
  Rendered collections/_collection_restaurants_form.html.erb (63.0ms)
  [1m[35mRestaurant Load (0.3ms)[0m  SELECT `restaurants`.* FROM `restaurants` INNER JOIN `collection_restaurants` ON `restaurants`.`id` = `collection_restaurants`.`restaurant_id` WHERE `collection_restaurants`.`collection_id` = 2
  Rendered collections/_collection_restaurants_list.html.erb (2.3ms)
  Rendered collections/edit_collection.html.erb within layouts/admin (105.5ms)
Completed 200 OK in 334ms (Views: 107.0ms | ActiveRecord: 19.2ms)


Started GET "/collection/2/edit" for 127.0.0.1 at 2016-01-18 15:26:35 +0100
Processing by CollectionsController#edit_collection as HTML
  Parameters: {"id"=>"2"}
  [1m[36mUser Load (0.3ms)[0m  [1mSELECT `users`.* FROM `users` WHERE `users`.`id` = 1 LIMIT 1[0m
  [1m[35mCollection Load (0.2ms)[0m  SELECT `collections`.* FROM `collections` WHERE `collections`.`id` = 2 LIMIT 1
  [1m[36mCollectionImage Load (0.3ms)[0m  [1mSELECT `collection_images`.* FROM `collection_images` WHERE (collection_id = 2) LIMIT 1[0m
  Rendered collections/_collection_form.html.erb (7.3ms)
  [1m[35mRestaurant Load (3.7ms)[0m  SELECT `restaurants`.* FROM `restaurants` WHERE `restaurants`.`disabled` = 0
  Rendered collections/_collection_restaurants_form.html.erb (57.3ms)
  [1m[36mRestaurant Load (0.4ms)[0m  [1mSELECT `restaurants`.* FROM `restaurants` INNER JOIN `collection_restaurants` ON `restaurants`.`id` = `collection_restaurants`.`restaurant_id` WHERE `collection_restaurants`.`collection_id` = 2[0m
  Rendered collections/_collection_restaurants_list.html.erb (1.9ms)
  Rendered collections/edit_collection.html.erb within layouts/admin (69.9ms)
Completed 200 OK in 91ms (Views: 82.7ms | ActiveRecord: 4.9ms)


Started GET "/collection/2/edit" for 127.0.0.1 at 2016-01-18 15:27:06 +0100
Processing by CollectionsController#edit_collection as HTML
  Parameters: {"id"=>"2"}
  [1m[35mUser Load (0.3ms)[0m  SELECT `users`.* FROM `users` WHERE `users`.`id` = 1 LIMIT 1
  [1m[36mCollection Load (0.1ms)[0m  [1mSELECT `collections`.* FROM `collections` WHERE `collections`.`id` = 2 LIMIT 1[0m
  [1m[35mCollectionImage Load (0.3ms)[0m  SELECT `collection_images`.* FROM `collection_images` WHERE (collection_id = 2) LIMIT 1
  Rendered collections/_collection_form.html.erb (9.5ms)
  [1m[36mRestaurant Load (4.9ms)[0m  [1mSELECT `restaurants`.* FROM `restaurants` WHERE `restaurants`.`disabled` = 0[0m
  Rendered collections/_collection_restaurants_form.html.erb (119.9ms)
  [1m[35mRestaurant Load (0.4ms)[0m  SELECT `restaurants`.* FROM `restaurants` INNER JOIN `collection_restaurants` ON `restaurants`.`id` = `collection_restaurants`.`restaurant_id` WHERE `collection_restaurants`.`collection_id` = 2
  Rendered collections/_collection_restaurants_list.html.erb (2.0ms)
  Rendered collections/edit_collection.html.erb within layouts/admin (166.2ms)
Completed 200 OK in 190ms (Views: 180.6ms | ActiveRecord: 6.0ms)


Started POST "/admin/collections/add_restaurant/2" for 127.0.0.1 at 2016-01-18 15:27:22 +0100
Processing by CollectionsController#add_restaurant as JSON
  Parameters: {"utf8"=>"âœ“", "authenticity_token"=>"cajmPApKUoLTDgL4nYG/B3GUhj8fezKDJZWxee28cyM=", "collection_restaurant"=>{"restaurant_id"=>"1"}, "id"=>"2"}
  [1m[36mUser Load (0.3ms)[0m  [1mSELECT `users`.* FROM `users` WHERE `users`.`id` = 1 LIMIT 1[0m
  [1m[35m (0.5ms)[0m  SELECT COUNT(*) FROM `collection_restaurants` WHERE (collection_id = '2' AND restaurant_id = '1')
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO `collection_restaurants` (`collection_id`, `order`, `restaurant_id`) VALUES (2, NULL, 1)
  [1m[36m (0.6ms)[0m  [1mCOMMIT[0m
  Rendered collections/add_restaurant.json.erb (0.1ms)
Completed 200 OK in 43ms (Views: 32.9ms | ActiveRecord: 1.8ms)


Started GET "/collection/2/edit" for 127.0.0.1 at 2016-01-18 15:27:24 +0100
Processing by CollectionsController#edit_collection as HTML
  Parameters: {"id"=>"2"}
  [1m[35mUser Load (0.5ms)[0m  SELECT `users`.* FROM `users` WHERE `users`.`id` = 1 LIMIT 1
  [1m[36mCollection Load (0.3ms)[0m  [1mSELECT `collections`.* FROM `collections` WHERE `collections`.`id` = 2 LIMIT 1[0m
  [1m[35mCollectionImage Load (0.3ms)[0m  SELECT `collection_images`.* FROM `collection_images` WHERE (collection_id = 2) LIMIT 1
  Rendered collections/_collection_form.html.erb (11.9ms)
  [1m[36mRestaurant Load (5.3ms)[0m  [1mSELECT `restaurants`.* FROM `restaurants` WHERE `restaurants`.`disabled` = 0[0m
  Rendered collections/_collection_restaurants_form.html.erb (73.7ms)
  [1m[35mRestaurant Load (0.3ms)[0m  SELECT `restaurants`.* FROM `restaurants` INNER JOIN `collection_restaurants` ON `restaurants`.`id` = `collection_restaurants`.`restaurant_id` WHERE `collection_restaurants`.`collection_id` = 2
  Rendered collections/_collection_restaurants_list.html.erb (403.5ms)
  Rendered collections/edit_collection.html.erb within layouts/admin (492.9ms)
Completed 500 Internal Server Error in 503ms

ActionView::Template::Error (undefined method `remove_restaurant_collection_path' for #<#<Class:0x007fc25cb846f8>:0x007fc245253118>):
    13:           <td><%= cr.name %></td>
    14:           <td>
    15:             <div class="btn-group btn-group-xs">
    16:               <%= remove_collection_restaurant_button @collection, cr %>
    17:             </div>
    18:           </td>
    19:         </tr>
  app/helpers/collections_helper.rb:27:in `remove_collection_restaurant_button'
  app/views/collections/_collection_restaurants_list.html.erb:16:in `block in _app_views_collections__collection_restaurants_list_html_erb___171350222027666675_70236181795740'
  app/views/collections/_collection_restaurants_list.html.erb:11:in `_app_views_collections__collection_restaurants_list_html_erb___171350222027666675_70236181795740'
  app/views/collections/edit_collection.html.erb:18:in `_app_views_collections_edit_collection_html_erb___2603788858892649966_70236384724960'


  Rendered /Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_dispatch/middleware/templates/rescues/_trace.erb (1.9ms)
  Rendered /Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_dispatch/middleware/templates/rescues/_request_and_response.erb (1.0ms)
  Rendered /Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_dispatch/middleware/templates/rescues/template_error.erb within rescues/layout (44.6ms)


Started GET "/collection/2/edit" for 127.0.0.1 at 2016-01-18 15:27:43 +0100
Processing by CollectionsController#edit_collection as HTML
  Parameters: {"id"=>"2"}
  [1m[36mUser Load (0.4ms)[0m  [1mSELECT `users`.* FROM `users` WHERE `users`.`id` = 1 LIMIT 1[0m
  [1m[35mCollection Load (0.1ms)[0m  SELECT `collections`.* FROM `collections` WHERE `collections`.`id` = 2 LIMIT 1
  [1m[36mCollectionImage Load (0.3ms)[0m  [1mSELECT `collection_images`.* FROM `collection_images` WHERE (collection_id = 2) LIMIT 1[0m
  Rendered collections/_collection_form.html.erb (11.2ms)
  [1m[35mRestaurant Load (3.4ms)[0m  SELECT `restaurants`.* FROM `restaurants` WHERE `restaurants`.`disabled` = 0
  Rendered collections/_collection_restaurants_form.html.erb (249.7ms)
  [1m[36mRestaurant Load (0.5ms)[0m  [1mSELECT `restaurants`.* FROM `restaurants` INNER JOIN `collection_restaurants` ON `restaurants`.`id` = `collection_restaurants`.`restaurant_id` WHERE `collection_restaurants`.`collection_id` = 2[0m
  Rendered collections/_collection_restaurants_list.html.erb (384.9ms)
  Rendered collections/edit_collection.html.erb within layouts/admin (649.6ms)
Completed 500 Internal Server Error in 656ms

ActionView::Template::Error (undefined method `remove_restaurant_collection_path' for #<#<Class:0x007fc25cb846f8>:0x007fc25eac5530>):
    13:           <td><%= cr.name %></td>
    14:           <td>
    15:             <div class="btn-group btn-group-xs">
    16:               <%= remove_collection_restaurant_button @collection, cr %>
    17:             </div>
    18:           </td>
    19:         </tr>
  app/helpers/collections_helper.rb:27:in `remove_collection_restaurant_button'
  app/views/collections/_collection_restaurants_list.html.erb:16:in `block in _app_views_collections__collection_restaurants_list_html_erb___171350222027666675_70236181795740'
  app/views/collections/_collection_restaurants_list.html.erb:11:in `_app_views_collections__collection_restaurants_list_html_erb___171350222027666675_70236181795740'
  app/views/collections/edit_collection.html.erb:18:in `_app_views_collections_edit_collection_html_erb___2603788858892649966_70236384724960'


  Rendered /Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_dispatch/middleware/templates/rescues/_trace.erb (1.9ms)
  Rendered /Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_dispatch/middleware/templates/rescues/_request_and_response.erb (1.0ms)
  Rendered /Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_dispatch/middleware/templates/rescues/template_error.erb within rescues/layout (46.2ms)


Started GET "/collection/2/edit" for 127.0.0.1 at 2016-01-18 15:29:33 +0100
Processing by CollectionsController#edit_collection as HTML
  Parameters: {"id"=>"2"}
  [1m[35mUser Load (0.2ms)[0m  SELECT `users`.* FROM `users` WHERE `users`.`id` = 1 LIMIT 1
  [1m[36mCollection Load (0.1ms)[0m  [1mSELECT `collections`.* FROM `collections` WHERE `collections`.`id` = 2 LIMIT 1[0m
  [1m[35m (0.2ms)[0m  SELECT COUNT(*) FROM `filter_types` WHERE (code = 'features')
  [1m[36m (0.2ms)[0m  [1mSELECT COUNT(*) FROM `filters` WHERE (code = 'offer')[0m
  [1m[35mCollectionImage Load (0.2ms)[0m  SELECT `collection_images`.* FROM `collection_images` WHERE (collection_id = 2) LIMIT 1
  Rendered collections/_collection_form.html.erb (38.0ms)
  [1m[36mRestaurant Load (3.1ms)[0m  [1mSELECT `restaurants`.* FROM `restaurants` WHERE `restaurants`.`disabled` = 0[0m
  Rendered collections/_collection_restaurants_form.html.erb (64.0ms)
  [1m[35mRestaurant Load (0.4ms)[0m  SELECT `restaurants`.* FROM `restaurants` INNER JOIN `collection_restaurants` ON `restaurants`.`id` = `collection_restaurants`.`restaurant_id` WHERE `collection_restaurants`.`collection_id` = 2
  Rendered collections/_collection_restaurants_list.html.erb (3.4ms)
  Rendered collections/edit_collection.html.erb within layouts/admin (108.7ms)
Completed 200 OK in 332ms (Views: 114.1ms | ActiveRecord: 21.4ms)


Started POST "/admin/collections/1/remove_restaurant/1" for 127.0.0.1 at 2016-01-18 15:30:23 +0100
Processing by CollectionsController#remove_restaurant as JS
  Parameters: {"id"=>"1"}
Completed 500 Internal Server Error in 104ms

ActionView::MissingTemplate (Missing template collections/remove_restaurant, application/remove_restaurant with {:locale=>[:en], :formats=>[:js, "application/ecmascript", "application/x-ecmascript", :html, :text, :js, :css, :ics, :csv, :png, :jpeg, :gif, :bmp, :tiff, :mpeg, :xml, :rss, :atom, :yaml, :multipart_form, :url_encoded_form, :json, :pdf, :zip], :handlers=>[:erb, :builder, :coffee, :slim]}. Searched in:
  * "/Users/kevinmuller/halalgems_backend/app/views"
  * "/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/ckeditor-3.7.3/app/views"
  * "/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/devise_mailchimp-0.0.4/app/views"
  * "/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/kaminari-bootstrap-3.0.1/app/views"
  * "/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/bootstrap-kaminari-views-0.0.3/app/views"
  * "/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/kaminari-0.14.1/app/views"
  * "/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/devise-2.0.4/app/views"
):
  actionpack (3.2.8) lib/action_view/path_set.rb:58:in `find'
  actionpack (3.2.8) lib/action_view/lookup_context.rb:109:in `find'
  actionpack (3.2.8) lib/action_view/renderer/abstract_renderer.rb:3:in `find_template'
  actionpack (3.2.8) lib/action_view/renderer/template_renderer.rb:34:in `determine_template'
  newrelic_rpm (3.7.3.204) lib/new_relic/agent/instrumentation/rails3/action_controller.rb:157:in `render_with_newrelic'
  actionpack (3.2.8) lib/action_view/renderer/renderer.rb:36:in `render_template'
  actionpack (3.2.8) lib/action_view/renderer/renderer.rb:17:in `render'
  actionpack (3.2.8) lib/abstract_controller/rendering.rb:110:in `_render_template'
  actionpack (3.2.8) lib/action_controller/metal/streaming.rb:225:in `_render_template'
  actionpack (3.2.8) lib/abstract_controller/rendering.rb:103:in `render_to_body'
  actionpack (3.2.8) lib/action_controller/metal/renderers.rb:28:in `render_to_body'
  actionpack (3.2.8) lib/action_controller/metal/compatibility.rb:50:in `render_to_body'
  actionpack (3.2.8) lib/abstract_controller/rendering.rb:88:in `render'
  actionpack (3.2.8) lib/action_controller/metal/rendering.rb:16:in `render'
  actionpack (3.2.8) lib/action_controller/metal/instrumentation.rb:40:in `block (2 levels) in render'
  activesupport (3.2.8) lib/active_support/core_ext/benchmark.rb:5:in `block in ms'
  /Users/kevinmuller/.rvm/rubies/ruby-2.2.4/lib/ruby/2.2.0/benchmark.rb:303:in `realtime'
  activesupport (3.2.8) lib/active_support/core_ext/benchmark.rb:5:in `ms'
  actionpack (3.2.8) lib/action_controller/metal/instrumentation.rb:40:in `block in render'
  actionpack (3.2.8) lib/action_controller/metal/instrumentation.rb:83:in `cleanup_view_runtime'
  activerecord (3.2.8) lib/active_record/railties/controller_runtime.rb:24:in `cleanup_view_runtime'
  actionpack (3.2.8) lib/action_controller/metal/instrumentation.rb:39:in `render'
  /Users/kevinmuller/.rvm/gems/ruby-2.2.4/bundler/gems/remotipart-aadc29e996c3/lib/remotipart/render_overrides.rb:14:in `render_with_remotipart'
  actionpack (3.2.8) lib/action_controller/metal/implicit_render.rb:10:in `default_render'
  actionpack (3.2.8) lib/action_controller/metal/implicit_render.rb:5:in `send_action'
  actionpack (3.2.8) lib/abstract_controller/base.rb:167:in `process_action'
  actionpack (3.2.8) lib/action_controller/metal/rendering.rb:10:in `process_action'
  actionpack (3.2.8) lib/abstract_controller/callbacks.rb:18:in `block in process_action'
  activesupport (3.2.8) lib/active_support/callbacks.rb:436:in `_run__1878201843038484176__process_action__2209361965910530110__callbacks'
  activesupport (3.2.8) lib/active_support/callbacks.rb:405:in `__run_callback'
  activesupport (3.2.8) lib/active_support/callbacks.rb:385:in `_run_process_action_callbacks'
  activesupport (3.2.8) lib/active_support/callbacks.rb:81:in `run_callbacks'
  actionpack (3.2.8) lib/abstract_controller/callbacks.rb:17:in `process_action'
  actionpack (3.2.8) lib/action_controller/metal/rescue.rb:29:in `process_action'
  actionpack (3.2.8) lib/action_controller/metal/instrumentation.rb:30:in `block in process_action'
  activesupport (3.2.8) lib/active_support/notifications.rb:123:in `block in instrument'
  activesupport (3.2.8) lib/active_support/notifications/instrumenter.rb:20:in `instrument'
  activesupport (3.2.8) lib/active_support/notifications.rb:123:in `instrument'
  actionpack (3.2.8) lib/action_controller/metal/instrumentation.rb:29:in `process_action'
  actionpack (3.2.8) lib/action_controller/metal/params_wrapper.rb:207:in `process_action'
  activerecord (3.2.8) lib/active_record/railties/controller_runtime.rb:18:in `process_action'
  newrelic_rpm (3.7.3.204) lib/new_relic/agent/instrumentation/rails3/action_controller.rb:38:in `block in process_action'
  newrelic_rpm (3.7.3.204) lib/new_relic/agent/instrumentation/controller_instrumentation.rb:335:in `perform_action_with_newrelic_trace'
  newrelic_rpm (3.7.3.204) lib/new_relic/agent/instrumentation/rails3/action_controller.rb:37:in `process_action'
  actionpack (3.2.8) lib/abstract_controller/base.rb:121:in `process'
  actionpack (3.2.8) lib/abstract_controller/rendering.rb:45:in `process'
  actionpack (3.2.8) lib/action_controller/metal.rb:203:in `dispatch'
  actionpack (3.2.8) lib/action_controller/metal/rack_delegation.rb:14:in `dispatch'
  actionpack (3.2.8) lib/action_controller/metal.rb:246:in `block in action'
  actionpack (3.2.8) lib/action_dispatch/routing/route_set.rb:73:in `call'
  actionpack (3.2.8) lib/action_dispatch/routing/route_set.rb:73:in `dispatch'
  actionpack (3.2.8) lib/action_dispatch/routing/route_set.rb:36:in `call'
  journey (1.0.4) lib/journey/router.rb:68:in `block in call'
  journey (1.0.4) lib/journey/router.rb:56:in `each'
  journey (1.0.4) lib/journey/router.rb:56:in `call'
  actionpack (3.2.8) lib/action_dispatch/routing/route_set.rb:600:in `call'
  omniauth (1.1.4) lib/omniauth/strategy.rb:184:in `call!'
  omniauth (1.1.4) lib/omniauth/strategy.rb:164:in `call'
  newrelic_rpm (3.7.3.204) lib/new_relic/rack/error_collector.rb:55:in `call'
  newrelic_rpm (3.7.3.204) lib/new_relic/rack/agent_hooks.rb:32:in `call'
  newrelic_rpm (3.7.3.204) lib/new_relic/rack/browser_monitoring.rb:27:in `call'
  newrelic_rpm (3.7.3.204) lib/new_relic/rack/developer_mode.rb:45:in `call'
  galetahub-simple_captcha (0.1.5) lib/simple_captcha/middleware.rb:20:in `call'
  /Users/kevinmuller/.rvm/gems/ruby-2.2.4/bundler/gems/client_side_validations-a6a515504520/lib/client_side_validations/middleware.rb:21:in `call'
  warden (1.1.1) lib/warden/manager.rb:35:in `block in call'
  warden (1.1.1) lib/warden/manager.rb:34:in `catch'
  warden (1.1.1) lib/warden/manager.rb:34:in `call'
  actionpack (3.2.8) lib/action_dispatch/middleware/best_standards_support.rb:17:in `call'
  rack (1.4.5) lib/rack/etag.rb:23:in `call'
  rack (1.4.5) lib/rack/conditionalget.rb:35:in `call'
  actionpack (3.2.8) lib/action_dispatch/middleware/head.rb:14:in `call'
  /Users/kevinmuller/.rvm/gems/ruby-2.2.4/bundler/gems/remotipart-aadc29e996c3/lib/remotipart/middleware.rb:27:in `call'
  actionpack (3.2.8) lib/action_dispatch/middleware/params_parser.rb:21:in `call'
  actionpack (3.2.8) lib/action_dispatch/middleware/flash.rb:242:in `call'
  rack (1.4.5) lib/rack/session/abstract/id.rb:210:in `context'
  rack (1.4.5) lib/rack/session/abstract/id.rb:205:in `call'
  actionpack (3.2.8) lib/action_dispatch/middleware/cookies.rb:339:in `call'
  dragonfly (0.9.15) lib/dragonfly/cookie_monster.rb:9:in `call'
  activerecord (3.2.8) lib/active_record/query_cache.rb:64:in `call'
  activerecord (3.2.8) lib/active_record/connection_adapters/abstract/connection_pool.rb:473:in `call'
  actionpack (3.2.8) lib/action_dispatch/middleware/callbacks.rb:28:in `block in call'
  activesupport (3.2.8) lib/active_support/callbacks.rb:405:in `_run__1871245027803988066__call__4207201468600934469__callbacks'
  activesupport (3.2.8) lib/active_support/callbacks.rb:405:in `__run_callback'
  activesupport (3.2.8) lib/active_support/callbacks.rb:385:in `_run_call_callbacks'
  activesupport (3.2.8) lib/active_support/callbacks.rb:81:in `run_callbacks'
  actionpack (3.2.8) lib/action_dispatch/middleware/callbacks.rb:27:in `call'
  actionpack (3.2.8) lib/action_dispatch/middleware/reloader.rb:65:in `call'
  actionpack (3.2.8) lib/action_dispatch/middleware/remote_ip.rb:31:in `call'
  actionpack (3.2.8) lib/action_dispatch/middleware/debug_exceptions.rb:16:in `call'
  actionpack (3.2.8) lib/action_dispatch/middleware/show_exceptions.rb:56:in `call'
  railties (3.2.8) lib/rails/rack/logger.rb:26:in `call_app'
  railties (3.2.8) lib/rails/rack/logger.rb:16:in `call'
  quiet_assets (1.0.3) lib/quiet_assets.rb:23:in `call_with_quiet_assets'
  actionpack (3.2.8) lib/action_dispatch/middleware/request_id.rb:22:in `call'
  rack (1.4.5) lib/rack/methodoverride.rb:21:in `call'
  rack (1.4.5) lib/rack/runtime.rb:17:in `call'
  activesupport (3.2.8) lib/active_support/cache/strategy/local_cache.rb:72:in `call'
  rack (1.4.5) lib/rack/lock.rb:15:in `call'
  actionpack (3.2.8) lib/action_dispatch/middleware/static.rb:62:in `call'
  dragonfly (0.9.15) lib/dragonfly/middleware.rb:13:in `call'
  rack-cache (1.2) lib/rack/cache/context.rb:136:in `forward'
  rack-cache (1.2) lib/rack/cache/context.rb:143:in `pass'
  rack-cache (1.2) lib/rack/cache/context.rb:155:in `invalidate'
  rack-cache (1.2) lib/rack/cache/context.rb:71:in `call!'
  rack-cache (1.2) lib/rack/cache/context.rb:51:in `call'
  railties (3.2.8) lib/rails/engine.rb:479:in `call'
  railties (3.2.8) lib/rails/application.rb:223:in `call'
  rack (1.4.5) lib/rack/content_length.rb:14:in `call'
  railties (3.2.8) lib/rails/rack/log_tailer.rb:17:in `call'
  rack (1.4.5) lib/rack/handler/webrick.rb:59:in `service'
  /Users/kevinmuller/.rvm/rubies/ruby-2.2.4/lib/ruby/2.2.0/webrick/httpserver.rb:138:in `service'
  /Users/kevinmuller/.rvm/rubies/ruby-2.2.4/lib/ruby/2.2.0/webrick/httpserver.rb:94:in `run'
  /Users/kevinmuller/.rvm/rubies/ruby-2.2.4/lib/ruby/2.2.0/webrick/server.rb:294:in `block in start_thread'


  Rendered /Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_dispatch/middleware/templates/rescues/missing_template.erb within rescues/layout (0.7ms)


Started GET "/collection/2/edit" for 127.0.0.1 at 2016-01-18 15:31:56 +0100
Processing by CollectionsController#edit_collection as HTML
  Parameters: {"id"=>"2"}
  [1m[36mUser Load (0.2ms)[0m  [1mSELECT `users`.* FROM `users` WHERE `users`.`id` = 1 LIMIT 1[0m
  [1m[35mCollection Load (0.2ms)[0m  SELECT `collections`.* FROM `collections` WHERE `collections`.`id` = 2 LIMIT 1
  [1m[36m (0.2ms)[0m  [1mSELECT COUNT(*) FROM `filter_types` WHERE (code = 'features')[0m
  [1m[35m (0.2ms)[0m  SELECT COUNT(*) FROM `filters` WHERE (code = 'offer')
  [1m[36mCollectionImage Load (0.2ms)[0m  [1mSELECT `collection_images`.* FROM `collection_images` WHERE (collection_id = 2) LIMIT 1[0m
  Rendered collections/_collection_form.html.erb (46.2ms)
  [1m[35mRestaurant Load (3.3ms)[0m  SELECT `restaurants`.* FROM `restaurants` WHERE `restaurants`.`disabled` = 0
  Rendered collections/_collection_restaurants_form.html.erb (92.7ms)
  [1m[36mRestaurant Load (0.6ms)[0m  [1mSELECT `restaurants`.* FROM `restaurants` INNER JOIN `collection_restaurants` ON `restaurants`.`id` = `collection_restaurants`.`restaurant_id` WHERE `collection_restaurants`.`collection_id` = 2[0m
  Rendered collections/_collection_restaurants_list.html.erb (4.1ms)
  Rendered collections/edit_collection.html.erb within layouts/admin (147.0ms)
Completed 200 OK in 418ms (Views: 153.1ms | ActiveRecord: 19.2ms)


Started GET "/collection/2/edit" for 127.0.0.1 at 2016-01-18 15:33:35 +0100
Processing by CollectionsController#edit_collection as HTML
  Parameters: {"id"=>"2"}
  [1m[35mUser Load (0.3ms)[0m  SELECT `users`.* FROM `users` WHERE `users`.`id` = 1 LIMIT 1
  [1m[36mCollection Load (0.2ms)[0m  [1mSELECT `collections`.* FROM `collections` WHERE `collections`.`id` = 2 LIMIT 1[0m
  [1m[35m (0.2ms)[0m  SELECT COUNT(*) FROM `filter_types` WHERE (code = 'features')
  [1m[36m (0.2ms)[0m  [1mSELECT COUNT(*) FROM `filters` WHERE (code = 'offer')[0m
  [1m[35mCollectionImage Load (0.2ms)[0m  SELECT `collection_images`.* FROM `collection_images` WHERE (collection_id = 2) LIMIT 1
  Rendered collections/_collection_form.html.erb (34.7ms)
  [1m[36mRestaurant Load (2.9ms)[0m  [1mSELECT `restaurants`.* FROM `restaurants` WHERE `restaurants`.`disabled` = 0[0m
  Rendered collections/_collection_restaurants_form.html.erb (93.3ms)
  [1m[35mRestaurant Load (0.4ms)[0m  SELECT `restaurants`.* FROM `restaurants` INNER JOIN `collection_restaurants` ON `restaurants`.`id` = `collection_restaurants`.`restaurant_id` WHERE `collection_restaurants`.`collection_id` = 2
  Rendered collections/_collection_restaurants_list.html.erb (3.5ms)
  Rendered collections/edit_collection.html.erb within layouts/admin (134.4ms)
Completed 500 Internal Server Error in 344ms

ActionController::RoutingError (No route matches {:controller=>"collections", :action=>"remove_restaurant", :id=>1}):
  app/helpers/collections_helper.rb:27:in `remove_collection_restaurant_button'
  app/views/collections/_collection_restaurants_list.html.erb:16:in `block in _app_views_collections__collection_restaurants_list_html_erb___171350222027666675_70236330209260'
  app/views/collections/_collection_restaurants_list.html.erb:11:in `_app_views_collections__collection_restaurants_list_html_erb___171350222027666675_70236330209260'
  app/views/collections/edit_collection.html.erb:18:in `_app_views_collections_edit_collection_html_erb___2603788858892649966_70236384724960'


  Rendered /Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_dispatch/middleware/templates/rescues/routing_error.erb within rescues/layout (0.5ms)


Started GET "/collection/2/edit" for 127.0.0.1 at 2016-01-18 15:36:31 +0100
Processing by CollectionsController#edit_collection as HTML
  Parameters: {"id"=>"2"}
  [1m[36mUser Load (0.2ms)[0m  [1mSELECT `users`.* FROM `users` WHERE `users`.`id` = 1 LIMIT 1[0m
  [1m[35mCollection Load (0.2ms)[0m  SELECT `collections`.* FROM `collections` WHERE `collections`.`id` = 2 LIMIT 1
  [1m[36m (0.2ms)[0m  [1mSELECT COUNT(*) FROM `filter_types` WHERE (code = 'features')[0m
  [1m[35m (0.2ms)[0m  SELECT COUNT(*) FROM `filters` WHERE (code = 'offer')
  [1m[36mCollectionImage Load (0.2ms)[0m  [1mSELECT `collection_images`.* FROM `collection_images` WHERE (collection_id = 2) LIMIT 1[0m
  Rendered collections/_collection_form.html.erb (32.9ms)
  [1m[35mRestaurant Load (3.6ms)[0m  SELECT `restaurants`.* FROM `restaurants` WHERE `restaurants`.`disabled` = 0
  Rendered collections/_collection_restaurants_form.html.erb (76.7ms)
  [1m[36mRestaurant Load (0.4ms)[0m  [1mSELECT `restaurants`.* FROM `restaurants` INNER JOIN `collection_restaurants` ON `restaurants`.`id` = `collection_restaurants`.`restaurant_id` WHERE `collection_restaurants`.`collection_id` = 2[0m
  Rendered collections/_collection_restaurants_list.html.erb (4.1ms)
  Rendered collections/edit_collection.html.erb within layouts/admin (116.8ms)
Completed 500 Internal Server Error in 332ms

ActionController::RoutingError (No route matches {:controller=>"collections", :action=>"remove_restaurant", :id=>2}):
  app/helpers/collections_helper.rb:27:in `remove_collection_restaurant_button'
  app/views/collections/_collection_restaurants_list.html.erb:16:in `block in _app_views_collections__collection_restaurants_list_html_erb___171350222027666675_70236331332640'
  app/views/collections/_collection_restaurants_list.html.erb:11:in `_app_views_collections__collection_restaurants_list_html_erb___171350222027666675_70236331332640'
  app/views/collections/edit_collection.html.erb:18:in `_app_views_collections_edit_collection_html_erb___2603788858892649966_70236384724960'


  Rendered /Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_dispatch/middleware/templates/rescues/routing_error.erb within rescues/layout (0.5ms)


Started GET "/collection/2/edit" for 127.0.0.1 at 2016-01-18 15:36:45 +0100
Processing by CollectionsController#edit_collection as HTML
  Parameters: {"id"=>"2"}
  [1m[35mUser Load (0.2ms)[0m  SELECT `users`.* FROM `users` WHERE `users`.`id` = 1 LIMIT 1
  [1m[36mCollection Load (0.2ms)[0m  [1mSELECT `collections`.* FROM `collections` WHERE `collections`.`id` = 2 LIMIT 1[0m
  [1m[35m (0.2ms)[0m  SELECT COUNT(*) FROM `filter_types` WHERE (code = 'features')
  [1m[36m (0.2ms)[0m  [1mSELECT COUNT(*) FROM `filters` WHERE (code = 'offer')[0m
  [1m[35mCollectionImage Load (0.2ms)[0m  SELECT `collection_images`.* FROM `collection_images` WHERE (collection_id = 2) LIMIT 1
  Rendered collections/_collection_form.html.erb (32.3ms)
  [1m[36mRestaurant Load (3.2ms)[0m  [1mSELECT `restaurants`.* FROM `restaurants` WHERE `restaurants`.`disabled` = 0[0m
  Rendered collections/_collection_restaurants_form.html.erb (112.7ms)
  [1m[35mRestaurant Load (0.4ms)[0m  SELECT `restaurants`.* FROM `restaurants` INNER JOIN `collection_restaurants` ON `restaurants`.`id` = `collection_restaurants`.`restaurant_id` WHERE `collection_restaurants`.`collection_id` = 2
  Rendered collections/_collection_restaurants_list.html.erb (3.2ms)
  Rendered collections/edit_collection.html.erb within layouts/admin (151.1ms)
Completed 200 OK in 372ms (Views: 155.5ms | ActiveRecord: 19.7ms)


Started GET "/admin/collections" for 127.0.0.1 at 2016-01-18 15:36:56 +0100
Processing by CollectionsController#index as HTML
  Rendered shared/_restaurant_manage_tabs.html.erb (1.3ms)
  [1m[36mCollection Load (0.3ms)[0m  [1mSELECT `collections`.* FROM `collections` ORDER BY name ASC, created_at DESC LIMIT 12 OFFSET 0[0m
  [1m[35mCollectionImage Load (0.3ms)[0m  SELECT `collection_images`.* FROM `collection_images` WHERE (collection_id = 3) LIMIT 1
  [1m[36mCollectionImage Load (0.2ms)[0m  [1mSELECT `collection_images`.* FROM `collection_images` WHERE (collection_id = 2) LIMIT 1[0m
  [1m[35mCollectionImage Load (0.2ms)[0m  SELECT `collection_images`.* FROM `collection_images` WHERE (collection_id = 5) LIMIT 1
  [1m[36m (0.1ms)[0m  [1mSELECT COUNT(*) FROM `collections` [0m
  Rendered collections/index.erb within layouts/admin (53.7ms)
  [1m[35mUser Load (0.4ms)[0m  SELECT `users`.* FROM `users` WHERE `users`.`id` = 1 LIMIT 1
Completed 200 OK in 88ms (Views: 85.5ms | ActiveRecord: 1.4ms)


Started GET "/collection/5/edit" for 127.0.0.1 at 2016-01-18 15:37:00 +0100
Processing by CollectionsController#edit_collection as HTML
  Parameters: {"id"=>"5"}
  [1m[36mUser Load (0.6ms)[0m  [1mSELECT `users`.* FROM `users` WHERE `users`.`id` = 1 LIMIT 1[0m
  [1m[35mCollection Load (0.2ms)[0m  SELECT `collections`.* FROM `collections` WHERE `collections`.`id` = 5 LIMIT 1
  [1m[36mCollectionImage Load (0.3ms)[0m  [1mSELECT `collection_images`.* FROM `collection_images` WHERE (collection_id = 5) LIMIT 1[0m
  Rendered collections/_collection_form.html.erb (10.3ms)
  [1m[35mRestaurant Load (3.3ms)[0m  SELECT `restaurants`.* FROM `restaurants` WHERE `restaurants`.`disabled` = 0
  Rendered collections/_collection_restaurants_form.html.erb (79.7ms)
  [1m[36mRestaurant Load (0.4ms)[0m  [1mSELECT `restaurants`.* FROM `restaurants` INNER JOIN `collection_restaurants` ON `restaurants`.`id` = `collection_restaurants`.`restaurant_id` WHERE `collection_restaurants`.`collection_id` = 5[0m
  Rendered collections/_collection_restaurants_list.html.erb (2.9ms)
  Rendered collections/edit_collection.html.erb within layouts/admin (96.9ms)
Completed 200 OK in 107ms (Views: 98.6ms | ActiveRecord: 4.8ms)


Started GET "/collection/2/edit" for 127.0.0.1 at 2016-01-18 15:37:03 +0100
Processing by CollectionsController#edit_collection as HTML
  Parameters: {"id"=>"2"}
  [1m[35mUser Load (0.4ms)[0m  SELECT `users`.* FROM `users` WHERE `users`.`id` = 1 LIMIT 1
  [1m[36mCollection Load (0.4ms)[0m  [1mSELECT `collections`.* FROM `collections` WHERE `collections`.`id` = 2 LIMIT 1[0m
  [1m[35mCollectionImage Load (0.4ms)[0m  SELECT `collection_images`.* FROM `collection_images` WHERE (collection_id = 2) LIMIT 1
  Rendered collections/_collection_form.html.erb (15.0ms)
  [1m[36mRestaurant Load (4.0ms)[0m  [1mSELECT `restaurants`.* FROM `restaurants` WHERE `restaurants`.`disabled` = 0[0m
  Rendered collections/_collection_restaurants_form.html.erb (75.8ms)
  [1m[35mRestaurant Load (0.4ms)[0m  SELECT `restaurants`.* FROM `restaurants` INNER JOIN `collection_restaurants` ON `restaurants`.`id` = `collection_restaurants`.`restaurant_id` WHERE `collection_restaurants`.`collection_id` = 2
  Rendered collections/_collection_restaurants_list.html.erb (2.5ms)
  Rendered collections/edit_collection.html.erb within layouts/admin (97.2ms)
Completed 200 OK in 110ms (Views: 99.3ms | ActiveRecord: 5.6ms)


Started GET "/collection/3/edit" for 127.0.0.1 at 2016-01-18 15:37:08 +0100
Processing by CollectionsController#edit_collection as HTML
  Parameters: {"id"=>"3"}
  [1m[36mUser Load (0.3ms)[0m  [1mSELECT `users`.* FROM `users` WHERE `users`.`id` = 1 LIMIT 1[0m
  [1m[35mCollection Load (0.3ms)[0m  SELECT `collections`.* FROM `collections` WHERE `collections`.`id` = 3 LIMIT 1
  [1m[36mCollectionImage Load (0.4ms)[0m  [1mSELECT `collection_images`.* FROM `collection_images` WHERE (collection_id = 3) LIMIT 1[0m
  Rendered collections/_collection_form.html.erb (10.1ms)
  [1m[35mRestaurant Load (3.3ms)[0m  SELECT `restaurants`.* FROM `restaurants` WHERE `restaurants`.`disabled` = 0
  Rendered collections/_collection_restaurants_form.html.erb (133.7ms)
  [1m[36mRestaurant Load (0.4ms)[0m  [1mSELECT `restaurants`.* FROM `restaurants` INNER JOIN `collection_restaurants` ON `restaurants`.`id` = `collection_restaurants`.`restaurant_id` WHERE `collection_restaurants`.`collection_id` = 3[0m
  Rendered collections/_collection_restaurants_list.html.erb (6.1ms)
  Rendered collections/edit_collection.html.erb within layouts/admin (153.4ms)
Completed 200 OK in 167ms (Views: 158.7ms | ActiveRecord: 4.6ms)


Started GET "/collection/3/edit" for 127.0.0.1 at 2016-01-18 15:39:20 +0100
Processing by CollectionsController#edit_collection as HTML
  Parameters: {"id"=>"3"}
  [1m[35mUser Load (0.3ms)[0m  SELECT `users`.* FROM `users` WHERE `users`.`id` = 1 LIMIT 1
  [1m[36mCollection Load (0.2ms)[0m  [1mSELECT `collections`.* FROM `collections` WHERE `collections`.`id` = 3 LIMIT 1[0m
  [1m[35m (0.2ms)[0m  SELECT COUNT(*) FROM `filter_types` WHERE (code = 'features')
  [1m[36m (0.2ms)[0m  [1mSELECT COUNT(*) FROM `filters` WHERE (code = 'offer')[0m
  [1m[35mCollectionImage Load (0.2ms)[0m  SELECT `collection_images`.* FROM `collection_images` WHERE (collection_id = 3) LIMIT 1
  Rendered collections/_collection_form.html.erb (40.3ms)
  [1m[36mRestaurant Load (3.6ms)[0m  [1mSELECT `restaurants`.* FROM `restaurants` WHERE `restaurants`.`disabled` = 0[0m
  Rendered collections/_collection_restaurants_form.html.erb (99.5ms)
  [1m[35mRestaurant Load (0.5ms)[0m  SELECT `restaurants`.* FROM `restaurants` INNER JOIN `collection_restaurants` ON `restaurants`.`id` = `collection_restaurants`.`restaurant_id` WHERE `collection_restaurants`.`collection_id` = 3
  Rendered collections/_collection_restaurants_list.html.erb (3.9ms)
  Rendered collections/edit_collection.html.erb within layouts/admin (147.4ms)
Completed 500 Internal Server Error in 363ms

ActionController::RoutingError (No route matches {:controller=>"collections", :action=>"remove_restaurant", :id=>3}):
  app/helpers/collections_helper.rb:27:in `remove_collection_restaurant_button'
  app/views/collections/_collection_restaurants_list.html.erb:16:in `block in _app_views_collections__collection_restaurants_list_html_erb___171350222027666675_70236331332640'
  app/views/collections/_collection_restaurants_list.html.erb:11:in `_app_views_collections__collection_restaurants_list_html_erb___171350222027666675_70236331332640'
  app/views/collections/edit_collection.html.erb:18:in `_app_views_collections_edit_collection_html_erb___2603788858892649966_70236384724960'


  Rendered /Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_dispatch/middleware/templates/rescues/routing_error.erb within rescues/layout (0.6ms)


Started GET "/collection/3/edit" for 127.0.0.1 at 2016-01-18 15:39:34 +0100
Processing by CollectionsController#edit_collection as HTML
  Parameters: {"id"=>"3"}
  [1m[36mUser Load (0.3ms)[0m  [1mSELECT `users`.* FROM `users` WHERE `users`.`id` = 1 LIMIT 1[0m
  [1m[35mCollection Load (0.3ms)[0m  SELECT `collections`.* FROM `collections` WHERE `collections`.`id` = 3 LIMIT 1
  [1m[36mCollectionImage Load (0.3ms)[0m  [1mSELECT `collection_images`.* FROM `collection_images` WHERE (collection_id = 3) LIMIT 1[0m
  Rendered collections/_collection_form.html.erb (6.9ms)
  [1m[35mRestaurant Load (3.7ms)[0m  SELECT `restaurants`.* FROM `restaurants` WHERE `restaurants`.`disabled` = 0
  Rendered collections/_collection_restaurants_form.html.erb (64.5ms)
  [1m[36mRestaurant Load (0.4ms)[0m  [1mSELECT `restaurants`.* FROM `restaurants` INNER JOIN `collection_restaurants` ON `restaurants`.`id` = `collection_restaurants`.`restaurant_id` WHERE `collection_restaurants`.`collection_id` = 3[0m
  Rendered collections/_collection_restaurants_list.html.erb (3.0ms)
  Rendered collections/edit_collection.html.erb within layouts/admin (77.3ms)
Completed 500 Internal Server Error in 83ms

ActionController::RoutingError (No route matches {:controller=>"collections", :action=>"remove_restaurant", :id=>3}):
  app/helpers/collections_helper.rb:27:in `remove_collection_restaurant_button'
  app/views/collections/_collection_restaurants_list.html.erb:16:in `block in _app_views_collections__collection_restaurants_list_html_erb___171350222027666675_70236331332640'
  app/views/collections/_collection_restaurants_list.html.erb:11:in `_app_views_collections__collection_restaurants_list_html_erb___171350222027666675_70236331332640'
  app/views/collections/edit_collection.html.erb:18:in `_app_views_collections_edit_collection_html_erb___2603788858892649966_70236384724960'


  Rendered /Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_dispatch/middleware/templates/rescues/routing_error.erb within rescues/layout (0.5ms)


Started GET "/collection/3/edit" for 127.0.0.1 at 2016-01-18 15:39:41 +0100
Processing by CollectionsController#edit_collection as HTML
  Parameters: {"id"=>"3"}
  [1m[35mUser Load (0.2ms)[0m  SELECT `users`.* FROM `users` WHERE `users`.`id` = 1 LIMIT 1
  [1m[36mCollection Load (0.2ms)[0m  [1mSELECT `collections`.* FROM `collections` WHERE `collections`.`id` = 3 LIMIT 1[0m
  [1m[35m (0.2ms)[0m  SELECT COUNT(*) FROM `filter_types` WHERE (code = 'features')
  [1m[36m (0.2ms)[0m  [1mSELECT COUNT(*) FROM `filters` WHERE (code = 'offer')[0m
  [1m[35mCollectionImage Load (0.3ms)[0m  SELECT `collection_images`.* FROM `collection_images` WHERE (collection_id = 3) LIMIT 1
  Rendered collections/_collection_form.html.erb (60.2ms)
  [1m[36mRestaurant Load (3.0ms)[0m  [1mSELECT `restaurants`.* FROM `restaurants` WHERE `restaurants`.`disabled` = 0[0m
  Rendered collections/_collection_restaurants_form.html.erb (88.5ms)
  [1m[35mRestaurant Load (0.4ms)[0m  SELECT `restaurants`.* FROM `restaurants` INNER JOIN `collection_restaurants` ON `restaurants`.`id` = `collection_restaurants`.`restaurant_id` WHERE `collection_restaurants`.`collection_id` = 3
  Rendered collections/_collection_restaurants_list.html.erb (4.8ms)
  Rendered collections/edit_collection.html.erb within layouts/admin (156.7ms)
Completed 200 OK in 353ms (Views: 159.6ms | ActiveRecord: 19.7ms)


Started GET "/collection/3/edit" for 127.0.0.1 at 2016-01-18 15:40:16 +0100
Processing by CollectionsController#edit_collection as HTML
  Parameters: {"id"=>"3"}
  [1m[36mUser Load (0.6ms)[0m  [1mSELECT `users`.* FROM `users` WHERE `users`.`id` = 1 LIMIT 1[0m
  [1m[35mCollection Load (0.2ms)[0m  SELECT `collections`.* FROM `collections` WHERE `collections`.`id` = 3 LIMIT 1
  [1m[36mCollectionImage Load (0.3ms)[0m  [1mSELECT `collection_images`.* FROM `collection_images` WHERE (collection_id = 3) LIMIT 1[0m
  Rendered collections/_collection_form.html.erb (10.8ms)
  [1m[35mRestaurant Load (3.7ms)[0m  SELECT `restaurants`.* FROM `restaurants` WHERE `restaurants`.`disabled` = 0
  Rendered collections/_collection_restaurants_form.html.erb (80.9ms)
  [1m[36mRestaurant Load (0.4ms)[0m  [1mSELECT `restaurants`.* FROM `restaurants` INNER JOIN `collection_restaurants` ON `restaurants`.`id` = `collection_restaurants`.`restaurant_id` WHERE `collection_restaurants`.`collection_id` = 3[0m
  Rendered collections/_collection_restaurants_list.html.erb (4.3ms)
  Rendered collections/edit_collection.html.erb within layouts/admin (99.6ms)
Completed 200 OK in 112ms (Views: 102.0ms | ActiveRecord: 5.2ms)


Started GET "/collection/3/edit" for 127.0.0.1 at 2016-01-18 15:51:32 +0100
Processing by CollectionsController#edit_collection as HTML
  Parameters: {"id"=>"3"}
  [1m[35mUser Load (0.2ms)[0m  SELECT `users`.* FROM `users` WHERE `users`.`id` = 1 LIMIT 1
  [1m[36mCollection Load (0.2ms)[0m  [1mSELECT `collections`.* FROM `collections` WHERE `collections`.`id` = 3 LIMIT 1[0m
  [1m[35m (0.6ms)[0m  SELECT COUNT(*) FROM `filter_types` WHERE (code = 'features')
  [1m[36m (0.2ms)[0m  [1mSELECT COUNT(*) FROM `filters` WHERE (code = 'offer')[0m
  [1m[35mCollectionImage Load (0.2ms)[0m  SELECT `collection_images`.* FROM `collection_images` WHERE (collection_id = 3) LIMIT 1
  Rendered collections/_collection_form.html.erb (79.8ms)
  [1m[36mRestaurant Load (3.3ms)[0m  [1mSELECT `restaurants`.* FROM `restaurants` WHERE `restaurants`.`disabled` = 0[0m
  Rendered collections/_collection_restaurants_form.html.erb (87.9ms)
  [1m[35mRestaurant Load (0.5ms)[0m  SELECT `restaurants`.* FROM `restaurants` INNER JOIN `collection_restaurants` ON `restaurants`.`id` = `collection_restaurants`.`restaurant_id` WHERE `collection_restaurants`.`collection_id` = 3
  Rendered collections/_collection_restaurants_list.html.erb (4.7ms)
  Rendered collections/edit_collection.html.erb within layouts/admin (190.0ms)
Completed 500 Internal Server Error in 412ms

ActionController::RoutingError (No route matches {:controller=>"collections", :action=>"remove_restaurant", :id=>#<Collection id: 3, name: "abc", description: "asdfsadf", image_url: nil, created_at: "2016-01-18 01:28:20", updated_at: "2016-01-18 02:32:52", disabled: false>, :collection=>#<Restaurant id: 1, name: "Kebabland", address: "36 College Rd, Harrow on the Hill, Harrow, Middlese...", description: "", phone: "020 8424 9651", email: "info@kebablanduk.co.uk", user_id: nil, deliverable: nil, shisha_allow: nil, disabled: false, created_at: "2012-11-02 07:47:43", updated_at: "2014-12-24 04:09:32", lat: #<BigDecimal:7fc2439de970,'0.515801891E2',18(27)>, lng: #<BigDecimal:7fc2439de8f8,'-0.3359485999 999E0',18(27)>, district: "Middlesex", city: "Harrow", postcode: "HA1 1BE", country: "United Kingdom", direction: "", service_avg: 3.83333, quality_avg: 3.83333, value_avg: 4.33333, rating_avg: 4.16667, price: 1, menu_uid: nil, menu_name: nil, is_owner: nil, contact_note: nil, suggester_name: nil, website: "www.kebablanduk.co.uk", halal_status: "", short_address: "36 College Rd", slug: "kebabland", special_deal: "", facebook_link: nil, twitter_link: nil, pinterest_link: nil, waiting_for_approve_change: false, suggester_email: nil, suggester_phone: nil, request_approve_photo: false, instagram_link: nil>}):
  app/helpers/collections_helper.rb:27:in `remove_collection_restaurant_button'
  app/views/collections/_collection_restaurants_list.html.erb:16:in `block in _app_views_collections__collection_restaurants_list_html_erb___171350222027666675_70236175421680'
  app/views/collections/_collection_restaurants_list.html.erb:11:in `_app_views_collections__collection_restaurants_list_html_erb___171350222027666675_70236175421680'
  app/views/collections/edit_collection.html.erb:18:in `_app_views_collections_edit_collection_html_erb___2603788858892649966_70236384724960'


  Rendered /Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_dispatch/middleware/templates/rescues/routing_error.erb within rescues/layout (0.7ms)


Started GET "/collection/3/edit" for 127.0.0.1 at 2016-01-18 15:51:54 +0100
Processing by CollectionsController#edit_collection as HTML
  Parameters: {"id"=>"3"}
  [1m[36mUser Load (0.3ms)[0m  [1mSELECT `users`.* FROM `users` WHERE `users`.`id` = 1 LIMIT 1[0m
  [1m[35mCollection Load (0.2ms)[0m  SELECT `collections`.* FROM `collections` WHERE `collections`.`id` = 3 LIMIT 1
  [1m[36m (0.2ms)[0m  [1mSELECT COUNT(*) FROM `filter_types` WHERE (code = 'features')[0m
  [1m[35m (0.3ms)[0m  SELECT COUNT(*) FROM `filters` WHERE (code = 'offer')
  [1m[36mCollectionImage Load (0.2ms)[0m  [1mSELECT `collection_images`.* FROM `collection_images` WHERE (collection_id = 3) LIMIT 1[0m
  Rendered collections/_collection_form.html.erb (38.4ms)
  [1m[35mRestaurant Load (3.2ms)[0m  SELECT `restaurants`.* FROM `restaurants` WHERE `restaurants`.`disabled` = 0
  Rendered collections/_collection_restaurants_form.html.erb (112.2ms)
  [1m[36mRestaurant Load (0.4ms)[0m  [1mSELECT `restaurants`.* FROM `restaurants` INNER JOIN `collection_restaurants` ON `restaurants`.`id` = `collection_restaurants`.`restaurant_id` WHERE `collection_restaurants`.`collection_id` = 3[0m
  Rendered collections/_collection_restaurants_list.html.erb (3.8ms)
  Rendered collections/edit_collection.html.erb within layouts/admin (158.6ms)
Completed 200 OK in 367ms (Views: 164.7ms | ActiveRecord: 19.2ms)


Started GET "/collection/2/edit" for 127.0.0.1 at 2016-01-18 15:58:07 +0100
Processing by CollectionsController#edit_collection as HTML
  Parameters: {"id"=>"2"}
  [1m[35mUser Load (0.2ms)[0m  SELECT `users`.* FROM `users` WHERE `users`.`id` = 1 LIMIT 1
  [1m[36mCollection Load (0.2ms)[0m  [1mSELECT `collections`.* FROM `collections` WHERE `collections`.`id` = 2 LIMIT 1[0m
  [1m[35m (0.2ms)[0m  SELECT COUNT(*) FROM `filter_types` WHERE (code = 'features')
  [1m[36m (0.2ms)[0m  [1mSELECT COUNT(*) FROM `filters` WHERE (code = 'offer')[0m
  [1m[35mCollectionImage Load (0.2ms)[0m  SELECT `collection_images`.* FROM `collection_images` WHERE (collection_id = 2) LIMIT 1
  Rendered collections/_collection_form.html.erb (45.7ms)
  [1m[36mRestaurant Load (3.8ms)[0m  [1mSELECT `restaurants`.* FROM `restaurants` WHERE `restaurants`.`disabled` = 0[0m
  Rendered collections/_collection_restaurants_form.html.erb (107.1ms)
  [1m[35mRestaurant Load (0.4ms)[0m  SELECT `restaurants`.* FROM `restaurants` INNER JOIN `collection_restaurants` ON `restaurants`.`id` = `collection_restaurants`.`restaurant_id` WHERE `collection_restaurants`.`collection_id` = 2
  Rendered collections/_collection_restaurants_list.html.erb (4.8ms)
  Rendered collections/edit_collection.html.erb within layouts/admin (181.7ms)
Completed 200 OK in 466ms (Views: 182.0ms | ActiveRecord: 31.5ms)


Started GET "/collection/2/edit" for 127.0.0.1 at 2016-01-18 15:58:50 +0100
Processing by CollectionsController#edit_collection as HTML
  Parameters: {"id"=>"2"}
  [1m[36mUser Load (0.3ms)[0m  [1mSELECT `users`.* FROM `users` WHERE `users`.`id` = 1 LIMIT 1[0m
  [1m[35mCollection Load (0.3ms)[0m  SELECT `collections`.* FROM `collections` WHERE `collections`.`id` = 2 LIMIT 1
  [1m[36m (0.2ms)[0m  [1mSELECT COUNT(*) FROM `filter_types` WHERE (code = 'features')[0m
  [1m[35m (0.2ms)[0m  SELECT COUNT(*) FROM `filters` WHERE (code = 'offer')
  [1m[36mCollectionImage Load (0.2ms)[0m  [1mSELECT `collection_images`.* FROM `collection_images` WHERE (collection_id = 2) LIMIT 1[0m
  Rendered collections/_collection_form.html.erb (41.4ms)
  [1m[35mRestaurant Load (3.8ms)[0m  SELECT `restaurants`.* FROM `restaurants` WHERE `restaurants`.`disabled` = 0
  Rendered collections/_collection_restaurants_form.html.erb (160.0ms)
  [1m[36mRestaurant Load (0.4ms)[0m  [1mSELECT `restaurants`.* FROM `restaurants` INNER JOIN `collection_restaurants` ON `restaurants`.`id` = `collection_restaurants`.`restaurant_id` WHERE `collection_restaurants`.`collection_id` = 2[0m
  Rendered collections/_collection_restaurants_list.html.erb (3.7ms)
  Rendered collections/edit_collection.html.erb within layouts/admin (208.3ms)
Completed 200 OK in 413ms (Views: 212.6ms | ActiveRecord: 19.8ms)


Started GET "/collection/2/edit" for 127.0.0.1 at 2016-01-18 15:59:59 +0100
Processing by CollectionsController#edit_collection as HTML
  Parameters: {"id"=>"2"}
  [1m[35mUser Load (0.3ms)[0m  SELECT `users`.* FROM `users` WHERE `users`.`id` = 1 LIMIT 1
  [1m[36mCollection Load (0.2ms)[0m  [1mSELECT `collections`.* FROM `collections` WHERE `collections`.`id` = 2 LIMIT 1[0m
  [1m[35m (0.2ms)[0m  SELECT COUNT(*) FROM `filter_types` WHERE (code = 'features')
  [1m[36m (0.2ms)[0m  [1mSELECT COUNT(*) FROM `filters` WHERE (code = 'offer')[0m
  [1m[35mCollectionImage Load (0.2ms)[0m  SELECT `collection_images`.* FROM `collection_images` WHERE (collection_id = 2) LIMIT 1
  Rendered collections/_collection_form.html.erb (42.5ms)
  [1m[36mRestaurant Load (3.1ms)[0m  [1mSELECT `restaurants`.* FROM `restaurants` WHERE `restaurants`.`disabled` = 0[0m
  Rendered collections/_collection_restaurants_form.html.erb (104.2ms)
  [1m[35mRestaurant Load (0.4ms)[0m  SELECT `restaurants`.* FROM `restaurants` INNER JOIN `collection_restaurants` ON `restaurants`.`id` = `collection_restaurants`.`restaurant_id` WHERE `collection_restaurants`.`collection_id` = 2
  Rendered collections/_collection_restaurants_list.html.erb (3.6ms)
  Rendered collections/edit_collection.html.erb within layouts/admin (153.5ms)
Completed 200 OK in 349ms (Views: 157.5ms | ActiveRecord: 18.6ms)


Started GET "/collection/2/edit" for 127.0.0.1 at 2016-01-18 16:00:57 +0100
Processing by CollectionsController#edit_collection as HTML
  Parameters: {"id"=>"2"}
  [1m[36mUser Load (0.2ms)[0m  [1mSELECT `users`.* FROM `users` WHERE `users`.`id` = 1 LIMIT 1[0m
  [1m[35mCollection Load (0.2ms)[0m  SELECT `collections`.* FROM `collections` WHERE `collections`.`id` = 2 LIMIT 1
  [1m[36m (0.2ms)[0m  [1mSELECT COUNT(*) FROM `filter_types` WHERE (code = 'features')[0m
  [1m[35m (0.2ms)[0m  SELECT COUNT(*) FROM `filters` WHERE (code = 'offer')
  [1m[36mCollectionImage Load (0.2ms)[0m  [1mSELECT `collection_images`.* FROM `collection_images` WHERE (collection_id = 2) LIMIT 1[0m
  Rendered collections/_collection_form.html.erb (34.0ms)
  [1m[35mRestaurant Load (3.1ms)[0m  SELECT `restaurants`.* FROM `restaurants` WHERE `restaurants`.`disabled` = 0
  Rendered collections/_collection_restaurants_form.html.erb (89.0ms)
  [1m[36mRestaurant Load (0.3ms)[0m  [1mSELECT `restaurants`.* FROM `restaurants` INNER JOIN `collection_restaurants` ON `restaurants`.`id` = `collection_restaurants`.`restaurant_id` WHERE `collection_restaurants`.`collection_id` = 2[0m
  Rendered collections/_collection_restaurants_list.html.erb (3.7ms)
  Rendered collections/edit_collection.html.erb within layouts/admin (130.2ms)
Completed 200 OK in 338ms (Views: 134.9ms | ActiveRecord: 19.2ms)


Started POST "/admin/collections/2/remove_restaurant/1" for 127.0.0.1 at 2016-01-18 16:01:10 +0100
Processing by CollectionsController#remove_restaurant as JS
  Parameters: {"id"=>"2", "restaurant_id"=>"1"}
Completed 500 Internal Server Error in 77ms

ActionView::MissingTemplate (Missing template collections/remove_restaurant, application/remove_restaurant with {:locale=>[:en], :formats=>[:js, "application/ecmascript", "application/x-ecmascript", :html, :text, :js, :css, :ics, :csv, :png, :jpeg, :gif, :bmp, :tiff, :mpeg, :xml, :rss, :atom, :yaml, :multipart_form, :url_encoded_form, :json, :pdf, :zip], :handlers=>[:erb, :builder, :coffee, :slim]}. Searched in:
  * "/Users/kevinmuller/halalgems_backend/app/views"
  * "/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/ckeditor-3.7.3/app/views"
  * "/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/devise_mailchimp-0.0.4/app/views"
  * "/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/kaminari-bootstrap-3.0.1/app/views"
  * "/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/bootstrap-kaminari-views-0.0.3/app/views"
  * "/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/kaminari-0.14.1/app/views"
  * "/Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/devise-2.0.4/app/views"
):
  actionpack (3.2.8) lib/action_view/path_set.rb:58:in `find'
  actionpack (3.2.8) lib/action_view/lookup_context.rb:109:in `find'
  actionpack (3.2.8) lib/action_view/renderer/abstract_renderer.rb:3:in `find_template'
  actionpack (3.2.8) lib/action_view/renderer/template_renderer.rb:34:in `determine_template'
  newrelic_rpm (3.7.3.204) lib/new_relic/agent/instrumentation/rails3/action_controller.rb:157:in `render_with_newrelic'
  actionpack (3.2.8) lib/action_view/renderer/renderer.rb:36:in `render_template'
  actionpack (3.2.8) lib/action_view/renderer/renderer.rb:17:in `render'
  actionpack (3.2.8) lib/abstract_controller/rendering.rb:110:in `_render_template'
  actionpack (3.2.8) lib/action_controller/metal/streaming.rb:225:in `_render_template'
  actionpack (3.2.8) lib/abstract_controller/rendering.rb:103:in `render_to_body'
  actionpack (3.2.8) lib/action_controller/metal/renderers.rb:28:in `render_to_body'
  actionpack (3.2.8) lib/action_controller/metal/compatibility.rb:50:in `render_to_body'
  actionpack (3.2.8) lib/abstract_controller/rendering.rb:88:in `render'
  actionpack (3.2.8) lib/action_controller/metal/rendering.rb:16:in `render'
  actionpack (3.2.8) lib/action_controller/metal/instrumentation.rb:40:in `block (2 levels) in render'
  activesupport (3.2.8) lib/active_support/core_ext/benchmark.rb:5:in `block in ms'
  /Users/kevinmuller/.rvm/rubies/ruby-2.2.4/lib/ruby/2.2.0/benchmark.rb:303:in `realtime'
  activesupport (3.2.8) lib/active_support/core_ext/benchmark.rb:5:in `ms'
  actionpack (3.2.8) lib/action_controller/metal/instrumentation.rb:40:in `block in render'
  actionpack (3.2.8) lib/action_controller/metal/instrumentation.rb:83:in `cleanup_view_runtime'
  activerecord (3.2.8) lib/active_record/railties/controller_runtime.rb:24:in `cleanup_view_runtime'
  actionpack (3.2.8) lib/action_controller/metal/instrumentation.rb:39:in `render'
  /Users/kevinmuller/.rvm/gems/ruby-2.2.4/bundler/gems/remotipart-aadc29e996c3/lib/remotipart/render_overrides.rb:14:in `render_with_remotipart'
  actionpack (3.2.8) lib/action_controller/metal/implicit_render.rb:10:in `default_render'
  actionpack (3.2.8) lib/action_controller/metal/implicit_render.rb:5:in `send_action'
  actionpack (3.2.8) lib/abstract_controller/base.rb:167:in `process_action'
  actionpack (3.2.8) lib/action_controller/metal/rendering.rb:10:in `process_action'
  actionpack (3.2.8) lib/abstract_controller/callbacks.rb:18:in `block in process_action'
  activesupport (3.2.8) lib/active_support/callbacks.rb:436:in `_run__1878201843038484176__process_action__2209361965910530110__callbacks'
  activesupport (3.2.8) lib/active_support/callbacks.rb:405:in `__run_callback'
  activesupport (3.2.8) lib/active_support/callbacks.rb:385:in `_run_process_action_callbacks'
  activesupport (3.2.8) lib/active_support/callbacks.rb:81:in `run_callbacks'
  actionpack (3.2.8) lib/abstract_controller/callbacks.rb:17:in `process_action'
  actionpack (3.2.8) lib/action_controller/metal/rescue.rb:29:in `process_action'
  actionpack (3.2.8) lib/action_controller/metal/instrumentation.rb:30:in `block in process_action'
  activesupport (3.2.8) lib/active_support/notifications.rb:123:in `block in instrument'
  activesupport (3.2.8) lib/active_support/notifications/instrumenter.rb:20:in `instrument'
  activesupport (3.2.8) lib/active_support/notifications.rb:123:in `instrument'
  actionpack (3.2.8) lib/action_controller/metal/instrumentation.rb:29:in `process_action'
  actionpack (3.2.8) lib/action_controller/metal/params_wrapper.rb:207:in `process_action'
  activerecord (3.2.8) lib/active_record/railties/controller_runtime.rb:18:in `process_action'
  newrelic_rpm (3.7.3.204) lib/new_relic/agent/instrumentation/rails3/action_controller.rb:38:in `block in process_action'
  newrelic_rpm (3.7.3.204) lib/new_relic/agent/instrumentation/controller_instrumentation.rb:335:in `perform_action_with_newrelic_trace'
  newrelic_rpm (3.7.3.204) lib/new_relic/agent/instrumentation/rails3/action_controller.rb:37:in `process_action'
  actionpack (3.2.8) lib/abstract_controller/base.rb:121:in `process'
  actionpack (3.2.8) lib/abstract_controller/rendering.rb:45:in `process'
  actionpack (3.2.8) lib/action_controller/metal.rb:203:in `dispatch'
  actionpack (3.2.8) lib/action_controller/metal/rack_delegation.rb:14:in `dispatch'
  actionpack (3.2.8) lib/action_controller/metal.rb:246:in `block in action'
  actionpack (3.2.8) lib/action_dispatch/routing/route_set.rb:73:in `call'
  actionpack (3.2.8) lib/action_dispatch/routing/route_set.rb:73:in `dispatch'
  actionpack (3.2.8) lib/action_dispatch/routing/route_set.rb:36:in `call'
  journey (1.0.4) lib/journey/router.rb:68:in `block in call'
  journey (1.0.4) lib/journey/router.rb:56:in `each'
  journey (1.0.4) lib/journey/router.rb:56:in `call'
  actionpack (3.2.8) lib/action_dispatch/routing/route_set.rb:600:in `call'
  omniauth (1.1.4) lib/omniauth/strategy.rb:184:in `call!'
  omniauth (1.1.4) lib/omniauth/strategy.rb:164:in `call'
  newrelic_rpm (3.7.3.204) lib/new_relic/rack/error_collector.rb:55:in `call'
  newrelic_rpm (3.7.3.204) lib/new_relic/rack/agent_hooks.rb:32:in `call'
  newrelic_rpm (3.7.3.204) lib/new_relic/rack/browser_monitoring.rb:27:in `call'
  newrelic_rpm (3.7.3.204) lib/new_relic/rack/developer_mode.rb:45:in `call'
  galetahub-simple_captcha (0.1.5) lib/simple_captcha/middleware.rb:20:in `call'
  /Users/kevinmuller/.rvm/gems/ruby-2.2.4/bundler/gems/client_side_validations-a6a515504520/lib/client_side_validations/middleware.rb:21:in `call'
  warden (1.1.1) lib/warden/manager.rb:35:in `block in call'
  warden (1.1.1) lib/warden/manager.rb:34:in `catch'
  warden (1.1.1) lib/warden/manager.rb:34:in `call'
  actionpack (3.2.8) lib/action_dispatch/middleware/best_standards_support.rb:17:in `call'
  rack (1.4.5) lib/rack/etag.rb:23:in `call'
  rack (1.4.5) lib/rack/conditionalget.rb:35:in `call'
  actionpack (3.2.8) lib/action_dispatch/middleware/head.rb:14:in `call'
  /Users/kevinmuller/.rvm/gems/ruby-2.2.4/bundler/gems/remotipart-aadc29e996c3/lib/remotipart/middleware.rb:27:in `call'
  actionpack (3.2.8) lib/action_dispatch/middleware/params_parser.rb:21:in `call'
  actionpack (3.2.8) lib/action_dispatch/middleware/flash.rb:242:in `call'
  rack (1.4.5) lib/rack/session/abstract/id.rb:210:in `context'
  rack (1.4.5) lib/rack/session/abstract/id.rb:205:in `call'
  actionpack (3.2.8) lib/action_dispatch/middleware/cookies.rb:339:in `call'
  dragonfly (0.9.15) lib/dragonfly/cookie_monster.rb:9:in `call'
  activerecord (3.2.8) lib/active_record/query_cache.rb:64:in `call'
  activerecord (3.2.8) lib/active_record/connection_adapters/abstract/connection_pool.rb:473:in `call'
  actionpack (3.2.8) lib/action_dispatch/middleware/callbacks.rb:28:in `block in call'
  activesupport (3.2.8) lib/active_support/callbacks.rb:405:in `_run__1871245027803988066__call__4207201468600934469__callbacks'
  activesupport (3.2.8) lib/active_support/callbacks.rb:405:in `__run_callback'
  activesupport (3.2.8) lib/active_support/callbacks.rb:385:in `_run_call_callbacks'
  activesupport (3.2.8) lib/active_support/callbacks.rb:81:in `run_callbacks'
  actionpack (3.2.8) lib/action_dispatch/middleware/callbacks.rb:27:in `call'
  actionpack (3.2.8) lib/action_dispatch/middleware/reloader.rb:65:in `call'
  actionpack (3.2.8) lib/action_dispatch/middleware/remote_ip.rb:31:in `call'
  actionpack (3.2.8) lib/action_dispatch/middleware/debug_exceptions.rb:16:in `call'
  actionpack (3.2.8) lib/action_dispatch/middleware/show_exceptions.rb:56:in `call'
  railties (3.2.8) lib/rails/rack/logger.rb:26:in `call_app'
  railties (3.2.8) lib/rails/rack/logger.rb:16:in `call'
  quiet_assets (1.0.3) lib/quiet_assets.rb:23:in `call_with_quiet_assets'
  actionpack (3.2.8) lib/action_dispatch/middleware/request_id.rb:22:in `call'
  rack (1.4.5) lib/rack/methodoverride.rb:21:in `call'
  rack (1.4.5) lib/rack/runtime.rb:17:in `call'
  activesupport (3.2.8) lib/active_support/cache/strategy/local_cache.rb:72:in `call'
  rack (1.4.5) lib/rack/lock.rb:15:in `call'
  actionpack (3.2.8) lib/action_dispatch/middleware/static.rb:62:in `call'
  dragonfly (0.9.15) lib/dragonfly/middleware.rb:13:in `call'
  rack-cache (1.2) lib/rack/cache/context.rb:136:in `forward'
  rack-cache (1.2) lib/rack/cache/context.rb:143:in `pass'
  rack-cache (1.2) lib/rack/cache/context.rb:155:in `invalidate'
  rack-cache (1.2) lib/rack/cache/context.rb:71:in `call!'
  rack-cache (1.2) lib/rack/cache/context.rb:51:in `call'
  railties (3.2.8) lib/rails/engine.rb:479:in `call'
  railties (3.2.8) lib/rails/application.rb:223:in `call'
  rack (1.4.5) lib/rack/content_length.rb:14:in `call'
  railties (3.2.8) lib/rails/rack/log_tailer.rb:17:in `call'
  rack (1.4.5) lib/rack/handler/webrick.rb:59:in `service'
  /Users/kevinmuller/.rvm/rubies/ruby-2.2.4/lib/ruby/2.2.0/webrick/httpserver.rb:138:in `service'
  /Users/kevinmuller/.rvm/rubies/ruby-2.2.4/lib/ruby/2.2.0/webrick/httpserver.rb:94:in `run'
  /Users/kevinmuller/.rvm/rubies/ruby-2.2.4/lib/ruby/2.2.0/webrick/server.rb:294:in `block in start_thread'


  Rendered /Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_dispatch/middleware/templates/rescues/missing_template.erb within rescues/layout (0.9ms)


Started GET "/collection/2/edit" for 127.0.0.1 at 2016-01-18 16:11:29 +0100
Processing by CollectionsController#edit_collection as HTML
  Parameters: {"id"=>"2"}
  [1m[35mUser Load (0.3ms)[0m  SELECT `users`.* FROM `users` WHERE `users`.`id` = 1 LIMIT 1
  [1m[36mCollection Load (0.2ms)[0m  [1mSELECT `collections`.* FROM `collections` WHERE `collections`.`id` = 2 LIMIT 1[0m
  [1m[35m (0.3ms)[0m  SELECT COUNT(*) FROM `filter_types` WHERE (code = 'features')
  [1m[36m (0.2ms)[0m  [1mSELECT COUNT(*) FROM `filters` WHERE (code = 'offer')[0m
  [1m[35mCollectionImage Load (0.2ms)[0m  SELECT `collection_images`.* FROM `collection_images` WHERE (collection_id = 2) LIMIT 1
  Rendered collections/_collection_form.html.erb (50.0ms)
  [1m[36mRestaurant Load (3.7ms)[0m  [1mSELECT `restaurants`.* FROM `restaurants` WHERE `restaurants`.`disabled` = 0[0m
  Rendered collections/_collection_restaurants_form.html.erb (134.6ms)
  [1m[35mRestaurant Load (0.4ms)[0m  SELECT `restaurants`.* FROM `restaurants` INNER JOIN `collection_restaurants` ON `restaurants`.`id` = `collection_restaurants`.`restaurant_id` WHERE `collection_restaurants`.`collection_id` = 2
  Rendered collections/_collection_restaurants_list.html.erb (3.2ms)
  Rendered collections/edit_collection.html.erb within layouts/admin (212.9ms)
Completed 200 OK in 581ms (Views: 222.1ms | ActiveRecord: 20.3ms)


Started POST "/admin/collections/2/remove_restaurant/1" for 127.0.0.1 at 2016-01-18 16:11:34 +0100
Processing by CollectionsController#remove_restaurant as JS
  Parameters: {"id"=>"2", "restaurant_id"=>"1"}
Completed 500 Internal Server Error in 7ms

NameError (undefined local variable or method `param' for #<CollectionsController:0x007fc262472d28>):
  app/controllers/collections_controller.rb:229:in `remove_restaurant'


  Rendered /Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_dispatch/middleware/templates/rescues/_trace.erb (1.7ms)
  Rendered /Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_dispatch/middleware/templates/rescues/_request_and_response.erb (1.3ms)
  Rendered /Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_dispatch/middleware/templates/rescues/diagnostics.erb within rescues/layout (50.6ms)


Started GET "/collection/2/edit" for 127.0.0.1 at 2016-01-18 16:11:36 +0100
Processing by CollectionsController#edit_collection as HTML
  Parameters: {"id"=>"2"}
  [1m[36mUser Load (0.4ms)[0m  [1mSELECT `users`.* FROM `users` WHERE `users`.`id` = 1 LIMIT 1[0m
  [1m[35mCollection Load (0.1ms)[0m  SELECT `collections`.* FROM `collections` WHERE `collections`.`id` = 2 LIMIT 1
  [1m[36mCollectionImage Load (0.3ms)[0m  [1mSELECT `collection_images`.* FROM `collection_images` WHERE (collection_id = 2) LIMIT 1[0m
  Rendered collections/_collection_form.html.erb (10.6ms)
  [1m[35mRestaurant Load (6.3ms)[0m  SELECT `restaurants`.* FROM `restaurants` WHERE `restaurants`.`disabled` = 0
  Rendered collections/_collection_restaurants_form.html.erb (102.6ms)
  [1m[36mRestaurant Load (0.4ms)[0m  [1mSELECT `restaurants`.* FROM `restaurants` INNER JOIN `collection_restaurants` ON `restaurants`.`id` = `collection_restaurants`.`restaurant_id` WHERE `collection_restaurants`.`collection_id` = 2[0m
  Rendered collections/_collection_restaurants_list.html.erb (2.5ms)
  Rendered collections/edit_collection.html.erb within layouts/admin (119.0ms)
Completed 200 OK in 130ms (Views: 119.2ms | ActiveRecord: 7.5ms)


Started POST "/admin/collections/2/remove_restaurant/1" for 127.0.0.1 at 2016-01-18 16:11:45 +0100
Processing by CollectionsController#remove_restaurant as JS
  Parameters: {"id"=>"2", "restaurant_id"=>"1"}
Completed 500 Internal Server Error in 5ms

NameError (undefined local variable or method `param' for #<CollectionsController:0x007fc244e26dd8>):
  app/controllers/collections_controller.rb:229:in `remove_restaurant'


  Rendered /Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_dispatch/middleware/templates/rescues/_trace.erb (1.5ms)
  Rendered /Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_dispatch/middleware/templates/rescues/_request_and_response.erb (3.0ms)
  Rendered /Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_dispatch/middleware/templates/rescues/diagnostics.erb within rescues/layout (63.3ms)


Started POST "/admin/collections/2/remove_restaurant/1" for 127.0.0.1 at 2016-01-18 16:12:07 +0100
Processing by CollectionsController#remove_restaurant as JS
  Parameters: {"id"=>"2", "restaurant_id"=>"1"}
  [1m[35mCollection Load (0.2ms)[0m  SELECT `collections`.* FROM `collections` WHERE `collections`.`id` = 2 LIMIT 1
Completed 500 Internal Server Error in 35ms

NameError (undefined local variable or method `param' for #<CollectionsController:0x007fc261440810>):
  app/controllers/collections_controller.rb:232:in `block in remove_restaurant'
  app/controllers/collections_controller.rb:230:in `remove_restaurant'


  Rendered /Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_dispatch/middleware/templates/rescues/_trace.erb (1.4ms)
  Rendered /Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_dispatch/middleware/templates/rescues/_request_and_response.erb (0.9ms)
  Rendered /Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_dispatch/middleware/templates/rescues/diagnostics.erb within rescues/layout (55.5ms)


Started POST "/admin/collections/2/remove_restaurant/1" for 127.0.0.1 at 2016-01-18 16:12:34 +0100
Processing by CollectionsController#remove_restaurant as JS
  Parameters: {"id"=>"2", "restaurant_id"=>"1"}
  [1m[36mCollection Load (0.2ms)[0m  [1mSELECT `collections`.* FROM `collections` WHERE `collections`.`id` = 2 LIMIT 1[0m
  [1m[35m (0.2ms)[0m  SELECT COUNT(*) FROM `filter_types` WHERE (code = 'features')
  [1m[36m (0.4ms)[0m  [1mSELECT COUNT(*) FROM `filters` WHERE (code = 'offer')[0m
  [1m[35mRestaurant Load (0.3ms)[0m  SELECT `restaurants`.* FROM `restaurants` INNER JOIN `collection_restaurants` ON `restaurants`.`id` = `collection_restaurants`.`restaurant_id` WHERE `collection_restaurants`.`collection_id` = 2 AND `restaurants`.`slug` = '1' LIMIT 1
  [1m[36mRestaurant Load (0.3ms)[0m  [1mSELECT `restaurants`.* FROM `restaurants` INNER JOIN `collection_restaurants` ON `restaurants`.`id` = `collection_restaurants`.`restaurant_id` WHERE `collection_restaurants`.`collection_id` = 2 AND `restaurants`.`id` = 1 LIMIT 1[0m
Completed 500 Internal Server Error in 236ms

NameError (undefined local variable or method `category' for #<CollectionsController:0x007fc25cb34518>):
  app/controllers/collections_controller.rb:235:in `block in remove_restaurant'
  app/controllers/collections_controller.rb:230:in `remove_restaurant'


  Rendered /Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_dispatch/middleware/templates/rescues/_trace.erb (1.4ms)
  Rendered /Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_dispatch/middleware/templates/rescues/_request_and_response.erb (1.9ms)
  Rendered /Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_dispatch/middleware/templates/rescues/diagnostics.erb within rescues/layout (54.9ms)


Started POST "/admin/collections/2/remove_restaurant/1" for 127.0.0.1 at 2016-01-18 16:13:26 +0100
Processing by CollectionsController#remove_restaurant as JS
  Parameters: {"id"=>"2", "restaurant_id"=>"1"}
  [1m[35mCollection Load (0.2ms)[0m  SELECT `collections`.* FROM `collections` WHERE `collections`.`id` = 2 LIMIT 1
  [1m[36m (0.2ms)[0m  [1mSELECT COUNT(*) FROM `filter_types` WHERE (code = 'features')[0m
  [1m[35m (0.3ms)[0m  SELECT COUNT(*) FROM `filters` WHERE (code = 'offer')
  [1m[36mRestaurant Load (0.3ms)[0m  [1mSELECT `restaurants`.* FROM `restaurants` INNER JOIN `collection_restaurants` ON `restaurants`.`id` = `collection_restaurants`.`restaurant_id` WHERE `collection_restaurants`.`collection_id` = 2 AND `restaurants`.`slug` = '1' LIMIT 1[0m
  [1m[35mRestaurant Load (0.3ms)[0m  SELECT `restaurants`.* FROM `restaurants` INNER JOIN `collection_restaurants` ON `restaurants`.`id` = `collection_restaurants`.`restaurant_id` WHERE `collection_restaurants`.`collection_id` = 2 AND `restaurants`.`id` = 1 LIMIT 1
Completed 500 Internal Server Error in 255ms

ArgumentError (wrong number of arguments (1 for 0)):
  app/controllers/collections_controller.rb:235:in `block in remove_restaurant'
  app/controllers/collections_controller.rb:230:in `remove_restaurant'


  Rendered /Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_dispatch/middleware/templates/rescues/_trace.erb (1.2ms)
  Rendered /Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_dispatch/middleware/templates/rescues/_request_and_response.erb (0.9ms)
  Rendered /Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_dispatch/middleware/templates/rescues/diagnostics.erb within rescues/layout (42.1ms)


Started POST "/admin/collections/2/remove_restaurant/1" for 127.0.0.1 at 2016-01-18 16:14:16 +0100
Processing by CollectionsController#remove_restaurant as JS
  Parameters: {"id"=>"2", "restaurant_id"=>"1"}
  [1m[36mCollection Load (0.2ms)[0m  [1mSELECT `collections`.* FROM `collections` WHERE `collections`.`id` = 2 LIMIT 1[0m
  [1m[35m (0.2ms)[0m  SELECT COUNT(*) FROM `filter_types` WHERE (code = 'features')
  [1m[36m (0.3ms)[0m  [1mSELECT COUNT(*) FROM `filters` WHERE (code = 'offer')[0m
  [1m[35mRestaurant Load (0.3ms)[0m  SELECT `restaurants`.* FROM `restaurants` INNER JOIN `collection_restaurants` ON `restaurants`.`id` = `collection_restaurants`.`restaurant_id` WHERE `collection_restaurants`.`collection_id` = 2 AND `restaurants`.`slug` = '1' LIMIT 1
  [1m[36mRestaurant Load (0.2ms)[0m  [1mSELECT `restaurants`.* FROM `restaurants` INNER JOIN `collection_restaurants` ON `restaurants`.`id` = `collection_restaurants`.`restaurant_id` WHERE `collection_restaurants`.`collection_id` = 2 AND `restaurants`.`id` = 1 LIMIT 1[0m
  [1m[35m (0.1ms)[0m  BEGIN
  [1m[36m (0.3ms)[0m  [1mDELETE FROM `collection_restaurants` WHERE `collection_restaurants`.`collection_id` = 2 AND `collection_restaurants`.`restaurant_id` IN (1)[0m
  [1m[35m (9.5ms)[0m  COMMIT
Completed 500 Internal Server Error in 226ms

ArgumentError (too few arguments):
  app/controllers/collections_controller.rb:242:in `format'
  app/controllers/collections_controller.rb:242:in `remove_restaurant'


  Rendered /Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_dispatch/middleware/templates/rescues/_trace.erb (1.1ms)
  Rendered /Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_dispatch/middleware/templates/rescues/_request_and_response.erb (0.8ms)
  Rendered /Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_dispatch/middleware/templates/rescues/diagnostics.erb within rescues/layout (43.6ms)


Started GET "/collection/2/edit" for 127.0.0.1 at 2016-01-18 16:14:21 +0100
Processing by CollectionsController#edit_collection as HTML
  Parameters: {"id"=>"2"}
  [1m[36mUser Load (0.3ms)[0m  [1mSELECT `users`.* FROM `users` WHERE `users`.`id` = 1 LIMIT 1[0m
  [1m[35mCollection Load (0.3ms)[0m  SELECT `collections`.* FROM `collections` WHERE `collections`.`id` = 2 LIMIT 1
  [1m[36mCollectionImage Load (0.2ms)[0m  [1mSELECT `collection_images`.* FROM `collection_images` WHERE (collection_id = 2) LIMIT 1[0m
  Rendered collections/_collection_form.html.erb (49.4ms)
  [1m[35mRestaurant Load (3.4ms)[0m  SELECT `restaurants`.* FROM `restaurants` WHERE `restaurants`.`disabled` = 0
  Rendered collections/_collection_restaurants_form.html.erb (72.2ms)
  [1m[36mRestaurant Load (0.3ms)[0m  [1mSELECT `restaurants`.* FROM `restaurants` INNER JOIN `collection_restaurants` ON `restaurants`.`id` = `collection_restaurants`.`restaurant_id` WHERE `collection_restaurants`.`collection_id` = 2[0m
  Rendered collections/_collection_restaurants_list.html.erb (1.8ms)
  Rendered collections/edit_collection.html.erb within layouts/admin (145.8ms)
Completed 200 OK in 350ms (Views: 158.8ms | ActiveRecord: 12.4ms)


Started POST "/admin/collections/add_restaurant/2" for 127.0.0.1 at 2016-01-18 16:14:25 +0100
Processing by CollectionsController#add_restaurant as JSON
  Parameters: {"utf8"=>"âœ“", "authenticity_token"=>"cajmPApKUoLTDgL4nYG/B3GUhj8fezKDJZWxee28cyM=", "collection_restaurant"=>{"restaurant_id"=>"1"}, "id"=>"2"}
  [1m[35mUser Load (0.3ms)[0m  SELECT `users`.* FROM `users` WHERE `users`.`id` = 1 LIMIT 1
  [1m[36m (5.5ms)[0m  [1mSELECT COUNT(*) FROM `collection_restaurants` WHERE (collection_id = '2' AND restaurant_id = '1')[0m
  [1m[35m (0.1ms)[0m  BEGIN
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO `collection_restaurants` (`collection_id`, `order`, `restaurant_id`) VALUES (2, NULL, 1)[0m
  [1m[35m (0.6ms)[0m  COMMIT
  Rendered collections/add_restaurant.json.erb (0.1ms)
Completed 200 OK in 71ms (Views: 34.8ms | ActiveRecord: 6.8ms)


Started GET "/collection/2/edit" for 127.0.0.1 at 2016-01-18 16:14:27 +0100
Processing by CollectionsController#edit_collection as HTML
  Parameters: {"id"=>"2"}
  [1m[36mUser Load (1.0ms)[0m  [1mSELECT `users`.* FROM `users` WHERE `users`.`id` = 1 LIMIT 1[0m
  [1m[35mCollection Load (0.4ms)[0m  SELECT `collections`.* FROM `collections` WHERE `collections`.`id` = 2 LIMIT 1
  [1m[36mCollectionImage Load (0.5ms)[0m  [1mSELECT `collection_images`.* FROM `collection_images` WHERE (collection_id = 2) LIMIT 1[0m
  Rendered collections/_collection_form.html.erb (15.9ms)
  [1m[35mRestaurant Load (4.1ms)[0m  SELECT `restaurants`.* FROM `restaurants` WHERE `restaurants`.`disabled` = 0
  Rendered collections/_collection_restaurants_form.html.erb (108.4ms)
  [1m[36mRestaurant Load (0.4ms)[0m  [1mSELECT `restaurants`.* FROM `restaurants` INNER JOIN `collection_restaurants` ON `restaurants`.`id` = `collection_restaurants`.`restaurant_id` WHERE `collection_restaurants`.`collection_id` = 2[0m
  Rendered collections/_collection_restaurants_list.html.erb (2.6ms)
  Rendered collections/edit_collection.html.erb within layouts/admin (132.3ms)
Completed 200 OK in 146ms (Views: 134.1ms | ActiveRecord: 6.4ms)


Started POST "/admin/collections/2/remove_restaurant/1" for 127.0.0.1 at 2016-01-18 16:14:36 +0100
Processing by CollectionsController#remove_restaurant as JS
  Parameters: {"id"=>"2", "restaurant_id"=>"1"}
  [1m[35mCollection Load (1.4ms)[0m  SELECT `collections`.* FROM `collections` WHERE `collections`.`id` = 2 LIMIT 1
  [1m[36mRestaurant Load (0.7ms)[0m  [1mSELECT `restaurants`.* FROM `restaurants` INNER JOIN `collection_restaurants` ON `restaurants`.`id` = `collection_restaurants`.`restaurant_id` WHERE `collection_restaurants`.`collection_id` = 2 AND `restaurants`.`slug` = '1' LIMIT 1[0m
  [1m[35mRestaurant Load (1.4ms)[0m  SELECT `restaurants`.* FROM `restaurants` INNER JOIN `collection_restaurants` ON `restaurants`.`id` = `collection_restaurants`.`restaurant_id` WHERE `collection_restaurants`.`collection_id` = 2 AND `restaurants`.`id` = 1 LIMIT 1
  [1m[36m (0.4ms)[0m  [1mBEGIN[0m
  [1m[35m (0.6ms)[0m  DELETE FROM `collection_restaurants` WHERE `collection_restaurants`.`collection_id` = 2 AND `collection_restaurants`.`restaurant_id` IN (1)
  [1m[36m (3.0ms)[0m  [1mCOMMIT[0m
Completed 500 Internal Server Error in 19ms

ArgumentError (too few arguments):
  app/controllers/collections_controller.rb:242:in `format'
  app/controllers/collections_controller.rb:242:in `remove_restaurant'


  Rendered /Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_dispatch/middleware/templates/rescues/_trace.erb (2.3ms)
  Rendered /Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_dispatch/middleware/templates/rescues/_request_and_response.erb (2.1ms)
  Rendered /Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_dispatch/middleware/templates/rescues/diagnostics.erb within rescues/layout (73.9ms)


Started POST "/admin/collections/add_restaurant/2" for 127.0.0.1 at 2016-01-18 16:16:02 +0100
Processing by CollectionsController#add_restaurant as JSON
  Parameters: {"utf8"=>"âœ“", "authenticity_token"=>"cajmPApKUoLTDgL4nYG/B3GUhj8fezKDJZWxee28cyM=", "collection_restaurant"=>{"restaurant_id"=>"1"}, "id"=>"2"}
  [1m[35mUser Load (0.2ms)[0m  SELECT `users`.* FROM `users` WHERE `users`.`id` = 1 LIMIT 1
  [1m[36m (0.2ms)[0m  [1mSELECT COUNT(*) FROM `collection_restaurants` WHERE (collection_id = '2' AND restaurant_id = '1')[0m
  [1m[35m (0.1ms)[0m  BEGIN
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO `collection_restaurants` (`collection_id`, `order`, `restaurant_id`) VALUES (2, NULL, 1)[0m
  [1m[35m (0.5ms)[0m  COMMIT
Completed 200 OK in 130ms (Views: 0.1ms | ActiveRecord: 5.4ms)


Started GET "/collection/2/edit" for 127.0.0.1 at 2016-01-18 16:16:05 +0100
Processing by CollectionsController#edit_collection as HTML
  Parameters: {"id"=>"2"}
  [1m[36mUser Load (0.4ms)[0m  [1mSELECT `users`.* FROM `users` WHERE `users`.`id` = 1 LIMIT 1[0m
  [1m[35mCollection Load (0.7ms)[0m  SELECT `collections`.* FROM `collections` WHERE `collections`.`id` = 2 LIMIT 1
  [1m[36m (0.2ms)[0m  [1mSELECT COUNT(*) FROM `filter_types` WHERE (code = 'features')[0m
  [1m[35m (0.2ms)[0m  SELECT COUNT(*) FROM `filters` WHERE (code = 'offer')
  [1m[36mCollectionImage Load (0.2ms)[0m  [1mSELECT `collection_images`.* FROM `collection_images` WHERE (collection_id = 2) LIMIT 1[0m
  Rendered collections/_collection_form.html.erb (64.9ms)
  [1m[35mRestaurant Load (3.2ms)[0m  SELECT `restaurants`.* FROM `restaurants` WHERE `restaurants`.`disabled` = 0
  Rendered collections/_collection_restaurants_form.html.erb (99.2ms)
  [1m[36mRestaurant Load (0.5ms)[0m  [1mSELECT `restaurants`.* FROM `restaurants` INNER JOIN `collection_restaurants` ON `restaurants`.`id` = `collection_restaurants`.`restaurant_id` WHERE `collection_restaurants`.`collection_id` = 2[0m
  Rendered collections/_collection_restaurants_list.html.erb (3.2ms)
  Rendered collections/edit_collection.html.erb within layouts/admin (188.4ms)
Completed 200 OK in 392ms (Views: 209.1ms | ActiveRecord: 16.3ms)


Started GET "/collection/2/edit" for 127.0.0.1 at 2016-01-18 16:16:23 +0100
Processing by CollectionsController#edit_collection as HTML
  Parameters: {"id"=>"2"}
  [1m[35mUser Load (0.2ms)[0m  SELECT `users`.* FROM `users` WHERE `users`.`id` = 1 LIMIT 1
  [1m[36mCollection Load (0.2ms)[0m  [1mSELECT `collections`.* FROM `collections` WHERE `collections`.`id` = 2 LIMIT 1[0m
  [1m[35m (0.2ms)[0m  SELECT COUNT(*) FROM `filter_types` WHERE (code = 'features')
  [1m[36m (0.2ms)[0m  [1mSELECT COUNT(*) FROM `filters` WHERE (code = 'offer')[0m
  [1m[35mCollectionImage Load (0.2ms)[0m  SELECT `collection_images`.* FROM `collection_images` WHERE (collection_id = 2) LIMIT 1
  Rendered collections/_collection_form.html.erb (46.2ms)
  [1m[36mRestaurant Load (2.9ms)[0m  [1mSELECT `restaurants`.* FROM `restaurants` WHERE `restaurants`.`disabled` = 0[0m
  Rendered collections/_collection_restaurants_form.html.erb (136.1ms)
  [1m[35mRestaurant Load (0.4ms)[0m  SELECT `restaurants`.* FROM `restaurants` INNER JOIN `collection_restaurants` ON `restaurants`.`id` = `collection_restaurants`.`restaurant_id` WHERE `collection_restaurants`.`collection_id` = 2
  Rendered collections/_collection_restaurants_list.html.erb (4.1ms)
  Rendered collections/edit_collection.html.erb within layouts/admin (190.7ms)
Completed 200 OK in 482ms (Views: 196.0ms | ActiveRecord: 19.7ms)


Started POST "/admin/collections/add_restaurant/2" for 127.0.0.1 at 2016-01-18 16:16:27 +0100
Processing by CollectionsController#add_restaurant as JSON
  Parameters: {"utf8"=>"âœ“", "authenticity_token"=>"cajmPApKUoLTDgL4nYG/B3GUhj8fezKDJZWxee28cyM=", "collection_restaurant"=>{"restaurant_id"=>"1"}, "id"=>"2"}
  [1m[36mUser Load (0.4ms)[0m  [1mSELECT `users`.* FROM `users` WHERE `users`.`id` = 1 LIMIT 1[0m
  [1m[35m (1.1ms)[0m  SELECT COUNT(*) FROM `collection_restaurants` WHERE (collection_id = '2' AND restaurant_id = '1')
  Rendered collections/add_restaurant.json.erb (0.1ms)
Completed 200 OK in 50ms (Views: 42.8ms | ActiveRecord: 1.5ms)


Started GET "/collection/2/edit" for 127.0.0.1 at 2016-01-18 16:16:31 +0100
Processing by CollectionsController#edit_collection as HTML
  Parameters: {"id"=>"2"}
  [1m[36mUser Load (0.3ms)[0m  [1mSELECT `users`.* FROM `users` WHERE `users`.`id` = 1 LIMIT 1[0m
  [1m[35mCollection Load (0.2ms)[0m  SELECT `collections`.* FROM `collections` WHERE `collections`.`id` = 2 LIMIT 1
  [1m[36mCollectionImage Load (0.3ms)[0m  [1mSELECT `collection_images`.* FROM `collection_images` WHERE (collection_id = 2) LIMIT 1[0m
  Rendered collections/_collection_form.html.erb (9.7ms)
  [1m[35mRestaurant Load (6.4ms)[0m  SELECT `restaurants`.* FROM `restaurants` WHERE `restaurants`.`disabled` = 0
  Rendered collections/_collection_restaurants_form.html.erb (111.5ms)
  [1m[36mRestaurant Load (0.4ms)[0m  [1mSELECT `restaurants`.* FROM `restaurants` INNER JOIN `collection_restaurants` ON `restaurants`.`id` = `collection_restaurants`.`restaurant_id` WHERE `collection_restaurants`.`collection_id` = 2[0m
  Rendered collections/_collection_restaurants_list.html.erb (2.5ms)
  Rendered collections/edit_collection.html.erb within layouts/admin (127.0ms)
Completed 200 OK in 137ms (Views: 126.0ms | ActiveRecord: 7.6ms)


Started POST "/admin/collections/2/remove_restaurant/1" for 127.0.0.1 at 2016-01-18 16:16:37 +0100
Processing by CollectionsController#remove_restaurant as JS
  Parameters: {"id"=>"2", "restaurant_id"=>"1"}
  [1m[35mCollection Load (1.7ms)[0m  SELECT `collections`.* FROM `collections` WHERE `collections`.`id` = 2 LIMIT 1
  [1m[36mRestaurant Load (1.0ms)[0m  [1mSELECT `restaurants`.* FROM `restaurants` INNER JOIN `collection_restaurants` ON `restaurants`.`id` = `collection_restaurants`.`restaurant_id` WHERE `collection_restaurants`.`collection_id` = 2 AND `restaurants`.`slug` = '1' LIMIT 1[0m
  [1m[35mRestaurant Load (0.8ms)[0m  SELECT `restaurants`.* FROM `restaurants` INNER JOIN `collection_restaurants` ON `restaurants`.`id` = `collection_restaurants`.`restaurant_id` WHERE `collection_restaurants`.`collection_id` = 2 AND `restaurants`.`id` = 1 LIMIT 1
  [1m[36m (0.5ms)[0m  [1mBEGIN[0m
  [1m[35m (0.6ms)[0m  DELETE FROM `collection_restaurants` WHERE `collection_restaurants`.`collection_id` = 2 AND `collection_restaurants`.`restaurant_id` IN (1)
  [1m[36m (0.5ms)[0m  [1mCOMMIT[0m
Redirected to http://localhost:3000/collection/2/edit
Completed 302 Found in 17ms (ActiveRecord: 4.9ms)


Started GET "/collection/2/edit" for 127.0.0.1 at 2016-01-18 16:16:37 +0100
Processing by CollectionsController#edit_collection as JS
  Parameters: {"id"=>"2"}
  [1m[35mUser Load (0.6ms)[0m  SELECT `users`.* FROM `users` WHERE `users`.`id` = 1 LIMIT 1
  [1m[36mCollection Load (0.6ms)[0m  [1mSELECT `collections`.* FROM `collections` WHERE `collections`.`id` = 2 LIMIT 1[0m
  [1m[35mCollectionImage Load (0.4ms)[0m  SELECT `collection_images`.* FROM `collection_images` WHERE (collection_id = 2) LIMIT 1
  Rendered collections/_collection_form.html.erb (10.8ms)
  [1m[36mRestaurant Load (3.8ms)[0m  [1mSELECT `restaurants`.* FROM `restaurants` WHERE `restaurants`.`disabled` = 0[0m
  Rendered collections/_collection_restaurants_form.html.erb (85.7ms)
  [1m[35mRestaurant Load (0.3ms)[0m  SELECT `restaurants`.* FROM `restaurants` INNER JOIN `collection_restaurants` ON `restaurants`.`id` = `collection_restaurants`.`restaurant_id` WHERE `collection_restaurants`.`collection_id` = 2
  Rendered collections/_collection_restaurants_list.html.erb (1.9ms)
  Rendered collections/edit_collection.html.erb within layouts/admin (102.8ms)
Completed 200 OK in 130ms (Views: 119.6ms | ActiveRecord: 5.7ms)


Started GET "/collection/2/edit" for 127.0.0.1 at 2016-01-18 16:16:40 +0100
Processing by CollectionsController#edit_collection as HTML
  Parameters: {"id"=>"2"}
  [1m[36mUser Load (0.3ms)[0m  [1mSELECT `users`.* FROM `users` WHERE `users`.`id` = 1 LIMIT 1[0m
  [1m[35mCollection Load (0.3ms)[0m  SELECT `collections`.* FROM `collections` WHERE `collections`.`id` = 2 LIMIT 1
  [1m[36mCollectionImage Load (0.3ms)[0m  [1mSELECT `collection_images`.* FROM `collection_images` WHERE (collection_id = 2) LIMIT 1[0m
  Rendered collections/_collection_form.html.erb (8.4ms)
  [1m[35mRestaurant Load (3.7ms)[0m  SELECT `restaurants`.* FROM `restaurants` WHERE `restaurants`.`disabled` = 0
  Rendered collections/_collection_restaurants_form.html.erb (136.0ms)
  [1m[36mRestaurant Load (0.3ms)[0m  [1mSELECT `restaurants`.* FROM `restaurants` INNER JOIN `collection_restaurants` ON `restaurants`.`id` = `collection_restaurants`.`restaurant_id` WHERE `collection_restaurants`.`collection_id` = 2[0m
  Rendered collections/_collection_restaurants_list.html.erb (1.9ms)
  Rendered collections/edit_collection.html.erb within layouts/admin (150.2ms)
Completed 200 OK in 167ms (Views: 155.2ms | ActiveRecord: 5.0ms)


Started GET "/collection/2/edit" for 127.0.0.1 at 2016-01-18 16:26:08 +0100
Processing by CollectionsController#edit_collection as HTML
  Parameters: {"id"=>"2"}
  [1m[35mUser Load (0.3ms)[0m  SELECT `users`.* FROM `users` WHERE `users`.`id` = 1 LIMIT 1
  [1m[36mCollection Load (0.2ms)[0m  [1mSELECT `collections`.* FROM `collections` WHERE `collections`.`id` = 2 LIMIT 1[0m
  [1m[35m (0.2ms)[0m  SELECT COUNT(*) FROM `filter_types` WHERE (code = 'features')
  [1m[36m (0.2ms)[0m  [1mSELECT COUNT(*) FROM `filters` WHERE (code = 'offer')[0m
  [1m[35mCollectionImage Load (0.2ms)[0m  SELECT `collection_images`.* FROM `collection_images` WHERE (collection_id = 2) LIMIT 1
  Rendered collections/_collection_form.html.erb (86.6ms)
  [1m[36mRestaurant Load (4.1ms)[0m  [1mSELECT `restaurants`.* FROM `restaurants` WHERE `restaurants`.`disabled` = 0[0m
  Rendered collections/_collection_restaurants_form.html.erb (170.4ms)
  [1m[35mRestaurant Load (0.4ms)[0m  SELECT `restaurants`.* FROM `restaurants` INNER JOIN `collection_restaurants` ON `restaurants`.`id` = `collection_restaurants`.`restaurant_id` WHERE `collection_restaurants`.`collection_id` = 2
  Rendered collections/_collection_restaurants_list.html.erb (5.1ms)
  Rendered collections/edit_collection.html.erb within layouts/admin (267.1ms)
Completed 200 OK in 629ms (Views: 279.4ms | ActiveRecord: 21.2ms)


Started POST "/admin/collections/add_restaurant/2" for 127.0.0.1 at 2016-01-18 16:26:13 +0100
Processing by CollectionsController#add_restaurant as */*
  Parameters: {"utf8"=>"âœ“", "authenticity_token"=>"cajmPApKUoLTDgL4nYG/B3GUhj8fezKDJZWxee28cyM=", "collection_restaurant"=>{"restaurant_id"=>"1"}, "id"=>"2"}
  [1m[36mUser Load (3.3ms)[0m  [1mSELECT `users`.* FROM `users` WHERE `users`.`id` = 1 LIMIT 1[0m
  [1m[35mCollection Load (0.9ms)[0m  SELECT `collections`.* FROM `collections` WHERE `collections`.`id` = 2 LIMIT 1
  [1m[36mRestaurant Load (1.1ms)[0m  [1mSELECT `restaurants`.* FROM `restaurants` INNER JOIN `collection_restaurants` ON `restaurants`.`id` = `collection_restaurants`.`restaurant_id` WHERE `collection_restaurants`.`collection_id` = 2 AND `restaurants`.`slug` = '1' LIMIT 1[0m
  [1m[35mRestaurant Load (0.4ms)[0m  SELECT `restaurants`.* FROM `restaurants` INNER JOIN `collection_restaurants` ON `restaurants`.`id` = `collection_restaurants`.`restaurant_id` WHERE `collection_restaurants`.`collection_id` = 2 AND `restaurants`.`id` = 1 LIMIT 1
Completed 500 Internal Server Error in 19ms

ActiveRecord::RecordNotFound (Couldn't find Restaurant with id=1 [WHERE `collection_restaurants`.`collection_id` = 2]):
  app/controllers/collections_controller.rb:203:in `add_restaurant'


  Rendered /Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_dispatch/middleware/templates/rescues/_trace.erb (0.9ms)
  Rendered /Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_dispatch/middleware/templates/rescues/_request_and_response.erb (1.3ms)
  Rendered /Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_dispatch/middleware/templates/rescues/diagnostics.erb within rescues/layout (45.6ms)


Started GET "/collection/2/edit" for 127.0.0.1 at 2016-01-18 16:28:34 +0100
Processing by CollectionsController#edit_collection as HTML
  Parameters: {"id"=>"2"}
  [1m[36mUser Load (0.3ms)[0m  [1mSELECT `users`.* FROM `users` WHERE `users`.`id` = 1 LIMIT 1[0m
  [1m[35mCollection Load (0.1ms)[0m  SELECT `collections`.* FROM `collections` WHERE `collections`.`id` = 2 LIMIT 1
  [1m[36mCollectionImage Load (1.1ms)[0m  [1mSELECT `collection_images`.* FROM `collection_images` WHERE (collection_id = 2) LIMIT 1[0m
  Rendered collections/_collection_form.html.erb (11.0ms)
  [1m[35mRestaurant Load (4.1ms)[0m  SELECT `restaurants`.* FROM `restaurants` WHERE `restaurants`.`disabled` = 0
  Rendered collections/_collection_restaurants_form.html.erb (121.3ms)
  [1m[36mRestaurant Load (0.4ms)[0m  [1mSELECT `restaurants`.* FROM `restaurants` INNER JOIN `collection_restaurants` ON `restaurants`.`id` = `collection_restaurants`.`restaurant_id` WHERE `collection_restaurants`.`collection_id` = 2[0m
  Rendered collections/_collection_restaurants_list.html.erb (2.0ms)
  Rendered collections/edit_collection.html.erb within layouts/admin (154.7ms)
Completed 200 OK in 188ms (Views: 178.9ms | ActiveRecord: 6.0ms)


Started POST "/admin/collections/add_restaurant/2" for 127.0.0.1 at 2016-01-18 16:28:44 +0100
Processing by CollectionsController#add_restaurant as */*
  Parameters: {"utf8"=>"âœ“", "authenticity_token"=>"cajmPApKUoLTDgL4nYG/B3GUhj8fezKDJZWxee28cyM=", "collection_restaurant"=>{"restaurant_id"=>"1"}, "id"=>"2"}
  [1m[35mUser Load (1.6ms)[0m  SELECT `users`.* FROM `users` WHERE `users`.`id` = 1 LIMIT 1
  [1m[36mCollection Load (0.4ms)[0m  [1mSELECT `collections`.* FROM `collections` WHERE `collections`.`id` = 2 LIMIT 1[0m
  [1m[35mRestaurant Load (0.5ms)[0m  SELECT `restaurants`.* FROM `restaurants` INNER JOIN `collection_restaurants` ON `restaurants`.`id` = `collection_restaurants`.`restaurant_id` WHERE `collection_restaurants`.`collection_id` = 2 AND `restaurants`.`slug` = '1' LIMIT 1
  [1m[36mRestaurant Load (2.6ms)[0m  [1mSELECT `restaurants`.* FROM `restaurants` INNER JOIN `collection_restaurants` ON `restaurants`.`id` = `collection_restaurants`.`restaurant_id` WHERE `collection_restaurants`.`collection_id` = 2 AND `restaurants`.`id` = 1 LIMIT 1[0m
Completed 500 Internal Server Error in 21ms

ActiveRecord::RecordNotFound (Couldn't find Restaurant with id=1 [WHERE `collection_restaurants`.`collection_id` = 2]):
  app/controllers/collections_controller.rb:203:in `add_restaurant'


  Rendered /Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_dispatch/middleware/templates/rescues/_trace.erb (2.7ms)
  Rendered /Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_dispatch/middleware/templates/rescues/_request_and_response.erb (2.4ms)
  Rendered /Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_dispatch/middleware/templates/rescues/diagnostics.erb within rescues/layout (64.2ms)


Started GET "/collection/2/edit" for 127.0.0.1 at 2016-01-18 16:35:51 +0100
Processing by CollectionsController#edit_collection as HTML
  Parameters: {"id"=>"2"}
  [1m[35mUser Load (0.4ms)[0m  SELECT `users`.* FROM `users` WHERE `users`.`id` = 1 LIMIT 1
  [1m[36mCollection Load (0.2ms)[0m  [1mSELECT `collections`.* FROM `collections` WHERE `collections`.`id` = 2 LIMIT 1[0m
  [1m[35m (0.3ms)[0m  SELECT COUNT(*) FROM `filter_types` WHERE (code = 'features')
  [1m[36m (0.2ms)[0m  [1mSELECT COUNT(*) FROM `filters` WHERE (code = 'offer')[0m
  [1m[35mCollectionImage Load (0.2ms)[0m  SELECT `collection_images`.* FROM `collection_images` WHERE (collection_id = 2) LIMIT 1
  Rendered collections/_collection_form.html.erb (52.6ms)
  [1m[36mRestaurant Load (3.2ms)[0m  [1mSELECT `restaurants`.* FROM `restaurants` WHERE `restaurants`.`disabled` = 0[0m
  Rendered collections/_collection_restaurants_form.html.erb (101.9ms)
  [1m[35mRestaurant Load (0.4ms)[0m  SELECT `restaurants`.* FROM `restaurants` INNER JOIN `collection_restaurants` ON `restaurants`.`id` = `collection_restaurants`.`restaurant_id` WHERE `collection_restaurants`.`collection_id` = 2
  Rendered collections/_collection_restaurants_list.html.erb (2.9ms)
  Rendered collections/edit_collection.html.erb within layouts/admin (178.9ms)
Completed 200 OK in 501ms (Views: 193.4ms | ActiveRecord: 20.4ms)


Started POST "/admin/collections/add_restaurant/2" for 127.0.0.1 at 2016-01-18 16:35:56 +0100
Processing by CollectionsController#add_restaurant as */*
  Parameters: {"utf8"=>"âœ“", "authenticity_token"=>"cajmPApKUoLTDgL4nYG/B3GUhj8fezKDJZWxee28cyM=", "collection_restaurant"=>{"restaurant_id"=>"1"}, "id"=>"2"}
  [1m[36mUser Load (0.5ms)[0m  [1mSELECT `users`.* FROM `users` WHERE `users`.`id` = 1 LIMIT 1[0m
  [1m[35mCollection Load (0.9ms)[0m  SELECT `collections`.* FROM `collections` WHERE `collections`.`id` = 2 LIMIT 1
Completed 500 Internal Server Error in 37ms

NameError (uninitialized constant CollectionsController::Restaurants):
  app/controllers/collections_controller.rb:208:in `add_restaurant'


  Rendered /Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_dispatch/middleware/templates/rescues/_trace.erb (2.5ms)
  Rendered /Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_dispatch/middleware/templates/rescues/_request_and_response.erb (2.1ms)
  Rendered /Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_dispatch/middleware/templates/rescues/diagnostics.erb within rescues/layout (55.9ms)


Started GET "/collection/2/edit" for 127.0.0.1 at 2016-01-18 16:36:11 +0100
Processing by CollectionsController#edit_collection as HTML
  Parameters: {"id"=>"2"}
  [1m[36mUser Load (0.4ms)[0m  [1mSELECT `users`.* FROM `users` WHERE `users`.`id` = 1 LIMIT 1[0m
  [1m[35mCollection Load (0.2ms)[0m  SELECT `collections`.* FROM `collections` WHERE `collections`.`id` = 2 LIMIT 1
  [1m[36mCollectionImage Load (0.3ms)[0m  [1mSELECT `collection_images`.* FROM `collection_images` WHERE (collection_id = 2) LIMIT 1[0m
  Rendered collections/_collection_form.html.erb (17.7ms)
  [1m[35mRestaurant Load (4.4ms)[0m  SELECT `restaurants`.* FROM `restaurants` WHERE `restaurants`.`disabled` = 0
  Rendered collections/_collection_restaurants_form.html.erb (152.9ms)
  [1m[36mRestaurant Load (0.4ms)[0m  [1mSELECT `restaurants`.* FROM `restaurants` INNER JOIN `collection_restaurants` ON `restaurants`.`id` = `collection_restaurants`.`restaurant_id` WHERE `collection_restaurants`.`collection_id` = 2[0m
  Rendered collections/_collection_restaurants_list.html.erb (2.9ms)
  Rendered collections/edit_collection.html.erb within layouts/admin (178.3ms)
Completed 200 OK in 190ms (Views: 180.0ms | ActiveRecord: 5.6ms)


Started POST "/admin/collections/add_restaurant/2" for 127.0.0.1 at 2016-01-18 16:36:16 +0100
Processing by CollectionsController#add_restaurant as */*
  Parameters: {"utf8"=>"âœ“", "authenticity_token"=>"cajmPApKUoLTDgL4nYG/B3GUhj8fezKDJZWxee28cyM=", "collection_restaurant"=>{"restaurant_id"=>"1"}, "id"=>"2"}
  [1m[35mUser Load (5.5ms)[0m  SELECT `users`.* FROM `users` WHERE `users`.`id` = 1 LIMIT 1
  [1m[36mCollection Load (1.9ms)[0m  [1mSELECT `collections`.* FROM `collections` WHERE `collections`.`id` = 2 LIMIT 1[0m
Completed 500 Internal Server Error in 18ms

NameError (uninitialized constant CollectionsController::Restaurants):
  app/controllers/collections_controller.rb:208:in `add_restaurant'


  Rendered /Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_dispatch/middleware/templates/rescues/_trace.erb (2.2ms)
  Rendered /Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_dispatch/middleware/templates/rescues/_request_and_response.erb (1.9ms)
  Rendered /Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_dispatch/middleware/templates/rescues/diagnostics.erb within rescues/layout (50.9ms)


Started GET "/collection/2/edit" for 127.0.0.1 at 2016-01-18 16:36:40 +0100
Processing by CollectionsController#edit_collection as HTML
  Parameters: {"id"=>"2"}
  [1m[35mUser Load (0.3ms)[0m  SELECT `users`.* FROM `users` WHERE `users`.`id` = 1 LIMIT 1
  [1m[36mCollection Load (0.2ms)[0m  [1mSELECT `collections`.* FROM `collections` WHERE `collections`.`id` = 2 LIMIT 1[0m
  [1m[35m (0.2ms)[0m  SELECT COUNT(*) FROM `filter_types` WHERE (code = 'features')
  [1m[36m (0.2ms)[0m  [1mSELECT COUNT(*) FROM `filters` WHERE (code = 'offer')[0m
  [1m[35mCollectionImage Load (0.2ms)[0m  SELECT `collection_images`.* FROM `collection_images` WHERE (collection_id = 2) LIMIT 1
  Rendered collections/_collection_form.html.erb (64.1ms)
  [1m[36mRestaurant Load (3.2ms)[0m  [1mSELECT `restaurants`.* FROM `restaurants` WHERE `restaurants`.`disabled` = 0[0m
  Rendered collections/_collection_restaurants_form.html.erb (108.9ms)
  [1m[35mRestaurant Load (0.3ms)[0m  SELECT `restaurants`.* FROM `restaurants` INNER JOIN `collection_restaurants` ON `restaurants`.`id` = `collection_restaurants`.`restaurant_id` WHERE `collection_restaurants`.`collection_id` = 2
  Rendered collections/_collection_restaurants_list.html.erb (2.6ms)
  Rendered collections/edit_collection.html.erb within layouts/admin (196.5ms)
Completed 200 OK in 578ms (Views: 207.2ms | ActiveRecord: 30.7ms)


Started POST "/admin/collections/add_restaurant/2" for 127.0.0.1 at 2016-01-18 16:36:45 +0100
Processing by CollectionsController#add_restaurant as */*
  Parameters: {"utf8"=>"âœ“", "authenticity_token"=>"cajmPApKUoLTDgL4nYG/B3GUhj8fezKDJZWxee28cyM=", "collection_restaurant"=>{"restaurant_id"=>"1"}, "id"=>"2"}
  [1m[36mUser Load (0.7ms)[0m  [1mSELECT `users`.* FROM `users` WHERE `users`.`id` = 1 LIMIT 1[0m
  [1m[35mCollection Load (1.1ms)[0m  SELECT `collections`.* FROM `collections` WHERE `collections`.`id` = 2 LIMIT 1
Completed 500 Internal Server Error in 10ms

ActiveRecord::RecordNotFound (Couldn't find Restaurant without an ID):
  app/controllers/collections_controller.rb:208:in `add_restaurant'


  Rendered /Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_dispatch/middleware/templates/rescues/_trace.erb (2.8ms)
  Rendered /Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_dispatch/middleware/templates/rescues/_request_and_response.erb (1.6ms)
  Rendered /Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_dispatch/middleware/templates/rescues/diagnostics.erb within rescues/layout (58.6ms)


Started GET "/collection/2/edit" for 127.0.0.1 at 2016-01-18 16:37:13 +0100
Processing by CollectionsController#edit_collection as HTML
  Parameters: {"id"=>"2"}
  [1m[36mUser Load (0.2ms)[0m  [1mSELECT `users`.* FROM `users` WHERE `users`.`id` = 1 LIMIT 1[0m
  [1m[35mCollection Load (0.2ms)[0m  SELECT `collections`.* FROM `collections` WHERE `collections`.`id` = 2 LIMIT 1
  [1m[36m (0.2ms)[0m  [1mSELECT COUNT(*) FROM `filter_types` WHERE (code = 'features')[0m
  [1m[35m (0.2ms)[0m  SELECT COUNT(*) FROM `filters` WHERE (code = 'offer')
  [1m[36mCollectionImage Load (0.4ms)[0m  [1mSELECT `collection_images`.* FROM `collection_images` WHERE (collection_id = 2) LIMIT 1[0m
  Rendered collections/_collection_form.html.erb (61.0ms)
  [1m[35mRestaurant Load (3.2ms)[0m  SELECT `restaurants`.* FROM `restaurants` WHERE `restaurants`.`disabled` = 0
  Rendered collections/_collection_restaurants_form.html.erb (114.9ms)
  [1m[36mRestaurant Load (0.3ms)[0m  [1mSELECT `restaurants`.* FROM `restaurants` INNER JOIN `collection_restaurants` ON `restaurants`.`id` = `collection_restaurants`.`restaurant_id` WHERE `collection_restaurants`.`collection_id` = 2[0m
  Rendered collections/_collection_restaurants_list.html.erb (2.3ms)
  Rendered collections/edit_collection.html.erb within layouts/admin (181.5ms)
Completed 200 OK in 483ms (Views: 187.0ms | ActiveRecord: 22.1ms)


Started POST "/admin/collections/add_restaurant/2" for 127.0.0.1 at 2016-01-18 16:37:18 +0100
Processing by CollectionsController#add_restaurant as */*
  Parameters: {"utf8"=>"âœ“", "authenticity_token"=>"cajmPApKUoLTDgL4nYG/B3GUhj8fezKDJZWxee28cyM=", "collection_restaurant"=>{"restaurant_id"=>"1"}, "id"=>"2"}
  [1m[35mUser Load (1.0ms)[0m  SELECT `users`.* FROM `users` WHERE `users`.`id` = 1 LIMIT 1
  [1m[36mCollection Load (0.6ms)[0m  [1mSELECT `collections`.* FROM `collections` WHERE `collections`.`id` = 2 LIMIT 1[0m
  [1m[35mRestaurant Load (1.6ms)[0m  SELECT `restaurants`.* FROM `restaurants` WHERE `restaurants`.`slug` = '1' LIMIT 1
  [1m[36mRestaurant Load (1.1ms)[0m  [1mSELECT `restaurants`.* FROM `restaurants` WHERE `restaurants`.`id` = 1 LIMIT 1[0m
  [1m[35m (0.3ms)[0m  BEGIN
  [1m[36m (0.5ms)[0m  [1mINSERT INTO `collection_restaurants` (`collection_id`, `restaurant_id`) VALUES (2, 1)[0m
  [1m[35m (0.6ms)[0m  COMMIT
  Rendered collections/_collection_restaurants_list.html.erb within layouts/admin (2.8ms)
Completed 500 Internal Server Error in 65ms

ActionView::Template::Error (undefined method `each' for nil:NilClass):
    8:     </tr>
    9:     </thead>
    10:     <tbody>
    11:     <% @collection_restaurants.each do |cr| %>
    12:         <tr>
    13:           <td><%= cr.name %></td>
    14:           <td>
  app/views/collections/_collection_restaurants_list.html.erb:11:in `_app_views_collections__collection_restaurants_list_html_erb___171350222027666675_70236333561200'
  app/controllers/collections_controller.rb:219:in `add_restaurant'


  Rendered /Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_dispatch/middleware/templates/rescues/_trace.erb (1.9ms)
  Rendered /Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_dispatch/middleware/templates/rescues/_request_and_response.erb (2.1ms)
  Rendered /Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_dispatch/middleware/templates/rescues/template_error.erb within rescues/layout (57.5ms)


Started GET "/collection/2/edit" for 127.0.0.1 at 2016-01-18 16:37:57 +0100
Processing by CollectionsController#edit_collection as HTML
  Parameters: {"id"=>"2"}
  [1m[36mUser Load (0.8ms)[0m  [1mSELECT `users`.* FROM `users` WHERE `users`.`id` = 1 LIMIT 1[0m
  [1m[35mCollection Load (0.5ms)[0m  SELECT `collections`.* FROM `collections` WHERE `collections`.`id` = 2 LIMIT 1
  [1m[36mCollectionImage Load (0.4ms)[0m  [1mSELECT `collection_images`.* FROM `collection_images` WHERE (collection_id = 2) LIMIT 1[0m
  Rendered collections/_collection_form.html.erb (12.8ms)
  [1m[35mRestaurant Load (3.7ms)[0m  SELECT `restaurants`.* FROM `restaurants` WHERE `restaurants`.`disabled` = 0
  Rendered collections/_collection_restaurants_form.html.erb (149.9ms)
  [1m[36mRestaurant Load (0.4ms)[0m  [1mSELECT `restaurants`.* FROM `restaurants` INNER JOIN `collection_restaurants` ON `restaurants`.`id` = `collection_restaurants`.`restaurant_id` WHERE `collection_restaurants`.`collection_id` = 2[0m
  Rendered collections/_collection_restaurants_list.html.erb (3.5ms)
  Rendered collections/edit_collection.html.erb within layouts/admin (169.6ms)
Completed 200 OK in 183ms (Views: 173.0ms | ActiveRecord: 5.8ms)


Started POST "/admin/collections/add_restaurant/2" for 127.0.0.1 at 2016-01-18 16:38:02 +0100
Processing by CollectionsController#add_restaurant as */*
  Parameters: {"utf8"=>"âœ“", "authenticity_token"=>"cajmPApKUoLTDgL4nYG/B3GUhj8fezKDJZWxee28cyM=", "collection_restaurant"=>{"restaurant_id"=>"1"}, "id"=>"2"}
  [1m[35mUser Load (4.8ms)[0m  SELECT `users`.* FROM `users` WHERE `users`.`id` = 1 LIMIT 1
  [1m[36mCollection Load (0.6ms)[0m  [1mSELECT `collections`.* FROM `collections` WHERE `collections`.`id` = 2 LIMIT 1[0m
  [1m[35mRestaurant Load (7.0ms)[0m  SELECT `restaurants`.* FROM `restaurants` WHERE `restaurants`.`slug` = '1' LIMIT 1
  [1m[36mRestaurant Load (0.6ms)[0m  [1mSELECT `restaurants`.* FROM `restaurants` WHERE `restaurants`.`id` = 1 LIMIT 1[0m
  [1m[35m (0.7ms)[0m  BEGIN
  [1m[36m (0.7ms)[0m  [1mINSERT INTO `collection_restaurants` (`collection_id`, `restaurant_id`) VALUES (2, 1)[0m
  [1m[35m (1.1ms)[0m  COMMIT
  [1m[36mRestaurant Load (6.6ms)[0m  [1mSELECT `restaurants`.* FROM `restaurants` INNER JOIN `collection_restaurants` ON `restaurants`.`id` = `collection_restaurants`.`restaurant_id` WHERE `collection_restaurants`.`collection_id` = 2[0m
  Rendered collections/_collection_restaurants_list.html.erb within layouts/admin (15.6ms)
Completed 200 OK in 65ms (Views: 28.6ms | ActiveRecord: 22.1ms)


Started POST "/admin/collections/add_restaurant/2" for 127.0.0.1 at 2016-01-18 16:38:10 +0100
Processing by CollectionsController#add_restaurant as */*
  Parameters: {"utf8"=>"âœ“", "authenticity_token"=>"cajmPApKUoLTDgL4nYG/B3GUhj8fezKDJZWxee28cyM=", "collection_restaurant"=>{"restaurant_id"=>"2"}, "id"=>"2"}
  [1m[35mUser Load (0.3ms)[0m  SELECT `users`.* FROM `users` WHERE `users`.`id` = 1 LIMIT 1
  [1m[36mCollection Load (3.9ms)[0m  [1mSELECT `collections`.* FROM `collections` WHERE `collections`.`id` = 2 LIMIT 1[0m
  [1m[35mRestaurant Load (2.6ms)[0m  SELECT `restaurants`.* FROM `restaurants` WHERE `restaurants`.`slug` = '2' LIMIT 1
  [1m[36mRestaurant Load (5.7ms)[0m  [1mSELECT `restaurants`.* FROM `restaurants` WHERE `restaurants`.`id` = 2 LIMIT 1[0m
  [1m[35m (0.9ms)[0m  BEGIN
  [1m[36m (0.8ms)[0m  [1mINSERT INTO `collection_restaurants` (`collection_id`, `restaurant_id`) VALUES (2, 2)[0m
  [1m[35m (2.3ms)[0m  COMMIT
  [1m[36mRestaurant Load (0.5ms)[0m  [1mSELECT `restaurants`.* FROM `restaurants` INNER JOIN `collection_restaurants` ON `restaurants`.`id` = `collection_restaurants`.`restaurant_id` WHERE `collection_restaurants`.`collection_id` = 2[0m
  Rendered collections/_collection_restaurants_list.html.erb within layouts/admin (4.9ms)
Completed 200 OK in 51ms (Views: 22.1ms | ActiveRecord: 17.0ms)


Started GET "/collection/2/edit" for 127.0.0.1 at 2016-01-18 16:38:12 +0100
Processing by CollectionsController#edit_collection as HTML
  Parameters: {"id"=>"2"}
  [1m[35mUser Load (0.3ms)[0m  SELECT `users`.* FROM `users` WHERE `users`.`id` = 1 LIMIT 1
  [1m[36mCollection Load (0.1ms)[0m  [1mSELECT `collections`.* FROM `collections` WHERE `collections`.`id` = 2 LIMIT 1[0m
  [1m[35mCollectionImage Load (0.4ms)[0m  SELECT `collection_images`.* FROM `collection_images` WHERE (collection_id = 2) LIMIT 1
  Rendered collections/_collection_form.html.erb (8.8ms)
  [1m[36mRestaurant Load (7.8ms)[0m  [1mSELECT `restaurants`.* FROM `restaurants` WHERE `restaurants`.`disabled` = 0[0m
  Rendered collections/_collection_restaurants_form.html.erb (99.0ms)
  [1m[35mRestaurant Load (0.4ms)[0m  SELECT `restaurants`.* FROM `restaurants` INNER JOIN `collection_restaurants` ON `restaurants`.`id` = `collection_restaurants`.`restaurant_id` WHERE `collection_restaurants`.`collection_id` = 2
  Rendered collections/_collection_restaurants_list.html.erb (3.7ms)
  Rendered collections/edit_collection.html.erb within layouts/admin (115.1ms)
Completed 200 OK in 125ms (Views: 112.3ms | ActiveRecord: 9.0ms)


Started GET "/admin/restaurants" for 127.0.0.1 at 2016-01-18 16:45:28 +0100
  [1m[36m (0.2ms)[0m  [1mSELECT COUNT(*) FROM `filter_types` WHERE (code = 'features')[0m
  [1m[35m (0.3ms)[0m  SELECT COUNT(*) FROM `filters` WHERE (code = 'offer')
Processing by RestaurantsController#index as HTML
  [1m[36mUser Load (0.2ms)[0m  [1mSELECT `users`.* FROM `users` WHERE `users`.`id` = 1 LIMIT 1[0m
  Rendered shared/_restaurant_manage_tabs.html.erb (1.4ms)
  Rendered restaurants/_condition_fields.html.erb (19.4ms)
  [1m[35mRestaurant Load (0.9ms)[0m  SELECT `restaurants`.* FROM `restaurants` ORDER BY disabled ASC,created_at DESC LIMIT 12 OFFSET 0
  [1m[36mPhoto Load (0.5ms)[0m  [1mSELECT `photos`.* FROM `photos` WHERE (restaurant_id = 876 and cover = true and status = 1) LIMIT 1[0m
  [1m[35mPhoto Load (0.4ms)[0m  SELECT `photos`.* FROM `photos` WHERE `photos`.`restaurant_id` = 876 AND `photos`.`status` = 1 ORDER BY restaurant_id ASC, created_at DESC LIMIT 1
  [1m[36mPhoto Load (0.5ms)[0m  [1mSELECT `photos`.* FROM `photos` WHERE (restaurant_id = 851 and cover = true and status = 1) LIMIT 1[0m
  [1m[35mPhoto Load (0.3ms)[0m  SELECT `photos`.* FROM `photos` WHERE `photos`.`restaurant_id` = 851 AND `photos`.`status` = 1 ORDER BY restaurant_id ASC, created_at DESC LIMIT 1
  [1m[36mPhoto Load (0.5ms)[0m  [1mSELECT `photos`.* FROM `photos` WHERE (restaurant_id = 693 and cover = true and status = 1) LIMIT 1[0m
  [1m[35mPhoto Load (0.3ms)[0m  SELECT `photos`.* FROM `photos` WHERE `photos`.`restaurant_id` = 693 AND `photos`.`status` = 1 ORDER BY restaurant_id ASC, created_at DESC LIMIT 1
  [1m[36mPhoto Load (0.4ms)[0m  [1mSELECT `photos`.* FROM `photos` WHERE (restaurant_id = 686 and cover = true and status = 1) LIMIT 1[0m
  [1m[35mPhoto Load (0.3ms)[0m  SELECT `photos`.* FROM `photos` WHERE `photos`.`restaurant_id` = 686 AND `photos`.`status` = 1 ORDER BY restaurant_id ASC, created_at DESC LIMIT 1
  [1m[36mPhoto Load (0.4ms)[0m  [1mSELECT `photos`.* FROM `photos` WHERE (restaurant_id = 669 and cover = true and status = 1) LIMIT 1[0m
  [1m[35mPhoto Load (0.3ms)[0m  SELECT `photos`.* FROM `photos` WHERE `photos`.`restaurant_id` = 669 AND `photos`.`status` = 1 ORDER BY restaurant_id ASC, created_at DESC LIMIT 1
  [1m[36mPhoto Load (0.5ms)[0m  [1mSELECT `photos`.* FROM `photos` WHERE (restaurant_id = 251 and cover = true and status = 1) LIMIT 1[0m
  [1m[35mPhoto Load (0.4ms)[0m  SELECT `photos`.* FROM `photos` WHERE `photos`.`restaurant_id` = 251 AND `photos`.`status` = 1 ORDER BY restaurant_id ASC, created_at DESC LIMIT 1
  [1m[36mPhoto Load (0.3ms)[0m  [1mSELECT `photos`.* FROM `photos` WHERE (restaurant_id = 250 and cover = true and status = 1) LIMIT 1[0m
  [1m[35mPhoto Load (0.3ms)[0m  SELECT `photos`.* FROM `photos` WHERE `photos`.`restaurant_id` = 250 AND `photos`.`status` = 1 ORDER BY restaurant_id ASC, created_at DESC LIMIT 1
  [1m[36mPhoto Load (0.6ms)[0m  [1mSELECT `photos`.* FROM `photos` WHERE (restaurant_id = 237 and cover = true and status = 1) LIMIT 1[0m
  [1m[35mPhoto Load (0.4ms)[0m  SELECT `photos`.* FROM `photos` WHERE `photos`.`restaurant_id` = 237 AND `photos`.`status` = 1 ORDER BY restaurant_id ASC, created_at DESC LIMIT 1
  [1m[36mPhoto Load (0.4ms)[0m  [1mSELECT `photos`.* FROM `photos` WHERE (restaurant_id = 231 and cover = true and status = 1) LIMIT 1[0m
  [1m[35mPhoto Load (0.3ms)[0m  SELECT `photos`.* FROM `photos` WHERE `photos`.`restaurant_id` = 231 AND `photos`.`status` = 1 ORDER BY restaurant_id ASC, created_at DESC LIMIT 1
  [1m[36mPhoto Load (0.3ms)[0m  [1mSELECT `photos`.* FROM `photos` WHERE (restaurant_id = 222 and cover = true and status = 1) LIMIT 1[0m
  [1m[35mPhoto Load (0.3ms)[0m  SELECT `photos`.* FROM `photos` WHERE `photos`.`restaurant_id` = 222 AND `photos`.`status` = 1 ORDER BY restaurant_id ASC, created_at DESC LIMIT 1
  [1m[36mPhoto Load (0.3ms)[0m  [1mSELECT `photos`.* FROM `photos` WHERE (restaurant_id = 221 and cover = true and status = 1) LIMIT 1[0m
  [1m[35mPhoto Load (0.3ms)[0m  SELECT `photos`.* FROM `photos` WHERE `photos`.`restaurant_id` = 221 AND `photos`.`status` = 1 ORDER BY restaurant_id ASC, created_at DESC LIMIT 1
  [1m[36mPhoto Load (0.4ms)[0m  [1mSELECT `photos`.* FROM `photos` WHERE (restaurant_id = 216 and cover = true and status = 1) LIMIT 1[0m
  [1m[35mPhoto Load (0.3ms)[0m  SELECT `photos`.* FROM `photos` WHERE `photos`.`restaurant_id` = 216 AND `photos`.`status` = 1 ORDER BY restaurant_id ASC, created_at DESC LIMIT 1
  [1m[36m (0.4ms)[0m  [1mSELECT COUNT(*) FROM `restaurants` [0m
  Rendered restaurants/index.html.erb within layouts/admin (211.7ms)
Completed 200 OK in 367ms (Views: 220.8ms | ActiveRecord: 17.5ms)


Started GET "/admin/collections" for 127.0.0.1 at 2016-01-18 16:45:30 +0100
Processing by CollectionsController#index as HTML
  Rendered shared/_restaurant_manage_tabs.html.erb (0.8ms)
  [1m[35mCollection Load (0.2ms)[0m  SELECT `collections`.* FROM `collections` ORDER BY name ASC, created_at DESC LIMIT 12 OFFSET 0
  [1m[36mCollectionImage Load (0.2ms)[0m  [1mSELECT `collection_images`.* FROM `collection_images` WHERE (collection_id = 3) LIMIT 1[0m
  [1m[35mCollectionImage Load (0.3ms)[0m  SELECT `collection_images`.* FROM `collection_images` WHERE (collection_id = 2) LIMIT 1
  [1m[36mCollectionImage Load (0.2ms)[0m  [1mSELECT `collection_images`.* FROM `collection_images` WHERE (collection_id = 5) LIMIT 1[0m
  [1m[35m (0.1ms)[0m  SELECT COUNT(*) FROM `collections` 
  Rendered collections/index.erb within layouts/admin (56.6ms)
  [1m[36mUser Load (0.2ms)[0m  [1mSELECT `users`.* FROM `users` WHERE `users`.`id` = 1 LIMIT 1[0m
Completed 200 OK in 78ms (Views: 70.6ms | ActiveRecord: 5.7ms)


Started GET "/collection/5/edit" for 127.0.0.1 at 2016-01-18 16:45:37 +0100
Processing by CollectionsController#edit_collection as HTML
  Parameters: {"id"=>"5"}
  [1m[35mUser Load (0.3ms)[0m  SELECT `users`.* FROM `users` WHERE `users`.`id` = 1 LIMIT 1
  [1m[36mCollection Load (0.4ms)[0m  [1mSELECT `collections`.* FROM `collections` WHERE `collections`.`id` = 5 LIMIT 1[0m
  [1m[35mCollectionImage Load (0.5ms)[0m  SELECT `collection_images`.* FROM `collection_images` WHERE (collection_id = 5) LIMIT 1
  Rendered collections/_collection_form.html.erb (16.6ms)
  [1m[36mRestaurant Load (8.4ms)[0m  [1mSELECT `restaurants`.* FROM `restaurants` WHERE `restaurants`.`disabled` = 0[0m
  Rendered collections/_collection_restaurants_form.html.erb (227.5ms)
  [1m[35mRestaurant Load (0.5ms)[0m  SELECT `restaurants`.* FROM `restaurants` INNER JOIN `collection_restaurants` ON `restaurants`.`id` = `collection_restaurants`.`restaurant_id` WHERE `collection_restaurants`.`collection_id` = 5
  Rendered collections/_collection_restaurants_list.html.erb (4.4ms)
  Rendered collections/edit_collection.html.erb within layouts/admin (333.7ms)
Completed 200 OK in 408ms (Views: 355.5ms | ActiveRecord: 12.5ms)


Started POST "/admin/collections/5/remove_restaurant/1" for 127.0.0.1 at 2016-01-18 16:45:41 +0100
Processing by CollectionsController#remove_restaurant as JS
  Parameters: {"id"=>"5", "restaurant_id"=>"1"}
  [1m[36mCollection Load (0.4ms)[0m  [1mSELECT `collections`.* FROM `collections` WHERE `collections`.`id` = 5 LIMIT 1[0m
  [1m[35mRestaurant Load (1.7ms)[0m  SELECT `restaurants`.* FROM `restaurants` INNER JOIN `collection_restaurants` ON `restaurants`.`id` = `collection_restaurants`.`restaurant_id` WHERE `collection_restaurants`.`collection_id` = 5 AND `restaurants`.`slug` = '1' LIMIT 1
  [1m[36mRestaurant Load (3.6ms)[0m  [1mSELECT `restaurants`.* FROM `restaurants` INNER JOIN `collection_restaurants` ON `restaurants`.`id` = `collection_restaurants`.`restaurant_id` WHERE `collection_restaurants`.`collection_id` = 5 AND `restaurants`.`id` = 1 LIMIT 1[0m
  [1m[35m (1.3ms)[0m  BEGIN
  [1m[36m (0.3ms)[0m  [1mDELETE FROM `collection_restaurants` WHERE `collection_restaurants`.`collection_id` = 5 AND `collection_restaurants`.`restaurant_id` IN (1)[0m
  [1m[35m (0.5ms)[0m  COMMIT
  [1m[36mRestaurant Load (0.6ms)[0m  [1mSELECT `restaurants`.* FROM `restaurants` INNER JOIN `collection_restaurants` ON `restaurants`.`id` = `collection_restaurants`.`restaurant_id` WHERE `collection_restaurants`.`collection_id` = 5[0m
  Rendered collections/_collection_restaurants_list.html.erb within layouts/admin (5.5ms)
  [1m[35mUser Load (0.3ms)[0m  SELECT `users`.* FROM `users` WHERE `users`.`id` = 1 LIMIT 1
Completed 200 OK in 52ms (Views: 32.8ms | ActiveRecord: 8.8ms)


Started GET "/collection/5/edit" for 127.0.0.1 at 2016-01-18 16:45:42 +0100
Processing by CollectionsController#edit_collection as HTML
  Parameters: {"id"=>"5"}
  [1m[36mUser Load (0.4ms)[0m  [1mSELECT `users`.* FROM `users` WHERE `users`.`id` = 1 LIMIT 1[0m
  [1m[35mCollection Load (0.2ms)[0m  SELECT `collections`.* FROM `collections` WHERE `collections`.`id` = 5 LIMIT 1
  [1m[36mCollectionImage Load (0.3ms)[0m  [1mSELECT `collection_images`.* FROM `collection_images` WHERE (collection_id = 5) LIMIT 1[0m
  Rendered collections/_collection_form.html.erb (23.1ms)
  [1m[35mRestaurant Load (4.0ms)[0m  SELECT `restaurants`.* FROM `restaurants` WHERE `restaurants`.`disabled` = 0
  Rendered collections/_collection_restaurants_form.html.erb (131.6ms)
  [1m[36mRestaurant Load (0.4ms)[0m  [1mSELECT `restaurants`.* FROM `restaurants` INNER JOIN `collection_restaurants` ON `restaurants`.`id` = `collection_restaurants`.`restaurant_id` WHERE `collection_restaurants`.`collection_id` = 5[0m
  Rendered collections/_collection_restaurants_list.html.erb (3.0ms)
  Rendered collections/edit_collection.html.erb within layouts/admin (163.2ms)
Completed 200 OK in 186ms (Views: 171.7ms | ActiveRecord: 5.2ms)


Started POST "/admin/collections/5/remove_restaurant/4" for 127.0.0.1 at 2016-01-18 16:45:47 +0100
Processing by CollectionsController#remove_restaurant as JS
  Parameters: {"id"=>"5", "restaurant_id"=>"4"}
  [1m[35mCollection Load (10.7ms)[0m  SELECT `collections`.* FROM `collections` WHERE `collections`.`id` = 5 LIMIT 1
  [1m[36mRestaurant Load (2.7ms)[0m  [1mSELECT `restaurants`.* FROM `restaurants` INNER JOIN `collection_restaurants` ON `restaurants`.`id` = `collection_restaurants`.`restaurant_id` WHERE `collection_restaurants`.`collection_id` = 5 AND `restaurants`.`slug` = '4' LIMIT 1[0m
  [1m[35mRestaurant Load (1.4ms)[0m  SELECT `restaurants`.* FROM `restaurants` INNER JOIN `collection_restaurants` ON `restaurants`.`id` = `collection_restaurants`.`restaurant_id` WHERE `collection_restaurants`.`collection_id` = 5 AND `restaurants`.`id` = 4 LIMIT 1
  [1m[36m (2.0ms)[0m  [1mBEGIN[0m
  [1m[35m (1.1ms)[0m  DELETE FROM `collection_restaurants` WHERE `collection_restaurants`.`collection_id` = 5 AND `collection_restaurants`.`restaurant_id` IN (4)
  [1m[36m (1.7ms)[0m  [1mCOMMIT[0m
  [1m[35mRestaurant Load (0.3ms)[0m  SELECT `restaurants`.* FROM `restaurants` INNER JOIN `collection_restaurants` ON `restaurants`.`id` = `collection_restaurants`.`restaurant_id` WHERE `collection_restaurants`.`collection_id` = 5
  Rendered collections/_collection_restaurants_list.html.erb within layouts/admin (2.3ms)
  [1m[36mUser Load (0.4ms)[0m  [1mSELECT `users`.* FROM `users` WHERE `users`.`id` = 1 LIMIT 1[0m
Completed 200 OK in 59ms (Views: 25.8ms | ActiveRecord: 20.4ms)


Started GET "/collection/5/edit" for 127.0.0.1 at 2016-01-18 16:45:49 +0100
Processing by CollectionsController#edit_collection as HTML
  Parameters: {"id"=>"5"}
  [1m[35mUser Load (1.5ms)[0m  SELECT `users`.* FROM `users` WHERE `users`.`id` = 1 LIMIT 1
  [1m[36mCollection Load (0.2ms)[0m  [1mSELECT `collections`.* FROM `collections` WHERE `collections`.`id` = 5 LIMIT 1[0m
  [1m[35mCollectionImage Load (0.3ms)[0m  SELECT `collection_images`.* FROM `collection_images` WHERE (collection_id = 5) LIMIT 1
  Rendered collections/_collection_form.html.erb (9.9ms)
  [1m[36mRestaurant Load (11.9ms)[0m  [1mSELECT `restaurants`.* FROM `restaurants` WHERE `restaurants`.`disabled` = 0[0m
  Rendered collections/_collection_restaurants_form.html.erb (146.8ms)
  [1m[35mRestaurant Load (0.4ms)[0m  SELECT `restaurants`.* FROM `restaurants` INNER JOIN `collection_restaurants` ON `restaurants`.`id` = `collection_restaurants`.`restaurant_id` WHERE `collection_restaurants`.`collection_id` = 5
  Rendered collections/_collection_restaurants_list.html.erb (2.0ms)
  Rendered collections/edit_collection.html.erb within layouts/admin (162.4ms)
Completed 200 OK in 176ms (Views: 157.7ms | ActiveRecord: 14.3ms)


Started POST "/admin/collections/add_restaurant/5" for 127.0.0.1 at 2016-01-18 16:45:51 +0100
Processing by CollectionsController#add_restaurant as */*
  Parameters: {"utf8"=>"âœ“", "authenticity_token"=>"cajmPApKUoLTDgL4nYG/B3GUhj8fezKDJZWxee28cyM=", "collection_restaurant"=>{"restaurant_id"=>"1"}, "id"=>"5"}
  [1m[36mUser Load (5.0ms)[0m  [1mSELECT `users`.* FROM `users` WHERE `users`.`id` = 1 LIMIT 1[0m
  [1m[35mCollection Load (0.3ms)[0m  SELECT `collections`.* FROM `collections` WHERE `collections`.`id` = 5 LIMIT 1
  [1m[36mRestaurant Load (1.5ms)[0m  [1mSELECT `restaurants`.* FROM `restaurants` WHERE `restaurants`.`slug` = '1' LIMIT 1[0m
  [1m[35mRestaurant Load (0.2ms)[0m  SELECT `restaurants`.* FROM `restaurants` WHERE `restaurants`.`id` = 1 LIMIT 1
  [1m[36mRestaurant Exists (0.4ms)[0m  [1mSELECT 1 AS one FROM `restaurants` INNER JOIN `collection_restaurants` ON `restaurants`.`id` = `collection_restaurants`.`restaurant_id` WHERE `collection_restaurants`.`collection_id` = 5 AND `restaurants`.`id` = 1 LIMIT 1[0m
  [1m[35m (0.1ms)[0m  BEGIN
  [1m[36m (0.2ms)[0m  [1mINSERT INTO `collection_restaurants` (`collection_id`, `restaurant_id`) VALUES (5, 1)[0m
  [1m[35m (0.6ms)[0m  COMMIT
  [1m[36mRestaurant Load (0.4ms)[0m  [1mSELECT `restaurants`.* FROM `restaurants` INNER JOIN `collection_restaurants` ON `restaurants`.`id` = `collection_restaurants`.`restaurant_id` WHERE `collection_restaurants`.`collection_id` = 5[0m
  Rendered collections/_collection_restaurants_list.html.erb within layouts/admin (3.5ms)
Completed 200 OK in 66ms (Views: 25.2ms | ActiveRecord: 8.7ms)


Started GET "/collection/5/edit" for 127.0.0.1 at 2016-01-18 16:45:54 +0100
Processing by CollectionsController#edit_collection as HTML
  Parameters: {"id"=>"5"}
  [1m[35mUser Load (1.2ms)[0m  SELECT `users`.* FROM `users` WHERE `users`.`id` = 1 LIMIT 1
  [1m[36mCollection Load (0.5ms)[0m  [1mSELECT `collections`.* FROM `collections` WHERE `collections`.`id` = 5 LIMIT 1[0m
  [1m[35mCollectionImage Load (0.6ms)[0m  SELECT `collection_images`.* FROM `collection_images` WHERE (collection_id = 5) LIMIT 1
  Rendered collections/_collection_form.html.erb (21.8ms)
  [1m[36mRestaurant Load (3.9ms)[0m  [1mSELECT `restaurants`.* FROM `restaurants` WHERE `restaurants`.`disabled` = 0[0m
  Rendered collections/_collection_restaurants_form.html.erb (133.1ms)
  [1m[35mRestaurant Load (0.4ms)[0m  SELECT `restaurants`.* FROM `restaurants` INNER JOIN `collection_restaurants` ON `restaurants`.`id` = `collection_restaurants`.`restaurant_id` WHERE `collection_restaurants`.`collection_id` = 5
  Rendered collections/_collection_restaurants_list.html.erb (3.8ms)
  Rendered collections/edit_collection.html.erb within layouts/admin (163.8ms)
Completed 200 OK in 177ms (Views: 165.2ms | ActiveRecord: 6.6ms)


Started POST "/admin/collections/add_restaurant/5" for 127.0.0.1 at 2016-01-18 16:45:59 +0100
Processing by CollectionsController#add_restaurant as */*
  Parameters: {"utf8"=>"âœ“", "authenticity_token"=>"cajmPApKUoLTDgL4nYG/B3GUhj8fezKDJZWxee28cyM=", "collection_restaurant"=>{"restaurant_id"=>"1"}, "id"=>"5"}
  [1m[36mUser Load (5.7ms)[0m  [1mSELECT `users`.* FROM `users` WHERE `users`.`id` = 1 LIMIT 1[0m
  [1m[35mCollection Load (1.3ms)[0m  SELECT `collections`.* FROM `collections` WHERE `collections`.`id` = 5 LIMIT 1
  [1m[36mRestaurant Load (1.7ms)[0m  [1mSELECT `restaurants`.* FROM `restaurants` WHERE `restaurants`.`slug` = '1' LIMIT 1[0m
  [1m[35mRestaurant Load (8.4ms)[0m  SELECT `restaurants`.* FROM `restaurants` WHERE `restaurants`.`id` = 1 LIMIT 1
  [1m[36mRestaurant Exists (2.6ms)[0m  [1mSELECT 1 AS one FROM `restaurants` INNER JOIN `collection_restaurants` ON `restaurants`.`id` = `collection_restaurants`.`restaurant_id` WHERE `collection_restaurants`.`collection_id` = 5 AND `restaurants`.`id` = 1 LIMIT 1[0m
  [1m[35mRestaurant Load (0.3ms)[0m  SELECT `restaurants`.* FROM `restaurants` INNER JOIN `collection_restaurants` ON `restaurants`.`id` = `collection_restaurants`.`restaurant_id` WHERE `collection_restaurants`.`collection_id` = 5
  Rendered collections/_collection_restaurants_list.html.erb within layouts/admin (3.4ms)
Completed 200 OK in 56ms (Views: 24.2ms | ActiveRecord: 19.9ms)


Started GET "/collection/5/edit" for 127.0.0.1 at 2016-01-18 16:46:00 +0100
Processing by CollectionsController#edit_collection as HTML
  Parameters: {"id"=>"5"}
  [1m[36mUser Load (0.4ms)[0m  [1mSELECT `users`.* FROM `users` WHERE `users`.`id` = 1 LIMIT 1[0m
  [1m[35mCollection Load (0.6ms)[0m  SELECT `collections`.* FROM `collections` WHERE `collections`.`id` = 5 LIMIT 1
  [1m[36mCollectionImage Load (1.0ms)[0m  [1mSELECT `collection_images`.* FROM `collection_images` WHERE (collection_id = 5) LIMIT 1[0m
  Rendered collections/_collection_form.html.erb (13.5ms)
  [1m[35mRestaurant Load (7.4ms)[0m  SELECT `restaurants`.* FROM `restaurants` WHERE `restaurants`.`disabled` = 0
  Rendered collections/_collection_restaurants_form.html.erb (111.1ms)
  [1m[36mRestaurant Load (0.4ms)[0m  [1mSELECT `restaurants`.* FROM `restaurants` INNER JOIN `collection_restaurants` ON `restaurants`.`id` = `collection_restaurants`.`restaurant_id` WHERE `collection_restaurants`.`collection_id` = 5[0m
  Rendered collections/_collection_restaurants_list.html.erb (2.6ms)
  Rendered collections/edit_collection.html.erb within layouts/admin (131.8ms)
Completed 200 OK in 143ms (Views: 128.8ms | ActiveRecord: 9.8ms)


Started POST "/admin/collections/add_restaurant/5" for 127.0.0.1 at 2016-01-18 16:46:33 +0100
Processing by CollectionsController#add_restaurant as */*
  Parameters: {"utf8"=>"âœ“", "authenticity_token"=>"cajmPApKUoLTDgL4nYG/B3GUhj8fezKDJZWxee28cyM=", "collection_restaurant"=>{"restaurant_id"=>"1"}, "id"=>"5"}
  [1m[35mUser Load (0.2ms)[0m  SELECT `users`.* FROM `users` WHERE `users`.`id` = 1 LIMIT 1
  [1m[36mCollection Load (0.2ms)[0m  [1mSELECT `collections`.* FROM `collections` WHERE `collections`.`id` = 5 LIMIT 1[0m
  [1m[35m (0.4ms)[0m  SELECT COUNT(*) FROM `filter_types` WHERE (code = 'features')
  [1m[36m (0.6ms)[0m  [1mSELECT COUNT(*) FROM `filters` WHERE (code = 'offer')[0m
  [1m[35mRestaurant Load (1.4ms)[0m  SELECT `restaurants`.* FROM `restaurants` WHERE `restaurants`.`slug` = '1' LIMIT 1
  [1m[36mRestaurant Load (0.2ms)[0m  [1mSELECT `restaurants`.* FROM `restaurants` WHERE `restaurants`.`id` = 1 LIMIT 1[0m
  [1m[35mRestaurant Exists (0.6ms)[0m  SELECT 1 AS one FROM `restaurants` INNER JOIN `collection_restaurants` ON `restaurants`.`id` = `collection_restaurants`.`restaurant_id` WHERE `collection_restaurants`.`collection_id` = 5 AND `restaurants`.`id` = 1 LIMIT 1
  [1m[36mRestaurant Load (0.3ms)[0m  [1mSELECT `restaurants`.* FROM `restaurants` INNER JOIN `collection_restaurants` ON `restaurants`.`id` = `collection_restaurants`.`restaurant_id` WHERE `collection_restaurants`.`collection_id` = 5[0m
  Rendered collections/_collection_restaurants_list.html.erb within layouts/admin (3.9ms)
Completed 200 OK in 484ms (Views: 37.1ms | ActiveRecord: 17.4ms)


Started GET "/collection/5/edit" for 127.0.0.1 at 2016-01-18 16:48:23 +0100
Processing by CollectionsController#edit_collection as HTML
  Parameters: {"id"=>"5"}
  [1m[35mUser Load (0.3ms)[0m  SELECT `users`.* FROM `users` WHERE `users`.`id` = 1 LIMIT 1
  [1m[36mCollection Load (0.2ms)[0m  [1mSELECT `collections`.* FROM `collections` WHERE `collections`.`id` = 5 LIMIT 1[0m
  [1m[35mCollectionImage Load (0.2ms)[0m  SELECT `collection_images`.* FROM `collection_images` WHERE (collection_id = 5) LIMIT 1
  Rendered collections/_collection_form.html.erb (67.2ms)
  [1m[36mRestaurant Load (3.7ms)[0m  [1mSELECT `restaurants`.* FROM `restaurants` WHERE `restaurants`.`disabled` = 0[0m
  Rendered collections/_collection_restaurants_form.html.erb (108.2ms)
  [1m[35mRestaurant Load (0.4ms)[0m  SELECT `restaurants`.* FROM `restaurants` INNER JOIN `collection_restaurants` ON `restaurants`.`id` = `collection_restaurants`.`restaurant_id` WHERE `collection_restaurants`.`collection_id` = 5
  Rendered collections/_collection_restaurants_list.html.erb (3.2ms)
  Rendered collections/edit_collection.html.erb within layouts/admin (182.8ms)
Completed 200 OK in 253ms (Views: 185.0ms | ActiveRecord: 8.3ms)


Started POST "/admin/collections/add_restaurant/5" for 127.0.0.1 at 2016-01-18 16:48:28 +0100
Processing by CollectionsController#add_restaurant as */*
  Parameters: {"utf8"=>"âœ“", "authenticity_token"=>"cajmPApKUoLTDgL4nYG/B3GUhj8fezKDJZWxee28cyM=", "collection_restaurant"=>{"restaurant_id"=>"2"}, "id"=>"5"}
  [1m[36mUser Load (1.5ms)[0m  [1mSELECT `users`.* FROM `users` WHERE `users`.`id` = 1 LIMIT 1[0m
  [1m[35mCollection Load (3.9ms)[0m  SELECT `collections`.* FROM `collections` WHERE `collections`.`id` = 5 LIMIT 1
  [1m[36mRestaurant Load (1.9ms)[0m  [1mSELECT `restaurants`.* FROM `restaurants` WHERE `restaurants`.`slug` = '2' LIMIT 1[0m
  [1m[35mRestaurant Load (1.3ms)[0m  SELECT `restaurants`.* FROM `restaurants` WHERE `restaurants`.`id` = 2 LIMIT 1
  [1m[36mRestaurant Exists (1.4ms)[0m  [1mSELECT 1 AS one FROM `restaurants` INNER JOIN `collection_restaurants` ON `restaurants`.`id` = `collection_restaurants`.`restaurant_id` WHERE `collection_restaurants`.`collection_id` = 5 AND `restaurants`.`id` = 2 LIMIT 1[0m
  [1m[35m (0.2ms)[0m  BEGIN
  [1m[36m (6.6ms)[0m  [1mINSERT INTO `collection_restaurants` (`collection_id`, `restaurant_id`) VALUES (5, 2)[0m
  [1m[35m (1.4ms)[0m  COMMIT
  [1m[36mRestaurant Load (0.4ms)[0m  [1mSELECT `restaurants`.* FROM `restaurants` INNER JOIN `collection_restaurants` ON `restaurants`.`id` = `collection_restaurants`.`restaurant_id` WHERE `collection_restaurants`.`collection_id` = 5[0m
  Rendered collections/_collection_restaurants_list.html.erb within layouts/admin (5.1ms)
Completed 200 OK in 62ms (Views: 25.1ms | ActiveRecord: 18.6ms)


Started POST "/admin/collections/add_restaurant/5" for 127.0.0.1 at 2016-01-18 16:48:32 +0100
Processing by CollectionsController#add_restaurant as */*
  Parameters: {"utf8"=>"âœ“", "authenticity_token"=>"cajmPApKUoLTDgL4nYG/B3GUhj8fezKDJZWxee28cyM=", "collection_restaurant"=>{"restaurant_id"=>"3"}, "id"=>"5"}
  [1m[35mUser Load (0.5ms)[0m  SELECT `users`.* FROM `users` WHERE `users`.`id` = 1 LIMIT 1
  [1m[36mCollection Load (0.8ms)[0m  [1mSELECT `collections`.* FROM `collections` WHERE `collections`.`id` = 5 LIMIT 1[0m
  [1m[35mRestaurant Load (1.9ms)[0m  SELECT `restaurants`.* FROM `restaurants` WHERE `restaurants`.`slug` = '3' LIMIT 1
  [1m[36mRestaurant Load (8.8ms)[0m  [1mSELECT `restaurants`.* FROM `restaurants` WHERE `restaurants`.`id` = 3 LIMIT 1[0m
  [1m[35mRestaurant Exists (0.3ms)[0m  SELECT 1 AS one FROM `restaurants` INNER JOIN `collection_restaurants` ON `restaurants`.`id` = `collection_restaurants`.`restaurant_id` WHERE `collection_restaurants`.`collection_id` = 5 AND `restaurants`.`id` = 3 LIMIT 1
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35m (1.0ms)[0m  INSERT INTO `collection_restaurants` (`collection_id`, `restaurant_id`) VALUES (5, 3)
  [1m[36m (0.9ms)[0m  [1mCOMMIT[0m
  [1m[35mRestaurant Load (0.4ms)[0m  SELECT `restaurants`.* FROM `restaurants` INNER JOIN `collection_restaurants` ON `restaurants`.`id` = `collection_restaurants`.`restaurant_id` WHERE `collection_restaurants`.`collection_id` = 5
  Rendered collections/_collection_restaurants_list.html.erb within layouts/admin (6.0ms)
Completed 200 OK in 68ms (Views: 36.8ms | ActiveRecord: 14.6ms)


Started POST "/admin/collections/5/remove_restaurant/3" for 127.0.0.1 at 2016-01-18 16:48:35 +0100
Processing by CollectionsController#remove_restaurant as JS
  Parameters: {"id"=>"5", "restaurant_id"=>"3"}
  [1m[36mCollection Load (0.8ms)[0m  [1mSELECT `collections`.* FROM `collections` WHERE `collections`.`id` = 5 LIMIT 1[0m
  [1m[35mRestaurant Load (0.4ms)[0m  SELECT `restaurants`.* FROM `restaurants` INNER JOIN `collection_restaurants` ON `restaurants`.`id` = `collection_restaurants`.`restaurant_id` WHERE `collection_restaurants`.`collection_id` = 5 AND `restaurants`.`slug` = '3' LIMIT 1
  [1m[36mRestaurant Load (0.2ms)[0m  [1mSELECT `restaurants`.* FROM `restaurants` INNER JOIN `collection_restaurants` ON `restaurants`.`id` = `collection_restaurants`.`restaurant_id` WHERE `collection_restaurants`.`collection_id` = 5 AND `restaurants`.`id` = 3 LIMIT 1[0m
  [1m[35m (0.4ms)[0m  BEGIN
  [1m[36m (0.6ms)[0m  [1mDELETE FROM `collection_restaurants` WHERE `collection_restaurants`.`collection_id` = 5 AND `collection_restaurants`.`restaurant_id` IN (3)[0m
  [1m[35m (5.8ms)[0m  COMMIT
  [1m[36mRestaurant Load (0.4ms)[0m  [1mSELECT `restaurants`.* FROM `restaurants` INNER JOIN `collection_restaurants` ON `restaurants`.`id` = `collection_restaurants`.`restaurant_id` WHERE `collection_restaurants`.`collection_id` = 5[0m
  Rendered collections/_collection_restaurants_list.html.erb within layouts/admin (4.5ms)
  [1m[35mUser Load (1.4ms)[0m  SELECT `users`.* FROM `users` WHERE `users`.`id` = 1 LIMIT 1
Completed 200 OK in 50ms (Views: 30.5ms | ActiveRecord: 10.0ms)


Started GET "/collection/5/edit" for 127.0.0.1 at 2016-01-18 16:48:36 +0100
Processing by CollectionsController#edit_collection as HTML
  Parameters: {"id"=>"5"}
  [1m[36mUser Load (0.4ms)[0m  [1mSELECT `users`.* FROM `users` WHERE `users`.`id` = 1 LIMIT 1[0m
  [1m[35mCollection Load (6.4ms)[0m  SELECT `collections`.* FROM `collections` WHERE `collections`.`id` = 5 LIMIT 1
  [1m[36mCollectionImage Load (0.4ms)[0m  [1mSELECT `collection_images`.* FROM `collection_images` WHERE (collection_id = 5) LIMIT 1[0m
  Rendered collections/_collection_form.html.erb (12.6ms)
  [1m[35mRestaurant Load (4.6ms)[0m  SELECT `restaurants`.* FROM `restaurants` WHERE `restaurants`.`disabled` = 0
  Rendered collections/_collection_restaurants_form.html.erb (140.4ms)
  [1m[36mRestaurant Load (0.4ms)[0m  [1mSELECT `restaurants`.* FROM `restaurants` INNER JOIN `collection_restaurants` ON `restaurants`.`id` = `collection_restaurants`.`restaurant_id` WHERE `collection_restaurants`.`collection_id` = 5[0m
  Rendered collections/_collection_restaurants_list.html.erb (5.5ms)
  Rendered collections/edit_collection.html.erb within layouts/admin (162.2ms)
Completed 200 OK in 186ms (Views: 164.4ms | ActiveRecord: 12.2ms)


Started GET "/admin/restaurants" for 127.0.0.1 at 2016-01-18 16:57:17 +0100
Processing by RestaurantsController#index as HTML
  [1m[35mUser Load (0.3ms)[0m  SELECT `users`.* FROM `users` WHERE `users`.`id` = 1 LIMIT 1
  Rendered shared/_restaurant_manage_tabs.html.erb (1.3ms)
  Rendered restaurants/_condition_fields.html.erb (16.1ms)
  [1m[36mRestaurant Load (0.8ms)[0m  [1mSELECT `restaurants`.* FROM `restaurants` ORDER BY disabled ASC,created_at DESC LIMIT 12 OFFSET 0[0m
  [1m[35mPhoto Load (0.5ms)[0m  SELECT `photos`.* FROM `photos` WHERE (restaurant_id = 876 and cover = true and status = 1) LIMIT 1
  [1m[36mPhoto Load (0.3ms)[0m  [1mSELECT `photos`.* FROM `photos` WHERE `photos`.`restaurant_id` = 876 AND `photos`.`status` = 1 ORDER BY restaurant_id ASC, created_at DESC LIMIT 1[0m
  [1m[35mPhoto Load (0.3ms)[0m  SELECT `photos`.* FROM `photos` WHERE (restaurant_id = 851 and cover = true and status = 1) LIMIT 1
  [1m[36mPhoto Load (0.3ms)[0m  [1mSELECT `photos`.* FROM `photos` WHERE `photos`.`restaurant_id` = 851 AND `photos`.`status` = 1 ORDER BY restaurant_id ASC, created_at DESC LIMIT 1[0m
  [1m[35mPhoto Load (0.4ms)[0m  SELECT `photos`.* FROM `photos` WHERE (restaurant_id = 693 and cover = true and status = 1) LIMIT 1
  [1m[36mPhoto Load (0.3ms)[0m  [1mSELECT `photos`.* FROM `photos` WHERE `photos`.`restaurant_id` = 693 AND `photos`.`status` = 1 ORDER BY restaurant_id ASC, created_at DESC LIMIT 1[0m
  [1m[35mPhoto Load (0.3ms)[0m  SELECT `photos`.* FROM `photos` WHERE (restaurant_id = 686 and cover = true and status = 1) LIMIT 1
  [1m[36mPhoto Load (0.3ms)[0m  [1mSELECT `photos`.* FROM `photos` WHERE `photos`.`restaurant_id` = 686 AND `photos`.`status` = 1 ORDER BY restaurant_id ASC, created_at DESC LIMIT 1[0m
  [1m[35mPhoto Load (0.3ms)[0m  SELECT `photos`.* FROM `photos` WHERE (restaurant_id = 669 and cover = true and status = 1) LIMIT 1
  [1m[36mPhoto Load (1.1ms)[0m  [1mSELECT `photos`.* FROM `photos` WHERE `photos`.`restaurant_id` = 669 AND `photos`.`status` = 1 ORDER BY restaurant_id ASC, created_at DESC LIMIT 1[0m
  [1m[35mPhoto Load (1.3ms)[0m  SELECT `photos`.* FROM `photos` WHERE (restaurant_id = 251 and cover = true and status = 1) LIMIT 1
  [1m[36mPhoto Load (1.0ms)[0m  [1mSELECT `photos`.* FROM `photos` WHERE `photos`.`restaurant_id` = 251 AND `photos`.`status` = 1 ORDER BY restaurant_id ASC, created_at DESC LIMIT 1[0m
  [1m[35mPhoto Load (1.3ms)[0m  SELECT `photos`.* FROM `photos` WHERE (restaurant_id = 250 and cover = true and status = 1) LIMIT 1
  [1m[36mPhoto Load (0.4ms)[0m  [1mSELECT `photos`.* FROM `photos` WHERE `photos`.`restaurant_id` = 250 AND `photos`.`status` = 1 ORDER BY restaurant_id ASC, created_at DESC LIMIT 1[0m
  [1m[35mPhoto Load (0.5ms)[0m  SELECT `photos`.* FROM `photos` WHERE (restaurant_id = 237 and cover = true and status = 1) LIMIT 1
  [1m[36mPhoto Load (0.4ms)[0m  [1mSELECT `photos`.* FROM `photos` WHERE `photos`.`restaurant_id` = 237 AND `photos`.`status` = 1 ORDER BY restaurant_id ASC, created_at DESC LIMIT 1[0m
  [1m[35mPhoto Load (0.5ms)[0m  SELECT `photos`.* FROM `photos` WHERE (restaurant_id = 231 and cover = true and status = 1) LIMIT 1
  [1m[36mPhoto Load (0.4ms)[0m  [1mSELECT `photos`.* FROM `photos` WHERE `photos`.`restaurant_id` = 231 AND `photos`.`status` = 1 ORDER BY restaurant_id ASC, created_at DESC LIMIT 1[0m
  [1m[35mPhoto Load (0.5ms)[0m  SELECT `photos`.* FROM `photos` WHERE (restaurant_id = 222 and cover = true and status = 1) LIMIT 1
  [1m[36mPhoto Load (0.4ms)[0m  [1mSELECT `photos`.* FROM `photos` WHERE `photos`.`restaurant_id` = 222 AND `photos`.`status` = 1 ORDER BY restaurant_id ASC, created_at DESC LIMIT 1[0m
  [1m[35mPhoto Load (0.5ms)[0m  SELECT `photos`.* FROM `photos` WHERE (restaurant_id = 221 and cover = true and status = 1) LIMIT 1
  [1m[36mPhoto Load (0.4ms)[0m  [1mSELECT `photos`.* FROM `photos` WHERE `photos`.`restaurant_id` = 221 AND `photos`.`status` = 1 ORDER BY restaurant_id ASC, created_at DESC LIMIT 1[0m
  [1m[35mPhoto Load (0.5ms)[0m  SELECT `photos`.* FROM `photos` WHERE (restaurant_id = 216 and cover = true and status = 1) LIMIT 1
  [1m[36mPhoto Load (0.3ms)[0m  [1mSELECT `photos`.* FROM `photos` WHERE `photos`.`restaurant_id` = 216 AND `photos`.`status` = 1 ORDER BY restaurant_id ASC, created_at DESC LIMIT 1[0m
  [1m[35m (0.5ms)[0m  SELECT COUNT(*) FROM `restaurants` 
  Rendered restaurants/index.html.erb within layouts/admin (242.4ms)
Completed 200 OK in 288ms (Views: 213.2ms | ActiveRecord: 70.7ms)


Started GET "/admin/collections" for 127.0.0.1 at 2016-01-18 16:57:19 +0100
Processing by CollectionsController#index as HTML
  Rendered shared/_restaurant_manage_tabs.html.erb (0.8ms)
  [1m[36mCollection Load (0.3ms)[0m  [1mSELECT `collections`.* FROM `collections` ORDER BY name ASC, created_at DESC LIMIT 12 OFFSET 0[0m
  [1m[35mCollectionImage Load (0.2ms)[0m  SELECT `collection_images`.* FROM `collection_images` WHERE (collection_id = 3) LIMIT 1
  [1m[36mCollectionImage Load (0.3ms)[0m  [1mSELECT `collection_images`.* FROM `collection_images` WHERE (collection_id = 2) LIMIT 1[0m
  [1m[35mCollectionImage Load (0.2ms)[0m  SELECT `collection_images`.* FROM `collection_images` WHERE (collection_id = 5) LIMIT 1
  [1m[36m (0.2ms)[0m  [1mSELECT COUNT(*) FROM `collections` [0m
  Rendered collections/index.erb within layouts/admin (19.5ms)
  [1m[35mUser Load (0.3ms)[0m  SELECT `users`.* FROM `users` WHERE `users`.`id` = 1 LIMIT 1
Completed 200 OK in 37ms (Views: 34.3ms | ActiveRecord: 1.5ms)


Started POST "/admin/collections/3/disable_toggle" for 127.0.0.1 at 2016-01-18 16:57:22 +0100
Processing by CollectionsController#disable_toggle as JS
  Parameters: {"id"=>"3"}
  [1m[36mCollection Load (0.5ms)[0m  [1mSELECT `collections`.* FROM `collections` WHERE `collections`.`id` = 3 LIMIT 1[0m
  [1m[35m (0.1ms)[0m  BEGIN
  [1m[36m (0.4ms)[0m  [1mUPDATE `collections` SET `disabled` = 1, `updated_at` = '2016-01-18 15:57:22' WHERE `collections`.`id` = 3[0m
  [1m[35m (0.8ms)[0m  COMMIT
  Rendered collections/disable_toggle.js.erb (0.3ms)
Completed 200 OK in 55ms (Views: 45.0ms | ActiveRecord: 1.8ms)


Started POST "/admin/collections/3/disable_toggle" for 127.0.0.1 at 2016-01-18 16:57:24 +0100
Processing by CollectionsController#disable_toggle as JS
  Parameters: {"id"=>"3"}
  [1m[36mCollection Load (0.2ms)[0m  [1mSELECT `collections`.* FROM `collections` WHERE `collections`.`id` = 3 LIMIT 1[0m
  [1m[35m (0.1ms)[0m  BEGIN
  [1m[36m (0.2ms)[0m  [1mUPDATE `collections` SET `disabled` = 0, `updated_at` = '2016-01-18 15:57:24' WHERE `collections`.`id` = 3[0m
  [1m[35m (0.5ms)[0m  COMMIT
  Rendered collections/disable_toggle.js.erb (0.4ms)
Completed 200 OK in 35ms (Views: 30.2ms | ActiveRecord: 1.0ms)


Started GET "/admin/collections" for 127.0.0.1 at 2016-01-18 17:00:12 +0100
Processing by CollectionsController#index as HTML
  Rendered shared/_restaurant_manage_tabs.html.erb (1.5ms)
  [1m[36mCollection Load (0.6ms)[0m  [1mSELECT `collections`.* FROM `collections` ORDER BY name ASC, created_at DESC LIMIT 12 OFFSET 0[0m
  [1m[35mCollectionImage Load (2.1ms)[0m  SELECT `collection_images`.* FROM `collection_images` WHERE (collection_id = 3) LIMIT 1
  [1m[36mCollectionImage Load (0.4ms)[0m  [1mSELECT `collection_images`.* FROM `collection_images` WHERE (collection_id = 2) LIMIT 1[0m
  [1m[35mCollectionImage Load (0.3ms)[0m  SELECT `collection_images`.* FROM `collection_images` WHERE (collection_id = 5) LIMIT 1
  [1m[36m (0.2ms)[0m  [1mSELECT COUNT(*) FROM `collections` [0m
  Rendered collections/index.erb within layouts/admin (40.8ms)
  [1m[35mUser Load (1.4ms)[0m  SELECT `users`.* FROM `users` WHERE `users`.`id` = 1 LIMIT 1
Completed 200 OK in 88ms (Views: 81.6ms | ActiveRecord: 5.2ms)


Started GET "/collection/5/edit" for 127.0.0.1 at 2016-01-18 17:00:15 +0100
Processing by CollectionsController#edit_collection as HTML
  Parameters: {"id"=>"5"}
  [1m[36mUser Load (0.3ms)[0m  [1mSELECT `users`.* FROM `users` WHERE `users`.`id` = 1 LIMIT 1[0m
  [1m[35mCollection Load (0.4ms)[0m  SELECT `collections`.* FROM `collections` WHERE `collections`.`id` = 5 LIMIT 1
  [1m[36mCollectionImage Load (0.8ms)[0m  [1mSELECT `collection_images`.* FROM `collection_images` WHERE (collection_id = 5) LIMIT 1[0m
  Rendered collections/_collection_form.html.erb (17.1ms)
  [1m[35mRestaurant Load (3.4ms)[0m  SELECT `restaurants`.* FROM `restaurants` WHERE `restaurants`.`disabled` = 0
  Rendered collections/_collection_restaurants_form.html.erb (93.1ms)
  [1m[36mRestaurant Load (0.4ms)[0m  [1mSELECT `restaurants`.* FROM `restaurants` INNER JOIN `collection_restaurants` ON `restaurants`.`id` = `collection_restaurants`.`restaurant_id` WHERE `collection_restaurants`.`collection_id` = 5[0m
  Rendered collections/_collection_restaurants_list.html.erb (3.7ms)
  Rendered collections/edit_collection.html.erb within layouts/admin (129.0ms)
Completed 200 OK in 152ms (Views: 141.2ms | ActiveRecord: 5.3ms)


Started GET "/collection/3/edit" for 127.0.0.1 at 2016-01-18 17:17:31 +0100
Processing by CollectionsController#edit_collection as HTML
  Parameters: {"id"=>"3"}
  [1m[35mUser Load (0.2ms)[0m  SELECT `users`.* FROM `users` WHERE `users`.`id` = 1 LIMIT 1
  [1m[36mCollection Load (0.3ms)[0m  [1mSELECT `collections`.* FROM `collections` WHERE `collections`.`id` = 3 LIMIT 1[0m
  [1m[35m (0.4ms)[0m  SELECT COUNT(*) FROM `filter_types` WHERE (code = 'features')
  [1m[36m (0.4ms)[0m  [1mSELECT COUNT(*) FROM `filters` WHERE (code = 'offer')[0m
  [1m[35mCollectionImage Load (0.2ms)[0m  SELECT `collection_images`.* FROM `collection_images` WHERE (collection_id = 3) LIMIT 1
  Rendered collections/_collection_form.html.erb (52.6ms)
  [1m[36mRestaurant Load (4.3ms)[0m  [1mSELECT `restaurants`.* FROM `restaurants` WHERE `restaurants`.`disabled` = 0[0m
  Rendered collections/_collection_restaurants_form.html.erb (154.3ms)
  [1m[35mRestaurant Load (1.2ms)[0m  SELECT `restaurants`.* FROM `restaurants` INNER JOIN `collection_restaurants` ON `restaurants`.`id` = `collection_restaurants`.`restaurant_id` WHERE `collection_restaurants`.`collection_id` = 3
  Rendered collections/_collection_restaurants_list.html.erb (11.3ms)
  Rendered collections/edit_collection.html.erb within layouts/admin (266.7ms)
Completed 200 OK in 708ms (Views: 281.8ms | ActiveRecord: 23.4ms)


Started POST "/admin/collections/3/remove_restaurant/22" for 127.0.0.1 at 2016-01-18 17:17:45 +0100
Processing by CollectionsController#remove_restaurant as JS
  Parameters: {"id"=>"3", "restaurant_id"=>"22"}
  [1m[36mCollection Load (0.3ms)[0m  [1mSELECT `collections`.* FROM `collections` WHERE `collections`.`id` = 3 LIMIT 1[0m
  [1m[35mRestaurant Load (0.3ms)[0m  SELECT `restaurants`.* FROM `restaurants` INNER JOIN `collection_restaurants` ON `restaurants`.`id` = `collection_restaurants`.`restaurant_id` WHERE `collection_restaurants`.`collection_id` = 3 AND `restaurants`.`slug` = '22' LIMIT 1
  [1m[36mRestaurant Load (0.3ms)[0m  [1mSELECT `restaurants`.* FROM `restaurants` INNER JOIN `collection_restaurants` ON `restaurants`.`id` = `collection_restaurants`.`restaurant_id` WHERE `collection_restaurants`.`collection_id` = 3 AND `restaurants`.`id` = 22 LIMIT 1[0m
  [1m[35m (0.1ms)[0m  BEGIN
  [1m[36m (0.2ms)[0m  [1mDELETE FROM `collection_restaurants` WHERE `collection_restaurants`.`collection_id` = 3 AND `collection_restaurants`.`restaurant_id` IN (22)[0m
  [1m[35m (0.9ms)[0m  COMMIT
  Rendered collections/remove_restaurant.js.erb (1.9ms)
Completed 500 Internal Server Error in 42ms

ActionView::Template::Error (Called id for nil, which would mistakenly be 8 -- if you really wanted the id of nil, use object_id):
    1: <% if @status == 'success' %>
    2: $("#restaurant_<%= @restaurant.id %>").remove();
    3: <% end %>
  app/views/collections/remove_restaurant.js.erb:2:in `_app_views_collections_remove_restaurant_js_erb___1458092360494514018_70236425833600'
  app/controllers/collections_controller.rb:241:in `remove_restaurant'


  Rendered /Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_dispatch/middleware/templates/rescues/_trace.erb (2.0ms)
  Rendered /Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_dispatch/middleware/templates/rescues/_request_and_response.erb (1.4ms)
  Rendered /Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_dispatch/middleware/templates/rescues/template_error.erb within rescues/layout (45.5ms)


Started GET "/collection/3/edit" for 127.0.0.1 at 2016-01-18 17:20:56 +0100
Processing by CollectionsController#edit_collection as HTML
  Parameters: {"id"=>"3"}
  [1m[36mUser Load (0.2ms)[0m  [1mSELECT `users`.* FROM `users` WHERE `users`.`id` = 1 LIMIT 1[0m
  [1m[35mCollection Load (0.2ms)[0m  SELECT `collections`.* FROM `collections` WHERE `collections`.`id` = 3 LIMIT 1
  [1m[36m (0.3ms)[0m  [1mSELECT COUNT(*) FROM `filter_types` WHERE (code = 'features')[0m
  [1m[35m (0.2ms)[0m  SELECT COUNT(*) FROM `filters` WHERE (code = 'offer')
  [1m[36mCollectionImage Load (0.2ms)[0m  [1mSELECT `collection_images`.* FROM `collection_images` WHERE (collection_id = 3) LIMIT 1[0m
  Rendered collections/_collection_form.html.erb (46.8ms)
  [1m[35mRestaurant Load (3.2ms)[0m  SELECT `restaurants`.* FROM `restaurants` WHERE `restaurants`.`disabled` = 0
  Rendered collections/_collection_restaurants_form.html.erb (106.0ms)
  [1m[36mRestaurant Load (0.4ms)[0m  [1mSELECT `restaurants`.* FROM `restaurants` INNER JOIN `collection_restaurants` ON `restaurants`.`id` = `collection_restaurants`.`restaurant_id` WHERE `collection_restaurants`.`collection_id` = 3[0m
  Rendered collections/_collection_restaurants_list.html.erb (5.2ms)
  Rendered collections/edit_collection.html.erb within layouts/admin (176.7ms)
Completed 200 OK in 526ms (Views: 200.7ms | ActiveRecord: 19.6ms)


Started POST "/admin/collections/3/remove_restaurant/5" for 127.0.0.1 at 2016-01-18 17:21:02 +0100
Processing by CollectionsController#remove_restaurant as JS
  Parameters: {"id"=>"3", "restaurant_id"=>"5"}
  [1m[35mCollection Load (1.3ms)[0m  SELECT `collections`.* FROM `collections` WHERE `collections`.`id` = 3 LIMIT 1
  [1m[36mRestaurant Load (0.5ms)[0m  [1mSELECT `restaurants`.* FROM `restaurants` INNER JOIN `collection_restaurants` ON `restaurants`.`id` = `collection_restaurants`.`restaurant_id` WHERE `collection_restaurants`.`collection_id` = 3 AND `restaurants`.`slug` = '5' LIMIT 1[0m
  [1m[35mRestaurant Load (0.3ms)[0m  SELECT `restaurants`.* FROM `restaurants` INNER JOIN `collection_restaurants` ON `restaurants`.`id` = `collection_restaurants`.`restaurant_id` WHERE `collection_restaurants`.`collection_id` = 3 AND `restaurants`.`id` = 5 LIMIT 1
Completed 500 Internal Server Error in 40ms

NameError (undefined local variable or method `restaurant' for #<CollectionsController:0x007fc259bcc0c8>):
  app/controllers/collections_controller.rb:235:in `remove_restaurant'


  Rendered /Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_dispatch/middleware/templates/rescues/_trace.erb (2.2ms)
  Rendered /Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_dispatch/middleware/templates/rescues/_request_and_response.erb (1.4ms)
  Rendered /Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_dispatch/middleware/templates/rescues/diagnostics.erb within rescues/layout (55.8ms)


Started GET "/collection/3/edit" for 127.0.0.1 at 2016-01-18 17:21:33 +0100
Processing by CollectionsController#edit_collection as HTML
  Parameters: {"id"=>"3"}
  [1m[36mUser Load (0.3ms)[0m  [1mSELECT `users`.* FROM `users` WHERE `users`.`id` = 1 LIMIT 1[0m
  [1m[35mCollection Load (0.2ms)[0m  SELECT `collections`.* FROM `collections` WHERE `collections`.`id` = 3 LIMIT 1
  [1m[36m (0.2ms)[0m  [1mSELECT COUNT(*) FROM `filter_types` WHERE (code = 'features')[0m
  [1m[35m (0.2ms)[0m  SELECT COUNT(*) FROM `filters` WHERE (code = 'offer')
  [1m[36mCollectionImage Load (0.3ms)[0m  [1mSELECT `collection_images`.* FROM `collection_images` WHERE (collection_id = 3) LIMIT 1[0m
  Rendered collections/_collection_form.html.erb (42.3ms)
  [1m[35mRestaurant Load (3.2ms)[0m  SELECT `restaurants`.* FROM `restaurants` WHERE `restaurants`.`disabled` = 0
  Rendered collections/_collection_restaurants_form.html.erb (126.7ms)
  [1m[36mRestaurant Load (0.4ms)[0m  [1mSELECT `restaurants`.* FROM `restaurants` INNER JOIN `collection_restaurants` ON `restaurants`.`id` = `collection_restaurants`.`restaurant_id` WHERE `collection_restaurants`.`collection_id` = 3[0m
  Rendered collections/_collection_restaurants_list.html.erb (4.3ms)
  Rendered collections/edit_collection.html.erb within layouts/admin (176.9ms)
Completed 200 OK in 472ms (Views: 181.5ms | ActiveRecord: 20.3ms)


Started POST "/admin/collections/3/remove_restaurant/5" for 127.0.0.1 at 2016-01-18 17:21:38 +0100
Processing by CollectionsController#remove_restaurant as JS
  Parameters: {"id"=>"3", "restaurant_id"=>"5"}
  [1m[35mCollection Load (1.8ms)[0m  SELECT `collections`.* FROM `collections` WHERE `collections`.`id` = 3 LIMIT 1
  [1m[36mRestaurant Load (9.3ms)[0m  [1mSELECT `restaurants`.* FROM `restaurants` INNER JOIN `collection_restaurants` ON `restaurants`.`id` = `collection_restaurants`.`restaurant_id` WHERE `collection_restaurants`.`collection_id` = 3 AND `restaurants`.`slug` = '5' LIMIT 1[0m
  [1m[35mRestaurant Load (2.5ms)[0m  SELECT `restaurants`.* FROM `restaurants` INNER JOIN `collection_restaurants` ON `restaurants`.`id` = `collection_restaurants`.`restaurant_id` WHERE `collection_restaurants`.`collection_id` = 3 AND `restaurants`.`id` = 5 LIMIT 1
  [1m[36m (0.2ms)[0m  [1mBEGIN[0m
  [1m[35m (0.8ms)[0m  DELETE FROM `collection_restaurants` WHERE `collection_restaurants`.`collection_id` = 3 AND `collection_restaurants`.`restaurant_id` IN (5)
  [1m[36m (0.5ms)[0m  [1mCOMMIT[0m
  Rendered collections/remove_restaurant.js.erb (0.9ms)
Completed 200 OK in 79ms (Views: 42.8ms | ActiveRecord: 15.0ms)


Started GET "/admin/restaurants" for 127.0.0.1 at 2016-01-18 17:21:44 +0100
Processing by RestaurantsController#index as HTML
  [1m[35mUser Load (0.3ms)[0m  SELECT `users`.* FROM `users` WHERE `users`.`id` = 1 LIMIT 1
  Rendered shared/_restaurant_manage_tabs.html.erb (1.1ms)
  Rendered restaurants/_condition_fields.html.erb (19.7ms)
  [1m[36mRestaurant Load (0.8ms)[0m  [1mSELECT `restaurants`.* FROM `restaurants` ORDER BY disabled ASC,created_at DESC LIMIT 12 OFFSET 0[0m
  [1m[35mPhoto Load (0.4ms)[0m  SELECT `photos`.* FROM `photos` WHERE (restaurant_id = 876 and cover = true and status = 1) LIMIT 1
  [1m[36mPhoto Load (0.4ms)[0m  [1mSELECT `photos`.* FROM `photos` WHERE `photos`.`restaurant_id` = 876 AND `photos`.`status` = 1 ORDER BY restaurant_id ASC, created_at DESC LIMIT 1[0m
  [1m[35mPhoto Load (0.3ms)[0m  SELECT `photos`.* FROM `photos` WHERE (restaurant_id = 851 and cover = true and status = 1) LIMIT 1
  [1m[36mPhoto Load (0.3ms)[0m  [1mSELECT `photos`.* FROM `photos` WHERE `photos`.`restaurant_id` = 851 AND `photos`.`status` = 1 ORDER BY restaurant_id ASC, created_at DESC LIMIT 1[0m
  [1m[35mPhoto Load (0.3ms)[0m  SELECT `photos`.* FROM `photos` WHERE (restaurant_id = 693 and cover = true and status = 1) LIMIT 1
  [1m[36mPhoto Load (0.3ms)[0m  [1mSELECT `photos`.* FROM `photos` WHERE `photos`.`restaurant_id` = 693 AND `photos`.`status` = 1 ORDER BY restaurant_id ASC, created_at DESC LIMIT 1[0m
  [1m[35mPhoto Load (0.4ms)[0m  SELECT `photos`.* FROM `photos` WHERE (restaurant_id = 686 and cover = true and status = 1) LIMIT 1
  [1m[36mPhoto Load (0.3ms)[0m  [1mSELECT `photos`.* FROM `photos` WHERE `photos`.`restaurant_id` = 686 AND `photos`.`status` = 1 ORDER BY restaurant_id ASC, created_at DESC LIMIT 1[0m
  [1m[35mPhoto Load (0.3ms)[0m  SELECT `photos`.* FROM `photos` WHERE (restaurant_id = 669 and cover = true and status = 1) LIMIT 1
  [1m[36mPhoto Load (0.3ms)[0m  [1mSELECT `photos`.* FROM `photos` WHERE `photos`.`restaurant_id` = 669 AND `photos`.`status` = 1 ORDER BY restaurant_id ASC, created_at DESC LIMIT 1[0m
  [1m[35mPhoto Load (0.4ms)[0m  SELECT `photos`.* FROM `photos` WHERE (restaurant_id = 251 and cover = true and status = 1) LIMIT 1
  [1m[36mPhoto Load (0.4ms)[0m  [1mSELECT `photos`.* FROM `photos` WHERE `photos`.`restaurant_id` = 251 AND `photos`.`status` = 1 ORDER BY restaurant_id ASC, created_at DESC LIMIT 1[0m
  [1m[35mPhoto Load (0.3ms)[0m  SELECT `photos`.* FROM `photos` WHERE (restaurant_id = 250 and cover = true and status = 1) LIMIT 1
  [1m[36mPhoto Load (0.3ms)[0m  [1mSELECT `photos`.* FROM `photos` WHERE `photos`.`restaurant_id` = 250 AND `photos`.`status` = 1 ORDER BY restaurant_id ASC, created_at DESC LIMIT 1[0m
  [1m[35mPhoto Load (0.3ms)[0m  SELECT `photos`.* FROM `photos` WHERE (restaurant_id = 237 and cover = true and status = 1) LIMIT 1
  [1m[36mPhoto Load (0.3ms)[0m  [1mSELECT `photos`.* FROM `photos` WHERE `photos`.`restaurant_id` = 237 AND `photos`.`status` = 1 ORDER BY restaurant_id ASC, created_at DESC LIMIT 1[0m
  [1m[35mPhoto Load (0.3ms)[0m  SELECT `photos`.* FROM `photos` WHERE (restaurant_id = 231 and cover = true and status = 1) LIMIT 1
  [1m[36mPhoto Load (0.3ms)[0m  [1mSELECT `photos`.* FROM `photos` WHERE `photos`.`restaurant_id` = 231 AND `photos`.`status` = 1 ORDER BY restaurant_id ASC, created_at DESC LIMIT 1[0m
  [1m[35mPhoto Load (0.3ms)[0m  SELECT `photos`.* FROM `photos` WHERE (restaurant_id = 222 and cover = true and status = 1) LIMIT 1
  [1m[36mPhoto Load (0.3ms)[0m  [1mSELECT `photos`.* FROM `photos` WHERE `photos`.`restaurant_id` = 222 AND `photos`.`status` = 1 ORDER BY restaurant_id ASC, created_at DESC LIMIT 1[0m
  [1m[35mPhoto Load (0.3ms)[0m  SELECT `photos`.* FROM `photos` WHERE (restaurant_id = 221 and cover = true and status = 1) LIMIT 1
  [1m[36mPhoto Load (0.3ms)[0m  [1mSELECT `photos`.* FROM `photos` WHERE `photos`.`restaurant_id` = 221 AND `photos`.`status` = 1 ORDER BY restaurant_id ASC, created_at DESC LIMIT 1[0m
  [1m[35mPhoto Load (0.3ms)[0m  SELECT `photos`.* FROM `photos` WHERE (restaurant_id = 216 and cover = true and status = 1) LIMIT 1
  [1m[36mPhoto Load (0.3ms)[0m  [1mSELECT `photos`.* FROM `photos` WHERE `photos`.`restaurant_id` = 216 AND `photos`.`status` = 1 ORDER BY restaurant_id ASC, created_at DESC LIMIT 1[0m
  [1m[35m (0.4ms)[0m  SELECT COUNT(*) FROM `restaurants` 
  Rendered restaurants/index.html.erb within layouts/admin (154.5ms)
Completed 200 OK in 183ms (Views: 167.6ms | ActiveRecord: 11.4ms)


Started GET "/admin/collections" for 127.0.0.1 at 2016-01-18 17:21:46 +0100
Processing by CollectionsController#index as HTML
  Rendered shared/_restaurant_manage_tabs.html.erb (0.7ms)
  [1m[36mCollection Load (0.4ms)[0m  [1mSELECT `collections`.* FROM `collections` ORDER BY name ASC, created_at DESC LIMIT 12 OFFSET 0[0m
  [1m[35mCollectionImage Load (0.2ms)[0m  SELECT `collection_images`.* FROM `collection_images` WHERE (collection_id = 3) LIMIT 1
  [1m[36mCollectionImage Load (0.2ms)[0m  [1mSELECT `collection_images`.* FROM `collection_images` WHERE (collection_id = 2) LIMIT 1[0m
  [1m[35mCollectionImage Load (0.2ms)[0m  SELECT `collection_images`.* FROM `collection_images` WHERE (collection_id = 5) LIMIT 1
  [1m[36m (0.1ms)[0m  [1mSELECT COUNT(*) FROM `collections` [0m
  Rendered collections/index.erb within layouts/admin (16.7ms)
  [1m[35mUser Load (0.3ms)[0m  SELECT `users`.* FROM `users` WHERE `users`.`id` = 1 LIMIT 1
Completed 200 OK in 42ms (Views: 40.0ms | ActiveRecord: 1.3ms)


Started GET "/admin/collections/destroy/2" for 127.0.0.1 at 2016-01-18 17:21:52 +0100
Processing by CollectionsController#destroy as HTML
  Parameters: {"id"=>"2"}
  [1m[36mCollection Load (0.3ms)[0m  [1mSELECT `collections`.* FROM `collections` WHERE `collections`.`id` = 2 LIMIT 1[0m
  [1m[35m (0.1ms)[0m  BEGIN
  [1m[36mCollectionImage Load (0.2ms)[0m  [1mSELECT `collection_images`.* FROM `collection_images` WHERE `collection_images`.`collection_id` = 2 LIMIT 1[0m
  [1m[35mSQL (0.3ms)[0m  DELETE FROM `collection_images` WHERE `collection_images`.`id` = 2
  [1m[36mRestaurant Load (0.3ms)[0m  [1mSELECT `restaurants`.* FROM `restaurants` INNER JOIN `collection_restaurants` ON `restaurants`.`id` = `collection_restaurants`.`restaurant_id` WHERE `collection_restaurants`.`collection_id` = 2[0m
  [1m[35m (0.2ms)[0m  DELETE FROM `collection_restaurants` WHERE `collection_restaurants`.`collection_id` = 2 AND `collection_restaurants`.`restaurant_id` IN (1, 2)
  [1m[36mSQL (11.3ms)[0m  [1mDELETE FROM `collections` WHERE `collections`.`id` = 2[0m
  [1m[35m (0.5ms)[0m  COMMIT
Redirected to http://localhost:3000/admin/collections
Completed 302 Found in 46ms (ActiveRecord: 13.1ms)


Started GET "/admin/collections" for 127.0.0.1 at 2016-01-18 17:21:52 +0100
Processing by CollectionsController#index as HTML
  Rendered shared/_restaurant_manage_tabs.html.erb (1.4ms)
  [1m[36mCollection Load (0.4ms)[0m  [1mSELECT `collections`.* FROM `collections` ORDER BY name ASC, created_at DESC LIMIT 12 OFFSET 0[0m
  [1m[35mCollectionImage Load (0.3ms)[0m  SELECT `collection_images`.* FROM `collection_images` WHERE (collection_id = 3) LIMIT 1
  [1m[36mCollectionImage Load (0.2ms)[0m  [1mSELECT `collection_images`.* FROM `collection_images` WHERE (collection_id = 5) LIMIT 1[0m
  [1m[35m (0.5ms)[0m  SELECT COUNT(*) FROM `collections` 
  Rendered collections/index.erb within layouts/admin (19.6ms)
  [1m[36mUser Load (0.4ms)[0m  [1mSELECT `users`.* FROM `users` WHERE `users`.`id` = 1 LIMIT 1[0m
Completed 200 OK in 30ms (Views: 27.3ms | ActiveRecord: 1.7ms)


Started GET "/admin/collections?_=1453134181690" for 127.0.0.1 at 2016-01-18 17:23:01 +0100
Processing by CollectionsController#index as JS
  Parameters: {"_"=>"1453134181690"}
  Rendered shared/_restaurant_manage_tabs.html.erb (1.6ms)
  [1m[35mCollection Load (0.9ms)[0m  SELECT `collections`.* FROM `collections` ORDER BY name ASC, created_at DESC LIMIT 12 OFFSET 0
  [1m[36mCollectionImage Load (0.3ms)[0m  [1mSELECT `collection_images`.* FROM `collection_images` WHERE (collection_id = 3) LIMIT 1[0m
  [1m[35mCollectionImage Load (0.3ms)[0m  SELECT `collection_images`.* FROM `collection_images` WHERE (collection_id = 5) LIMIT 1
  [1m[36m (0.8ms)[0m  [1mSELECT COUNT(*) FROM `collections` [0m
  Rendered collections/index.erb within layouts/admin (42.2ms)
  [1m[35mUser Load (1.5ms)[0m  SELECT `users`.* FROM `users` WHERE `users`.`id` = 1 LIMIT 1
Completed 200 OK in 88ms (Views: 83.5ms | ActiveRecord: 3.8ms)


Started GET "/admin/collections/admin_new_collection" for 127.0.0.1 at 2016-01-18 17:26:24 +0100
Processing by CollectionsController#admin_new_collection as HTML
  [1m[36mUser Load (0.3ms)[0m  [1mSELECT `users`.* FROM `users` WHERE `users`.`id` = 1 LIMIT 1[0m
  [1m[35m (0.2ms)[0m  SELECT COUNT(*) FROM `filter_types` WHERE (code = 'features')
  [1m[36m (0.2ms)[0m  [1mSELECT COUNT(*) FROM `filters` WHERE (code = 'offer')[0m
  Rendered collections/_collection_form.html.erb (7.2ms)
  Rendered collections/admin_new_collection.html.erb within layouts/admin (17.0ms)
Completed 200 OK in 477ms (Views: 77.8ms | ActiveRecord: 20.2ms)


Started POST "/admin/collections" for 127.0.0.1 at 2016-01-18 17:26:33 +0100
Processing by CollectionsController#create as HTML
  Parameters: {"utf8"=>"âœ“", "authenticity_token"=>"cajmPApKUoLTDgL4nYG/B3GUhj8fezKDJZWxee28cyM=", "admin"=>"true", "collection"=>{"name"=>"test1", "description"=>"test1"}}
  [1m[35mCollection Load (0.4ms)[0m  SELECT `collections`.* FROM `collections` WHERE `collections`.`name` = 'test1' LIMIT 1
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO `collections` (`created_at`, `description`, `disabled`, `image_url`, `name`, `updated_at`) VALUES ('2016-01-18 16:26:33', 'test1', NULL, NULL, 'test1', '2016-01-18 16:26:33')
  [1m[36m (0.6ms)[0m  [1mCOMMIT[0m
Redirected to http://localhost:3000/collection/6/edit
Completed 302 Found in 6ms (ActiveRecord: 1.2ms)


Started GET "/collection/6/edit" for 127.0.0.1 at 2016-01-18 17:26:33 +0100
Processing by CollectionsController#edit_collection as HTML
  Parameters: {"id"=>"6"}
  [1m[35mUser Load (0.3ms)[0m  SELECT `users`.* FROM `users` WHERE `users`.`id` = 1 LIMIT 1
  [1m[36mCollection Load (0.2ms)[0m  [1mSELECT `collections`.* FROM `collections` WHERE `collections`.`id` = 6 LIMIT 1[0m
  [1m[35mCollectionImage Load (0.3ms)[0m  SELECT `collection_images`.* FROM `collection_images` WHERE (collection_id = 6) LIMIT 1
  Rendered collections/_collection_form.html.erb (34.9ms)
  [1m[36mRestaurant Load (3.1ms)[0m  [1mSELECT `restaurants`.* FROM `restaurants` WHERE `restaurants`.`disabled` = 0[0m
  Rendered collections/_collection_restaurants_form.html.erb (90.9ms)
  [1m[35mRestaurant Load (0.4ms)[0m  SELECT `restaurants`.* FROM `restaurants` INNER JOIN `collection_restaurants` ON `restaurants`.`id` = `collection_restaurants`.`restaurant_id` WHERE `collection_restaurants`.`collection_id` = 6
  Rendered collections/_collection_restaurants_list.html.erb (2.7ms)
  Rendered collections/edit_collection.html.erb within layouts/admin (157.3ms)
Completed 200 OK in 180ms (Views: 168.1ms | ActiveRecord: 8.7ms)


Started PUT "/admin/collections/6" for 127.0.0.1 at 2016-01-18 17:26:40 +0100
Processing by CollectionsController#update as HTML
  Parameters: {"utf8"=>"âœ“", "authenticity_token"=>"cajmPApKUoLTDgL4nYG/B3GUhj8fezKDJZWxee28cyM=", "admin"=>"true", "collection"=>{"name"=>"test1", "description"=>"test1"}, "collection_image"=>{"image"=>#<ActionDispatch::Http::UploadedFile:0x007fc262702ef8 @original_filename="steak.png", @content_type="image/png", @headers="Content-Disposition: form-data; name=\"collection_image[image]\"; filename=\"steak.png\"\r\nContent-Type: image/png\r\n", @tempfile=#<Tempfile:/var/folders/rf/q4l8n5k56pnbjgkdtzrhq_w00000gn/T/RackMultipart20160118-19170-7ttqpo>>}, "id"=>"6"}
  [1m[36mUser Load (0.3ms)[0m  [1mSELECT `users`.* FROM `users` WHERE `users`.`id` = 1 LIMIT 1[0m
  [1m[35mCollection Load (0.2ms)[0m  SELECT `collections`.* FROM `collections` WHERE `collections`.`id` = 6 LIMIT 1
  [1m[36mCollectionImage Load (0.2ms)[0m  [1mSELECT `collection_images`.* FROM `collection_images` WHERE `collection_images`.`collection_id` = 6 LIMIT 1[0m
Completed 500 Internal Server Error in 6ms

NoMethodError (undefined method `new' for nil:NilClass):
  app/controllers/collections_controller.rb:133:in `update'


  Rendered /Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_dispatch/middleware/templates/rescues/_trace.erb (1.4ms)
  Rendered /Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_dispatch/middleware/templates/rescues/_request_and_response.erb (1.1ms)
  Rendered /Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_dispatch/middleware/templates/rescues/diagnostics.erb within rescues/layout (43.9ms)


Started PUT "/admin/collections/6" for 127.0.0.1 at 2016-01-18 17:32:16 +0100
Processing by CollectionsController#update as HTML
  Parameters: {"utf8"=>"âœ“", "authenticity_token"=>"cajmPApKUoLTDgL4nYG/B3GUhj8fezKDJZWxee28cyM=", "admin"=>"true", "collection"=>{"name"=>"test1", "description"=>"test1"}, "collection_image"=>{"image"=>#<ActionDispatch::Http::UploadedFile:0x007fc26128a728 @original_filename="steak.png", @content_type="image/png", @headers="Content-Disposition: form-data; name=\"collection_image[image]\"; filename=\"steak.png\"\r\nContent-Type: image/png\r\n", @tempfile=#<Tempfile:/var/folders/rf/q4l8n5k56pnbjgkdtzrhq_w00000gn/T/RackMultipart20160118-19170-4rp03b>>}, "id"=>"6"}
  [1m[35mUser Load (0.2ms)[0m  SELECT `users`.* FROM `users` WHERE `users`.`id` = 1 LIMIT 1
  [1m[36mCollection Load (0.2ms)[0m  [1mSELECT `collections`.* FROM `collections` WHERE `collections`.`id` = 6 LIMIT 1[0m
  [1m[35mCollectionImage Load (0.2ms)[0m  SELECT `collection_images`.* FROM `collection_images` WHERE `collection_images`.`collection_id` = 6 LIMIT 1
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO `collection_images` (`collection_id`, `created_at`, `image_name`, `image_uid`, `text_content`, `text_hyperlink`, `text_title`, `updated_at`) VALUES (6, '2016-01-18 16:32:16', 'steak.png', '2016/01/18/17_32_16_630_steak.png', NULL, NULL, NULL, '2016-01-18 16:32:16')
  [1m[36m (0.4ms)[0m  [1mCOMMIT[0m
  [1m[35m (0.1ms)[0m  BEGIN
  [1m[36m (0.1ms)[0m  [1mCOMMIT[0m
  [1m[35m (0.1ms)[0m  BEGIN
  [1m[36m (0.1ms)[0m  [1mCOMMIT[0m
  [1m[35m (0.1ms)[0m  BEGIN
  [1m[36m (0.1ms)[0m  [1mCOMMIT[0m
Redirected to http://localhost:3000/collection/6/edit
Completed 302 Found in 169ms (ActiveRecord: 8.1ms)


Started GET "/collection/6/edit" for 127.0.0.1 at 2016-01-18 17:32:16 +0100
Processing by CollectionsController#edit_collection as HTML
  Parameters: {"id"=>"6"}
  [1m[35mUser Load (0.3ms)[0m  SELECT `users`.* FROM `users` WHERE `users`.`id` = 1 LIMIT 1
  [1m[36mCollection Load (0.2ms)[0m  [1mSELECT `collections`.* FROM `collections` WHERE `collections`.`id` = 6 LIMIT 1[0m
  [1m[35m (0.2ms)[0m  SELECT COUNT(*) FROM `filter_types` WHERE (code = 'features')
  [1m[36m (0.2ms)[0m  [1mSELECT COUNT(*) FROM `filters` WHERE (code = 'offer')[0m
  [1m[35mCollectionImage Load (0.7ms)[0m  SELECT `collection_images`.* FROM `collection_images` WHERE (collection_id = 6) LIMIT 1
  Rendered collections/_collection_form.html.erb (9.6ms)
  [1m[36mRestaurant Load (3.5ms)[0m  [1mSELECT `restaurants`.* FROM `restaurants` WHERE `restaurants`.`disabled` = 0[0m
  Rendered collections/_collection_restaurants_form.html.erb (122.3ms)
  [1m[35mRestaurant Load (0.4ms)[0m  SELECT `restaurants`.* FROM `restaurants` INNER JOIN `collection_restaurants` ON `restaurants`.`id` = `collection_restaurants`.`restaurant_id` WHERE `collection_restaurants`.`collection_id` = 6
  Rendered collections/_collection_restaurants_list.html.erb (3.0ms)
  Rendered collections/edit_collection.html.erb within layouts/admin (153.1ms)
Completed 200 OK in 310ms (Views: 159.3ms | ActiveRecord: 13.5ms)


Started GET "/admin/restaurants" for 127.0.0.1 at 2016-01-18 17:32:21 +0100
Processing by RestaurantsController#index as HTML
  [1m[36mUser Load (0.5ms)[0m  [1mSELECT `users`.* FROM `users` WHERE `users`.`id` = 1 LIMIT 1[0m
  Rendered shared/_restaurant_manage_tabs.html.erb (1.2ms)
  Rendered restaurants/_condition_fields.html.erb (17.0ms)
  [1m[35mRestaurant Load (0.8ms)[0m  SELECT `restaurants`.* FROM `restaurants` ORDER BY disabled ASC,created_at DESC LIMIT 12 OFFSET 0
  [1m[36mPhoto Load (0.4ms)[0m  [1mSELECT `photos`.* FROM `photos` WHERE (restaurant_id = 876 and cover = true and status = 1) LIMIT 1[0m
  [1m[35mPhoto Load (0.3ms)[0m  SELECT `photos`.* FROM `photos` WHERE `photos`.`restaurant_id` = 876 AND `photos`.`status` = 1 ORDER BY restaurant_id ASC, created_at DESC LIMIT 1
  [1m[36mPhoto Load (0.4ms)[0m  [1mSELECT `photos`.* FROM `photos` WHERE (restaurant_id = 851 and cover = true and status = 1) LIMIT 1[0m
  [1m[35mPhoto Load (0.4ms)[0m  SELECT `photos`.* FROM `photos` WHERE `photos`.`restaurant_id` = 851 AND `photos`.`status` = 1 ORDER BY restaurant_id ASC, created_at DESC LIMIT 1
  [1m[36mPhoto Load (0.5ms)[0m  [1mSELECT `photos`.* FROM `photos` WHERE (restaurant_id = 693 and cover = true and status = 1) LIMIT 1[0m
  [1m[35mPhoto Load (0.4ms)[0m  SELECT `photos`.* FROM `photos` WHERE `photos`.`restaurant_id` = 693 AND `photos`.`status` = 1 ORDER BY restaurant_id ASC, created_at DESC LIMIT 1
  [1m[36mPhoto Load (0.3ms)[0m  [1mSELECT `photos`.* FROM `photos` WHERE (restaurant_id = 686 and cover = true and status = 1) LIMIT 1[0m
  [1m[35mPhoto Load (0.3ms)[0m  SELECT `photos`.* FROM `photos` WHERE `photos`.`restaurant_id` = 686 AND `photos`.`status` = 1 ORDER BY restaurant_id ASC, created_at DESC LIMIT 1
  [1m[36mPhoto Load (0.4ms)[0m  [1mSELECT `photos`.* FROM `photos` WHERE (restaurant_id = 669 and cover = true and status = 1) LIMIT 1[0m
  [1m[35mPhoto Load (0.3ms)[0m  SELECT `photos`.* FROM `photos` WHERE `photos`.`restaurant_id` = 669 AND `photos`.`status` = 1 ORDER BY restaurant_id ASC, created_at DESC LIMIT 1
  [1m[36mPhoto Load (0.3ms)[0m  [1mSELECT `photos`.* FROM `photos` WHERE (restaurant_id = 251 and cover = true and status = 1) LIMIT 1[0m
  [1m[35mPhoto Load (0.3ms)[0m  SELECT `photos`.* FROM `photos` WHERE `photos`.`restaurant_id` = 251 AND `photos`.`status` = 1 ORDER BY restaurant_id ASC, created_at DESC LIMIT 1
  [1m[36mPhoto Load (0.4ms)[0m  [1mSELECT `photos`.* FROM `photos` WHERE (restaurant_id = 250 and cover = true and status = 1) LIMIT 1[0m
  [1m[35mPhoto Load (0.3ms)[0m  SELECT `photos`.* FROM `photos` WHERE `photos`.`restaurant_id` = 250 AND `photos`.`status` = 1 ORDER BY restaurant_id ASC, created_at DESC LIMIT 1
  [1m[36mPhoto Load (0.4ms)[0m  [1mSELECT `photos`.* FROM `photos` WHERE (restaurant_id = 237 and cover = true and status = 1) LIMIT 1[0m
  [1m[35mPhoto Load (0.3ms)[0m  SELECT `photos`.* FROM `photos` WHERE `photos`.`restaurant_id` = 237 AND `photos`.`status` = 1 ORDER BY restaurant_id ASC, created_at DESC LIMIT 1
  [1m[36mPhoto Load (0.4ms)[0m  [1mSELECT `photos`.* FROM `photos` WHERE (restaurant_id = 231 and cover = true and status = 1) LIMIT 1[0m
  [1m[35mPhoto Load (0.3ms)[0m  SELECT `photos`.* FROM `photos` WHERE `photos`.`restaurant_id` = 231 AND `photos`.`status` = 1 ORDER BY restaurant_id ASC, created_at DESC LIMIT 1
  [1m[36mPhoto Load (0.4ms)[0m  [1mSELECT `photos`.* FROM `photos` WHERE (restaurant_id = 222 and cover = true and status = 1) LIMIT 1[0m
  [1m[35mPhoto Load (0.3ms)[0m  SELECT `photos`.* FROM `photos` WHERE `photos`.`restaurant_id` = 222 AND `photos`.`status` = 1 ORDER BY restaurant_id ASC, created_at DESC LIMIT 1
  [1m[36mPhoto Load (0.3ms)[0m  [1mSELECT `photos`.* FROM `photos` WHERE (restaurant_id = 221 and cover = true and status = 1) LIMIT 1[0m
  [1m[35mPhoto Load (0.3ms)[0m  SELECT `photos`.* FROM `photos` WHERE `photos`.`restaurant_id` = 221 AND `photos`.`status` = 1 ORDER BY restaurant_id ASC, created_at DESC LIMIT 1
  [1m[36mPhoto Load (0.3ms)[0m  [1mSELECT `photos`.* FROM `photos` WHERE (restaurant_id = 216 and cover = true and status = 1) LIMIT 1[0m
  [1m[35mPhoto Load (0.3ms)[0m  SELECT `photos`.* FROM `photos` WHERE `photos`.`restaurant_id` = 216 AND `photos`.`status` = 1 ORDER BY restaurant_id ASC, created_at DESC LIMIT 1
  [1m[36m (0.4ms)[0m  [1mSELECT COUNT(*) FROM `restaurants` [0m
  Rendered restaurants/index.html.erb within layouts/admin (166.2ms)
Completed 200 OK in 192ms (Views: 176.4ms | ActiveRecord: 11.6ms)


Started GET "/admin/collections" for 127.0.0.1 at 2016-01-18 17:32:26 +0100
Processing by CollectionsController#index as HTML
  Rendered shared/_restaurant_manage_tabs.html.erb (0.8ms)
  [1m[35mCollection Load (0.7ms)[0m  SELECT `collections`.* FROM `collections` ORDER BY name ASC, created_at DESC LIMIT 12 OFFSET 0
  [1m[36mCollectionImage Load (0.3ms)[0m  [1mSELECT `collection_images`.* FROM `collection_images` WHERE (collection_id = 3) LIMIT 1[0m
  [1m[35mCollectionImage Load (0.2ms)[0m  SELECT `collection_images`.* FROM `collection_images` WHERE (collection_id = 5) LIMIT 1
  [1m[36mCollectionImage Load (0.2ms)[0m  [1mSELECT `collection_images`.* FROM `collection_images` WHERE (collection_id = 6) LIMIT 1[0m
  [1m[35m (0.3ms)[0m  SELECT COUNT(*) FROM `collections` 
  Rendered collections/index.erb within layouts/admin (24.0ms)
  [1m[36mUser Load (0.8ms)[0m  [1mSELECT `users`.* FROM `users` WHERE `users`.`id` = 1 LIMIT 1[0m
Completed 200 OK in 90ms (Views: 86.0ms | ActiveRecord: 2.5ms)


Started GET "/admin/collections" for 127.0.0.1 at 2016-01-18 17:44:26 +0100
Processing by CollectionsController#index as HTML
  Rendered shared/_restaurant_manage_tabs.html.erb (202.2ms)
  [1m[35mCollection Load (0.5ms)[0m  SELECT `collections`.* FROM `collections` ORDER BY name ASC, created_at DESC LIMIT 12 OFFSET 0
  [1m[36mCollectionImage Load (0.2ms)[0m  [1mSELECT `collection_images`.* FROM `collection_images` WHERE (collection_id = 3) LIMIT 1[0m
  Rendered collections/index.erb within layouts/admin (363.8ms)
Completed 500 Internal Server Error in 391ms

ActionView::Template::Error (undefined method `remove_collection_path' for #<#<Class:0x007fc243a2dea8>:0x007fc243a2cbe8>):
    38:                 <span class="open-san"><%= t('collections.edit') %></span>
    39:             <% end %>
    40:             <%= disable_collection_button collection %>
    41:             <%= remove_collection_button collection %>
    42:           </div>
    43:         </td>
    44:       </tr>
  app/helpers/collections_helper.rb:27:in `remove_collection_button'
  app/views/collections/index.erb:41:in `block in _app_views_collections_index_erb__783245794132090365_70236380011520'
  app/views/collections/index.erb:27:in `_app_views_collections_index_erb__783245794132090365_70236380011520'
  app/controllers/collections_controller.rb:20:in `index'


  Rendered /Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_dispatch/middleware/templates/rescues/_trace.erb (1.5ms)
  Rendered /Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_dispatch/middleware/templates/rescues/_request_and_response.erb (1.0ms)
  Rendered /Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_dispatch/middleware/templates/rescues/template_error.erb within rescues/layout (43.5ms)


Started GET "/admin/collections" for 127.0.0.1 at 2016-01-18 17:44:48 +0100
Processing by CollectionsController#index as HTML
  Rendered shared/_restaurant_manage_tabs.html.erb (0.7ms)
  [1m[35mCollection Load (0.2ms)[0m  SELECT `collections`.* FROM `collections` ORDER BY name ASC, created_at DESC LIMIT 12 OFFSET 0
  [1m[36mCollectionImage Load (0.2ms)[0m  [1mSELECT `collection_images`.* FROM `collection_images` WHERE (collection_id = 3) LIMIT 1[0m
  Rendered collections/index.erb within layouts/admin (191.9ms)
Completed 500 Internal Server Error in 200ms

ActionView::Template::Error (undefined local variable or method `restaurant' for #<#<Class:0x007fc261320818>:0x007fc2439475c0>):
    38:                 <span class="open-san"><%= t('collections.edit') %></span>
    39:             <% end %>
    40:             <%= disable_collection_button collection %>
    41:             <%= remove_collection_button collection %>
    42:           </div>
    43:         </td>
    44:       </tr>
  app/helpers/collections_helper.rb:27:in `remove_collection_button'
  app/views/collections/index.erb:41:in `block in _app_views_collections_index_erb__783245794132090365_70236380011520'
  app/views/collections/index.erb:27:in `_app_views_collections_index_erb__783245794132090365_70236380011520'
  app/controllers/collections_controller.rb:20:in `index'


  Rendered /Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_dispatch/middleware/templates/rescues/_trace.erb (1.2ms)
  Rendered /Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_dispatch/middleware/templates/rescues/_request_and_response.erb (0.8ms)
  Rendered /Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_dispatch/middleware/templates/rescues/template_error.erb within rescues/layout (46.9ms)


Started GET "/admin/collections" for 127.0.0.1 at 2016-01-18 17:45:12 +0100
Processing by CollectionsController#index as HTML
  Rendered shared/_restaurant_manage_tabs.html.erb (0.7ms)
  [1m[35mCollection Load (0.3ms)[0m  SELECT `collections`.* FROM `collections` ORDER BY name ASC, created_at DESC LIMIT 12 OFFSET 0
  [1m[36mCollectionImage Load (0.3ms)[0m  [1mSELECT `collection_images`.* FROM `collection_images` WHERE (collection_id = 3) LIMIT 1[0m
  Rendered collections/index.erb within layouts/admin (91.2ms)
Completed 500 Internal Server Error in 95ms

ActionView::Template::Error (undefined local variable or method `restaurant' for #<#<Class:0x007fc261320818>:0x007fc259871bd0>):
    38:                 <span class="open-san"><%= t('collections.edit') %></span>
    39:             <% end %>
    40:             <%= disable_collection_button collection %>
    41:             <%= remove_collection_button collection %>
    42:           </div>
    43:         </td>
    44:       </tr>
  app/helpers/collections_helper.rb:27:in `remove_collection_button'
  app/views/collections/index.erb:41:in `block in _app_views_collections_index_erb__783245794132090365_70236351202120'
  app/views/collections/index.erb:27:in `_app_views_collections_index_erb__783245794132090365_70236351202120'
  app/controllers/collections_controller.rb:20:in `index'


  Rendered /Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_dispatch/middleware/templates/rescues/_trace.erb (1.4ms)
  Rendered /Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_dispatch/middleware/templates/rescues/_request_and_response.erb (0.7ms)
  Rendered /Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_dispatch/middleware/templates/rescues/template_error.erb within rescues/layout (50.3ms)


Started GET "/admin/collections" for 127.0.0.1 at 2016-01-18 17:45:47 +0100
Processing by CollectionsController#index as HTML
  Rendered shared/_restaurant_manage_tabs.html.erb (0.7ms)
  [1m[35mCollection Load (0.2ms)[0m  SELECT `collections`.* FROM `collections` ORDER BY name ASC, created_at DESC LIMIT 12 OFFSET 0
  [1m[36mCollectionImage Load (0.2ms)[0m  [1mSELECT `collection_images`.* FROM `collection_images` WHERE (collection_id = 3) LIMIT 1[0m
  [1m[35mCollectionImage Load (0.3ms)[0m  SELECT `collection_images`.* FROM `collection_images` WHERE (collection_id = 5) LIMIT 1
  [1m[36mCollectionImage Load (1.1ms)[0m  [1mSELECT `collection_images`.* FROM `collection_images` WHERE (collection_id = 6) LIMIT 1[0m
  [1m[35m (1.4ms)[0m  SELECT COUNT(*) FROM `collections` 
  Rendered collections/index.erb within layouts/admin (70.2ms)
  [1m[36mUser Load (0.5ms)[0m  [1mSELECT `users`.* FROM `users` WHERE `users`.`id` = 1 LIMIT 1[0m
Completed 200 OK in 183ms (Views: 169.5ms | ActiveRecord: 12.3ms)


Started POST "/admin/collections/destroy/6" for 127.0.0.1 at 2016-01-18 17:45:54 +0100

ActionController::RoutingError (No route matches [POST] "/admin/collections/destroy/6"):
  actionpack (3.2.8) lib/action_dispatch/middleware/debug_exceptions.rb:21:in `call'
  actionpack (3.2.8) lib/action_dispatch/middleware/show_exceptions.rb:56:in `call'
  railties (3.2.8) lib/rails/rack/logger.rb:26:in `call_app'
  railties (3.2.8) lib/rails/rack/logger.rb:16:in `call'
  quiet_assets (1.0.3) lib/quiet_assets.rb:23:in `call_with_quiet_assets'
  actionpack (3.2.8) lib/action_dispatch/middleware/request_id.rb:22:in `call'
  rack (1.4.5) lib/rack/methodoverride.rb:21:in `call'
  rack (1.4.5) lib/rack/runtime.rb:17:in `call'
  activesupport (3.2.8) lib/active_support/cache/strategy/local_cache.rb:72:in `call'
  rack (1.4.5) lib/rack/lock.rb:15:in `call'
  actionpack (3.2.8) lib/action_dispatch/middleware/static.rb:62:in `call'
  dragonfly (0.9.15) lib/dragonfly/middleware.rb:13:in `call'
  rack-cache (1.2) lib/rack/cache/context.rb:136:in `forward'
  rack-cache (1.2) lib/rack/cache/context.rb:143:in `pass'
  rack-cache (1.2) lib/rack/cache/context.rb:155:in `invalidate'
  rack-cache (1.2) lib/rack/cache/context.rb:71:in `call!'
  rack-cache (1.2) lib/rack/cache/context.rb:51:in `call'
  railties (3.2.8) lib/rails/engine.rb:479:in `call'
  railties (3.2.8) lib/rails/application.rb:223:in `call'
  rack (1.4.5) lib/rack/content_length.rb:14:in `call'
  railties (3.2.8) lib/rails/rack/log_tailer.rb:17:in `call'
  rack (1.4.5) lib/rack/handler/webrick.rb:59:in `service'
  /Users/kevinmuller/.rvm/rubies/ruby-2.2.4/lib/ruby/2.2.0/webrick/httpserver.rb:138:in `service'
  /Users/kevinmuller/.rvm/rubies/ruby-2.2.4/lib/ruby/2.2.0/webrick/httpserver.rb:94:in `run'
  /Users/kevinmuller/.rvm/rubies/ruby-2.2.4/lib/ruby/2.2.0/webrick/server.rb:294:in `block in start_thread'


  Rendered /Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_dispatch/middleware/templates/rescues/routing_error.erb within rescues/layout (1.2ms)


Started POST "/admin/collections/destroy/6" for 127.0.0.1 at 2016-01-18 17:48:32 +0100

ActionController::RoutingError (No route matches [POST] "/admin/collections/destroy/6"):
  actionpack (3.2.8) lib/action_dispatch/middleware/debug_exceptions.rb:21:in `call'
  actionpack (3.2.8) lib/action_dispatch/middleware/show_exceptions.rb:56:in `call'
  railties (3.2.8) lib/rails/rack/logger.rb:26:in `call_app'
  railties (3.2.8) lib/rails/rack/logger.rb:16:in `call'
  quiet_assets (1.0.3) lib/quiet_assets.rb:23:in `call_with_quiet_assets'
  actionpack (3.2.8) lib/action_dispatch/middleware/request_id.rb:22:in `call'
  rack (1.4.5) lib/rack/methodoverride.rb:21:in `call'
  rack (1.4.5) lib/rack/runtime.rb:17:in `call'
  activesupport (3.2.8) lib/active_support/cache/strategy/local_cache.rb:72:in `call'
  rack (1.4.5) lib/rack/lock.rb:15:in `call'
  actionpack (3.2.8) lib/action_dispatch/middleware/static.rb:62:in `call'
  dragonfly (0.9.15) lib/dragonfly/middleware.rb:13:in `call'
  rack-cache (1.2) lib/rack/cache/context.rb:136:in `forward'
  rack-cache (1.2) lib/rack/cache/context.rb:143:in `pass'
  rack-cache (1.2) lib/rack/cache/context.rb:155:in `invalidate'
  rack-cache (1.2) lib/rack/cache/context.rb:71:in `call!'
  rack-cache (1.2) lib/rack/cache/context.rb:51:in `call'
  railties (3.2.8) lib/rails/engine.rb:479:in `call'
  railties (3.2.8) lib/rails/application.rb:223:in `call'
  rack (1.4.5) lib/rack/content_length.rb:14:in `call'
  railties (3.2.8) lib/rails/rack/log_tailer.rb:17:in `call'
  rack (1.4.5) lib/rack/handler/webrick.rb:59:in `service'
  /Users/kevinmuller/.rvm/rubies/ruby-2.2.4/lib/ruby/2.2.0/webrick/httpserver.rb:138:in `service'
  /Users/kevinmuller/.rvm/rubies/ruby-2.2.4/lib/ruby/2.2.0/webrick/httpserver.rb:94:in `run'
  /Users/kevinmuller/.rvm/rubies/ruby-2.2.4/lib/ruby/2.2.0/webrick/server.rb:294:in `block in start_thread'


  Rendered /Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_dispatch/middleware/templates/rescues/routing_error.erb within rescues/layout (1.3ms)


Started POST "/admin/collections/destroy/6" for 127.0.0.1 at 2016-01-18 17:48:52 +0100
Processing by CollectionsController#destroy as HTML
  Parameters: {"authenticity_token"=>"cajmPApKUoLTDgL4nYG/B3GUhj8fezKDJZWxee28cyM=", "id"=>"6"}
  [1m[35mCollection Load (0.2ms)[0m  SELECT `collections`.* FROM `collections` WHERE `collections`.`id` = 6 LIMIT 1
  [1m[36m (0.2ms)[0m  [1mBEGIN[0m
  [1m[35mCollectionImage Load (0.2ms)[0m  SELECT `collection_images`.* FROM `collection_images` WHERE `collection_images`.`collection_id` = 6 LIMIT 1
  [1m[36mSQL (0.3ms)[0m  [1mDELETE FROM `collection_images` WHERE `collection_images`.`id` = 5[0m
  [1m[35m (0.2ms)[0m  SELECT COUNT(*) FROM `filter_types` WHERE (code = 'features')
  [1m[36m (0.2ms)[0m  [1mSELECT COUNT(*) FROM `filters` WHERE (code = 'offer')[0m
  [1m[35mRestaurant Load (0.3ms)[0m  SELECT `restaurants`.* FROM `restaurants` INNER JOIN `collection_restaurants` ON `restaurants`.`id` = `collection_restaurants`.`restaurant_id` WHERE `collection_restaurants`.`collection_id` = 6
  [1m[36mSQL (0.2ms)[0m  [1mDELETE FROM `collections` WHERE `collections`.`id` = 6[0m
  [1m[35m (0.7ms)[0m  COMMIT
Redirected to http://localhost:3000/admin/collections
Completed 302 Found in 223ms (ActiveRecord: 13.8ms)


Started GET "/admin/collections" for 127.0.0.1 at 2016-01-18 17:48:53 +0100
Processing by CollectionsController#index as HTML
  Rendered shared/_restaurant_manage_tabs.html.erb (1.1ms)
  [1m[36mCollection Load (0.3ms)[0m  [1mSELECT `collections`.* FROM `collections` ORDER BY name ASC, created_at DESC LIMIT 12 OFFSET 0[0m
  [1m[35mCollectionImage Load (0.2ms)[0m  SELECT `collection_images`.* FROM `collection_images` WHERE (collection_id = 3) LIMIT 1
  [1m[36mCollectionImage Load (0.2ms)[0m  [1mSELECT `collection_images`.* FROM `collection_images` WHERE (collection_id = 5) LIMIT 1[0m
  [1m[35m (0.1ms)[0m  SELECT COUNT(*) FROM `collections` 
  Rendered collections/index.erb within layouts/admin (32.0ms)
  [1m[36mUser Load (0.2ms)[0m  [1mSELECT `users`.* FROM `users` WHERE `users`.`id` = 1 LIMIT 1[0m
Completed 200 OK in 131ms (Views: 126.7ms | ActiveRecord: 2.9ms)


Started GET "/admin/collections/admin_new_collection" for 127.0.0.1 at 2016-01-18 17:48:59 +0100
Processing by CollectionsController#admin_new_collection as HTML
  [1m[35mUser Load (0.3ms)[0m  SELECT `users`.* FROM `users` WHERE `users`.`id` = 1 LIMIT 1
  Rendered collections/_collection_form.html.erb (10.5ms)
  Rendered collections/admin_new_collection.html.erb within layouts/admin (20.9ms)
Completed 200 OK in 121ms (Views: 42.3ms | ActiveRecord: 0.6ms)


Started POST "/admin/collections" for 127.0.0.1 at 2016-01-18 17:49:03 +0100
Processing by CollectionsController#create as HTML
  Parameters: {"utf8"=>"âœ“", "authenticity_token"=>"cajmPApKUoLTDgL4nYG/B3GUhj8fezKDJZWxee28cyM=", "admin"=>"true", "collection"=>{"name"=>"asdf", "description"=>"asdf"}}
  [1m[36mCollection Load (0.7ms)[0m  [1mSELECT `collections`.* FROM `collections` WHERE `collections`.`name` = 'asdf' LIMIT 1[0m
  [1m[35m (0.7ms)[0m  BEGIN
  [1m[36mSQL (0.5ms)[0m  [1mINSERT INTO `collections` (`created_at`, `description`, `disabled`, `image_url`, `name`, `updated_at`) VALUES ('2016-01-18 16:49:03', 'asdf', NULL, NULL, 'asdf', '2016-01-18 16:49:03')[0m
  [1m[35m (0.5ms)[0m  COMMIT
Redirected to http://localhost:3000/collection/7/edit
Completed 302 Found in 14ms (ActiveRecord: 2.4ms)


Started GET "/collection/7/edit" for 127.0.0.1 at 2016-01-18 17:49:03 +0100
Processing by CollectionsController#edit_collection as HTML
  Parameters: {"id"=>"7"}
  [1m[36mUser Load (0.3ms)[0m  [1mSELECT `users`.* FROM `users` WHERE `users`.`id` = 1 LIMIT 1[0m
  [1m[35mCollection Load (0.4ms)[0m  SELECT `collections`.* FROM `collections` WHERE `collections`.`id` = 7 LIMIT 1
  [1m[36mCollectionImage Load (0.3ms)[0m  [1mSELECT `collection_images`.* FROM `collection_images` WHERE (collection_id = 7) LIMIT 1[0m
  Rendered collections/_collection_form.html.erb (8.7ms)
  [1m[35mRestaurant Load (4.0ms)[0m  SELECT `restaurants`.* FROM `restaurants` WHERE `restaurants`.`disabled` = 0
  Rendered collections/_collection_restaurants_form.html.erb (116.3ms)
  [1m[36mRestaurant Load (0.3ms)[0m  [1mSELECT `restaurants`.* FROM `restaurants` INNER JOIN `collection_restaurants` ON `restaurants`.`id` = `collection_restaurants`.`restaurant_id` WHERE `collection_restaurants`.`collection_id` = 7[0m
  Rendered collections/_collection_restaurants_list.html.erb (2.3ms)
  Rendered collections/edit_collection.html.erb within layouts/admin (140.9ms)
Completed 200 OK in 167ms (Views: 148.9ms | ActiveRecord: 5.3ms)


Started PUT "/admin/collections/7" for 127.0.0.1 at 2016-01-18 17:49:10 +0100
Processing by CollectionsController#update as HTML
  Parameters: {"utf8"=>"âœ“", "authenticity_token"=>"cajmPApKUoLTDgL4nYG/B3GUhj8fezKDJZWxee28cyM=", "admin"=>"true", "collection"=>{"name"=>"asdf", "description"=>"asdf"}, "collection_image"=>{"image"=>#<ActionDispatch::Http::UploadedFile:0x007fc2617403f8 @original_filename="persian.png", @content_type="image/png", @headers="Content-Disposition: form-data; name=\"collection_image[image]\"; filename=\"persian.png\"\r\nContent-Type: image/png\r\n", @tempfile=#<Tempfile:/var/folders/rf/q4l8n5k56pnbjgkdtzrhq_w00000gn/T/RackMultipart20160118-19170-1a14wi1>>}, "id"=>"7"}
  [1m[35mUser Load (0.3ms)[0m  SELECT `users`.* FROM `users` WHERE `users`.`id` = 1 LIMIT 1
  [1m[36mCollection Load (0.9ms)[0m  [1mSELECT `collections`.* FROM `collections` WHERE `collections`.`id` = 7 LIMIT 1[0m
  [1m[35mCollectionImage Load (0.4ms)[0m  SELECT `collection_images`.* FROM `collection_images` WHERE `collection_images`.`collection_id` = 7 LIMIT 1
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO `collection_images` (`collection_id`, `created_at`, `image_name`, `image_uid`, `text_content`, `text_hyperlink`, `text_title`, `updated_at`) VALUES (7, '2016-01-18 16:49:10', 'persian.png', '2016/01/18/17_49_10_402_persian.png', NULL, NULL, NULL, '2016-01-18 16:49:10')
  [1m[36m (13.8ms)[0m  [1mCOMMIT[0m
  [1m[35m (0.1ms)[0m  BEGIN
  [1m[36m (0.1ms)[0m  [1mCOMMIT[0m
  [1m[35m (0.1ms)[0m  BEGIN
  [1m[36m (0.1ms)[0m  [1mCOMMIT[0m
  [1m[35m (0.1ms)[0m  BEGIN
  [1m[36m (0.1ms)[0m  [1mCOMMIT[0m
Redirected to http://localhost:3000/collection/7/edit
Completed 302 Found in 31ms (ActiveRecord: 16.3ms)


Started GET "/collection/7/edit" for 127.0.0.1 at 2016-01-18 17:49:10 +0100
Processing by CollectionsController#edit_collection as HTML
  Parameters: {"id"=>"7"}
  [1m[35mUser Load (0.2ms)[0m  SELECT `users`.* FROM `users` WHERE `users`.`id` = 1 LIMIT 1
  [1m[36mCollection Load (0.2ms)[0m  [1mSELECT `collections`.* FROM `collections` WHERE `collections`.`id` = 7 LIMIT 1[0m
  [1m[35mCollectionImage Load (0.3ms)[0m  SELECT `collection_images`.* FROM `collection_images` WHERE (collection_id = 7) LIMIT 1
  Rendered collections/_collection_form.html.erb (7.9ms)
  [1m[36mRestaurant Load (3.3ms)[0m  [1mSELECT `restaurants`.* FROM `restaurants` WHERE `restaurants`.`disabled` = 0[0m
  Rendered collections/_collection_restaurants_form.html.erb (67.3ms)
  [1m[35mRestaurant Load (0.3ms)[0m  SELECT `restaurants`.* FROM `restaurants` INNER JOIN `collection_restaurants` ON `restaurants`.`id` = `collection_restaurants`.`restaurant_id` WHERE `collection_restaurants`.`collection_id` = 7
  Rendered collections/_collection_restaurants_list.html.erb (2.0ms)
  Rendered collections/edit_collection.html.erb within layouts/admin (90.4ms)
Completed 200 OK in 99ms (Views: 92.5ms | ActiveRecord: 4.3ms)


Started POST "/admin/collections/add_restaurant/7" for 127.0.0.1 at 2016-01-18 17:49:15 +0100
Processing by CollectionsController#add_restaurant as */*
  Parameters: {"utf8"=>"âœ“", "authenticity_token"=>"cajmPApKUoLTDgL4nYG/B3GUhj8fezKDJZWxee28cyM=", "collection_restaurant"=>{"restaurant_id"=>"1"}, "id"=>"7"}
  [1m[36mUser Load (0.7ms)[0m  [1mSELECT `users`.* FROM `users` WHERE `users`.`id` = 1 LIMIT 1[0m
  [1m[35mCollection Load (0.2ms)[0m  SELECT `collections`.* FROM `collections` WHERE `collections`.`id` = 7 LIMIT 1
  [1m[36mRestaurant Load (3.9ms)[0m  [1mSELECT `restaurants`.* FROM `restaurants` WHERE `restaurants`.`slug` = '1' LIMIT 1[0m
  [1m[35mRestaurant Load (0.3ms)[0m  SELECT `restaurants`.* FROM `restaurants` WHERE `restaurants`.`id` = 1 LIMIT 1
  [1m[36mRestaurant Exists (0.3ms)[0m  [1mSELECT 1 AS one FROM `restaurants` INNER JOIN `collection_restaurants` ON `restaurants`.`id` = `collection_restaurants`.`restaurant_id` WHERE `collection_restaurants`.`collection_id` = 7 AND `restaurants`.`id` = 1 LIMIT 1[0m
  [1m[35m (0.2ms)[0m  BEGIN
  [1m[36m (0.2ms)[0m  [1mINSERT INTO `collection_restaurants` (`collection_id`, `restaurant_id`) VALUES (7, 1)[0m
  [1m[35m (0.5ms)[0m  COMMIT
  [1m[36mRestaurant Load (1.5ms)[0m  [1mSELECT `restaurants`.* FROM `restaurants` INNER JOIN `collection_restaurants` ON `restaurants`.`id` = `collection_restaurants`.`restaurant_id` WHERE `collection_restaurants`.`collection_id` = 7[0m
  Rendered collections/_collection_restaurants_list.html.erb within layouts/admin (8.5ms)
Completed 200 OK in 54ms (Views: 27.8ms | ActiveRecord: 7.9ms)


Started POST "/admin/collections/add_restaurant/7" for 127.0.0.1 at 2016-01-18 17:49:18 +0100
Processing by CollectionsController#add_restaurant as */*
  Parameters: {"utf8"=>"âœ“", "authenticity_token"=>"cajmPApKUoLTDgL4nYG/B3GUhj8fezKDJZWxee28cyM=", "collection_restaurant"=>{"restaurant_id"=>"16"}, "id"=>"7"}
  [1m[35mUser Load (1.2ms)[0m  SELECT `users`.* FROM `users` WHERE `users`.`id` = 1 LIMIT 1
  [1m[36mCollection Load (0.3ms)[0m  [1mSELECT `collections`.* FROM `collections` WHERE `collections`.`id` = 7 LIMIT 1[0m
  [1m[35mRestaurant Load (6.9ms)[0m  SELECT `restaurants`.* FROM `restaurants` WHERE `restaurants`.`slug` = '16' LIMIT 1
  [1m[36mRestaurant Load (0.6ms)[0m  [1mSELECT `restaurants`.* FROM `restaurants` WHERE `restaurants`.`id` = 16 LIMIT 1[0m
  [1m[35mRestaurant Exists (0.3ms)[0m  SELECT 1 AS one FROM `restaurants` INNER JOIN `collection_restaurants` ON `restaurants`.`id` = `collection_restaurants`.`restaurant_id` WHERE `collection_restaurants`.`collection_id` = 7 AND `restaurants`.`id` = 16 LIMIT 1
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35m (0.7ms)[0m  INSERT INTO `collection_restaurants` (`collection_id`, `restaurant_id`) VALUES (7, 16)
  [1m[36m (8.4ms)[0m  [1mCOMMIT[0m
  [1m[35mRestaurant Load (0.5ms)[0m  SELECT `restaurants`.* FROM `restaurants` INNER JOIN `collection_restaurants` ON `restaurants`.`id` = `collection_restaurants`.`restaurant_id` WHERE `collection_restaurants`.`collection_id` = 7
  Rendered collections/_collection_restaurants_list.html.erb within layouts/admin (5.0ms)
Completed 200 OK in 56ms (Views: 24.3ms | ActiveRecord: 18.9ms)


Started POST "/admin/collections/7/remove_restaurant/16" for 127.0.0.1 at 2016-01-18 17:49:27 +0100
Processing by CollectionsController#remove_restaurant as JS
  Parameters: {"id"=>"7", "restaurant_id"=>"16"}
  [1m[36mCollection Load (0.2ms)[0m  [1mSELECT `collections`.* FROM `collections` WHERE `collections`.`id` = 7 LIMIT 1[0m
  [1m[35mRestaurant Load (0.2ms)[0m  SELECT `restaurants`.* FROM `restaurants` INNER JOIN `collection_restaurants` ON `restaurants`.`id` = `collection_restaurants`.`restaurant_id` WHERE `collection_restaurants`.`collection_id` = 7 AND `restaurants`.`slug` = '16' LIMIT 1
  [1m[36mRestaurant Load (0.2ms)[0m  [1mSELECT `restaurants`.* FROM `restaurants` INNER JOIN `collection_restaurants` ON `restaurants`.`id` = `collection_restaurants`.`restaurant_id` WHERE `collection_restaurants`.`collection_id` = 7 AND `restaurants`.`id` = 16 LIMIT 1[0m
  [1m[35m (0.5ms)[0m  BEGIN
  [1m[36m (0.2ms)[0m  [1mDELETE FROM `collection_restaurants` WHERE `collection_restaurants`.`collection_id` = 7 AND `collection_restaurants`.`restaurant_id` IN (16)[0m
  [1m[35m (12.0ms)[0m  COMMIT
  Rendered collections/remove_restaurant.js.erb (0.1ms)
Completed 200 OK in 45ms (Views: 25.0ms | ActiveRecord: 13.3ms)


Started GET "/admin/restaurants" for 127.0.0.1 at 2016-01-18 17:49:43 +0100
Processing by RestaurantsController#index as HTML
  [1m[36mUser Load (0.4ms)[0m  [1mSELECT `users`.* FROM `users` WHERE `users`.`id` = 1 LIMIT 1[0m
  Rendered shared/_restaurant_manage_tabs.html.erb (0.9ms)
  Rendered restaurants/_condition_fields.html.erb (12.1ms)
  [1m[35mRestaurant Load (0.8ms)[0m  SELECT `restaurants`.* FROM `restaurants` ORDER BY disabled ASC,created_at DESC LIMIT 12 OFFSET 0
  [1m[36mPhoto Load (0.4ms)[0m  [1mSELECT `photos`.* FROM `photos` WHERE (restaurant_id = 876 and cover = true and status = 1) LIMIT 1[0m
  [1m[35mPhoto Load (0.3ms)[0m  SELECT `photos`.* FROM `photos` WHERE `photos`.`restaurant_id` = 876 AND `photos`.`status` = 1 ORDER BY restaurant_id ASC, created_at DESC LIMIT 1
  [1m[36mPhoto Load (0.3ms)[0m  [1mSELECT `photos`.* FROM `photos` WHERE (restaurant_id = 851 and cover = true and status = 1) LIMIT 1[0m
  [1m[35mPhoto Load (0.4ms)[0m  SELECT `photos`.* FROM `photos` WHERE `photos`.`restaurant_id` = 851 AND `photos`.`status` = 1 ORDER BY restaurant_id ASC, created_at DESC LIMIT 1
  [1m[36mPhoto Load (0.3ms)[0m  [1mSELECT `photos`.* FROM `photos` WHERE (restaurant_id = 693 and cover = true and status = 1) LIMIT 1[0m
  [1m[35mPhoto Load (0.3ms)[0m  SELECT `photos`.* FROM `photos` WHERE `photos`.`restaurant_id` = 693 AND `photos`.`status` = 1 ORDER BY restaurant_id ASC, created_at DESC LIMIT 1
  [1m[36mPhoto Load (0.3ms)[0m  [1mSELECT `photos`.* FROM `photos` WHERE (restaurant_id = 686 and cover = true and status = 1) LIMIT 1[0m
  [1m[35mPhoto Load (0.3ms)[0m  SELECT `photos`.* FROM `photos` WHERE `photos`.`restaurant_id` = 686 AND `photos`.`status` = 1 ORDER BY restaurant_id ASC, created_at DESC LIMIT 1
  [1m[36mPhoto Load (0.3ms)[0m  [1mSELECT `photos`.* FROM `photos` WHERE (restaurant_id = 669 and cover = true and status = 1) LIMIT 1[0m
  [1m[35mPhoto Load (0.3ms)[0m  SELECT `photos`.* FROM `photos` WHERE `photos`.`restaurant_id` = 669 AND `photos`.`status` = 1 ORDER BY restaurant_id ASC, created_at DESC LIMIT 1
  [1m[36mPhoto Load (0.4ms)[0m  [1mSELECT `photos`.* FROM `photos` WHERE (restaurant_id = 251 and cover = true and status = 1) LIMIT 1[0m
  [1m[35mPhoto Load (0.4ms)[0m  SELECT `photos`.* FROM `photos` WHERE `photos`.`restaurant_id` = 251 AND `photos`.`status` = 1 ORDER BY restaurant_id ASC, created_at DESC LIMIT 1
  [1m[36mPhoto Load (0.3ms)[0m  [1mSELECT `photos`.* FROM `photos` WHERE (restaurant_id = 250 and cover = true and status = 1) LIMIT 1[0m
  [1m[35mPhoto Load (0.8ms)[0m  SELECT `photos`.* FROM `photos` WHERE `photos`.`restaurant_id` = 250 AND `photos`.`status` = 1 ORDER BY restaurant_id ASC, created_at DESC LIMIT 1
  [1m[36mPhoto Load (1.0ms)[0m  [1mSELECT `photos`.* FROM `photos` WHERE (restaurant_id = 237 and cover = true and status = 1) LIMIT 1[0m
  [1m[35mPhoto Load (0.8ms)[0m  SELECT `photos`.* FROM `photos` WHERE `photos`.`restaurant_id` = 237 AND `photos`.`status` = 1 ORDER BY restaurant_id ASC, created_at DESC LIMIT 1
  [1m[36mPhoto Load (1.0ms)[0m  [1mSELECT `photos`.* FROM `photos` WHERE (restaurant_id = 231 and cover = true and status = 1) LIMIT 1[0m
  [1m[35mPhoto Load (0.8ms)[0m  SELECT `photos`.* FROM `photos` WHERE `photos`.`restaurant_id` = 231 AND `photos`.`status` = 1 ORDER BY restaurant_id ASC, created_at DESC LIMIT 1
  [1m[36mPhoto Load (0.9ms)[0m  [1mSELECT `photos`.* FROM `photos` WHERE (restaurant_id = 222 and cover = true and status = 1) LIMIT 1[0m
  [1m[35mPhoto Load (0.8ms)[0m  SELECT `photos`.* FROM `photos` WHERE `photos`.`restaurant_id` = 222 AND `photos`.`status` = 1 ORDER BY restaurant_id ASC, created_at DESC LIMIT 1
  [1m[36mPhoto Load (0.3ms)[0m  [1mSELECT `photos`.* FROM `photos` WHERE (restaurant_id = 221 and cover = true and status = 1) LIMIT 1[0m
  [1m[35mPhoto Load (0.3ms)[0m  SELECT `photos`.* FROM `photos` WHERE `photos`.`restaurant_id` = 221 AND `photos`.`status` = 1 ORDER BY restaurant_id ASC, created_at DESC LIMIT 1
  [1m[36mPhoto Load (0.4ms)[0m  [1mSELECT `photos`.* FROM `photos` WHERE (restaurant_id = 216 and cover = true and status = 1) LIMIT 1[0m
  [1m[35mPhoto Load (0.3ms)[0m  SELECT `photos`.* FROM `photos` WHERE `photos`.`restaurant_id` = 216 AND `photos`.`status` = 1 ORDER BY restaurant_id ASC, created_at DESC LIMIT 1
  [1m[36m (0.4ms)[0m  [1mSELECT COUNT(*) FROM `restaurants` [0m
  Rendered restaurants/index.html.erb within layouts/admin (159.0ms)
Completed 200 OK in 182ms (Views: 163.2ms | ActiveRecord: 15.5ms)


Started GET "/admin/collections" for 127.0.0.1 at 2016-01-18 17:49:44 +0100
Processing by CollectionsController#index as HTML
  Rendered shared/_restaurant_manage_tabs.html.erb (0.7ms)
  [1m[35mCollection Load (0.3ms)[0m  SELECT `collections`.* FROM `collections` ORDER BY name ASC, created_at DESC LIMIT 12 OFFSET 0
  [1m[36mCollectionImage Load (0.3ms)[0m  [1mSELECT `collection_images`.* FROM `collection_images` WHERE (collection_id = 3) LIMIT 1[0m
  [1m[35mCollectionImage Load (0.2ms)[0m  SELECT `collection_images`.* FROM `collection_images` WHERE (collection_id = 7) LIMIT 1
  [1m[36mCollectionImage Load (0.2ms)[0m  [1mSELECT `collection_images`.* FROM `collection_images` WHERE (collection_id = 5) LIMIT 1[0m
  [1m[35m (0.1ms)[0m  SELECT COUNT(*) FROM `collections` 
  Rendered collections/index.erb within layouts/admin (15.1ms)
  [1m[36mUser Load (0.4ms)[0m  [1mSELECT `users`.* FROM `users` WHERE `users`.`id` = 1 LIMIT 1[0m
Completed 200 OK in 32ms (Views: 29.6ms | ActiveRecord: 1.5ms)


Started POST "/admin/collections/7/disable_toggle" for 127.0.0.1 at 2016-01-18 17:49:52 +0100
Processing by CollectionsController#disable_toggle as JS
  Parameters: {"id"=>"7"}
  [1m[35mCollection Load (0.8ms)[0m  SELECT `collections`.* FROM `collections` WHERE `collections`.`id` = 7 LIMIT 1
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35m (0.4ms)[0m  UPDATE `collections` SET `disabled` = 0, `updated_at` = '2016-01-18 16:49:52' WHERE `collections`.`id` = 7
  [1m[36m (0.8ms)[0m  [1mCOMMIT[0m
  Rendered collections/disable_toggle.js.erb (0.3ms)
Completed 200 OK in 49ms (Views: 42.2ms | ActiveRecord: 2.1ms)


Started POST "/admin/collections/7/disable_toggle" for 127.0.0.1 at 2016-01-18 17:49:54 +0100
Processing by CollectionsController#disable_toggle as JS
  Parameters: {"id"=>"7"}
  [1m[35mCollection Load (0.7ms)[0m  SELECT `collections`.* FROM `collections` WHERE `collections`.`id` = 7 LIMIT 1
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35m (0.2ms)[0m  UPDATE `collections` SET `disabled` = 1, `updated_at` = '2016-01-18 16:49:54' WHERE `collections`.`id` = 7
  [1m[36m (0.7ms)[0m  [1mCOMMIT[0m
  Rendered collections/disable_toggle.js.erb (0.2ms)
Completed 200 OK in 26ms (Views: 20.9ms | ActiveRecord: 1.7ms)


Started POST "/admin/collections/7/disable_toggle" for 127.0.0.1 at 2016-01-18 17:49:57 +0100
Processing by CollectionsController#disable_toggle as JS
  Parameters: {"id"=>"7"}
  [1m[35mCollection Load (0.2ms)[0m  SELECT `collections`.* FROM `collections` WHERE `collections`.`id` = 7 LIMIT 1
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35m (0.2ms)[0m  UPDATE `collections` SET `disabled` = 0, `updated_at` = '2016-01-18 16:49:57' WHERE `collections`.`id` = 7
  [1m[36m (0.8ms)[0m  [1mCOMMIT[0m
  Rendered collections/disable_toggle.js.erb (0.3ms)
Completed 200 OK in 39ms (Views: 34.2ms | ActiveRecord: 1.2ms)


Started POST "/admin/collections/7/disable_toggle" for 127.0.0.1 at 2016-01-18 17:49:59 +0100
Processing by CollectionsController#disable_toggle as JS
  Parameters: {"id"=>"7"}
  [1m[35mCollection Load (0.1ms)[0m  SELECT `collections`.* FROM `collections` WHERE `collections`.`id` = 7 LIMIT 1
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35m (0.1ms)[0m  UPDATE `collections` SET `disabled` = 1, `updated_at` = '2016-01-18 16:49:59' WHERE `collections`.`id` = 7
  [1m[36m (0.6ms)[0m  [1mCOMMIT[0m
  Rendered collections/disable_toggle.js.erb (0.2ms)
Completed 200 OK in 25ms (Views: 21.0ms | ActiveRecord: 1.0ms)


Started POST "/admin/collections/7/disable_toggle" for 127.0.0.1 at 2016-01-18 17:50:00 +0100
Processing by CollectionsController#disable_toggle as JS
  Parameters: {"id"=>"7"}
  [1m[35mCollection Load (0.9ms)[0m  SELECT `collections`.* FROM `collections` WHERE `collections`.`id` = 7 LIMIT 1
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35m (0.2ms)[0m  UPDATE `collections` SET `disabled` = 0, `updated_at` = '2016-01-18 16:50:00' WHERE `collections`.`id` = 7
  [1m[36m (0.8ms)[0m  [1mCOMMIT[0m
  Rendered collections/disable_toggle.js.erb (0.2ms)
Completed 200 OK in 29ms (Views: 22.2ms | ActiveRecord: 2.0ms)


Started POST "/admin/collections/destroy/7" for 127.0.0.1 at 2016-01-18 17:50:05 +0100
Processing by CollectionsController#destroy as HTML
  Parameters: {"authenticity_token"=>"cajmPApKUoLTDgL4nYG/B3GUhj8fezKDJZWxee28cyM=", "id"=>"7"}
  [1m[35mCollection Load (0.2ms)[0m  SELECT `collections`.* FROM `collections` WHERE `collections`.`id` = 7 LIMIT 1
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35mCollectionImage Load (0.2ms)[0m  SELECT `collection_images`.* FROM `collection_images` WHERE `collection_images`.`collection_id` = 7 LIMIT 1
  [1m[36mSQL (0.2ms)[0m  [1mDELETE FROM `collection_images` WHERE `collection_images`.`id` = 6[0m
  [1m[35mRestaurant Load (0.2ms)[0m  SELECT `restaurants`.* FROM `restaurants` INNER JOIN `collection_restaurants` ON `restaurants`.`id` = `collection_restaurants`.`restaurant_id` WHERE `collection_restaurants`.`collection_id` = 7
  [1m[36m (0.2ms)[0m  [1mDELETE FROM `collection_restaurants` WHERE `collection_restaurants`.`collection_id` = 7 AND `collection_restaurants`.`restaurant_id` IN (1)[0m
  [1m[35mSQL (11.5ms)[0m  DELETE FROM `collections` WHERE `collections`.`id` = 7
  [1m[36m (0.4ms)[0m  [1mCOMMIT[0m
Redirected to http://localhost:3000/admin/collections
Completed 302 Found in 22ms (ActiveRecord: 13.0ms)


Started GET "/admin/collections" for 127.0.0.1 at 2016-01-18 17:50:05 +0100
Processing by CollectionsController#index as HTML
  Rendered shared/_restaurant_manage_tabs.html.erb (0.8ms)
  [1m[35mCollection Load (0.3ms)[0m  SELECT `collections`.* FROM `collections` ORDER BY name ASC, created_at DESC LIMIT 12 OFFSET 0
  [1m[36mCollectionImage Load (0.2ms)[0m  [1mSELECT `collection_images`.* FROM `collection_images` WHERE (collection_id = 3) LIMIT 1[0m
  [1m[35mCollectionImage Load (0.2ms)[0m  SELECT `collection_images`.* FROM `collection_images` WHERE (collection_id = 5) LIMIT 1
  [1m[36m (0.1ms)[0m  [1mSELECT COUNT(*) FROM `collections` [0m
  Rendered collections/index.erb within layouts/admin (13.7ms)
  [1m[35mUser Load (0.2ms)[0m  SELECT `users`.* FROM `users` WHERE `users`.`id` = 1 LIMIT 1
Completed 200 OK in 22ms (Views: 20.1ms | ActiveRecord: 1.1ms)


Started GET "/admin/restaurants" for 127.0.0.1 at 2016-01-18 17:52:00 +0100
Processing by RestaurantsController#index as HTML
  [1m[36mUser Load (0.3ms)[0m  [1mSELECT `users`.* FROM `users` WHERE `users`.`id` = 1 LIMIT 1[0m
  Rendered shared/_restaurant_manage_tabs.html.erb (1.4ms)
  Rendered restaurants/_condition_fields.html.erb (15.9ms)
  [1m[35mRestaurant Load (1.1ms)[0m  SELECT `restaurants`.* FROM `restaurants` ORDER BY disabled ASC,created_at DESC LIMIT 12 OFFSET 0
  [1m[36mPhoto Load (0.4ms)[0m  [1mSELECT `photos`.* FROM `photos` WHERE (restaurant_id = 876 and cover = true and status = 1) LIMIT 1[0m
  [1m[35mPhoto Load (0.3ms)[0m  SELECT `photos`.* FROM `photos` WHERE `photos`.`restaurant_id` = 876 AND `photos`.`status` = 1 ORDER BY restaurant_id ASC, created_at DESC LIMIT 1
  [1m[36mPhoto Load (0.4ms)[0m  [1mSELECT `photos`.* FROM `photos` WHERE (restaurant_id = 851 and cover = true and status = 1) LIMIT 1[0m
  [1m[35mPhoto Load (0.3ms)[0m  SELECT `photos`.* FROM `photos` WHERE `photos`.`restaurant_id` = 851 AND `photos`.`status` = 1 ORDER BY restaurant_id ASC, created_at DESC LIMIT 1
  [1m[36mPhoto Load (0.3ms)[0m  [1mSELECT `photos`.* FROM `photos` WHERE (restaurant_id = 693 and cover = true and status = 1) LIMIT 1[0m
  [1m[35mPhoto Load (0.3ms)[0m  SELECT `photos`.* FROM `photos` WHERE `photos`.`restaurant_id` = 693 AND `photos`.`status` = 1 ORDER BY restaurant_id ASC, created_at DESC LIMIT 1
  [1m[36mPhoto Load (0.4ms)[0m  [1mSELECT `photos`.* FROM `photos` WHERE (restaurant_id = 686 and cover = true and status = 1) LIMIT 1[0m
  [1m[35mPhoto Load (0.3ms)[0m  SELECT `photos`.* FROM `photos` WHERE `photos`.`restaurant_id` = 686 AND `photos`.`status` = 1 ORDER BY restaurant_id ASC, created_at DESC LIMIT 1
  [1m[36mPhoto Load (0.4ms)[0m  [1mSELECT `photos`.* FROM `photos` WHERE (restaurant_id = 669 and cover = true and status = 1) LIMIT 1[0m
  [1m[35mPhoto Load (0.3ms)[0m  SELECT `photos`.* FROM `photos` WHERE `photos`.`restaurant_id` = 669 AND `photos`.`status` = 1 ORDER BY restaurant_id ASC, created_at DESC LIMIT 1
  [1m[36mPhoto Load (0.3ms)[0m  [1mSELECT `photos`.* FROM `photos` WHERE (restaurant_id = 251 and cover = true and status = 1) LIMIT 1[0m
  [1m[35mPhoto Load (0.3ms)[0m  SELECT `photos`.* FROM `photos` WHERE `photos`.`restaurant_id` = 251 AND `photos`.`status` = 1 ORDER BY restaurant_id ASC, created_at DESC LIMIT 1
  [1m[36mPhoto Load (0.9ms)[0m  [1mSELECT `photos`.* FROM `photos` WHERE (restaurant_id = 250 and cover = true and status = 1) LIMIT 1[0m
  [1m[35mPhoto Load (0.3ms)[0m  SELECT `photos`.* FROM `photos` WHERE `photos`.`restaurant_id` = 250 AND `photos`.`status` = 1 ORDER BY restaurant_id ASC, created_at DESC LIMIT 1
  [1m[36mPhoto Load (0.4ms)[0m  [1mSELECT `photos`.* FROM `photos` WHERE (restaurant_id = 237 and cover = true and status = 1) LIMIT 1[0m
  [1m[35mPhoto Load (0.3ms)[0m  SELECT `photos`.* FROM `photos` WHERE `photos`.`restaurant_id` = 237 AND `photos`.`status` = 1 ORDER BY restaurant_id ASC, created_at DESC LIMIT 1
  [1m[36mPhoto Load (0.4ms)[0m  [1mSELECT `photos`.* FROM `photos` WHERE (restaurant_id = 231 and cover = true and status = 1) LIMIT 1[0m
  [1m[35mPhoto Load (0.4ms)[0m  SELECT `photos`.* FROM `photos` WHERE `photos`.`restaurant_id` = 231 AND `photos`.`status` = 1 ORDER BY restaurant_id ASC, created_at DESC LIMIT 1
  [1m[36mPhoto Load (0.4ms)[0m  [1mSELECT `photos`.* FROM `photos` WHERE (restaurant_id = 222 and cover = true and status = 1) LIMIT 1[0m
  [1m[35mPhoto Load (0.4ms)[0m  SELECT `photos`.* FROM `photos` WHERE `photos`.`restaurant_id` = 222 AND `photos`.`status` = 1 ORDER BY restaurant_id ASC, created_at DESC LIMIT 1
  [1m[36mPhoto Load (0.4ms)[0m  [1mSELECT `photos`.* FROM `photos` WHERE (restaurant_id = 221 and cover = true and status = 1) LIMIT 1[0m
  [1m[35mPhoto Load (0.3ms)[0m  SELECT `photos`.* FROM `photos` WHERE `photos`.`restaurant_id` = 221 AND `photos`.`status` = 1 ORDER BY restaurant_id ASC, created_at DESC LIMIT 1
  [1m[36mPhoto Load (0.4ms)[0m  [1mSELECT `photos`.* FROM `photos` WHERE (restaurant_id = 216 and cover = true and status = 1) LIMIT 1[0m
  [1m[35mPhoto Load (0.4ms)[0m  SELECT `photos`.* FROM `photos` WHERE `photos`.`restaurant_id` = 216 AND `photos`.`status` = 1 ORDER BY restaurant_id ASC, created_at DESC LIMIT 1
  [1m[36m (0.6ms)[0m  [1mSELECT COUNT(*) FROM `restaurants` [0m
  Rendered restaurants/index.html.erb within layouts/admin (148.8ms)
Completed 200 OK in 177ms (Views: 162.0ms | ActiveRecord: 11.2ms)


Started GET "/admin/collections" for 127.0.0.1 at 2016-01-18 17:52:01 +0100
Processing by CollectionsController#index as HTML
  Rendered shared/_restaurant_manage_tabs.html.erb (1.2ms)
  [1m[35mCollection Load (0.4ms)[0m  SELECT `collections`.* FROM `collections` ORDER BY name ASC, created_at DESC LIMIT 12 OFFSET 0
  [1m[36mCollectionImage Load (0.2ms)[0m  [1mSELECT `collection_images`.* FROM `collection_images` WHERE (collection_id = 3) LIMIT 1[0m
  [1m[35mCollectionImage Load (0.3ms)[0m  SELECT `collection_images`.* FROM `collection_images` WHERE (collection_id = 5) LIMIT 1
  [1m[36m (0.2ms)[0m  [1mSELECT COUNT(*) FROM `collections` [0m
  Rendered collections/index.erb within layouts/admin (47.0ms)
  [1m[35mUser Load (0.3ms)[0m  SELECT `users`.* FROM `users` WHERE `users`.`id` = 1 LIMIT 1
Completed 200 OK in 68ms (Views: 64.2ms | ActiveRecord: 1.4ms)


Started GET "/admin/collections/admin_new_collection" for 127.0.0.1 at 2016-01-18 17:53:13 +0100
Processing by CollectionsController#admin_new_collection as HTML
  [1m[36mUser Load (0.3ms)[0m  [1mSELECT `users`.* FROM `users` WHERE `users`.`id` = 1 LIMIT 1[0m
  Rendered collections/_collection_form.html.erb (15.7ms)
  Rendered collections/admin_new_collection.html.erb within layouts/admin (23.6ms)
Completed 200 OK in 59ms (Views: 55.1ms | ActiveRecord: 0.3ms)


Started POST "/admin/collections" for 127.0.0.1 at 2016-01-18 17:53:28 +0100
Processing by CollectionsController#create as HTML
  Parameters: {"utf8"=>"âœ“", "authenticity_token"=>"cajmPApKUoLTDgL4nYG/B3GUhj8fezKDJZWxee28cyM=", "admin"=>"true", "collection"=>{"name"=>"Test collection2", "description"=>"Test description"}, "collection_image"=>{"image"=>#<ActionDispatch::Http::UploadedFile:0x007fc261193ec8 @original_filename="michelin.png", @content_type="image/png", @headers="Content-Disposition: form-data; name=\"collection_image[image]\"; filename=\"michelin.png\"\r\nContent-Type: image/png\r\n", @tempfile=#<Tempfile:/var/folders/rf/q4l8n5k56pnbjgkdtzrhq_w00000gn/T/RackMultipart20160118-19170-1bhkabt>>}}
  [1m[35mCollection Load (0.3ms)[0m  SELECT `collections`.* FROM `collections` WHERE `collections`.`name` = 'Test collection2' LIMIT 1
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35m (0.1ms)[0m  COMMIT
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO `collections` (`created_at`, `description`, `disabled`, `image_url`, `name`, `updated_at`) VALUES ('2016-01-18 16:53:28', 'Test description', NULL, NULL, 'Test collection2', '2016-01-18 16:53:28')
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO `collection_images` (`collection_id`, `created_at`, `image_name`, `image_uid`, `text_content`, `text_hyperlink`, `text_title`, `updated_at`) VALUES (8, '2016-01-18 16:53:28', 'michelin.png', '2016/01/18/17_53_28_745_michelin.png', NULL, NULL, NULL, '2016-01-18 16:53:28')[0m
  [1m[35m (0.4ms)[0m  COMMIT
Redirected to http://localhost:3000/collection/8/edit
Completed 302 Found in 12ms (ActiveRecord: 1.5ms)


Started GET "/collection/8/edit" for 127.0.0.1 at 2016-01-18 17:53:28 +0100
Processing by CollectionsController#edit_collection as HTML
  Parameters: {"id"=>"8"}
  [1m[36mUser Load (0.3ms)[0m  [1mSELECT `users`.* FROM `users` WHERE `users`.`id` = 1 LIMIT 1[0m
  [1m[35mCollection Load (0.4ms)[0m  SELECT `collections`.* FROM `collections` WHERE `collections`.`id` = 8 LIMIT 1
  [1m[36mCollectionImage Load (0.4ms)[0m  [1mSELECT `collection_images`.* FROM `collection_images` WHERE (collection_id = 8) LIMIT 1[0m
  Rendered collections/_collection_form.html.erb (11.6ms)
  [1m[35mRestaurant Load (3.6ms)[0m  SELECT `restaurants`.* FROM `restaurants` WHERE `restaurants`.`disabled` = 0
  Rendered collections/_collection_restaurants_form.html.erb (133.8ms)
  [1m[36mRestaurant Load (0.4ms)[0m  [1mSELECT `restaurants`.* FROM `restaurants` INNER JOIN `collection_restaurants` ON `restaurants`.`id` = `collection_restaurants`.`restaurant_id` WHERE `collection_restaurants`.`collection_id` = 8[0m
  Rendered collections/_collection_restaurants_list.html.erb (2.6ms)
  Rendered collections/edit_collection.html.erb within layouts/admin (182.4ms)
Completed 200 OK in 219ms (Views: 206.7ms | ActiveRecord: 5.1ms)


Started POST "/admin/collections/add_restaurant/8" for 127.0.0.1 at 2016-01-18 17:53:33 +0100
Processing by CollectionsController#add_restaurant as */*
  Parameters: {"utf8"=>"âœ“", "authenticity_token"=>"cajmPApKUoLTDgL4nYG/B3GUhj8fezKDJZWxee28cyM=", "collection_restaurant"=>{"restaurant_id"=>"1"}, "id"=>"8"}
  [1m[35mUser Load (4.7ms)[0m  SELECT `users`.* FROM `users` WHERE `users`.`id` = 1 LIMIT 1
  [1m[36mCollection Load (0.4ms)[0m  [1mSELECT `collections`.* FROM `collections` WHERE `collections`.`id` = 8 LIMIT 1[0m
  [1m[35mRestaurant Load (1.9ms)[0m  SELECT `restaurants`.* FROM `restaurants` WHERE `restaurants`.`slug` = '1' LIMIT 1
  [1m[36mRestaurant Load (0.5ms)[0m  [1mSELECT `restaurants`.* FROM `restaurants` WHERE `restaurants`.`id` = 1 LIMIT 1[0m
  [1m[35mRestaurant Exists (0.8ms)[0m  SELECT 1 AS one FROM `restaurants` INNER JOIN `collection_restaurants` ON `restaurants`.`id` = `collection_restaurants`.`restaurant_id` WHERE `collection_restaurants`.`collection_id` = 8 AND `restaurants`.`id` = 1 LIMIT 1
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35m (0.4ms)[0m  INSERT INTO `collection_restaurants` (`collection_id`, `restaurant_id`) VALUES (8, 1)
  [1m[36m (0.7ms)[0m  [1mCOMMIT[0m
  [1m[35mRestaurant Load (0.5ms)[0m  SELECT `restaurants`.* FROM `restaurants` INNER JOIN `collection_restaurants` ON `restaurants`.`id` = `collection_restaurants`.`restaurant_id` WHERE `collection_restaurants`.`collection_id` = 8
  Rendered collections/_collection_restaurants_list.html.erb within layouts/admin (5.9ms)
Completed 200 OK in 55ms (Views: 26.2ms | ActiveRecord: 10.1ms)


Started POST "/admin/collections/add_restaurant/8" for 127.0.0.1 at 2016-01-18 17:53:37 +0100
Processing by CollectionsController#add_restaurant as */*
  Parameters: {"utf8"=>"âœ“", "authenticity_token"=>"cajmPApKUoLTDgL4nYG/B3GUhj8fezKDJZWxee28cyM=", "collection_restaurant"=>{"restaurant_id"=>"27"}, "id"=>"8"}
  [1m[36mUser Load (0.4ms)[0m  [1mSELECT `users`.* FROM `users` WHERE `users`.`id` = 1 LIMIT 1[0m
  [1m[35mCollection Load (0.3ms)[0m  SELECT `collections`.* FROM `collections` WHERE `collections`.`id` = 8 LIMIT 1
  [1m[36mRestaurant Load (2.3ms)[0m  [1mSELECT `restaurants`.* FROM `restaurants` WHERE `restaurants`.`slug` = '27' LIMIT 1[0m
  [1m[35mRestaurant Load (0.4ms)[0m  SELECT `restaurants`.* FROM `restaurants` WHERE `restaurants`.`id` = 27 LIMIT 1
  [1m[36mRestaurant Exists (0.4ms)[0m  [1mSELECT 1 AS one FROM `restaurants` INNER JOIN `collection_restaurants` ON `restaurants`.`id` = `collection_restaurants`.`restaurant_id` WHERE `collection_restaurants`.`collection_id` = 8 AND `restaurants`.`id` = 27 LIMIT 1[0m
  [1m[35m (0.1ms)[0m  BEGIN
  [1m[36m (0.2ms)[0m  [1mINSERT INTO `collection_restaurants` (`collection_id`, `restaurant_id`) VALUES (8, 27)[0m
  [1m[35m (0.6ms)[0m  COMMIT
  [1m[36mRestaurant Load (0.5ms)[0m  [1mSELECT `restaurants`.* FROM `restaurants` INNER JOIN `collection_restaurants` ON `restaurants`.`id` = `collection_restaurants`.`restaurant_id` WHERE `collection_restaurants`.`collection_id` = 8[0m
  Rendered collections/_collection_restaurants_list.html.erb within layouts/admin (5.9ms)
Completed 200 OK in 49ms (Views: 29.4ms | ActiveRecord: 5.2ms)


Started POST "/admin/collections/add_restaurant/8" for 127.0.0.1 at 2016-01-18 17:53:42 +0100
Processing by CollectionsController#add_restaurant as */*
  Parameters: {"utf8"=>"âœ“", "authenticity_token"=>"cajmPApKUoLTDgL4nYG/B3GUhj8fezKDJZWxee28cyM=", "collection_restaurant"=>{"restaurant_id"=>"45"}, "id"=>"8"}
  [1m[35mUser Load (0.5ms)[0m  SELECT `users`.* FROM `users` WHERE `users`.`id` = 1 LIMIT 1
  [1m[36mCollection Load (0.3ms)[0m  [1mSELECT `collections`.* FROM `collections` WHERE `collections`.`id` = 8 LIMIT 1[0m
  [1m[35mRestaurant Load (2.4ms)[0m  SELECT `restaurants`.* FROM `restaurants` WHERE `restaurants`.`slug` = '45' LIMIT 1
  [1m[36mRestaurant Load (0.6ms)[0m  [1mSELECT `restaurants`.* FROM `restaurants` WHERE `restaurants`.`id` = 45 LIMIT 1[0m
  [1m[35mRestaurant Exists (1.8ms)[0m  SELECT 1 AS one FROM `restaurants` INNER JOIN `collection_restaurants` ON `restaurants`.`id` = `collection_restaurants`.`restaurant_id` WHERE `collection_restaurants`.`collection_id` = 8 AND `restaurants`.`id` = 45 LIMIT 1
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35m (0.1ms)[0m  INSERT INTO `collection_restaurants` (`collection_id`, `restaurant_id`) VALUES (8, 45)
  [1m[36m (1.5ms)[0m  [1mCOMMIT[0m
  [1m[35mRestaurant Load (0.5ms)[0m  SELECT `restaurants`.* FROM `restaurants` INNER JOIN `collection_restaurants` ON `restaurants`.`id` = `collection_restaurants`.`restaurant_id` WHERE `collection_restaurants`.`collection_id` = 8
  Rendered collections/_collection_restaurants_list.html.erb within layouts/admin (6.7ms)
Completed 200 OK in 75ms (Views: 51.1ms | ActiveRecord: 7.8ms)


Started GET "/admin/restaurants" for 127.0.0.1 at 2016-01-18 17:53:47 +0100
Processing by RestaurantsController#index as HTML
  [1m[36mUser Load (0.2ms)[0m  [1mSELECT `users`.* FROM `users` WHERE `users`.`id` = 1 LIMIT 1[0m
  Rendered shared/_restaurant_manage_tabs.html.erb (0.8ms)
  Rendered restaurants/_condition_fields.html.erb (14.9ms)
  [1m[35mRestaurant Load (0.9ms)[0m  SELECT `restaurants`.* FROM `restaurants` ORDER BY disabled ASC,created_at DESC LIMIT 12 OFFSET 0
  [1m[36mPhoto Load (0.4ms)[0m  [1mSELECT `photos`.* FROM `photos` WHERE (restaurant_id = 876 and cover = true and status = 1) LIMIT 1[0m
  [1m[35mPhoto Load (0.3ms)[0m  SELECT `photos`.* FROM `photos` WHERE `photos`.`restaurant_id` = 876 AND `photos`.`status` = 1 ORDER BY restaurant_id ASC, created_at DESC LIMIT 1
  [1m[36mPhoto Load (0.3ms)[0m  [1mSELECT `photos`.* FROM `photos` WHERE (restaurant_id = 851 and cover = true and status = 1) LIMIT 1[0m
  [1m[35mPhoto Load (0.3ms)[0m  SELECT `photos`.* FROM `photos` WHERE `photos`.`restaurant_id` = 851 AND `photos`.`status` = 1 ORDER BY restaurant_id ASC, created_at DESC LIMIT 1
  [1m[36mPhoto Load (0.4ms)[0m  [1mSELECT `photos`.* FROM `photos` WHERE (restaurant_id = 693 and cover = true and status = 1) LIMIT 1[0m
  [1m[35mPhoto Load (0.3ms)[0m  SELECT `photos`.* FROM `photos` WHERE `photos`.`restaurant_id` = 693 AND `photos`.`status` = 1 ORDER BY restaurant_id ASC, created_at DESC LIMIT 1
  [1m[36mPhoto Load (0.4ms)[0m  [1mSELECT `photos`.* FROM `photos` WHERE (restaurant_id = 686 and cover = true and status = 1) LIMIT 1[0m
  [1m[35mPhoto Load (0.3ms)[0m  SELECT `photos`.* FROM `photos` WHERE `photos`.`restaurant_id` = 686 AND `photos`.`status` = 1 ORDER BY restaurant_id ASC, created_at DESC LIMIT 1
  [1m[36mPhoto Load (0.6ms)[0m  [1mSELECT `photos`.* FROM `photos` WHERE (restaurant_id = 669 and cover = true and status = 1) LIMIT 1[0m
  [1m[35mPhoto Load (1.2ms)[0m  SELECT `photos`.* FROM `photos` WHERE `photos`.`restaurant_id` = 669 AND `photos`.`status` = 1 ORDER BY restaurant_id ASC, created_at DESC LIMIT 1
  [1m[36mPhoto Load (0.4ms)[0m  [1mSELECT `photos`.* FROM `photos` WHERE (restaurant_id = 251 and cover = true and status = 1) LIMIT 1[0m
  [1m[35mPhoto Load (0.4ms)[0m  SELECT `photos`.* FROM `photos` WHERE `photos`.`restaurant_id` = 251 AND `photos`.`status` = 1 ORDER BY restaurant_id ASC, created_at DESC LIMIT 1
  [1m[36mPhoto Load (0.8ms)[0m  [1mSELECT `photos`.* FROM `photos` WHERE (restaurant_id = 250 and cover = true and status = 1) LIMIT 1[0m
  [1m[35mPhoto Load (0.5ms)[0m  SELECT `photos`.* FROM `photos` WHERE `photos`.`restaurant_id` = 250 AND `photos`.`status` = 1 ORDER BY restaurant_id ASC, created_at DESC LIMIT 1
  [1m[36mPhoto Load (0.5ms)[0m  [1mSELECT `photos`.* FROM `photos` WHERE (restaurant_id = 237 and cover = true and status = 1) LIMIT 1[0m
  [1m[35mPhoto Load (1.2ms)[0m  SELECT `photos`.* FROM `photos` WHERE `photos`.`restaurant_id` = 237 AND `photos`.`status` = 1 ORDER BY restaurant_id ASC, created_at DESC LIMIT 1
  [1m[36mPhoto Load (0.5ms)[0m  [1mSELECT `photos`.* FROM `photos` WHERE (restaurant_id = 231 and cover = true and status = 1) LIMIT 1[0m
  [1m[35mPhoto Load (4.4ms)[0m  SELECT `photos`.* FROM `photos` WHERE `photos`.`restaurant_id` = 231 AND `photos`.`status` = 1 ORDER BY restaurant_id ASC, created_at DESC LIMIT 1
  [1m[36mPhoto Load (0.7ms)[0m  [1mSELECT `photos`.* FROM `photos` WHERE (restaurant_id = 222 and cover = true and status = 1) LIMIT 1[0m
  [1m[35mPhoto Load (0.3ms)[0m  SELECT `photos`.* FROM `photos` WHERE `photos`.`restaurant_id` = 222 AND `photos`.`status` = 1 ORDER BY restaurant_id ASC, created_at DESC LIMIT 1
  [1m[36mPhoto Load (0.9ms)[0m  [1mSELECT `photos`.* FROM `photos` WHERE (restaurant_id = 221 and cover = true and status = 1) LIMIT 1[0m
  [1m[35mPhoto Load (0.7ms)[0m  SELECT `photos`.* FROM `photos` WHERE `photos`.`restaurant_id` = 221 AND `photos`.`status` = 1 ORDER BY restaurant_id ASC, created_at DESC LIMIT 1
  [1m[36mPhoto Load (0.5ms)[0m  [1mSELECT `photos`.* FROM `photos` WHERE (restaurant_id = 216 and cover = true and status = 1) LIMIT 1[0m
  [1m[35mPhoto Load (0.3ms)[0m  SELECT `photos`.* FROM `photos` WHERE `photos`.`restaurant_id` = 216 AND `photos`.`status` = 1 ORDER BY restaurant_id ASC, created_at DESC LIMIT 1
  [1m[36m (0.6ms)[0m  [1mSELECT COUNT(*) FROM `restaurants` [0m
  Rendered restaurants/index.html.erb within layouts/admin (155.3ms)
Completed 200 OK in 179ms (Views: 157.5ms | ActiveRecord: 18.5ms)


Started GET "/admin/collections" for 127.0.0.1 at 2016-01-18 17:53:48 +0100
Processing by CollectionsController#index as HTML
  Rendered shared/_restaurant_manage_tabs.html.erb (1.2ms)
  [1m[35mCollection Load (1.9ms)[0m  SELECT `collections`.* FROM `collections` ORDER BY name ASC, created_at DESC LIMIT 12 OFFSET 0
  [1m[36mCollectionImage Load (0.8ms)[0m  [1mSELECT `collection_images`.* FROM `collection_images` WHERE (collection_id = 3) LIMIT 1[0m
  [1m[35mCollectionImage Load (0.2ms)[0m  SELECT `collection_images`.* FROM `collection_images` WHERE (collection_id = 5) LIMIT 1
  [1m[36mCollectionImage Load (0.2ms)[0m  [1mSELECT `collection_images`.* FROM `collection_images` WHERE (collection_id = 8) LIMIT 1[0m
  [1m[35m (0.6ms)[0m  SELECT COUNT(*) FROM `collections` 
  Rendered collections/index.erb within layouts/admin (24.7ms)
  [1m[36mUser Load (0.5ms)[0m  [1mSELECT `users`.* FROM `users` WHERE `users`.`id` = 1 LIMIT 1[0m
Completed 200 OK in 49ms (Views: 43.7ms | ActiveRecord: 4.2ms)


Started POST "/admin/collections/8/disable_toggle" for 127.0.0.1 at 2016-01-18 17:53:55 +0100
Processing by CollectionsController#disable_toggle as JS
  Parameters: {"id"=>"8"}
  [1m[35mCollection Load (1.9ms)[0m  SELECT `collections`.* FROM `collections` WHERE `collections`.`id` = 8 LIMIT 1
  [1m[36m (0.5ms)[0m  [1mBEGIN[0m
  [1m[35m (0.3ms)[0m  UPDATE `collections` SET `disabled` = 0, `updated_at` = '2016-01-18 16:53:55' WHERE `collections`.`id` = 8
  [1m[36m (0.5ms)[0m  [1mCOMMIT[0m
  Rendered collections/disable_toggle.js.erb (0.5ms)
Completed 200 OK in 45ms (Views: 34.7ms | ActiveRecord: 3.2ms)


Started POST "/admin/collections/8/disable_toggle" for 127.0.0.1 at 2016-01-18 17:53:57 +0100
Processing by CollectionsController#disable_toggle as JS
  Parameters: {"id"=>"8"}
  [1m[35mCollection Load (0.2ms)[0m  SELECT `collections`.* FROM `collections` WHERE `collections`.`id` = 8 LIMIT 1
  [1m[36m (0.2ms)[0m  [1mBEGIN[0m
  [1m[35m (0.2ms)[0m  UPDATE `collections` SET `disabled` = 1, `updated_at` = '2016-01-18 16:53:57' WHERE `collections`.`id` = 8
  [1m[36m (21.1ms)[0m  [1mCOMMIT[0m
  Rendered collections/disable_toggle.js.erb (0.2ms)
Completed 200 OK in 63ms (Views: 36.9ms | ActiveRecord: 21.7ms)


Started GET "/collection/8/edit" for 127.0.0.1 at 2016-01-18 17:53:59 +0100
Processing by CollectionsController#edit_collection as HTML
  Parameters: {"id"=>"8"}
  [1m[35mUser Load (0.4ms)[0m  SELECT `users`.* FROM `users` WHERE `users`.`id` = 1 LIMIT 1
  [1m[36mCollection Load (0.2ms)[0m  [1mSELECT `collections`.* FROM `collections` WHERE `collections`.`id` = 8 LIMIT 1[0m
  [1m[35mCollectionImage Load (2.1ms)[0m  SELECT `collection_images`.* FROM `collection_images` WHERE (collection_id = 8) LIMIT 1
  Rendered collections/_collection_form.html.erb (13.9ms)
  [1m[36mRestaurant Load (4.5ms)[0m  [1mSELECT `restaurants`.* FROM `restaurants` WHERE `restaurants`.`disabled` = 0[0m
  Rendered collections/_collection_restaurants_form.html.erb (127.4ms)
  [1m[35mRestaurant Load (0.5ms)[0m  SELECT `restaurants`.* FROM `restaurants` INNER JOIN `collection_restaurants` ON `restaurants`.`id` = `collection_restaurants`.`restaurant_id` WHERE `collection_restaurants`.`collection_id` = 8
  Rendered collections/_collection_restaurants_list.html.erb (4.2ms)
  Rendered collections/edit_collection.html.erb within layouts/admin (163.6ms)
Completed 200 OK in 188ms (Views: 176.0ms | ActiveRecord: 7.7ms)


Started POST "/admin/collections/8/remove_restaurant/45" for 127.0.0.1 at 2016-01-18 17:54:05 +0100
Processing by CollectionsController#remove_restaurant as JS
  Parameters: {"id"=>"8", "restaurant_id"=>"45"}
  [1m[36mCollection Load (0.4ms)[0m  [1mSELECT `collections`.* FROM `collections` WHERE `collections`.`id` = 8 LIMIT 1[0m
  [1m[35mRestaurant Load (1.4ms)[0m  SELECT `restaurants`.* FROM `restaurants` INNER JOIN `collection_restaurants` ON `restaurants`.`id` = `collection_restaurants`.`restaurant_id` WHERE `collection_restaurants`.`collection_id` = 8 AND `restaurants`.`slug` = '45' LIMIT 1
  [1m[36mRestaurant Load (4.2ms)[0m  [1mSELECT `restaurants`.* FROM `restaurants` INNER JOIN `collection_restaurants` ON `restaurants`.`id` = `collection_restaurants`.`restaurant_id` WHERE `collection_restaurants`.`collection_id` = 8 AND `restaurants`.`id` = 45 LIMIT 1[0m
  [1m[35m (0.1ms)[0m  BEGIN
  [1m[36m (0.3ms)[0m  [1mDELETE FROM `collection_restaurants` WHERE `collection_restaurants`.`collection_id` = 8 AND `collection_restaurants`.`restaurant_id` IN (45)[0m
  [1m[35m (0.6ms)[0m  COMMIT
  Rendered collections/remove_restaurant.js.erb (0.1ms)
Completed 200 OK in 56ms (Views: 39.5ms | ActiveRecord: 7.0ms)


Started GET "/" for 127.0.0.1 at 2016-01-19 14:00:01 +0100
Processing by PagesController#home as HTML
  [1m[36mAdminPhoto Load (50.5ms)[0m  [1mSELECT `admin_photos`.* FROM `admin_photos` WHERE `admin_photos`.`image_type` = 1 ORDER BY RAND() LIMIT 1[0m
  [1m[35mFilter Load (15.4ms)[0m  SELECT `filters`.* FROM `filters` WHERE (code = 'cuisine') ORDER BY name ASC
  [1m[36mUser Load (11.5ms)[0m  [1mSELECT `users`.* FROM `users` WHERE `users`.`gem_hunter` = 1 LIMIT 3[0m
  [1m[35mAdminPhoto Load (0.3ms)[0m  SELECT `admin_photos`.* FROM `admin_photos` WHERE `admin_photos`.`image_type` = 1 ORDER BY `admin_photos`.`id` DESC LIMIT 1
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT `admin_photos`.* FROM `admin_photos` WHERE `admin_photos`.`image_type` = 1 ORDER BY `admin_photos`.`id` DESC LIMIT 1[0m
  Rendered pages/home.html.slim within layouts/application_home (3.9ms)
Completed 500 Internal Server Error in 492ms

ActionView::Template::Error (undefined method `text_title' for nil:NilClass):
    3:     = image_tag homepage_bg_photo, :width => "100%" , class: "random-background"
    4:     .hyperlinked_text
    5:       span.title_text_hypelink 
    6:         = link_to home_page_text[0], format_hyperlink(home_page_text[2]) if home_page_text
    7:       - if home_page_text[1].present?
    8:         span.content_text_hypelink 
    9:           | - 
  app/helpers/admin_photos_helper.rb:28:in `home_page_text'
  app/views/pages/home.html.slim:6:in `_app_views_pages_home_html_slim___3291055431736903596_70236320938720'
  app/controllers/pages_controller.rb:23:in `home'


  Rendered /Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_dispatch/middleware/templates/rescues/_trace.erb (2.4ms)
  Rendered /Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_dispatch/middleware/templates/rescues/_request_and_response.erb (1.9ms)
  Rendered /Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_dispatch/middleware/templates/rescues/template_error.erb within rescues/layout (77.4ms)


Started GET "/" for 127.0.0.1 at 2016-01-19 14:00:20 +0100
Processing by PagesController#home as HTML
  [1m[35mAdminPhoto Load (2.1ms)[0m  SELECT `admin_photos`.* FROM `admin_photos` WHERE `admin_photos`.`image_type` = 1 ORDER BY RAND() LIMIT 1
  [1m[36mFilter Load (0.5ms)[0m  [1mSELECT `filters`.* FROM `filters` WHERE (code = 'cuisine') ORDER BY name ASC[0m
  [1m[35mUser Load (1.5ms)[0m  SELECT `users`.* FROM `users` WHERE `users`.`gem_hunter` = 1 LIMIT 3
  [1m[36mAdminPhoto Load (0.2ms)[0m  [1mSELECT `admin_photos`.* FROM `admin_photos` WHERE `admin_photos`.`image_type` = 1 ORDER BY `admin_photos`.`id` DESC LIMIT 1[0m
  [1m[35mCACHE (0.0ms)[0m  SELECT `admin_photos`.* FROM `admin_photos` WHERE `admin_photos`.`image_type` = 1 ORDER BY `admin_photos`.`id` DESC LIMIT 1
  Rendered pages/home.html.slim within layouts/application_home (2.8ms)
Completed 500 Internal Server Error in 16ms

ActionView::Template::Error (undefined method `text_title' for nil:NilClass):
    3:     = image_tag homepage_bg_photo, :width => "100%" , class: "random-background"
    4:     .hyperlinked_text
    5:       span.title_text_hypelink 
    6:         = link_to home_page_text[0], format_hyperlink(home_page_text[2]) if home_page_text
    7:       - if home_page_text[1].present?
    8:         span.content_text_hypelink 
    9:           | - 
  app/helpers/admin_photos_helper.rb:28:in `home_page_text'
  app/views/pages/home.html.slim:6:in `_app_views_pages_home_html_slim___3291055431736903596_70236320938720'
  app/controllers/pages_controller.rb:23:in `home'


  Rendered /Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_dispatch/middleware/templates/rescues/_trace.erb (2.5ms)
  Rendered /Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_dispatch/middleware/templates/rescues/_request_and_response.erb (1.4ms)
  Rendered /Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_dispatch/middleware/templates/rescues/template_error.erb within rescues/layout (46.5ms)


Started GET "/admin/collections" for 127.0.0.1 at 2016-01-19 14:00:31 +0100
Processing by CollectionsController#index as HTML
  Rendered shared/_restaurant_manage_tabs.html.erb (1.4ms)
  [1m[36mCollection Load (0.3ms)[0m  [1mSELECT `collections`.* FROM `collections` ORDER BY name ASC, created_at DESC LIMIT 12 OFFSET 0[0m
  [1m[35m (18.6ms)[0m  SELECT COUNT(*) FROM `collections` 
  Rendered collections/index.erb within layouts/admin (58.1ms)
  [1m[36mUser Load (0.9ms)[0m  [1mSELECT `users`.* FROM `users` WHERE `users`.`id` = 1 LIMIT 1[0m
  [1m[35m (0.2ms)[0m  BEGIN
  [1m[36m (0.2ms)[0m  [1mCOMMIT[0m
Completed 401 Unauthorized in 149ms


Started GET "/admin/collections" for 127.0.0.1 at 2016-01-19 14:00:31 +0100
Processing by CollectionsController#index as HTML
  Rendered shared/_restaurant_manage_tabs.html.erb (0.6ms)
  [1m[35mCollection Load (0.3ms)[0m  SELECT `collections`.* FROM `collections` ORDER BY name ASC, created_at DESC LIMIT 12 OFFSET 0
  [1m[36m (0.2ms)[0m  [1mSELECT COUNT(*) FROM `collections` [0m
  Rendered collections/index.erb within layouts/admin (11.5ms)
Completed 500 Internal Server Error in 19ms

ActionView::Template::Error (undefined method `username' for nil:NilClass):
    76:                 <!--<li class="divider-vertical"></li>-->
    77:                 <li class="dropdown">
    78:                   <%#= image_tag(backend_avatar_url(current_user))%>
    79:                   <a data-toggle="dropdown" class="dropdown-toggle" href="#"><%= (current_user.username.blank?)?(current_user.email):(current_user.username) %><b class="caret"></b></a>
    80:                   <ul class="dropdown-menu">
    81:                     <li><a href="#"><%= link_to "My Account",personal_information_path %></a></li>
    82:                     <li><a href="#"><%= link_to "Change password", change_password_user_registration_path %></a></li>
  app/views/layouts/admin.html.erb:79:in `_app_views_layouts_admin_html_erb__1369674410117494831_70236352937480'
  app/controllers/collections_controller.rb:20:in `index'


  Rendered /Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_dispatch/middleware/templates/rescues/_trace.erb (2.1ms)
  Rendered /Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_dispatch/middleware/templates/rescues/_request_and_response.erb (19.5ms)
  Rendered /Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_dispatch/middleware/templates/rescues/template_error.erb within rescues/layout (69.3ms)


Started GET "/admin/collections" for 127.0.0.1 at 2016-01-19 14:00:33 +0100
Processing by CollectionsController#index as HTML
  Rendered shared/_restaurant_manage_tabs.html.erb (1.5ms)
  [1m[35mCollection Load (0.4ms)[0m  SELECT `collections`.* FROM `collections` ORDER BY name ASC, created_at DESC LIMIT 12 OFFSET 0
  [1m[36m (0.2ms)[0m  [1mSELECT COUNT(*) FROM `collections` [0m
  Rendered collections/index.erb within layouts/admin (19.1ms)
Completed 500 Internal Server Error in 32ms

ActionView::Template::Error (undefined method `username' for nil:NilClass):
    76:                 <!--<li class="divider-vertical"></li>-->
    77:                 <li class="dropdown">
    78:                   <%#= image_tag(backend_avatar_url(current_user))%>
    79:                   <a data-toggle="dropdown" class="dropdown-toggle" href="#"><%= (current_user.username.blank?)?(current_user.email):(current_user.username) %><b class="caret"></b></a>
    80:                   <ul class="dropdown-menu">
    81:                     <li><a href="#"><%= link_to "My Account",personal_information_path %></a></li>
    82:                     <li><a href="#"><%= link_to "Change password", change_password_user_registration_path %></a></li>
  app/views/layouts/admin.html.erb:79:in `_app_views_layouts_admin_html_erb__1369674410117494831_70236352937480'
  app/controllers/collections_controller.rb:20:in `index'


  Rendered /Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_dispatch/middleware/templates/rescues/_trace.erb (1.7ms)
  Rendered /Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_dispatch/middleware/templates/rescues/_request_and_response.erb (1.2ms)
  Rendered /Users/kevinmuller/.rvm/gems/ruby-2.2.4/gems/actionpack-3.2.8/lib/action_dispatch/middleware/templates/rescues/template_error.erb within rescues/layout (46.2ms)
Connecting to database specified by database.yml
DEPRECATION WARNING: Passing :tag, :class and others to use is deprecated. Please invoke b.use :label, :wrap_with => {:class=>"simple_label"} instead. (called from block (2 levels) in <top (required)> at /Users/kevinmuller/halalgems_backend/config/initializers/simple_form.rb:67)


Started GET "/admin/" for 127.0.0.1 at 2016-01-19 14:01:04 +0100
  [1m[36m (0.3ms)[0m  [1mSELECT COUNT(*) FROM `filter_types` WHERE (code = 'features')[0m
  [1m[35m (0.2ms)[0m  SELECT COUNT(*) FROM `filters` WHERE (code = 'offer')
Processing by RestaurantsController#index as HTML
Redirected to http://localhost:3000/users/sign_in
Filter chain halted as :required_user_login rendered or redirected
Completed 302 Found in 3ms (ActiveRecord: 0.0ms)


Started GET "/users/sign_in" for 127.0.0.1 at 2016-01-19 14:01:04 +0100
Processing by SessionsController#new as HTML
  Rendered sessions/new.html.slim within layouts/application (30.4ms)
  Rendered layouts/_header.html.erb (2.2ms)
  Rendered layouts/_main_menu.html.slim (7.9ms)
  Rendered layouts/_sub_main_menu.html.slim (3.7ms)
  Rendered layouts/_flash_messages.html.erb (0.4ms)
  [1m[36mBasicsPage Load (0.2ms)[0m  [1mSELECT `basics_pages`.* FROM `basics_pages` WHERE `basics_pages`.`page_name` = 'Footer' LIMIT 1[0m
  Rendered layouts/_footer.html.slim (20.7ms)
Completed 200 OK in 200ms (Views: 139.6ms | ActiveRecord: 39.9ms)


Started POST "/users/sign_in" for 127.0.0.1 at 2016-01-19 14:01:14 +0100
Processing by SessionsController#create as HTML
  Parameters: {"utf8"=>"âœ“", "authenticity_token"=>"cajmPApKUoLTDgL4nYG/B3GUhj8fezKDJZWxee28cyM=", "user"=>{"email"=>"kevin.muller1220@gmail.com", "password"=>"[FILTERED]"}, "button"=>""}
  [1m[35mUser Load (0.5ms)[0m  SELECT `users`.* FROM `users` WHERE `users`.`email` = 'kevin.muller1220@gmail.com' LIMIT 1
  [1m[36m (0.2ms)[0m  [1mBEGIN[0m
  [1m[35m (0.3ms)[0m  COMMIT
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35m (0.4ms)[0m  UPDATE `users` SET `last_sign_in_at` = '2016-01-18 11:59:58', `current_sign_in_at` = '2016-01-19 13:01:14', `sign_in_count` = 8, `updated_at` = '2016-01-19 13:01:14' WHERE `users`.`id` = 1
  [1m[36m (0.5ms)[0m  [1mCOMMIT[0m
Redirected to http://localhost:3000/admin
Completed 302 Found in 71ms (ActiveRecord: 1.9ms)


Started GET "/admin" for 127.0.0.1 at 2016-01-19 14:01:15 +0100
Processing by RestaurantsController#index as HTML
  [1m[35mUser Load (0.3ms)[0m  SELECT `users`.* FROM `users` WHERE `users`.`id` = 1 LIMIT 1
  Rendered shared/_restaurant_manage_tabs.html.erb (1.6ms)
  Rendered restaurants/_condition_fields.html.erb (35.1ms)
  [1m[36mRestaurant Load (13.2ms)[0m  [1mSELECT `restaurants`.* FROM `restaurants` ORDER BY disabled ASC,created_at DESC LIMIT 12 OFFSET 0[0m
  [1m[35mPhoto Load (1.6ms)[0m  SELECT `photos`.* FROM `photos` WHERE (restaurant_id = 876 and cover = true and status = 1) LIMIT 1
  [1m[36mPhoto Load (0.9ms)[0m  [1mSELECT `photos`.* FROM `photos` WHERE `photos`.`restaurant_id` = 876 AND `photos`.`status` = 1 ORDER BY restaurant_id ASC, created_at DESC LIMIT 1[0m
  [1m[35mPhoto Load (0.6ms)[0m  SELECT `photos`.* FROM `photos` WHERE (restaurant_id = 851 and cover = true and status = 1) LIMIT 1
  [1m[36mPhoto Load (0.5ms)[0m  [1mSELECT `photos`.* FROM `photos` WHERE `photos`.`restaurant_id` = 851 AND `photos`.`status` = 1 ORDER BY restaurant_id ASC, created_at DESC LIMIT 1[0m
  [1m[35mPhoto Load (0.4ms)[0m  SELECT `photos`.* FROM `photos` WHERE (restaurant_id = 693 and cover = true and status = 1) LIMIT 1
  [1m[36mPhoto Load (0.3ms)[0m  [1mSELECT `photos`.* FROM `photos` WHERE `photos`.`restaurant_id` = 693 AND `photos`.`status` = 1 ORDER BY restaurant_id ASC, created_at DESC LIMIT 1[0m
  [1m[35mPhoto Load (0.4ms)[0m  SELECT `photos`.* FROM `photos` WHERE (restaurant_id = 686 and cover = true and status = 1) LIMIT 1
  [1m[36mPhoto Load (0.3ms)[0m  [1mSELECT `photos`.* FROM `photos` WHERE `photos`.`restaurant_id` = 686 AND `photos`.`status` = 1 ORDER BY restaurant_id ASC, created_at DESC LIMIT 1[0m
  [1m[35mPhoto Load (0.4ms)[0m  SELECT `photos`.* FROM `photos` WHERE (restaurant_id = 669 and cover = true and status = 1) LIMIT 1
  [1m[36mPhoto Load (0.3ms)[0m  [1mSELECT `photos`.* FROM `photos` WHERE `photos`.`restaurant_id` = 669 AND `photos`.`status` = 1 ORDER BY restaurant_id ASC, created_at DESC LIMIT 1[0m
  [1m[35mPhoto Load (0.4ms)[0m  SELECT `photos`.* FROM `photos` WHERE (restaurant_id = 251 and cover = true and status = 1) LIMIT 1
  [1m[36mPhoto Load (0.3ms)[0m  [1mSELECT `photos`.* FROM `photos` WHERE `photos`.`restaurant_id` = 251 AND `photos`.`status` = 1 ORDER BY restaurant_id ASC, created_at DESC LIMIT 1[0m
  [1m[35mPhoto Load (0.7ms)[0m  SELECT `photos`.* FROM `photos` WHERE (restaurant_id = 250 and cover = true and status = 1) LIMIT 1
  [1m[36mPhoto Load (0.4ms)[0m  [1mSELECT `photos`.* FROM `photos` WHERE `photos`.`restaurant_id` = 250 AND `photos`.`status` = 1 ORDER BY restaurant_id ASC, created_at DESC LIMIT 1[0m
  [1m[35mPhoto Load (0.3ms)[0m  SELECT `photos`.* FROM `photos` WHERE (restaurant_id = 237 and cover = true and status = 1) LIMIT 1
  [1m[36mPhoto Load (0.8ms)[0m  [1mSELECT `photos`.* FROM `photos` WHERE `photos`.`restaurant_id` = 237 AND `photos`.`status` = 1 ORDER BY restaurant_id ASC, created_at DESC LIMIT 1[0m
  [1m[35mPhoto Load (0.5ms)[0m  SELECT `photos`.* FROM `photos` WHERE (restaurant_id = 231 and cover = true and status = 1) LIMIT 1
  [1m[36mPhoto Load (0.3ms)[0m  [1mSELECT `photos`.* FROM `photos` WHERE `photos`.`restaurant_id` = 231 AND `photos`.`status` = 1 ORDER BY restaurant_id ASC, created_at DESC LIMIT 1[0m
  [1m[35mPhoto Load (0.3ms)[0m  SELECT `photos`.* FROM `photos` WHERE (restaurant_id = 222 and cover = true and status = 1) LIMIT 1
  [1m[36mPhoto Load (0.3ms)[0m  [1mSELECT `photos`.* FROM `photos` WHERE `photos`.`restaurant_id` = 222 AND `photos`.`status` = 1 ORDER BY restaurant_id ASC, created_at DESC LIMIT 1[0m
  [1m[35mPhoto Load (0.6ms)[0m  SELECT `photos`.* FROM `photos` WHERE (restaurant_id = 221 and cover = true and status = 1) LIMIT 1
  [1m[36mPhoto Load (0.4ms)[0m  [1mSELECT `photos`.* FROM `photos` WHERE `photos`.`restaurant_id` = 221 AND `photos`.`status` = 1 ORDER BY restaurant_id ASC, created_at DESC LIMIT 1[0m
  [1m[35mPhoto Load (0.4ms)[0m  SELECT `photos`.* FROM `photos` WHERE (restaurant_id = 216 and cover = true and status = 1) LIMIT 1
  [1m[36mPhoto Load (0.3ms)[0m  [1mSELECT `photos`.* FROM `photos` WHERE `photos`.`restaurant_id` = 216 AND `photos`.`status` = 1 ORDER BY restaurant_id ASC, created_at DESC LIMIT 1[0m
  [1m[35m (0.6ms)[0m  SELECT COUNT(*) FROM `restaurants` 
  Rendered restaurants/index.html.erb within layouts/admin (223.4ms)
Completed 200 OK in 288ms (Views: 225.8ms | ActiveRecord: 46.8ms)


Started GET "/admin/collections" for 127.0.0.1 at 2016-01-19 14:01:22 +0100
Processing by CollectionsController#index as HTML
  Rendered shared/_restaurant_manage_tabs.html.erb (0.6ms)
  [1m[36mCollection Load (0.2ms)[0m  [1mSELECT `collections`.* FROM `collections` ORDER BY name ASC, created_at DESC LIMIT 12 OFFSET 0[0m
  [1m[35m (0.1ms)[0m  SELECT COUNT(*) FROM `collections` 
  Rendered collections/index.erb within layouts/admin (17.0ms)
  [1m[36mUser Load (0.2ms)[0m  [1mSELECT `users`.* FROM `users` WHERE `users`.`id` = 1 LIMIT 1[0m
Completed 200 OK in 35ms (Views: 31.0ms | ActiveRecord: 3.1ms)


Started GET "/collection/3/edit" for 127.0.0.1 at 2016-01-19 14:01:32 +0100
Processing by CollectionsController#edit_collection as HTML
  Parameters: {"id"=>"3"}
  [1m[35mUser Load (0.3ms)[0m  SELECT `users`.* FROM `users` WHERE `users`.`id` = 1 LIMIT 1
  [1m[36mCollection Load (0.2ms)[0m  [1mSELECT `collections`.* FROM `collections` WHERE `collections`.`id` = 3 LIMIT 1[0m
  Rendered collections/_collection_form.html.erb (6.3ms)
  [1m[35mRestaurant Load (4.1ms)[0m  SELECT `restaurants`.* FROM `restaurants` WHERE `restaurants`.`disabled` = 0
  Rendered collections/_collection_restaurants_form.html.erb (66.6ms)
  [1m[36mRestaurant Load (14.1ms)[0m  [1mSELECT `restaurants`.* FROM `restaurants` INNER JOIN `collection_restaurants` ON `restaurants`.`id` = `collection_restaurants`.`restaurant_id` WHERE `collection_restaurants`.`collection_id` = 3[0m
  Rendered collections/_collection_restaurants_list.html.erb (20.0ms)
  Rendered collections/edit_collection.html.erb within layouts/admin (117.3ms)
Completed 200 OK in 168ms (Views: 117.8ms | ActiveRecord: 22.8ms)


Started PUT "/admin/collections/3" for 127.0.0.1 at 2016-01-19 14:01:43 +0100
Processing by CollectionsController#update as HTML
  Parameters: {"utf8"=>"âœ“", "authenticity_token"=>"cajmPApKUoLTDgL4nYG/B3GUhj8fezKDJZWxee28cyM=", "admin"=>"true", "collection"=>{"name"=>"abc", "description"=>"asdfsadf"}, "collection_image"=>{"image"=>#<ActionDispatch::Http::UploadedFile:0x007fcae7160d28 @original_filename="breakfast.png", @content_type="image/png", @headers="Content-Disposition: form-data; name=\"collection_image[image]\"; filename=\"breakfast.png\"\r\nContent-Type: image/png\r\n", @tempfile=#<Tempfile:/var/folders/rf/q4l8n5k56pnbjgkdtzrhq_w00000gn/T/RackMultipart20160119-21653-1nign58>>}, "id"=>"3"}
  [1m[35mUser Load (0.6ms)[0m  SELECT `users`.* FROM `users` WHERE `users`.`id` = 1 LIMIT 1
  [1m[36mCollection Load (0.2ms)[0m  [1mSELECT `collections`.* FROM `collections` WHERE `collections`.`id` = 3 LIMIT 1[0m
  [1m[35mCollectionImage Load (0.2ms)[0m  SELECT `collection_images`.* FROM `collection_images` WHERE `collection_images`.`collection_id` = 3 LIMIT 1
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35m (0.4ms)[0m  UPDATE `collection_images` SET `image_uid` = '2016/01/19/14_01_43_597_breakfast.png', `image_name` = 'breakfast.png', `updated_at` = '2016-01-19 13:01:43' WHERE `collection_images`.`id` = 3
  [1m[36m (12.6ms)[0m  [1mCOMMIT[0m
  [1m[35mCollectionImage Load (0.3ms)[0m  SELECT `collection_images`.* FROM `collection_images` WHERE (collection_id = 3) LIMIT 1
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35m (0.3ms)[0m  UPDATE `collections` SET `image_url` = 'http://localhost:3000/media/W1siZiIsIjIwMTYvMDEvMTkvMTRfMDFfNDNfNTk3X2JyZWFrZmFzdC5wbmciXSxbInAiLCJ0aHVtYiIsIjE2MHgxNjAjIl1d/breakfast.png', `updated_at` = '2016-01-19 13:01:43' WHERE `collections`.`id` = 3
  [1m[36m (7.1ms)[0m  [1mCOMMIT[0m
  [1m[35m (0.1ms)[0m  BEGIN
  [1m[36m (0.1ms)[0m  [1mCOMMIT[0m
  [1m[35m (0.1ms)[0m  BEGIN
  [1m[36m (0.1ms)[0m  [1mCOMMIT[0m
Redirected to http://localhost:3000/collection/3/edit
Completed 302 Found in 181ms (ActiveRecord: 24.5ms)


Started GET "/collection/3/edit" for 127.0.0.1 at 2016-01-19 14:01:43 +0100
Processing by CollectionsController#edit_collection as HTML
  Parameters: {"id"=>"3"}
  [1m[35mUser Load (0.3ms)[0m  SELECT `users`.* FROM `users` WHERE `users`.`id` = 1 LIMIT 1
  [1m[36mCollection Load (0.3ms)[0m  [1mSELECT `collections`.* FROM `collections` WHERE `collections`.`id` = 3 LIMIT 1[0m
  Rendered collections/_collection_form.html.erb (5.2ms)
  [1m[35mRestaurant Load (4.2ms)[0m  SELECT `restaurants`.* FROM `restaurants` WHERE `restaurants`.`disabled` = 0
  Rendered collections/_collection_restaurants_form.html.erb (89.6ms)
  [1m[36mRestaurant Load (0.3ms)[0m  [1mSELECT `restaurants`.* FROM `restaurants` INNER JOIN `collection_restaurants` ON `restaurants`.`id` = `collection_restaurants`.`restaurant_id` WHERE `collection_restaurants`.`collection_id` = 3[0m
  Rendered collections/_collection_restaurants_list.html.erb (3.1ms)
  Rendered collections/edit_collection.html.erb within layouts/admin (124.4ms)
Completed 200 OK in 160ms (Views: 152.0ms | ActiveRecord: 5.1ms)
